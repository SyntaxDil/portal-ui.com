<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Portal Universe Hub - your entry point after sign in" />
  <title>Portal Universe Hub</title>
  <link rel="stylesheet" href="/css/styles.css" />
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
</head>
<body>
  <header>
    <div class="container">
      <a href="/" class="logo">Portal UI</a>
      <nav>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/account.html">Account</a></li>
        </ul>
      </nav>
      <div id="authStatus" aria-live="polite"></div>
    </div>
  </header>

  <main>
    <div class="container">
      <section class="hero">
        <h1>Portal Universe Hub</h1>
        <p>Welcome! This is your entry point to spaces and tools once you’re signed in.</p>
      </section>

      <!-- Auth gate: shows when not signed in -->
      <section id="hubAuthGate" class="form-container" style="display:none;">
        <h2 class="mb-2">Sign in to continue</h2>
        <p>You need to log in to access the Hub.</p>
        <p>
          <a class="btn btn-primary" href="/login.html?redirect=/hub.html">Go to Login</a>
          <a class="btn" href="/Registration.html">Create an account</a>
        </p>
      </section>

      <!-- Hub content: shows when signed in -->
      <section id="hubContent" style="display:none;">
        <div class="grid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;">
          <div class="card" style="background:#111827;border:1px solid #1f2937;border-radius:10px;padding:16px;">
            <h3 style="margin:0 0 8px 0;">Temple DJ Spot</h3>
            <p style="opacity:.85;margin:0 0 12px 0;">Manage your DJ schedule and crew tools.</p>
            <a class="btn btn-primary" href="/Spaces/TempleDjs/">Enter</a>
          </div>
          <div class="card" style="background:#111827;border:1px solid #1f2937;border-radius:10px;padding:16px;">
            <h3 style="margin:0 0 8px 0;">DJ Dashboard</h3>
            <p style="opacity:.85;margin:0 0 12px 0;">View your schedule and edit your DJ profile.</p>
            <a class="btn btn-primary" href="/dj-dashboard.html">My Dashboard</a>
          </div>
          <div class="card" style="background:#111827;border:1px solid #1f2937;border-radius:10px;padding:16px;">
            <h3 style="margin:0 0 8px 0;">Doof BackBones</h3>
            <p style="opacity:.85;margin:0 0 12px 0;">Redirect entry to Temple DJ Spot.</p>
            <a class="btn" href="/DoofBackBones/">Open</a>
          </div>
          <div class="card" style="background:#111827;border:1px solid #1f2937;border-radius:10px;padding:16px;">
            <h3 style="margin:0 0 8px 0;">DropFm</h3>
            <p style="opacity:.85;margin:0 0 12px 0;">Prototype hub for DropFm.</p>
            <a class="btn" href="/Sites/DropHub/">Open</a>
          </div>
          <div class="card" style="background:#111827;border:1px solid #1f2937;border-radius:10px;padding:16px;">
            <h3 style="margin:0 0 8px 0;">JackedDnb</h3>
            <p style="opacity:.85;margin:0 0 12px 0;">Public site.</p>
            <a class="btn" href="/Sites/JackedDnb/">Open</a>
          </div>
          <div class="card" style="background:#111827;border:1px solid #1f2937;border-radius:10px;padding:16px;">
            <h3 style="margin:0 0 8px 0;">Kaitaiki Recordings</h3>
            <p style="opacity:.85;margin:0 0 12px 0;">Redirect site.</p>
            <a class="btn" href="/Sites/KaitaikiRedirect/">Open</a>
          </div>
          <div class="card" style="background:#111827;border:1px solid #1f2937;border-radius:10px;padding:16px;">
            <h3 style="margin:0 0 8px 0;">SoundWave</h3>
            <p style="opacity:.85;margin:0 0 12px 0;">Artist platform prototype.</p>
            <a class="btn" href="/Sites/soundwave---a-crowd-sourced-artist-platform/">Open</a>
          </div>
        </div>
        <p class="mt-3" style="opacity:0.8;">More spaces will appear here as they go live.</p>

        <!-- Global Chat: visible to any signed-in user -->
        <section id="hubChatSection" style="display:none;margin-top:24px;">
          <div class="card" style="background:#0b1220;border:1px solid #1f2937;border-radius:10px;padding:16px;">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
              <h3 style="margin:0;">Portal Chat</h3>
              <div id="hubChatOnline" style="font-size:12px;color:#9ca3af;">Online: —</div>
            </div>
            <div id="hubChatList" style="height:240px;overflow:auto;background:#0a0f1a;border:1px solid #1f2937;border-radius:8px;padding:8px;">
              <div style="color:#9ca3af;font-size:14px;">Loading chat…</div>
            </div>
            <form id="hubChatForm" style="display:flex;gap:8px;margin-top:10px;">
              <input id="hubChatInput" type="text" placeholder="Say something…" aria-label="Chat message"
                     style="flex:1;padding:10px;border-radius:8px;border:1px solid #374151;background:#111827;color:white;" />
              <button type="submit" class="btn btn-primary">Send</button>
            </form>
          </div>
        </section>
      </section>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 Portal UI. All rights reserved.</p>
    </div>
  </footer>

  <!-- Base scripts -->
  <script src="/js/main.js"></script>
  <script src="/js/firebase-config.js"></script>
  <script type="module" src="/js/hub.js"></script>
  <script type="module" src="/js/chat.js"></script>
  <script type="module" src="/js/auth-ui.js"></script>
</body>
</html>
