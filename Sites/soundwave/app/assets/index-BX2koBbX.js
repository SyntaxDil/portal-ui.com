(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function ex(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var rm={exports:{}},Il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function ST(){if(vv)return Il;vv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:d,ref:o!==void 0?o:null,props:c}}return Il.Fragment=e,Il.jsx=n,Il.jsxs=n,Il}var _v;function AT(){return _v||(_v=1,rm.exports=ST()),rm.exports}var u=AT(),im={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function NT(){if(xv)return Re;xv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),A=Symbol.iterator;function D(P){return P===null||typeof P!="object"?null:(P=A&&P[A]||P["@@iterator"],typeof P=="function"?P:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,z={};function Y(P,ee,F){this.props=P,this.context=ee,this.refs=z,this.updater=F||V}Y.prototype.isReactComponent={},Y.prototype.setState=function(P,ee){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ee,"setState")},Y.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function te(){}te.prototype=Y.prototype;function J(P,ee,F){this.props=P,this.context=ee,this.refs=z,this.updater=F||V}var se=J.prototype=new te;se.constructor=J,H(se,Y.prototype),se.isPureReactComponent=!0;var le=Array.isArray;function ue(){}var I={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(P,ee,F){var ce=F.ref;return{$$typeof:r,type:P,key:ee,ref:ce!==void 0?ce:null,props:F}}function j(P,ee){return R(P.type,ee,P.props)}function L(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function k(P){var ee={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(F){return ee[F]})}var C=/\/+/g;function Se(P,ee){return typeof P=="object"&&P!==null&&P.key!=null?k(""+P.key):ee.toString(36)}function pe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ue,ue):(P.status="pending",P.then(function(ee){P.status==="pending"&&(P.status="fulfilled",P.value=ee)},function(ee){P.status==="pending"&&(P.status="rejected",P.reason=ee)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function O(P,ee,F,ce,re){var fe=typeof P;(fe==="undefined"||fe==="boolean")&&(P=null);var be=!1;if(P===null)be=!0;else switch(fe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(P.$$typeof){case r:case e:be=!0;break;case x:return be=P._init,O(be(P._payload),ee,F,ce,re)}}if(be)return re=re(P),be=ce===""?"."+Se(P,0):ce,le(re)?(F="",be!=null&&(F=be.replace(C,"$&/")+"/"),O(re,ee,F,"",function(ln){return ln})):re!=null&&(L(re)&&(re=j(re,F+(re.key==null||P&&P.key===re.key?"":(""+re.key).replace(C,"$&/")+"/")+be)),ee.push(re)),1;be=0;var Fe=ce===""?".":ce+":";if(le(P))for(var We=0;We<P.length;We++)ce=P[We],fe=Fe+Se(ce,We),be+=O(ce,ee,F,fe,re);else if(We=D(P),typeof We=="function")for(P=We.call(P),We=0;!(ce=P.next()).done;)ce=ce.value,fe=Fe+Se(ce,We++),be+=O(ce,ee,F,fe,re);else if(fe==="object"){if(typeof P.then=="function")return O(pe(P),ee,F,ce,re);throw ee=String(P),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return be}function W(P,ee,F){if(P==null)return P;var ce=[],re=0;return O(P,ce,"","",function(fe){return ee.call(F,fe,re++)}),ce}function de(P){if(P._status===-1){var ee=P._result;ee=ee(),ee.then(function(F){(P._status===0||P._status===-1)&&(P._status=1,P._result=F)},function(F){(P._status===0||P._status===-1)&&(P._status=2,P._result=F)}),P._status===-1&&(P._status=0,P._result=ee)}if(P._status===1)return P._result.default;throw P._result}var xe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Ie={map:W,forEach:function(P,ee,F){W(P,function(){ee.apply(this,arguments)},F)},count:function(P){var ee=0;return W(P,function(){ee++}),ee},toArray:function(P){return W(P,function(ee){return ee})||[]},only:function(P){if(!L(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Re.Activity=w,Re.Children=Ie,Re.Component=Y,Re.Fragment=n,Re.Profiler=o,Re.PureComponent=J,Re.StrictMode=i,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Re.__COMPILER_RUNTIME={__proto__:null,c:function(P){return I.H.useMemoCache(P)}},Re.cache=function(P){return function(){return P.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(P,ee,F){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=H({},P.props),re=P.key;if(ee!=null)for(fe in ee.key!==void 0&&(re=""+ee.key),ee)!N.call(ee,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&ee.ref===void 0||(ce[fe]=ee[fe]);var fe=arguments.length-2;if(fe===1)ce.children=F;else if(1<fe){for(var be=Array(fe),Fe=0;Fe<fe;Fe++)be[Fe]=arguments[Fe+2];ce.children=be}return R(P.type,re,ce)},Re.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},Re.createElement=function(P,ee,F){var ce,re={},fe=null;if(ee!=null)for(ce in ee.key!==void 0&&(fe=""+ee.key),ee)N.call(ee,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(re[ce]=ee[ce]);var be=arguments.length-2;if(be===1)re.children=F;else if(1<be){for(var Fe=Array(be),We=0;We<be;We++)Fe[We]=arguments[We+2];re.children=Fe}if(P&&P.defaultProps)for(ce in be=P.defaultProps,be)re[ce]===void 0&&(re[ce]=be[ce]);return R(P,fe,re)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(P){return{$$typeof:p,render:P}},Re.isValidElement=L,Re.lazy=function(P){return{$$typeof:x,_payload:{_status:-1,_result:P},_init:de}},Re.memo=function(P,ee){return{$$typeof:y,type:P,compare:ee===void 0?null:ee}},Re.startTransition=function(P){var ee=I.T,F={};I.T=F;try{var ce=P(),re=I.S;re!==null&&re(F,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ue,xe)}catch(fe){xe(fe)}finally{ee!==null&&F.types!==null&&(ee.types=F.types),I.T=ee}},Re.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Re.use=function(P){return I.H.use(P)},Re.useActionState=function(P,ee,F){return I.H.useActionState(P,ee,F)},Re.useCallback=function(P,ee){return I.H.useCallback(P,ee)},Re.useContext=function(P){return I.H.useContext(P)},Re.useDebugValue=function(){},Re.useDeferredValue=function(P,ee){return I.H.useDeferredValue(P,ee)},Re.useEffect=function(P,ee){return I.H.useEffect(P,ee)},Re.useEffectEvent=function(P){return I.H.useEffectEvent(P)},Re.useId=function(){return I.H.useId()},Re.useImperativeHandle=function(P,ee,F){return I.H.useImperativeHandle(P,ee,F)},Re.useInsertionEffect=function(P,ee){return I.H.useInsertionEffect(P,ee)},Re.useLayoutEffect=function(P,ee){return I.H.useLayoutEffect(P,ee)},Re.useMemo=function(P,ee){return I.H.useMemo(P,ee)},Re.useOptimistic=function(P,ee){return I.H.useOptimistic(P,ee)},Re.useReducer=function(P,ee,F){return I.H.useReducer(P,ee,F)},Re.useRef=function(P){return I.H.useRef(P)},Re.useState=function(P){return I.H.useState(P)},Re.useSyncExternalStore=function(P,ee,F){return I.H.useSyncExternalStore(P,ee,F)},Re.useTransition=function(){return I.H.useTransition()},Re.version="19.2.0",Re}var bv;function Ym(){return bv||(bv=1,im.exports=NT()),im.exports}var T=Ym();const Qn=ex(T);var am={exports:{}},Dl={},om={exports:{}},lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function RT(){return wv||(wv=1,(function(r){function e(O,W){var de=O.length;O.push(W);e:for(;0<de;){var xe=de-1>>>1,Ie=O[xe];if(0<o(Ie,W))O[xe]=W,O[de]=Ie,de=xe;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],de=O.pop();if(de!==W){O[0]=de;e:for(var xe=0,Ie=O.length,P=Ie>>>1;xe<P;){var ee=2*(xe+1)-1,F=O[ee],ce=ee+1,re=O[ce];if(0>o(F,de))ce<Ie&&0>o(re,F)?(O[xe]=re,O[ce]=de,xe=ce):(O[xe]=F,O[ee]=de,xe=ee);else if(ce<Ie&&0>o(re,de))O[xe]=re,O[ce]=de,xe=ce;else break e}}return W}function o(O,W){var de=O.sortIndex-W.sortIndex;return de!==0?de:O.id-W.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],x=1,w=null,A=3,D=!1,V=!1,H=!1,z=!1,Y=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function se(O){for(var W=n(y);W!==null;){if(W.callback===null)i(y);else if(W.startTime<=O)i(y),W.sortIndex=W.expirationTime,e(g,W);else break;W=n(y)}}function le(O){if(H=!1,se(O),!V)if(n(g)!==null)V=!0,ue||(ue=!0,k());else{var W=n(y);W!==null&&pe(le,W.startTime-O)}}var ue=!1,I=-1,N=5,R=-1;function j(){return z?!0:!(r.unstable_now()-R<N)}function L(){if(z=!1,ue){var O=r.unstable_now();R=O;var W=!0;try{e:{V=!1,H&&(H=!1,te(I),I=-1),D=!0;var de=A;try{t:{for(se(O),w=n(g);w!==null&&!(w.expirationTime>O&&j());){var xe=w.callback;if(typeof xe=="function"){w.callback=null,A=w.priorityLevel;var Ie=xe(w.expirationTime<=O);if(O=r.unstable_now(),typeof Ie=="function"){w.callback=Ie,se(O),W=!0;break t}w===n(g)&&i(g),se(O)}else i(g);w=n(g)}if(w!==null)W=!0;else{var P=n(y);P!==null&&pe(le,P.startTime-O),W=!1}}break e}finally{w=null,A=de,D=!1}W=void 0}}finally{W?k():ue=!1}}}var k;if(typeof J=="function")k=function(){J(L)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Se=C.port2;C.port1.onmessage=L,k=function(){Se.postMessage(null)}}else k=function(){Y(L,0)};function pe(O,W){I=Y(function(){O(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(O){O.callback=null},r.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(O){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var de=A;A=W;try{return O()}finally{A=de}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var de=A;A=O;try{return W()}finally{A=de}},r.unstable_scheduleCallback=function(O,W,de){var xe=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?xe+de:xe):de=xe,O){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=de+Ie,O={id:x++,callback:W,priorityLevel:O,startTime:de,expirationTime:Ie,sortIndex:-1},de>xe?(O.sortIndex=de,e(y,O),n(g)===null&&O===n(y)&&(H?(te(I),I=-1):H=!0,pe(le,de-xe))):(O.sortIndex=Ie,e(g,O),V||D||(V=!0,ue||(ue=!0,k()))),O},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(O){var W=A;return function(){var de=A;A=W;try{return O.apply(this,arguments)}finally{A=de}}}})(lm)),lm}var Ev;function CT(){return Ev||(Ev=1,om.exports=RT()),om.exports}var cm={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function jT(){if(Tv)return tn;Tv=1;var r=Ym();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:y,implementation:x}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,tn.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,x)},tn.flushSync=function(g){var y=d.T,x=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=y,i.p=x,i.d.f()}},tn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},tn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},tn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,w=p(x,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:A,fetchPriority:D}):x==="script"&&i.d.X(g,{crossOrigin:w,integrity:A,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},tn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},tn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,w=p(x,y.crossOrigin);i.d.L(g,x,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},tn.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},tn.requestFormReset=function(g){i.d.r(g)},tn.unstable_batchedUpdates=function(g,y){return g(y)},tn.useFormState=function(g,y,x){return d.H.useFormState(g,y,x)},tn.useFormStatus=function(){return d.H.useHostTransitionStatus()},tn.version="19.2.0",tn}var Sv;function IT(){if(Sv)return cm.exports;Sv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),cm.exports=jT(),cm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function DT(){if(Av)return Dl;Av=1;var r=CT(),e=Ym(),n=IT();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(i(188))}function y(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,l=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),t;if(m===l)return g(f),s;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=m;else{for(var _=!1,E=f.child;E;){if(E===a){_=!0,a=f,l=m;break}if(E===l){_=!0,l=f,a=m;break}E=E.sibling}if(!_){for(E=m.child;E;){if(E===a){_=!0,a=m,l=f;break}if(E===l){_=!0,l=m,a=f;break}E=E.sibling}if(!_)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function x(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=x(t),s!==null)return s;t=t.sibling}return null}var w=Object.assign,A=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),J=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Se(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case Y:return"Profiler";case z:return"StrictMode";case le:return"Suspense";case ue:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case V:return"Portal";case J:return t.displayName||"Context";case te:return(t._context.displayName||"Context")+".Consumer";case se:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return s=t.displayName||null,s!==null?s:Se(t.type)||"Memo";case N:s=t._payload,t=t._init;try{return Se(t(s))}catch{}}return null}var pe=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},xe=[],Ie=-1;function P(t){return{current:t}}function ee(t){0>Ie||(t.current=xe[Ie],xe[Ie]=null,Ie--)}function F(t,s){Ie++,xe[Ie]=t.current,t.current=s}var ce=P(null),re=P(null),fe=P(null),be=P(null);function Fe(t,s){switch(F(fe,s),F(re,t),F(ce,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?B0(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=B0(s),t=q0(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ee(ce),F(ce,t)}function We(){ee(ce),ee(re),ee(fe)}function ln(t){t.memoizedState!==null&&F(be,t);var s=ce.current,a=q0(s,t.type);s!==a&&(F(re,t),F(ce,a))}function yn(t){re.current===t&&(ee(ce),ee(re)),be.current===t&&(ee(be),Nl._currentValue=de)}var cs,pa;function Wn(t){if(cs===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);cs=s&&s[1]||"",pa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cs+t+pa}var Si=!1;function ga(t,s){if(!t||Si)return"";Si=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Q){var K=Q}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(Q){K=Q}t.call(ie.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],E=m[1];if(_&&E){var M=_.split(`
`),$=E.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===$.length)for(l=M.length-1,f=$.length-1;1<=l&&0<=f&&M[l]!==$[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==$[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==$[f]){var Z=`
`+M[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=f);break}}}finally{Si=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Wn(a):""}function ed(t,s){switch(t.tag){case 26:case 27:case 5:return Wn(t.type);case 16:return Wn("Lazy");case 13:return t.child!==s&&s!==null?Wn("Suspense Fallback"):Wn("Suspense");case 19:return Wn("SuspenseList");case 0:case 15:return ga(t.type,!1);case 11:return ga(t.type.render,!1);case 1:return ga(t.type,!0);case 31:return Wn("Activity");default:return""}}function yc(t){try{var s="",a=null;do s+=ed(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ya=Object.prototype.hasOwnProperty,Ai=r.unstable_scheduleCallback,va=r.unstable_cancelCallback,td=r.unstable_shouldYield,jo=r.unstable_requestPaint,Ut=r.unstable_now,vc=r.unstable_getCurrentPriorityLevel,Nt=r.unstable_ImmediatePriority,jt=r.unstable_UserBlockingPriority,ks=r.unstable_NormalPriority,_c=r.unstable_LowPriority,Io=r.unstable_IdlePriority,nd=r.log,Ni=r.unstable_setDisableYieldValue,vr=null,Zt=null;function Ln(t){if(typeof nd=="function"&&Ni(t),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(vr,t)}catch{}}var cn=Math.clz32?Math.clz32:xc,sd=Math.log,Do=Math.LN2;function xc(t){return t>>>=0,t===0?32:31-(sd(t)/Do|0)|0}var Ri=256,us=262144,_r=4194304;function Jn(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Vn(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?f=Jn(l):(_&=E,_!==0?f=Jn(_):a||(a=E&~t,a!==0&&(f=Jn(a))))):(E=l&~m,E!==0?f=Jn(E):_!==0?f=Jn(_):a||(a=l&~t,a!==0&&(f=Jn(a)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:f}function xr(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function _a(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mo(){var t=_r;return _r<<=1,(_r&62914560)===0&&(_r=4194304),t}function Ls(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function br(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function zt(t,s,a,l,f,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,M=t.expirationTimes,$=t.hiddenUpdates;for(a=_&~a;0<a;){var Z=31-cn(a),ie=1<<Z;E[Z]=0,M[Z]=-1;var K=$[Z];if(K!==null)for($[Z]=null,Z=0;Z<K.length;Z++){var Q=K[Z];Q!==null&&(Q.lane&=-536870913)}a&=~ie}l!==0&&Oo(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function Oo(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-cn(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function wr(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-cn(a),f=1<<l;f&s|t[l]&s&&(t[l]|=s),a&=~f}}function Er(t,s){var a=s&-s;return a=(a&42)!==0?1:ko(a),(a&(t.suspendedLanes|s))!==0?0:a}function ko(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Lo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Vs(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:hv(t.type))}function bc(t,s){var a=W.p;try{return W.p=t,s()}finally{W.p=a}}var hs=Math.random().toString(36).slice(2),dt="__reactFiber$"+hs,Bt="__reactProps$"+hs,ds="__reactContainer$"+hs,Tr="__reactEvents$"+hs,fs="__reactListeners$"+hs,wc="__reactHandles$"+hs,Vo="__reactResources$"+hs,Ps="__reactMarker$"+hs;function Ci(t){delete t[dt],delete t[Bt],delete t[Tr],delete t[fs],delete t[wc]}function Us(t){var s=t[dt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[ds]||a[dt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Q0(t);t!==null;){if(a=t[dt])return a;t=Q0(t)}return s}t=a,a=t.parentNode}return null}function zs(t){if(t=t[dt]||t[ds]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function ji(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Zn(t){var s=t[Vo];return s||(s=t[Vo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function gt(t){t[Ps]=!0}var xa=new Set,Sr={};function un(t,s){ms(t,s),ms(t+"Capture",s)}function ms(t,s){for(Sr[t]=s,t=0;t<s.length;t++)xa.add(s[t])}var rd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Po={},Uo={};function Ec(t){return ya.call(Uo,t)?!0:ya.call(Po,t)?!1:rd.test(t)?Uo[t]=!0:(Po[t]=!0,!1)}function Ar(t,s,a){if(Ec(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Nr(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Pn(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function hn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tc(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function id(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ba(t){if(!t._valueTracker){var s=Tc(t)?"checked":"value";t._valueTracker=id(t,s,""+t[s])}}function zo(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Tc(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function wa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Bs=/[\n"\\]/g;function ft(t){return t.replace(Bs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Rr(t,s,a,l,f,m,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+hn(s)):t.value!==""+hn(s)&&(t.value=""+hn(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?Ea(t,_,hn(s)):a!=null?Ea(t,_,hn(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+hn(E):t.removeAttribute("name")}function Ii(t,s,a,l,f,m,_,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){ba(t);return}a=a!=null?""+hn(a):"",s=s!=null?""+hn(s):a,E||s===t.value||(t.value=s),t.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),ba(t)}function Ea(t,s,a){s==="number"&&wa(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ge(t,s,a,l){if(t=t.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=s.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+hn(a),s=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function Di(t,s,a){if(s!=null&&(s=""+hn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+hn(a):""}function Cr(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(pe(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=hn(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),ba(t)}function Un(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var ad=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bo(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||ad.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Sc(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&Bo(t,f,l)}else for(var m in s)s.hasOwnProperty(m)&&Bo(t,m,s[m])}function qo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var od=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ld=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ps(t){return ld.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function It(){}var Ta=null;function Sa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qs=null,An=null;function Ac(t){var s=zs(t);if(s&&(t=s.stateNode)){var a=t[Bt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Rr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ft(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var f=l[Bt]||null;if(!f)throw Error(i(90));Rr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&zo(l)}break e;case"textarea":Di(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Ge(t,!!a.multiple,s,!1)}}}var Ho=!1;function Nc(t,s,a){if(Ho)return t(s,a);Ho=!0;try{var l=t(s);return l}finally{if(Ho=!1,(qs!==null||An!==null)&&(Eu(),qs&&(s=qs,t=An,An=qs=null,Ac(s),t)))for(s=0;s<t.length;s++)Ac(t[s])}}function vn(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Bt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fo=!1;if(es)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){Fo=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{Fo=!1}var Nn=null,Aa=null,ys=null;function jr(){if(ys)return ys;var t,s=Aa,a=s.length,l,f="value"in Nn?Nn.value:Nn.textContent,m=f.length;for(t=0;t<a&&s[t]===f[t];t++);var _=a-t;for(l=1;l<=_&&s[a-l]===f[m-l];l++);return ys=f.slice(t,1<l?1-l:void 0)}function Mi(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ir(){return!0}function it(){return!1}function en(t){function s(a,l,f,m,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ir:it,this.isPropagationStopped=it,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),s}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=en(Hs),Dr=w({},Hs,{view:0,detail:0}),Rc=en(Dr),Mr,Na,dn,ki=w({},Dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dn&&(dn&&t.type==="mousemove"?(Mr=t.screenX-dn.screenX,Na=t.screenY-dn.screenY):Na=Mr=0,dn=t),Mr)},movementY:function(t){return"movementY"in t?t.movementY:Na}}),Cc=en(ki),Li=w({},ki,{dataTransfer:0}),jc=en(Li),Go=w({},Dr,{relatedTarget:0}),Or=en(Go),Ic=w({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ra=en(Ic),cd=w({},Hs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dc=en(cd),Vi=w({},Hs,{data:0}),$o=en(Vi),Mc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oc(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Yo[t])?!!s[t]:!1}function kr(){return Oc}var kc=w({},Dr,{key:function(t){if(t.key){var s=Mc[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Mi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ko[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(t){return t.type==="keypress"?Mi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lc=en(kc),Fs=w({},ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qo=en(Fs),Vc=w({},Dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr}),Pc=en(Vc),Uc=w({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ca=en(Uc),fn=w({},ki,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zc=en(fn),Bc=w({},Hs,{newState:0,oldState:0}),Lr=en(Bc),h=[9,13,27,32],v=es&&"CompositionEvent"in window,b=null;es&&"documentMode"in document&&(b=document.documentMode);var S=es&&"TextEvent"in window&&!b,q=es&&(!v||b&&8<b&&11>=b),X=" ",he=!1;function Xe(t,s){switch(t){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oe=!1;function Dt(t,s){switch(t){case"compositionend":return xt(s);case"keypress":return s.which!==32?null:(he=!0,X);case"textInput":return t=s.data,t===X&&he?null:t;default:return null}}function Mt(t,s){if(Oe)return t==="compositionend"||!v&&Xe(t,s)?(t=jr(),ys=Aa=Nn=null,Oe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return q&&s.locale!=="ko"?null:s.data;default:return null}}var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _n(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Vr[t.type]:s==="textarea"}function Pi(t,s,a,l){qs?An?An.push(l):An=[l]:qs=l,s=ju(s,"onChange"),0<s.length&&(a=new Oi("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var Gs=null,Xo=null;function Jw(t){k0(t,0)}function qc(t){var s=ji(t);if(zo(s))return t}function eg(t,s){if(t==="change")return s}var tg=!1;if(es){var ud;if(es){var hd="oninput"in document;if(!hd){var ng=document.createElement("div");ng.setAttribute("oninput","return;"),hd=typeof ng.oninput=="function"}ud=hd}else ud=!1;tg=ud&&(!document.documentMode||9<document.documentMode)}function sg(){Gs&&(Gs.detachEvent("onpropertychange",rg),Xo=Gs=null)}function rg(t){if(t.propertyName==="value"&&qc(Xo)){var s=[];Pi(s,Xo,t,Sa(t)),Nc(Jw,s)}}function Zw(t,s,a){t==="focusin"?(sg(),Gs=s,Xo=a,Gs.attachEvent("onpropertychange",rg)):t==="focusout"&&sg()}function eE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qc(Xo)}function tE(t,s){if(t==="click")return qc(s)}function nE(t,s){if(t==="input"||t==="change")return qc(s)}function sE(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Rn=typeof Object.is=="function"?Object.is:sE;function Wo(t,s){if(Rn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!ya.call(s,f)||!Rn(t[f],s[f]))return!1}return!0}function ig(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ag(t,s){var a=ig(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ig(a)}}function og(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?og(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function lg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=wa(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=wa(t.document)}return s}function dd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var rE=es&&"documentMode"in document&&11>=document.documentMode,ja=null,fd=null,Jo=null,md=!1;function cg(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;md||ja==null||ja!==wa(l)||(l=ja,"selectionStart"in l&&dd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Jo&&Wo(Jo,l)||(Jo=l,l=ju(fd,"onSelect"),0<l.length&&(s=new Oi("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=ja)))}function Ui(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ia={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionrun:Ui("Transition","TransitionRun"),transitionstart:Ui("Transition","TransitionStart"),transitioncancel:Ui("Transition","TransitionCancel"),transitionend:Ui("Transition","TransitionEnd")},pd={},ug={};es&&(ug=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function zi(t){if(pd[t])return pd[t];if(!Ia[t])return t;var s=Ia[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in ug)return pd[t]=s[a];return t}var hg=zi("animationend"),dg=zi("animationiteration"),fg=zi("animationstart"),iE=zi("transitionrun"),aE=zi("transitionstart"),oE=zi("transitioncancel"),mg=zi("transitionend"),pg=new Map,gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gd.push("scrollEnd");function ts(t,s){pg.set(t,s),un(s,[t])}var Hc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},zn=[],Da=0,yd=0;function Fc(){for(var t=Da,s=yd=Da=0;s<t;){var a=zn[s];zn[s++]=null;var l=zn[s];zn[s++]=null;var f=zn[s];zn[s++]=null;var m=zn[s];if(zn[s++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}m!==0&&gg(a,f,m)}}function Gc(t,s,a,l){zn[Da++]=t,zn[Da++]=s,zn[Da++]=a,zn[Da++]=l,yd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function vd(t,s,a,l){return Gc(t,s,a,l),$c(t)}function Bi(t,s){return Gc(t,null,null,s),$c(t)}function gg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-cn(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[s]:l.push(s),s.lane=a|536870912),m):null}function $c(t){if(50<xl)throw xl=0,Rf=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ma={};function lE(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,s,a,l){return new lE(t,s,a,l)}function _d(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $s(t,s){var a=t.alternate;return a===null?(a=Cn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function yg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Kc(t,s,a,l,f,m){var _=0;if(l=t,typeof t=="function")_d(t)&&(_=1);else if(typeof t=="string")_=fT(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Cn(31,a,s,f),t.elementType=R,t.lanes=m,t;case H:return qi(a.children,f,m,s);case z:_=8,f|=24;break;case Y:return t=Cn(12,a,s,f|2),t.elementType=Y,t.lanes=m,t;case le:return t=Cn(13,a,s,f),t.elementType=le,t.lanes=m,t;case ue:return t=Cn(19,a,s,f),t.elementType=ue,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:_=10;break e;case te:_=9;break e;case se:_=11;break e;case I:_=14;break e;case N:_=16,l=null;break e}_=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return s=Cn(_,a,s,f),s.elementType=t,s.type=l,s.lanes=m,s}function qi(t,s,a,l){return t=Cn(7,t,l,s),t.lanes=a,t}function xd(t,s,a){return t=Cn(6,t,null,s),t.lanes=a,t}function vg(t){var s=Cn(18,null,null,0);return s.stateNode=t,s}function bd(t,s,a){return s=Cn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var _g=new WeakMap;function Bn(t,s){if(typeof t=="object"&&t!==null){var a=_g.get(t);return a!==void 0?a:(s={value:t,source:s,stack:yc(s)},_g.set(t,s),s)}return{value:t,source:s,stack:yc(s)}}var Oa=[],ka=0,Yc=null,Zo=0,qn=[],Hn=0,Pr=null,vs=1,_s="";function Ks(t,s){Oa[ka++]=Zo,Oa[ka++]=Yc,Yc=t,Zo=s}function xg(t,s,a){qn[Hn++]=vs,qn[Hn++]=_s,qn[Hn++]=Pr,Pr=t;var l=vs;t=_s;var f=32-cn(l)-1;l&=~(1<<f),a+=1;var m=32-cn(s)+f;if(30<m){var _=f-f%5;m=(l&(1<<_)-1).toString(32),l>>=_,f-=_,vs=1<<32-cn(s)+f|a<<f|l,_s=m+t}else vs=1<<m|a<<f|l,_s=t}function wd(t){t.return!==null&&(Ks(t,1),xg(t,1,0))}function Ed(t){for(;t===Yc;)Yc=Oa[--ka],Oa[ka]=null,Zo=Oa[--ka],Oa[ka]=null;for(;t===Pr;)Pr=qn[--Hn],qn[Hn]=null,_s=qn[--Hn],qn[Hn]=null,vs=qn[--Hn],qn[Hn]=null}function bg(t,s){qn[Hn++]=vs,qn[Hn++]=_s,qn[Hn++]=Pr,vs=s.id,_s=s.overflow,Pr=t}var qt=null,at=null,Be=!1,Ur=null,Fn=!1,Td=Error(i(519));function zr(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw el(Bn(s,t)),Td}function wg(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[dt]=t,s[Bt]=l,a){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(a=0;a<wl.length;a++)Le(wl[a],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":Le("invalid",s),Ii(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Le("invalid",s);break;case"textarea":Le("invalid",s),Cr(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||U0(s.textContent,a)?(l.popover!=null&&(Le("beforetoggle",s),Le("toggle",s)),l.onScroll!=null&&Le("scroll",s),l.onScrollEnd!=null&&Le("scrollend",s),l.onClick!=null&&(s.onclick=It),s=!0):s=!1,s||zr(t,!0)}function Eg(t){for(qt=t.return;qt;)switch(qt.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:qt=qt.return}}function La(t){if(t!==qt)return!1;if(!Be)return Eg(t),Be=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Hf(t.type,t.memoizedProps)),a=!a),a&&at&&zr(t),Eg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));at=Y0(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));at=Y0(t)}else s===27?(s=at,ei(t.type)?(t=Yf,Yf=null,at=t):at=s):at=qt?$n(t.stateNode.nextSibling):null;return!0}function Hi(){at=qt=null,Be=!1}function Sd(){var t=Ur;return t!==null&&(En===null?En=t:En.push.apply(En,t),Ur=null),t}function el(t){Ur===null?Ur=[t]:Ur.push(t)}var Ad=P(null),Fi=null,Ys=null;function Br(t,s,a){F(Ad,s._currentValue),s._currentValue=a}function Qs(t){t._currentValue=Ad.current,ee(Ad)}function Nd(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Rd(t,s,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var M=0;M<s.length;M++)if(E.context===s[M]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),Nd(m.return,a,t),l||(_=null);break e}m=E.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Nd(_,a,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Va(t,s,a,l){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var E=f.type;Rn(f.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(f===be.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Nl):t=[Nl])}f=f.return}t!==null&&Rd(s,t,a,l),s.flags|=262144}function Qc(t){for(t=t.firstContext;t!==null;){if(!Rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gi(t){Fi=t,Ys=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ht(t){return Tg(Fi,t)}function Xc(t,s){return Fi===null&&Gi(t),Tg(t,s)}function Tg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ys===null){if(t===null)throw Error(i(308));Ys=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Ys=Ys.next=s;return a}var cE=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},uE=r.unstable_scheduleCallback,hE=r.unstable_NormalPriority,bt={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cd(){return{controller:new cE,data:new Map,refCount:0}}function tl(t){t.refCount--,t.refCount===0&&uE(hE,function(){t.controller.abort()})}var nl=null,jd=0,Pa=0,Ua=null;function dE(t,s){if(nl===null){var a=nl=[];jd=0,Pa=Of(),Ua={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jd++,s.then(Sg,Sg),s}function Sg(){if(--jd===0&&nl!==null){Ua!==null&&(Ua.status="fulfilled");var t=nl;nl=null,Pa=0,Ua=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function fE(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Ag=O.S;O.S=function(t,s){c0=Ut(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&dE(t,s),Ag!==null&&Ag(t,s)};var $i=P(null);function Id(){var t=$i.current;return t!==null?t:rt.pooledCache}function Wc(t,s){s===null?F($i,$i.current):F($i,s.pool)}function Ng(){var t=Id();return t===null?null:{parent:bt._currentValue,pool:t}}var za=Error(i(460)),Dd=Error(i(474)),Jc=Error(i(542)),Zc={then:function(){}};function Rg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Cg(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(It,It),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Ig(t),t;default:if(typeof s.status=="string")s.then(It,It);else{if(t=rt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Ig(t),t}throw Yi=s,za}}function Ki(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Yi=a,za):a}}var Yi=null;function jg(){if(Yi===null)throw Error(i(459));var t=Yi;return Yi=null,t}function Ig(t){if(t===za||t===Jc)throw Error(i(483))}var Ba=null,sl=0;function eu(t){var s=sl;return sl+=1,Ba===null&&(Ba=[]),Cg(Ba,t,s)}function rl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function tu(t,s){throw s.$$typeof===A?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Dg(t){function s(B,U){if(t){var G=B.deletions;G===null?(B.deletions=[U],B.flags|=16):G.push(U)}}function a(B,U){if(!t)return null;for(;U!==null;)s(B,U),U=U.sibling;return null}function l(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function f(B,U){return B=$s(B,U),B.index=0,B.sibling=null,B}function m(B,U,G){return B.index=G,t?(G=B.alternate,G!==null?(G=G.index,G<U?(B.flags|=67108866,U):G):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function _(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function E(B,U,G,ne){return U===null||U.tag!==6?(U=xd(G,B.mode,ne),U.return=B,U):(U=f(U,G),U.return=B,U)}function M(B,U,G,ne){var we=G.type;return we===H?Z(B,U,G.props.children,ne,G.key):U!==null&&(U.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&Ki(we)===U.type)?(U=f(U,G.props),rl(U,G),U.return=B,U):(U=Kc(G.type,G.key,G.props,null,B.mode,ne),rl(U,G),U.return=B,U)}function $(B,U,G,ne){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=bd(G,B.mode,ne),U.return=B,U):(U=f(U,G.children||[]),U.return=B,U)}function Z(B,U,G,ne,we){return U===null||U.tag!==7?(U=qi(G,B.mode,ne,we),U.return=B,U):(U=f(U,G),U.return=B,U)}function ie(B,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=xd(""+U,B.mode,G),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return G=Kc(U.type,U.key,U.props,null,B.mode,G),rl(G,U),G.return=B,G;case V:return U=bd(U,B.mode,G),U.return=B,U;case N:return U=Ki(U),ie(B,U,G)}if(pe(U)||k(U))return U=qi(U,B.mode,G,null),U.return=B,U;if(typeof U.then=="function")return ie(B,eu(U),G);if(U.$$typeof===J)return ie(B,Xc(B,U),G);tu(B,U)}return null}function K(B,U,G,ne){var we=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return we!==null?null:E(B,U,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case D:return G.key===we?M(B,U,G,ne):null;case V:return G.key===we?$(B,U,G,ne):null;case N:return G=Ki(G),K(B,U,G,ne)}if(pe(G)||k(G))return we!==null?null:Z(B,U,G,ne,null);if(typeof G.then=="function")return K(B,U,eu(G),ne);if(G.$$typeof===J)return K(B,U,Xc(B,G),ne);tu(B,G)}return null}function Q(B,U,G,ne,we){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(G)||null,E(U,B,""+ne,we);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case D:return B=B.get(ne.key===null?G:ne.key)||null,M(U,B,ne,we);case V:return B=B.get(ne.key===null?G:ne.key)||null,$(U,B,ne,we);case N:return ne=Ki(ne),Q(B,U,G,ne,we)}if(pe(ne)||k(ne))return B=B.get(G)||null,Z(U,B,ne,we,null);if(typeof ne.then=="function")return Q(B,U,G,eu(ne),we);if(ne.$$typeof===J)return Q(B,U,G,Xc(U,ne),we);tu(U,ne)}return null}function ye(B,U,G,ne){for(var we=null,$e=null,_e=U,Me=U=0,Pe=null;_e!==null&&Me<G.length;Me++){_e.index>Me?(Pe=_e,_e=null):Pe=_e.sibling;var Ke=K(B,_e,G[Me],ne);if(Ke===null){_e===null&&(_e=Pe);break}t&&_e&&Ke.alternate===null&&s(B,_e),U=m(Ke,U,Me),$e===null?we=Ke:$e.sibling=Ke,$e=Ke,_e=Pe}if(Me===G.length)return a(B,_e),Be&&Ks(B,Me),we;if(_e===null){for(;Me<G.length;Me++)_e=ie(B,G[Me],ne),_e!==null&&(U=m(_e,U,Me),$e===null?we=_e:$e.sibling=_e,$e=_e);return Be&&Ks(B,Me),we}for(_e=l(_e);Me<G.length;Me++)Pe=Q(_e,B,Me,G[Me],ne),Pe!==null&&(t&&Pe.alternate!==null&&_e.delete(Pe.key===null?Me:Pe.key),U=m(Pe,U,Me),$e===null?we=Pe:$e.sibling=Pe,$e=Pe);return t&&_e.forEach(function(ii){return s(B,ii)}),Be&&Ks(B,Me),we}function Te(B,U,G,ne){if(G==null)throw Error(i(151));for(var we=null,$e=null,_e=U,Me=U=0,Pe=null,Ke=G.next();_e!==null&&!Ke.done;Me++,Ke=G.next()){_e.index>Me?(Pe=_e,_e=null):Pe=_e.sibling;var ii=K(B,_e,Ke.value,ne);if(ii===null){_e===null&&(_e=Pe);break}t&&_e&&ii.alternate===null&&s(B,_e),U=m(ii,U,Me),$e===null?we=ii:$e.sibling=ii,$e=ii,_e=Pe}if(Ke.done)return a(B,_e),Be&&Ks(B,Me),we;if(_e===null){for(;!Ke.done;Me++,Ke=G.next())Ke=ie(B,Ke.value,ne),Ke!==null&&(U=m(Ke,U,Me),$e===null?we=Ke:$e.sibling=Ke,$e=Ke);return Be&&Ks(B,Me),we}for(_e=l(_e);!Ke.done;Me++,Ke=G.next())Ke=Q(_e,B,Me,Ke.value,ne),Ke!==null&&(t&&Ke.alternate!==null&&_e.delete(Ke.key===null?Me:Ke.key),U=m(Ke,U,Me),$e===null?we=Ke:$e.sibling=Ke,$e=Ke);return t&&_e.forEach(function(TT){return s(B,TT)}),Be&&Ks(B,Me),we}function st(B,U,G,ne){if(typeof G=="object"&&G!==null&&G.type===H&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case D:e:{for(var we=G.key;U!==null;){if(U.key===we){if(we=G.type,we===H){if(U.tag===7){a(B,U.sibling),ne=f(U,G.props.children),ne.return=B,B=ne;break e}}else if(U.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&Ki(we)===U.type){a(B,U.sibling),ne=f(U,G.props),rl(ne,G),ne.return=B,B=ne;break e}a(B,U);break}else s(B,U);U=U.sibling}G.type===H?(ne=qi(G.props.children,B.mode,ne,G.key),ne.return=B,B=ne):(ne=Kc(G.type,G.key,G.props,null,B.mode,ne),rl(ne,G),ne.return=B,B=ne)}return _(B);case V:e:{for(we=G.key;U!==null;){if(U.key===we)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){a(B,U.sibling),ne=f(U,G.children||[]),ne.return=B,B=ne;break e}else{a(B,U);break}else s(B,U);U=U.sibling}ne=bd(G,B.mode,ne),ne.return=B,B=ne}return _(B);case N:return G=Ki(G),st(B,U,G,ne)}if(pe(G))return ye(B,U,G,ne);if(k(G)){if(we=k(G),typeof we!="function")throw Error(i(150));return G=we.call(G),Te(B,U,G,ne)}if(typeof G.then=="function")return st(B,U,eu(G),ne);if(G.$$typeof===J)return st(B,U,Xc(B,G),ne);tu(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(a(B,U.sibling),ne=f(U,G),ne.return=B,B=ne):(a(B,U),ne=xd(G,B.mode,ne),ne.return=B,B=ne),_(B)):a(B,U)}return function(B,U,G,ne){try{sl=0;var we=st(B,U,G,ne);return Ba=null,we}catch(_e){if(_e===za||_e===Jc)throw _e;var $e=Cn(29,_e,null,B.mode);return $e.lanes=ne,$e.return=B,$e}finally{}}}var Qi=Dg(!0),Mg=Dg(!1),qr=!1;function Md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Od(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Hr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=$c(t),gg(t,null,a),s}return Gc(t,l,s,a),$c(t)}function il(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,wr(t,a)}}function kd(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Ld=!1;function al(){if(Ld){var t=Ua;if(t!==null)throw t}}function ol(t,s,a,l){Ld=!1;var f=t.updateQueue;qr=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var M=E,$=M.next;M.next=null,_===null?m=$:_.next=$,_=M;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,E=Z.lastBaseUpdate,E!==_&&(E===null?Z.firstBaseUpdate=$:E.next=$,Z.lastBaseUpdate=M))}if(m!==null){var ie=f.baseState;_=0,Z=$=M=null,E=m;do{var K=E.lane&-536870913,Q=K!==E.lane;if(Q?(Ve&K)===K:(l&K)===K){K!==0&&K===Pa&&(Ld=!0),Z!==null&&(Z=Z.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ye=t,Te=E;K=s;var st=a;switch(Te.tag){case 1:if(ye=Te.payload,typeof ye=="function"){ie=ye.call(st,ie,K);break e}ie=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Te.payload,K=typeof ye=="function"?ye.call(st,ie,K):ye,K==null)break e;ie=w({},ie,K);break e;case 2:qr=!0}}K=E.callback,K!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Z===null?($=Z=Q,M=ie):Z=Z.next=Q,_|=K;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;Q=E,E=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);Z===null&&(M=ie),f.baseState=M,f.firstBaseUpdate=$,f.lastBaseUpdate=Z,m===null&&(f.shared.lanes=0),Qr|=_,t.lanes=_,t.memoizedState=ie}}function Og(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function kg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Og(a[t],s)}var qa=P(null),nu=P(0);function Lg(t,s){t=rr,F(nu,t),F(qa,s),rr=t|s.baseLanes}function Vd(){F(nu,rr),F(qa,qa.current)}function Pd(){rr=nu.current,ee(qa),ee(nu)}var jn=P(null),Gn=null;function Gr(t){var s=t.alternate;F(yt,yt.current&1),F(jn,t),Gn===null&&(s===null||qa.current!==null||s.memoizedState!==null)&&(Gn=t)}function Ud(t){F(yt,yt.current),F(jn,t),Gn===null&&(Gn=t)}function Vg(t){t.tag===22?(F(yt,yt.current),F(jn,t),Gn===null&&(Gn=t)):$r()}function $r(){F(yt,yt.current),F(jn,jn.current)}function In(t){ee(jn),Gn===t&&(Gn=null),ee(yt)}var yt=P(0);function su(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||$f(a)||Kf(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Xs=0,De=null,tt=null,wt=null,ru=!1,Ha=!1,Xi=!1,iu=0,ll=0,Fa=null,mE=0;function mt(){throw Error(i(321))}function zd(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Rn(t[a],s[a]))return!1;return!0}function Bd(t,s,a,l,f,m){return Xs=m,De=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=t===null||t.memoizedState===null?xy:nf,Xi=!1,m=a(l,f),Xi=!1,Ha&&(m=Ug(s,a,l,f)),Pg(t),m}function Pg(t){O.H=hl;var s=tt!==null&&tt.next!==null;if(Xs=0,wt=tt=De=null,ru=!1,ll=0,Fa=null,s)throw Error(i(300));t===null||Et||(t=t.dependencies,t!==null&&Qc(t)&&(Et=!0))}function Ug(t,s,a,l){De=t;var f=0;do{if(Ha&&(Fa=null),ll=0,Ha=!1,25<=f)throw Error(i(301));if(f+=1,wt=tt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}O.H=by,m=s(a,l)}while(Ha);return m}function pE(){var t=O.H,s=t.useState()[0];return s=typeof s.then=="function"?cl(s):s,t=t.useState()[0],(tt!==null?tt.memoizedState:null)!==t&&(De.flags|=1024),s}function qd(){var t=iu!==0;return iu=0,t}function Hd(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Fd(t){if(ru){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}ru=!1}Xs=0,wt=tt=De=null,Ha=!1,ll=iu=0,Fa=null}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?De.memoizedState=wt=t:wt=wt.next=t,wt}function vt(){if(tt===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var s=wt===null?De.memoizedState:wt.next;if(s!==null)wt=s,tt=t;else{if(t===null)throw De.alternate===null?Error(i(467)):Error(i(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},wt===null?De.memoizedState=wt=t:wt=wt.next=t}return wt}function au(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(t){var s=ll;return ll+=1,Fa===null&&(Fa=[]),t=Cg(Fa,t,s),s=De,(wt===null?s.memoizedState:wt.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?xy:nf),t}function ou(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return cl(t);if(t.$$typeof===J)return Ht(t)}throw Error(i(438,String(t)))}function Gd(t){var s=null,a=De.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=De.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=au(),De.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=j;return s.index++,a}function Ws(t,s){return typeof s=="function"?s(t):s}function lu(t){var s=vt();return $d(s,tt,t)}function $d(t,s,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}s.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var E=_=null,M=null,$=s,Z=!1;do{var ie=$.lane&-536870913;if(ie!==$.lane?(Ve&ie)===ie:(Xs&ie)===ie){var K=$.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ie===Pa&&(Z=!0);else if((Xs&K)===K){$=$.next,K===Pa&&(Z=!0);continue}else ie={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(E=M=ie,_=m):M=M.next=ie,De.lanes|=K,Qr|=K;ie=$.action,Xi&&a(m,ie),m=$.hasEagerState?$.eagerState:a(m,ie)}else K={lane:ie,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(E=M=K,_=m):M=M.next=K,De.lanes|=ie,Qr|=ie;$=$.next}while($!==null&&$!==s);if(M===null?_=m:M.next=E,!Rn(m,t.memoizedState)&&(Et=!0,Z&&(a=Ua,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=M,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Kd(t){var s=vt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do m=t(m,_.action),_=_.next;while(_!==f);Rn(m,s.memoizedState)||(Et=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function zg(t,s,a){var l=De,f=vt(),m=Be;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=s();var _=!Rn((tt||f).memoizedState,a);if(_&&(f.memoizedState=a,Et=!0),f=f.queue,Xd(Hg.bind(null,l,f,t),[t]),f.getSnapshot!==s||_||wt!==null&&wt.memoizedState.tag&1){if(l.flags|=2048,Ga(9,{destroy:void 0},qg.bind(null,l,f,a,s),null),rt===null)throw Error(i(349));m||(Xs&127)!==0||Bg(l,s,a)}return a}function Bg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=De.updateQueue,s===null?(s=au(),De.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function qg(t,s,a,l){s.value=a,s.getSnapshot=l,Fg(s)&&Gg(t)}function Hg(t,s,a){return a(function(){Fg(s)&&Gg(t)})}function Fg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Rn(t,a)}catch{return!0}}function Gg(t){var s=Bi(t,2);s!==null&&Tn(s,t,2)}function Yd(t){var s=mn();if(typeof t=="function"){var a=t;if(t=a(),Xi){Ln(!0);try{a()}finally{Ln(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:t},s}function $g(t,s,a,l){return t.baseState=a,$d(t,tt,typeof l=="function"?l:Ws)}function gE(t,s,a,l,f){if(hu(t))throw Error(i(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};O.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,Kg(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Kg(t,s){var a=s.action,l=s.payload,f=t.state;if(s.isTransition){var m=O.T,_={};O.T=_;try{var E=a(f,l),M=O.S;M!==null&&M(_,E),Yg(t,s,E)}catch($){Qd(t,s,$)}finally{m!==null&&_.types!==null&&(m.types=_.types),O.T=m}}else try{m=a(f,l),Yg(t,s,m)}catch($){Qd(t,s,$)}}function Yg(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Qg(t,s,l)},function(l){return Qd(t,s,l)}):Qg(t,s,a)}function Qg(t,s,a){s.status="fulfilled",s.value=a,Xg(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Kg(t,a)))}function Qd(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,Xg(s),s=s.next;while(s!==l)}t.action=null}function Xg(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Wg(t,s){return s}function Jg(t,s){if(Be){var a=rt.formState;if(a!==null){e:{var l=De;if(Be){if(at){t:{for(var f=at,m=Fn;f.nodeType!==8;){if(!m){f=null;break t}if(f=$n(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){at=$n(f.nextSibling),l=f.data==="F!";break e}}zr(l)}l=!1}l&&(s=a[0])}}return a=mn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wg,lastRenderedState:s},a.queue=l,a=yy.bind(null,De,l),l.dispatch=a,l=Yd(!1),m=tf.bind(null,De,!1,l.queue),l=mn(),f={state:s,dispatch:null,action:t,pending:null},l.queue=f,a=gE.bind(null,De,f,m,a),f.dispatch=a,l.memoizedState=t,[s,a,!1]}function Zg(t){var s=vt();return ey(s,tt,t)}function ey(t,s,a){if(s=$d(t,s,Wg)[0],t=lu(Ws)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=cl(s)}catch(_){throw _===za?Jc:_}else l=s;s=vt();var f=s.queue,m=f.dispatch;return a!==s.memoizedState&&(De.flags|=2048,Ga(9,{destroy:void 0},yE.bind(null,f,a),null)),[l,m,t]}function yE(t,s){t.action=s}function ty(t){var s=vt(),a=tt;if(a!==null)return ey(s,a,t);vt(),s=s.memoizedState,a=vt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Ga(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=De.updateQueue,s===null&&(s=au(),De.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function ny(){return vt().memoizedState}function cu(t,s,a,l){var f=mn();De.flags|=t,f.memoizedState=Ga(1|s,{destroy:void 0},a,l===void 0?null:l)}function uu(t,s,a,l){var f=vt();l=l===void 0?null:l;var m=f.memoizedState.inst;tt!==null&&l!==null&&zd(l,tt.memoizedState.deps)?f.memoizedState=Ga(s,m,a,l):(De.flags|=t,f.memoizedState=Ga(1|s,m,a,l))}function sy(t,s){cu(8390656,8,t,s)}function Xd(t,s){uu(2048,8,t,s)}function vE(t){De.flags|=4;var s=De.updateQueue;if(s===null)s=au(),De.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function ry(t){var s=vt().memoizedState;return vE({ref:s,nextImpl:t}),function(){if((Qe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function iy(t,s){return uu(4,2,t,s)}function ay(t,s){return uu(4,4,t,s)}function oy(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function ly(t,s,a){a=a!=null?a.concat([t]):null,uu(4,4,oy.bind(null,s,t),a)}function Wd(){}function cy(t,s){var a=vt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&zd(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function uy(t,s){var a=vt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&zd(s,l[1]))return l[0];if(l=t(),Xi){Ln(!0);try{t()}finally{Ln(!1)}}return a.memoizedState=[l,s],l}function Jd(t,s,a){return a===void 0||(Xs&1073741824)!==0&&(Ve&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=h0(),De.lanes|=t,Qr|=t,a)}function hy(t,s,a,l){return Rn(a,s)?a:qa.current!==null?(t=Jd(t,a,l),Rn(t,s)||(Et=!0),t):(Xs&42)===0||(Xs&1073741824)!==0&&(Ve&261930)===0?(Et=!0,t.memoizedState=a):(t=h0(),De.lanes|=t,Qr|=t,s)}function dy(t,s,a,l,f){var m=W.p;W.p=m!==0&&8>m?m:8;var _=O.T,E={};O.T=E,tf(t,!1,s,a);try{var M=f(),$=O.S;if($!==null&&$(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Z=fE(M,l);ul(t,s,Z,On(t))}else ul(t,s,l,On(t))}catch(ie){ul(t,s,{then:function(){},status:"rejected",reason:ie},On())}finally{W.p=m,_!==null&&E.types!==null&&(_.types=E.types),O.T=_}}function _E(){}function Zd(t,s,a,l){if(t.tag!==5)throw Error(i(476));var f=fy(t).queue;dy(t,f,s,de,a===null?_E:function(){return my(t),a(l)})}function fy(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:de},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function my(t){var s=fy(t);s.next===null&&(s=t.alternate.memoizedState),ul(t,s.next.queue,{},On())}function ef(){return Ht(Nl)}function py(){return vt().memoizedState}function gy(){return vt().memoizedState}function xE(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=On();t=Hr(a);var l=Fr(s,t,a);l!==null&&(Tn(l,s,a),il(l,s,a)),s={cache:Cd()},t.payload=s;return}s=s.return}}function bE(t,s,a){var l=On();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},hu(t)?vy(s,a):(a=vd(t,s,a,l),a!==null&&(Tn(a,t,l),_y(a,s,l)))}function yy(t,s,a){var l=On();ul(t,s,a,l)}function ul(t,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(hu(t))vy(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,E=m(_,a);if(f.hasEagerState=!0,f.eagerState=E,Rn(E,_))return Gc(t,s,f,0),rt===null&&Fc(),!1}catch{}finally{}if(a=vd(t,s,f,l),a!==null)return Tn(a,t,l),_y(a,s,l),!0}return!1}function tf(t,s,a,l){if(l={lane:2,revertLane:Of(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},hu(t)){if(s)throw Error(i(479))}else s=vd(t,a,l,2),s!==null&&Tn(s,t,2)}function hu(t){var s=t.alternate;return t===De||s!==null&&s===De}function vy(t,s){Ha=ru=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function _y(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,wr(t,a)}}var hl={readContext:Ht,use:ou,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};hl.useEffectEvent=mt;var xy={readContext:Ht,use:ou,useCallback:function(t,s){return mn().memoizedState=[t,s===void 0?null:s],t},useContext:Ht,useEffect:sy,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,cu(4194308,4,oy.bind(null,s,t),a)},useLayoutEffect:function(t,s){return cu(4194308,4,t,s)},useInsertionEffect:function(t,s){cu(4,2,t,s)},useMemo:function(t,s){var a=mn();s=s===void 0?null:s;var l=t();if(Xi){Ln(!0);try{t()}finally{Ln(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=mn();if(a!==void 0){var f=a(s);if(Xi){Ln(!0);try{a(s)}finally{Ln(!1)}}}else f=s;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=bE.bind(null,De,t),[l.memoizedState,t]},useRef:function(t){var s=mn();return t={current:t},s.memoizedState=t},useState:function(t){t=Yd(t);var s=t.queue,a=yy.bind(null,De,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Wd,useDeferredValue:function(t,s){var a=mn();return Jd(a,t,s)},useTransition:function(){var t=Yd(!1);return t=dy.bind(null,De,t.queue,!0,!1),mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=De,f=mn();if(Be){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),rt===null)throw Error(i(349));(Ve&127)!==0||Bg(l,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,sy(Hg.bind(null,l,m,t),[t]),l.flags|=2048,Ga(9,{destroy:void 0},qg.bind(null,l,m,a,s),null),a},useId:function(){var t=mn(),s=rt.identifierPrefix;if(Be){var a=_s,l=vs;a=(l&~(1<<32-cn(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=iu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=mE++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:ef,useFormState:Jg,useActionState:Jg,useOptimistic:function(t){var s=mn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=tf.bind(null,De,!0,a),a.dispatch=s,[t,s]},useMemoCache:Gd,useCacheRefresh:function(){return mn().memoizedState=xE.bind(null,De)},useEffectEvent:function(t){var s=mn(),a={impl:t};return s.memoizedState=a,function(){if((Qe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},nf={readContext:Ht,use:ou,useCallback:cy,useContext:Ht,useEffect:Xd,useImperativeHandle:ly,useInsertionEffect:iy,useLayoutEffect:ay,useMemo:uy,useReducer:lu,useRef:ny,useState:function(){return lu(Ws)},useDebugValue:Wd,useDeferredValue:function(t,s){var a=vt();return hy(a,tt.memoizedState,t,s)},useTransition:function(){var t=lu(Ws)[0],s=vt().memoizedState;return[typeof t=="boolean"?t:cl(t),s]},useSyncExternalStore:zg,useId:py,useHostTransitionStatus:ef,useFormState:Zg,useActionState:Zg,useOptimistic:function(t,s){var a=vt();return $g(a,tt,t,s)},useMemoCache:Gd,useCacheRefresh:gy};nf.useEffectEvent=ry;var by={readContext:Ht,use:ou,useCallback:cy,useContext:Ht,useEffect:Xd,useImperativeHandle:ly,useInsertionEffect:iy,useLayoutEffect:ay,useMemo:uy,useReducer:Kd,useRef:ny,useState:function(){return Kd(Ws)},useDebugValue:Wd,useDeferredValue:function(t,s){var a=vt();return tt===null?Jd(a,t,s):hy(a,tt.memoizedState,t,s)},useTransition:function(){var t=Kd(Ws)[0],s=vt().memoizedState;return[typeof t=="boolean"?t:cl(t),s]},useSyncExternalStore:zg,useId:py,useHostTransitionStatus:ef,useFormState:ty,useActionState:ty,useOptimistic:function(t,s){var a=vt();return tt!==null?$g(a,tt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Gd,useCacheRefresh:gy};by.useEffectEvent=ry;function sf(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:w({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var rf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=On(),f=Hr(l);f.payload=s,a!=null&&(f.callback=a),s=Fr(t,f,l),s!==null&&(Tn(s,t,l),il(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=On(),f=Hr(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=Fr(t,f,l),s!==null&&(Tn(s,t,l),il(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=On(),l=Hr(a);l.tag=2,s!=null&&(l.callback=s),s=Fr(t,l,a),s!==null&&(Tn(s,t,a),il(s,t,a))}};function wy(t,s,a,l,f,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):s.prototype&&s.prototype.isPureReactComponent?!Wo(a,l)||!Wo(f,m):!0}function Ey(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&rf.enqueueReplaceState(s,s.state,null)}function Wi(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=w({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Ty(t){Hc(t)}function Sy(t){console.error(t)}function Ay(t){Hc(t)}function du(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Ny(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function af(t,s,a){return a=Hr(a),a.tag=3,a.payload={element:null},a.callback=function(){du(t,s)},a}function Ry(t){return t=Hr(t),t.tag=3,t}function Cy(t,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){Ny(s,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Ny(s,a,l),typeof f!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function wE(t,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Va(s,a,f,!0),a=jn.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?Tu():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Zc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),If(t,l,f)),!1;case 22:return a.flags|=65536,l===Zc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),If(t,l,f)),!1}throw Error(i(435,a.tag))}return If(t,l,f),Tu(),!1}if(Be)return s=jn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Td&&(t=Error(i(422),{cause:l}),el(Bn(t,a)))):(l!==Td&&(s=Error(i(423),{cause:l}),el(Bn(s,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Bn(l,a),f=af(t.stateNode,l,f),kd(t,f),pt!==4&&(pt=2)),!1;var m=Error(i(520),{cause:l});if(m=Bn(m,a),_l===null?_l=[m]:_l.push(m),pt!==4&&(pt=2),s===null)return!0;l=Bn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=af(a.stateNode,l,t),kd(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xr===null||!Xr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ry(f),Cy(f,t,a,l),kd(a,f),!1}a=a.return}while(a!==null);return!1}var of=Error(i(461)),Et=!1;function Ft(t,s,a,l){s.child=t===null?Mg(s,null,a,l):Qi(s,t.child,a,l)}function jy(t,s,a,l,f){a=a.render;var m=s.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return Gi(s),l=Bd(t,s,a,_,m,f),E=qd(),t!==null&&!Et?(Hd(t,s,f),Js(t,s,f)):(Be&&E&&wd(s),s.flags|=1,Ft(t,s,l,f),s.child)}function Iy(t,s,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!_d(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Dy(t,s,m,l,f)):(t=Kc(a.type,null,l,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!pf(t,f)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Wo,a(_,l)&&t.ref===s.ref)return Js(t,s,f)}return s.flags|=1,t=$s(m,l),t.ref=s.ref,t.return=s,s.child=t}function Dy(t,s,a,l,f){if(t!==null){var m=t.memoizedProps;if(Wo(m,l)&&t.ref===s.ref)if(Et=!1,s.pendingProps=l=m,pf(t,f))(t.flags&131072)!==0&&(Et=!0);else return s.lanes=t.lanes,Js(t,s,f)}return lf(t,s,a,l,f)}function My(t,s,a,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=s.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,s.child=null;return Oy(t,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Wc(s,m!==null?m.cachePool:null),m!==null?Lg(s,m):Vd(),Vg(s);else return l=s.lanes=536870912,Oy(t,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Wc(s,m.cachePool),Lg(s,m),$r(),s.memoizedState=null):(t!==null&&Wc(s,null),Vd(),$r());return Ft(t,s,f,a),s.child}function dl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Oy(t,s,a,l,f){var m=Id();return m=m===null?null:{parent:bt._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&Wc(s,null),Vd(),Vg(s),t!==null&&Va(t,s,l,!0),s.childLanes=f,null}function fu(t,s){return s=pu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function ky(t,s,a){return Qi(s,t.child,null,a),t=fu(s,s.pendingProps),t.flags|=2,In(s),s.memoizedState=null,t}function EE(t,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Be){if(l.mode==="hidden")return t=fu(s,l),s.lanes=536870912,dl(null,t);if(Ud(s),(t=at)?(t=K0(t,Fn),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Pr!==null?{id:vs,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},a=vg(t),a.return=s,s.child=a,qt=s,at=null)):t=null,t===null)throw zr(s);return s.lanes=536870912,null}return fu(s,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(Ud(s),f)if(s.flags&256)s.flags&=-257,s=ky(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(Et||Va(t,s,a,!1),f=(a&t.childLanes)!==0,Et||f){if(l=rt,l!==null&&(_=Er(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,Bi(t,_),Tn(l,t,_),of;Tu(),s=ky(t,s,a)}else t=m.treeContext,at=$n(_.nextSibling),qt=s,Be=!0,Ur=null,Fn=!1,t!==null&&bg(s,t),s=fu(s,l),s.flags|=4096;return s}return t=$s(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function mu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function lf(t,s,a,l,f){return Gi(s),a=Bd(t,s,a,l,void 0,f),l=qd(),t!==null&&!Et?(Hd(t,s,f),Js(t,s,f)):(Be&&l&&wd(s),s.flags|=1,Ft(t,s,a,f),s.child)}function Ly(t,s,a,l,f,m){return Gi(s),s.updateQueue=null,a=Ug(s,l,a,f),Pg(t),l=qd(),t!==null&&!Et?(Hd(t,s,m),Js(t,s,m)):(Be&&l&&wd(s),s.flags|=1,Ft(t,s,a,m),s.child)}function Vy(t,s,a,l,f){if(Gi(s),s.stateNode===null){var m=Ma,_=a.contextType;typeof _=="object"&&_!==null&&(m=Ht(_)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=rf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Md(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?Ht(_):Ma,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(sf(s,a,_,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&rf.enqueueReplaceState(m,m.state,null),ol(s,l,m,f),al(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var E=s.memoizedProps,M=Wi(a,E);m.props=M;var $=m.context,Z=a.contextType;_=Ma,typeof Z=="object"&&Z!==null&&(_=Ht(Z));var ie=a.getDerivedStateFromProps;Z=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||$!==_)&&Ey(s,m,l,_),qr=!1;var K=s.memoizedState;m.state=K,ol(s,l,m,f),al(),$=s.memoizedState,E||K!==$||qr?(typeof ie=="function"&&(sf(s,a,ie,l),$=s.memoizedState),(M=qr||wy(s,a,M,l,K,$,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=$),m.props=l,m.state=$,m.context=_,l=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Od(t,s),_=s.memoizedProps,Z=Wi(a,_),m.props=Z,ie=s.pendingProps,K=m.context,$=a.contextType,M=Ma,typeof $=="object"&&$!==null&&(M=Ht($)),E=a.getDerivedStateFromProps,($=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ie||K!==M)&&Ey(s,m,l,M),qr=!1,K=s.memoizedState,m.state=K,ol(s,l,m,f),al();var Q=s.memoizedState;_!==ie||K!==Q||qr||t!==null&&t.dependencies!==null&&Qc(t.dependencies)?(typeof E=="function"&&(sf(s,a,E,l),Q=s.memoizedState),(Z=qr||wy(s,a,Z,l,K,Q,M)||t!==null&&t.dependencies!==null&&Qc(t.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Q,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Q,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Q),m.props=l,m.state=Q,m.context=M,l=Z):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,mu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=Qi(s,t.child,null,f),s.child=Qi(s,null,a,f)):Ft(t,s,a,f),s.memoizedState=m.state,t=s.child):t=Js(t,s,f),t}function Py(t,s,a,l){return Hi(),s.flags|=256,Ft(t,s,a,l),s.child}var cf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uf(t){return{baseLanes:t,cachePool:Ng()}}function hf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Mn),t}function Uy(t,s,a){var l=s.pendingProps,f=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(yt.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(Be){if(f?Gr(s):$r(),(t=at)?(t=K0(t,Fn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Pr!==null?{id:vs,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},a=vg(t),a.return=s,s.child=a,qt=s,at=null)):t=null,t===null)throw zr(s);return Kf(t)?s.lanes=32:s.lanes=536870912,null}var E=l.children;return l=l.fallback,f?($r(),f=s.mode,E=pu({mode:"hidden",children:E},f),l=qi(l,f,a,null),E.return=s,l.return=s,E.sibling=l,s.child=E,l=s.child,l.memoizedState=uf(a),l.childLanes=hf(t,_,a),s.memoizedState=cf,dl(null,l)):(Gr(s),df(s,E))}var M=t.memoizedState;if(M!==null&&(E=M.dehydrated,E!==null)){if(m)s.flags&256?(Gr(s),s.flags&=-257,s=ff(t,s,a)):s.memoizedState!==null?($r(),s.child=t.child,s.flags|=128,s=null):($r(),E=l.fallback,f=s.mode,l=pu({mode:"visible",children:l.children},f),E=qi(E,f,a,null),E.flags|=2,l.return=s,E.return=s,l.sibling=E,s.child=l,Qi(s,t.child,null,a),l=s.child,l.memoizedState=uf(a),l.childLanes=hf(t,_,a),s.memoizedState=cf,s=dl(null,l));else if(Gr(s),Kf(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var $=_.dgst;_=$,l=Error(i(419)),l.stack="",l.digest=_,el({value:l,source:null,stack:null}),s=ff(t,s,a)}else if(Et||Va(t,s,a,!1),_=(a&t.childLanes)!==0,Et||_){if(_=rt,_!==null&&(l=Er(_,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Bi(t,l),Tn(_,t,l),of;$f(E)||Tu(),s=ff(t,s,a)}else $f(E)?(s.flags|=192,s.child=t.child,s=null):(t=M.treeContext,at=$n(E.nextSibling),qt=s,Be=!0,Ur=null,Fn=!1,t!==null&&bg(s,t),s=df(s,l.children),s.flags|=4096);return s}return f?($r(),E=l.fallback,f=s.mode,M=t.child,$=M.sibling,l=$s(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,$!==null?E=$s($,E):(E=qi(E,f,a,null),E.flags|=2),E.return=s,l.return=s,l.sibling=E,s.child=l,dl(null,l),l=s.child,E=t.child.memoizedState,E===null?E=uf(a):(f=E.cachePool,f!==null?(M=bt._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=Ng(),E={baseLanes:E.baseLanes|a,cachePool:f}),l.memoizedState=E,l.childLanes=hf(t,_,a),s.memoizedState=cf,dl(t.child,l)):(Gr(s),a=t.child,t=a.sibling,a=$s(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=a,s.memoizedState=null,a)}function df(t,s){return s=pu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function pu(t,s){return t=Cn(22,t,null,s),t.lanes=0,t}function ff(t,s,a){return Qi(s,t.child,null,a),t=df(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function zy(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Nd(t.return,s,a)}function mf(t,s,a,l,f,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=m)}function By(t,s,a){var l=s.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var _=yt.current,E=(_&2)!==0;if(E?(_=_&1|2,s.flags|=128):_&=1,F(yt,_),Ft(t,s,l,a),l=Be?Zo:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zy(t,a,s);else if(t.tag===19)zy(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)t=a.alternate,t!==null&&su(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),mf(s,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&su(t)===null){s.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}mf(s,!0,a,null,m,l);break;case"together":mf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Js(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Qr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Va(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=$s(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=$s(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function pf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Qc(t)))}function TE(t,s,a){switch(s.tag){case 3:Fe(s,s.stateNode.containerInfo),Br(s,bt,t.memoizedState.cache),Hi();break;case 27:case 5:ln(s);break;case 4:Fe(s,s.stateNode.containerInfo);break;case 10:Br(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ud(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Gr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Uy(t,s,a):(Gr(s),t=Js(t,s,a),t!==null?t.sibling:null);Gr(s);break;case 19:var f=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Va(t,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return By(t,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),F(yt,yt.current),l)break;return null;case 22:return s.lanes=0,My(t,s,a,s.pendingProps);case 24:Br(s,bt,t.memoizedState.cache)}return Js(t,s,a)}function qy(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Et=!0;else{if(!pf(t,a)&&(s.flags&128)===0)return Et=!1,TE(t,s,a);Et=(t.flags&131072)!==0}else Et=!1,Be&&(s.flags&1048576)!==0&&xg(s,Zo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=Ki(s.elementType),s.type=t,typeof t=="function")_d(t)?(l=Wi(t,l),s.tag=1,s=Vy(null,s,t,l,a)):(s.tag=0,s=lf(null,s,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===se){s.tag=11,s=jy(null,s,t,l,a);break e}else if(f===I){s.tag=14,s=Iy(null,s,t,l,a);break e}}throw s=Se(t)||t,Error(i(306,s,""))}}return s;case 0:return lf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=Wi(l,s.pendingProps),Vy(t,s,l,f,a);case 3:e:{if(Fe(s,s.stateNode.containerInfo),t===null)throw Error(i(387));l=s.pendingProps;var m=s.memoizedState;f=m.element,Od(t,s),ol(s,l,null,a);var _=s.memoizedState;if(l=_.cache,Br(s,bt,l),l!==m.cache&&Rd(s,[bt],a,!0),al(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Py(t,s,l,a);break e}else if(l!==f){f=Bn(Error(i(424)),s),el(f),s=Py(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(at=$n(t.firstChild),qt=s,Be=!0,Ur=null,Fn=!0,a=Mg(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Hi(),l===f){s=Js(t,s,a);break e}Ft(t,s,l,a)}s=s.child}return s;case 26:return mu(t,s),t===null?(a=Z0(s.type,null,s.pendingProps,null))?s.memoizedState=a:Be||(a=s.type,t=s.pendingProps,l=Iu(fe.current).createElement(a),l[dt]=s,l[Bt]=t,Gt(l,a,t),gt(l),s.stateNode=l):s.memoizedState=Z0(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return ln(s),t===null&&Be&&(l=s.stateNode=X0(s.type,s.pendingProps,fe.current),qt=s,Fn=!0,f=at,ei(s.type)?(Yf=f,at=$n(l.firstChild)):at=f),Ft(t,s,s.pendingProps.children,a),mu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Be&&((f=l=at)&&(l=eT(l,s.type,s.pendingProps,Fn),l!==null?(s.stateNode=l,qt=s,at=$n(l.firstChild),Fn=!1,f=!0):f=!1),f||zr(s)),ln(s),f=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Hf(f,m)?l=null:_!==null&&Hf(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=Bd(t,s,pE,null,null,a),Nl._currentValue=f),mu(t,s),Ft(t,s,l,a),s.child;case 6:return t===null&&Be&&((t=a=at)&&(a=tT(a,s.pendingProps,Fn),a!==null?(s.stateNode=a,qt=s,at=null,t=!0):t=!1),t||zr(s)),null;case 13:return Uy(t,s,a);case 4:return Fe(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Qi(s,null,l,a):Ft(t,s,l,a),s.child;case 11:return jy(t,s,s.type,s.pendingProps,a);case 7:return Ft(t,s,s.pendingProps,a),s.child;case 8:return Ft(t,s,s.pendingProps.children,a),s.child;case 12:return Ft(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Br(s,s.type,l.value),Ft(t,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,Gi(s),f=Ht(f),l=l(f),s.flags|=1,Ft(t,s,l,a),s.child;case 14:return Iy(t,s,s.type,s.pendingProps,a);case 15:return Dy(t,s,s.type,s.pendingProps,a);case 19:return By(t,s,a);case 31:return EE(t,s,a);case 22:return My(t,s,a,s.pendingProps);case 24:return Gi(s),l=Ht(bt),t===null?(f=Id(),f===null&&(f=rt,m=Cd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),s.memoizedState={parent:l,cache:f},Md(s),Br(s,bt,f)):((t.lanes&a)!==0&&(Od(t,s),ol(s,null,null,a),al()),f=t.memoizedState,m=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Br(s,bt,l)):(l=m.cache,Br(s,bt,l),l!==f.cache&&Rd(s,[bt],a,!0))),Ft(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Zs(t){t.flags|=4}function gf(t,s,a,l,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(p0())t.flags|=8192;else throw Yi=Zc,Dd}else t.flags&=-16777217}function Hy(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!rv(s))if(p0())t.flags|=8192;else throw Yi=Zc,Dd}function gu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Mo():536870912,t.lanes|=s,Qa|=s)}function fl(t,s){if(!Be)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ot(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function SE(t,s,a){var l=s.pendingProps;switch(Ed(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(s),null;case 1:return ot(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Qs(bt),We(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(La(s)?Zs(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Sd())),ot(s),null;case 26:var f=s.type,m=s.memoizedState;return t===null?(Zs(s),m!==null?(ot(s),Hy(s,m)):(ot(s),gf(s,f,null,l,a))):m?m!==t.memoizedState?(Zs(s),ot(s),Hy(s,m)):(ot(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&Zs(s),ot(s),gf(s,f,t,l,a)),null;case 27:if(yn(s),a=fe.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Zs(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return ot(s),null}t=ce.current,La(s)?wg(s):(t=X0(f,l,a),s.stateNode=t,Zs(s))}return ot(s),null;case 5:if(yn(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Zs(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return ot(s),null}if(m=ce.current,La(s))wg(s);else{var _=Iu(fe.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}m[dt]=s,m[Bt]=l;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(Gt(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Zs(s)}}return ot(s),gf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&Zs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(t=fe.current,La(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,f=qt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[dt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||U0(t.nodeValue,a)),t||zr(s,!0)}else t=Iu(t).createTextNode(l),t[dt]=s,s.stateNode=t}return ot(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=La(s),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[dt]=s}else Hi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ot(s),t=!1}else a=Sd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(In(s),s):(In(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ot(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=La(s),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[dt]=s}else Hi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ot(s),f=!1}else f=Sd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(In(s),s):(In(s),null)}return In(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),gu(s,s.updateQueue),ot(s),null);case 4:return We(),t===null&&Pf(s.stateNode.containerInfo),ot(s),null;case 10:return Qs(s.type),ot(s),null;case 19:if(ee(yt),l=s.memoizedState,l===null)return ot(s),null;if(f=(s.flags&128)!==0,m=l.rendering,m===null)if(f)fl(l,!1);else{if(pt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=su(t),m!==null){for(s.flags|=128,fl(l,!1),t=m.updateQueue,s.updateQueue=t,gu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)yg(a,t),a=a.sibling;return F(yt,yt.current&1|2),Be&&Ks(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&Ut()>bu&&(s.flags|=128,f=!0,fl(l,!1),s.lanes=4194304)}else{if(!f)if(t=su(m),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,gu(s,t),fl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Be)return ot(s),null}else 2*Ut()-l.renderingStartTime>bu&&a!==536870912&&(s.flags|=128,f=!0,fl(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(t=l.last,t!==null?t.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ut(),t.sibling=null,a=yt.current,F(yt,f?a&1|2:a&1),Be&&Ks(s,l.treeForkCount),t):(ot(s),null);case 22:case 23:return In(s),Pd(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(ot(s),s.subtreeFlags&6&&(s.flags|=8192)):ot(s),a=s.updateQueue,a!==null&&gu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&ee($i),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Qs(bt),ot(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function AE(t,s){switch(Ed(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Qs(bt),We(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return yn(s),null;case 31:if(s.memoizedState!==null){if(In(s),s.alternate===null)throw Error(i(340));Hi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(In(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Hi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ee(yt),null;case 4:return We(),null;case 10:return Qs(s.type),null;case 22:case 23:return In(s),Pd(),t!==null&&ee($i),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Qs(bt),null;case 25:return null;default:return null}}function Fy(t,s){switch(Ed(s),s.tag){case 3:Qs(bt),We();break;case 26:case 27:case 5:yn(s);break;case 4:We();break;case 31:s.memoizedState!==null&&In(s);break;case 13:In(s);break;case 19:ee(yt);break;case 10:Qs(s.type);break;case 22:case 23:In(s),Pd(),t!==null&&ee($i);break;case 24:Qs(bt)}}function ml(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==f)}}catch(E){Ze(s,s.return,E)}}function Kr(t,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,f=s;var M=a,$=E;try{$()}catch(Z){Ze(f,M,Z)}}}l=l.next}while(l!==m)}}catch(Z){Ze(s,s.return,Z)}}function Gy(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{kg(s,a)}catch(l){Ze(t,t.return,l)}}}function $y(t,s,a){a.props=Wi(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ze(t,s,l)}}function pl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){Ze(t,s,f)}}function xs(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Ze(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Ze(t,s,f)}else a.current=null}function Ky(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Ze(t,t.return,f)}}function yf(t,s,a){try{var l=t.stateNode;YE(l,t.type,a,s),l[Bt]=s}catch(f){Ze(t,t.return,f)}}function Yy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ei(t.type)||t.tag===4}function vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ei(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _f(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=It));else if(l!==4&&(l===27&&ei(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(_f(t,s,a),t=t.sibling;t!==null;)_f(t,s,a),t=t.sibling}function yu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&ei(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(yu(t,s,a),t=t.sibling;t!==null;)yu(t,s,a),t=t.sibling}function Qy(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Gt(s,l,a),s[dt]=t,s[Bt]=a}catch(m){Ze(t,t.return,m)}}var er=!1,Tt=!1,xf=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function NE(t,s){if(t=t.containerInfo,Bf=Pu,t=lg(t),dd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,E=-1,M=-1,$=0,Z=0,ie=t,K=null;t:for(;;){for(var Q;ie!==a||f!==0&&ie.nodeType!==3||(E=_+f),ie!==m||l!==0&&ie.nodeType!==3||(M=_+l),ie.nodeType===3&&(_+=ie.nodeValue.length),(Q=ie.firstChild)!==null;)K=ie,ie=Q;for(;;){if(ie===t)break t;if(K===a&&++$===f&&(E=_),K===m&&++Z===l&&(M=_),(Q=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=Q}a=E===-1||M===-1?null:{start:E,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(qf={focusedElem:t,selectionRange:a},Pu=!1,Ot=s;Ot!==null;)if(s=Ot,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ot=t;else for(;Ot!==null;){switch(s=Ot,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ye=Wi(a.type,f);t=l.getSnapshotBeforeUpdate(ye,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Te){Ze(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Gf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,Ot=t;break}Ot=s.return}}function Wy(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:nr(t,a),l&4&&ml(5,a);break;case 1:if(nr(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(_){Ze(a,a.return,_)}else{var f=Wi(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Ze(a,a.return,_)}}l&64&&Gy(a),l&512&&pl(a,a.return);break;case 3:if(nr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{kg(t,s)}catch(_){Ze(a,a.return,_)}}break;case 27:s===null&&l&4&&Qy(a);case 26:case 5:nr(t,a),s===null&&l&4&&Ky(a),l&512&&pl(a,a.return);break;case 12:nr(t,a);break;case 31:nr(t,a),l&4&&e0(t,a);break;case 13:nr(t,a),l&4&&t0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=LE.bind(null,a),nT(t,a))));break;case 22:if(l=a.memoizedState!==null||er,!l){s=s!==null&&s.memoizedState!==null||Tt,f=er;var m=Tt;er=l,(Tt=s)&&!m?sr(t,a,(a.subtreeFlags&8772)!==0):nr(t,a),er=f,Tt=m}break;case 30:break;default:nr(t,a)}}function Jy(t){var s=t.alternate;s!==null&&(t.alternate=null,Jy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Ci(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,xn=!1;function tr(t,s,a){for(a=a.child;a!==null;)Zy(t,s,a),a=a.sibling}function Zy(t,s,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(vr,a)}catch{}switch(a.tag){case 26:Tt||xs(a,s),tr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Tt||xs(a,s);var l=ct,f=xn;ei(a.type)&&(ct=a.stateNode,xn=!1),tr(t,s,a),Tl(a.stateNode),ct=l,xn=f;break;case 5:Tt||xs(a,s);case 6:if(l=ct,f=xn,ct=null,tr(t,s,a),ct=l,xn=f,ct!==null)if(xn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(m){Ze(a,s,m)}else try{ct.removeChild(a.stateNode)}catch(m){Ze(a,s,m)}break;case 18:ct!==null&&(xn?(t=ct,G0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),so(t)):G0(ct,a.stateNode));break;case 4:l=ct,f=xn,ct=a.stateNode.containerInfo,xn=!0,tr(t,s,a),ct=l,xn=f;break;case 0:case 11:case 14:case 15:Kr(2,a,s),Tt||Kr(4,a,s),tr(t,s,a);break;case 1:Tt||(xs(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&$y(a,s,l)),tr(t,s,a);break;case 21:tr(t,s,a);break;case 22:Tt=(l=Tt)||a.memoizedState!==null,tr(t,s,a),Tt=l;break;default:tr(t,s,a)}}function e0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{so(t)}catch(a){Ze(s,s.return,a)}}}function t0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{so(t)}catch(a){Ze(s,s.return,a)}}function RE(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Xy),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Xy),s;default:throw Error(i(435,t.tag))}}function vu(t,s){var a=RE(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=VE.bind(null,t,l);l.then(f,f)}})}function bn(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,_=s,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(ei(E.type)){ct=E.stateNode,xn=!1;break e}break;case 5:ct=E.stateNode,xn=!1;break e;case 3:case 4:ct=E.stateNode.containerInfo,xn=!0;break e}E=E.return}if(ct===null)throw Error(i(160));Zy(m,_,f),ct=null,xn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)n0(s,t),s=s.sibling}var ns=null;function n0(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(s,t),wn(t),l&4&&(Kr(3,t,t.return),ml(3,t),Kr(5,t,t.return));break;case 1:bn(s,t),wn(t),l&512&&(Tt||a===null||xs(a,a.return)),l&64&&er&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ns;if(bn(s,t),wn(t),l&512&&(Tt||a===null||xs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ps]||m[dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Gt(m,l,a),m[dt]=t,gt(m),l=m;break e;case"link":var _=nv("link","href",f).get(l+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(m=_[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}m=f.createElement(l),Gt(m,l,a),f.head.appendChild(m);break;case"meta":if(_=nv("meta","content",f).get(l+(a.content||""))){for(E=0;E<_.length;E++)if(m=_[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}m=f.createElement(l),Gt(m,l,a),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[dt]=t,gt(m),l=m}t.stateNode=l}else sv(f,t.type,t.stateNode);else t.stateNode=tv(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?sv(f,t.type,t.stateNode):tv(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&yf(t,t.memoizedProps,a.memoizedProps)}break;case 27:bn(s,t),wn(t),l&512&&(Tt||a===null||xs(a,a.return)),a!==null&&l&4&&yf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(bn(s,t),wn(t),l&512&&(Tt||a===null||xs(a,a.return)),t.flags&32){f=t.stateNode;try{Un(f,"")}catch(ye){Ze(t,t.return,ye)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,yf(t,f,a!==null?a.memoizedProps:f)),l&1024&&(xf=!0);break;case 6:if(bn(s,t),wn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ye){Ze(t,t.return,ye)}}break;case 3:if(Ou=null,f=ns,ns=Du(s.containerInfo),bn(s,t),ns=f,wn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{so(s.containerInfo)}catch(ye){Ze(t,t.return,ye)}xf&&(xf=!1,s0(t));break;case 4:l=ns,ns=Du(t.stateNode.containerInfo),bn(s,t),wn(t),ns=l;break;case 12:bn(s,t),wn(t);break;case 31:bn(s,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,vu(t,l)));break;case 13:bn(s,t),wn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xu=Ut()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,vu(t,l)));break;case 22:f=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,$=er,Z=Tt;if(er=$||f,Tt=Z||M,bn(s,t),Tt=Z,er=$,wn(t),l&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||M||er||Tt||Ji(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){M=a=s;try{if(m=M.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=M.stateNode;var ie=M.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;E.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ye){Ze(M,M.return,ye)}}}else if(s.tag===6){if(a===null){M=s;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(ye){Ze(M,M.return,ye)}}}else if(s.tag===18){if(a===null){M=s;try{var Q=M.stateNode;f?$0(Q,!0):$0(M.stateNode,!1)}catch(ye){Ze(M,M.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,vu(t,a))));break;case 19:bn(s,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,vu(t,l)));break;case 30:break;case 21:break;default:bn(s,t),wn(t)}}function wn(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(Yy(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=vf(t);yu(t,m,f);break;case 5:var _=a.stateNode;a.flags&32&&(Un(_,""),a.flags&=-33);var E=vf(t);yu(t,E,_);break;case 3:case 4:var M=a.stateNode.containerInfo,$=vf(t);_f(t,$,M);break;default:throw Error(i(161))}}catch(Z){Ze(t,t.return,Z)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function s0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;s0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function nr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Wy(t,s.alternate,s),s=s.sibling}function Ji(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Kr(4,s,s.return),Ji(s);break;case 1:xs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&$y(s,s.return,a),Ji(s);break;case 27:Tl(s.stateNode);case 26:case 5:xs(s,s.return),Ji(s);break;case 22:s.memoizedState===null&&Ji(s);break;case 30:Ji(s);break;default:Ji(s)}t=t.sibling}}function sr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:sr(f,m,a),ml(4,m);break;case 1:if(sr(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){Ze(l,l.return,$)}if(l=m,f=l.updateQueue,f!==null){var E=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)Og(M[f],E)}catch($){Ze(l,l.return,$)}}a&&_&64&&Gy(m),pl(m,m.return);break;case 27:Qy(m);case 26:case 5:sr(f,m,a),a&&l===null&&_&4&&Ky(m),pl(m,m.return);break;case 12:sr(f,m,a);break;case 31:sr(f,m,a),a&&_&4&&e0(f,m);break;case 13:sr(f,m,a),a&&_&4&&t0(f,m);break;case 22:m.memoizedState===null&&sr(f,m,a),pl(m,m.return);break;case 30:break;default:sr(f,m,a)}s=s.sibling}}function bf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&tl(a))}function wf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&tl(t))}function ss(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)r0(t,s,a,l),s=s.sibling}function r0(t,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ss(t,s,a,l),f&2048&&ml(9,s);break;case 1:ss(t,s,a,l);break;case 3:ss(t,s,a,l),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&tl(t)));break;case 12:if(f&2048){ss(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,E=m.onPostCommit;typeof E=="function"&&E(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){Ze(s,s.return,M)}}else ss(t,s,a,l);break;case 31:ss(t,s,a,l);break;case 13:ss(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?ss(t,s,a,l):gl(t,s):m._visibility&2?ss(t,s,a,l):(m._visibility|=2,$a(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&bf(_,s);break;case 24:ss(t,s,a,l),f&2048&&wf(s.alternate,s);break;default:ss(t,s,a,l)}}function $a(t,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,_=s,E=a,M=l,$=_.flags;switch(_.tag){case 0:case 11:case 15:$a(m,_,E,M,f),ml(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?$a(m,_,E,M,f):gl(m,_):(Z._visibility|=2,$a(m,_,E,M,f)),f&&$&2048&&bf(_.alternate,_);break;case 24:$a(m,_,E,M,f),f&&$&2048&&wf(_.alternate,_);break;default:$a(m,_,E,M,f)}s=s.sibling}}function gl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,f=l.flags;switch(l.tag){case 22:gl(a,l),f&2048&&bf(l.alternate,l);break;case 24:gl(a,l),f&2048&&wf(l.alternate,l);break;default:gl(a,l)}s=s.sibling}}var yl=8192;function Ka(t,s,a){if(t.subtreeFlags&yl)for(t=t.child;t!==null;)i0(t,s,a),t=t.sibling}function i0(t,s,a){switch(t.tag){case 26:Ka(t,s,a),t.flags&yl&&t.memoizedState!==null&&mT(a,ns,t.memoizedState,t.memoizedProps);break;case 5:Ka(t,s,a);break;case 3:case 4:var l=ns;ns=Du(t.stateNode.containerInfo),Ka(t,s,a),ns=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=yl,yl=16777216,Ka(t,s,a),yl=l):Ka(t,s,a));break;default:Ka(t,s,a)}}function a0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function vl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Ot=l,l0(l,t)}a0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)o0(t),t=t.sibling}function o0(t){switch(t.tag){case 0:case 11:case 15:vl(t),t.flags&2048&&Kr(9,t,t.return);break;case 3:vl(t);break;case 12:vl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,_u(t)):vl(t);break;default:vl(t)}}function _u(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Ot=l,l0(l,t)}a0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Kr(8,s,s.return),_u(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,_u(s));break;default:_u(s)}t=t.sibling}}function l0(t,s){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:Kr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:tl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ot=l;else e:for(a=t;Ot!==null;){l=Ot;var f=l.sibling,m=l.return;if(Jy(l),l===a){Ot=null;break e}if(f!==null){f.return=m,Ot=f;break e}Ot=m}}}var CE={getCacheForType:function(t){var s=Ht(bt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Ht(bt).controller.signal}},jE=typeof WeakMap=="function"?WeakMap:Map,Qe=0,rt=null,ke=null,Ve=0,Je=0,Dn=null,Yr=!1,Ya=!1,Ef=!1,rr=0,pt=0,Qr=0,Zi=0,Tf=0,Mn=0,Qa=0,_l=null,En=null,Sf=!1,xu=0,c0=0,bu=1/0,wu=null,Xr=null,Rt=0,Wr=null,Xa=null,ir=0,Af=0,Nf=null,u0=null,xl=0,Rf=null;function On(){return(Qe&2)!==0&&Ve!==0?Ve&-Ve:O.T!==null?Of():Vs()}function h0(){if(Mn===0)if((Ve&536870912)===0||Be){var t=us;us<<=1,(us&3932160)===0&&(us=262144),Mn=t}else Mn=536870912;return t=jn.current,t!==null&&(t.flags|=32),Mn}function Tn(t,s,a){(t===rt&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(Wa(t,0),Jr(t,Ve,Mn,!1)),br(t,a),((Qe&2)===0||t!==rt)&&(t===rt&&((Qe&2)===0&&(Zi|=a),pt===4&&Jr(t,Ve,Mn,!1)),bs(t))}function d0(t,s,a){if((Qe&6)!==0)throw Error(i(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||xr(t,s),f=l?ME(t,s):jf(t,s,!0),m=l;do{if(f===0){Ya&&!l&&Jr(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!IE(a)){f=jf(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var E=t;f=_l;var M=E.current.memoizedState.isDehydrated;if(M&&(Wa(E,_).flags|=256),_=jf(E,_,!1),_!==2){if(Ef&&!M){E.errorRecoveryDisabledLanes|=m,Zi|=m,f=4;break e}m=En,En=f,m!==null&&(En===null?En=m:En.push.apply(En,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){Wa(t,0),Jr(t,s,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Jr(l,s,Mn,!Yr);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=xu+300-Ut(),10<f)){if(Jr(l,s,Mn,!Yr),Vn(l,0,!0)!==0)break e;ir=s,l.timeoutHandle=H0(f0.bind(null,l,a,En,wu,Sf,s,Mn,Zi,Qa,Yr,m,"Throttled",-0,0),f);break e}f0(l,a,En,wu,Sf,s,Mn,Zi,Qa,Yr,m,null,-0,0)}}break}while(!0);bs(t)}function f0(t,s,a,l,f,m,_,E,M,$,Z,ie,K,Q){if(t.timeoutHandle=-1,ie=s.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:It},i0(s,m,ie);var ye=(m&62914560)===m?xu-Ut():(m&4194048)===m?c0-Ut():0;if(ye=pT(ie,ye),ye!==null){ir=m,t.cancelPendingCommit=ye(b0.bind(null,t,s,m,a,l,f,_,E,M,Z,ie,null,K,Q)),Jr(t,m,_,!$);return}}b0(t,s,m,a,l,f,_,E,M)}function IE(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Rn(m(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Jr(t,s,a,l){s&=~Tf,s&=~Zi,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var f=s;0<f;){var m=31-cn(f),_=1<<m;l[m]=-1,f&=~_}a!==0&&Oo(t,a,s)}function Eu(){return(Qe&6)===0?(bl(0),!1):!0}function Cf(){if(ke!==null){if(Je===0)var t=ke.return;else t=ke,Ys=Fi=null,Fd(t),Ba=null,sl=0,t=ke;for(;t!==null;)Fy(t.alternate,t),t=t.return;ke=null}}function Wa(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,WE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ir=0,Cf(),rt=t,ke=a=$s(t.current,null),Ve=s,Je=0,Dn=null,Yr=!1,Ya=xr(t,s),Ef=!1,Qa=Mn=Tf=Zi=Qr=pt=0,En=_l=null,Sf=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var f=31-cn(l),m=1<<f;s|=t[f],l&=~m}return rr=s,Fc(),a}function m0(t,s){De=null,O.H=hl,s===za||s===Jc?(s=jg(),Je=3):s===Dd?(s=jg(),Je=4):Je=s===of?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Dn=s,ke===null&&(pt=1,du(t,Bn(s,t.current)))}function p0(){var t=jn.current;return t===null?!0:(Ve&4194048)===Ve?Gn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?t===Gn:!1}function g0(){var t=O.H;return O.H=hl,t===null?hl:t}function y0(){var t=O.A;return O.A=CE,t}function Tu(){pt=4,Yr||(Ve&4194048)!==Ve&&jn.current!==null||(Ya=!0),(Qr&134217727)===0&&(Zi&134217727)===0||rt===null||Jr(rt,Ve,Mn,!1)}function jf(t,s,a){var l=Qe;Qe|=2;var f=g0(),m=y0();(rt!==t||Ve!==s)&&(wu=null,Wa(t,s)),s=!1;var _=pt;e:do try{if(Je!==0&&ke!==null){var E=ke,M=Dn;switch(Je){case 8:Cf(),_=6;break e;case 3:case 2:case 9:case 6:jn.current===null&&(s=!0);var $=Je;if(Je=0,Dn=null,Ja(t,E,M,$),a&&Ya){_=0;break e}break;default:$=Je,Je=0,Dn=null,Ja(t,E,M,$)}}DE(),_=pt;break}catch(Z){m0(t,Z)}while(!0);return s&&t.shellSuspendCounter++,Ys=Fi=null,Qe=l,O.H=f,O.A=m,ke===null&&(rt=null,Ve=0,Fc()),_}function DE(){for(;ke!==null;)v0(ke)}function ME(t,s){var a=Qe;Qe|=2;var l=g0(),f=y0();rt!==t||Ve!==s?(wu=null,bu=Ut()+500,Wa(t,s)):Ya=xr(t,s);e:do try{if(Je!==0&&ke!==null){s=ke;var m=Dn;t:switch(Je){case 1:Je=0,Dn=null,Ja(t,s,m,1);break;case 2:case 9:if(Rg(m)){Je=0,Dn=null,_0(s);break}s=function(){Je!==2&&Je!==9||rt!==t||(Je=7),bs(t)},m.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Rg(m)?(Je=0,Dn=null,_0(s)):(Je=0,Dn=null,Ja(t,s,m,7));break;case 5:var _=null;switch(ke.tag){case 26:_=ke.memoizedState;case 5:case 27:var E=ke;if(_?rv(_):E.stateNode.complete){Je=0,Dn=null;var M=E.sibling;if(M!==null)ke=M;else{var $=E.return;$!==null?(ke=$,Su($)):ke=null}break t}}Je=0,Dn=null,Ja(t,s,m,5);break;case 6:Je=0,Dn=null,Ja(t,s,m,6);break;case 8:Cf(),pt=6;break e;default:throw Error(i(462))}}OE();break}catch(Z){m0(t,Z)}while(!0);return Ys=Fi=null,O.H=l,O.A=f,Qe=a,ke!==null?0:(rt=null,Ve=0,Fc(),pt)}function OE(){for(;ke!==null&&!td();)v0(ke)}function v0(t){var s=qy(t.alternate,t,rr);t.memoizedProps=t.pendingProps,s===null?Su(t):ke=s}function _0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Ly(a,s,s.pendingProps,s.type,void 0,Ve);break;case 11:s=Ly(a,s,s.pendingProps,s.type.render,s.ref,Ve);break;case 5:Fd(s);default:Fy(a,s),s=ke=yg(s,rr),s=qy(a,s,rr)}t.memoizedProps=t.pendingProps,s===null?Su(t):ke=s}function Ja(t,s,a,l){Ys=Fi=null,Fd(s),Ba=null,sl=0;var f=s.return;try{if(wE(t,f,s,a,Ve)){pt=1,du(t,Bn(a,t.current)),ke=null;return}}catch(m){if(f!==null)throw ke=f,m;pt=1,du(t,Bn(a,t.current)),ke=null;return}s.flags&32768?(Be||l===1?t=!0:Ya||(Ve&536870912)!==0?t=!1:(Yr=t=!0,(l===2||l===9||l===3||l===6)&&(l=jn.current,l!==null&&l.tag===13&&(l.flags|=16384))),x0(s,t)):Su(s)}function Su(t){var s=t;do{if((s.flags&32768)!==0){x0(s,Yr);return}t=s.return;var a=SE(s.alternate,s,rr);if(a!==null){ke=a;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=t}while(s!==null);pt===0&&(pt=5)}function x0(t,s){do{var a=AE(t.alternate,t);if(a!==null){a.flags&=32767,ke=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){ke=t;return}ke=t=a}while(t!==null);pt=6,ke=null}function b0(t,s,a,l,f,m,_,E,M){t.cancelPendingCommit=null;do Au();while(Rt!==0);if((Qe&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=yd,zt(t,a,m,_,E,M),t===rt&&(ke=rt=null,Ve=0),Xa=s,Wr=t,ir=a,Af=m,Nf=f,u0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,PE(ks,function(){return A0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=O.T,O.T=null,f=W.p,W.p=2,_=Qe,Qe|=4;try{NE(t,s,a)}finally{Qe=_,W.p=f,O.T=l}}Rt=1,w0(),E0(),T0()}}function w0(){if(Rt===1){Rt=0;var t=Wr,s=Xa,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var l=W.p;W.p=2;var f=Qe;Qe|=4;try{n0(s,t);var m=qf,_=lg(t.containerInfo),E=m.focusedElem,M=m.selectionRange;if(_!==E&&E&&E.ownerDocument&&og(E.ownerDocument.documentElement,E)){if(M!==null&&dd(E)){var $=M.start,Z=M.end;if(Z===void 0&&(Z=$),"selectionStart"in E)E.selectionStart=$,E.selectionEnd=Math.min(Z,E.value.length);else{var ie=E.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var Q=K.getSelection(),ye=E.textContent.length,Te=Math.min(M.start,ye),st=M.end===void 0?Te:Math.min(M.end,ye);!Q.extend&&Te>st&&(_=st,st=Te,Te=_);var B=ag(E,Te),U=ag(E,st);if(B&&U&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==U.node||Q.focusOffset!==U.offset)){var G=ie.createRange();G.setStart(B.node,B.offset),Q.removeAllRanges(),Te>st?(Q.addRange(G),Q.extend(U.node,U.offset)):(G.setEnd(U.node,U.offset),Q.addRange(G))}}}}for(ie=[],Q=E;Q=Q.parentNode;)Q.nodeType===1&&ie.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ie.length;E++){var ne=ie[E];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Pu=!!Bf,qf=Bf=null}finally{Qe=f,W.p=l,O.T=a}}t.current=s,Rt=2}}function E0(){if(Rt===2){Rt=0;var t=Wr,s=Xa,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var l=W.p;W.p=2;var f=Qe;Qe|=4;try{Wy(t,s.alternate,s)}finally{Qe=f,W.p=l,O.T=a}}Rt=3}}function T0(){if(Rt===4||Rt===3){Rt=0,jo();var t=Wr,s=Xa,a=ir,l=u0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Rt=5:(Rt=0,Xa=Wr=null,S0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Xr=null),Lo(a),s=s.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(vr,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=O.T,f=W.p,W.p=2,O.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var E=l[_];m(E.value,{componentStack:E.stack})}}finally{O.T=s,W.p=f}}(ir&3)!==0&&Au(),bs(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===Rf?xl++:(xl=0,Rf=t):xl=0,bl(0)}}function S0(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,tl(s)))}function Au(){return w0(),E0(),T0(),A0()}function A0(){if(Rt!==5)return!1;var t=Wr,s=Af;Af=0;var a=Lo(ir),l=O.T,f=W.p;try{W.p=32>a?32:a,O.T=null,a=Nf,Nf=null;var m=Wr,_=ir;if(Rt=0,Xa=Wr=null,ir=0,(Qe&6)!==0)throw Error(i(331));var E=Qe;if(Qe|=4,o0(m.current),r0(m,m.current,_,a),Qe=E,bl(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(vr,m)}catch{}return!0}finally{W.p=f,O.T=l,S0(t,s)}}function N0(t,s,a){s=Bn(a,s),s=af(t.stateNode,s,2),t=Fr(t,s,2),t!==null&&(br(t,2),bs(t))}function Ze(t,s,a){if(t.tag===3)N0(t,t,a);else for(;s!==null;){if(s.tag===3){N0(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xr===null||!Xr.has(l))){t=Bn(a,t),a=Ry(2),l=Fr(s,a,2),l!==null&&(Cy(a,l,s,t),br(l,2),bs(l));break}}s=s.return}}function If(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new jE;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(Ef=!0,f.add(a),t=kE.bind(null,t,s,a),s.then(t,t))}function kE(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,rt===t&&(Ve&a)===a&&(pt===4||pt===3&&(Ve&62914560)===Ve&&300>Ut()-xu?(Qe&2)===0&&Wa(t,0):Tf|=a,Qa===Ve&&(Qa=0)),bs(t)}function R0(t,s){s===0&&(s=Mo()),t=Bi(t,s),t!==null&&(br(t,s),bs(t))}function LE(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),R0(t,a)}function VE(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),R0(t,a)}function PE(t,s){return Ai(t,s)}var Nu=null,Za=null,Df=!1,Ru=!1,Mf=!1,Zr=0;function bs(t){t!==Za&&t.next===null&&(Za===null?Nu=Za=t:Za=Za.next=t),Ru=!0,Df||(Df=!0,zE())}function bl(t,s){if(!Mf&&Ru){Mf=!0;do for(var a=!1,l=Nu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var _=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-cn(42|t)+1)-1,m&=f&~(_&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,D0(l,m))}else m=Ve,m=Vn(l,l===rt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||xr(l,m)||(a=!0,D0(l,m));l=l.next}while(a);Mf=!1}}function UE(){C0()}function C0(){Ru=Df=!1;var t=0;Zr!==0&&XE()&&(t=Zr);for(var s=Ut(),a=null,l=Nu;l!==null;){var f=l.next,m=j0(l,s);m===0?(l.next=null,a===null?Nu=f:a.next=f,f===null&&(Za=a)):(a=l,(t!==0||(m&3)!==0)&&(Ru=!0)),l=f}Rt!==0&&Rt!==5||bl(t),Zr!==0&&(Zr=0)}function j0(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-cn(m),E=1<<_,M=f[_];M===-1?((E&a)===0||(E&l)!==0)&&(f[_]=_a(E,s)):M<=s&&(t.expiredLanes|=E),m&=~E}if(s=rt,a=Ve,a=Vn(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&va(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||xr(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&va(l),Lo(a)){case 2:case 8:a=jt;break;case 32:a=ks;break;case 268435456:a=Io;break;default:a=ks}return l=I0.bind(null,t),a=Ai(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&va(l),t.callbackPriority=2,t.callbackNode=null,2}function I0(t,s){if(Rt!==0&&Rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Au()&&t.callbackNode!==a)return null;var l=Ve;return l=Vn(t,t===rt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(d0(t,l,s),j0(t,Ut()),t.callbackNode!=null&&t.callbackNode===a?I0.bind(null,t):null)}function D0(t,s){if(Au())return null;d0(t,s,!0)}function zE(){JE(function(){(Qe&6)!==0?Ai(Nt,UE):C0()})}function Of(){if(Zr===0){var t=Pa;t===0&&(t=Ri,Ri<<=1,(Ri&261888)===0&&(Ri=256)),Zr=t}return Zr}function M0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ps(""+t)}function O0(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function BE(t,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var m=M0((f[Bt]||null).action),_=l.submitter;_&&(s=(s=_[Bt]||null)?M0(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var E=new Oi("action","action",null,l,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Zr!==0){var M=_?O0(f,_):new FormData(f);Zd(a,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(E.preventDefault(),M=_?O0(f,_):new FormData(f),Zd(a,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var kf=0;kf<gd.length;kf++){var Lf=gd[kf],qE=Lf.toLowerCase(),HE=Lf[0].toUpperCase()+Lf.slice(1);ts(qE,"on"+HE)}ts(hg,"onAnimationEnd"),ts(dg,"onAnimationIteration"),ts(fg,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(iE,"onTransitionRun"),ts(aE,"onTransitionStart"),ts(oE,"onTransitionCancel"),ts(mg,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),un("onBeforeInput",["compositionend","keypress","textInput","paste"]),un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wl));function k0(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var _=l.length-1;0<=_;_--){var E=l[_],M=E.instance,$=E.currentTarget;if(E=E.listener,M!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=$;try{m(f)}catch(Z){Hc(Z)}f.currentTarget=null,m=M}else for(_=0;_<l.length;_++){if(E=l[_],M=E.instance,$=E.currentTarget,E=E.listener,M!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=$;try{m(f)}catch(Z){Hc(Z)}f.currentTarget=null,m=M}}}}function Le(t,s){var a=s[Tr];a===void 0&&(a=s[Tr]=new Set);var l=t+"__bubble";a.has(l)||(L0(s,t,2,!1),a.add(l))}function Vf(t,s,a){var l=0;s&&(l|=4),L0(a,t,l,s)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function Pf(t){if(!t[Cu]){t[Cu]=!0,xa.forEach(function(a){a!=="selectionchange"&&(FE.has(a)||Vf(a,!1,t),Vf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Cu]||(s[Cu]=!0,Vf("selectionchange",!1,s))}}function L0(t,s,a,l){switch(hv(s)){case 2:var f=vT;break;case 8:f=_T;break;default:f=Zf}a=f.bind(null,s,a,t),f=void 0,!Fo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(s,a,{capture:!0,passive:f}):t.addEventListener(s,a,!0):f!==void 0?t.addEventListener(s,a,{passive:f}):t.addEventListener(s,a,!1)}function Uf(t,s,a,l,f){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===f)break;if(_===4)for(_=l.return;_!==null;){var M=_.tag;if((M===3||M===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;E!==null;){if(_=Us(E),_===null)return;if(M=_.tag,M===5||M===6||M===26||M===27){l=m=_;continue e}E=E.parentNode}}l=l.return}Nc(function(){var $=m,Z=Sa(a),ie=[];e:{var K=pg.get(t);if(K!==void 0){var Q=Oi,ye=t;switch(t){case"keypress":if(Mi(a)===0)break e;case"keydown":case"keyup":Q=Lc;break;case"focusin":ye="focus",Q=Or;break;case"focusout":ye="blur",Q=Or;break;case"beforeblur":case"afterblur":Q=Or;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Pc;break;case hg:case dg:case fg:Q=Ra;break;case mg:Q=Ca;break;case"scroll":case"scrollend":Q=Rc;break;case"wheel":Q=zc;break;case"copy":case"cut":case"paste":Q=Dc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Qo;break;case"toggle":case"beforetoggle":Q=Lr}var Te=(s&4)!==0,st=!Te&&(t==="scroll"||t==="scrollend"),B=Te?K!==null?K+"Capture":null:K;Te=[];for(var U=$,G;U!==null;){var ne=U;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||B===null||(ne=vn(U,B),ne!=null&&Te.push(El(U,ne,G))),st)break;U=U.return}0<Te.length&&(K=new Q(K,ye,null,a,Z),ie.push({event:K,listeners:Te}))}}if((s&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",K&&a!==Ta&&(ye=a.relatedTarget||a.fromElement)&&(Us(ye)||ye[ds]))break e;if((Q||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(ye=a.relatedTarget||a.toElement,Q=$,ye=ye?Us(ye):null,ye!==null&&(st=c(ye),Te=ye.tag,ye!==st||Te!==5&&Te!==27&&Te!==6)&&(ye=null)):(Q=null,ye=$),Q!==ye)){if(Te=Cc,ne="onMouseLeave",B="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Te=Qo,ne="onPointerLeave",B="onPointerEnter",U="pointer"),st=Q==null?K:ji(Q),G=ye==null?K:ji(ye),K=new Te(ne,U+"leave",Q,a,Z),K.target=st,K.relatedTarget=G,ne=null,Us(Z)===$&&(Te=new Te(B,U+"enter",ye,a,Z),Te.target=G,Te.relatedTarget=st,ne=Te),st=ne,Q&&ye)t:{for(Te=GE,B=Q,U=ye,G=0,ne=B;ne;ne=Te(ne))G++;ne=0;for(var we=U;we;we=Te(we))ne++;for(;0<G-ne;)B=Te(B),G--;for(;0<ne-G;)U=Te(U),ne--;for(;G--;){if(B===U||U!==null&&B===U.alternate){Te=B;break t}B=Te(B),U=Te(U)}Te=null}else Te=null;Q!==null&&V0(ie,K,Q,Te,!1),ye!==null&&st!==null&&V0(ie,st,ye,Te,!0)}}e:{if(K=$?ji($):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var $e=eg;else if(_n(K))if(tg)$e=nE;else{$e=eE;var _e=Zw}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&qo($.elementType)&&($e=eg):$e=tE;if($e&&($e=$e(t,$))){Pi(ie,$e,a,Z);break e}_e&&_e(t,K,$),t==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&Ea(K,"number",K.value)}switch(_e=$?ji($):window,t){case"focusin":(_n(_e)||_e.contentEditable==="true")&&(ja=_e,fd=$,Jo=null);break;case"focusout":Jo=fd=ja=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,cg(ie,a,Z);break;case"selectionchange":if(rE)break;case"keydown":case"keyup":cg(ie,a,Z)}var Me;if(v)e:{switch(t){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Oe?Xe(t,a)&&(Pe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(q&&a.locale!=="ko"&&(Oe||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Oe&&(Me=jr()):(Nn=Z,Aa="value"in Nn?Nn.value:Nn.textContent,Oe=!0)),_e=ju($,Pe),0<_e.length&&(Pe=new $o(Pe,t,null,a,Z),ie.push({event:Pe,listeners:_e}),Me?Pe.data=Me:(Me=xt(a),Me!==null&&(Pe.data=Me)))),(Me=S?Dt(t,a):Mt(t,a))&&(Pe=ju($,"onBeforeInput"),0<Pe.length&&(_e=new $o("onBeforeInput","beforeinput",null,a,Z),ie.push({event:_e,listeners:Pe}),_e.data=Me)),BE(ie,t,$,a,Z)}k0(ie,s)})}function El(t,s,a){return{instance:t,listener:s,currentTarget:a}}function ju(t,s){for(var a=s+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=vn(t,a),f!=null&&l.unshift(El(t,f,m)),f=vn(t,s),f!=null&&l.push(El(t,f,m))),t.tag===3)return l;t=t.return}return[]}function GE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function V0(t,s,a,l,f){for(var m=s._reactName,_=[];a!==null&&a!==l;){var E=a,M=E.alternate,$=E.stateNode;if(E=E.tag,M!==null&&M===l)break;E!==5&&E!==26&&E!==27||$===null||(M=$,f?($=vn(a,m),$!=null&&_.unshift(El(a,$,M))):f||($=vn(a,m),$!=null&&_.push(El(a,$,M)))),a=a.return}_.length!==0&&t.push({event:s,listeners:_})}var $E=/\r\n?/g,KE=/\u0000|\uFFFD/g;function P0(t){return(typeof t=="string"?t:""+t).replace($E,`
`).replace(KE,"")}function U0(t,s){return s=P0(s),P0(t)===s}function nt(t,s,a,l,f,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Un(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Un(t,""+l);break;case"className":Nr(t,"class",l);break;case"tabIndex":Nr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Nr(t,a,l);break;case"style":Sc(t,l,m);break;case"data":if(s!=="object"){Nr(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ps(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&nt(t,s,"name",f.name,f,null),nt(t,s,"formEncType",f.formEncType,f,null),nt(t,s,"formMethod",f.formMethod,f,null),nt(t,s,"formTarget",f.formTarget,f,null)):(nt(t,s,"encType",f.encType,f,null),nt(t,s,"method",f.method,f,null),nt(t,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ps(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=It);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ps(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Le("beforetoggle",t),Le("toggle",t),Ar(t,"popover",l);break;case"xlinkActuate":Pn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ar(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=od.get(a)||a,Ar(t,a,l))}}function zf(t,s,a,l,f,m){switch(a){case"style":Sc(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Un(t,l):(typeof l=="number"||typeof l=="bigint")&&Un(t,""+l);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"onClick":l!=null&&(t.onclick=It);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),m=t[Bt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ar(t,a,l)}}}function Gt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(t,s,m,_,a,null)}}f&&nt(t,s,"srcSet",a.srcSet,a,null),l&&nt(t,s,"src",a.src,a,null);return;case"input":Le("invalid",t);var E=m=_=f=null,M=null,$=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":f=Z;break;case"type":_=Z;break;case"checked":M=Z;break;case"defaultChecked":$=Z;break;case"value":m=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:nt(t,s,l,Z,a,null)}}Ii(t,m,E,M,$,_,f,!1);return;case"select":Le("invalid",t),l=_=m=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:nt(t,s,f,E,a,null)}s=m,a=_,t.multiple=!!l,s!=null?Ge(t,!!l,s,!1):a!=null&&Ge(t,!!l,a,!0);return;case"textarea":Le("invalid",t),m=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:nt(t,s,_,E,a,null)}Cr(t,l,f,m);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(t,s,M,l,a,null)}return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(l=0;l<wl.length;l++)Le(wl[l],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(l=a[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(t,s,$,l,a,null)}return;default:if(qo(s)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&zf(t,s,Z,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&nt(t,s,E,l,a,null))}function YE(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,E=null,M=null,$=null,Z=null;for(Q in a){var ie=a[Q];if(a.hasOwnProperty(Q)&&ie!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":M=ie;default:l.hasOwnProperty(Q)||nt(t,s,Q,null,l,ie)}}for(var K in l){var Q=l[K];if(ie=a[K],l.hasOwnProperty(K)&&(Q!=null||ie!=null))switch(K){case"type":m=Q;break;case"name":f=Q;break;case"checked":$=Q;break;case"defaultChecked":Z=Q;break;case"value":_=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:Q!==ie&&nt(t,s,K,Q,l,ie)}}Rr(t,_,E,M,$,Z,m,f);return;case"select":Q=_=E=K=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":Q=M;default:l.hasOwnProperty(m)||nt(t,s,m,null,l,M)}for(f in l)if(m=l[f],M=a[f],l.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":K=m;break;case"defaultValue":E=m;break;case"multiple":_=m;default:m!==M&&nt(t,s,f,m,l,M)}s=E,a=_,l=Q,K!=null?Ge(t,!!a,K,!1):!!l!=!!a&&(s!=null?Ge(t,!!a,s,!0):Ge(t,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:nt(t,s,E,null,l,f)}for(_ in l)if(f=l[_],m=a[_],l.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":K=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&nt(t,s,_,f,l,m)}Di(t,K,Q);return;case"option":for(var ye in a)if(K=a[ye],a.hasOwnProperty(ye)&&K!=null&&!l.hasOwnProperty(ye))switch(ye){case"selected":t.selected=!1;break;default:nt(t,s,ye,null,l,K)}for(M in l)if(K=l[M],Q=a[M],l.hasOwnProperty(M)&&K!==Q&&(K!=null||Q!=null))switch(M){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:nt(t,s,M,K,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)K=a[Te],a.hasOwnProperty(Te)&&K!=null&&!l.hasOwnProperty(Te)&&nt(t,s,Te,null,l,K);for($ in l)if(K=l[$],Q=a[$],l.hasOwnProperty($)&&K!==Q&&(K!=null||Q!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:nt(t,s,$,K,l,Q)}return;default:if(qo(s)){for(var st in a)K=a[st],a.hasOwnProperty(st)&&K!==void 0&&!l.hasOwnProperty(st)&&zf(t,s,st,void 0,l,K);for(Z in l)K=l[Z],Q=a[Z],!l.hasOwnProperty(Z)||K===Q||K===void 0&&Q===void 0||zf(t,s,Z,K,l,Q);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!l.hasOwnProperty(B)&&nt(t,s,B,null,l,K);for(ie in l)K=l[ie],Q=a[ie],!l.hasOwnProperty(ie)||K===Q||K==null&&Q==null||nt(t,s,ie,K,l,Q)}function z0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,_=f.initiatorType,E=f.duration;if(m&&E&&z0(_)){for(_=0,E=f.responseEnd,l+=1;l<a.length;l++){var M=a[l],$=M.startTime;if($>E)break;var Z=M.transferSize,ie=M.initiatorType;Z&&z0(ie)&&(M=M.responseEnd,_+=Z*(M<E?1:(E-$)/(M-$)))}if(--l,s+=8*(m+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bf=null,qf=null;function Iu(t){return t.nodeType===9?t:t.ownerDocument}function B0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q0(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Hf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=null;function XE(){var t=window.event;return t&&t.type==="popstate"?t===Ff?!1:(Ff=t,!0):(Ff=null,!1)}var H0=typeof setTimeout=="function"?setTimeout:void 0,WE=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,JE=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(t){return F0.resolve(null).then(t).catch(ZE)}:H0;function ZE(t){setTimeout(function(){throw t})}function ei(t){return t==="head"}function G0(t,s){var a=s,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),so(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Tl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Tl(a);for(var m=a.firstChild;m;){var _=m.nextSibling,E=m.nodeName;m[Ps]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Tl(t.ownerDocument.body);a=f}while(a);so(s)}function $0(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Gf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Gf(a),Ci(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function eT(t,s,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ps])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=$n(t.nextSibling),t===null)break}return null}function tT(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=$n(t.nextSibling),t===null))return null;return t}function K0(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=$n(t.nextSibling),t===null))return null;return t}function $f(t){return t.data==="$?"||t.data==="$~"}function Kf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function nT(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function $n(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Yf=null;function Y0(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return $n(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Q0(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function X0(t,s,a){switch(s=Iu(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Tl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ci(t)}var Kn=new Map,W0=new Set;function Du(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ar=W.d;W.d={f:sT,r:rT,D:iT,C:aT,L:oT,m:lT,X:uT,S:cT,M:hT};function sT(){var t=ar.f(),s=Eu();return t||s}function rT(t){var s=zs(t);s!==null&&s.tag===5&&s.type==="form"?my(s):ar.r(t)}var eo=typeof document>"u"?null:document;function J0(t,s,a){var l=eo;if(l&&typeof s=="string"&&s){var f=ft(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),W0.has(f)||(W0.add(f),t={rel:t,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Gt(s,"link",t),gt(s),l.head.appendChild(s)))}}function iT(t){ar.D(t),J0("dns-prefetch",t,null)}function aT(t,s){ar.C(t,s),J0("preconnect",t,s)}function oT(t,s,a){ar.L(t,s,a);var l=eo;if(l&&t&&s){var f='link[rel="preload"][as="'+ft(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ft(a.imageSizes)+'"]')):f+='[href="'+ft(t)+'"]';var m=f;switch(s){case"style":m=to(t);break;case"script":m=no(t)}Kn.has(m)||(t=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Kn.set(m,t),l.querySelector(f)!==null||s==="style"&&l.querySelector(Sl(m))||s==="script"&&l.querySelector(Al(m))||(s=l.createElement("link"),Gt(s,"link",t),gt(s),l.head.appendChild(s)))}}function lT(t,s){ar.m(t,s);var a=eo;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+ft(l)+'"][href="'+ft(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=no(t)}if(!Kn.has(m)&&(t=w({rel:"modulepreload",href:t},s),Kn.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Al(m)))return}l=a.createElement("link"),Gt(l,"link",t),gt(l),a.head.appendChild(l)}}}function cT(t,s,a){ar.S(t,s,a);var l=eo;if(l&&t){var f=Zn(l).hoistableStyles,m=to(t);s=s||"default";var _=f.get(m);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(Sl(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Kn.get(m))&&Qf(t,a);var M=_=l.createElement("link");gt(M),Gt(M,"link",t),M._p=new Promise(function($,Z){M.onload=$,M.onerror=Z}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Mu(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:E},f.set(m,_)}}}function uT(t,s){ar.X(t,s);var a=eo;if(a&&t){var l=Zn(a).hoistableScripts,f=no(t),m=l.get(f);m||(m=a.querySelector(Al(f)),m||(t=w({src:t,async:!0},s),(s=Kn.get(f))&&Xf(t,s),m=a.createElement("script"),gt(m),Gt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function hT(t,s){ar.M(t,s);var a=eo;if(a&&t){var l=Zn(a).hoistableScripts,f=no(t),m=l.get(f);m||(m=a.querySelector(Al(f)),m||(t=w({src:t,async:!0,type:"module"},s),(s=Kn.get(f))&&Xf(t,s),m=a.createElement("script"),gt(m),Gt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function Z0(t,s,a,l){var f=(f=fe.current)?Du(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=to(a.href),a=Zn(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=to(a.href);var m=Zn(f).hoistableStyles,_=m.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=f.querySelector(Sl(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Kn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(t,a),m||dT(f,t,a,_.state))),s&&l===null)throw Error(i(528,""));return _}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=no(a),a=Zn(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function to(t){return'href="'+ft(t)+'"'}function Sl(t){return'link[rel="stylesheet"]['+t+"]"}function ev(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function dT(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Gt(s,"link",a),gt(s),t.head.appendChild(s))}function no(t){return'[src="'+ft(t)+'"]'}function Al(t){return"script[async]"+t}function tv(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+ft(a.href)+'"]');if(l)return s.instance=l,gt(l),l;var f=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),gt(l),Gt(l,"style",f),Mu(l,a.precedence,t),s.instance=l;case"stylesheet":f=to(a.href);var m=t.querySelector(Sl(f));if(m)return s.state.loading|=4,s.instance=m,gt(m),m;l=ev(a),(f=Kn.get(f))&&Qf(l,f),m=(t.ownerDocument||t).createElement("link"),gt(m);var _=m;return _._p=new Promise(function(E,M){_.onload=E,_.onerror=M}),Gt(m,"link",l),s.state.loading|=4,Mu(m,a.precedence,t),s.instance=m;case"script":return m=no(a.src),(f=t.querySelector(Al(m)))?(s.instance=f,gt(f),f):(l=a,(f=Kn.get(m))&&(l=w({},a),Xf(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),gt(f),Gt(f,"link",l),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Mu(l,a.precedence,t));return s.instance}function Mu(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===s)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Qf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Xf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Ou=null;function nv(t,s,a){if(Ou===null){var l=new Map,f=Ou=new Map;f.set(a,l)}else f=Ou,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Ps]||m[dt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var E=l.get(_);E?E.push(m):l.set(_,[m])}}return l}function sv(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function fT(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function rv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function mT(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=to(l.href),m=s.querySelector(Sl(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=ku.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,gt(m);return}m=s.ownerDocument||s,l=ev(l),(f=Kn.get(f))&&Qf(l,f),m=m.createElement("link"),gt(m);var _=m;_._p=new Promise(function(E,M){_.onload=E,_.onerror=M}),Gt(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=ku.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Wf=0;function pT(t,s){return t.stylesheets&&t.count===0&&Vu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Vu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Wf===0&&(Wf=62500*QE());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Vu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Wf?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function ku(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Lu=null;function Vu(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Lu=new Map,s.forEach(gT,t),Lu=null,ku.call(t))}function gT(t,s){if(!(s.state.loading&4)){var a=Lu.get(t);if(a)var l=a.get(null);else{a=new Map,Lu.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=s.instance,_=f.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,f),a.set(_,f),this.count++,l=ku.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var Nl={$$typeof:J,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function yT(t,s,a,l,f,m,_,E,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function iv(t,s,a,l,f,m,_,E,M,$,Z,ie){return t=new yT(t,s,a,_,M,$,Z,ie,E),s=1,m===!0&&(s|=24),m=Cn(3,null,null,s),t.current=m,m.stateNode=t,s=Cd(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Md(m),t}function av(t){return t?(t=Ma,t):Ma}function ov(t,s,a,l,f,m){f=av(f),l.context===null?l.context=f:l.pendingContext=f,l=Hr(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Fr(t,l,s),a!==null&&(Tn(a,t,s),il(a,t,s))}function lv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Jf(t,s){lv(t,s),(t=t.alternate)&&lv(t,s)}function cv(t){if(t.tag===13||t.tag===31){var s=Bi(t,67108864);s!==null&&Tn(s,t,67108864),Jf(t,67108864)}}function uv(t){if(t.tag===13||t.tag===31){var s=On();s=ko(s);var a=Bi(t,s);a!==null&&Tn(a,t,s),Jf(t,s)}}var Pu=!0;function vT(t,s,a,l){var f=O.T;O.T=null;var m=W.p;try{W.p=2,Zf(t,s,a,l)}finally{W.p=m,O.T=f}}function _T(t,s,a,l){var f=O.T;O.T=null;var m=W.p;try{W.p=8,Zf(t,s,a,l)}finally{W.p=m,O.T=f}}function Zf(t,s,a,l){if(Pu){var f=em(l);if(f===null)Uf(t,s,l,Uu,a),dv(t,l);else if(bT(f,t,s,a,l))l.stopPropagation();else if(dv(t,l),s&4&&-1<xT.indexOf(t)){for(;f!==null;){var m=zs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Jn(m.pendingLanes);if(_!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var M=1<<31-cn(_);E.entanglements[1]|=M,_&=~M}bs(m),(Qe&6)===0&&(bu=Ut()+500,bl(0))}}break;case 31:case 13:E=Bi(m,2),E!==null&&Tn(E,m,2),Eu(),Jf(m,2)}if(m=em(l),m===null&&Uf(t,s,l,Uu,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Uf(t,s,l,null,a)}}function em(t){return t=Sa(t),tm(t)}var Uu=null;function tm(t){if(Uu=null,t=Us(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=d(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Uu=t,null}function hv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vc()){case Nt:return 2;case jt:return 8;case ks:case _c:return 32;case Io:return 268435456;default:return 32}default:return 32}}var nm=!1,ti=null,ni=null,si=null,Rl=new Map,Cl=new Map,ri=[],xT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dv(t,s){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Rl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(s.pointerId)}}function jl(t,s,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},s!==null&&(s=zs(s),s!==null&&cv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function bT(t,s,a,l,f){switch(s){case"focusin":return ti=jl(ti,t,s,a,l,f),!0;case"dragenter":return ni=jl(ni,t,s,a,l,f),!0;case"mouseover":return si=jl(si,t,s,a,l,f),!0;case"pointerover":var m=f.pointerId;return Rl.set(m,jl(Rl.get(m)||null,t,s,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Cl.set(m,jl(Cl.get(m)||null,t,s,a,l,f)),!0}return!1}function fv(t){var s=Us(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){t.blockedOn=s,bc(t.priority,function(){uv(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,bc(t.priority,function(){uv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zu(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=em(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ta=l,a.target.dispatchEvent(l),Ta=null}else return s=zs(a),s!==null&&cv(s),t.blockedOn=a,!1;s.shift()}return!0}function mv(t,s,a){zu(t)&&a.delete(s)}function wT(){nm=!1,ti!==null&&zu(ti)&&(ti=null),ni!==null&&zu(ni)&&(ni=null),si!==null&&zu(si)&&(si=null),Rl.forEach(mv),Cl.forEach(mv)}function Bu(t,s){t.blockedOn===s&&(t.blockedOn=null,nm||(nm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wT)))}var qu=null;function pv(t){qu!==t&&(qu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qu===t&&(qu=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],f=t[s+2];if(typeof l!="function"){if(tm(l||a)===null)continue;break}var m=zs(a);m!==null&&(t.splice(s,3),s-=3,Zd(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function so(t){function s(M){return Bu(M,t)}ti!==null&&Bu(ti,t),ni!==null&&Bu(ni,t),si!==null&&Bu(si,t),Rl.forEach(s),Cl.forEach(s);for(var a=0;a<ri.length;a++){var l=ri[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ri.length&&(a=ri[0],a.blockedOn===null);)fv(a),a.blockedOn===null&&ri.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],_=f[Bt]||null;if(typeof m=="function")_||pv(a);else if(_){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Bt]||null)E=_.formAction;else if(tm(f)!==null)continue}else E=_.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),pv(a)}}}function gv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function sm(t){this._internalRoot=t}Hu.prototype.render=sm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=On();ov(a,l,t,s,null,null)},Hu.prototype.unmount=sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ov(t.current,2,null,t,null,null),Eu(),s[ds]=null}};function Hu(t){this._internalRoot=t}Hu.prototype.unstable_scheduleHydration=function(t){if(t){var s=Vs();t={blockedOn:null,target:t,priority:s};for(var a=0;a<ri.length&&s!==0&&s<ri[a].priority;a++);ri.splice(a,0,t),a===0&&fv(t)}};var yv=e.version;if(yv!=="19.2.0")throw Error(i(527,yv,"19.2.0"));W.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(s),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var ET={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{vr=Fu.inject(ET),Zt=Fu}catch{}}return Dl.createRoot=function(t,s){if(!o(t))throw Error(i(299));var a=!1,l="",f=Ty,m=Sy,_=Ay;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=iv(t,1,!1,null,null,a,l,null,f,m,_,gv),t[ds]=s.current,Pf(t),new sm(s)},Dl.hydrateRoot=function(t,s,a){if(!o(t))throw Error(i(299));var l=!1,f="",m=Ty,_=Sy,E=Ay,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),s=iv(t,1,!0,s,a??null,l,f,M,m,_,E,gv),s.context=av(null),a=s.current,l=On(),l=ko(l),f=Hr(l),f.callback=null,Fr(a,f,l),a=l,s.current.lanes=a,br(s,a),bs(s),t[ds]=s.current,Pf(t),new Hu(s)},Dl.version="19.2.0",Dl}var Nv;function MT(){if(Nv)return am.exports;Nv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),am.exports=DT(),am.exports}var OT=MT();const kT=ex(OT);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Rv="popstate";function LT(r={}){function e(o,c){let{pathname:d="/",search:p="",hash:g=""}=ca(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Tm("",{pathname:d,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let d=o.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof c=="string"?c:Fl(c))}function i(o,c){as(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return PT(e,n,i,r)}function ut(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function as(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VT(){return Math.random().toString(36).substring(2,10)}function Cv(r,e){return{usr:r.state,key:r.key,idx:e}}function Tm(r,e,n=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ca(e):e,state:n,key:e&&e.key||i||VT()}}function Fl({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function ca(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function PT(r,e,n,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,d=o.history,p="POP",g=null,y=x();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function x(){return(d.state||{idx:null}).idx}function w(){p="POP";let z=x(),Y=z==null?null:z-y;y=z,g&&g({action:p,location:H.location,delta:Y})}function A(z,Y){p="PUSH";let te=Tm(H.location,z,Y);n&&n(te,z),y=x()+1;let J=Cv(te,y),se=H.createHref(te);try{d.pushState(J,"",se)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(se)}c&&g&&g({action:p,location:H.location,delta:1})}function D(z,Y){p="REPLACE";let te=Tm(H.location,z,Y);n&&n(te,z),y=x();let J=Cv(te,y),se=H.createHref(te);d.replaceState(J,"",se),c&&g&&g({action:p,location:H.location,delta:0})}function V(z){return UT(z)}let H={get action(){return p},get location(){return r(o,d)},listen(z){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Rv,w),g=z,()=>{o.removeEventListener(Rv,w),g=null}},createHref(z){return e(o,z)},createURL:V,encodeLocation(z){let Y=V(z);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:A,replace:D,go(z){return d.go(z)}};return H}function UT(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ut(n,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Fl(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function tx(r,e,n="/"){return zT(r,e,n,!1)}function zT(r,e,n,i){let o=typeof e=="string"?ca(e):e,c=dr(o.pathname||"/",n);if(c==null)return null;let d=nx(r);BT(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=JT(c);p=XT(d[g],y,i)}return p}function nx(r,e=[],n=[],i="",o=!1){let c=(d,p,g=o,y)=>{let x={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&g)return;ut(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let w=ur([i,x.relativePath]),A=n.concat(x);d.children&&d.children.length>0&&(ut(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),nx(d.children,e,A,w,g)),!(d.path==null&&!d.index)&&e.push({path:w,score:YT(w,d.index),routesMeta:A})};return r.forEach((d,p)=>{var g;if(d.path===""||!((g=d.path)!=null&&g.includes("?")))c(d,p);else for(let y of sx(d.path))c(d,p,!0,y)}),e}function sx(r){let e=r.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let d=sx(i.join("/")),p=[];return p.push(...d.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...d),p.map(g=>r.startsWith("/")&&g===""?"/":g)}function BT(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:QT(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var qT=/^:[\w-]+$/,HT=3,FT=2,GT=1,$T=10,KT=-2,jv=r=>r==="*";function YT(r,e){let n=r.split("/"),i=n.length;return n.some(jv)&&(i+=KT),e&&(i+=FT),n.filter(o=>!jv(o)).reduce((o,c)=>o+(qT.test(c)?HT:c===""?GT:$T),i)}function QT(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function XT(r,e,n=!1){let{routesMeta:i}=r,o={},c="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,x=c==="/"?e:e.slice(c.length)||"/",w=uh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),A=g.route;if(!w&&y&&n&&!i[i.length-1].route.index&&(w=uh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:ur([c,w.pathname]),pathnameBase:nS(ur([c,w.pathnameBase])),route:A}),w.pathnameBase!=="/"&&(c=ur([c,w.pathnameBase]))}return d}function uh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,i]=WT(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((y,{paramName:x,isOptional:w},A)=>{if(x==="*"){let V=p[A]||"";d=c.slice(0,c.length-V.length).replace(/(.)\/+$/,"$1")}const D=p[A];return w&&!D?y[x]=void 0:y[x]=(D||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:r}}function WT(r,e=!1,n=!0){as(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function JT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return as(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function dr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=r.charAt(n);return i&&i!=="/"?null:r.slice(n)||"/"}function ZT(r,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof r=="string"?ca(r):r;return{pathname:n?n.startsWith("/")?n:eS(n,e):e,search:sS(i),hash:rS(o)}}function eS(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function um(r,e,n,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tS(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rx(r){let e=tS(r);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function ix(r,e,n,i=!1){let o;typeof r=="string"?o=ca(r):(o={...r},ut(!o.pathname||!o.pathname.includes("?"),um("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),um("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),um("#","search","hash",o)));let c=r===""||o.pathname==="",d=c?"/":o.pathname,p;if(d==null)p=n;else{let w=e.length-1;if(!i&&d.startsWith("..")){let A=d.split("/");for(;A[0]==="..";)A.shift(),w-=1;o.pathname=A.join("/")}p=w>=0?e[w]:"/"}let g=ZT(o,p),y=d&&d!=="/"&&d.endsWith("/"),x=(c||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var ur=r=>r.join("/").replace(/\/\/+/g,"/"),nS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),sS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,rS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function iS(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ax=["POST","PUT","PATCH","DELETE"];new Set(ax);var aS=["GET",...ax];new Set(aS);var wo=T.createContext(null);wo.displayName="DataRouter";var Ch=T.createContext(null);Ch.displayName="DataRouterState";T.createContext(!1);var ox=T.createContext({isTransitioning:!1});ox.displayName="ViewTransition";var oS=T.createContext(new Map);oS.displayName="Fetchers";var lS=T.createContext(null);lS.displayName="Await";var js=T.createContext(null);js.displayName="Navigation";var tc=T.createContext(null);tc.displayName="Location";var Is=T.createContext({outlet:null,matches:[],isDataRoute:!1});Is.displayName="Route";var Qm=T.createContext(null);Qm.displayName="RouteError";function cS(r,{relative:e}={}){ut(nc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=T.useContext(js),{hash:o,pathname:c,search:d}=sc(r,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:ur([n,c])),i.createHref({pathname:p,search:d,hash:o})}function nc(){return T.useContext(tc)!=null}function wi(){return ut(nc(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(tc).location}var lx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cx(r){T.useContext(js).static||T.useLayoutEffect(r)}function jh(){let{isDataRoute:r}=T.useContext(Is);return r?wS():uS()}function uS(){ut(nc(),"useNavigate() may be used only in the context of a <Router> component.");let r=T.useContext(wo),{basename:e,navigator:n}=T.useContext(js),{matches:i}=T.useContext(Is),{pathname:o}=wi(),c=JSON.stringify(rx(i)),d=T.useRef(!1);return cx(()=>{d.current=!0}),T.useCallback((g,y={})=>{if(as(d.current,lx),!d.current)return;if(typeof g=="number"){n.go(g);return}let x=ix(g,JSON.parse(c),o,y.relative==="path");r==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:ur([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,c,o,r])}T.createContext(null);function ux(){let{matches:r}=T.useContext(Is),e=r[r.length-1];return e?e.params:{}}function sc(r,{relative:e}={}){let{matches:n}=T.useContext(Is),{pathname:i}=wi(),o=JSON.stringify(rx(n));return T.useMemo(()=>ix(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function hS(r,e){return hx(r,e)}function hx(r,e,n,i,o){var te;ut(nc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=T.useContext(js),{matches:d}=T.useContext(Is),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",x=p?p.pathnameBase:"/",w=p&&p.route;{let J=w&&w.path||"";dx(y,!w||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let A=wi(),D;if(e){let J=typeof e=="string"?ca(e):e;ut(x==="/"||((te=J.pathname)==null?void 0:te.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${J.pathname}" was given in the \`location\` prop.`),D=J}else D=A;let V=D.pathname||"/",H=V;if(x!=="/"){let J=x.replace(/^\//,"").split("/");H="/"+V.replace(/^\//,"").split("/").slice(J.length).join("/")}let z=tx(r,{pathname:H});as(w||z!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),as(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=gS(z&&z.map(J=>Object.assign({},J,{params:Object.assign({},g,J.params),pathname:ur([x,c.encodeLocation?c.encodeLocation(J.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?x:ur([x,c.encodeLocation?c.encodeLocation(J.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathnameBase])})),d,n,i,o);return e&&Y?T.createElement(tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},Y):Y}function dS(){let r=bS(),e=iS(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:c},"ErrorBoundary")," or"," ",T.createElement("code",{style:c},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:o},n):null,d)}var fS=T.createElement(dS,null),mS=class extends T.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?T.createElement(Is.Provider,{value:this.props.routeContext},T.createElement(Qm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function pS({routeContext:r,match:e,children:n}){let i=T.useContext(wo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Is.Provider,{value:r},n)}function gS(r,e=[],n=null,i=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let c=r,d=n==null?void 0:n.errors;if(d!=null){let y=c.findIndex(x=>x.route.id&&(d==null?void 0:d[x.route.id])!==void 0);ut(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let p=!1,g=-1;if(n)for(let y=0;y<c.length;y++){let x=c[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:w,errors:A}=n,D=x.route.loader&&!w.hasOwnProperty(x.route.id)&&(!A||A[x.route.id]===void 0);if(x.route.lazy||D){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((y,x,w)=>{let A,D=!1,V=null,H=null;n&&(A=d&&x.route.id?d[x.route.id]:void 0,V=x.route.errorElement||fS,p&&(g<0&&w===0?(dx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,H=null):g===w&&(D=!0,H=x.route.hydrateFallbackElement||null)));let z=e.concat(c.slice(0,w+1)),Y=()=>{let te;return A?te=V:D?te=H:x.route.Component?te=T.createElement(x.route.Component,null):x.route.element?te=x.route.element:te=y,T.createElement(pS,{match:x,routeContext:{outlet:y,matches:z,isDataRoute:n!=null},children:te})};return n&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?T.createElement(mS,{location:n.location,revalidation:n.revalidation,component:V,error:A,children:Y(),routeContext:{outlet:null,matches:z,isDataRoute:!0},unstable_onError:i}):Y()},null)}function Xm(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yS(r){let e=T.useContext(wo);return ut(e,Xm(r)),e}function vS(r){let e=T.useContext(Ch);return ut(e,Xm(r)),e}function _S(r){let e=T.useContext(Is);return ut(e,Xm(r)),e}function Wm(r){let e=_S(r),n=e.matches[e.matches.length-1];return ut(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function xS(){return Wm("useRouteId")}function bS(){var i;let r=T.useContext(Qm),e=vS("useRouteError"),n=Wm("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[n]}function wS(){let{router:r}=yS("useNavigate"),e=Wm("useNavigate"),n=T.useRef(!1);return cx(()=>{n.current=!0}),T.useCallback(async(o,c={})=>{as(n.current,lx),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...c}))},[r,e])}var Iv={};function dx(r,e,n){!e&&!Iv[r]&&(Iv[r]=!0,as(!1,n))}T.memo(ES);function ES({routes:r,future:e,state:n,unstable_onError:i}){return hx(r,void 0,n,i,e)}function $t(r){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function TS({basename:r="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:c=!1}){ut(!nc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),p=T.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof n=="string"&&(n=ca(n));let{pathname:g="/",search:y="",hash:x="",state:w=null,key:A="default"}=n,D=T.useMemo(()=>{let V=dr(g,d);return V==null?null:{location:{pathname:V,search:y,hash:x,state:w,key:A},navigationType:i}},[d,g,y,x,w,A,i]);return as(D!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:T.createElement(js.Provider,{value:p},T.createElement(tc.Provider,{children:e,value:D}))}function SS({children:r,location:e}){return hS(Sm(r),e)}function Sm(r,e=[]){let n=[];return T.Children.forEach(r,(i,o)=>{if(!T.isValidElement(i))return;let c=[...e,o];if(i.type===T.Fragment){n.push.apply(n,Sm(i.props.children,c));return}ut(i.type===$t,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Sm(i.props.children,c)),n.push(d)}),n}var Ju="get",Zu="application/x-www-form-urlencoded";function Ih(r){return r!=null&&typeof r.tagName=="string"}function AS(r){return Ih(r)&&r.tagName.toLowerCase()==="button"}function NS(r){return Ih(r)&&r.tagName.toLowerCase()==="form"}function RS(r){return Ih(r)&&r.tagName.toLowerCase()==="input"}function CS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function jS(r,e){return r.button===0&&(!e||e==="_self")&&!CS(r)}var Gu=null;function IS(){if(Gu===null)try{new FormData(document.createElement("form"),0),Gu=!1}catch{Gu=!0}return Gu}var DS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hm(r){return r!=null&&!DS.has(r)?(as(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zu}"`),null):r}function MS(r,e){let n,i,o,c,d;if(NS(r)){let p=r.getAttribute("action");i=p?dr(p,e):null,n=r.getAttribute("method")||Ju,o=hm(r.getAttribute("enctype"))||Zu,c=new FormData(r)}else if(AS(r)||RS(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||p.getAttribute("action");if(i=g?dr(g,e):null,n=r.getAttribute("formmethod")||p.getAttribute("method")||Ju,o=hm(r.getAttribute("formenctype"))||hm(p.getAttribute("enctype"))||Zu,c=new FormData(p,r),!IS()){let{name:y,type:x,value:w}=r;if(x==="image"){let A=y?`${y}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else y&&c.append(y,w)}}else{if(Ih(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ju,i=null,o=Zu,d=r}return c&&o==="text/plain"&&(d=c,c=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jm(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function OS(r,e,n){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&dr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function kS(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function VS(r,e,n){let i=await Promise.all(r.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await kS(c,n);return d.links?d.links():[]}return[]}));return BS(i.flat(1).filter(LS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Dv(r,e,n,i,o,c){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>{var x;return n[y].pathname!==g.pathname||((x=n[y].route.path)==null?void 0:x.endsWith("*"))&&n[y].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{var w;let x=i.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function PS(r,e,{includeHydrateFallback:n}={}){return US(r.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function US(r){return[...new Set(r)]}function zS(r){let e={},n=Object.keys(r).sort();for(let i of n)e[i]=r[i];return e}function BS(r,e){let n=new Set;return new Set(e),r.reduce((i,o)=>{let c=JSON.stringify(zS(o));return n.has(c)||(n.add(c),i.push({key:c,link:o})),i},[])}function fx(){let r=T.useContext(wo);return Jm(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function qS(){let r=T.useContext(Ch);return Jm(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Zm=T.createContext(void 0);Zm.displayName="FrameworkContext";function mx(){let r=T.useContext(Zm);return Jm(r,"You must render this element inside a <HydratedRouter> element"),r}function HS(r,e){let n=T.useContext(Zm),[i,o]=T.useState(!1),[c,d]=T.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:w}=e,A=T.useRef(null);T.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let H=Y=>{Y.forEach(te=>{d(te.isIntersecting)})},z=new IntersectionObserver(H,{threshold:.5});return A.current&&z.observe(A.current),()=>{z.disconnect()}}},[r]),T.useEffect(()=>{if(i){let H=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(H)}}},[i]);let D=()=>{o(!0)},V=()=>{o(!1),d(!1)};return n?r!=="intent"?[c,A,{}]:[c,A,{onFocus:Ml(p,D),onBlur:Ml(g,V),onMouseEnter:Ml(y,D),onMouseLeave:Ml(x,V),onTouchStart:Ml(w,D)}]:[!1,A,{}]}function Ml(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function FS({page:r,...e}){let{router:n}=fx(),i=T.useMemo(()=>tx(n.routes,r,n.basename),[n.routes,r,n.basename]);return i?T.createElement($S,{page:r,matches:i,...e}):null}function GS(r){let{manifest:e,routeModules:n}=mx(),[i,o]=T.useState([]);return T.useEffect(()=>{let c=!1;return VS(r,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[r,e,n]),i}function $S({page:r,matches:e,...n}){let i=wi(),{manifest:o,routeModules:c}=mx(),{basename:d}=fx(),{loaderData:p,matches:g}=qS(),y=T.useMemo(()=>Dv(r,e,g,o,i,"data"),[r,e,g,o,i]),x=T.useMemo(()=>Dv(r,e,g,o,i,"assets"),[r,e,g,o,i]),w=T.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let V=new Set,H=!1;if(e.forEach(Y=>{var J;let te=o.routes[Y.route.id];!te||!te.hasLoader||(!y.some(se=>se.route.id===Y.route.id)&&Y.route.id in p&&((J=c[Y.route.id])!=null&&J.shouldRevalidate)||te.hasClientLoader?H=!0:V.add(Y.route.id))}),V.size===0)return[];let z=OS(r,d,"data");return H&&V.size>0&&z.searchParams.set("_routes",e.filter(Y=>V.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[z.pathname+z.search]},[d,p,i,o,y,e,r,c]),A=T.useMemo(()=>PS(x,o),[x,o]),D=GS(x);return T.createElement(T.Fragment,null,w.map(V=>T.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...n})),A.map(V=>T.createElement("link",{key:V,rel:"modulepreload",href:V,...n})),D.map(({key:V,link:H})=>T.createElement("link",{key:V,nonce:n.nonce,...H})))}function KS(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var px=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{px&&(window.__reactRouterVersion="7.9.5")}catch{}function YS({basename:r,children:e,window:n}){let i=T.useRef();i.current==null&&(i.current=LT({window:n,v5Compat:!0}));let o=i.current,[c,d]=T.useState({action:o.action,location:o.location}),p=T.useCallback(g=>{T.startTransition(()=>d(g))},[d]);return T.useLayoutEffect(()=>o.listen(p),[o,p]),T.createElement(TS,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o})}var gx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lt=T.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:c,replace:d,state:p,target:g,to:y,preventScrollReset:x,viewTransition:w,...A},D){let{basename:V}=T.useContext(js),H=typeof y=="string"&&gx.test(y),z,Y=!1;if(typeof y=="string"&&H&&(z=y,px))try{let R=new URL(window.location.href),j=y.startsWith("//")?new URL(R.protocol+y):new URL(y),L=dr(j.pathname,V);j.origin===R.origin&&L!=null?y=L+j.search+j.hash:Y=!0}catch{as(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=cS(y,{relative:o}),[J,se,le]=HS(i,A),ue=WS(y,{replace:d,state:p,target:g,preventScrollReset:x,relative:o,viewTransition:w});function I(R){e&&e(R),R.defaultPrevented||ue(R)}let N=T.createElement("a",{...A,...le,href:z||te,onClick:Y||c?e:I,ref:KS(D,se),target:g,"data-discover":!H&&n==="render"?"true":void 0});return J&&!H?T.createElement(T.Fragment,null,N,T.createElement(FS,{page:te})):N});Lt.displayName="Link";var Yn=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:c,to:d,viewTransition:p,children:g,...y},x){let w=sc(d,{relative:y.relative}),A=wi(),D=T.useContext(Ch),{navigator:V,basename:H}=T.useContext(js),z=D!=null&&n1(w)&&p===!0,Y=V.encodeLocation?V.encodeLocation(w).pathname:w.pathname,te=A.pathname,J=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(te=te.toLowerCase(),J=J?J.toLowerCase():null,Y=Y.toLowerCase()),J&&H&&(J=dr(J,H)||J);const se=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let le=te===Y||!o&&te.startsWith(Y)&&te.charAt(se)==="/",ue=J!=null&&(J===Y||!o&&J.startsWith(Y)&&J.charAt(Y.length)==="/"),I={isActive:le,isPending:ue,isTransitioning:z},N=le?e:void 0,R;typeof i=="function"?R=i(I):R=[i,le?"active":null,ue?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let j=typeof c=="function"?c(I):c;return T.createElement(Lt,{...y,"aria-current":N,className:R,ref:x,style:j,to:d,viewTransition:p},typeof g=="function"?g(I):g)});Yn.displayName="NavLink";var QS=T.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:c,method:d=Ju,action:p,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:w,...A},D)=>{let V=e1(),H=t1(p,{relative:y}),z=d.toLowerCase()==="get"?"get":"post",Y=typeof p=="string"&&gx.test(p),te=J=>{if(g&&g(J),J.defaultPrevented)return;J.preventDefault();let se=J.nativeEvent.submitter,le=(se==null?void 0:se.getAttribute("formmethod"))||d;V(se||J.currentTarget,{fetcherKey:e,method:le,navigate:n,replace:o,state:c,relative:y,preventScrollReset:x,viewTransition:w})};return T.createElement("form",{ref:D,method:z,action:H,onSubmit:i?g:te,...A,"data-discover":!Y&&r==="render"?"true":void 0})});QS.displayName="Form";function XS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yx(r){let e=T.useContext(wo);return ut(e,XS(r)),e}function WS(r,{target:e,replace:n,state:i,preventScrollReset:o,relative:c,viewTransition:d}={}){let p=jh(),g=wi(),y=sc(r,{relative:c});return T.useCallback(x=>{if(jS(x,e)){x.preventDefault();let w=n!==void 0?n:Fl(g)===Fl(y);p(r,{replace:w,state:i,preventScrollReset:o,relative:c,viewTransition:d})}},[g,p,y,n,i,e,r,o,c,d])}var JS=0,ZS=()=>`__${String(++JS)}__`;function e1(){let{router:r}=yx("useSubmit"),{basename:e}=T.useContext(js),n=xS();return T.useCallback(async(i,o={})=>{let{action:c,method:d,encType:p,formData:g,body:y}=MS(i,e);if(o.navigate===!1){let x=o.fetcherKey||ZS();await r.fetch(x,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||p,flushSync:o.flushSync})}else await r.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function t1(r,{relative:e}={}){let{basename:n}=T.useContext(js),i=T.useContext(Is);ut(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...sc(r||".",{relative:e})},d=wi();if(r==null){c.search=d.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let x=p.toString();c.search=x?`?${x}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:ur([n,c.pathname])),Fl(c)}function n1(r,{relative:e}={}){let n=T.useContext(ox);ut(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=yx("useViewTransitionState"),o=sc(r,{relative:e});if(!n.isTransitioning)return!1;let c=dr(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=dr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return uh(o.pathname,d)!=null||uh(o.pathname,c)!=null}const s1={play:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3l14 9-14 9V3z"}),pause:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 4h4v16H6zM14 4h4v16h-4z"}),logo:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 6l12-3"}),search:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}),previous:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"}),next:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}),upload:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"}),heart:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"}),comment:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}),"chat-bubble":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V7a2 2 0 012-2h4M9 14h6"}),x:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}),send:u.jsx("path",{d:"M22 2L11 13M22 2L15 22l-4-9-9-4 20-6z"}),camera:u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"music-note":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z"}),"map-pin":u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"globe-alt":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9M3 12a9 9 0 019-9"}),aperture:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m-2.122 2.122a5 5 0 01-7.072 0m-2.121-2.121a5 5 0 010-7.072m2.121-2.121a5 5 0 017.072 0"}),map:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13v-6m0 6l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 9m-6-2l6-3m0 0l6 3"}),radio:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 4.938A8.001 8.001 0 0112 4a8 8 0 017.069 4.938M15 12a3 3 0 11-6 0 3 3 0 016 0zm-3 8.062A8.001 8.001 0 0112 20a8 8 0 01-7.069-4.938M4.938 15A8.001 8.001 0 014 12a8 8 0 014.938-7.069"}),spotify:u.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20zm0 17.5a7.5 7.5 0 110-15 7.5 7.5 0 010 15zm-4.3-7.2a.7.7 0 00-1 .2.7.7 0 00.1 1l3.5 2a.7.7 0 001-.2.7.7 0 00-.2-1l-3.4-2zm.3-2.5a.7.7 0 00-1 .2.7.7 0 00.2 1l5.8 3.3a.7.7 0 001-.2.7.7 0 00-.2-1l-5.8-3.3zm.2-2.6a.7.7 0 00-1 .3.7.7 0 00.3 1l6.7 3.8a.7.7 0 001-.3.7.7 0 00-.3-1l-6.7-3.8z"}),soundcloud:u.jsx("path",{d:"M7 12a1 1 0 00-1-1H3a1 1 0 100 2h3a1 1 0 001-1zm14-1h-3a1 1 0 100 2h3a1 1 0 100-2zm-5-3a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm14 2c0-3.9-3.1-7-7-7s-7 3.1-7 7v1h14v-1z"}),youtube:u.jsx("path",{d:"M21.582 6.186A2.5 2.5 0 0020 4.5H4a2.5 2.5 0 00-2.5 2.5v10A2.5 2.5 0 004 19.5h16a2.5 2.5 0 002.5-2.5v-10a2.5 2.5 0 00-.918-1.814zM9.5 15.5v-7l7 3.5-7 3.5z"}),bandcamp:u.jsx("path",{d:"M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2l4 4 4-4v8H8v-8z"}),package:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4-8-4m16 0v10l-8 4-8-4V7"}),tshirt:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 4h6l2 2v2H7V6l2-2zm0 0V3a1 1 0 011-1h4a1 1 0 011 1v1m-6 0v12h6V4m-6 0H3v4l3 1 1-1h1M15 4h6v4l-3 1-1-1h-1"}),crown:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l3-3 4 4 4-4 3 3V5H5v10z"}),playlist:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"}),tag:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"}),"thumbs-up":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 9V5a3 3 0 00-3-3l-4 9v11h11.28a2 2 0 002-1.7l1.38-9a2 2 0 00-2-2.3H14z"}),"thumbs-down":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 15v4a3 3 0 003 3l4-9V5H5.72a2 2 0 00-2 1.7l-1.38 9a2 2 0 002 2.3h4.28z"}),"video-camera":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}),rss:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 11a9 9 0 019 9M4 4a16 16 0 0116 16M4 4v0"}),"book-open":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 1V6a4 4 0 00-4-4H5a4 4 0 00-4 4v12a4 4 0 004 4h14a4 4 0 004-4v-3m-4-1l-4-4 4-4"}),download:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"}),plus:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"}),mail:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}),microphone:u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 10v2a7 7 0 01-14 0v-2"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 19v3"})]}),palette:u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1v2m0 18v2m9-9h-2m-2-6.364L15.364 7M4.636 17.364L7 15m12.364 0L17 15M4.636 4.636L7 7"})]}),users:u.jsx(u.Fragment,{children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.134-1.276-.38-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.134-1.276.38-1.857m0 0a5.002 5.002 0 019.24 0M12 15a4 4 0 100-8 4 4 0 000 8z"})}),sparkles:u.jsx(u.Fragment,{children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M17 3v4M19 5h-4M14 17v4M16 19h-4M7.5 10.5L9 9m-1.5 3l-1.5 1.5M16.5 10.5L15 9m1.5 3l1.5 1.5"})})},me=({name:r,className:e="h-6 w-6",style:n})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",style:n,children:s1[r]});var Mv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},r1=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],d=r[n++],p=r[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},_x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,p=d?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,x=c>>2,w=(c&3)<<4|p>>4;let A=(p&15)<<2|y>>6,D=y&63;g||(D=64,d||(A=64)),i.push(n[x],n[w],n[A],n[D])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(vx(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):r1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],p=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||p==null||y==null||w==null)throw new i1;const A=c<<2|p>>4;if(i.push(A),y!==64){const D=p<<4&240|y>>2;if(i.push(D),w!==64){const V=y<<6&192|w;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class i1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a1=function(r){const e=vx(r);return _x.encodeByteArray(e,!0)},hh=function(r){return a1(r).replace(/\./g,"")},xx=function(r){try{return _x.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=()=>o1().__FIREBASE_DEFAULTS__,c1=()=>{if(typeof process>"u"||typeof Mv>"u")return;const r=Mv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},u1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&xx(r[1]);return e&&JSON.parse(e)},Dh=()=>{try{return l1()||c1()||u1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},bx=r=>{var e,n;return(n=(e=Dh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},wx=r=>{const e=bx(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Ex=()=>{var r;return(r=Dh())===null||r===void 0?void 0:r.config},Tx=r=>{var e;return(e=Dh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[hh(JSON.stringify(n)),hh(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function f1(){var r;const e=(r=Dh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function p1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function g1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function y1(){const r=an();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function v1(){return!f1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _1(){try{return typeof indexedDB=="object"}catch{return!1}}function x1(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="FirebaseError";class Ds extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=b1,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rc.prototype.create)}}class rc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?w1(c,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new Ds(o,p,i)}}function w1(r,e){return r.replace(E1,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const E1=/\{\$([^}]+)}/g;function T1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function dh(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=r[o],d=e[o];if(Ov(c)&&Ov(d)){if(!dh(c,d))return!1}else if(c!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Ov(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function S1(r,e){const n=new A1(r,e);return n.subscribe.bind(n)}class A1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");N1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=dm),o.error===void 0&&(o.error=dm),o.complete===void 0&&(o.complete=dm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(r){return r&&r._delegate?r._delegate:r}class yi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new h1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j1(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);i===p&&d.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:C1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C1(r){return r===ea?void 0:r}function j1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new R1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const D1={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},M1=qe.INFO,O1={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},k1=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=O1[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ep{constructor(e){this.name=e,this._logLevel=M1,this._logHandler=k1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const L1=(r,e)=>e.some(n=>r instanceof n);let kv,Lv;function V1(){return kv||(kv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P1(){return Lv||(Lv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ax=new WeakMap,Am=new WeakMap,Nx=new WeakMap,fm=new WeakMap,tp=new WeakMap;function U1(r){const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(mi(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Ax.set(n,r)}).catch(()=>{}),tp.set(e,r),e}function z1(r){if(Am.has(r))return;const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Am.set(r,e)}let Nm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Am.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Nx.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mi(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function B1(r){Nm=r(Nm)}function q1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(mm(this),e,...n);return Nx.set(i,e.sort?e.sort():[e]),mi(i)}:P1().includes(r)?function(...e){return r.apply(mm(this),e),mi(Ax.get(this))}:function(...e){return mi(r.apply(mm(this),e))}}function H1(r){return typeof r=="function"?q1(r):(r instanceof IDBTransaction&&z1(r),L1(r,V1())?new Proxy(r,Nm):r)}function mi(r){if(r instanceof IDBRequest)return U1(r);if(fm.has(r))return fm.get(r);const e=H1(r);return e!==r&&(fm.set(r,e),tp.set(e,r)),e}const mm=r=>tp.get(r);function F1(r,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),p=mi(d);return i&&d.addEventListener("upgradeneeded",g=>{i(mi(d.result),g.oldVersion,g.newVersion,mi(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const G1=["get","getKey","getAll","getAllKeys","count"],$1=["put","add","delete","clear"],pm=new Map;function Vv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(pm.get(e))return pm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=$1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||G1.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return pm.set(e,c),c}B1(r=>({...r,get:(e,n,i)=>Vv(e,n)||r.get(e,n,i),has:(e,n)=>!!Vv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Y1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rm="@firebase/app",Pv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new ep("@firebase/app"),Q1="@firebase/app-compat",X1="@firebase/analytics-compat",W1="@firebase/analytics",J1="@firebase/app-check-compat",Z1="@firebase/app-check",eA="@firebase/auth",tA="@firebase/auth-compat",nA="@firebase/database",sA="@firebase/data-connect",rA="@firebase/database-compat",iA="@firebase/functions",aA="@firebase/functions-compat",oA="@firebase/installations",lA="@firebase/installations-compat",cA="@firebase/messaging",uA="@firebase/messaging-compat",hA="@firebase/performance",dA="@firebase/performance-compat",fA="@firebase/remote-config",mA="@firebase/remote-config-compat",pA="@firebase/storage",gA="@firebase/storage-compat",yA="@firebase/firestore",vA="@firebase/vertexai-preview",_A="@firebase/firestore-compat",xA="firebase",bA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="[DEFAULT]",wA={[Rm]:"fire-core",[Q1]:"fire-core-compat",[W1]:"fire-analytics",[X1]:"fire-analytics-compat",[Z1]:"fire-app-check",[J1]:"fire-app-check-compat",[eA]:"fire-auth",[tA]:"fire-auth-compat",[nA]:"fire-rtdb",[sA]:"fire-data-connect",[rA]:"fire-rtdb-compat",[iA]:"fire-fn",[aA]:"fire-fn-compat",[oA]:"fire-iid",[lA]:"fire-iid-compat",[cA]:"fire-fcm",[uA]:"fire-fcm-compat",[hA]:"fire-perf",[dA]:"fire-perf-compat",[fA]:"fire-rc",[mA]:"fire-rc-compat",[pA]:"fire-gcs",[gA]:"fire-gcs-compat",[yA]:"fire-fst",[_A]:"fire-fst-compat",[vA]:"fire-vertex","fire-js":"fire-js",[xA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Map,EA=new Map,jm=new Map;function Uv(r,e){try{r.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ra(r){const e=r.name;if(jm.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,r);for(const n of fh.values())Uv(n,r);for(const n of EA.values())Uv(n,r);return!0}function Mh(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function di(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pi=new rc("app","Firebase",TA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=bA;function Rx(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Cm,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw pi.create("bad-app-name",{appName:String(o)});if(n||(n=Ex()),!n)throw pi.create("no-options");const c=fh.get(o);if(c){if(dh(n,c.options)&&dh(i,c.config))return c;throw pi.create("duplicate-app",{appName:o})}const d=new I1(o);for(const g of jm.values())d.addComponent(g);const p=new SA(n,i,d);return fh.set(o,p),p}function np(r=Cm){const e=fh.get(r);if(!e&&r===Cm&&Ex())return Rx();if(!e)throw pi.create("no-app",{appName:r});return e}function ws(r,e,n){var i;let o=(i=wA[r])!==null&&i!==void 0?i:r;n&&(o+=`-${n}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const p=[`Unable to register library "${o}" with version "${e}":`];c&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(p.join(" "));return}ra(new yi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="firebase-heartbeat-database",NA=1,Gl="firebase-heartbeat-store";let gm=null;function Cx(){return gm||(gm=F1(AA,NA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Gl)}catch(n){console.warn(n)}}}}).catch(r=>{throw pi.create("idb-open",{originalErrorMessage:r.message})})),gm}async function RA(r){try{const n=(await Cx()).transaction(Gl),i=await n.objectStore(Gl).get(jx(r));return await n.done,i}catch(e){if(e instanceof Ds)fr.warn(e.message);else{const n=pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(n.message)}}}async function zv(r,e){try{const i=(await Cx()).transaction(Gl,"readwrite");await i.objectStore(Gl).put(e,jx(r)),await i.done}catch(n){if(n instanceof Ds)fr.warn(n.message);else{const i=pi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fr.warn(i.message)}}}function jx(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1024,jA=720*60*60*1e3;class IA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Bv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const p=new Date(d.date).valueOf();return Date.now()-p<=jA}),this._storage.overwrite(this._heartbeatsCache))}catch(i){fr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bv(),{heartbeatsToSend:i,unsentEntries:o}=DA(this._heartbeatsCache.heartbeats),c=hh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return fr.warn(n),""}}}function Bv(){return new Date().toISOString().substring(0,10)}function DA(r,e=CA){const n=[];let i=r.slice();for(const o of r){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),qv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),qv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class MA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _1()?x1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function qv(r){return hh(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(r){ra(new yi("platform-logger",e=>new K1(e),"PRIVATE")),ra(new yi("heartbeat",e=>new IA(e),"PRIVATE")),ws(Rm,Pv,r),ws(Rm,Pv,"esm2017"),ws("fire-js","")}OA("");var kA="firebase",LA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ws(kA,LA,"app");function sp(r,e){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(n[i[o]]=r[i[o]]);return n}function Ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VA=Ix,Dx=new rc("auth","Firebase",Ix());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new ep("@firebase/auth");function PA(r,...e){mh.logLevel<=qe.WARN&&mh.warn(`Auth (${ua}): ${r}`,...e)}function eh(r,...e){mh.logLevel<=qe.ERROR&&mh.error(`Auth (${ua}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(r,...e){throw rp(r,...e)}function Es(r,...e){return rp(r,...e)}function Mx(r,e,n){const i=Object.assign(Object.assign({},VA()),{[e]:n});return new rc("auth","Firebase",i).create(e,{appName:r.name})}function na(r){return Mx(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rp(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return Dx.create(r,...e)}function Ae(r,e,...n){if(!r)throw rp(e,...n)}function or(r){const e="INTERNAL ASSERTION FAILED: "+r;throw eh(e),new Error(e)}function pr(r,e){r||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function UA(){return Hv()==="http:"||Hv()==="https:"}function Hv(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UA()||p1()||"connection"in navigator)?navigator.onLine:!0}function BA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,pr(n>e,"Short delay should be less than long delay!"),this.isMobile=d1()||g1()}get(){return zA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(r,e){pr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=new ac(3e4,6e4);function ap(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Eo(r,e,n,i,o={}){return kx(r,o,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const p=ic(Object.assign({key:r.config.apiKey},d)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:g},c);return m1()||(y.referrerPolicy="no-referrer"),Ox.fetch()(Lx(r,r.config.apiHost,n,p),y)})}async function kx(r,e,n){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},qA),e);try{const o=new GA(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw $u(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw $u(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw $u(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw $u(r,"user-disabled",d);const x=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Mx(r,x,y);mr(r,x)}}catch(o){if(o instanceof Ds)throw o;mr(r,"network-request-failed",{message:String(o)})}}async function FA(r,e,n,i,o={}){const c=await Eo(r,e,n,i,o);return"mfaPendingCredential"in c&&mr(r,"multi-factor-auth-required",{_serverResponse:c}),c}function Lx(r,e,n,i){const o=`${e}${n}?${i}`;return r.config.emulator?ip(r.config,o):`${r.config.apiScheme}://${o}`}class GA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Es(this.auth,"network-request-failed")),HA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $u(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Es(r,e,i);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(r,e){return Eo(r,"POST","/v1/accounts:delete",e)}async function Vx(r,e){return Eo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KA(r,e=!1){const n=pn(r),i=await n.getIdToken(e),o=op(i);Ae(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:Ul(ym(o.auth_time)),issuedAtTime:Ul(ym(o.iat)),expirationTime:Ul(ym(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function ym(r){return Number(r)*1e3}function op(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const o=xx(n);return o?JSON.parse(o):(eh("Failed to decode base64 JWT payload"),null)}catch(o){return eh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Fv(r){const e=op(r);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ds&&YA(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function YA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ul(this.lastLoginAt),this.creationTime=Ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(r){var e;const n=r.auth,i=await r.getIdToken(),o=await $l(r,Vx(n,{idToken:i}));Ae(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];r._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Px(c.providerUserInfo):[],p=WA(r.providerData,d),g=r.isAnonymous,y=!(r.email&&c.passwordHash)&&!(p!=null&&p.length),x=g?y:!1,w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new Dm(c.createdAt,c.lastLoginAt),isAnonymous:x};Object.assign(r,w)}async function XA(r){const e=pn(r);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WA(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Px(r){return r.map(e=>{var{providerId:n}=e,i=sp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(r,e){const n=await kx(r,{},async()=>{const i=ic({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=Lx(r,o,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();return p["Content-Type"]="application/x-www-form-urlencoded",Ox.fetch()(d,{method:"POST",headers:p,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZA(r,e){return Eo(r,"POST","/v2/accounts:revokeToken",ap(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=Fv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await JA(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,d=new lo;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Ae(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Ae(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(r,e){Ae(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class lr{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,c=sp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Dm(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await $l(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KA(this,e)}reload(){return XA(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(na(this.auth));const e=await this.getIdToken();return await $l(this,$A(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,c,d,p,g,y,x;const w=(i=n.displayName)!==null&&i!==void 0?i:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,D=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,V=(d=n.photoURL)!==null&&d!==void 0?d:void 0,H=(p=n.tenantId)!==null&&p!==void 0?p:void 0,z=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,Y=(y=n.createdAt)!==null&&y!==void 0?y:void 0,te=(x=n.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:J,emailVerified:se,isAnonymous:le,providerData:ue,stsTokenManager:I}=n;Ae(J&&I,e,"internal-error");const N=lo.fromJSON(this.name,I);Ae(typeof J=="string",e,"internal-error"),ai(w,e.name),ai(A,e.name),Ae(typeof se=="boolean",e,"internal-error"),Ae(typeof le=="boolean",e,"internal-error"),ai(D,e.name),ai(V,e.name),ai(H,e.name),ai(z,e.name),ai(Y,e.name),ai(te,e.name);const R=new lr({uid:J,auth:e,email:A,emailVerified:se,displayName:w,isAnonymous:le,photoURL:V,phoneNumber:D,tenantId:H,stsTokenManager:N,createdAt:Y,lastLoginAt:te});return ue&&Array.isArray(ue)&&(R.providerData=ue.map(j=>Object.assign({},j))),z&&(R._redirectEventId=z),R}static async _fromIdTokenResponse(e,n,i=!1){const o=new lo;o.updateFromServerResponse(n);const c=new lr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ph(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Ae(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Px(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new lo;p.updateFromIdToken(i);const g=new lr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Dm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;function cr(r){pr(r instanceof Function,"Expected a class definition");let e=Gv.get(r);return e?(pr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Gv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ux.type="NONE";const $v=Ux;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(r,e,n){return`firebase:${r}:${e}:${n}`}class co{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=th(this.userKey,o.apiKey,c),this.fullPersistenceKey=th("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new co(cr($v),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||cr($v);const d=th(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(d);if(x){const w=lr._fromJSON(e,x);y!==c&&(p=w),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new co(c,e,i):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new co(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gx(e))return"Blackberry";if($x(e))return"Webos";if(Bx(e))return"Safari";if((e.includes("chrome/")||qx(e))&&!e.includes("edge/"))return"Chrome";if(Fx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function zx(r=an()){return/firefox\//i.test(r)}function Bx(r=an()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qx(r=an()){return/crios\//i.test(r)}function Hx(r=an()){return/iemobile/i.test(r)}function Fx(r=an()){return/android/i.test(r)}function Gx(r=an()){return/blackberry/i.test(r)}function $x(r=an()){return/webos/i.test(r)}function lp(r=an()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eN(r=an()){var e;return lp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tN(){return y1()&&document.documentMode===10}function Kx(r=an()){return lp(r)||Fx(r)||$x(r)||Gx(r)||/windows phone/i.test(r)||Hx(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(r,e=[]){let n;switch(r){case"Browser":n=Kv(an());break;case"Worker":n=`${Kv(an())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ua}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((d,p)=>{try{const g=e(c);d(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(r,e={}){return Eo(r,"GET","/v2/passwordPolicy",ap(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=6;class iN{constructor(e){var n,i,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:rN,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,c,d,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yv(this),this.idTokenSubscription=new Yv(this),this.beforeStateQueue=new nN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cr(n)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vx(this,{idToken:e}),i=await lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(di(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===p)&&(g!=null&&g.user)&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(di(this.app))return Promise.reject(na(this));const n=e?pn(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(na(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return di(this.app)?Promise.reject(na(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sN(this),n=new iN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cr(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function cp(r){return pn(r)}class Yv{constructor(e){this.auth=e,this.observer=null,this.addObserver=S1(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oN(r){up=r}function lN(r){return up.loadJS(r)}function cN(){return up.gapiScript}function uN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(r,e){const n=Mh(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(dh(c,e??{}))return o;mr(o,"already-initialized")}return n.initialize({options:e})}function dN(r,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(cr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function fN(r,e,n){const i=cp(r);Ae(i._canInitEmulator,i,"emulator-config-failed"),Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=Qx(e),{host:d,port:p}=mN(e),g=p===null?"":`:${p}`;i.config.emulator={url:`${c}//${d}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})}),pN()}function Qx(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function mN(r){const e=Qx(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:Qv(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:Qv(d)}}}function Qv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function pN(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(r,e){return FA(r,"POST","/v1/accounts:signInWithIdp",ap(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="http://localhost";class ia extends Xx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,c=sp(n,["providerId","signInMethod"]);if(!i||!o)return null;const d=new ia(i,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,uo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:gN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ic(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends Wx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends oc{constructor(){super("facebook.com")}static credential(e){return ia._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.FACEBOOK_SIGN_IN_METHOD="facebook.com";li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ia._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ci.credential(n,i)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends oc{constructor(){super("github.com")}static credential(e){return ia._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.GITHUB_SIGN_IN_METHOD="github.com";ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends oc{constructor(){super("twitter.com")}static credential(e,n){return ia._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return hi.credential(n,i)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await lr._fromIdTokenResponse(e,i,o),d=Xv(i);return new fo({user:c,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=Xv(i);return new fo({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function Xv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends Ds{constructor(e,n,i,o){var c;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new gh(e,n,i,o)}}function Jx(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(r,c,e,i):c})}async function yN(r,e,n=!1){const i=await $l(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return fo._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(r,e,n=!1){const{auth:i}=r;if(di(i.app))return Promise.reject(na(i));const o="reauthenticate";try{const c=await $l(r,Jx(i,o,e,r),n);Ae(c.idToken,i,"internal-error");const d=op(c.idToken);Ae(d,i,"internal-error");const{sub:p}=d;return Ae(r.uid===p,i,"user-mismatch"),fo._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&mr(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(r,e,n=!1){if(di(r.app))return Promise.reject(na(r));const i="signIn",o=await Jx(r,i,e),c=await fo._fromIdTokenResponse(r,i,o);return n||await r._updateCurrentUser(c.user),c}function xN(r,e,n,i){return pn(r).onIdTokenChanged(e,n,i)}function bN(r,e,n){return pn(r).beforeAuthStateChanged(e,n)}function Zx(r,e,n,i){return pn(r).onAuthStateChanged(e,n,i)}function wN(r){return pn(r).signOut()}const yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=1e3,TN=10;class tb extends eb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Kx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);tN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,TN):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},EN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tb.type="LOCAL";const SN=tb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends eb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nb.type="SESSION";const sb=nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Oh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await AN(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=hp("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(w){const A=w;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(A.data.response);break;default:clearTimeout(x),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(){return window}function RN(r){Ts().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){return typeof Ts().WorkerGlobalScope<"u"&&typeof Ts().importScripts=="function"}async function CN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function IN(){return rb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="firebaseLocalStorageDb",DN=1,vh="firebaseLocalStorage",ab="fbase_key";class lc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kh(r,e){return r.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function MN(){const r=indexedDB.deleteDatabase(ib);return new lc(r).toPromise()}function Mm(){const r=indexedDB.open(ib,DN);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(vh,{keyPath:ab})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(vh)?e(i):(i.close(),await MN(),e(await Mm()))})})}async function Wv(r,e,n){const i=kh(r,!0).put({[ab]:e,value:n});return new lc(i).toPromise()}async function ON(r,e){const n=kh(r,!1).get(e),i=await new lc(n).toPromise();return i===void 0?null:i.value}function Jv(r,e){const n=kh(r,!0).delete(e);return new lc(n).toPromise()}const kN=800,LN=3;class ob{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>LN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(IN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await CN(),!this.activeServiceWorker)return;this.sender=new NN(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await Wv(e,yh,"1"),await Jv(e,yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Wv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>ON(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=kh(o,!1).getAll();return new lc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ob.type="LOCAL";const VN=ob;new ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(r,e){return e?cr(e):(Ae(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends Xx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UN(r){return _N(r.auth,new dp(r),r.bypassAuthState)}function zN(r){const{auth:e,user:n}=r;return Ae(n,e,"internal-error"),vN(n,new dp(r),r.bypassAuthState)}async function BN(r){const{auth:e,user:n}=r;return Ae(n,e,"internal-error"),yN(n,new dp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UN;case"linkViaPopup":case"linkViaRedirect":return BN;case"reauthViaPopup":case"reauthViaRedirect":return zN;default:mr(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new ac(2e3,1e4);class oo extends lb{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qN.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="pendingRedirect",nh=new Map;class FN extends lb{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const i=await GN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GN(r,e){const n=YN(e),i=KN(r);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function $N(r,e){nh.set(r._key(),e)}function KN(r){return cr(r._redirectPersistence)}function YN(r){return th(HN,r.config.apiKey,r.name)}async function QN(r,e,n=!1){if(di(r.app))return Promise.reject(na(r));const i=cp(r),o=PN(i,e),d=await new FN(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=600*1e3;class WN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!cb(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Es(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zv(e))}saveEventToCache(e){this.cachedEventUids.add(Zv(e)),this.lastProcessedEventTime=Date.now()}}function Zv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function cb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(r,e={}){return Eo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t2=/^https?/;async function n2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await ZN(r);for(const n of e)try{if(s2(n))return}catch{}mr(r,"unauthorized-domain")}function s2(r){const e=Im(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!t2.test(n))return!1;if(e2.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new ac(3e4,6e4);function e_(){const r=Ts().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function i2(r){return new Promise((e,n)=>{var i,o,c;function d(){e_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e_(),n(Es(r,"network-request-failed"))},timeout:r2.get()})}if(!((o=(i=Ts().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Ts().gapi)===null||c===void 0)&&c.load)d();else{const p=uN("iframefcb");return Ts()[p]=()=>{gapi.load?d():n(Es(r,"network-request-failed"))},lN(`${cN()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw sh=null,e})}let sh=null;function a2(r){return sh=sh||i2(r),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=new ac(5e3,15e3),l2="__/auth/iframe",c2="emulator/auth/iframe",u2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d2(r){const e=r.config;Ae(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?ip(e,c2):`https://${r.config.authDomain}/${l2}`,i={apiKey:e.apiKey,appName:r.name,v:ua},o=h2.get(r.config.apiHost);o&&(i.eid=o);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${ic(i).slice(1)}`}async function f2(r){const e=await a2(r),n=Ts().gapi;return Ae(n,r,"internal-error"),e.open({where:document.body,url:d2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u2,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const d=Es(r,"network-request-failed"),p=Ts().setTimeout(()=>{c(d)},o2.get());function g(){Ts().clearTimeout(p),o(i)}i.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p2=500,g2=600,y2="_blank",v2="http://localhost";class t_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _2(r,e,n,i=p2,o=g2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g=Object.assign(Object.assign({},m2),{width:i.toString(),height:o.toString(),top:c,left:d}),y=an().toLowerCase();n&&(p=qx(y)?y2:n),zx(y)&&(e=e||v2,g.scrollbars="yes");const x=Object.entries(g).reduce((A,[D,V])=>`${A}${D}=${V},`,"");if(eN(y)&&p!=="_self")return x2(e||"",p),new t_(null);const w=window.open(e||"",p,x);Ae(w,r,"popup-blocked");try{w.focus()}catch{}return new t_(w)}function x2(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="__/auth/handler",w2="emulator/auth/handler",E2=encodeURIComponent("fac");async function n_(r,e,n,i,o,c){Ae(r.config.authDomain,r,"auth-domain-config-required"),Ae(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:ua,eventId:o};if(e instanceof Wx){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",T1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,w]of Object.entries({}))d[x]=w}if(e instanceof oc){const x=e.getScopes().filter(w=>w!=="");x.length>0&&(d.scopes=x.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await r._getAppCheckToken(),y=g?`#${E2}=${encodeURIComponent(g)}`:"";return`${T2(r)}?${ic(p).slice(1)}${y}`}function T2({config:r}){return r.emulator?ip(r,w2):`https://${r.authDomain}/${b2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="webStorageSupport";class S2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sb,this._completeRedirectFn=QN,this._overrideRedirectResult=$N}async _openPopup(e,n,i,o){var c;pr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await n_(e,n,i,Im(),o);return _2(e,d,hp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await n_(e,n,i,Im(),o);return RN(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(pr(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await f2(e),i=new WN(e);return n.register("authEvent",o=>(Ae(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vm,{type:vm},o=>{var c;const d=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[vm];d!==void 0&&n(!!d),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=n2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Kx()||Bx()||lp()}}const A2=S2;var s_="@firebase/auth",r_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function C2(r){ra(new yi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;Ae(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yx(r)},y=new aN(i,o,c,g);return dN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ra(new yi("auth-internal",e=>{const n=cp(e.getProvider("auth").getImmediate());return(i=>new N2(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(s_,r_,R2(r)),ws(s_,r_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=300,I2=Tx("authIdTokenMaxAge")||j2;let i_=null;const D2=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>I2)return;const o=n==null?void 0:n.token;i_!==o&&(i_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function M2(r=np()){const e=Mh(r,"auth");if(e.isInitialized())return e.getImmediate();const n=hN(r,{popupRedirectResolver:A2,persistence:[VN,SN,sb]}),i=Tx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=D2(c.toString());bN(n,d,()=>d(n.currentUser)),xN(n,p=>d(p))}}const o=bx("auth");return o&&fN(n,`http://${o}`),n}function O2(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}oN({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const c=Es("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",O2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});C2("Browser");var a_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sa,ub;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,N){function R(){}R.prototype=N.prototype,I.D=N.prototype,I.prototype=new R,I.prototype.constructor=I,I.C=function(j,L,k){for(var C=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)C[Se-2]=arguments[Se];return N.prototype[L].apply(j,C)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,N,R){R||(R=0);var j=Array(16);if(typeof N=="string")for(var L=0;16>L;++L)j[L]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(L=0;16>L;++L)j[L]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=I.g[0],R=I.g[1],L=I.g[2];var k=I.g[3],C=N+(k^R&(L^k))+j[0]+3614090360&4294967295;N=R+(C<<7&4294967295|C>>>25),C=k+(L^N&(R^L))+j[1]+3905402710&4294967295,k=N+(C<<12&4294967295|C>>>20),C=L+(R^k&(N^R))+j[2]+606105819&4294967295,L=k+(C<<17&4294967295|C>>>15),C=R+(N^L&(k^N))+j[3]+3250441966&4294967295,R=L+(C<<22&4294967295|C>>>10),C=N+(k^R&(L^k))+j[4]+4118548399&4294967295,N=R+(C<<7&4294967295|C>>>25),C=k+(L^N&(R^L))+j[5]+1200080426&4294967295,k=N+(C<<12&4294967295|C>>>20),C=L+(R^k&(N^R))+j[6]+2821735955&4294967295,L=k+(C<<17&4294967295|C>>>15),C=R+(N^L&(k^N))+j[7]+4249261313&4294967295,R=L+(C<<22&4294967295|C>>>10),C=N+(k^R&(L^k))+j[8]+1770035416&4294967295,N=R+(C<<7&4294967295|C>>>25),C=k+(L^N&(R^L))+j[9]+2336552879&4294967295,k=N+(C<<12&4294967295|C>>>20),C=L+(R^k&(N^R))+j[10]+4294925233&4294967295,L=k+(C<<17&4294967295|C>>>15),C=R+(N^L&(k^N))+j[11]+2304563134&4294967295,R=L+(C<<22&4294967295|C>>>10),C=N+(k^R&(L^k))+j[12]+1804603682&4294967295,N=R+(C<<7&4294967295|C>>>25),C=k+(L^N&(R^L))+j[13]+4254626195&4294967295,k=N+(C<<12&4294967295|C>>>20),C=L+(R^k&(N^R))+j[14]+2792965006&4294967295,L=k+(C<<17&4294967295|C>>>15),C=R+(N^L&(k^N))+j[15]+1236535329&4294967295,R=L+(C<<22&4294967295|C>>>10),C=N+(L^k&(R^L))+j[1]+4129170786&4294967295,N=R+(C<<5&4294967295|C>>>27),C=k+(R^L&(N^R))+j[6]+3225465664&4294967295,k=N+(C<<9&4294967295|C>>>23),C=L+(N^R&(k^N))+j[11]+643717713&4294967295,L=k+(C<<14&4294967295|C>>>18),C=R+(k^N&(L^k))+j[0]+3921069994&4294967295,R=L+(C<<20&4294967295|C>>>12),C=N+(L^k&(R^L))+j[5]+3593408605&4294967295,N=R+(C<<5&4294967295|C>>>27),C=k+(R^L&(N^R))+j[10]+38016083&4294967295,k=N+(C<<9&4294967295|C>>>23),C=L+(N^R&(k^N))+j[15]+3634488961&4294967295,L=k+(C<<14&4294967295|C>>>18),C=R+(k^N&(L^k))+j[4]+3889429448&4294967295,R=L+(C<<20&4294967295|C>>>12),C=N+(L^k&(R^L))+j[9]+568446438&4294967295,N=R+(C<<5&4294967295|C>>>27),C=k+(R^L&(N^R))+j[14]+3275163606&4294967295,k=N+(C<<9&4294967295|C>>>23),C=L+(N^R&(k^N))+j[3]+4107603335&4294967295,L=k+(C<<14&4294967295|C>>>18),C=R+(k^N&(L^k))+j[8]+1163531501&4294967295,R=L+(C<<20&4294967295|C>>>12),C=N+(L^k&(R^L))+j[13]+2850285829&4294967295,N=R+(C<<5&4294967295|C>>>27),C=k+(R^L&(N^R))+j[2]+4243563512&4294967295,k=N+(C<<9&4294967295|C>>>23),C=L+(N^R&(k^N))+j[7]+1735328473&4294967295,L=k+(C<<14&4294967295|C>>>18),C=R+(k^N&(L^k))+j[12]+2368359562&4294967295,R=L+(C<<20&4294967295|C>>>12),C=N+(R^L^k)+j[5]+4294588738&4294967295,N=R+(C<<4&4294967295|C>>>28),C=k+(N^R^L)+j[8]+2272392833&4294967295,k=N+(C<<11&4294967295|C>>>21),C=L+(k^N^R)+j[11]+1839030562&4294967295,L=k+(C<<16&4294967295|C>>>16),C=R+(L^k^N)+j[14]+4259657740&4294967295,R=L+(C<<23&4294967295|C>>>9),C=N+(R^L^k)+j[1]+2763975236&4294967295,N=R+(C<<4&4294967295|C>>>28),C=k+(N^R^L)+j[4]+1272893353&4294967295,k=N+(C<<11&4294967295|C>>>21),C=L+(k^N^R)+j[7]+4139469664&4294967295,L=k+(C<<16&4294967295|C>>>16),C=R+(L^k^N)+j[10]+3200236656&4294967295,R=L+(C<<23&4294967295|C>>>9),C=N+(R^L^k)+j[13]+681279174&4294967295,N=R+(C<<4&4294967295|C>>>28),C=k+(N^R^L)+j[0]+3936430074&4294967295,k=N+(C<<11&4294967295|C>>>21),C=L+(k^N^R)+j[3]+3572445317&4294967295,L=k+(C<<16&4294967295|C>>>16),C=R+(L^k^N)+j[6]+76029189&4294967295,R=L+(C<<23&4294967295|C>>>9),C=N+(R^L^k)+j[9]+3654602809&4294967295,N=R+(C<<4&4294967295|C>>>28),C=k+(N^R^L)+j[12]+3873151461&4294967295,k=N+(C<<11&4294967295|C>>>21),C=L+(k^N^R)+j[15]+530742520&4294967295,L=k+(C<<16&4294967295|C>>>16),C=R+(L^k^N)+j[2]+3299628645&4294967295,R=L+(C<<23&4294967295|C>>>9),C=N+(L^(R|~k))+j[0]+4096336452&4294967295,N=R+(C<<6&4294967295|C>>>26),C=k+(R^(N|~L))+j[7]+1126891415&4294967295,k=N+(C<<10&4294967295|C>>>22),C=L+(N^(k|~R))+j[14]+2878612391&4294967295,L=k+(C<<15&4294967295|C>>>17),C=R+(k^(L|~N))+j[5]+4237533241&4294967295,R=L+(C<<21&4294967295|C>>>11),C=N+(L^(R|~k))+j[12]+1700485571&4294967295,N=R+(C<<6&4294967295|C>>>26),C=k+(R^(N|~L))+j[3]+2399980690&4294967295,k=N+(C<<10&4294967295|C>>>22),C=L+(N^(k|~R))+j[10]+4293915773&4294967295,L=k+(C<<15&4294967295|C>>>17),C=R+(k^(L|~N))+j[1]+2240044497&4294967295,R=L+(C<<21&4294967295|C>>>11),C=N+(L^(R|~k))+j[8]+1873313359&4294967295,N=R+(C<<6&4294967295|C>>>26),C=k+(R^(N|~L))+j[15]+4264355552&4294967295,k=N+(C<<10&4294967295|C>>>22),C=L+(N^(k|~R))+j[6]+2734768916&4294967295,L=k+(C<<15&4294967295|C>>>17),C=R+(k^(L|~N))+j[13]+1309151649&4294967295,R=L+(C<<21&4294967295|C>>>11),C=N+(L^(R|~k))+j[4]+4149444226&4294967295,N=R+(C<<6&4294967295|C>>>26),C=k+(R^(N|~L))+j[11]+3174756917&4294967295,k=N+(C<<10&4294967295|C>>>22),C=L+(N^(k|~R))+j[2]+718787259&4294967295,L=k+(C<<15&4294967295|C>>>17),C=R+(k^(L|~N))+j[9]+3951481745&4294967295,I.g[0]=I.g[0]+N&4294967295,I.g[1]=I.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+L&4294967295,I.g[3]=I.g[3]+k&4294967295}i.prototype.u=function(I,N){N===void 0&&(N=I.length);for(var R=N-this.blockSize,j=this.B,L=this.h,k=0;k<N;){if(L==0)for(;k<=R;)o(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<N;)if(j[L++]=I.charCodeAt(k++),L==this.blockSize){o(this,j),L=0;break}}else for(;k<N;)if(j[L++]=I[k++],L==this.blockSize){o(this,j),L=0;break}}this.h=L,this.o+=N},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var N=1;N<I.length-8;++N)I[N]=0;var R=8*this.o;for(N=I.length-8;N<I.length;++N)I[N]=R&255,R/=256;for(this.u(I),I=Array(16),N=R=0;4>N;++N)for(var j=0;32>j;j+=8)I[R++]=this.g[N]>>>j&255;return I};function c(I,N){var R=p;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=N(I)}function d(I,N){this.h=N;for(var R=[],j=!0,L=I.length-1;0<=L;L--){var k=I[L]|0;j&&k==N||(R[L]=k,j=!1)}this.g=R}var p={};function g(I){return-128<=I&&128>I?c(I,function(N){return new d([N|0],0>N?-1:0)}):new d([I|0],0>I?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return w;if(0>I)return z(y(-I));for(var N=[],R=1,j=0;I>=R;j++)N[j]=I/R|0,R*=4294967296;return new d(N,0)}function x(I,N){if(I.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(I.charAt(0)=="-")return z(x(I.substring(1),N));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(N,8)),j=w,L=0;L<I.length;L+=8){var k=Math.min(8,I.length-L),C=parseInt(I.substring(L,L+k),N);8>k?(k=y(Math.pow(N,k)),j=j.j(k).add(y(C))):(j=j.j(R),j=j.add(y(C)))}return j}var w=g(0),A=g(1),D=g(16777216);r=d.prototype,r.m=function(){if(H(this))return-z(this).m();for(var I=0,N=1,R=0;R<this.g.length;R++){var j=this.i(R);I+=(0<=j?j:4294967296+j)*N,N*=4294967296}return I},r.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(H(this))return"-"+z(this).toString(I);for(var N=y(Math.pow(I,6)),R=this,j="";;){var L=se(R,N).g;R=Y(R,L.j(N));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(I);if(R=L,V(R))return k+j;for(;6>k.length;)k="0"+k;j=k+j}},r.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(var N=0;N<I.g.length;N++)if(I.g[N]!=0)return!1;return!0}function H(I){return I.h==-1}r.l=function(I){return I=Y(this,I),H(I)?-1:V(I)?0:1};function z(I){for(var N=I.g.length,R=[],j=0;j<N;j++)R[j]=~I.g[j];return new d(R,~I.h).add(A)}r.abs=function(){return H(this)?z(this):this},r.add=function(I){for(var N=Math.max(this.g.length,I.g.length),R=[],j=0,L=0;L<=N;L++){var k=j+(this.i(L)&65535)+(I.i(L)&65535),C=(k>>>16)+(this.i(L)>>>16)+(I.i(L)>>>16);j=C>>>16,k&=65535,C&=65535,R[L]=C<<16|k}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Y(I,N){return I.add(z(N))}r.j=function(I){if(V(this)||V(I))return w;if(H(this))return H(I)?z(this).j(z(I)):z(z(this).j(I));if(H(I))return z(this.j(z(I)));if(0>this.l(D)&&0>I.l(D))return y(this.m()*I.m());for(var N=this.g.length+I.g.length,R=[],j=0;j<2*N;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(var L=0;L<I.g.length;L++){var k=this.i(j)>>>16,C=this.i(j)&65535,Se=I.i(L)>>>16,pe=I.i(L)&65535;R[2*j+2*L]+=C*pe,te(R,2*j+2*L),R[2*j+2*L+1]+=k*pe,te(R,2*j+2*L+1),R[2*j+2*L+1]+=C*Se,te(R,2*j+2*L+1),R[2*j+2*L+2]+=k*Se,te(R,2*j+2*L+2)}for(j=0;j<N;j++)R[j]=R[2*j+1]<<16|R[2*j];for(j=N;j<2*N;j++)R[j]=0;return new d(R,0)};function te(I,N){for(;(I[N]&65535)!=I[N];)I[N+1]+=I[N]>>>16,I[N]&=65535,N++}function J(I,N){this.g=I,this.h=N}function se(I,N){if(V(N))throw Error("division by zero");if(V(I))return new J(w,w);if(H(I))return N=se(z(I),N),new J(z(N.g),z(N.h));if(H(N))return N=se(I,z(N)),new J(z(N.g),N.h);if(30<I.g.length){if(H(I)||H(N))throw Error("slowDivide_ only works with positive integers.");for(var R=A,j=N;0>=j.l(I);)R=le(R),j=le(j);var L=ue(R,1),k=ue(j,1);for(j=ue(j,2),R=ue(R,2);!V(j);){var C=k.add(j);0>=C.l(I)&&(L=L.add(R),k=C),j=ue(j,1),R=ue(R,1)}return N=Y(I,L.j(N)),new J(L,N)}for(L=w;0<=I.l(N);){for(R=Math.max(1,Math.floor(I.m()/N.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),k=y(R),C=k.j(N);H(C)||0<C.l(I);)R-=j,k=y(R),C=k.j(N);V(k)&&(k=A),L=L.add(k),I=Y(I,C)}return new J(L,I)}r.A=function(I){return se(this,I).h},r.and=function(I){for(var N=Math.max(this.g.length,I.g.length),R=[],j=0;j<N;j++)R[j]=this.i(j)&I.i(j);return new d(R,this.h&I.h)},r.or=function(I){for(var N=Math.max(this.g.length,I.g.length),R=[],j=0;j<N;j++)R[j]=this.i(j)|I.i(j);return new d(R,this.h|I.h)},r.xor=function(I){for(var N=Math.max(this.g.length,I.g.length),R=[],j=0;j<N;j++)R[j]=this.i(j)^I.i(j);return new d(R,this.h^I.h)};function le(I){for(var N=I.g.length+1,R=[],j=0;j<N;j++)R[j]=I.i(j)<<1|I.i(j-1)>>>31;return new d(R,I.h)}function ue(I,N){var R=N>>5;N%=32;for(var j=I.g.length-R,L=[],k=0;k<j;k++)L[k]=0<N?I.i(k+R)>>>N|I.i(k+R+1)<<32-N:I.i(k+R);return new d(L,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ub=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=x,sa=d}).apply(typeof a_<"u"?a_:typeof self<"u"?self:typeof window<"u"?window:{});var Ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hb,kl,db,rh,Om,fb,mb,pb;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,b){return h==Array.prototype||h==Object.prototype||(h[v]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ku=="object"&&Ku];for(var v=0;v<h.length;++v){var b=h[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=n(this);function o(h,v){if(v)e:{var b=i;h=h.split(".");for(var S=0;S<h.length-1;S++){var q=h[S];if(!(q in b))break e;b=b[q]}h=h[h.length-1],S=b[h],v=v(S),v!=S&&v!=null&&e(b,h,{configurable:!0,writable:!0,value:v})}}function c(h,v){h instanceof String&&(h+="");var b=0,S=!1,q={next:function(){if(!S&&b<h.length){var X=b++;return{value:v(X,h[X]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(h){return h||function(){return c(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function y(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function x(h,v,b){return h.call.apply(h.bind,arguments)}function w(h,v,b){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function A(h,v,b){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:w,A.apply(null,arguments)}function D(h,v){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function V(h,v){function b(){}b.prototype=v.prototype,h.aa=v.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(S,q,X){for(var he=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)he[Xe-2]=arguments[Xe];return v.prototype[q].apply(S,he)}}function H(h){const v=h.length;if(0<v){const b=Array(v);for(let S=0;S<v;S++)b[S]=h[S];return b}return[]}function z(h,v){for(let b=1;b<arguments.length;b++){const S=arguments[b];if(g(S)){const q=h.length||0,X=S.length||0;h.length=q+X;for(let he=0;he<X;he++)h[q+he]=S[he]}else h.push(S)}}class Y{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function te(h){return/^[\s\xa0]*$/.test(h)}function J(){var h=p.navigator;return h&&(h=h.userAgent)?h:""}function se(h){return se[" "](h),h}se[" "]=function(){};var le=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function ue(h,v,b){for(const S in h)v.call(b,h[S],S,h)}function I(h,v){for(const b in h)v.call(void 0,h[b],b,h)}function N(h){const v={};for(const b in h)v[b]=h[b];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,v){let b,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(b in S)h[b]=S[b];for(let X=0;X<R.length;X++)b=R[X],Object.prototype.hasOwnProperty.call(S,b)&&(h[b]=S[b])}}function L(h){var v=1;h=h.split(":");const b=[];for(;0<v&&h.length;)b.push(h.shift()),v--;return h.length&&b.push(h.join(":")),b}function k(h){p.setTimeout(()=>{throw h},0)}function C(){var h=xe;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Se{constructor(){this.h=this.g=null}add(v,b){const S=pe.get();S.set(v,b),this.h?this.h.next=S:this.g=S,this.h=S}}var pe=new Y(()=>new O,h=>h.reset());class O{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let W,de=!1,xe=new Se,Ie=()=>{const h=p.Promise.resolve(void 0);W=()=>{h.then(P)}};var P=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(b){k(b)}var v=pe;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}de=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var ce=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};p.addEventListener("test",b,v),p.removeEventListener("test",b,v)}catch{}return h})();function re(h,v){if(F.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(le){e:{try{se(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else b=="mouseover"?v=h.fromElement:b=="mouseout"&&(v=h.toElement);this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:fe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&re.aa.h.call(this)}}V(re,F);var fe={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function We(h,v,b,S,q){this.listener=h,this.proxy=null,this.src=v,this.type=b,this.capture=!!S,this.ha=q,this.key=++Fe,this.da=this.fa=!1}function ln(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function yn(h){this.src=h,this.g={},this.h=0}yn.prototype.add=function(h,v,b,S,q){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var he=pa(h,v,S,q);return-1<he?(v=h[he],b||(v.fa=!1)):(v=new We(v,this.src,X,!!S,q),v.fa=b,h.push(v)),v};function cs(h,v){var b=v.type;if(b in h.g){var S=h.g[b],q=Array.prototype.indexOf.call(S,v,void 0),X;(X=0<=q)&&Array.prototype.splice.call(S,q,1),X&&(ln(v),h.g[b].length==0&&(delete h.g[b],h.h--))}}function pa(h,v,b,S){for(var q=0;q<h.length;++q){var X=h[q];if(!X.da&&X.listener==v&&X.capture==!!b&&X.ha==S)return q}return-1}var Wn="closure_lm_"+(1e6*Math.random()|0),Si={};function ga(h,v,b,S,q){if(Array.isArray(v)){for(var X=0;X<v.length;X++)ga(h,v[X],b,S,q);return null}return b=vc(b),h&&h[be]?h.K(v,b,y(S)?!!S.capture:!1,q):ed(h,v,b,!1,S,q)}function ed(h,v,b,S,q,X){if(!v)throw Error("Invalid event type");var he=y(q)?!!q.capture:!!q,Xe=jo(h);if(Xe||(h[Wn]=Xe=new yn(h)),b=Xe.add(v,b,S,he,X),b.proxy)return b;if(S=yc(),b.proxy=S,S.src=h,S.listener=b,h.addEventListener)ce||(q=he),q===void 0&&(q=!1),h.addEventListener(v.toString(),S,q);else if(h.attachEvent)h.attachEvent(va(v.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function yc(){function h(b){return v.call(h.src,h.listener,b)}const v=td;return h}function ya(h,v,b,S,q){if(Array.isArray(v))for(var X=0;X<v.length;X++)ya(h,v[X],b,S,q);else S=y(S)?!!S.capture:!!S,b=vc(b),h&&h[be]?(h=h.i,v=String(v).toString(),v in h.g&&(X=h.g[v],b=pa(X,b,S,q),-1<b&&(ln(X[b]),Array.prototype.splice.call(X,b,1),X.length==0&&(delete h.g[v],h.h--)))):h&&(h=jo(h))&&(v=h.g[v.toString()],h=-1,v&&(h=pa(v,b,S,q)),(b=-1<h?v[h]:null)&&Ai(b))}function Ai(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[be])cs(v.i,h);else{var b=h.type,S=h.proxy;v.removeEventListener?v.removeEventListener(b,S,h.capture):v.detachEvent?v.detachEvent(va(b),S):v.addListener&&v.removeListener&&v.removeListener(S),(b=jo(v))?(cs(b,h),b.h==0&&(b.src=null,v[Wn]=null)):ln(h)}}}function va(h){return h in Si?Si[h]:Si[h]="on"+h}function td(h,v){if(h.da)h=!0;else{v=new re(v,this);var b=h.listener,S=h.ha||h.src;h.fa&&Ai(h),h=b.call(S,v)}return h}function jo(h){return h=h[Wn],h instanceof yn?h:null}var Ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function vc(h){return typeof h=="function"?h:(h[Ut]||(h[Ut]=function(v){return h.handleEvent(v)}),h[Ut])}function Nt(){ee.call(this),this.i=new yn(this),this.M=this,this.F=null}V(Nt,ee),Nt.prototype[be]=!0,Nt.prototype.removeEventListener=function(h,v,b,S){ya(this,h,v,b,S)};function jt(h,v){var b,S=h.F;if(S)for(b=[];S;S=S.F)b.push(S);if(h=h.M,S=v.type||v,typeof v=="string")v=new F(v,h);else if(v instanceof F)v.target=v.target||h;else{var q=v;v=new F(S,h),j(v,q)}if(q=!0,b)for(var X=b.length-1;0<=X;X--){var he=v.g=b[X];q=ks(he,S,!0,v)&&q}if(he=v.g=h,q=ks(he,S,!0,v)&&q,q=ks(he,S,!1,v)&&q,b)for(X=0;X<b.length;X++)he=v.g=b[X],q=ks(he,S,!1,v)&&q}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var b=h.g[v],S=0;S<b.length;S++)ln(b[S]);delete h.g[v],h.h--}}this.F=null},Nt.prototype.K=function(h,v,b,S){return this.i.add(String(h),v,!1,b,S)},Nt.prototype.L=function(h,v,b,S){return this.i.add(String(h),v,!0,b,S)};function ks(h,v,b,S){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,X=0;X<v.length;++X){var he=v[X];if(he&&!he.da&&he.capture==b){var Xe=he.listener,xt=he.ha||he.src;he.fa&&cs(h.i,he),q=Xe.call(xt,S)!==!1&&q}}return q&&!S.defaultPrevented}function _c(h,v,b){if(typeof h=="function")b&&(h=A(h,b));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:p.setTimeout(h,v||0)}function Io(h){h.g=_c(()=>{h.g=null,h.i&&(h.i=!1,Io(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class nd extends ee{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Io(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ni(h){ee.call(this),this.h=h,this.g={}}V(Ni,ee);var vr=[];function Zt(h){ue(h.g,function(v,b){this.g.hasOwnProperty(b)&&Ai(v)},h),h.g={}}Ni.prototype.N=function(){Ni.aa.N.call(this),Zt(this)},Ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=p.JSON.stringify,cn=p.JSON.parse,sd=class{stringify(h){return p.JSON.stringify(h,void 0)}parse(h){return p.JSON.parse(h,void 0)}};function Do(){}Do.prototype.h=null;function xc(h){return h.h||(h.h=h.i())}function Ri(){}var us={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _r(){F.call(this,"d")}V(_r,F);function Jn(){F.call(this,"c")}V(Jn,F);var Vn={},xr=null;function _a(){return xr=xr||new Nt}Vn.La="serverreachability";function Mo(h){F.call(this,Vn.La,h)}V(Mo,F);function Ls(h){const v=_a();jt(v,new Mo(v))}Vn.STAT_EVENT="statevent";function br(h,v){F.call(this,Vn.STAT_EVENT,h),this.stat=v}V(br,F);function zt(h){const v=_a();jt(v,new br(v,h))}Vn.Ma="timingevent";function Oo(h,v){F.call(this,Vn.Ma,h),this.size=v}V(Oo,F);function wr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){h()},v)}function Er(){this.g=!0}Er.prototype.xa=function(){this.g=!1};function ko(h,v,b,S,q,X){h.info(function(){if(h.g)if(X)for(var he="",Xe=X.split("&"),xt=0;xt<Xe.length;xt++){var Oe=Xe[xt].split("=");if(1<Oe.length){var Dt=Oe[0];Oe=Oe[1];var Mt=Dt.split("_");he=2<=Mt.length&&Mt[1]=="type"?he+(Dt+"="+Oe+"&"):he+(Dt+"=redacted&")}}else he=null;else he=X;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+v+`
`+b+`
`+he})}function Lo(h,v,b,S,q,X,he){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+v+`
`+b+`
`+X+" "+he})}function Vs(h,v,b,S){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+hs(h,b)+(S?" "+S:"")})}function bc(h,v){h.info(function(){return"TIMEOUT: "+v})}Er.prototype.info=function(){};function hs(h,v){if(!h.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var S=b[h];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var X=q[0];if(X!="noop"&&X!="stop"&&X!="close")for(var he=1;he<q.length;he++)q[he]=""}}}}return Ln(b)}catch{return v}}var dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ds;function Tr(){}V(Tr,Do),Tr.prototype.g=function(){return new XMLHttpRequest},Tr.prototype.i=function(){return{}},ds=new Tr;function fs(h,v,b,S){this.j=h,this.i=v,this.l=b,this.R=S||1,this.U=new Ni(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wc}function wc(){this.i=null,this.g="",this.h=!1}var Vo={},Ps={};function Ci(h,v,b){h.L=1,h.v=Di(ft(v)),h.m=b,h.P=!0,Us(h,null)}function Us(h,v){h.F=Date.now(),Zn(h),h.A=ft(h.v);var b=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),qs(b.i,"t",S),h.C=0,b=h.j.J,h.h=new wc,h.g=Pc(h.j,b?v:null,!h.m),0<h.O&&(h.M=new nd(A(h.Y,h,h.g),h.O)),v=h.U,b=h.g,S=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(vr[0]=q.toString()),q=vr);for(var X=0;X<q.length;X++){var he=ga(b,q[X],S||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Ls(),ko(h.i,h.u,h.A,h.l,h.R,h.m)}fs.prototype.ca=function(h){h=h.target;const v=this.M;v&&dn(h)==3?v.j():this.Y(h)},fs.prototype.Y=function(h){try{if(h==this.g)e:{const Mt=dn(this.g);var v=this.g.Ba();const Vr=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||ki(this.g)))){this.J||Mt!=4||v==7||(v==8||0>=Vr?Ls(3):Ls(2)),xa(this);var b=this.g.Z();this.X=b;t:if(zs(this)){var S=ki(this.g);h="";var q=S.length,X=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),Sr(this);var he="";break t}this.h.i=new p.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(S[v],{stream:!(X&&v==q-1)});S.length=0,this.h.g+=h,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=b==200,Lo(this.i,this.u,this.A,this.l,this.R,Mt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,xt=this.g;if((Xe=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Xe)){var Oe=Xe;break t}}Oe=null}if(b=Oe)Vs(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ms(this,b);else{this.o=!1,this.s=3,zt(12),un(this),Sr(this);break e}}if(this.P){b=!0;let _n;for(;!this.J&&this.C<he.length;)if(_n=ji(this,he),_n==Ps){Mt==4&&(this.s=4,zt(14),b=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Vo){this.s=4,zt(15),Vs(this.i,this.l,he,"[Invalid Chunk]"),b=!1;break}else Vs(this.i,this.l,_n,null),ms(this,_n);if(zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||he.length!=0||this.h.h||(this.s=1,zt(16),b=!1),this.o=this.o&&b,!b)Vs(this.i,this.l,he,"[Invalid Chunked Response]"),un(this),Sr(this);else if(0<he.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Yo(Dt),Dt.M=!0,zt(11))}}else Vs(this.i,this.l,he,null),ms(this,he);Mt==4&&un(this),this.o&&!this.J&&(Mt==4?kc(this.j,this):(this.o=!1,Zn(this)))}else Cc(this.g),b==400&&0<he.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),un(this),Sr(this)}}}catch{}finally{}};function zs(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ji(h,v){var b=h.C,S=v.indexOf(`
`,b);return S==-1?Ps:(b=Number(v.substring(b,S)),isNaN(b)?Vo:(S+=1,S+b>v.length?Ps:(v=v.slice(S,S+b),h.C=S+b,v)))}fs.prototype.cancel=function(){this.J=!0,un(this)};function Zn(h){h.S=Date.now()+h.I,gt(h,h.I)}function gt(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=wr(A(h.ba,h),v)}function xa(h){h.B&&(p.clearTimeout(h.B),h.B=null)}fs.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(bc(this.i,this.A),this.L!=2&&(Ls(),zt(17)),un(this),this.s=2,Sr(this)):gt(this,this.S-h)};function Sr(h){h.j.G==0||h.J||kc(h.j,h)}function un(h){xa(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Zt(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function ms(h,v){try{var b=h.j;if(b.G!=0&&(b.g==h||Ar(b.h,h))){if(!h.K&&Ar(b.h,h)&&b.G==3){try{var S=b.Da.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)kr(b),Or(b);else break e;Ko(b),zt(18)}}else b.za=q[1],0<b.za-b.T&&37500>q[2]&&b.F&&b.v==0&&!b.C&&(b.C=wr(A(b.Za,b),6e3));if(1>=Ec(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Fs(b,11)}else if((h.K||b.g==h)&&kr(b),!te(v))for(q=b.Da.g.parse(v),v=0;v<q.length;v++){let Oe=q[v];if(b.T=Oe[0],Oe=Oe[1],b.G==2)if(Oe[0]=="c"){b.K=Oe[1],b.ia=Oe[2];const Dt=Oe[3];Dt!=null&&(b.la=Dt,b.j.info("VER="+b.la));const Mt=Oe[4];Mt!=null&&(b.Aa=Mt,b.j.info("SVER="+b.Aa));const Vr=Oe[5];Vr!=null&&typeof Vr=="number"&&0<Vr&&(S=1.5*Vr,b.L=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const _n=h.g;if(_n){const Pi=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var X=S.h;X.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Nr(X,X.h),X.h=null))}if(S.D){const Gs=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Gs&&(S.ya=Gs,Ge(S.I,S.D,Gs))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),S=b;var he=h;if(S.qa=Vc(S,S.J?S.ia:null,S.W),he.K){Pn(S.h,he);var Xe=he,xt=S.L;xt&&(Xe.I=xt),Xe.B&&(xa(Xe),Zn(Xe)),S.g=he}else Mc(S);0<b.i.length&&Ra(b)}else Oe[0]!="stop"&&Oe[0]!="close"||Fs(b,7);else b.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Fs(b,7):Go(b):Oe[0]!="noop"&&b.l&&b.l.ta(Oe),b.v=0)}}Ls(4)}catch{}}var rd=class{constructor(h,v){this.g=h,this.map=v}};function Po(h){this.l=h||10,p.PerformanceNavigationTiming?(h=p.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Uo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ec(h){return h.h?1:h.g?h.g.size:0}function Ar(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Nr(h,v){h.g?h.g.add(v):h.h=v}function Pn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Po.prototype.cancel=function(){if(this.i=hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function hn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const b of h.g.values())v=v.concat(b.D);return v}return H(h.i)}function Tc(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var v=[],b=h.length,S=0;S<b;S++)v.push(h[S]);return v}v=[],b=0;for(S in h)v[b++]=h[S];return v}function id(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var v=[];h=h.length;for(var b=0;b<h;b++)v.push(b);return v}v=[],b=0;for(const S in h)v[b++]=S;return v}}}function ba(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var b=id(h),S=Tc(h),q=S.length,X=0;X<q;X++)v.call(void 0,S[X],b&&b[X],h)}var zo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wa(h,v){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var S=h[b].indexOf("="),q=null;if(0<=S){var X=h[b].substring(0,S);q=h[b].substring(S+1)}else X=h[b];v(X,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Bs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bs){this.h=h.h,Rr(this,h.j),this.o=h.o,this.g=h.g,Ii(this,h.s),this.l=h.l;var v=h.i,b=new ps;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Ea(this,b),this.m=h.m}else h&&(v=String(h).match(zo))?(this.h=!1,Rr(this,v[1]||"",!0),this.o=Cr(v[2]||""),this.g=Cr(v[3]||"",!0),Ii(this,v[4]),this.l=Cr(v[5]||"",!0),Ea(this,v[6]||"",!0),this.m=Cr(v[7]||"")):(this.h=!1,this.i=new ps(null,this.h))}Bs.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Un(v,Bo,!0),":");var b=this.g;return(b||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Un(v,Bo,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Un(b,b.charAt(0)=="/"?qo:Sc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Un(b,ld)),h.join("")};function ft(h){return new Bs(h)}function Rr(h,v,b){h.j=b?Cr(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ii(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Ea(h,v,b){v instanceof ps?(h.i=v,Ac(h.i,h.h)):(b||(v=Un(v,od)),h.i=new ps(v,h.h))}function Ge(h,v,b){h.i.set(v,b)}function Di(h){return Ge(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Cr(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Un(h,v,b){return typeof h=="string"?(h=encodeURI(h).replace(v,ad),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ad(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Bo=/[#\/\?@]/g,Sc=/[#\?:]/g,qo=/[#\?]/g,od=/[#\?@]/g,ld=/#/g;function ps(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function It(h){h.g||(h.g=new Map,h.h=0,h.i&&wa(h.i,function(v,b){h.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}r=ps.prototype,r.add=function(h,v){It(this),this.i=null,h=An(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(v),this.h+=1,this};function Ta(h,v){It(h),v=An(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Sa(h,v){return It(h),v=An(h,v),h.g.has(v)}r.forEach=function(h,v){It(this),this.g.forEach(function(b,S){b.forEach(function(q){h.call(v,q,S,this)},this)},this)},r.na=function(){It(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let S=0;S<v.length;S++){const q=h[S];for(let X=0;X<q.length;X++)b.push(v[S])}return b},r.V=function(h){It(this);let v=[];if(typeof h=="string")Sa(this,h)&&(v=v.concat(this.g.get(An(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)v=v.concat(h[b])}return v},r.set=function(h,v){return It(this),this.i=null,h=An(this,h),Sa(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},r.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function qs(h,v,b){Ta(h,v),0<b.length&&(h.i=null,h.g.set(An(h,v),H(b)),h.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var S=v[b];const X=encodeURIComponent(String(S)),he=this.V(S);for(S=0;S<he.length;S++){var q=X;he[S]!==""&&(q+="="+encodeURIComponent(String(he[S]))),h.push(q)}}return this.i=h.join("&")};function An(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ac(h,v){v&&!h.j&&(It(h),h.i=null,h.g.forEach(function(b,S){var q=S.toLowerCase();S!=q&&(Ta(this,S),qs(this,q,b))},h)),h.j=v}function Ho(h,v){const b=new Er;if(p.Image){const S=new Image;S.onload=D(vn,b,"TestLoadImage: loaded",!0,v,S),S.onerror=D(vn,b,"TestLoadImage: error",!1,v,S),S.onabort=D(vn,b,"TestLoadImage: abort",!1,v,S),S.ontimeout=D(vn,b,"TestLoadImage: timeout",!1,v,S),p.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else v(!1)}function Nc(h,v){const b=new Er,S=new AbortController,q=setTimeout(()=>{S.abort(),vn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:S.signal}).then(X=>{clearTimeout(q),X.ok?vn(b,"TestPingServer: ok",!0,v):vn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),vn(b,"TestPingServer: error",!1,v)})}function vn(h,v,b,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(b)}catch{}}function es(){this.g=new sd}function Fo(h,v,b){const S=b||"";try{ba(h,function(q,X){let he=q;y(q)&&(he=Ln(q)),v.push(S+X+"="+encodeURIComponent(he))})}catch(q){throw v.push(S+"type="+encodeURIComponent("_badmap")),q}}function gs(h){this.l=h.Ub||null,this.j=h.eb||!1}V(gs,Do),gs.prototype.g=function(){return new Nn(this.l,this.j)},gs.prototype.i=(function(h){return function(){return h}})({});function Nn(h,v){Nt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Nn,Nt),r=Nn.prototype,r.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,jr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||p).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,jr(this)),this.g&&(this.readyState=3,jr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Aa(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Aa(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ys(this):jr(this),this.readyState==3&&Aa(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,ys(this))},r.Qa=function(h){this.g&&(this.response=h,ys(this))},r.ga=function(){this.g&&ys(this)};function ys(h){h.readyState=4,h.l=null,h.j=null,h.v=null,jr(h)}r.setRequestHeader=function(h,v){this.u.append(h,v)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=v.next();return h.join(`\r
`)};function jr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Nn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Mi(h){let v="";return ue(h,function(b,S){v+=S,v+=":",v+=b,v+=`\r
`}),v}function Ir(h,v,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Mi(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):Ge(h,v,b))}function it(h){Nt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(it,Nt);var en=/^https?$/i,Hs=["POST","PUT"];r=it.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,v,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ds.g(),this.v=this.o?xc(this.o):xc(ds),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(X){Oi(this,X);return}if(h=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)b.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())b.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),q=p.FormData&&h instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Hs,v,void 0))||S||q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,he]of b)this.g.setRequestHeader(X,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Na(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){Oi(this,X)}};function Oi(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Dr(h),Mr(h)}function Dr(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,jt(this,"complete"),jt(this,"abort"),Mr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),it.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Rc(this):this.bb())},r.bb=function(){Rc(this)};function Rc(h){if(h.h&&typeof d<"u"&&(!h.v[1]||dn(h)!=4||h.Z()!=2)){if(h.u&&dn(h)==4)_c(h.Ea,0,h);else if(jt(h,"readystatechange"),dn(h)==4){h.h=!1;try{const he=h.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var S;if(S=he===0){var q=String(h.D).match(zo)[1]||null;!q&&p.self&&p.self.location&&(q=p.self.location.protocol.slice(0,-1)),S=!en.test(q?q.toLowerCase():"")}b=S}if(b)jt(h,"complete"),jt(h,"success");else{h.m=6;try{var X=2<dn(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",Dr(h)}}finally{Mr(h)}}}}function Mr(h,v){if(h.g){Na(h);const b=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||jt(h,"ready");try{b.onreadystatechange=S}catch{}}}function Na(h){h.I&&(p.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function dn(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),cn(v)}};function ki(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Cc(h){const v={};h=(h.g&&2<=dn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(te(h[S]))continue;var b=L(h[S]);const q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=v[q]||[];v[q]=X,X.push(b)}I(v,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(h,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||v}function jc(h){this.Aa=0,this.i=[],this.j=new Er,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,h),this.cb=Li("retryDelaySeedMs",1e4,h),this.Wa=Li("forwardChannelMaxRetries",2,h),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Po(h&&h.concurrentRequestLimit),this.Da=new es,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=jc.prototype,r.la=8,r.G=1,r.connect=function(h,v,b,S){zt(0),this.W=h,this.H=v||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.I=Vc(this,null,this.W),Ra(this)};function Go(h){if(Ic(h),h.G==3){var v=h.U++,b=ft(h.I);if(Ge(b,"SID",h.K),Ge(b,"RID",v),Ge(b,"TYPE","terminate"),Vi(h,b),v=new fs(h,h.j,v),v.L=2,v.v=Di(ft(b)),b=!1,p.navigator&&p.navigator.sendBeacon)try{b=p.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&p.Image&&(new Image().src=v.v,b=!0),b||(v.g=Pc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Zn(v)}Qo(h)}function Or(h){h.g&&(Yo(h),h.g.cancel(),h.g=null)}function Ic(h){Or(h),h.u&&(p.clearTimeout(h.u),h.u=null),kr(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&p.clearTimeout(h.s),h.s=null)}function Ra(h){if(!Uo(h.h)&&!h.s){h.s=!0;var v=h.Ga;W||Ie(),de||(W(),de=!0),xe.add(v,h),h.B=0}}function cd(h,v){return Ec(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=wr(A(h.Ga,h,v),Lc(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new fs(this,this.j,h);let X=this.o;if(this.S&&(X?(X=N(X),j(X,this.S)):X=this.S),this.m!==null||this.O||(q.H=X,X=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=$o(this,q,v),b=ft(this.I),Ge(b,"RID",h),Ge(b,"CVER",22),this.D&&Ge(b,"X-HTTP-Session-Id",this.D),Vi(this,b),X&&(this.O?v="headers="+encodeURIComponent(String(Mi(X)))+"&"+v:this.m&&Ir(b,this.m,X)),Nr(this.h,q),this.Ua&&Ge(b,"TYPE","init"),this.P?(Ge(b,"$req",v),Ge(b,"SID","null"),q.T=!0,Ci(q,b,null)):Ci(q,b,v),this.G=2}}else this.G==3&&(h?Dc(this,h):this.i.length==0||Uo(this.h)||Dc(this))};function Dc(h,v){var b;v?b=v.l:b=h.U++;const S=ft(h.I);Ge(S,"SID",h.K),Ge(S,"RID",b),Ge(S,"AID",h.T),Vi(h,S),h.m&&h.o&&Ir(S,h.m,h.o),b=new fs(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),v&&(h.i=v.D.concat(h.i)),v=$o(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Nr(h.h,b),Ci(b,S,v)}function Vi(h,v){h.H&&ue(h.H,function(b,S){Ge(v,S,b)}),h.l&&ba({},function(b,S){Ge(v,S,b)})}function $o(h,v,b){b=Math.min(h.i.length,b);var S=h.l?A(h.l.Na,h.l,h):null;e:{var q=h.i;let X=-1;for(;;){const he=["count="+b];X==-1?0<b?(X=q[0].g,he.push("ofs="+X)):X=0:he.push("ofs="+X);let Xe=!0;for(let xt=0;xt<b;xt++){let Oe=q[xt].g;const Dt=q[xt].map;if(Oe-=X,0>Oe)X=Math.max(0,q[xt].g-100),Xe=!1;else try{Fo(Dt,he,"req"+Oe+"_")}catch{S&&S(Dt)}}if(Xe){S=he.join("&");break e}}}return h=h.i.splice(0,b),v.D=h,S}function Mc(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;W||Ie(),de||(W(),de=!0),xe.add(v,h),h.v=0}}function Ko(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=wr(A(h.Fa,h),Lc(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,Oc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=wr(A(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Or(this),Oc(this))};function Yo(h){h.A!=null&&(p.clearTimeout(h.A),h.A=null)}function Oc(h){h.g=new fs(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=ft(h.qa);Ge(v,"RID","rpc"),Ge(v,"SID",h.K),Ge(v,"AID",h.T),Ge(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ge(v,"TO",h.ja),Ge(v,"TYPE","xmlhttp"),Vi(h,v),h.m&&h.o&&Ir(v,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Di(ft(v)),b.m=null,b.P=!0,Us(b,h)}r.Za=function(){this.C!=null&&(this.C=null,Or(this),Ko(this),zt(19))};function kr(h){h.C!=null&&(p.clearTimeout(h.C),h.C=null)}function kc(h,v){var b=null;if(h.g==v){kr(h),Yo(h),h.g=null;var S=2}else if(Ar(h.h,v))b=v.D,Pn(h.h,v),S=1;else return;if(h.G!=0){if(v.o)if(S==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;S=_a(),jt(S,new Oo(S,b)),Ra(h)}else Mc(h);else if(q=v.s,q==3||q==0&&0<v.X||!(S==1&&cd(h,v)||S==2&&Ko(h)))switch(b&&0<b.length&&(v=h.h,v.i=v.i.concat(b)),q){case 1:Fs(h,5);break;case 4:Fs(h,10);break;case 3:Fs(h,6);break;default:Fs(h,2)}}}function Lc(h,v){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*v}function Fs(h,v){if(h.j.info("Error code "+v),v==2){var b=A(h.fb,h),S=h.Xa;const q=!S;S=new Bs(S||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Rr(S,"https"),Di(S),q?Ho(S.toString(),b):Nc(S.toString(),b)}else zt(2);h.G=0,h.l&&h.l.sa(v),Qo(h),Ic(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Qo(h){if(h.G=0,h.ka=[],h.l){const v=hn(h.h);(v.length!=0||h.i.length!=0)&&(z(h.ka,v),z(h.ka,h.i),h.h.i.length=0,H(h.i),h.i.length=0),h.l.ra()}}function Vc(h,v,b){var S=b instanceof Bs?ft(b):new Bs(b);if(S.g!="")v&&(S.g=v+"."+S.g),Ii(S,S.s);else{var q=p.location;S=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var X=new Bs(null);S&&Rr(X,S),v&&(X.g=v),q&&Ii(X,q),b&&(X.l=b),S=X}return b=h.D,v=h.ya,b&&v&&Ge(S,b,v),Ge(S,"VER",h.la),Vi(h,S),S}function Pc(h,v,b){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new it(new gs({eb:b})):new it(h.pa),v.Ha(h.J),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uc(){}r=Uc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ca(){}Ca.prototype.g=function(h,v){return new fn(h,v)};function fn(h,v){Nt.call(this),this.g=new jc(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!te(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!te(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Lr(this)}V(fn,Nt),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Go(this.g)},fn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=Ln(h),h=b);v.i.push(new rd(v.Ya++,h)),v.G==3&&Ra(v)},fn.prototype.N=function(){this.g.l=null,delete this.j,Go(this.g),delete this.g,fn.aa.N.call(this)};function zc(h){_r.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const b in v){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}V(zc,_r);function Bc(){Jn.call(this),this.status=1}V(Bc,Jn);function Lr(h){this.g=h}V(Lr,Uc),Lr.prototype.ua=function(){jt(this.g,"a")},Lr.prototype.ta=function(h){jt(this.g,new zc(h))},Lr.prototype.sa=function(h){jt(this.g,new Bc)},Lr.prototype.ra=function(){jt(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,pb=function(){return new Ca},mb=function(){return _a()},fb=Vn,Om={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,rh=dt,Bt.COMPLETE="complete",db=Bt,Ri.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,kl=Ri,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,hb=it}).apply(typeof Ku<"u"?Ku:typeof self<"u"?self:typeof window<"u"?window:{});const o_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new ep("@firebase/firestore");function Ol(){return aa.logLevel}function ve(r,...e){if(aa.logLevel<=qe.DEBUG){const n=e.map(fp);aa.debug(`Firestore (${To}): ${r}`,...n)}}function gr(r,...e){if(aa.logLevel<=qe.ERROR){const n=e.map(fp);aa.error(`Firestore (${To}): ${r}`,...n)}}function mo(r,...e){if(aa.logLevel<=qe.WARN){const n=e.map(fp);aa.warn(`Firestore (${To}): ${r}`,...n)}}function fp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(r="Unexpected state"){const e=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: `+r;throw gr(e),new Error(e)}function et(r,e){r||Ne()}function je(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(sn.UNAUTHENTICATED)))}shutdown(){}}class L2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class V2{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let c=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new hr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new hr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string"),new gb(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new sn(e)}}class P2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class U2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new P2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){et(this.o===void 0);const i=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(et(typeof n.token=="string"),this.R=n.token,new z2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=q2(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%e.length))}return i}}function Ye(r,e){return r<e?-1:r>e?1:0}function po(r,e,n){return r.length===e.length&&r.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ct(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Ct(0,0))}static max(){return new Ce(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ne(),i===void 0?i=e.length-n:i>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Kl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kl?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=e.get(o),d=n.get(o);if(c<d)return-1;if(c>d)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class lt extends Kl{construct(e,n,i){return new lt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new lt(n)}static emptyPath(){return new lt([])}}const H2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Kl{construct(e,n,i){return new Qt(e,n,i)}static isValidIdentifier(e){return H2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new ge(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ge(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(c(),o++)}if(c(),d)throw new ge(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(lt.fromString(e))}static fromName(e){return new Ee(lt.fromString(e).popFirst(5))}static empty(){return new Ee(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new lt(e.slice()))}}function F2(r,e){const n=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(i===1e9?new Ct(n+1,0):new Ct(n,i));return new vi(o,Ee.empty(),e)}function G2(r){return new vi(r.readTime,r.key,-1)}class vi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new vi(Ce.min(),Ee.empty(),-1)}static max(){return new vi(Ce.max(),Ee.empty(),-1)}}function $2(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(r.documentKey,e.documentKey),n!==0?n:Ye(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==K2)throw r;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,i)=>{n(e)}))}static reject(e){return new oe(((n,i)=>{i(e)}))}static waitFor(e){return new oe(((n,i)=>{let o=0,c=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++c,d&&c===o&&n()}),(g=>i(g)))})),d=!0,c===o&&n()}))}static or(e){let n=oe.resolve(!1);for(const i of e)n=n.next((o=>o?oe.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,c)=>{i.push(n.call(this,o,c))})),this.waitFor(i)}static mapArray(e,n){return new oe(((i,o)=>{const c=e.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((x=>{d[y]=x,++p,p===c&&i(d)}),(x=>o(x)))}}))}static doWhile(e,n){return new oe(((i,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):i()};c()}))}}function Q2(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uc(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}mp.oe=-1;function Lh(r){return r==null}function _h(r){return r===0&&1/r==-1/0}function X2(r){return typeof r=="number"&&Number.isInteger(r)&&!_h(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function So(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function vb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||Yt.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yu(this.root,e,this.comparator,!0)}}class Yu{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??Yt.RED,this.left=o??Yt.EMPTY,this.right=c??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new Yt(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Yt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,i,o,c){return this}insert(e,n,i){return new Yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new c_(this.data.getIterator())}getIteratorFrom(e){return new c_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class c_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new rs([])}unionWith(e){let n=new Xt(Qt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new rs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new _b("Invalid base64 string: "+c):c}})(e);return new Wt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const W2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(r){if(et(!!r),typeof r=="string"){let e=0;const n=W2.exec(r);if(et(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_t(r.seconds),nanos:_t(r.nanos)}}function _t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function oa(r){return typeof r=="string"?Wt.fromBase64String(r):Wt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gp(r){const e=r.mapValue.fields.__previous_value__;return pp(e)?gp(e):e}function Yl(r){const e=_i(r.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n,i,o,c,d,p,g,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y}}class Ql{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu={mapValue:{}};function la(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?pp(r)?4:eR(r)?9007199254740991:Z2(r)?10:11:Ne()}function Rs(r,e){if(r===e)return!0;const n=la(r);if(n!==la(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Yl(r).isEqual(Yl(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=_i(o.timestampValue),p=_i(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return oa(o.bytesValue).isEqual(oa(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return _t(o.geoPointValue.latitude)===_t(c.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return _t(o.integerValue)===_t(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=_t(o.doubleValue),p=_t(c.doubleValue);return d===p?_h(d)===_h(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return po(r.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},p=c.mapValue.fields||{};if(l_(d)!==l_(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Rs(d[g],p[g])))return!1;return!0})(r,e);default:return Ne()}}function Xl(r,e){return(r.values||[]).find((n=>Rs(n,e)))!==void 0}function go(r,e){if(r===e)return 0;const n=la(r),i=la(e);if(n!==i)return Ye(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ye(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=_t(c.integerValue||c.doubleValue),g=_t(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return u_(r.timestampValue,e.timestampValue);case 4:return u_(Yl(r),Yl(e));case 5:return Ye(r.stringValue,e.stringValue);case 6:return(function(c,d){const p=oa(c),g=oa(d);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const x=Ye(p[y],g[y]);if(x!==0)return x}return Ye(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=Ye(_t(c.latitude),_t(d.latitude));return p!==0?p:Ye(_t(c.longitude),_t(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return h_(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var p,g,y,x;const w=c.fields||{},A=d.fields||{},D=(p=w.value)===null||p===void 0?void 0:p.arrayValue,V=(g=A.value)===null||g===void 0?void 0:g.arrayValue,H=Ye(((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0,((x=V==null?void 0:V.values)===null||x===void 0?void 0:x.length)||0);return H!==0?H:h_(D,V)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Qu.mapValue&&d===Qu.mapValue)return 0;if(c===Qu.mapValue)return 1;if(d===Qu.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let w=0;w<g.length&&w<x.length;++w){const A=Ye(g[w],x[w]);if(A!==0)return A;const D=go(p[g[w]],y[x[w]]);if(D!==0)return D}return Ye(g.length,x.length)})(r.mapValue,e.mapValue);default:throw Ne()}}function u_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ye(r,e);const n=_i(r),i=_i(e),o=Ye(n.seconds,i.seconds);return o!==0?o:Ye(n.nanos,i.nanos)}function h_(r,e){const n=r.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=go(n[o],i[o]);if(c)return c}return Ye(n.length,i.length)}function yo(r){return km(r)}function km(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const i=_i(n);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return oa(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Ee.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let i="[",o=!0;for(const c of n.values||[])o?o=!1:i+=",",i+=km(c);return i+"]"})(r.arrayValue):"mapValue"in r?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${km(n.fields[d])}`;return o+"}"})(r.mapValue):Ne()}function d_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Lm(r){return!!r&&"integerValue"in r}function yp(r){return!!r&&"arrayValue"in r}function f_(r){return!!r&&"nullValue"in r}function m_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ih(r){return!!r&&"mapValue"in r}function Z2(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function zl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return So(r.mapValue.fields,((n,i)=>e.mapValue.fields[n]=zl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function eR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zl(n)}setAll(e){let n=Qt.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=p.popLast()}d?i[p.lastSegment()]=zl(d):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];ih(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){So(n,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new Xn(zl(this.value))}}function xb(r){const e=[];return So(r.fields,((n,i)=>{const o=new Qt([n]);if(ih(i)){const c=xb(i.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new rs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,i,o,c,d,p){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new rn(e,0,Ce.min(),Ce.min(),Ce.min(),Xn.empty(),0)}static newFoundDocument(e,n,i,o){return new rn(e,1,n,Ce.min(),i,o,0)}static newNoDocument(e,n){return new rn(e,2,n,Ce.min(),Ce.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,Ce.min(),Ce.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n){this.position=e,this.inclusive=n}}function p_(r,e,n){let i=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?i=Ee.comparator(Ee.fromName(d.referenceValue),n.key):i=go(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function g_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Rs(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n="asc"){this.field=e,this.dir=n}}function tR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{}class At extends bb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new sR(e,n,i):n==="array-contains"?new aR(e,i):n==="in"?new oR(e,i):n==="not-in"?new lR(e,i):n==="array-contains-any"?new cR(e,i):new At(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new rR(e,i):new iR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(go(n,this.value)):n!==null&&la(this.value)===la(n)&&this.matchesComparison(go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class os extends bb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new os(e,n)}matches(e){return wb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wb(r){return r.op==="and"}function Eb(r){return nR(r)&&wb(r)}function nR(r){for(const e of r.filters)if(e instanceof os)return!1;return!0}function Vm(r){if(r instanceof At)return r.field.canonicalString()+r.op.toString()+yo(r.value);if(Eb(r))return r.filters.map((e=>Vm(e))).join(",");{const e=r.filters.map((n=>Vm(n))).join(",");return`${r.op}(${e})`}}function Tb(r,e){return r instanceof At?(function(i,o){return o instanceof At&&i.op===o.op&&i.field.isEqual(o.field)&&Rs(i.value,o.value)})(r,e):r instanceof os?(function(i,o){return o instanceof os&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,d,p)=>c&&Tb(d,o.filters[p])),!0):!1})(r,e):void Ne()}function Sb(r){return r instanceof At?(function(n){return`${n.field.canonicalString()} ${n.op} ${yo(n.value)}`})(r):r instanceof os?(function(n){return n.op.toString()+" {"+n.getFilters().map(Sb).join(" ,")+"}"})(r):"Filter"}class sR extends At{constructor(e,n,i){super(e,n,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class rR extends At{constructor(e,n){super(e,"in",n),this.keys=Ab("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class iR extends At{constructor(e,n){super(e,"not-in",n),this.keys=Ab("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Ab(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class aR extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yp(n)&&Xl(n.arrayValue,this.value)}}class oR extends At{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xl(this.value.arrayValue,n)}}class lR extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Xl(this.value.arrayValue,n)}}class cR extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Xl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n=null,i=[],o=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=d,this.endAt=p,this.ue=null}}function y_(r,e=null,n=[],i=[],o=null,c=null,d=null){return new uR(r,e,n,i,o,c,d)}function vp(r){const e=je(r);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Vm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>yo(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>yo(i))).join(",")),e.ue=n}return e.ue}function _p(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!tR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!Tb(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!g_(r.startAt,e.startAt)&&g_(r.endAt,e.endAt)}function Pm(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n=null,i=[],o=[],c=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hR(r,e,n,i,o,c,d,p){return new Ao(r,e,n,i,o,c,d,p)}function xp(r){return new Ao(r)}function v_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Nb(r){return r.collectionGroup!==null}function Bl(r){const e=je(r);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Xt(Qt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Wl(c,i))})),n.has(Qt.keyField().canonicalString())||e.ce.push(new Wl(Qt.keyField(),i))}return e.ce}function Ss(r){const e=je(r);return e.le||(e.le=dR(e,Bl(r))),e.le}function dR(r,e){if(r.limitType==="F")return y_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Wl(o.field,c)}));const n=r.endAt?new xh(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new xh(r.startAt.position,r.startAt.inclusive):null;return y_(r.path,r.collectionGroup,e,r.filters,r.limit,n,i)}}function Um(r,e){const n=r.filters.concat([e]);return new Ao(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function bh(r,e,n){return new Ao(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Vh(r,e){return _p(Ss(r),Ss(e))&&r.limitType===e.limitType}function Rb(r){return`${vp(Ss(r))}|lt:${r.limitType}`}function ro(r){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>Sb(o))).join(", ")}]`),Lh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>yo(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>yo(o))).join(",")),`Target(${i})`})(Ss(r))}; limitType=${r.limitType})`}function Ph(r,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ee.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(r,e)&&(function(i,o){for(const c of Bl(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,g){const y=p_(d,p,g);return d.inclusive?y<=0:y<0})(i.startAt,Bl(i),o)||i.endAt&&!(function(d,p,g){const y=p_(d,p,g);return d.inclusive?y>=0:y>0})(i.endAt,Bl(i),o))})(r,e)}function fR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Cb(r){return(e,n)=>{let i=!1;for(const o of Bl(r)){const c=mR(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function mR(r,e,n){const i=r.field.isKeyField()?Ee.comparator(e.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?go(g,y):Ne()})(r.field,e,n);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((n,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return vb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new ht(Ee.comparator);function yr(){return pR}const jb=new ht(Ee.comparator);function Ll(...r){let e=jb;for(const n of r)e=e.insert(n.key,n);return e}function Ib(r){let e=jb;return r.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ta(){return ql()}function Db(){return ql()}function ql(){return new No((r=>r.toString()),((r,e)=>r.isEqual(e)))}const gR=new ht(Ee.comparator),yR=new Xt(Ee.comparator);function Ue(...r){let e=yR;for(const n of r)e=e.add(n);return e}const vR=new Xt(Ye);function _R(){return vR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_h(e)?"-0":e}}function Mb(r){return{integerValue:""+r}}function xR(r,e){return X2(e)?Mb(e):bp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function bR(r,e,n){return r instanceof Jl?(function(o,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&pp(c)&&(c=gp(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}})(n,e):r instanceof Zl?kb(r,e):r instanceof ec?Lb(r,e):(function(o,c){const d=Ob(o,c),p=__(d)+__(o.Pe);return Lm(d)&&Lm(o.Pe)?Mb(p):bp(o.serializer,p)})(r,e)}function wR(r,e,n){return r instanceof Zl?kb(r,e):r instanceof ec?Lb(r,e):n}function Ob(r,e){return r instanceof wh?(function(i){return Lm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Jl extends Uh{}class Zl extends Uh{constructor(e){super(),this.elements=e}}function kb(r,e){const n=Vb(e);for(const i of r.elements)n.some((o=>Rs(o,i)))||n.push(i);return{arrayValue:{values:n}}}class ec extends Uh{constructor(e){super(),this.elements=e}}function Lb(r,e){let n=Vb(e);for(const i of r.elements)n=n.filter((o=>!Rs(o,i)));return{arrayValue:{values:n}}}class wh extends Uh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function __(r){return _t(r.integerValue||r.doubleValue)}function Vb(r){return yp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n){this.field=e,this.transform=n}}function TR(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof Zl&&o instanceof Zl||i instanceof ec&&o instanceof ec?po(i.elements,o.elements,Rs):i instanceof wh&&o instanceof wh?Rs(i.Pe,o.Pe):i instanceof Jl&&o instanceof Jl})(r.transform,e.transform)}class SR{constructor(e,n){this.version=e,this.transformResults=n}}class As{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new As}static exists(e){return new As(void 0,e)}static updateTime(e){return new As(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class zh{}function Pb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new zb(r.key,As.none()):new hc(r.key,r.data,As.none());{const n=r.data,i=Xn.empty();let o=new Xt(Qt.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),o=o.add(c)}return new ha(r.key,i,new rs(o.toArray()),As.none())}}function AR(r,e,n){r instanceof hc?(function(o,c,d){const p=o.value.clone(),g=b_(o.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):r instanceof ha?(function(o,c,d){if(!ah(o.precondition,c))return void c.convertToUnknownDocument(d.version);const p=b_(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(Ub(o)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Hl(r,e,n,i){return r instanceof hc?(function(c,d,p,g){if(!ah(c.precondition,d))return p;const y=c.value.clone(),x=w_(c.fieldTransforms,g,d);return y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,e,n,i):r instanceof ha?(function(c,d,p,g){if(!ah(c.precondition,d))return p;const y=w_(c.fieldTransforms,g,d),x=d.data;return x.setAll(Ub(c)),x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,e,n,i):(function(c,d,p){return ah(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,n)}function NR(r,e){let n=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),c=Ob(i.transform,o||null);c!=null&&(n===null&&(n=Xn.empty()),n.set(i.field,c))}return n||null}function x_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&po(i,o,((c,d)=>TR(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hc extends zh{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ha extends zh{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ub(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=r.data.field(n);e.set(n,i)}})),e}function b_(r,e,n){const i=new Map;et(r.length===n.length);for(let o=0;o<n.length;o++){const c=r[o],d=c.transform,p=e.data.field(c.field);i.set(c.field,wR(d,p,n[o]))}return i}function w_(r,e,n){const i=new Map;for(const o of r){const c=o.transform,d=n.data.field(o.field);i.set(o.field,bR(c,d,e))}return i}class zb extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RR extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&AR(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Hl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Hl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Db();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(o.key)?null:p;const g=Pb(d,p);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ce.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,((n,i)=>x_(n,i)))&&po(this.baseMutations,e.baseMutations,((n,i)=>x_(n,i)))}}class wp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){et(e.mutations.length===i.length);let o=(function(){return gR})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,i[d].version);return new wp(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,He;function DR(r){switch(r){default:return Ne();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function Bb(r){if(r===void 0)return gr("GRPC error has no .code"),ae.UNKNOWN;switch(r){case St.OK:return ae.OK;case St.CANCELLED:return ae.CANCELLED;case St.UNKNOWN:return ae.UNKNOWN;case St.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case St.INTERNAL:return ae.INTERNAL;case St.UNAVAILABLE:return ae.UNAVAILABLE;case St.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case St.NOT_FOUND:return ae.NOT_FOUND;case St.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case St.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case St.ABORTED:return ae.ABORTED;case St.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case St.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case St.DATA_LOSS:return ae.DATA_LOSS;default:return Ne()}}(He=St||(St={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=new sa([4294967295,4294967295],0);function E_(r){const e=MR().encode(r),n=new ub;return n.update(e),new Uint8Array(n.digest())}function T_(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new sa([n,i],0),new sa([o,c],0)]}class Ep{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Vl(`Invalid padding: ${n}`);if(i<0)throw new Vl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=sa.fromNumber(this.Ie)}Ee(e,n,i){let o=e.add(n.multiply(sa.fromNumber(i)));return o.compare(OR)===1&&(o=new sa([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=E_(e),[i,o]=T_(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(i,o,c);if(!this.de(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Ep(c,o,n);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.Ie===0)return;const n=E_(e),[i,o]=T_(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(i,o,c);this.Ae(d)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Bh(Ce.min(),o,new ht(Ye),yr(),Ue())}}class dc{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new dc(i,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n,i,o){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=o}}class qb{constructor(e,n){this.targetId=e,this.me=n}}class Hb{constructor(e,n,i=Wt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class S_{constructor(){this.fe=0,this.ge=N_(),this.pe=Wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ue(),n=Ue(),i=Ue();return this.ge.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ne()}})),new dc(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=N_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kR{constructor(e){this.Le=e,this.Be=new Map,this.ke=yr(),this.qe=A_(),this.Qe=new ht(Ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Ne()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((i,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,i=e.me.count,o=this.Je(n);if(o){const c=o.target;if(Pm(c))if(i===0){const d=new Ee(c.path);this.Ue(n,d,rn.newNoDocument(d,Ce.min()))}else et(i===1);else{const d=this.Ye(n);if(d!==i){const p=this.Ze(e),g=p?this.Xe(p,e,d):1;if(g!==0){this.je(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,y)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let d,p;try{d=oa(i).toUint8Array()}catch(g){if(g instanceof _b)return mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Ep(d,o,c)}catch(g){return mo(g instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.Ie===0?null:p}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach((c=>{const d=this.Le.tt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.Ue(n,c,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((c,d)=>{const p=this.Je(d);if(p){if(c.current&&Pm(p.target)){const g=new Ee(p.target.path);this.ke.get(g)!==null||this.it(d,g)||this.Ue(d,g,rn.newNoDocument(g,e))}c.be&&(n.set(d,c.ve()),c.Ce())}}));let i=Ue();this.qe.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.Je(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(c))})),this.ke.forEach(((c,d)=>d.setReadTime(e)));const o=new Bh(e,n,this.Qe,this.ke,i);return this.ke=yr(),this.qe=A_(),this.Qe=new ht(Ye),o}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new S_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xt(Ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new S_),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function A_(){return new ht(Ee.comparator)}function N_(){return new ht(Ee.comparator)}const LR={asc:"ASCENDING",desc:"DESCENDING"},VR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PR={and:"AND",or:"OR"};class UR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zm(r,e){return r.useProto3Json||Lh(e)?e:{value:e}}function Eh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function zR(r,e){return Eh(r,e.toTimestamp())}function Ns(r){return et(!!r),Ce.fromTimestamp((function(n){const i=_i(n);return new Ct(i.seconds,i.nanos)})(r))}function Tp(r,e){return Bm(r,e).canonicalString()}function Bm(r,e){const n=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Gb(r){const e=lt.fromString(r);return et(Xb(e)),e}function qm(r,e){return Tp(r.databaseId,e.path)}function _m(r,e){const n=Gb(e);if(n.get(1)!==r.databaseId.projectId)throw new ge(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ge(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ee(Kb(n))}function $b(r,e){return Tp(r.databaseId,e)}function BR(r){const e=Gb(r);return e.length===4?lt.emptyPath():Kb(e)}function Hm(r){return new lt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Kb(r){return et(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function R_(r,e,n){return{name:qm(r,e),fields:n.value.mapValue.fields}}function qR(r,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ne()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,x){return y.useProto3Json?(et(x===void 0||typeof x=="string"),Wt.fromBase64String(x||"")):(et(x===void 0||x instanceof Buffer||x instanceof Uint8Array),Wt.fromUint8Array(x||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const x=y.code===void 0?ae.UNKNOWN:Bb(y.code);return new ge(x,y.message||"")})(d);n=new Hb(i,o,c,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=_m(r,i.document.name),c=Ns(i.document.updateTime),d=i.document.createTime?Ns(i.document.createTime):Ce.min(),p=new Xn({mapValue:{fields:i.document.fields}}),g=rn.newFoundDocument(o,c,d,p),y=i.targetIds||[],x=i.removedTargetIds||[];n=new oh(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=_m(r,i.document),c=i.readTime?Ns(i.readTime):Ce.min(),d=rn.newNoDocument(o,c),p=i.removedTargetIds||[];n=new oh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=_m(r,i.document),c=i.removedTargetIds||[];n=new oh([],c,o,null)}else{if(!("filter"in e))return Ne();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,d=new IR(o,c),p=i.targetId;n=new qb(p,d)}}return n}function HR(r,e){let n;if(e instanceof hc)n={update:R_(r,e.key,e.value)};else if(e instanceof zb)n={delete:qm(r,e.key)};else if(e instanceof ha)n={update:R_(r,e.key,e.data),updateMask:JR(e.fieldMask)};else{if(!(e instanceof RR))return Ne();n={verify:qm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const p=d.transform;if(p instanceof Jl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Zl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ec)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof wh)return{fieldPath:d.field.canonicalString(),increment:p.Pe};throw Ne()})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:zR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ne()})(r,e.precondition)),n}function FR(r,e){return r&&r.length>0?(et(e!==void 0),r.map((n=>(function(o,c){let d=o.updateTime?Ns(o.updateTime):Ns(c);return d.isEqual(Ce.min())&&(d=Ns(c)),new SR(d,o.transformResults||[])})(n,e)))):[]}function GR(r,e){return{documents:[$b(r,e.path)]}}function $R(r,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=$b(r,o);const c=(function(y){if(y.length!==0)return Qb(os.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((x=>(function(A){return{field:io(A.field),direction:QR(A.dir)}})(x)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=zm(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:n,parent:o}}function KR(r){let e=BR(r.parent);const n=r.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){et(i===1);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(w){const A=Yb(w);return A instanceof os&&Eb(A)?A.getFilters():[A]})(n.where));let d=[];n.orderBy&&(d=(function(w){return w.map((A=>(function(V){return new Wl(ao(V.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(A)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let A;return A=typeof w=="object"?w.value:w,Lh(A)?null:A})(n.limit));let g=null;n.startAt&&(g=(function(w){const A=!!w.before,D=w.values||[];return new xh(D,A)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const A=!w.before,D=w.values||[];return new xh(D,A)})(n.endAt)),hR(e,o,d,c,p,"F",g,y)}function YR(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Yb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ao(n.unaryFilter.field);return At.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ao(n.unaryFilter.field);return At.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ao(n.unaryFilter.field);return At.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ao(n.unaryFilter.field);return At.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}})(r):r.fieldFilter!==void 0?(function(n){return At.create(ao(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return os.create(n.compositeFilter.filters.map((i=>Yb(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne()}})(n.compositeFilter.op))})(r):Ne()}function QR(r){return LR[r]}function XR(r){return VR[r]}function WR(r){return PR[r]}function io(r){return{fieldPath:r.canonicalString()}}function ao(r){return Qt.fromServerFormat(r.fieldPath)}function Qb(r){return r instanceof At?(function(n){if(n.op==="=="){if(m_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NAN"}};if(f_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(m_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NAN"}};if(f_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(n.field),op:XR(n.op),value:n.value}}})(r):r instanceof os?(function(n){const i=n.getFilters().map((o=>Qb(o)));return i.length===1?i[0]:{compositeFilter:{op:WR(n.op),filters:i}}})(r):Ne()}function JR(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Xb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n,i,o,c=Ce.min(),d=Ce.min(),p=Wt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.ct=e}}function eC(r){const e=KR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?bh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.un=new nC}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(vi.min())}updateCollectionGroup(e,n,i){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class nC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Xt(lt.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Xt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new vo(0)}static kn(){return new vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.changes=new No((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?oe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Hl(i.mutation,o,rs.empty(),Ct.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ue()){const o=ta();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((c=>{let d=Ll();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=ta();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ue())))}populateOverlays(e,n,i){const o=[];return i.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,i,o){let c=yr();const d=ql(),p=(function(){return ql()})();return n.forEach(((g,y)=>{const x=i.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof ha)?c=c.insert(y.key,y):x!==void 0?(d.set(y.key,x.mutation.getFieldMask()),Hl(x.mutation,y,x.mutation.getFieldMask(),Ct.now())):d.set(y.key,rs.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,x)=>d.set(y,x))),n.forEach(((y,x)=>{var w;return p.set(y,new rC(x,(w=d.get(y))!==null&&w!==void 0?w:null))})),p)))}recalculateAndSaveOverlays(e,n){const i=ql();let o=new ht(((d,p)=>d-p)),c=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let x=i.get(g)||rs.empty();x=p.applyToLocalView(y,x),i.set(g,x);const w=(o.get(p.batchId)||Ue()).add(g);o=o.insert(p.batchId,w)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,x=g.value,w=Db();x.forEach((A=>{if(!c.has(A)){const D=Pb(n.get(A),i.get(A));D!==null&&w.set(A,D),c=c.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,w))}return oe.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(d){return Ee.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):oe.resolve(ta());let p=-1,g=c;return d.next((y=>oe.forEach(y,((x,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(x)?oe.resolve():this.remoteDocumentCache.getEntry(e,x).next((A=>{g=g.insert(x,A)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Ue()))).next((x=>({batchId:p,changes:Ib(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((i=>{let o=Ll();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let d=Ll();return this.indexManager.getCollectionParents(e,c).next((p=>oe.forEach(p,(g=>{const y=(function(w,A){return new Ao(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((x=>{x.forEach(((w,A)=>{d=d.insert(w,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o)))).next((d=>{c.forEach(((g,y)=>{const x=y.getKey();d.get(x)===null&&(d=d.insert(x,rn.newInvalidDocument(x)))}));let p=Ll();return d.forEach(((g,y)=>{const x=c.get(g);x!==void 0&&Hl(x.mutation,y,rs.empty(),Ct.now()),Ph(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ns(o.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:eC(o.bundledQuery),readTime:Ns(o.readTime)}})(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.overlays=new ht(Ee.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ta();return oe.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,c)=>{this.ht(e,n,c)})),oe.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Ir.delete(i)),oe.resolve()}getOverlaysForCollection(e,n,i){const o=ta(),c=n.length+1,d=new Ee(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new ht(((y,x)=>y-x));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let x=c.get(y.largestBatchId);x===null&&(x=ta(),c=c.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=ta(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>p.set(y,x))),!(p.size()>=o)););return oe.resolve(p)}ht(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new jR(n,i));let c=this.Ir.get(n);c===void 0&&(c=Ue(),this.Ir.set(n,c)),this.Ir.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.Tr=new Xt(kt.Er),this.dr=new Xt(kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new kt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Vr(new kt(e,n))}mr(e,n){e.forEach((i=>this.removeReference(i,n)))}gr(e){const n=new Ee(new lt([])),i=new kt(n,e),o=new kt(n,e+1),c=[];return this.dr.forEachInRange([i,o],(d=>{this.Vr(d),c.push(d.key)})),c}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ee(new lt([])),i=new kt(n,e),o=new kt(n,e+1);let c=Ue();return this.dr.forEachInRange([i,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new kt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ee.comparator(e.key,n.key)||Ye(e.wr,n.wr)}static Ar(e,n){return Ye(e.wr,n.wr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xt(kt.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new CR(c,n,i,o);this.mutationQueue.push(d);for(const p of o)this.br=this.br.add(new kt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.vr(i),c=o<0?0:o;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new kt(n,0),o=new kt(n,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([i,o],(d=>{const p=this.Dr(d.wr);c.push(p)})),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Xt(Ye);return n.forEach((o=>{const c=new kt(o,0),d=new kt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,d],(p=>{i=i.add(p.wr)}))})),oe.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;Ee.isDocumentKey(c)||(c=c.child(""));const d=new kt(new Ee(c),0);let p=new Xt(Ye);return this.br.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.wr)),!0)}),d),oe.resolve(this.Cr(p))}Cr(e){const n=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){et(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return oe.forEach(n.mutations,(o=>{const c=new kt(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,n){const i=new kt(n,0),o=this.br.firstAfterOrEqual(i);return oe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.Mr=e,this.docs=(function(){return new ht(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,d=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return oe.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let i=yr();return n.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():rn.newInvalidDocument(o))})),oe.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=yr();const d=n.path,p=new Ee(d.child("")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||$2(G2(x),i)<=0||(o.has(x.key)||Ph(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return oe.resolve(c)}getAllFromCollectionGroup(e,n,i,o){Ne()}Or(e,n){return oe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new hC(this)}getSize(e){return oe.resolve(this.size)}}class hC extends sC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.persistence=e,this.Nr=new No((n=>vp(n)),_p),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sp,this.targetCount=0,this.kr=vo.Bn()}forEachTarget(e,n){return this.Nr.forEach(((i,o)=>n(o))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new vo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.Nr.forEach(((d,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.Nr.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),oe.waitFor(c).next((()=>o))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return oe.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),oe.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),oe.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return oe.resolve(i)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new mp(0),this.Kr=!1,this.Kr=!0,this.$r=new lC,this.referenceDelegate=e(this),this.Ur=new dC(this),this.indexManager=new tC,this.remoteDocumentCache=(function(o){return new uC(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new ZR(n),this.Gr=new aC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new cC(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ve("MemoryPersistence","Starting transaction:",e);const o=new mC(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((c=>this.referenceDelegate.jr(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Hr(e,n){return oe.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,n))))}}class mC extends Y2{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Jr=new Sp,this.Yr=null}static Zr(e){return new Ap(e)}get Xr(){if(this.Yr)return this.Yr;throw Ne()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),oe.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.Xr.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,(i=>{const o=Ee.fromPath(i);return this.ei(e,o).next((c=>{c||n.removeEntry(o,Ce.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(e,n){let i=Ue(),o=Ue();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Np(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return v1()?8:Q2(an())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.Yi(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.Zi(e,n,o,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new pC;return this.Xi(e,n,d).next((p=>{if(c.result=p,this.zi)return this.es(e,n,d,p.size)}))})).next((()=>c.result))}es(e,n,i,o){return i.documentReadCount<this.ji?(Ol()<=qe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",ro(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(Ol()<=qe.DEBUG&&ve("QueryEngine","Query:",ro(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Ol()<=qe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",ro(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ss(n))):oe.resolve())}Yi(e,n){if(v_(n))return oe.resolve(null);let i=Ss(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=bh(n,null,"F"),i=Ss(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Ue(...c);return this.Ji.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.ts(n,p);return this.ns(n,y,d,g.readTime)?this.Yi(e,bh(n,null,"F")):this.rs(e,y,n,g)}))))})))))}Zi(e,n,i,o){return v_(n)||o.isEqual(Ce.min())?oe.resolve(null):this.Ji.getDocuments(e,i).next((c=>{const d=this.ts(n,c);return this.ns(n,d,i,o)?oe.resolve(null):(Ol()<=qe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ro(n)),this.rs(e,d,n,F2(o,-1)).next((p=>p)))}))}ts(e,n){let i=new Xt(Cb(e));return n.forEach(((o,c)=>{Ph(e,c)&&(i=i.add(c))})),i}ns(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Xi(e,n,i){return Ol()<=qe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",ro(n)),this.Ji.getDocumentsMatchingQuery(e,n,vi.min(),i)}rs(e,n,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,i,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new ht(Ye),this._s=new No((c=>vp(c)),_p),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function vC(r,e,n,i){return new yC(r,e,n,i)}async function Wb(r,e){const n=je(r);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,n.ls(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],p=[];let g=Ue();for(const y of o){d.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of c){p.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(i,g).next((y=>({hs:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function _C(r,e){const n=je(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=n.cs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,x){const w=y.batch,A=w.keys();let D=oe.resolve();return A.forEach((V=>{D=D.next((()=>x.getEntry(g,V))).next((H=>{const z=y.docVersions.get(V);et(z!==null),H.version.compareTo(z)<0&&(w.applyToRemoteDocument(H,y),H.isValidDocument()&&(H.setReadTime(y.commitVersion),x.addEntry(H)))}))})),D.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Ue();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function Jb(r){const e=je(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function xC(r,e){const n=je(r),i=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const p=[];e.targetChanges.forEach(((x,w)=>{const A=o.get(w);if(!A)return;p.push(n.Ur.removeMatchingKeys(c,x.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(c,x.addedDocuments,w))));let D=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?D=D.withResumeToken(Wt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):x.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(x.resumeToken,i)),o=o.insert(w,D),(function(H,z,Y){return H.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(A,D,x)&&p.push(n.Ur.updateTargetData(c,D))}));let g=yr(),y=Ue();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),p.push(bC(c,d,e.documentUpdates).next((x=>{g=x.Ps,y=x.Is}))),!i.isEqual(Ce.min())){const x=n.Ur.getLastRemoteSnapshotVersion(c).next((w=>n.Ur.setTargetsMetadata(c,c.currentSequenceNumber,i)));p.push(x)}return oe.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.os=o,c)))}function bC(r,e,n){let i=Ue(),o=Ue();return n.forEach((c=>i=i.add(c))),e.getEntries(r,i).next((c=>{let d=yr();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ce.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):ve("LocalStore","Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Ps:d,Is:o}}))}function wC(r,e){const n=je(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function EC(r,e){const n=je(r);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Ur.getTargetData(i,e).next((c=>c?(o=c,oe.resolve(o)):n.Ur.allocateTargetId(i).next((d=>(o=new fi(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i}))}async function Fm(r,e,n){const i=je(r),o=i.os.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!uc(d))throw d;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function C_(r,e,n){const i=je(r);let o=Ce.min(),c=Ue();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,x){const w=je(g),A=w._s.get(x);return A!==void 0?oe.resolve(w.os.get(A)):w.Ur.getTargetData(y,x)})(i,d,Ss(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>i.ss.getDocumentsMatchingQuery(d,e,n?o:Ce.min(),n?c:Ue()))).next((p=>(TC(i,fR(e),p),{documents:p,Ts:c})))))}function TC(r,e,n){let i=r.us.get(e)||Ce.min();n.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),r.us.set(e,i)}class j_{constructor(){this.activeTargetIds=_R()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SC{constructor(){this.so=new j_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new j_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu=null;function xm(){return Xu===null?Xu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xu++,"0x"+Xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class CC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${o}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${c}`}get Fo(){return!1}Mo(n,i,o,c,d){const p=xm(),g=this.xo(n,i.toUriEncodedString());ve("RestConnection",`Sending RPC '${n}' ${p}:`,g,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,c,d),this.No(n,g,y,o).then((x=>(ve("RestConnection",`Received RPC '${n}' ${p}: `,x),x)),(x=>{throw mo("RestConnection",`RPC '${n}' ${p} failed with error: `,x,"url: ",g,"request:",o),x}))}Lo(n,i,o,c,d,p){return this.Mo(n,i,o,c,d)}Oo(n,i,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+To})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((c,d)=>n[d]=c)),o&&o.headers.forEach(((c,d)=>n[d]=c))}xo(n,i){const o=NC[n];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,o){const c=xm();return new Promise(((d,p)=>{const g=new hb;g.setWithCredentials(!0),g.listenOnce(db.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case rh.NO_ERROR:const x=g.getResponseJson();ve(nn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),d(x);break;case rh.TIMEOUT:ve(nn,`RPC '${e}' ${c} timed out`),p(new ge(ae.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const w=g.getStatus();if(ve(nn,`RPC '${e}' ${c} failed with status:`,w,"response text:",g.getResponseText()),w>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A==null?void 0:A.error;if(D&&D.status&&D.message){const V=(function(z){const Y=z.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Y)>=0?Y:ae.UNKNOWN})(D.status);p(new ge(V,D.message))}else p(new ge(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ge(ae.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ve(nn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(o);ve(nn,`RPC '${e}' ${c} sending request:`,o),g.send(n,"POST",y,i,15)}))}Bo(e,n,i){const o=xm(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=pb(),p=mb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const x=c.join("");ve(nn,`Creating RPC '${e}' stream ${o}: ${x}`,g);const w=d.createWebChannel(x,g);let A=!1,D=!1;const V=new RC({Io:z=>{D?ve(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(A||(ve(nn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),A=!0),ve(nn,`RPC '${e}' stream ${o} sending:`,z),w.send(z))},To:()=>w.close()}),H=(z,Y,te)=>{z.listen(Y,(J=>{try{te(J)}catch(se){setTimeout((()=>{throw se}),0)}}))};return H(w,kl.EventType.OPEN,(()=>{D||(ve(nn,`RPC '${e}' stream ${o} transport opened.`),V.yo())})),H(w,kl.EventType.CLOSE,(()=>{D||(D=!0,ve(nn,`RPC '${e}' stream ${o} transport closed`),V.So())})),H(w,kl.EventType.ERROR,(z=>{D||(D=!0,mo(nn,`RPC '${e}' stream ${o} transport errored:`,z),V.So(new ge(ae.UNAVAILABLE,"The operation could not be completed")))})),H(w,kl.EventType.MESSAGE,(z=>{var Y;if(!D){const te=z.data[0];et(!!te);const J=te,se=J.error||((Y=J[0])===null||Y===void 0?void 0:Y.error);if(se){ve(nn,`RPC '${e}' stream ${o} received error:`,se);const le=se.status;let ue=(function(R){const j=St[R];if(j!==void 0)return Bb(j)})(le),I=se.message;ue===void 0&&(ue=ae.INTERNAL,I="Unknown error status: "+le+" with message "+se.message),D=!0,V.So(new ge(ue,I)),w.close()}else ve(nn,`RPC '${e}' stream ${o} received:`,te),V.bo(te)}})),H(p,fb.STAT_EVENT,(z=>{z.stat===Om.PROXY?ve(nn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Om.NOPROXY&&ve(nn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.wo()}),0),V}}function bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(r){return new UR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n,i=1e3,o=1.5,c=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=o,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n,i,o,c,d,p,g){this.ui=e,this.Ho=i,this.Jo=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(gr(n.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===n&&this.P_(i,o)}),(i=>{e((()=>{const o=new ge(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jC extends ew{constructor(e,n,i,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=c}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=qR(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Ce.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ce.min():d.readTime?Ns(d.readTime):Ce.min()})(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Hm(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=Pm(g)?{documents:GR(c,g)}:{query:$R(c,g)._t},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=Fb(c,d.resumeToken);const y=zm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ce.min())>0){p.readTime=Eh(c,d.snapshotVersion.toTimestamp());const y=zm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=YR(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Hm(this.serializer),n.removeTarget=e,this.a_(n)}}class IC extends ew{constructor(e,n,i,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=FR(e.writeResults,e.commitTime),i=Ns(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Hm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>HR(this.serializer,i)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC extends class{}{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ge(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Mo(e,Bm(n,i),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ae.UNKNOWN,c.toString())}))}Lo(e,n,i,o,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Lo(e,Bm(n,i),o,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ge(ae.UNKNOWN,d.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class MC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gr(n),this.D_=!1):ve("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o((d=>{i.enqueueAndForget((async()=>{da(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const y=je(g);y.L_.add(4),await fc(y),y.q_.set("Unknown"),y.L_.delete(4),await Hh(y)})(this))}))})),this.q_=new MC(i,o)}}async function Hh(r){if(da(r))for(const e of r.B_)await e(!0)}async function fc(r){for(const e of r.B_)await e(!1)}function tw(r,e){const n=je(r);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ip(n)?jp(n):Ro(n).r_()&&Cp(n,e))}function Rp(r,e){const n=je(r),i=Ro(n);n.N_.delete(e),i.r_()&&nw(n,e),n.N_.size===0&&(i.r_()?i.o_():da(n)&&n.q_.set("Unknown"))}function Cp(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ro(r).A_(e)}function nw(r,e){r.Q_.xe(e),Ro(r).R_(e)}function jp(r){r.Q_=new kR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Ro(r).start(),r.q_.v_()}function Ip(r){return da(r)&&!Ro(r).n_()&&r.N_.size>0}function da(r){return je(r).L_.size===0}function sw(r){r.Q_=void 0}async function kC(r){r.q_.set("Online")}async function LC(r){r.N_.forEach(((e,n)=>{Cp(r,e)}))}async function VC(r,e){sw(r),Ip(r)?(r.q_.M_(e),jp(r)):r.q_.set("Unknown")}async function PC(r,e,n){if(r.q_.set("Online"),e instanceof Hb&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const p of c.targetIds)o.N_.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.N_.delete(p),o.Q_.removeTarget(p))})(r,e)}catch(i){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Th(r,i)}else if(e instanceof oh?r.Q_.Ke(e):e instanceof qb?r.Q_.He(e):r.Q_.We(e),!n.isEqual(Ce.min()))try{const i=await Jb(r.localStore);n.compareTo(i)>=0&&await(function(c,d){const p=c.Q_.rt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=c.N_.get(y);x&&c.N_.set(y,x.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const x=c.N_.get(g);if(!x)return;c.N_.set(g,x.withResumeToken(Wt.EMPTY_BYTE_STRING,x.snapshotVersion)),nw(c,g);const w=new fi(x.target,g,y,x.sequenceNumber);Cp(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(i){ve("RemoteStore","Failed to raise snapshot:",i),await Th(r,i)}}async function Th(r,e,n){if(!uc(e))throw e;r.L_.add(1),await fc(r),r.q_.set("Offline"),n||(n=()=>Jb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ve("RemoteStore","Retrying IndexedDB access"),await n(),r.L_.delete(1),await Hh(r)}))}function rw(r,e){return e().catch((n=>Th(r,n,e)))}async function Fh(r){const e=je(r),n=xi(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;UC(e);)try{const o=await wC(e.localStore,i);if(o===null){e.O_.length===0&&n.o_();break}i=o.batchId,zC(e,o)}catch(o){await Th(e,o)}iw(e)&&aw(e)}function UC(r){return da(r)&&r.O_.length<10}function zC(r,e){r.O_.push(e);const n=xi(r);n.r_()&&n.V_&&n.m_(e.mutations)}function iw(r){return da(r)&&!xi(r).n_()&&r.O_.length>0}function aw(r){xi(r).start()}async function BC(r){xi(r).p_()}async function qC(r){const e=xi(r);for(const n of r.O_)e.m_(n.mutations)}async function HC(r,e,n){const i=r.O_.shift(),o=wp.from(i,e,n);await rw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Fh(r)}async function FC(r,e){e&&xi(r).V_&&await(async function(i,o){if((function(d){return DR(d)&&d!==ae.ABORTED})(o.code)){const c=i.O_.shift();xi(i).s_(),await rw(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Fh(i)}})(r,e),iw(r)&&aw(r)}async function D_(r,e){const n=je(r);n.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const i=da(n);n.L_.add(3),await fc(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Hh(n)}async function GC(r,e){const n=je(r);e?(n.L_.delete(2),await Hh(n)):e||(n.L_.add(2),await fc(n),n.q_.set("Unknown"))}function Ro(r){return r.K_||(r.K_=(function(n,i,o){const c=je(n);return c.w_(),new jC(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Eo:kC.bind(null,r),Ro:LC.bind(null,r),mo:VC.bind(null,r),d_:PC.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),Ip(r)?jp(r):r.q_.set("Unknown")):(await r.K_.stop(),sw(r))}))),r.K_}function xi(r){return r.U_||(r.U_=(function(n,i,o){const c=je(n);return c.w_(),new IC(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:BC.bind(null,r),mo:FC.bind(null,r),f_:qC.bind(null,r),g_:HC.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await Fh(r)):(await r.U_.stop(),r.O_.length>0&&(ve("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const d=Date.now()+i,p=new Dp(e,n,d,o,c);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mp(r,e){if(gr("AsyncQueue",`${e}: ${r}`),uc(r))return new ge(ae.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ee.comparator(n.key,i.key):(n,i)=>Ee.comparator(n.key,i.key),this.keyedMap=Ll(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new ho(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ho;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.W_=new ht(Ee.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,i)=>{e.push(i)})),e}}class _o{constructor(e,n,i,o,c,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new _o(e,n,ho.emptySet(n),d,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class KC{constructor(){this.queries=O_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const o=je(n),c=o.queries;o.queries=O_(),c.forEach(((d,p)=>{for(const g of p.j_)g.onError(i)}))})(this,new ge(ae.ABORTED,"Firestore shutting down"))}}function O_(){return new No((r=>Rb(r)),Vh)}async function ow(r,e){const n=je(r);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.H_()&&e.J_()&&(i=2):(c=new $C,i=e.J_()?0:1);try{switch(i){case 0:c.z_=await n.onListen(o,!0);break;case 1:c.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=Mp(d,`Initialization of query '${ro(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.j_.push(e),e.Z_(n.onlineState),c.z_&&e.X_(c.z_)&&Op(n)}async function lw(r,e){const n=je(r),i=e.query;let o=3;const c=n.queries.get(i);if(c){const d=c.j_.indexOf(e);d>=0&&(c.j_.splice(d,1),c.j_.length===0?o=e.J_()?0:1:!c.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function YC(r,e){const n=je(r);let i=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const p of d.j_)p.X_(o)&&(i=!0);d.z_=o}}i&&Op(n)}function QC(r,e,n){const i=je(r),o=i.queries.get(e);if(o)for(const c of o.j_)c.onError(n);i.queries.delete(e)}function Op(r){r.Y_.forEach((e=>{e.next()}))}var Gm,k_;(k_=Gm||(Gm={})).ea="default",k_.Cache="cache";class cw{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new _o(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.key=e}}class hw{constructor(e){this.key=e}}class XC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ue(),this.mutatedKeys=Ue(),this.Aa=Cb(e),this.Ra=new ho(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new M_,o=n?n.Ra:this.Ra;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,w)=>{const A=o.get(x),D=Ph(this.query,w)?w:null,V=!!A&&this.mutatedKeys.has(A.key),H=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let z=!1;A&&D?A.data.isEqual(D.data)?V!==H&&(i.track({type:3,doc:D}),z=!0):this.ga(A,D)||(i.track({type:2,doc:D}),z=!0,(g&&this.Aa(D,g)>0||y&&this.Aa(D,y)<0)&&(p=!0)):!A&&D?(i.track({type:0,doc:D}),z=!0):A&&!D&&(i.track({type:1,doc:A}),z=!0,(g||y)&&(p=!0)),z&&(D?(d=d.add(D),c=H?c.add(x):c.delete(x)):(d=d.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),c=c.delete(x.key),i.track({type:1,doc:x})}return{Ra:d,fa:i,ns:p,mutatedKeys:c}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const d=e.fa.G_();d.sort(((x,w)=>(function(D,V){const H=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return H(D)-H(V)})(x.type,w.type)||this.Aa(x.doc,w.doc))),this.pa(i),o=o!=null&&o;const p=n&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,y=g!==this.Ea;return this.Ea=g,d.length!==0||y?{snapshot:new _o(this.query,e.Ra,c,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:p}:{wa:p}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new M_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ue(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const n=[];return e.forEach((i=>{this.da.has(i)||n.push(new hw(i))})),this.da.forEach((i=>{e.has(i)||n.push(new uw(i))})),n}ba(e){this.Ta=e.Ts,this.da=Ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _o.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class WC{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class JC{constructor(e){this.key=e,this.va=!1}}class ZC{constructor(e,n,i,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ca={},this.Fa=new No((p=>Rb(p)),Vh),this.Ma=new Map,this.xa=new Set,this.Oa=new ht(Ee.comparator),this.Na=new Map,this.La=new Sp,this.Ba={},this.ka=new Map,this.qa=vo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ej(r,e,n=!0){const i=yw(r);let o;const c=i.Fa.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Da()):o=await dw(i,e,n,!0),o}async function tj(r,e){const n=yw(r);await dw(n,e,!0,!1)}async function dw(r,e,n,i){const o=await EC(r.localStore,Ss(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return i&&(p=await nj(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&tw(r.remoteStore,o),p}async function nj(r,e,n,i,o){r.Ka=(w,A,D)=>(async function(H,z,Y,te){let J=z.view.ma(Y);J.ns&&(J=await C_(H.localStore,z.query,!1).then((({documents:I})=>z.view.ma(I,J))));const se=te&&te.targetChanges.get(z.targetId),le=te&&te.targetMismatches.get(z.targetId)!=null,ue=z.view.applyChanges(J,H.isPrimaryClient,se,le);return V_(H,z.targetId,ue.wa),ue.snapshot})(r,w,A,D);const c=await C_(r.localStore,e,!0),d=new XC(e,c.Ts),p=d.ma(c.documents),g=dc.createSynthesizedTargetChangeForCurrentChange(n,i&&r.onlineState!=="Offline",o),y=d.applyChanges(p,r.isPrimaryClient,g);V_(r,n,y.wa);const x=new WC(e,n,d);return r.Fa.set(e,x),r.Ma.has(n)?r.Ma.get(n).push(e):r.Ma.set(n,[e]),y.snapshot}async function sj(r,e,n){const i=je(r),o=i.Fa.get(e),c=i.Ma.get(o.targetId);if(c.length>1)return i.Ma.set(o.targetId,c.filter((d=>!Vh(d,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Fm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Rp(i.remoteStore,o.targetId),$m(i,o.targetId)})).catch(cc)):($m(i,o.targetId),await Fm(i.localStore,o.targetId,!0))}async function rj(r,e){const n=je(r),i=n.Fa.get(e),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Rp(n.remoteStore,i.targetId))}async function ij(r,e,n){const i=dj(r);try{const o=await(function(d,p){const g=je(d),y=Ct.now(),x=p.reduce(((D,V)=>D.add(V.key)),Ue());let w,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let V=yr(),H=Ue();return g.cs.getEntries(D,x).next((z=>{V=z,V.forEach(((Y,te)=>{te.isValidDocument()||(H=H.add(Y))}))})).next((()=>g.localDocuments.getOverlayedDocuments(D,V))).next((z=>{w=z;const Y=[];for(const te of p){const J=NR(te,w.get(te.key).overlayedDocument);J!=null&&Y.push(new ha(te.key,J,xb(J.value.mapValue),As.exists(!0)))}return g.mutationQueue.addMutationBatch(D,y,Y,p)})).next((z=>{A=z;const Y=z.applyToLocalDocumentSet(w,H);return g.documentOverlayCache.saveOverlays(D,z.batchId,Y)}))})).then((()=>({batchId:A.batchId,changes:Ib(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let y=d.Ba[d.currentUser.toKey()];y||(y=new ht(Ye)),y=y.insert(p,g),d.Ba[d.currentUser.toKey()]=y})(i,o.batchId,n),await mc(i,o.changes),await Fh(i.remoteStore)}catch(o){const c=Mp(o,"Failed to persist write");n.reject(c)}}async function fw(r,e){const n=je(r);try{const i=await xC(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Na.get(c);d&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.va=!0:o.modifiedDocuments.size>0?et(d.va):o.removedDocuments.size>0&&(et(d.va),d.va=!1))})),await mc(n,i,e)}catch(i){await cc(i)}}function L_(r,e,n){const i=je(r);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach(((c,d)=>{const p=d.view.Z_(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=je(d);g.onlineState=p;let y=!1;g.queries.forEach(((x,w)=>{for(const A of w.j_)A.Z_(p)&&(y=!0)})),y&&Op(g)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function aj(r,e,n){const i=je(r);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Na.get(e),c=o&&o.key;if(c){let d=new ht(Ee.comparator);d=d.insert(c,rn.newNoDocument(c,Ce.min()));const p=Ue().add(c),g=new Bh(Ce.min(),new Map,new ht(Ye),d,p);await fw(i,g),i.Oa=i.Oa.remove(c),i.Na.delete(e),kp(i)}else await Fm(i.localStore,e,!1).then((()=>$m(i,e,n))).catch(cc)}async function oj(r,e){const n=je(r),i=e.batch.batchId;try{const o=await _C(n.localStore,e);pw(n,i,null),mw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await mc(n,o)}catch(o){await cc(o)}}async function lj(r,e,n){const i=je(r);try{const o=await(function(d,p){const g=je(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,p).next((w=>(et(w!==null),x=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(i.localStore,e);pw(i,e,n),mw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await mc(i,o)}catch(o){await cc(o)}}function mw(r,e){(r.ka.get(e)||[]).forEach((n=>{n.resolve()})),r.ka.delete(e)}function pw(r,e,n){const i=je(r);let o=i.Ba[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function $m(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Ma.get(e))r.Fa.delete(i),n&&r.Ca.$a(i,n);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((i=>{r.La.containsKey(i)||gw(r,i)}))}function gw(r,e){r.xa.delete(e.path.canonicalString());const n=r.Oa.get(e);n!==null&&(Rp(r.remoteStore,n),r.Oa=r.Oa.remove(e),r.Na.delete(n),kp(r))}function V_(r,e,n){for(const i of n)i instanceof uw?(r.La.addReference(i.key,e),cj(r,i)):i instanceof hw?(ve("SyncEngine","Document no longer in limbo: "+i.key),r.La.removeReference(i.key,e),r.La.containsKey(i.key)||gw(r,i.key)):Ne()}function cj(r,e){const n=e.key,i=n.path.canonicalString();r.Oa.get(n)||r.xa.has(i)||(ve("SyncEngine","New document in limbo: "+n),r.xa.add(i),kp(r))}function kp(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const n=new Ee(lt.fromString(e)),i=r.qa.next();r.Na.set(i,new JC(n)),r.Oa=r.Oa.insert(n,i),tw(r.remoteStore,new fi(Ss(xp(n.path)),i,"TargetPurposeLimboResolution",mp.oe))}}async function mc(r,e,n){const i=je(r),o=[],c=[],d=[];i.Fa.isEmpty()||(i.Fa.forEach(((p,g)=>{d.push(i.Ka(g,e,n).then((y=>{var x;if((y||n)&&i.isPrimaryClient){const w=y?!y.fromCache:(x=n==null?void 0:n.targetChanges.get(g.targetId))===null||x===void 0?void 0:x.current;i.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Np.Wi(g.targetId,y);c.push(w)}})))})),await Promise.all(d),i.Ca.d_(o),await(async function(g,y){const x=je(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>oe.forEach(y,(A=>oe.forEach(A.$i,(D=>x.persistence.referenceDelegate.addReference(w,A.targetId,D))).next((()=>oe.forEach(A.Ui,(D=>x.persistence.referenceDelegate.removeReference(w,A.targetId,D)))))))))}catch(w){if(!uc(w))throw w;ve("LocalStore","Failed to update sequence numbers: "+w)}for(const w of y){const A=w.targetId;if(!w.fromCache){const D=x.os.get(A),V=D.snapshotVersion,H=D.withLastLimboFreeSnapshotVersion(V);x.os=x.os.insert(A,H)}}})(i.localStore,c))}async function uj(r,e){const n=je(r);if(!n.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const i=await Wb(n.localStore,e);n.currentUser=e,(function(c,d){c.ka.forEach((p=>{p.forEach((g=>{g.reject(new ge(ae.CANCELLED,d))}))})),c.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mc(n,i.hs)}}function hj(r,e){const n=je(r),i=n.Na.get(e);if(i&&i.va)return Ue().add(i.key);{let o=Ue();const c=n.Ma.get(e);if(!c)return o;for(const d of c){const p=n.Fa.get(d);o=o.unionWith(p.view.Va)}return o}}function yw(r){const e=je(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=fw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aj.bind(null,e),e.Ca.d_=YC.bind(null,e.eventManager),e.Ca.$a=QC.bind(null,e.eventManager),e}function dj(r){const e=je(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lj.bind(null,e),e}class Sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return vC(this.persistence,new gC,e.initialUser,this.serializer)}Ga(e){return new fC(Ap.Zr,this.serializer)}Wa(e){return new SC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sh.provider={build:()=>new Sh};class Km{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>L_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uj.bind(null,this.syncEngine),await GC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KC})()}createDatastore(e){const n=qh(e.databaseInfo.databaseId),i=(function(c){return new CC(c)})(e.databaseInfo);return(function(c,d,p,g){return new DC(c,d,p,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,c,d,p){return new OC(i,o,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>L_(this.syncEngine,n,0)),(function(){return I_.D()?new I_:new AC})())}createSyncEngine(e,n){return(function(o,c,d,p,g,y,x){const w=new ZC(o,c,d,p,g,y);return x&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=je(o);ve("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await fc(c),c.k_.shutdown(),c.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Km.provider={build:()=>new Km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=yb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{ve("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ve("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Mp(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function wm(r,e){r.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let i=n.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Wb(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function P_(r,e){r.asyncQueue.verifyOperationInProgress();const n=await mj(r);ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((i=>D_(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>D_(e.remoteStore,o))),r._onlineComponents=e}async function mj(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await wm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;mo("Error using user provided cache. Falling back to memory cache: "+n),await wm(r,new Sh)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await wm(r,new Sh);return r._offlineComponents}async function _w(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await P_(r,r._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await P_(r,new Km))),r._onlineComponents}function pj(r){return _w(r).then((e=>e.syncEngine))}async function xw(r){const e=await _w(r),n=e.eventManager;return n.onListen=ej.bind(null,e.syncEngine),n.onUnlisten=sj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rj.bind(null,e.syncEngine),n}function gj(r,e,n={}){const i=new hr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const x=new vw({next:A=>{x.Za(),d.enqueueAndForget((()=>lw(c,w)));const D=A.docs.has(p);!D&&A.fromCache?y.reject(new ge(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&A.fromCache&&g&&g.source==="server"?y.reject(new ge(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new cw(xp(p.path),x,{includeMetadataChanges:!0,_a:!0});return ow(c,w)})(await xw(r),r.asyncQueue,e,n,i))),i.promise}function yj(r,e,n={}){const i=new hr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const x=new vw({next:A=>{x.Za(),d.enqueueAndForget((()=>lw(c,w))),A.fromCache&&g.source==="server"?y.reject(new ge(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new cw(p,x,{includeMetadataChanges:!0,_a:!0});return ow(c,w)})(await xw(r),r.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(r,e,n){if(!n)throw new ge(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function vj(r,e,n,i){if(e===!0&&i===!0)throw new ge(ae.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function z_(r){if(!Ee.isDocumentKey(r))throw new ge(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function B_(r){if(Ee.isDocumentKey(r))throw new ge(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Gh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ne()}function bi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ge(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gh(r);throw new ge(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function _j(r,e){if(e<=0)throw new ge(ae.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ge(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ge(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ge(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $h{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q_(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new k2;switch(i.type){case"firstParty":return new U2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=U_.get(n);i&&(ve("ComponentProvider","Removing Datastore"),U_.delete(n),i.terminate())})(this),Promise.resolve()}}function xj(r,e,n,i={}){var o;const c=(r=bi(r,$h))._getSettings(),d=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),i.mockUserToken){let p,g;if(typeof i.mockUserToken=="string")p=i.mockUserToken,g=sn.MOCK_USER;else{p=Sx(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ge(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new sn(y)}r._authCredentials=new L2(new gb(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ei(this.firestore,e,this._query)}}class Sn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class gi extends Ei{constructor(e,n,i){super(e,n,xp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Ee(e))}withConverter(e){return new gi(this.firestore,e,this._path)}}function gn(r,e,...n){if(r=pn(r),ww("collection","path",e),r instanceof $h){const i=lt.fromString(e,...n);return B_(i),new gi(r,null,i)}{if(!(r instanceof Sn||r instanceof gi))throw new ge(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(lt.fromString(e,...n));return B_(i),new gi(r.firestore,null,i)}}function Kh(r,e,...n){if(r=pn(r),arguments.length===1&&(e=yb.newId()),ww("doc","path",e),r instanceof $h){const i=lt.fromString(e,...n);return z_(i),new Sn(r,null,new Ee(i))}{if(!(r instanceof Sn||r instanceof gi))throw new ge(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(lt.fromString(e,...n));return z_(i),new Sn(r.firestore,r instanceof gi?r.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Zb(this,"async_queue_retry"),this.Vu=()=>{const i=bm();i&&ve("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=bm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new hr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!uc(e))throw e;ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(d){let p=d.message||"";return d.stack&&(p=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),p})(i);throw gr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=Dp.createAndSchedule(this,e,n,i,(c=>this.yu(c)));return this.Tu.push(o),o}fu(){this.Eu&&Ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class pc extends $h{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new H_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new H_(e),this._firestoreClient=void 0,await e}}}function bj(r,e){const n=typeof r=="object"?r:np(),i=typeof r=="string"?r:"(default)",o=Mh(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=wx("firestore");c&&xj(o,...c)}return o}function Lp(r){if(r._terminated)throw new ge(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||wj(r),r._firestoreClient}function wj(r){var e,n,i;const o=r._freezeSettings(),c=(function(p,g,y,x){return new J2(p,g,y,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,bw(x.experimentalLongPollingOptions),x.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new fj(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xo(Wt.fromBase64String(e))}catch(n){throw new ge(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xo(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=/^__.*__$/;class Tj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ha(e,this.data,this.fieldMask,n,this.fieldTransforms):new hc(e,this.data,n,this.fieldTransforms)}}function Ew(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class Bp{constructor(e,n,i,o,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ah(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ew(this.Cu)&&Ej.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Sj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||qh(e)}Qu(e,n,i,o=!1){return new Bp({Cu:e,methodName:n,qu:i,path:Qt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qp(r){const e=r._freezeSettings(),n=qh(r._databaseId);return new Sj(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Tw(r,e,n,i,o,c={}){const d=r.Qu(c.merge||c.mergeFields?2:0,e,n,o);Nw("Data must be an object, but it was:",d,i);const p=Sw(i,d);let g,y;if(c.merge)g=new rs(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const x=[];for(const w of c.mergeFields){const A=Nj(e,w,n);if(!d.contains(A))throw new ge(ae.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Cj(x,A)||x.push(A)}g=new rs(x),y=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=d.fieldTransforms;return new Tj(new Xn(p),g,y)}class Hp extends Pp{_toFieldTransform(e){return new ER(e.path,new Jl)}isEqual(e){return e instanceof Hp}}function Aj(r,e,n,i=!1){return Fp(n,r.Qu(i?4:3,e))}function Fp(r,e){if(Aw(r=pn(r)))return Nw("Unsupported field value:",e,r),Sw(r,e);if(r instanceof Pp)return(function(i,o){if(!Ew(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const c=[];let d=0;for(const p of i){let g=Fp(p,o.Lu(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(i,o){if((i=pn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xR(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ct.fromDate(i);return{timestampValue:Eh(o.serializer,c)}}if(i instanceof Ct){const c=new Ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Eh(o.serializer,c)}}if(i instanceof Up)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xo)return{bytesValue:Fb(o.serializer,i._byteString)};if(i instanceof Sn){const c=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw o.Bu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Tp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof zp)return(function(d,p){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw p.Bu("VectorValues must only contain numeric values.");return bp(p.serializer,g)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${Gh(i)}`)})(r,e)}function Sw(r,e){const n={};return vb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(r,((i,o)=>{const c=Fp(o,e.Mu(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function Aw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ct||r instanceof Up||r instanceof xo||r instanceof Sn||r instanceof Pp||r instanceof zp)}function Nw(r,e,n){if(!Aw(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const i=Gh(n);throw i==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+i)}}function Nj(r,e,n){if((e=pn(e))instanceof Vp)return e._internalPath;if(typeof e=="string")return Rw(r,e);throw Ah("Field path arguments must be of type string or ",r,!1,void 0,n)}const Rj=new RegExp("[~\\*/\\[\\]]");function Rw(r,e,n){if(e.search(Rj)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Vp(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Ah(r,e,n,i,o){const c=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new ge(ae.INVALID_ARGUMENT,p+r+g)}function Cj(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jj extends Cw{data(){return super.data()}}function Yh(r,e){return typeof e=="string"?Rw(r,e):e instanceof Vp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ge(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gp{}class $p extends Gp{}function ls(r,e,...n){let i=[];e instanceof Gp&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((g=>g instanceof Kp)).length,p=c.filter((g=>g instanceof Qh)).length;if(d>1||d>0&&p>0)throw new ge(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Qh extends $p{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Qh(e,n,i)}_apply(e){const n=this._parse(e);return Iw(e._query,n),new Ei(e.firestore,e.converter,Um(e._query,n))}_parse(e){const n=qp(e.firestore);return(function(c,d,p,g,y,x,w){let A;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ge(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){G_(w,x);const D=[];for(const V of w)D.push(F_(g,c,V));A={arrayValue:{values:D}}}else A=F_(g,c,w)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||G_(w,x),A=Aj(p,d,w,x==="in"||x==="not-in");return At.create(y,x,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xh(r,e,n){const i=e,o=Yh("where",r);return Qh._create(o,i,n)}class Kp extends Gp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kp(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:os.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const p=c.getFlattenedFilters();for(const g of p)Iw(d,g),d=Um(d,g)})(e._query,n),new Ei(e.firestore,e.converter,Um(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yp extends $p{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yp(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new ge(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(c,d)})(e._query,this._field,this._direction);return new Ei(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new Ao(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Ms(r,e="asc"){const n=e,i=Yh("orderBy",r);return Yp._create(i,n)}class Qp extends $p{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Qp(e,n,i)}_apply(e){return new Ei(e.firestore,e.converter,bh(e._query,this._limit,this._limitType))}}function jw(r){return _j("limit",r),Qp._create("limit",r,"F")}function F_(r,e,n){if(typeof(n=pn(n))=="string"){if(n==="")throw new ge(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nb(e)&&n.indexOf("/")!==-1)throw new ge(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(lt.fromString(n));if(!Ee.isDocumentKey(i))throw new ge(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return d_(r,new Ee(i))}if(n instanceof Sn)return d_(r,n._key);throw new ge(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gh(n)}.`)}function G_(r,e){if(!Array.isArray(r)||r.length===0)throw new ge(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Iw(r,e){const n=(function(o,c){for(const d of o)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Dj{convertValue(e,n="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return So(e,((o,c)=>{i[o]=this.convertValue(c,n)})),i}convertVectorValue(e){var n,i,o;const c=(o=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>_t(d.doubleValue)));return new zp(c)}convertGeoPoint(e){return new Up(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=gp(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const n=_i(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=lt.fromString(e);et(Xb(i));const o=new Ql(i.get(1),i.get(3)),c=new Ee(i.popFirst(5));return o.isEqual(n)||gr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(r,e,n){let i;return i=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mw extends Cw{constructor(e,n,i,o,c,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Yh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class lh extends Mw{data(e={}){return super.data(e)}}class Mj{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Pl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new lh(this._firestore,this._userDataWriter,i.key,i,new Pl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new lh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Pl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new lh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Pl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),x=d.indexOf(p.doc.key)),{type:Oj(p.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Oj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(r){r=bi(r,Sn);const e=bi(r.firestore,pc);return gj(Lp(e),r._key).then((n=>Lj(e,r,n)))}class kw extends Dj{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}}function kn(r){r=bi(r,Ei);const e=bi(r.firestore,pc),n=Lp(e),i=new kw(e);return Ij(r._query),yj(n,r._query).then((o=>new Mj(e,i,r,o)))}function kj(r,e,n){r=bi(r,Sn);const i=bi(r.firestore,pc),o=Dw(r.converter,e,n);return Vw(i,[Tw(qp(i),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,As.none())])}function Lw(r,e){const n=bi(r.firestore,pc),i=Kh(r),o=Dw(r.converter,e);return Vw(n,[Tw(qp(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,As.exists(!1))]).then((()=>i))}function Vw(r,e){return(function(i,o){const c=new hr;return i.asyncQueue.enqueueAndForget((async()=>ij(await pj(i),o,c))),c.promise})(Lp(r),e)}function Lj(r,e,n){const i=n.docs.get(e._key),o=new kw(r);return new Mw(r,o,e._key,i,new Pl(n.hasPendingWrites,n.fromCache),e.converter)}function Pw(){return new Hp("serverTimestamp")}(function(e,n=!0){(function(o){To=o})(ua),ra(new yi("firestore",((i,{instanceIdentifier:o,options:c})=>{const d=i.getProvider("app").getImmediate(),p=new pc(new V2(i.getProvider("auth-internal")),new B2(i.getProvider("app-check-internal")),(function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(y.options.projectId,x)})(d,o),d);return c=Object.assign({useFetchStreams:n},c),p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),ws(o_,"4.7.3",e),ws(o_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="firebasestorage.googleapis.com",Vj="storageBucket",Pj=120*1e3,Uj=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Ds{constructor(e,n,i=0){super(Em(e),`Firebase Storage: ${n} (${Em(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Os.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Em(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Cs;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Cs||(Cs={}));function Em(r){return"storage/"+r}function zj(){const r="An unknown error occurred, please check the error payload for server response.";return new Os(Cs.UNKNOWN,r)}function Bj(){return new Os(Cs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qj(){return new Os(Cs.CANCELED,"User canceled the upload/download.")}function Hj(r){return new Os(Cs.INVALID_URL,"Invalid URL '"+r+"'.")}function Fj(r){return new Os(Cs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function $_(r){return new Os(Cs.INVALID_ARGUMENT,r)}function zw(){return new Os(Cs.APP_DELETED,"The Firebase app was deleted.")}function Gj(r){return new Os(Cs.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=is.makeFromUrl(e,n)}catch{return new is(e,"")}if(i.path==="")return i;throw Fj(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function c(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(se){se.path_=decodeURIComponent(se.path)}const x="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",D=new RegExp(`^https?://${w}/${x}/b/${o}/o${A}`,"i"),V={bucket:1,path:3},H=n===Uw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,z="([^?#]*)",Y=new RegExp(`^https?://${H}/${o}/${z}`,"i"),J=[{regex:p,indices:g,postModify:c},{regex:D,indices:V,postModify:y},{regex:Y,indices:{bucket:1,path:2},postModify:y}];for(let se=0;se<J.length;se++){const le=J[se],ue=le.regex.exec(e);if(ue){const I=ue[le.indices.bucket];let N=ue[le.indices.path];N||(N=""),i=new is(I,N),le.postModify(i);break}}if(i==null)throw Hj(e);return i}}class $j{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(r,e,n){let i=1,o=null,c=null,d=!1,p=0;function g(){return p===2}let y=!1;function x(...z){y||(y=!0,e.apply(null,z))}function w(z){o=setTimeout(()=>{o=null,r(D,g())},z)}function A(){c&&clearTimeout(c)}function D(z,...Y){if(y){A();return}if(z){A(),x.call(null,z,...Y);return}if(g()||d){A(),x.call(null,z,...Y);return}i<64&&(i*=2);let J;p===1?(p=2,J=0):J=(i+Math.random())*1e3,w(J)}let V=!1;function H(z){V||(V=!0,A(),!y&&(o!==null?(z||(p=2),clearTimeout(o),w(0)):z||(p=1)))}return w(0),c=setTimeout(()=>{d=!0,H(!0)},n),H}function Yj(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(r){return r!==void 0}function K_(r,e,n,i){if(i<e)throw $_(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>n)throw $_(`Invalid value for '${r}'. Expected ${n} or less.`)}function Xj(r){const e=encodeURIComponent;let n="?";for(const i in r)if(r.hasOwnProperty(i)){const o=e(i)+"="+e(r[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var Nh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Nh||(Nh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,n,i,o,c,d,p,g,y,x,w,A=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=w,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,V)=>{this.resolve_=D,this.reject_=V,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Wu(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const p=c.getErrorCode()===Nh.NO_ERROR,g=c.getStatus();if(!p||Wj(g,this.additionalRetryCodes_)&&this.retry){const x=c.getErrorCode()===Nh.ABORT;i(!1,new Wu(!1,null,x));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new Wu(y,c))})},n=(i,o)=>{const c=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());Qj(g)?c(g):c()}catch(g){d(g)}else if(p!==null){const g=zj();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?zw():qj();d(g)}else{const g=Bj();d(g)}};this.canceled_?n(!1,new Wu(!1,null,!0)):this.backoffId_=Kj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Yj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wu{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function Zj(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function eI(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tI(r,e){e&&(r["X-Firebase-GMPID"]=e)}function nI(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function sI(r,e,n,i,o,c,d=!0){const p=Xj(r.urlParams),g=r.url+p,y=Object.assign({},r.headers);return tI(y,e),Zj(y,n),eI(y,c),nI(y,i),new Jj(g,r.method,y,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function iI(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this._service=e,n instanceof is?this._location=n:this._location=is.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Rh(e,n)}get root(){const e=new is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iI(this._location.path)}get storage(){return this._service}get parent(){const e=rI(this._location.path);if(e===null)return null;const n=new is(this._location.bucket,e);return new Rh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Gj(e)}}function Y_(r,e){const n=e==null?void 0:e[Vj];return n==null?null:is.makeFromBucketSpec(n,r)}function aI(r,e,n,i={}){r.host=`${e}:${n}`,r._protocol="http";const{mockUserToken:o}=i;o&&(r._overrideAuthToken=typeof o=="string"?o:Sx(o,r.app.options.projectId))}class oI{constructor(e,n,i,o,c){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=c,this._bucket=null,this._host=Uw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Pj,this._maxUploadRetryTime=Uj,this._requests=new Set,o!=null?this._bucket=is.makeFromBucketSpec(o,this._host):this._bucket=Y_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=is.makeFromBucketSpec(this._url,e):this._bucket=Y_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){K_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){K_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rh(this,e)}_makeRequest(e,n,i,o,c=!0){if(this._deleted)return new $j(zw());{const d=sI(e,this._appId,i,o,n,this._firebaseVersion,c);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const Q_="@firebase/storage",X_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="storage";function lI(r=np(),e){r=pn(r);const i=Mh(r,Bw).getImmediate({identifier:e}),o=wx("storage");return o&&cI(i,...o),i}function cI(r,e,n,i={}){aI(r,e,n,i)}function uI(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new oI(n,i,o,e,ua)}function hI(){ra(new yi(Bw,uI,"PUBLIC").setMultipleInstances(!0)),ws(Q_,X_,""),ws(Q_,X_,"esm2017")}hI();let oi;try{window.FIREBASE_CONFIG?(oi=window.FIREBASE_CONFIG,console.log("Using window.FIREBASE_CONFIG")):window.parent&&window.parent!==window?(oi=window.parent.FIREBASE_CONFIG||window.parent.firebaseConfig,console.log("Using parent window config")):window.firebaseConfig&&(oi=window.firebaseConfig,console.log("Using window.firebaseConfig")),oi||(console.warn("No Firebase config found, using demo config"),oi={apiKey:"demo-api-key",authDomain:"demo-project.firebaseapp.com",projectId:"demo-project",storageBucket:"demo-project.appspot.com",messagingSenderId:"123456789",appId:"demo-app-id"})}catch(r){console.error("Error loading Firebase config:",r),oi={apiKey:"demo-api-key",authDomain:"demo-project.firebaseapp.com",projectId:"demo-project",storageBucket:"demo-project.appspot.com",messagingSenderId:"123456789",appId:"demo-app-id"}}const Xp=Rx(oi),bo=M2(Xp),Vt=bj(Xp);lI(Xp);console.log(" Firebase initialized with project:",oi.projectId);const Wp=()=>new Promise(r=>{const e=Zx(bo,n=>{e(),r(n)})}),qw=async()=>{const r=await Wp();if(!r)throw new Error("Authentication required");return r},Pt={USERS:"soundwave_users",TRACKS:"soundwave_tracks",POSTS:"soundwave_posts",COMMENTS:"soundwave_comments",LABELS:"soundwave_labels",PLAYLISTS:"soundwave_playlists",MASTERCLASSES:"soundwave_masterclasses",TUTORIALS:"soundwave_tutorials",SAMPLE_PACKS:"soundwave_sample_packs",GLOBAL_EVENTS:"soundwave_global_events"},Jt=(r,e)=>{if(console.error(`Firestore ${e} error:`,r),r instanceof ge)switch(r.code){case"permission-denied":throw new Error("You do not have permission to perform this action");case"not-found":throw new Error("The requested item was not found");case"unavailable":throw new Error("Service temporarily unavailable. Please try again.");default:throw new Error(`${e} failed: ${r.message}`)}throw new Error(`${e} failed`)},Hw=async()=>{try{return(await kn(gn(Vt,Pt.USERS))).docs.map(e=>({id:e.id,...e.data()}))}catch(r){return Jt(r,"Get users"),[]}},Wh=async r=>{try{const e=await Ow(Kh(Vt,Pt.USERS,r));return e.exists()?(console.log(" User retrieved from Firestore:",r),{id:e.id,...e.data()}):void 0}catch(e){console.error("Firestore Get user error:",e);const n=localStorage.getItem(`soundwave_user_${r}`);return n?(console.log(" Fallback: Retrieved user from localStorage:",r),JSON.parse(n)):void 0}},Fw=async r=>{var e;try{console.log(" Creating/updating user:",r);const n=r.id||((e=await Wp())==null?void 0:e.uid);if(!n)throw new Error("No user ID available");const i={...r,id:n,updatedAt:new Date().toISOString()};return await kj(Kh(Vt,Pt.USERS,n),i,{merge:!0}),console.log(" User saved to Firestore"),localStorage.setItem(`soundwave_user_${n}`,JSON.stringify(i)),i}catch(n){console.error(" Error creating/updating user:",n);const i=r.id||"unknown",o={...r,id:i,updatedAt:new Date().toISOString()};return localStorage.setItem(`soundwave_user_${i}`,JSON.stringify(o)),console.log(" Fallback: User saved to localStorage"),o}},Jh=async()=>{try{const r=ls(gn(Vt,Pt.TRACKS),Ms("createdAt","desc"));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return Jt(r,"Get tracks"),[]}},dI=async r=>{try{const e=ls(gn(Vt,Pt.TRACKS),Xh("artistId","==",r),Ms("createdAt","desc"));return(await kn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return Jt(e,"Get tracks by artist"),[]}},Gw=async()=>{try{const r=ls(gn(Vt,Pt.POSTS),Ms("createdAt","desc"),jw(50));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return Jt(r,"Get posts"),[]}},fI=async r=>{try{const e=await qw(),n={...r,authorId:e.uid,createdAt:Pw(),likes:0,replyCount:0,replies:[]};return{id:(await Lw(gn(Vt,Pt.POSTS),n)).id,...r,authorId:e.uid,createdAt:new Date().toISOString(),likes:0,replyCount:0,replies:[]}}catch(e){throw Jt(e,"Create post"),e}},$w=fI,Ti=async(r,e,n)=>{try{const i=await qw(),o=await Wh(i.uid);if(!o)throw new Error("User profile not found");const c={authorId:i.uid,authorName:o.name,authorAvatarUrl:o.avatarUrl||"",content:n,createdAt:new Date().toISOString()};return{id:(await Lw(gn(Vt,Pt.COMMENTS),{...c,parentType:r,parentId:e,createdAt:Pw()})).id,...c}}catch(i){throw Jt(i,"Add comment"),i}},mI=async()=>{try{return(await kn(gn(Vt,Pt.LABELS))).docs.map(e=>({id:e.id,...e.data()}))}catch(r){return Jt(r,"Get labels"),[]}},pI=async r=>{try{const e=await Ow(Kh(Vt,Pt.LABELS,r));return e.exists()?{id:e.id,...e.data()}:void 0}catch(e){Jt(e,"Get label");return}},gI=async r=>{try{const e=ls(gn(Vt,Pt.TRACKS),Xh("labelId","==",r),Ms("createdAt","desc"));return(await kn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return Jt(e,"Get tracks by label"),[]}},yI=async r=>{try{const e=ls(gn(Vt,Pt.USERS),Xh("labelId","==",r));return(await kn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return Jt(e,"Get artists by label"),[]}},vI=async r=>{try{const e=ls(gn(Vt,Pt.POSTS),Xh("labelId","==",r),Ms("createdAt","desc"));return(await kn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return Jt(e,"Get posts by label"),[]}},_I=async r=>{try{return[]}catch(e){return Jt(e,"Get events by label"),[]}},gc=async(r,e)=>Ti("track",r,e.content),xI=async(r,e)=>Ti("label",r,e.content),bI=async(r,e)=>Ti("post",r,e.content),wI=async(r,e)=>Ti("masterclass",r,e.content),EI=async(r,e)=>Ti("post",r,e.content),TI=async(r,e)=>Ti("post",r,e.content),SI=async(r,e)=>Ti("post",r,e.content),AI=async(r,e)=>Ti("post",r,e.content),NI=async()=>(console.log("getLiveRooms: Not yet implemented"),[]),RI=async r=>(console.log("getConversations: Not yet implemented for user",r),[]),Kw=async()=>(console.log("getSampleChatMessages: Not yet implemented"),[]),CI=async r=>(console.log("getExternalReleasesByArtist: Not yet implemented"),[]),jI=async r=>(console.log("getPremiumPacksByArtist: Not yet implemented"),[]),II=async()=>{try{const r=ls(gn(Vt,Pt.GLOBAL_EVENTS),Ms("createdAt","desc"),jw(20));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return Jt(r,"Get global events"),[]}},DI=async()=>{try{const r=ls(gn(Vt,Pt.MASTERCLASSES),Ms("createdAt","desc"));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return Jt(r,"Get masterclasses"),[]}},MI=async()=>{try{const r=ls(gn(Vt,Pt.TUTORIALS),Ms("createdAt","desc"));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return Jt(r,"Get tutorials"),[]}},OI=async()=>{try{const r=ls(gn(Vt,Pt.SAMPLE_PACKS),Ms("createdAt","desc"));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return Jt(r,"Get sample packs"),[]}},kI=async()=>{try{const r=ls(gn(Vt,Pt.PLAYLISTS),Ms("createdAt","desc"));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return Jt(r,"Get playlists"),[]}},LI=({currentUser:r})=>{var d;jh();const[e,n]=T.useState(!1),i=T.useRef(null);T.useEffect(()=>{const p=g=>{i.current&&!i.current.contains(g.target)&&n(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const o=async()=>{try{await wN(bo),window.location.href="/Sites/soundwave/index.html"}catch(p){console.error("Error signing out:",p)}},c={color:"white",backgroundColor:"#282828"};return u.jsx("header",{className:"bg-gray-800 sticky top-0 z-40 shadow-md",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsxs("div",{className:"flex items-center space-x-8",children:[u.jsxs(Lt,{to:"/",className:"flex items-center space-x-2 text-white",children:[u.jsx(me,{name:"logo",className:"h-8 w-8 text-brand-accent"}),u.jsx("span",{className:"font-bold text-xl",children:"SoundWave"})]}),u.jsxs("nav",{className:"hidden md:flex space-x-2",children:[u.jsx(Yn,{to:"/",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Home"}),u.jsx(Yn,{to:"/library",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Library"}),u.jsx(Yn,{to:"/playlists",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Playlists"}),u.jsx(Yn,{to:"/labels",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Labels"}),u.jsx(Yn,{to:"/artist-hub",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Artist Hub"}),u.jsx(Yn,{to:"/live-streams",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Live"}),u.jsx(Yn,{to:"/community",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Community"}),u.jsx(Yn,{to:"/tutorials",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Tutorials"}),u.jsx(Yn,{to:"/masterclass",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Masterclass"}),u.jsx(Yn,{to:"/samples",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Samples"}),u.jsx(Yn,{to:"/upload",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:p})=>p?c:{},children:"Upload"})]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Search for tracks or artists...",className:"bg-gray-700 text-white placeholder-gray-400 border border-transparent focus:ring-2 focus:ring-brand-accent focus:border-transparent rounded-full py-2 px-4 w-64 transition-all"}),u.jsx(me,{name:"search",className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]}),u.jsxs(Lt,{to:"/inbox",className:"relative text-gray-400 hover:text-white transition-colors",children:[u.jsx(me,{name:"mail",className:"h-6 w-6"}),u.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:"3"})]}),u.jsxs("div",{className:"relative",ref:i,children:[u.jsxs("button",{onClick:()=>n(!e),className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[u.jsx("img",{className:"h-8 w-8 rounded-full object-cover border-2 border-transparent hover:border-brand-accent transition-colors",src:(r==null?void 0:r.avatarUrl)||"https://picsum.photos/id/1015/100/100",alt:`${(r==null?void 0:r.name)||"User"} Avatar`}),u.jsx("span",{className:"text-white font-medium hidden sm:block",children:(r==null?void 0:r.name)||"Guest"}),u.jsx(me,{name:"chevron-down",className:`w-4 h-4 text-gray-400 transition-transform hidden sm:block ${e?"rotate-180":""}`})]}),e&&u.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-gray-800 rounded-lg shadow-xl border border-gray-700 py-2 z-50 animate-fadeIn",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-gray-700",children:[u.jsx("p",{className:"text-sm font-medium text-white",children:(r==null?void 0:r.name)||"Guest"}),u.jsx("p",{className:"text-xs text-gray-400 truncate",children:((d=bo.currentUser)==null?void 0:d.email)||""})]}),r&&u.jsxs(u.Fragment,{children:[u.jsxs(Lt,{to:`/profile/${r.id}`,onClick:()=>n(!1),className:"flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",children:[u.jsx(me,{name:"user",className:"w-4 h-4 mr-3"}),"View Profile"]}),u.jsxs(Lt,{to:"/settings/profile",onClick:()=>n(!1),className:"flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",children:[u.jsx(me,{name:"settings",className:"w-4 h-4 mr-3"}),"Edit Profile"]}),u.jsx("div",{className:"border-t border-gray-700 my-2"})]}),u.jsxs("button",{onClick:o,className:"flex items-center w-full px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300 transition-colors",children:[u.jsx(me,{name:"logout",className:"w-4 h-4 mr-3"}),"Sign Out"]})]})]})]})]})})})},VI=()=>u.jsx("footer",{className:"bg-gray-800 border-t border-gray-700 mt-auto",children:u.jsx("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:u.jsxs("p",{className:"text-center text-sm text-gray-400",children:[" ",new Date().getFullYear()," SoundWave. All rights reserved. A crowd-sourced artist platform."]})})}),PI=()=>{const[r,e]=T.useState(null),[n,i]=T.useState(!1),[o,c]=T.useState(null),[d,p]=T.useState(!1),g=T.useCallback(w=>{(r==null?void 0:r.id)===w.id?i(A=>!A):(e(w),i(!0)),p(!1)},[r]),y=T.useCallback(w=>{(r==null?void 0:r.id)===w.id&&d?i(A=>!A):(e(w),i(!0),p(!0))},[r,d]),x=T.useCallback(()=>{r&&i(w=>(w&&p(!1),!w))},[r]);return{currentTrack:r,isPlaying:n,playTrack:g,togglePlayPause:x,onTrackEnd:o,setOnTrackEnd:c,isPreviewing:d,playPreview:y}},Co=T.createContext(null),UI=({children:r})=>{const e=PI();return u.jsx(Co.Provider,{value:e,children:r})},zI=()=>{const r=T.useContext(Co),e=T.useRef(null),[n,i]=T.useState(0),o=T.useRef(null);if(!r)return null;const{currentTrack:c,isPlaying:d,togglePlayPause:p,onTrackEnd:g,isPreviewing:y}=r;T.useEffect(()=>{const w=e.current;if(w)if(d){const A=w.play();A!==void 0&&A.catch(D=>{D.name!=="AbortError"&&console.error("Audio play failed:",D)})}else w.pause()},[d,c]),T.useEffect(()=>(o.current&&(clearTimeout(o.current),o.current=null),d&&y&&(o.current=window.setTimeout(()=>{d&&y&&p()},3e4)),()=>{o.current&&clearTimeout(o.current)}),[c,d,y,p]),T.useEffect(()=>{const w=e.current;if(!w)return;i(0);const A=()=>{w.duration&&isFinite(w.duration)&&i(w.currentTime/w.duration*100)},D=()=>{g?g():p()};return w.addEventListener("timeupdate",A),w.addEventListener("ended",D),()=>{w.removeEventListener("timeupdate",A),w.removeEventListener("ended",D)}},[c,p,g]);const x=w=>{const A=e.current;if(!A||!isFinite(A.duration))return;const D=Number(w.target.value),V=D/100*A.duration;isFinite(V)&&(A.currentTime=V,i(D))};return c?u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 h-24 z-50 flex items-center px-4 sm:px-6 lg:px-8",children:[u.jsx("audio",{ref:e,src:c.audioSrc}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:c.coverArtUrl,alt:c.title,className:"w-16 h-16 rounded-md object-cover"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h4",{className:"font-semibold text-white",children:c.title}),y&&u.jsx("span",{className:"text-xs font-bold bg-yellow-500 text-gray-900 px-2 py-0.5 rounded-full",children:"PREVIEW"})]}),u.jsx("p",{className:"text-sm text-gray-400",children:c.artistName})]})]}),u.jsxs("div",{className:"flex-grow flex items-center justify-center space-x-4 mx-8",children:[u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-white",children:u.jsx(me,{name:"previous",className:"w-6 h-6"})}),u.jsx("button",{onClick:p,className:"bg-white rounded-full p-2 text-gray-900 hover:scale-105 transition-transform",children:u.jsx(me,{name:d?"pause":"play",className:"w-8 h-8"})}),u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-white",children:u.jsx(me,{name:"next",className:"w-6 h-6"})})]}),u.jsx("div",{className:"flex items-center space-x-2 w-1/3",children:u.jsx("input",{type:"range",min:"0",max:"100",value:n||0,onChange:x,className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer range-sm",style:{background:`linear-gradient(to right, #1DB954 ${n}%, #4B5563 ${n}%)`}})})]}):null},Zh=({track:r,onViewComments:e})=>{var x;const n=T.useContext(Co);if(!n)throw new Error("TrackCard must be used within an AudioProvider");const{playTrack:i,currentTrack:o,isPlaying:c}=n,d=(o==null?void 0:o.id)===r.id&&c,p=()=>{i(r)},g=()=>{switch(r.uploadType){case"For Sale":return`Buy for $${r.price.toFixed(2)}`;case"Free Download":return"Download";default:return null}},y=()=>{switch(r.category){case"Bootleg":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"Remix":return"bg-purple-500/20 text-purple-300 border-purple-500/30";default:return"bg-blue-500/20 text-blue-300 border-blue-500/30"}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:r.coverArtUrl,alt:`${r.title} cover art`,className:"w-full h-48 object-cover"}),u.jsx("button",{onClick:p,className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-label":`Play or pause ${r.title}`,children:u.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:u.jsx(me,{name:d?"pause":"play",className:"h-8 w-8 text-white"})})}),u.jsx("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full border ${y()}`,children:r.category})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-white truncate",children:r.title}),u.jsxs("div",{className:"text-sm text-gray-400",children:[u.jsx(Lt,{to:`/profile/${r.artistId}`,className:"hover:text-white hover:underline",children:r.artistName}),r.labelId&&r.labelName&&u.jsxs("span",{className:"text-xs",children:[" on ",u.jsx(Lt,{to:`/labels/${r.labelId}`,className:"hover:text-white hover:underline font-semibold",children:r.labelName})]})]}),u.jsx("div",{className:"flex-grow mt-2",children:u.jsx("div",{className:"flex space-x-1",children:r.tags.slice(0,2).map(w=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:w},w))})}),u.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e&&u.jsxs("button",{onClick:()=>e(r),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors","aria-label":`View comments for ${r.title}`,children:[u.jsx(me,{name:"comment",className:"w-4 h-4"}),u.jsx("span",{className:"text-xs font-semibold",children:((x=r.comments)==null?void 0:x.length)||0})]}),g()&&u.jsx("button",{className:"bg-transparent border border-brand-accent text-brand-accent px-3 py-1 rounded-full text-xs font-semibold hover:bg-brand-accent hover:text-white transition-colors",children:g()})]})]})]})},on=()=>u.jsx("div",{className:"flex justify-center items-center p-8",children:u.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-brand-accent"})}),BI=({comment:r})=>{const e=c=>{const d=new Date(c),p=Math.floor((new Date().getTime()-d.getTime())/1e3);let g=p/31536e3;return g>1?Math.floor(g)+" years ago":(g=p/2592e3,g>1?Math.floor(g)+" months ago":(g=p/86400,g>1?Math.floor(g)+" days ago":(g=p/3600,g>1?Math.floor(g)+" hours ago":(g=p/60,g>1?Math.floor(g)+" minutes ago":"Just now"))))},n=c=>c.split(/(@\w+)/g).map((d,p)=>d.startsWith("@")?u.jsx("strong",{className:"text-brand-accent font-semibold cursor-pointer hover:underline",children:d},p):d),i=r.authorId?`/profile/${r.authorId}`:"#",o=r.authorAvatarUrl||`https://i.pravatar.cc/150?u=${r.authorName}`;return u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Lt,{to:i,children:u.jsx("img",{src:o,alt:r.authorName,className:"w-10 h-10 rounded-full object-cover"})}),u.jsxs("div",{className:"flex-1 bg-gray-700/50 p-3 rounded-lg",children:[u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx(Lt,{to:i,className:"font-bold text-white text-sm hover:underline",children:r.authorName}),u.jsx("span",{className:"text-xs text-gray-500",children:e(r.createdAt)})]}),u.jsx("p",{className:"text-gray-300 text-sm mt-1",children:n(r.content)})]})]})},ze=({children:r,variant:e="primary",isLoading:n=!1,size:i="md",className:o,...c})=>{const d="rounded-full font-semibold transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",p={primary:"bg-brand-accent hover:bg-brand-accent-hover text-white focus:ring-brand-accent",secondary:"bg-gray-700 hover:bg-gray-600 text-white focus:ring-gray-500"},g={sm:"px-3 py-1.5 text-xs",md:"px-6 py-2"};return u.jsx("button",{className:[d,p[e],g[i],o].filter(Boolean).join(" "),disabled:n,...c,children:n?u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):r})},qI=({onAddComment:r,placeholder:e="Add a comment or tag someone with @"})=>{const[n,i]=T.useState(""),[o,c]=T.useState(!1),[d,p]=T.useState(!1),[g,y]=T.useState(""),x=async w=>{if(w.preventDefault(),!n.trim()||d&&!g.trim())return;c(!0);let A;d?A={authorName:`${g} (Guest)`,authorAvatarUrl:`https://i.pravatar.cc/150?u=${g}`,content:n}:A={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100",content:n};try{await r(A),i(""),y("")}catch(D){console.error("Failed to add comment:",D)}finally{c(!1)}};return u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700/50",children:u.jsxs("form",{onSubmit:x,className:"flex items-start gap-3",children:[u.jsx("img",{src:d?"https://i.pravatar.cc/150?u=guest":"https://picsum.photos/id/1015/100/100",alt:"Your avatar",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsx("textarea",{value:n,onChange:w=>i(w.target.value),placeholder:e,required:!0,rows:2,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400 text-sm"}),d&&u.jsx("div",{className:"flex gap-3",children:u.jsx("input",{type:"text",value:g,onChange:w=>y(w.target.value),required:!0,placeholder:"Your Name",className:"flex-1 bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-sm focus:ring-brand-accent focus:border-brand-accent"})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{id:"guest-checkbox",type:"checkbox",checked:d,onChange:w=>p(w.target.checked),className:"h-4 w-4 rounded border-gray-600 bg-gray-700 text-brand-accent focus:ring-brand-accent"}),u.jsx("label",{htmlFor:"guest-checkbox",className:"ml-2 text-xs text-gray-400",children:"Comment as guest"})]}),u.jsx(ze,{type:"submit",size:"sm",isLoading:o,children:"Post Comment"})]})]})]})})},fa=({comments:r,onAddComment:e,placeholder:n,startExpanded:i=!1})=>{const[o,c]=T.useState(i);return!o&&!i?u.jsxs("button",{onClick:()=>c(!0),className:"text-sm font-semibold text-gray-400 hover:text-white flex items-center gap-2",children:[u.jsx(me,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:["View ",r.length," Comment",r.length!==1&&"s"]})]}):u.jsxs("div",{className:"w-full",children:[r.length>0&&u.jsx("div",{className:"space-y-4",children:r.map(d=>u.jsx(BI,{comment:d},d.id))}),u.jsx(qI,{onAddComment:e,placeholder:n})]})},Jp=({post:r})=>{const[e,n]=T.useState(r),[i,o]=T.useState(!1),c=g=>{const y=new Date(g),x=Math.floor((new Date().getTime()-y.getTime())/1e3);let w=x/31536e3;return w>1?Math.floor(w)+" years ago":(w=x/2592e3,w>1?Math.floor(w)+" months ago":(w=x/86400,w>1?Math.floor(w)+" days ago":(w=x/3600,w>1?Math.floor(w)+" hours ago":(w=x/60,w>1?Math.floor(w)+" minutes ago":Math.floor(x)+" seconds ago"))))},d=e.authorId.startsWith("label_")?`/labels/${e.authorId}`:`/profile/${e.authorId}`,p=async g=>{try{const y=await bI(e.id,g);n(x=>({...x,replies:[...x.replies||[],y],replyCount:(x.replies||[]).length+1}))}catch(y){console.error("Failed to add reply:",y)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl",children:[u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx(Lt,{to:d,children:u.jsx("img",{src:e.authorAvatarUrl,alt:e.authorName,className:"w-12 h-12 rounded-full object-cover"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:e.title}),u.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["Posted by ",u.jsx(Lt,{to:d,className:"font-medium hover:text-white hover:underline",children:e.authorName}),u.jsx("span",{className:"mx-2",children:""}),u.jsx("span",{children:c(e.createdAt)})]}),u.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:e.content})]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex items-center space-x-6 text-gray-400",children:[u.jsxs("button",{className:"flex items-center space-x-2 hover:text-brand-accent transition-colors",children:[u.jsx(me,{name:"heart",className:"w-5 h-5"}),u.jsxs("span",{children:[e.likes," Likes"]})]}),u.jsxs("button",{onClick:()=>o(!i),className:"flex items-center space-x-2 hover:text-white transition-colors",children:[u.jsx(me,{name:"comment",className:"w-5 h-5"}),u.jsxs("span",{children:[e.replyCount," Replies"]})]})]}),i&&u.jsx("div",{className:"mt-4",children:u.jsx(fa,{comments:e.replies||[],onAddComment:p,placeholder:"Write a reply..."})})]})},Yw=({onPostCreated:r})=>{const[e,n]=T.useState(!1),[i,o]=T.useState(""),[c,d]=T.useState(""),p=async g=>{if(g.preventDefault(),!i.trim()||!c.trim())return;n(!0);const y={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100"};try{const x=await $w({title:i,content:c,...y});r(x),o(""),d("")}catch(x){console.error("Failed to add post:",x)}finally{n(!1)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg h-full",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create a New Post"}),u.jsxs("form",{onSubmit:p,className:"space-y-4",children:[u.jsx("div",{children:u.jsx("input",{type:"text",placeholder:"Post Title",value:i,onChange:g=>o(g.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})}),u.jsx("div",{children:u.jsx("textarea",{placeholder:"What's on your mind?",value:c,onChange:g=>d(g.target.value),required:!0,rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})}),u.jsx("div",{className:"flex justify-end",children:u.jsx(ze,{type:"submit",isLoading:e,children:"Post"})})]})]})},HI=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(""),[o,c]=T.useState([]),d=T.useRef(null),p={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};T.useEffect(()=>{Hw().then(c)},[]),T.useEffect(()=>{if(o.length===0)return;const y=Kw(),x=o.filter(A=>A.id!==p.id);x.length>0&&e([{id:`msg_${Date.now()-5e3}`,user:x[0],text:"Welcome to the live chat!",timestamp:new Date(Date.now()-5e3).toISOString()},{id:`msg_${Date.now()-2e3}`,user:x[1%x.length],text:"Anyone working on new tunes?",timestamp:new Date(Date.now()-2e3).toISOString()}]);const w=setInterval(()=>{const A=x[Math.floor(Math.random()*x.length)],D=y[Math.floor(Math.random()*y.length)],V={id:`msg_${Date.now()}`,user:A,text:D,timestamp:new Date().toISOString()};e(H=>[...H,V])},8e3);return()=>clearInterval(w)},[o]),T.useEffect(()=>{var y;(y=d.current)==null||y.scrollIntoView({behavior:"smooth"})},[r]);const g=y=>{if(y.preventDefault(),!n.trim())return;const x={id:`msg_${Date.now()}`,user:p,text:n,timestamp:new Date().toISOString()};e(w=>[...w,x]),i("")};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[500px]",children:[u.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[r.map(y=>u.jsxs("div",{className:`flex items-start gap-3 ${y.user.id===p.id?"flex-row-reverse":""}`,children:[u.jsx("img",{src:y.user.avatarUrl,alt:y.user.name,className:"w-10 h-10 rounded-full object-cover"}),u.jsxs("div",{className:`p-3 rounded-lg max-w-sm shadow ${y.user.id===p.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[u.jsx("p",{className:"font-bold text-sm mb-1",children:y.user.name}),u.jsx("p",{className:"text-sm",children:y.text})]})]},y.id)),u.jsx("div",{ref:d})]})}),u.jsx("div",{className:"p-4 bg-gray-700/50 border-t border-gray-700",children:u.jsxs("form",{onSubmit:g,className:"flex gap-3 items-center",children:[u.jsx("img",{src:p.avatarUrl,alt:"Your avatar",className:"w-8 h-8 rounded-full"}),u.jsx("input",{type:"text",value:n,onChange:y=>i(y.target.value),placeholder:"Join the conversation...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-2 hover:bg-brand-accent-hover disabled:bg-gray-500 transition-colors",disabled:!n.trim(),children:u.jsx(me,{name:"send",className:"w-5 h-5"})})]})})]})};var ch=(r=>(r.NEW_TRACK="NEW_TRACK",r.NEW_PHOTO="NEW_PHOTO",r.IRL_EVENT="IRL_EVENT",r))(ch||{}),Kt=(r=>(r.GEO="GEO",r.UNIVERSE="UNIVERSE",r.COUNTRY="COUNTRY",r))(Kt||{});const ma=({isOpen:r,onClose:e,title:n,comments:i,onAddComment:o})=>{const c=T.useRef(null);return T.useEffect(()=>{const d=p=>{p.key==="Escape"&&e()};return r&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow=""}},[r,e]),r?u.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm","aria-labelledby":"comment-modal-title",role:"dialog","aria-modal":"true",onClick:e,children:u.jsxs("div",{ref:c,className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl h-full max-h-[80vh] flex flex-col overflow-hidden",onClick:d=>d.stopPropagation(),children:[u.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-700 flex-shrink-0",children:[u.jsx("h2",{id:"comment-modal-title",className:"text-xl font-bold text-white truncate",children:n}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white p-2 rounded-full","aria-label":"Close comment modal",children:u.jsx(me,{name:"x",className:"w-6 h-6"})})]}),u.jsx("main",{className:"flex-grow overflow-y-auto p-6",children:u.jsx(fa,{comments:i,onAddComment:o,startExpanded:!0})})]})}):null},Qw=r=>{switch(r){case ch.NEW_TRACK:return"music-note";case ch.NEW_PHOTO:return"camera";case ch.IRL_EVENT:return"map-pin";default:return"chat-bubble"}},W_=({event:r,onClick:e,onMouseEnter:n,onMouseLeave:i,className:o="event-ping",isDimmed:c,isHighlighted:d,size:p=32})=>{const g=p*.6;return u.jsx("div",{className:`${o} ${c?"dimmed":""}`,style:{transform:r.transform,animationDelay:r.animationDelay,width:`${p}px`,height:`${p}px`,marginLeft:`${-p/2}px`,marginTop:`${-p/2}px`},onMouseEnter:()=>n(r),onMouseLeave:i,onClick:()=>e(r),"aria-label":`Event: ${r.title}`,children:u.jsx("div",{className:`event-ping-icon ${d?"highlight":""}`,style:{animationDelay:r.animationDelay},children:u.jsx(me,{name:Qw(r.type),className:"transition-all",style:{width:g,height:g}})})})},FI=({mode:r,setMode:e})=>{const n="flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium transition-colors",i="bg-brand-accent text-white",o="bg-gray-700 text-gray-300 hover:bg-gray-600",c=[{key:Kt.GEO,icon:"globe-alt",label:"Geo"},{key:Kt.UNIVERSE,icon:"aperture",label:"Universe"},{key:Kt.COUNTRY,icon:"map",label:"Countries"}];return u.jsx("div",{className:"flex space-x-2 p-1 bg-gray-900/50 rounded-full",children:c.map(({key:d,icon:p,label:g})=>u.jsxs("button",{onClick:()=>e(d),className:`${n} ${r===d?i:o}`,children:[u.jsx(me,{name:p,className:"w-4 h-4"}),u.jsx("span",{children:g})]},d))})},GI=()=>{var ee;const[e,n]=T.useState([]),[i,o]=T.useState(!0),[c,d]=T.useState(Kt.GEO),[p,g]=T.useState(null),[y,x]=T.useState(null),[w,A]=T.useState(null),[D,V]=T.useState(1),[H,z]=T.useState({x:-20,y:30}),[Y,te]=T.useState({x:0,y:0,z:0}),[J,se]=T.useState(!1),le=T.useRef({x:0,y:0}),[ue,I]=T.useState(null),N=["@Artist:Sub-Tropical","@Genre:Jungle","@Genre:LiquidFunk"],[R,j]=T.useState(null);T.useEffect(()=>{II().then(F=>{n(F),o(!1)})},[]),T.useEffect(()=>{g(null),A(null),I(null),j(null),te({x:0,y:0,z:0}),V(1)},[c]);const L=T.useMemo(()=>{if(c!==Kt.UNIVERSE)return[];const F=new Map;e.forEach(re=>{re.groups.forEach(fe=>{const be=fe.split(":")[0];F.set(be,(F.get(be)||0)+1)})});const ce=Array.from(F.keys());return ce.map((re,fe)=>{const be=fe/ce.length*2*Math.PI,Fe=Math.random()*Math.PI-Math.PI/2,We=120+Math.random()*20,ln=Math.cos(be)*Math.cos(Fe)*We,yn=Math.sin(be)*Math.cos(Fe)*We,cs=Math.sin(Fe)*We;return{name:re,transform:`translateX(-50%) translateY(-50%) translateX(${ln}px) translateY(${cs}px) translateZ(${yn}px) rotateY(${-be}rad) rotateX(${-Fe}rad)`,position:{x:ln,y:cs,z:yn},influence:F.get(re)||1}})},[e,c]),k=T.useMemo(()=>{if(c!==Kt.COUNTRY)return[];const F=e.reduce((re,fe)=>(re[fe.country]=re[fe.country]||[],re[fe.country].push(fe),re),{}),ce={"United Kingdom":{top:"40%",left:"45%"},Germany:{top:"42%",left:"55%"},Jamaica:{top:"70%",left:"25%"},Japan:{top:"50%",left:"85%"}};return Object.entries(F).map(([re,fe])=>({name:re,count:fe.length,events:fe,position:ce[re]||{top:"50%",left:"50%"}}))},[e,c]),C=F=>{F.preventDefault();const ce=.001;V(re=>Math.max(.5,Math.min(3,re-F.deltaY*ce)))},Se=F=>{se(!0),le.current={x:F.clientX,y:F.clientY}},pe=()=>se(!1),O=F=>{if(!J)return;const ce=F.clientX-le.current.x,re=F.clientY-le.current.y;le.current={x:F.clientX,y:F.clientY},z(fe=>({y:fe.y+ce*.2,x:Math.max(-90,Math.min(90,fe.x-re*.2))}))},W=F=>{ue===F.name?(I(null),te({x:0,y:0,z:0})):(I(F.name),te({x:-F.position.x,y:-F.position.y,z:-F.position.z}))},de=async F=>{if(y)try{const ce=await AI(y.id,F),re={...y,comments:[...y.comments||[],ce]};x(re),n(fe=>fe.map(be=>be.id===re.id?re:be))}catch(ce){console.error("Failed to add comment to event:",ce)}},xe=Array.from({length:12}).map((F,ce)=>u.jsx("div",{className:"globe-slice",style:{transform:`rotateY(${180/12*ce}deg)`}},ce)),Ie=()=>{switch(c){case Kt.GEO:return"Global Activity";case Kt.UNIVERSE:return"Musical Universe";case Kt.COUNTRY:return"Community Hotspots";default:return"Activity Hub"}},P=()=>{switch(c){case Kt.GEO:return"Real-time user activity by location.";case Kt.UNIVERSE:return"Click a bubble to focus. Drag to orbit.";case Kt.COUNTRY:return"Scroll to zoom. Click a bubble to explore.";default:return"See what's happening now."}};return u.jsxs(u.Fragment,{children:[y&&u.jsx(ma,{isOpen:!!y,onClose:()=>x(null),title:`Comments for ${y.title}`,comments:y.comments||[],onAddComment:de}),u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[500px] p-4 text-center items-center justify-between relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-20 flex justify-between w-full items-start",children:[u.jsxs("div",{className:"text-left",children:[u.jsx("h4",{className:"font-bold text-white text-lg",children:Ie()}),u.jsx("p",{className:"text-sm text-gray-400 max-w-xs",children:P()})]}),u.jsx(FI,{mode:c,setMode:d})]}),u.jsx("div",{className:"flex-grow flex items-center justify-center w-full h-full relative",children:i?u.jsx(on,{}):u.jsxs(u.Fragment,{children:[c===Kt.GEO&&u.jsx("div",{className:"globe-container",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"globe",children:[xe,e.map(F=>u.jsx(W_,{event:F,onClick:x,onMouseEnter:g,onMouseLeave:()=>g(null)},F.id))]}),u.jsx("div",{className:"globe-shadow"})]})}),c===Kt.UNIVERSE&&u.jsx("div",{className:"universe-container",onMouseDown:Se,onMouseUp:pe,onMouseLeave:pe,onMouseMove:O,onWheel:C,children:u.jsxs("div",{className:"universe-core",style:{transform:`
                                        rotateX(${H.x}deg) 
                                        rotateY(${H.y}deg) 
                                        translateX(${Y.x*D}px) 
                                        translateY(${Y.y*D}px) 
                                        translateZ(${Y.z*D}px) 
                                        scale(${D})
                                    `},children:[L.map(F=>{const ce=40+F.influence*8,re=Math.min(.1+F.influence*.05,.7);return u.jsx("div",{className:`universe-node ${ue===F.name?"focused":""} ${ue&&ue!==F.name?"dimmed":""}`,style:{transform:F.transform,fontSize:`${8+F.influence*1.5}px`,width:`${ce}px`,height:`${ce}px`,backgroundColor:`rgba(168, 85, 247, ${re})`},onClick:()=>W(F),children:F.name},F.name)}),e.map(F=>{const ce=ue?F.groups.some(fe=>fe.startsWith(ue)):!0,re=24+F.influence*2;return u.jsx(W_,{event:F,size:re,className:"universe-event-ping",isDimmed:ue!==null&&!ce,isHighlighted:ce,onClick:x,onMouseEnter:g,onMouseLeave:()=>g(null)},F.id)})]})}),c===Kt.COUNTRY&&u.jsx("div",{className:"country-view-container",onWheel:C,children:u.jsxs("div",{className:"country-view-wrapper",style:{transform:`scale(${D})`},children:[k.map(F=>{const re=40+F.count*15,fe=R===F.name,be=R&&!fe;return u.jsx("div",{className:`country-bubble ${fe?"active":""} ${be?"dimmed":""}`,style:{top:F.position.top,left:F.position.left,width:`${re}px`,height:`${re}px`,fontSize:`${10+F.count}px`},onClick:()=>j(Fe=>Fe===F.name?null:F.name),onMouseEnter:()=>A(F),onMouseLeave:()=>A(null),children:F.name.split(" ").map(Fe=>Fe[0]).join("")},F.name)}),R&&((ee=k.find(F=>F.name===R))==null?void 0:ee.events.map((F,ce,re)=>{const fe=k.find(yn=>yn.name===R),be=ce/re.length*2*Math.PI,Fe=(40+fe.count*15)*.7,We=`calc(${fe.position.top} + ${Math.sin(be)*Fe}px)`,ln=`calc(${fe.position.left} + ${Math.cos(be)*Fe}px)`;return u.jsx("div",{className:"local-event-ping",style:{top:We,left:ln},onMouseEnter:()=>g(F),onMouseLeave:()=>g(null),onClick:()=>x(F),children:u.jsx(me,{name:Qw(F.type),className:"w-3 h-3 text-white"})},F.id)}))]})})]})}),u.jsxs("div",{className:"absolute bottom-4 left-4 right-4 z-10 flex items-end gap-4",children:[c===Kt.UNIVERSE&&u.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm p-3 rounded-lg flex-shrink-0",children:[u.jsx("h5",{className:"font-bold text-white text-sm mb-2 text-left",children:"My Bubbles"}),u.jsx("div",{className:"flex flex-col gap-1 items-start",children:N.map(F=>{const ce=F.split(":")[0];return u.jsx("button",{onClick:()=>{const re=L.find(fe=>fe.name===ce);re&&W(re)},className:`text-xs text-left transition-colors w-full px-2 py-1 rounded ${ue===ce?"bg-brand-accent text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:F},F)})}),ue&&u.jsx("button",{onClick:()=>{I(null),te({x:0,y:0,z:0})},className:"text-xs text-gray-400 hover:text-white mt-2 w-full text-center",children:"Reset View"})]}),u.jsx("div",{className:"event-info-box bg-gray-900/80 backdrop-blur-sm p-4 rounded-lg transition-all duration-300 flex-grow",children:p?u.jsxs("div",{className:"opacity-100 transition-opacity duration-300 text-left",children:[u.jsx("h5",{className:"font-bold text-white",children:p.title}),u.jsx("p",{className:"text-sm text-gray-300",children:p.locationName}),u.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["By ",p.authorName]}),u.jsxs(ze,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>x(p),children:[u.jsx(me,{name:"comment",className:"w-4 h-4 mr-2"}),"View Comments"]})]}):w?u.jsxs("div",{className:"opacity-100 transition-opacity duration-300 text-left",children:[u.jsx("h5",{className:"font-bold text-white",children:w.name}),u.jsxs("p",{className:"text-sm text-gray-300",children:[w.count," active event",w.count>1?"s":""]})]}):u.jsx("div",{className:"opacity-70 transition-opacity duration-300",children:u.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Hover over an item for details."})})})]})]})]})},$I=()=>{const[r,e]=T.useState([]),[n,i]=T.useState([]),[o,c]=T.useState(!0),[d,p]=T.useState(null);T.useEffect(()=>{(async()=>{c(!0);const[w,A]=await Promise.all([Jh(),Gw()]);e(w),i(A),c(!1)})()},[]);const g=x=>{i(w=>[x,...w].slice(0,2))},y=async x=>{if(d)try{const w=await gc(d.id,x),A={...d,comments:[...d.comments||[],w]};p(A),e(D=>D.map(V=>V.id===A.id?A:V))}catch(w){console.error("Failed to add comment:",w)}};return o?u.jsx(on,{}):u.jsxs("div",{children:[d&&u.jsx(ma,{isOpen:!!d,onClose:()=>p(null),title:`Comments for ${d.title}`,comments:d.comments||[],onAddComment:y}),u.jsxs("section",{id:"featured-tracks",children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Featured Tracks"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Discover new music from artists around the world."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:(r||[]).length>0?r.map(x=>u.jsx(Zh,{track:x,onViewComments:p},x.id)):u.jsx("div",{className:"col-span-full text-center py-12",children:u.jsx("p",{className:"text-gray-400 text-lg",children:"No tracks available yet. Check back soon!"})})})]}),u.jsxs("section",{id:"community-spotlight",className:"mt-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Community Spotlight"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Join the conversation or start your own."}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2 space-y-6",children:(n||[]).length>0?n.slice(0,2).map(x=>u.jsx(Jp,{post:x},x.id)):u.jsx("p",{className:"text-gray-400",children:"No community posts yet. Be the first!"})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsx(Yw,{onPostCreated:g})})]})]}),u.jsxs("section",{id:"activity-hub",className:"mt-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Activity Hub"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"See what's happening in the community right now."}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Live Chat"}),u.jsx(HI,{})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Globalizer"}),u.jsx(GI,{})]})]})]})]})},KI={Spotify:{icon:"spotify",color:"text-green-500"},SoundCloud:{icon:"soundcloud",color:"text-orange-500"},YouTube:{icon:"youtube",color:"text-red-500"},Bandcamp:{icon:"bandcamp",color:"text-cyan-400"}},YI=({releases:r})=>{const e=(n,i)=>{console.log(`${n} button clicked for: ${i}`),alert(`Feature coming soon: ${n} for "${i}"`)};return u.jsx("div",{className:"space-y-4",children:r.map(n=>{const i=KI[n.platform],o=n.type==="Bootleg"?!0:!n.isPaid;return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4 transition-colors hover:bg-gray-700/50",children:[u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 ${i.color} hover:opacity-80 transition-opacity`,children:u.jsx(me,{name:i.icon,className:"w-10 h-10"})}),u.jsxs("div",{className:"flex-grow",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"font-bold text-white hover:underline",children:n.title}),u.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full border ${o?"bg-green-500/20 text-green-300 border-green-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`,children:o?"Free":"Paid"})]}),n.type==="Remix"&&n.sourceArtist&&u.jsxs("p",{className:"text-sm text-gray-400",children:["Remix of a track by ",u.jsx("span",{className:"font-semibold text-gray-300",children:n.sourceArtist})]})]}),u.jsx("div",{className:"w-full sm:w-auto",children:n.type==="Remix"&&n.sourceSamples&&u.jsxs("div",{className:"mb-2 sm:mb-0",children:[u.jsx("p",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Source Samples:"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:n.sourceSamples.map((c,d)=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:c},d))})]})}),n.type==="Remix"&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 self-start sm:self-center mt-2 sm:mt-0",children:[u.jsxs("button",{onClick:()=>e("Tag Samples",n.title),className:"text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors",children:[u.jsx(me,{name:"tag",className:"w-3 h-3"})," Tag Samples"]}),u.jsxs("button",{onClick:()=>e("Request Remix",n.title),className:"text-xs bg-purple-600/50 hover:bg-purple-600/80 text-purple-200 px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors",children:[u.jsx(me,{name:"music-note",className:"w-3 h-3"})," Request Remix"]})]})]},n.id)})})},QI=({pack:r})=>u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-800/80 border border-brand-accent/30 rounded-lg shadow-2xl p-6 flex flex-col h-full transform transition-transform duration-300 hover:scale-105 hover:shadow-brand-accent/20",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx(me,{name:"package",className:"w-10 h-10 text-brand-accent mb-2"}),u.jsx("h3",{className:"text-2xl font-bold text-white",children:r.title}),u.jsx("p",{className:"text-gray-400 mt-1",children:r.description})]}),u.jsx("ul",{className:"space-y-3 my-6",children:r.items.map((e,n)=>u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-gray-700 rounded-full p-2",children:u.jsx(me,{name:e.icon,className:"w-4 h-4 text-brand-accent-hover"})}),u.jsx("span",{className:"text-gray-300",children:e.name})]},n))})]}),u.jsxs("div",{className:"mt-6 text-center",children:[u.jsxs("p",{className:"text-4xl font-bold text-white mb-4",children:["$",r.price.toFixed(2)," ",u.jsx("span",{className:"text-lg font-normal text-gray-400",children:r.currency})]}),u.jsx(ze,{className:"w-full",children:"Purchase Pack"})]})]}),XI=({collection:r})=>u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Your Collection (",r.length," tracks)"]}),u.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden max-h-[60vh] overflow-y-auto",children:u.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[u.jsx("thead",{className:"text-xs text-gray-300 uppercase bg-gray-700 sticky top-0 z-10",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 py-3",children:"#"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Title"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Artist"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Album"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Genre"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Key"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Time"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Plays"})]})}),u.jsx("tbody",{children:r.map((e,n)=>u.jsxs("tr",{className:"bg-gray-800 border-b border-gray-700 hover:bg-gray-700/50",children:[u.jsx("td",{className:"px-4 py-3",children:n+1}),u.jsx("th",{scope:"row",className:"px-4 py-3 font-medium text-white whitespace-nowrap",children:e.title}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.artist}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.album}),u.jsx("td",{className:"px-4 py-3",children:e.genre}),u.jsx("td",{className:"px-4 py-3",children:e.key}),u.jsxs("td",{className:"px-4 py-3",children:[e.totalTime,"s"]}),u.jsx("td",{className:"px-4 py-3",children:e.playCount})]},e.trackId||n))})]})})]}),WI=()=>{const{userId:r}=ux(),e=wi(),[n,i]=T.useState(null),[o,c]=T.useState([]),[d,p]=T.useState([]),[g,y]=T.useState([]),[x,w]=T.useState(null),[A,D]=T.useState(!0),[V,H]=T.useState("tracks"),[z,Y]=T.useState(!1),[te,J]=T.useState(null),[se,le]=T.useState(null);T.useEffect(()=>{const j=bo.onAuthStateChanged(L=>{le((L==null?void 0:L.uid)||null)});return()=>j()},[]),T.useEffect(()=>{var j;(j=e.state)!=null&&j.collection&&(w(e.state.collection),H("collection"),window.history.replaceState({},document.title))},[e.state]),T.useEffect(()=>{(async()=>{if(!r)return;D(!0);const[L,k,C,Se]=await Promise.all([Wh(r),dI(r),CI(),jI()]);i(L||null),c(k),p(C),y(Se),D(!1)})()},[r]);const ue=()=>{Y(j=>!j)},I=async j=>{if(te)try{const L=await gc(te.id,j),k={...te,comments:[...te.comments||[],L]};J(k),c(C=>C.map(Se=>Se.id===k.id?k:Se))}catch(L){console.error("Failed to add comment:",L)}},N=()=>{switch(V){case"tracks":return u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map(j=>u.jsx(Zh,{track:j,onViewComments:J},j.id))});case"releases":return u.jsx(YI,{releases:d});case"packs":return u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(j=>u.jsx(QI,{pack:j},j.id))});case"collection":return x?u.jsx(XI,{collection:x}):u.jsxs("div",{className:"text-center py-20 px-6 bg-gray-800 rounded-lg border-2 border-dashed border-gray-700",children:[u.jsx(me,{name:"playlist",className:"w-16 h-16 mx-auto text-gray-500 mb-4"}),u.jsx("h3",{className:"text-2xl font-semibold text-white",children:"Your Music Collection is Empty"}),u.jsx("p",{className:"text-gray-400 mt-2 mb-6 max-w-md mx-auto",children:"Import your Rekordbox XML file to see all your tracks, organize them, and build playlists."}),u.jsx(Lt,{to:"/import-collection",children:u.jsxs(ze,{children:[u.jsx(me,{name:"upload",className:"w-5 h-5 mr-2"}),"Import Your Collection"]})})]});default:return null}},R=({tab:j,label:L,count:k})=>u.jsxs("button",{onClick:()=>H(j),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors border-b-2 ${V===j?"text-white border-brand-accent bg-gray-700/50":"text-gray-400 border-transparent hover:text-white hover:border-gray-500"}`,children:[L,typeof k<"u"&&k>0&&u.jsx("span",{className:"text-xs bg-gray-600 rounded-full px-2 py-0.5 ml-1",children:k})]});return A?u.jsx(on,{}):n?u.jsxs("div",{className:"text-white",children:[te&&u.jsx(ma,{isOpen:!!te,onClose:()=>J(null),title:`Comments for ${te.title}`,comments:te.comments||[],onAddComment:I}),u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 mb-8 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-8",children:[u.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-40 h-40 rounded-full object-cover border-4 border-gray-700 flex-shrink-0"}),u.jsxs("div",{className:"flex-grow w-full",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("h1",{className:"text-4xl font-bold",children:n.name}),n.isVerified&&u.jsx(me,{name:"check-circle",className:"w-6 h-6 text-brand-accent",title:"Verified Artist"})]}),se===r?u.jsx(Lt,{to:"/settings/profile",children:u.jsxs(ze,{variant:"secondary",className:"w-full sm:w-auto flex-shrink-0",children:[u.jsx(me,{name:"settings",className:"w-4 h-4 mr-2"}),"Edit Profile"]})}):u.jsx(ze,{onClick:ue,variant:z?"secondary":"primary",className:"w-full sm:w-auto flex-shrink-0",children:z?"Following":"Follow"})]}),u.jsx("p",{className:"text-gray-400 mt-2 max-w-xl",children:n.bio})]})]}),u.jsx("div",{className:"border-b border-gray-700 mb-6",children:u.jsxs("nav",{className:"-mb-px flex space-x-4",children:[u.jsx(R,{tab:"tracks",label:"All Tracks",count:o.length}),u.jsx(R,{tab:"releases",label:"External Releases",count:d.length}),u.jsx(R,{tab:"packs",label:"Premium Packs",count:g.length}),u.jsx(R,{tab:"collection",label:"My Collection",count:(x==null?void 0:x.length)||0})]})}),u.jsx("div",{children:N()})]}):u.jsx("div",{className:"text-center text-white",children:"User not found."})},Xw=()=>{const r=jh(),[e,n]=T.useState(!0),[i,o]=T.useState(!1),[c,d]=T.useState(null),[p,g]=T.useState(""),[y,x]=T.useState(""),[w,A]=T.useState(""),[D,V]=T.useState(""),[H,z]=T.useState(""),[Y,te]=T.useState(""),[J,se]=T.useState(""),[le,ue]=T.useState(""),[I,N]=T.useState(""),[R,j]=T.useState("");T.useEffect(()=>{(async()=>{const C=bo.currentUser;if(!C){r("/");return}try{const Se=await Wh(C.uid);Se&&(d(Se),A(Se.name||""),V(Se.bio||""),z(Se.genre||""),te(Se.location||""),se(Se.spotifyUrl||""),ue(Se.soundcloudUrl||""),N(Se.instagramUrl||""),j(Se.twitterUrl||""))}catch(Se){console.error("Error loading profile:",Se),g("Failed to load profile")}finally{n(!1)}})()},[r]);const L=async()=>{if(c){o(!0),g(""),x("");try{const k={id:c.id,name:w,bio:D,genre:H,location:Y,spotifyUrl:J||void 0,soundcloudUrl:le||void 0,instagramUrl:I||void 0,twitterUrl:R||void 0};await Fw(k),x("Profile updated successfully!"),setTimeout(()=>r(`/profile/${c.id}`),1500)}catch(k){console.error("Error saving profile:",k),g(k.message||"Failed to save profile")}finally{o(!1)}}};return e?u.jsx(on,{}):c?u.jsxs("div",{className:"max-w-4xl mx-auto text-white",children:[u.jsxs("div",{className:"mb-8",children:[u.jsxs("button",{onClick:()=>r(`/profile/${c.id}`),className:"flex items-center text-gray-400 hover:text-white transition-colors mb-4",children:[u.jsx(me,{name:"arrow-left",className:"w-5 h-5 mr-2"}),"Back to Profile"]}),u.jsx("h1",{className:"text-4xl font-bold",children:"Edit Profile"}),u.jsx("p",{className:"text-gray-400 mt-2",children:"Update your SoundWave artist profile"})]}),p&&u.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500",children:p}),y&&u.jsx("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500 rounded-lg text-green-500",children:y}),u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Artist Name *"}),u.jsx("input",{type:"text",value:w,onChange:k=>A(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"Your artist name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio *"}),u.jsx("textarea",{value:D,onChange:k=>V(k.target.value),rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"Tell us about yourself and your music..."}),u.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[D.length,"/500 characters"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Primary Genre *"}),u.jsx("input",{type:"text",value:H,onChange:k=>z(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"e.g., Drum & Bass, House, Techno"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Location"}),u.jsx("input",{type:"text",value:Y,onChange:k=>te(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"e.g., Los Angeles, CA"})]}),u.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[u.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Social Links (Optional)"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Spotify"}),u.jsx("input",{type:"url",value:J,onChange:k=>se(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"https://open.spotify.com/artist/..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"SoundCloud"}),u.jsx("input",{type:"url",value:le,onChange:k=>ue(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"https://soundcloud.com/..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Instagram"}),u.jsx("input",{type:"url",value:I,onChange:k=>N(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"https://instagram.com/..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Twitter/X"}),u.jsx("input",{type:"url",value:R,onChange:k=>j(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"https://twitter.com/..."})]})]})]}),u.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-700",children:[u.jsx(ze,{onClick:L,disabled:i||!w||!D||!H,className:"flex-1",children:i?"Saving...":"Save Changes"}),u.jsx(ze,{onClick:()=>r(`/profile/${c.id}`),variant:"secondary",children:"Cancel"})]})]})]}):u.jsx("div",{className:"text-center text-white py-20",children:u.jsx("p",{children:"Profile not found"})})},JI=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0);T.useEffect(()=>{(async()=>{i(!0);const d=await Gw();e(d),i(!1)})()},[]);const o=c=>{e([c,...r])};return u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Community Hub"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Connect with fellow artists and fans. Share your thoughts, ask questions, and collaborate."}),u.jsx("div",{className:"mb-8",children:u.jsx(Yw,{onPostCreated:o})}),n?u.jsx(on,{}):u.jsx("div",{className:"space-y-6",children:(r||[]).length>0?r.map(c=>u.jsx(Jp,{post:c},c.id)):u.jsx("div",{className:"text-center py-12",children:u.jsx("p",{className:"text-gray-400 text-lg",children:"No posts yet. Be the first to share something!"})})})]})},ZI=()=>{const[r,e]=Qn.useState(!1),[n,i]=Qn.useState([]),[o,c]=Qn.useState(""),[d,p]=Qn.useState(null),g=Qn.useRef(null),y=()=>{var w;(w=g.current)==null||w.scrollIntoView({behavior:"smooth"})};Qn.useEffect(y,[n]),Qn.useEffect(()=>{(async()=>{const A=await Wp();A&&p({id:A.uid,name:A.displayName||"Anonymous",avatarUrl:A.photoURL||"https://api.dicebear.com/7.x/avataaars/svg?seed=default",bio:""})})()},[]),Qn.useEffect(()=>{i([{id:`msg_${Date.now()}`,user:{id:"system",name:"SoundWave",avatarUrl:"https://api.dicebear.com/7.x/shapes/svg?seed=soundwave"},text:"Welcome to the SoundWave global chat! Connect with artists, producers, and music lovers.",timestamp:new Date().toISOString()}])},[]);const x=async w=>{if(w.preventDefault(),!o.trim()||!d)return;const A={id:`msg_${Date.now()}`,user:{id:d.id,name:d.name,avatarUrl:d.avatarUrl},text:o,timestamp:new Date().toISOString()};i(D=>[...D,A]),c("")};return u.jsxs(u.Fragment,{children:[!r&&u.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-brand-accent hover:bg-brand-accent-hover text-white rounded-full p-4 shadow-lg z-50 transition-transform transform hover:scale-110","aria-label":"Open global chat",children:u.jsx(me,{name:"chat-bubble",className:"w-8 h-8"})}),u.jsx("div",{className:`fixed bottom-0 right-0 h-full w-full sm:h-auto sm:w-96 bg-gray-800 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out ${r?"translate-x-0":"translate-x-full"}`,children:u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 border-b border-gray-600",children:[u.jsx("h3",{className:"font-bold text-white text-lg",children:"Global Chat"}),u.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white","aria-label":"Close global chat",children:u.jsx(me,{name:"x",className:"w-6 h-6"})})]}),u.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[n.map(w=>u.jsxs("div",{className:`flex items-start gap-3 ${w.user.id===d.id?"flex-row-reverse":""}`,children:[u.jsx("img",{src:w.user.avatarUrl,alt:w.user.name,className:"w-8 h-8 rounded-full object-cover"}),u.jsxs("div",{className:`p-3 rounded-lg max-w-xs ${w.user.id===(d==null?void 0:d.id)?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[u.jsx("p",{className:"font-bold text-sm",children:w.user.name}),u.jsx("p",{className:"text-sm",children:w.text})]})]},w.id)),u.jsx("div",{ref:g})]})}),u.jsx("div",{className:"p-4 bg-gray-700 border-t border-gray-600",children:u.jsxs("form",{onSubmit:x,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:o,onChange:w=>c(w.target.value),placeholder:"Type a message...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-3 hover:bg-brand-accent-hover disabled:bg-gray-500",disabled:!o.trim(),children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z",clipRule:"evenodd"})})})]})})]})})]})},e4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0),[o,c]=T.useState(null);T.useEffect(()=>{(async()=>{i(!0);const g=await Jh();e(g),i(!1)})()},[]);const d=async p=>{if(o)try{const g=await gc(o.id,p),y={...o,comments:[...o.comments||[],g]};c(y),e(x=>x.map(w=>w.id===y.id?y:w))}catch(g){console.error("Failed to add comment:",g)}};return n?u.jsx(on,{}):u.jsxs("div",{children:[o&&u.jsx(ma,{isOpen:!!o,onClose:()=>c(null),title:`Comments for ${o.title}`,comments:o.comments||[],onAddComment:d}),u.jsxs("section",{id:"global-library",children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Global Library"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Explore all tracks uploaded by the SoundWave community."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:r.map(p=>u.jsx(Zh,{track:p,onViewComments:c},p.id))})]})]})},t4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState([]),[o,c]=T.useState([]),[d,p]=T.useState(!0),[g,y]=T.useState(null),[x,w]=T.useState([]),[A,D]=T.useState(0),[V,H]=T.useState(""),[z,Y]=T.useState(!1),[te,J]=T.useState(null),se=T.useContext(Co);if(!se)throw new Error("PlaylistsPage must be used within an AudioProvider");const{playTrack:le,currentTrack:ue,isPlaying:I,setOnTrackEnd:N}=se;T.useEffect(()=>{(async()=>{p(!0);const O=await Jh();e([]),c(O),i([]),p(!1)})()},[]);const R=Qn.useCallback(()=>{x.length!==0&&D(pe=>{const O=(pe+1)%x.length,W=x[O];return le(W),j(W),O})},[x,le]);T.useEffect(()=>(g&&N(()=>R),()=>{N(null)}),[g,N,R]);const j=pe=>{Y(!0),H("");const O=[`This is fire! ${pe.title} is bringing the heat!`,`Loving the vibes on ${pe.title} by ${pe.artistName}!`,`${pe.artistName} never disappoints with tracks like ${pe.title}!`,`Turn it up! ${pe.title} is a certified banger!`,`Smooth sounds from ${pe.artistName} - ${pe.title} hits different!`],W=O[Math.floor(Math.random()*O.length)];H(W),Y(!1)},L=pe=>{let O;pe.artistId?O=o.filter(de=>de.artistId===pe.artistId):O=o.filter(de=>de.tags.some(xe=>pe.tags.includes(xe)));const W=O.sort(()=>.5-Math.random());w(W),y(pe),D(0),W.length>0&&(le(W[0]),j(W[0]))},k=()=>{y(null),w([])},C=async pe=>{te&&console.log("Add comment to playlist:",pe)},Se=x[A];return d?u.jsx(on,{}):g&&Se?u.jsx(s4,{station:g,track:Se,djCommentary:V,isGeneratingCommentary:z,isPlaying:I,onBack:k,onNext:R}):u.jsxs("div",{children:[te&&u.jsx(ma,{isOpen:!!te,onClose:()=>J(null),title:`Comments for ${te.title}`,comments:te.comments||[],onAddComment:C}),u.jsxs("section",{id:"my-playlists",className:"mb-16",children:[u.jsx("div",{className:"flex justify-between items-center mb-6",children:u.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Playlists"})}),n.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(pe=>u.jsx(n4,{playlist:pe,onViewComments:J},pe.id))}):u.jsxs("div",{className:"text-center py-10 px-6 bg-gray-800 rounded-lg",children:[u.jsx(me,{name:"playlist",className:"w-12 h-12 mx-auto text-gray-500 mb-4"}),u.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Playlists Yet"}),u.jsx("p",{className:"text-gray-400 mt-2",children:"You haven't created any playlists."})]})]}),u.jsxs("section",{id:"radio-stations",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Radio Stations"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Tune in to AI-powered radio stations based on genres, moods, and artists."}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(pe=>u.jsxs("div",{className:"group relative rounded-lg overflow-hidden shadow-lg h-64",children:[u.jsx("img",{src:pe.imageUrl,alt:pe.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),u.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-end",children:[u.jsx("h3",{className:"text-2xl font-bold text-white",children:pe.name}),u.jsx("p",{className:"text-gray-300 text-sm mb-4",children:pe.description}),u.jsx("div",{className:"w-1/2",children:u.jsx(ze,{onClick:()=>L(pe),children:"Tune In"})})]})]},pe.id))})]})]})},n4=({playlist:r,onViewComments:e})=>{var n;return u.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg flex flex-col gap-4 transition-all duration-300 hover:bg-gray-700 hover:shadow-xl",children:[u.jsx("div",{className:"grid grid-cols-2 gap-1 w-full aspect-square rounded-md overflow-hidden bg-gray-900",children:r.tracks.slice(0,4).map(i=>u.jsx("img",{src:i.coverArtUrl,alt:"",className:"w-full h-full object-cover"},i.id))}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-white truncate",children:r.title}),u.jsxs("p",{className:"text-sm text-gray-400",children:[r.tracks.length," tracks"]}),u.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700 flex justify-between items-center",children:[u.jsxs("button",{onClick:()=>e(r),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors",children:[u.jsx(me,{name:"comment",className:"w-4 h-4"}),u.jsx("span",{className:"text-xs font-semibold",children:((n=r.comments)==null?void 0:n.length)||0})]}),u.jsx(ze,{size:"sm",children:"Play"})]})]})]})},s4=({station:r,track:e,djCommentary:n,isGeneratingCommentary:i,isPlaying:o,onBack:c,onNext:d})=>u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-2xl",children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-400",children:"Now Playing on"}),u.jsx("h2",{className:"text-3xl font-bold text-white",children:r.name})]}),u.jsx(ze,{onClick:c,variant:"secondary",children:"Change Station"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[u.jsxs("div",{className:"relative w-full aspect-square rounded-lg overflow-hidden shadow-lg",children:[u.jsx("img",{src:e.coverArtUrl,alt:e.title,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center gap-1 opacity-40",children:Array.from({length:20}).map((p,g)=>u.jsx("div",{className:"audio-bar w-2 h-24 bg-white",style:{animationDelay:`${g*.1}s`,animationPlayState:o?"running":"paused"}},g))})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h3",{className:"text-4xl font-bold text-white",children:e.title}),u.jsx("p",{className:"text-xl text-gray-400 mb-6",children:e.artistName}),u.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm border border-gray-600 rounded-lg p-4 mt-6 relative",children:[u.jsx("div",{className:"absolute -top-3 left-8 w-6 h-6 bg-gray-700/50 border-t border-l border-gray-600 transform rotate-45",style:{clipPath:"polygon(0 0, 100% 0, 100% 100%)"}}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("img",{src:"https://i.pravatar.cc/150?u=dj_gemini",alt:"DJ Gemini",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-brand-accent",children:"SoundWave Radio"}),i?u.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}):u.jsxs("p",{className:"text-gray-300 italic",children:['"',n,'"']})]})]})]}),u.jsx("div",{className:"mt-8 flex items-center gap-4",children:u.jsxs(ze,{onClick:d,className:"w-full",children:[u.jsx(me,{name:"next",className:"w-5 h-5 mr-2"}),"Next Track"]})})]})]})]})}),Ww=({room:r,onLeave:e})=>{const n=T.useRef(null),[i,o]=T.useState(null),[c,d]=T.useState(null),[p,g]=T.useState([]),[y,x]=T.useState(""),w=T.useRef(null),A={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};T.useEffect(()=>((async()=>{try{const H=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(H),n.current&&(n.current.srcObject=H)}catch(H){console.error("Error accessing media devices.",H),d("Could not access camera/microphone. Please check permissions.")}})(),()=>{i&&i.getTracks().forEach(H=>H.stop())}),[]),T.useEffect(()=>{const V=setInterval(()=>{const H=["This is fire!","Great stream!","Loving the vibes","Tune!"],z=H[Math.floor(Math.random()*H.length)],Y={id:`msg_${Date.now()}`,user:{id:`user_${Math.random()}`,name:"Viewer",avatarUrl:`https://i.pravatar.cc/150?u=${Math.random()}`},text:z,timestamp:new Date().toISOString()};g(te=>[...te,Y].slice(-10))},5e3+Math.random()*3e3);return()=>clearInterval(V)},[]),T.useEffect(()=>{var V;(V=w.current)==null||V.scrollIntoView({behavior:"smooth"})},[p]);const D=V=>{if(V.preventDefault(),!y.trim())return;const H={id:`msg_${Date.now()}`,user:A,text:y,timestamp:new Date().toISOString()};g(z=>[...z,H].slice(-10)),x("")};return u.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-90 z-50 flex flex-col items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-6xl h-full max-h-[90vh] flex flex-col md:flex-row overflow-hidden",onClick:V=>V.stopPropagation(),children:[u.jsxs("div",{className:"flex-grow bg-black relative flex items-center justify-center",children:[c?u.jsxs("div",{className:"text-center text-red-400 p-4",children:[u.jsx(me,{name:"x",className:"w-12 h-12 mx-auto mb-2"}),u.jsx("p",{className:"font-semibold",children:"Stream Error"}),u.jsx("p",{children:c})]}):u.jsx("video",{ref:n,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute top-4 left-4 bg-black/50 p-2 rounded-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:r.host.avatarUrl,alt:r.host.name,className:"w-10 h-10 rounded-full"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white",children:r.name}),u.jsxs("p",{className:"text-sm text-gray-300",children:["Hosted by ",r.host.name]})]})]})}),u.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-md text-sm font-bold",children:[u.jsx(me,{name:"rss",className:"w-4 h-4 animate-pulse"}),"LIVE"]}),u.jsxs("div",{className:"bg-black/50 text-white px-3 py-1 rounded-md text-sm",children:[r.viewers," watching"]})]})]}),u.jsxs("div",{className:"w-full md:w-80 lg:w-96 bg-gray-800 border-l border-gray-700 flex flex-col h-1/3 md:h-full",children:[u.jsx("div",{className:"p-4 border-b border-gray-700",children:u.jsx("h3",{className:"font-bold text-white",children:"Live Chat"})}),u.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[p.map(V=>u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("img",{src:V.user.avatarUrl,alt:V.user.name,className:"w-8 h-8 rounded-full"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-gray-300",children:V.user.name}),u.jsx("p",{className:"text-sm text-gray-400 bg-gray-700 px-3 py-1 rounded-lg",children:V.text})]})]},V.id)),u.jsx("div",{ref:w})]}),u.jsx("div",{className:"p-4 border-t border-gray-700",children:u.jsxs("form",{onSubmit:D,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:y,onChange:V=>x(V.target.value),placeholder:"Say something...",className:"flex-grow bg-gray-700 border-gray-600 rounded-full py-2 px-3 text-sm text-white focus:ring-brand-accent-hover focus:border-brand-accent-hover"}),u.jsx("button",{type:"submit",className:"bg-brand-accent p-2 rounded-full text-white hover:bg-brand-accent-hover",children:u.jsx(me,{name:"send",className:"w-5 h-5"})})]})})]}),u.jsx(ze,{onClick:e,className:"absolute bottom-4 left-1/2 -translate-x-1/2",variant:"secondary",children:"Leave Stream"})]})})},J_=({track:r,onUpvote:e,onDownvote:n,onPreview:i,onViewComments:o,audioCtx:c,isNext:d=!1})=>{var A;if(!c)return null;const{currentTrack:p,isPlaying:g,isPreviewing:y}=c,x=(p==null?void 0:p.id)===r.id&&g&&y,w=r.isPremiere?"border-2 border-purple-500/50 shadow-lg shadow-purple-500/20":"";return u.jsxs("div",{className:`relative p-3 rounded-md flex items-center gap-4 transition-all ${d?"bg-gray-700/70":"bg-gray-700/40"} hover:bg-gray-600/50 ${w}`,children:[r.isPremiere&&u.jsxs("div",{className:"absolute -top-2.5 -right-2.5 bg-purple-600 text-white text-[10px] font-bold px-2 py-1 rounded-full flex items-center gap-1 transform rotate-[15deg] shadow-md z-10",children:[u.jsx(me,{name:"crown",className:"w-3 h-3"}),"PREMIERE"]}),u.jsx("img",{src:r.coverArtUrl,alt:r.title,className:"w-12 h-12 rounded-md object-cover"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-semibold text-white",children:r.title}),u.jsx("p",{className:"text-sm text-gray-400",children:r.artistName})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>o(r),className:"p-3 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors flex items-center gap-1.5 text-xs","aria-label":`View comments for ${r.title}`,children:[u.jsx(me,{name:"comment",className:"w-4 h-4"}),u.jsx("span",{children:((A=r.comments)==null?void 0:A.length)||0})]}),u.jsx("button",{onClick:()=>i(r),className:"p-3 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":`Preview ${r.title}`,children:u.jsx(me,{name:x?"pause":"play",className:"w-5 h-5"})})]}),u.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[u.jsx("button",{onClick:()=>e(r.id),className:"p-2 bg-gray-600/50 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":"Upvote",children:u.jsx(me,{name:"thumbs-up",className:"w-4 h-4"})}),u.jsx("span",{className:"font-bold text-white w-4 text-center",children:r.votes}),u.jsx("button",{onClick:()=>n(r.id),className:"p-2 bg-gray-600/50 rounded-full hover:bg-red-500 hover:text-white transition-colors","aria-label":"Downvote",children:u.jsx(me,{name:"thumbs-down",className:"w-4 h-4"})})]})]})},r4=()=>{var pe;const[r,e]=T.useState([]),[n,i]=T.useState([]),[o,c]=T.useState([]),[d,p]=T.useState([]),[g,y]=T.useState(!0),[x,w]=T.useState(null),[A,D]=T.useState(null),V=T.useContext(Co);if(!V)throw new Error("ArtistHubPage must be used within an AudioProvider");const{playTrack:H,currentTrack:z,isPlaying:Y,setOnTrackEnd:te,playPreview:J}=V,se=T.useMemo(()=>[...r].sort((O,W)=>W.votes-O.votes),[r]),le=T.useMemo(()=>se.find(O=>O.id===(z==null?void 0:z.id))||se[0],[se,z]),ue=T.useMemo(()=>se.find(O=>O.id!==(le==null?void 0:le.id)),[se,le]),I=T.useMemo(()=>se.filter(O=>O.id!==(le==null?void 0:le.id)&&O.id!==(ue==null?void 0:ue.id)),[se,le,ue]),N=Qn.useCallback(()=>{ue&&H(ue)},[ue,H]);T.useEffect(()=>(te(()=>N),()=>te(null)),[te,N]),T.useEffect(()=>{(async()=>{y(!0);const[W,de]=await Promise.all([Jh(),kI()]);i([]),c(W),p(de);const xe=W.slice(0,5).map((Ie,P)=>({...Ie,votes:Math.floor(Math.random()*5)+(5-P),addedBy:"DJ Gemini",isPremiere:!0}));e(xe),y(!1),!z&&xe.length>0&&H(xe.sort((Ie,P)=>P.votes-Ie.votes)[0])})()},[]);const R=O=>{e(W=>W.map(de=>de.id===O?{...de,votes:de.votes+1}:de))},j=O=>{e(W=>W.map(xe=>xe.id===O?{...xe,votes:xe.votes-1}:xe).filter(xe=>xe.id===(z==null?void 0:z.id)||xe.votes>-3))},L=O=>{J(O)},k=()=>{if(o.length===0)return;const O=o.filter(W=>!r.some(de=>de.id===W.id));if(O.length>0){const de={...O[Math.floor(Math.random()*O.length)],votes:1,addedBy:"Sub-Tropical",isPremiere:!0};e(xe=>[...xe,de])}else alert("All tracks are already in the queue!")},C=()=>{w({id:"my_room",name:"Sub-Tropical's Studio Session",host:{id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""},viewers:1,isLive:!0})},Se=async O=>{if(A)try{const W=await gc(A.id,O),de={...A,comments:[...A.comments||[],W]};D(de),e(xe=>xe.map(Ie=>Ie.id===de.id?de:Ie))}catch(W){console.error("Failed to add comment:",W)}};return g?u.jsx(on,{}):x?u.jsx(Ww,{room:x,onLeave:()=>w(null)}):u.jsxs("div",{children:[A&&u.jsx(ma,{isOpen:!!A,onClose:()=>D(null),title:`Comments for ${A.title}`,comments:A.comments||[],onAddComment:Se}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Artist Hub"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Collaborate on a live playlist and join live streams from artists."}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 bg-gray-800 rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Global Playlist"}),u.jsx(ze,{onClick:k,children:"Add Your Track"})]}),u.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2",children:[le&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-brand-accent mb-2 uppercase tracking-wider",children:"Playing Now"}),u.jsxs("div",{className:`relative bg-gray-700/50 rounded-lg p-4 flex gap-4 items-center shadow-lg ${le.isPremiere?"ring-2 ring-purple-500 shadow-purple-500/20":"ring-2 ring-brand-accent"}`,children:[le.isPremiere&&u.jsxs("div",{className:"absolute -top-3 -right-3 bg-purple-600 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 transform rotate-[15deg] shadow-lg z-10",children:[u.jsx(me,{name:"crown",className:"w-4 h-4"}),"PREMIERE"]}),u.jsx("img",{src:le.coverArtUrl,alt:le.title,className:"w-24 h-24 rounded-md object-cover"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("h4",{className:"text-2xl font-bold text-white",children:le.title}),u.jsx("p",{className:"text-lg text-gray-300",children:le.artistName}),u.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Added by ",le.addedBy]}),u.jsxs(ze,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>D(le),children:[u.jsx(me,{name:"comment",className:"w-4 h-4 mr-2"}),((pe=le.comments)==null?void 0:pe.length)||0," Comments"]})]}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("button",{onClick:()=>R(le.id),className:"p-2 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":"Upvote",children:u.jsx(me,{name:"thumbs-up",className:"w-5 h-5"})}),u.jsx("span",{className:"font-bold text-white text-xl",children:le.votes}),u.jsx("button",{onClick:()=>j(le.id),className:"p-2 bg-gray-600 rounded-full hover:bg-red-500 hover:text-white transition-colors","aria-label":"Downvote",children:u.jsx(me,{name:"thumbs-down",className:"w-5 h-5"})})]})]})]}),ue&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-md font-semibold text-gray-400 mb-2 uppercase tracking-wider",children:"Playing Next"}),u.jsx(J_,{track:ue,onUpvote:R,onDownvote:j,onPreview:L,onViewComments:D,audioCtx:V,isNext:!0})]}),I.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-md font-semibold text-gray-400 mb-2 border-t border-gray-700 pt-4 uppercase tracking-wider",children:"Queue"}),u.jsx("div",{className:"space-y-3",children:I.map(O=>u.jsx(J_,{track:O,onUpvote:R,onDownvote:j,onPreview:L,onViewComments:D,audioCtx:V},O.id))})]})]})]}),u.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Live Rooms"}),u.jsxs(ze,{onClick:C,variant:"secondary",children:[u.jsx(me,{name:"video-camera",className:"w-5 h-5 mr-2"}),"Go Live"]})]}),u.jsx("div",{className:"space-y-4",children:n.map(O=>u.jsxs("div",{className:"bg-gray-700 p-3 rounded-md flex items-center gap-4",children:[u.jsx("img",{src:O.host.avatarUrl,alt:O.host.name,className:"w-12 h-12 rounded-full object-cover"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-semibold text-white",children:O.name}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),u.jsxs("span",{children:[O.viewers," watching"]})]})]}),u.jsx(ze,{onClick:()=>w(O),children:"Join"})]},O.id))})]}),u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Community Playlists"}),u.jsx("div",{className:"space-y-4",children:d.map(O=>u.jsxs("div",{className:"bg-gray-700 p-3 rounded-md flex items-center gap-4 transition-colors hover:bg-gray-600/50",children:[u.jsx("div",{className:"grid grid-cols-2 gap-0.5 w-16 h-16 flex-shrink-0 rounded-md overflow-hidden bg-gray-900",children:O.tracks.slice(0,4).map(W=>u.jsx("img",{src:W.coverArtUrl,alt:"",className:"w-full h-full object-cover"},W.id))}),u.jsxs("div",{className:"flex-grow overflow-hidden",children:[u.jsx("p",{className:"font-semibold text-white truncate",children:O.title}),u.jsxs("p",{className:"text-sm text-gray-400",children:["by ",O.curator.name]})]}),u.jsx(ze,{onClick:()=>alert(`Now playing ${O.title}`),size:"sm",children:"Listen"})]},O.id))})]})]})]})]})},i4=({room:r,onJoin:e})=>u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative h-48 w-full bg-gray-900 flex items-center justify-center",children:[u.jsx("img",{src:r.host.avatarUrl,alt:r.host.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-700 transition-transform duration-300 group-hover:scale-110"}),u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-md text-xs font-bold shadow-md",children:[u.jsx(me,{name:"rss",className:"w-3 h-3 animate-pulse"}),"LIVE"]}),u.jsxs("div",{className:"absolute bottom-3 left-3 bg-black/50 text-white px-3 py-1 rounded-md text-xs",children:[r.viewers," watching"]})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-white truncate",children:r.name}),u.jsxs("p",{className:"text-sm text-gray-400",children:["Hosted by ",r.host.name]}),u.jsx("div",{className:"flex-grow mt-4",children:u.jsx(ze,{onClick:()=>e(r),className:"w-full",children:"Join Stream"})})]})]}),a4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0),[o,c]=T.useState(null);return T.useEffect(()=>{(async()=>{i(!0);const p=await NI();e(p),i(!1)})()},[]),n?u.jsx(on,{}):o?u.jsx(Ww,{room:o,onLeave:()=>c(null)}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Live Streams"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Join live sessions from artists around the world. Watch performances, get feedback, or learn new skills."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:r.map(d=>u.jsx(i4,{room:d,onJoin:c},d.id))})]})},o4=({tutorial:r})=>{var p;const[e,n]=T.useState(r),[i,o]=T.useState(!1),c=()=>{switch(e.difficulty){case"Beginner":return"bg-green-500/20 text-green-300 border-green-500/30";case"Intermediate":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"Advanced":return"bg-red-500/20 text-red-300 border-red-500/30"}},d=async g=>{try{const y=await SI(e.id,g);n(x=>({...x,comments:[...x.comments||[],y]}))}catch(y){console.error("Failed to add comment:",y)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:e.thumbnailUrl,alt:`${e.title} thumbnail`,className:"w-full h-40 object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:u.jsx(me,{name:"play",className:"h-8 w-8 text-white"})})}),u.jsx("span",{className:"absolute bottom-2 right-2 text-xs font-semibold bg-gray-900/80 text-white px-2 py-1 rounded",children:e.duration}),u.jsx("span",{className:`absolute top-2 left-2 text-xs font-semibold px-2 py-1 rounded-full border ${c()}`,children:e.difficulty})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-md text-white truncate",children:e.title}),u.jsx(Lt,{to:`/profile/${e.instructor.id}`,className:"text-sm text-gray-400 hover:text-white hover:underline",children:e.instructor.name}),u.jsx("div",{className:"flex-grow mt-2",children:u.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(g=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:g},g))})}),u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:u.jsxs("button",{onClick:()=>o(!i),className:"w-full text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 py-1.5 rounded-md flex items-center justify-center gap-1.5 transition-colors",children:[u.jsx(me,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:[((p=e.comments)==null?void 0:p.length)||0," Comments"]})]})})]}),i&&u.jsx("div",{className:"p-4 border-t border-gray-700",children:u.jsx(fa,{comments:e.comments||[],onAddComment:d})})]})},l4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0);return T.useEffect(()=>{(async()=>{i(!0);const c=await MI();e(c),i(!1)})()},[]),n?u.jsx(on,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Tutorials"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Learn new skills and production techniques from talented artists in the community."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:r.map(o=>u.jsx(o4,{tutorial:o},o.id))})]})},c4=({masterclass:r})=>{const[e,n]=T.useState(r),i=async o=>{try{const c=await wI(e.id,o);n(d=>({...d,comments:[...d.comments||[],c]}))}catch(c){console.error("Failed to add comment:",c)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl transition-colors hover:bg-gray-700/50",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 p-8",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("img",{src:e.coverArtUrl,alt:e.title,className:"w-full md:w-64 h-auto rounded-lg object-cover shadow-lg"})}),u.jsxs("div",{className:"flex flex-col items-start text-center md:text-left",children:[u.jsx("h2",{className:"text-3xl font-bold text-white",children:e.title}),u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-gray-400",children:[u.jsx("img",{src:e.instructor.avatarUrl,alt:e.instructor.name,className:"w-6 h-6 rounded-full"}),u.jsxs("span",{children:["with ",e.instructor.name]})]}),u.jsx("p",{className:"text-gray-300 my-4 max-w-lg",children:e.description}),u.jsx("div",{className:"flex items-center gap-6 text-gray-300 text-sm mb-6",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(me,{name:"book-open",className:"w-5 h-5 text-brand-accent"}),u.jsxs("span",{children:[e.durationHours," hours of content"]})]})}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(ze,{children:["Enroll for $",e.price.toFixed(2)]}),u.jsx(ze,{variant:"secondary",children:"Learn More"})]})]})]}),u.jsxs("div",{className:"p-8 border-t border-gray-700",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Community Discussion"}),u.jsx(fa,{comments:e.comments||[],onAddComment:i})]})]})},u4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0);return T.useEffect(()=>{(async()=>{i(!0);const c=await DI();e(c),i(!1)})()},[]),n?u.jsx(on,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Masterclasses"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Take a deep dive with exclusive, in-depth courses from top-tier artists and producers."}),u.jsx("div",{className:"space-y-8",children:r.map(o=>u.jsx(c4,{masterclass:o},o.id))})]})},h4=({pack:r})=>{var p;const[e,n]=T.useState(r),[i,o]=T.useState(!1),c=e.price===0,d=async g=>{try{const y=await EI(e.id,g);n(x=>({...x,comments:[...x.comments||[],y]}))}catch(y){console.error("Failed to add comment:",y)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:e.coverArtUrl,alt:`${e.title} cover art`,className:"w-full h-48 object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:u.jsx(me,{name:"play",className:"h-8 w-8 text-white"})})}),u.jsx("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full border ${c?"bg-green-500/20 text-green-300 border-green-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`,children:c?"Free":`$${e.price.toFixed(2)}`})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-white truncate",children:e.title}),u.jsxs(Lt,{to:`/profile/${e.creator.id}`,className:"text-sm text-gray-400 hover:text-white hover:underline",children:["by ",e.creator.name]}),u.jsx("div",{className:"flex-grow mt-2",children:u.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(g=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:g},g))})}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 space-y-3",children:[u.jsxs("button",{className:"w-full bg-brand-accent text-white px-4 py-2 rounded-full text-sm font-semibold hover:bg-brand-accent-hover transition-colors flex items-center justify-center gap-2",children:[u.jsx(me,{name:"download",className:"w-4 h-4"}),u.jsx("span",{children:c?"Download":"Purchase"})]}),u.jsxs("button",{onClick:()=>o(!i),className:"w-full bg-gray-700 text-gray-300 px-4 py-2 rounded-full text-sm font-semibold hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",children:[u.jsx(me,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:[((p=e.comments)==null?void 0:p.length)||0," Comments"]})]})]})]}),i&&u.jsx("div",{className:"p-4 border-t border-gray-700",children:u.jsx(fa,{comments:e.comments||[],onAddComment:d})})]})},d4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0);return T.useEffect(()=>{(async()=>{i(!0);const c=await OI();e(c),i(!1)})()},[]),n?u.jsx(on,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sample Packs"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Find the perfect sound for your next track. High-quality, royalty-free samples from the community."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:r.map(o=>u.jsx(h4,{pack:o},o.id))})]})},f4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!1),[o,c]=T.useState(null),[d,p]=T.useState(null),g=jh(),y=se=>{try{const ue=new DOMParser().parseFromString(se,"application/xml");if(ue.querySelector("parsererror"))throw new Error("Failed to parse XML file. Please ensure it's a valid Rekordbox XML.");const N=ue.querySelectorAll("COLLECTION > TRACK");if(N.length===0)throw new Error("No tracks found in the <COLLECTION> tag. Please check your XML file structure.");const R=Array.from(N).map(j=>({trackId:j.getAttribute("TrackID")||"",title:j.getAttribute("Name")||"N/A",artist:j.getAttribute("Artist")||"N/A",album:j.getAttribute("Album")||"N/A",genre:j.getAttribute("Genre")||"N/A",totalTime:j.getAttribute("TotalTime")||"N/A",dateAdded:j.getAttribute("DateAdded")||"N/A",comments:j.getAttribute("Comments")||"",playCount:j.getAttribute("PlayCount")||"0",key:j.getAttribute("Tonality")||"N/A"}));g("/profile/user_1",{state:{collection:R}})}catch(le){c(le.message||"An unknown error occurred during parsing."),e([])}finally{i(!1)}},x=T.useCallback(se=>{if(se.length===0)return;const le=se[0];if(le.type!=="text/xml"){c("Invalid file type. Please upload a Rekordbox XML file.");return}i(!0),c(null),e([]),p(le.name);const ue=new FileReader;ue.onabort=()=>{c("File reading was aborted."),i(!1)},ue.onerror=()=>{c("File reading has failed."),i(!1)},ue.onload=()=>{const I=ue.result;y(I)},ue.readAsText(le)},[]),[w,A]=T.useState(!1),D=Qn.useRef(null),V=se=>{se.preventDefault(),se.stopPropagation(),A(!0)},H=se=>{se.preventDefault(),se.stopPropagation(),A(!1)},z=se=>{se.preventDefault(),se.stopPropagation()},Y=se=>{se.preventDefault(),se.stopPropagation(),A(!1),se.dataTransfer.files&&se.dataTransfer.files.length>0&&(x(Array.from(se.dataTransfer.files)),se.dataTransfer.clearData())},te=se=>{se.target.files&&se.target.files.length>0&&x(Array.from(se.target.files))},J=()=>{var se;(se=D.current)==null||se.click()};return u.jsxs("div",{className:"max-w-7xl mx-auto text-white",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Import Rekordbox Collection"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Upload your Rekordbox XML file to view and manage your music library."}),u.jsxs("div",{role:"button",tabIndex:0,"aria-label":"Upload Rekordbox XML file",className:`bg-gray-800 p-8 rounded-lg shadow-lg border-2 border-dashed ${w?"border-brand-accent":"border-gray-600"} transition-colors duration-300 text-center cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-accent`,onDragEnter:V,onDragLeave:H,onDragOver:z,onDrop:Y,onClick:J,onKeyDown:se=>(se.key==="Enter"||se.key===" ")&&J(),children:[u.jsx("input",{ref:D,type:"file",accept:".xml,text/xml",onChange:te,className:"hidden"}),u.jsx(me,{name:"upload",className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),u.jsx("h2",{className:"text-xl font-semibold",children:n?"Processing...":d?`File: ${d}`:"Drop your Rekordbox XML here or click to browse"}),u.jsx("p",{className:"text-gray-500 mt-1",children:"Export your collection from Rekordbox as an XML file."})]}),n&&u.jsx(on,{}),o&&u.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative my-6",role:"alert",children:[u.jsx("strong",{className:"font-bold",children:"Error:"}),u.jsxs("span",{className:"block sm:inline",children:[" ",o]})]}),r.length>0&&!n&&u.jsxs("div",{className:"mt-8 text-center",children:[u.jsxs("h2",{className:"text-xl font-semibold text-green-400",children:["Successfully processed ",r.length," tracks."]}),u.jsx("p",{className:"text-gray-400",children:"Redirecting you to your profile..."})]})]})},m4=({label:r})=>u.jsxs(Lt,{to:`/labels/${r.id}`,className:"group block bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:scale-105",children:[u.jsxs("div",{className:"relative h-40",children:[u.jsx("img",{src:r.bannerUrl,alt:`${r.name} banner`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-800 via-gray-800/50 to-transparent"})]}),u.jsxs("div",{className:"p-4 -mt-16 relative flex items-center space-x-4",children:[u.jsx("img",{src:r.logoUrl,alt:`${r.name} logo`,className:"w-20 h-20 rounded-full object-cover border-4 border-gray-800 group-hover:border-gray-700 transition-colors"}),u.jsx("div",{children:u.jsx("h3",{className:"font-bold text-xl text-white",children:r.name})})]})]}),p4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0);return T.useEffect(()=>{(async()=>{i(!0);const c=await mI();e(c),i(!1)})()},[]),n?u.jsx(on,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Record Labels"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Discover the labels shaping the sound of the community."}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:(r||[]).length>0?r.map(o=>u.jsx(m4,{label:o},o.id)):u.jsx("div",{className:"col-span-full text-center py-12",children:u.jsx("p",{className:"text-gray-400 text-lg",children:"No labels found. Check back later!"})})})]})},g4=({event:r})=>{const e=new Date(r.date),n=e.toLocaleString("default",{month:"short"}).toUpperCase(),i=e.getDate();return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 flex flex-col sm:flex-row items-start gap-6 transition-colors hover:bg-gray-700/50",children:[u.jsxs("div",{className:"flex-shrink-0 text-center bg-gray-700 rounded-md p-3 w-full sm:w-20",children:[u.jsx("p",{className:"text-sm font-bold text-brand-accent",children:n}),u.jsx("p",{className:"text-3xl font-bold text-white",children:i})]}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:r.title}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mt-1",children:[u.jsx(me,{name:"map-pin",className:"w-4 h-4"}),u.jsx("span",{children:r.location})]}),u.jsx("p",{className:"text-gray-300 mt-2",children:r.description})]}),r.ticketUrl&&u.jsx("div",{className:"self-center sm:self-auto",children:u.jsx("a",{href:r.ticketUrl,target:"_blank",rel:"noopener noreferrer",children:u.jsx(ze,{children:"Buy Tickets"})})})]})},y4=({track:r,onViewComments:e})=>{var g;const n=T.useContext(Co);if(!n)throw new Error("FeaturedReleaseCard must be used within an AudioProvider");const{playTrack:i,currentTrack:o,isPlaying:c}=n,d=(o==null?void 0:o.id)===r.id&&c,p=()=>{i(r)};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col md:flex-row",children:[u.jsx("div",{className:"md:w-1/3 flex-shrink-0",children:u.jsx("img",{src:r.coverArtUrl,alt:r.title,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"p-8 flex flex-col justify-center",children:[u.jsx("h3",{className:"text-3xl lg:text-4xl font-bold text-white",children:r.title}),u.jsxs("p",{className:"text-xl text-gray-400 mt-1 mb-4",children:["by ",r.artistName]}),u.jsx("p",{className:"text-gray-300 max-w-prose mb-6",children:r.description}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(ze,{onClick:p,size:"md",children:[u.jsx(me,{name:d?"pause":"play",className:"w-5 h-5 mr-2"}),d?"Pause":"Play"]}),u.jsx(ze,{variant:"secondary",children:"View Release"}),e&&u.jsxs("button",{onClick:()=>e(r),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[u.jsx(me,{name:"comment",className:"w-5 h-5"}),u.jsx("span",{className:"font-semibold",children:((g=r.comments)==null?void 0:g.length)||0})]})]})]})]})},v4=({artist:r,tracks:e,onViewMore:n})=>u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col md:flex-row items-center p-6 gap-6",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("img",{src:r.avatarUrl,alt:r.name,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-700"})}),u.jsxs("div",{className:"flex-grow w-full",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-white",children:r.name}),u.jsx("p",{className:"text-gray-400 mt-1 max-w-md line-clamp-2",children:r.bio})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0 mt-2 sm:mt-0",children:[u.jsx(ze,{onClick:n,variant:"secondary",size:"sm",children:"View More"}),u.jsx(Lt,{to:`/profile/${r.id}`,children:u.jsx(ze,{variant:"secondary",size:"sm",children:"Profile"})})]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[u.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Latest on this label:"}),e.length>0?u.jsx("div",{className:"space-y-2",children:e.map(i=>u.jsxs("div",{className:"flex items-center justify-between bg-gray-700/50 p-2 rounded-md",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(me,{name:"music-note",className:"w-4 h-4 text-brand-accent"}),u.jsx("span",{className:"text-white text-sm",children:i.title})]}),u.jsx("span",{className:"text-xs text-gray-400",children:i.category})]},i.id))}):u.jsx("p",{className:"text-sm text-gray-500",children:"No tracks found on this label."})]})]})]}),_4=({artist:r,onClose:e})=>{var n;return u.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:e,children:u.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col overflow-hidden relative",onClick:i=>i.stopPropagation(),children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-20 bg-gray-900/50 p-2 rounded-full",children:u.jsx(me,{name:"x",className:"w-6 h-6"})}),u.jsxs("div",{className:"relative h-64 w-full flex-shrink-0",children:[u.jsx("img",{src:((n=r.gallery)==null?void 0:n[0])||r.avatarUrl,alt:`${r.name}`,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-800 to-transparent flex items-end p-8",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("img",{src:r.avatarUrl,alt:r.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-800"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-300",children:"In Conversation with"}),u.jsx("h1",{className:"text-4xl font-bold text-white",children:r.name})]})]})})]}),u.jsx("div",{className:"flex-grow overflow-y-auto p-8",children:u.jsxs("div",{className:"prose prose-invert prose-lg max-w-none",children:[u.jsx("p",{className:"lead text-xl text-gray-300",children:r.bio}),r.interview&&r.interview.length>0&&u.jsx("div",{className:"mt-12",children:r.interview.map((i,o)=>u.jsxs("div",{className:"mb-8",children:[u.jsx("h3",{className:"text-brand-accent font-semibold",children:i.question}),u.jsx("p",{children:i.answer})]},o))}),r.gallery&&r.gallery.length>1&&u.jsxs("div",{className:"mt-12",children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Gallery"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:r.gallery.map((i,o)=>u.jsx("img",{src:i,alt:`Artist gallery image ${o+1}`,className:"w-full h-40 object-cover rounded-lg shadow-md"},o))})]})]})})]})})},x4=({opportunity:r,labelId:e})=>{var y,x;const[n,i]=T.useState(r),[o,c]=T.useState(!1),p={Artist:{icon:"music-note",color:"text-blue-400"},Vocalist:{icon:"microphone",color:"text-purple-400"},Designer:{icon:"palette",color:"text-yellow-400"},Collaborator:{icon:"users",color:"text-green-400"}}[n.type]||{icon:"sparkles",color:"text-gray-400"},g=async w=>{try{const A=await TI(e,n.id,w);i(D=>({...D,comments:[...D.comments||[],A]}))}catch(A){console.error("Failed to add comment:",A)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 transition-colors hover:bg-gray-700/50",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[u.jsx("div",{className:"flex-shrink-0 bg-gray-700 p-4 rounded-full",children:u.jsx(me,{name:p.icon,className:`w-8 h-8 ${p.color}`})}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("span",{className:`text-sm font-bold uppercase tracking-wider ${p.color}`,children:n.type}),u.jsx("h3",{className:"text-xl font-bold text-white mt-1",children:n.title}),u.jsx("p",{className:"text-gray-300 mt-2",children:n.description})]}),u.jsx("div",{className:"self-center sm:self-auto flex-shrink-0",children:u.jsx(ze,{onClick:()=>alert("Application form coming soon!"),children:"Apply Now"})})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[u.jsxs("button",{onClick:()=>c(w=>!w),className:"text-sm font-semibold text-gray-400 hover:text-white flex items-center gap-2",children:[u.jsx(me,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:[o?"Hide":"View"," ",((y=n.comments)==null?void 0:y.length)||0," Comment",((x=n.comments)==null?void 0:x.length)!==1&&"s"]})]}),o&&u.jsx("div",{className:"mt-4",children:u.jsx(fa,{comments:n.comments||[],onAddComment:g})})]})]})},Z_=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(""),[o,c]=T.useState([]),d=T.useRef(null),p={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};T.useEffect(()=>{Hw().then(c)},[]),T.useEffect(()=>{if(o.length===0)return;const y=Kw(),x=o.filter(A=>A.id!==p.id);x.length>0&&e([{id:`msg_label_${Date.now()}`,user:x[0],text:"This label is legendary!",timestamp:new Date(Date.now()-5e3).toISOString()}]);const w=setInterval(()=>{if(document.hidden)return;const A=x[Math.floor(Math.random()*x.length)],D=y[Math.floor(Math.random()*y.length)],V={id:`msg_label_${Date.now()}`,user:A,text:D,timestamp:new Date().toISOString()};e(H=>[...H,V].slice(-20))},1e4);return()=>clearInterval(w)},[o]),T.useEffect(()=>{var y;(y=d.current)==null||y.scrollIntoView({behavior:"smooth"})},[r]);const g=y=>{if(y.preventDefault(),!n.trim())return;const x={id:`msg_label_${Date.now()}`,user:p,text:n,timestamp:new Date().toISOString()};e(w=>[...w,x]),i("")};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[400px]",children:[u.jsx("h3",{className:"text-xl font-bold text-white p-4 border-b border-gray-700",children:"Community Chat"}),u.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[r.map(y=>u.jsxs("div",{className:`flex items-start gap-3 ${y.user.id===p.id?"flex-row-reverse":""}`,children:[u.jsx("img",{src:y.user.avatarUrl,alt:y.user.name,className:"w-8 h-8 rounded-full object-cover"}),u.jsxs("div",{className:`p-3 rounded-lg max-w-sm shadow ${y.user.id===p.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[u.jsx("p",{className:"font-bold text-sm mb-1",children:y.user.name}),u.jsx("p",{className:"text-sm",children:y.text})]})]},y.id)),u.jsx("div",{ref:d})]})}),u.jsx("div",{className:"p-4 bg-gray-700/50 border-t border-gray-700",children:u.jsxs("form",{onSubmit:g,className:"flex gap-3 items-center",children:[u.jsx("input",{type:"text",value:n,onChange:y=>i(y.target.value),placeholder:"Join the conversation...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-2 hover:bg-brand-accent-hover disabled:bg-gray-500 transition-colors",disabled:!n.trim(),children:u.jsx(me,{name:"send",className:"w-5 h-5"})})]})})]})},b4=()=>{const[r,e]=T.useState(""),[n,i]=T.useState(!1),[o,c]=T.useState(!1),d=p=>{p.preventDefault(),r&&(i(!0),setTimeout(()=>{i(!1),c(!0)},1e3))};return o?u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 text-center",children:[u.jsx("div",{className:"bg-green-500/20 text-green-300 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:u.jsx(me,{name:"thumbs-up",className:"w-8 h-8"})}),u.jsx("h3",{className:"text-xl font-bold text-white",children:"You're Subscribed!"}),u.jsx("p",{className:"text-gray-400 mt-2",children:"Thanks for joining our mailing list. Keep an eye on your inbox for exclusive content."})]}):u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Join the Mailing List"}),u.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"Get exclusive downloads, event news, and special offers directly in your inbox."}),u.jsxs("form",{onSubmit:d,className:"space-y-3",children:[u.jsx("input",{type:"email",value:r,onChange:p=>e(p.target.value),placeholder:"Enter your email",required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white"}),u.jsx(ze,{type:"submit",isLoading:n,className:"w-full",children:"Subscribe"})]})]})},w4=()=>{var Se;const{labelId:r}=ux(),[e,n]=T.useState(null),[i,o]=T.useState([]),[c,d]=T.useState([]),[p,g]=T.useState([]),[y,x]=T.useState([]),[w,A]=T.useState(!0),[D,V]=T.useState("releases"),[H,z]=T.useState(!1),[Y,te]=T.useState(null),[J,se]=T.useState(null),[le,ue]=T.useState(null);T.useEffect(()=>{(async()=>{if(r){A(!0);try{const[O,W,de,xe,Ie]=await Promise.all([pI(r),gI(r),yI(r),vI(r),_I(r)]);n(O||null),o(W),d(de),g(xe),x(Ie),O!=null&&O.theme&&te(O.theme)}catch(O){console.error("Failed to fetch label data:",O)}finally{A(!1)}}})()},[r]);const I=()=>{if(!e)return;z(!0);const pe=[{bannerUrl:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=1200",primaryColor:"#8B5CF6",secondaryColor:"#EC4899"},{bannerUrl:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=1200",primaryColor:"#3B82F6",secondaryColor:"#10B981"},{bannerUrl:"https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1200",primaryColor:"#F59E0B",secondaryColor:"#EF4444"}],O=pe[Math.floor(Math.random()*pe.length)];te(O),z(!1)},N=async pe=>{if(le)try{const O=await gc(le.id,pe),W={...le,comments:[...le.comments||[],O]};ue(W),o(de=>de.map(xe=>xe.id===W.id?W:xe))}catch(O){console.error("Failed to add comment to track:",O)}},R=async pe=>{if(e)try{const O=await xI(e.id,pe);n(W=>W?{...W,comments:[...W.comments||[],O]}:null)}catch(O){console.error("Failed to add comment to label:",O)}},j=e!=null&&e.featuredReleaseId?i.find(pe=>pe.id===e.featuredReleaseId):null,L=e!=null&&e.featuredReleaseId?i.filter(pe=>pe.id!==e.featuredReleaseId):i,k=()=>{var pe;switch(D){case"releases":return u.jsxs("div",{children:[j&&u.jsxs("div",{className:"mb-12",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-wider",children:"Featured Release"}),u.jsx(y4,{track:j,onViewComments:ue})]}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-wider",children:"All Releases"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:L.map(O=>u.jsx(Zh,{track:O,onViewComments:ue},O.id))})]});case"artists":return u.jsx("div",{className:"space-y-8",children:c.map(O=>u.jsx(v4,{artist:O,tracks:i.filter(W=>W.artistId===O.id).slice(0,3),onViewMore:()=>se(O)},O.id))});case"about":return u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Our Story"}),u.jsx("p",{className:"text-gray-300 whitespace-pre-line leading-relaxed",children:e==null?void 0:e.bio})]}),u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Community Feedback"}),u.jsx(fa,{comments:(e==null?void 0:e.comments)||[],onAddComment:R})]}),(e==null?void 0:e.eventPhotos)&&e.eventPhotos.length>0&&u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Event Photos"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:e.eventPhotos.map((O,W)=>u.jsx("img",{src:O,alt:`Label event photo ${W+1}`,className:"w-full h-40 object-cover rounded-md shadow-lg"},W))})]})]}),u.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[u.jsx(b4,{}),(e==null?void 0:e.storeLinks)&&u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Stores"}),u.jsx("div",{className:"space-y-3",children:e.storeLinks.map(O=>u.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 p-4 rounded-lg flex items-center gap-4 hover:bg-gray-600 transition-colors",children:[u.jsx(me,{name:O.icon,className:"w-6 h-6 text-brand-accent"}),u.jsx("span",{className:"font-bold text-white",children:O.name})]},O.name))})]})]})]});case"posts":return u.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:p.map(O=>u.jsx(Jp,{post:O},O.id))});case"events":return u.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:y.map(O=>u.jsx(g4,{event:O},O.id))});case"opportunities":return u.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:(pe=e==null?void 0:e.opportunities)==null?void 0:pe.map(O=>u.jsx(x4,{opportunity:O,labelId:e.id},O.id))});case"chat":return u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsx(Z_,{})});default:return null}},C=({tab:pe,label:O,count:W})=>u.jsxs("button",{onClick:()=>V(pe),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors border-b-2 whitespace-nowrap ${D===pe?"text-white border-brand-accent bg-gray-700/50":"text-gray-400 border-transparent hover:text-white hover:border-gray-500"}`,children:[O,typeof W<"u"&&W>0&&u.jsx("span",{className:"text-xs bg-gray-600 rounded-full px-2 py-0.5 ml-1",children:W})]});return w?u.jsx(on,{}):e?u.jsxs("div",{children:[le&&u.jsx(ma,{isOpen:!!le,onClose:()=>ue(null),title:`Comments for ${le.title}`,comments:le.comments||[],onAddComment:N}),J&&u.jsx(_4,{artist:J,onClose:()=>se(null)}),u.jsxs("div",{className:"relative h-48 md:h-64 bg-gray-800 rounded-lg overflow-hidden mb-[-80px]",children:[u.jsx("img",{src:(Y==null?void 0:Y.bannerUrl)||e.bannerUrl,alt:`${e.name} banner`,className:"w-full h-full object-cover opacity-40 transition-all duration-500"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"})]}),u.jsx("div",{className:"relative px-8",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6",children:[u.jsx("img",{src:e.logoUrl,alt:`${e.name} logo`,className:"w-40 h-40 rounded-full object-cover border-4 border-gray-900 flex-shrink-0"}),u.jsx("div",{className:"flex-grow text-center md:text-left",children:u.jsx("h1",{className:"text-4xl font-bold text-white",children:e.name})}),u.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[u.jsx(ze,{onClick:()=>alert("Contact form coming soon!"),variant:"secondary",children:"Contact"}),u.jsx(ze,{onClick:I,variant:"secondary",children:"Change Theme"}),u.jsx(ze,{children:"Follow Label"})]})]})}),u.jsx("div",{className:"my-8 max-w-5xl mx-auto",children:u.jsx(Z_,{})}),u.jsx("div",{className:"mt-8 border-b border-gray-700 mb-6",children:u.jsxs("nav",{className:"-mb-px flex space-x-4 overflow-x-auto",children:[u.jsx(C,{tab:"releases",label:"Releases",count:i.length}),u.jsx(C,{tab:"artists",label:"Artists",count:c.length}),u.jsx(C,{tab:"about",label:"About"}),u.jsx(C,{tab:"events",label:"Events",count:y.length}),u.jsx(C,{tab:"opportunities",label:"Opportunities",count:(Se=e.opportunities)==null?void 0:Se.length}),u.jsx(C,{tab:"chat",label:"Live Chat"}),u.jsx(C,{tab:"posts",label:"Posts",count:p.length})]})}),u.jsx("div",{children:k()})]}):u.jsx("div",{className:"text-center text-white",children:"Label not found."})},E4=({onPostCreated:r})=>{const[e,n]=T.useState(!1),[i,o]=T.useState(""),[c,d]=T.useState(""),[p,g]=T.useState("followers"),y=async x=>{if(x.preventDefault(),!i.trim()||!c.trim())return;n(!0);const w={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100"};try{const A=await $w({title:i,content:c,audience:p,...w});r(A),o(""),d(""),g("followers")}catch(A){console.error("Failed to add post:",A)}finally{n(!1)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-2xl h-full",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Make a Broadcast"}),u.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Create a post to share with your audience. This will appear in their community feed."}),u.jsxs("form",{onSubmit:y,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"broadcast-title",className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),u.jsx("input",{id:"broadcast-title",type:"text",placeholder:"e.g. New Track Out Sunday!",value:i,onChange:x=>o(x.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"broadcast-content",className:"block text-sm font-medium text-gray-400 mb-1",children:"Message"}),u.jsx("textarea",{id:"broadcast-content",placeholder:"Share some details with your fans...",value:c,onChange:x=>d(x.target.value),required:!0,rows:5,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"broadcast-audience",className:"block text-sm font-medium text-gray-400 mb-1",children:"Audience"}),u.jsxs("select",{id:"broadcast-audience",value:p,onChange:x=>g(x.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white",children:[u.jsx("option",{value:"followers",children:"All Followers"}),u.jsx("option",{value:"subscribers",children:"Paid Subscribers"}),u.jsx("option",{value:"public",children:"Public"})]})]}),u.jsx("div",{className:"flex justify-end pt-2",children:u.jsxs(ze,{type:"submit",isLoading:e,children:[u.jsx(me,{name:"send",className:"w-4 h-4 mr-2"}),"Broadcast Post"]})})]})]})},T4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(null),[o,c]=T.useState(!0),[d,p]=T.useState(""),g=T.useRef(null),y="user_1";T.useEffect(()=>{(async()=>{c(!0);const H=await RI(y);e(H),H.length>0&&i(H[0]),c(!1)})()},[]),T.useEffect(()=>{var V;(V=g.current)==null||V.scrollIntoView({behavior:"smooth"})},[n,n==null?void 0:n.messages.length]);const x=V=>{if(V.preventDefault(),!d.trim()||!n)return;const H={id:`msg_${Date.now()}`,senderId:y,text:d,timestamp:new Date().toISOString()},z={...n,messages:[...n.messages,H]};i(z),e(Y=>Y.map(te=>te.id===z.id?z:te)),p("")},w=V=>{alert(`Broadcast sent to ${V.audience}! Title: ${V.title}`)},A=V=>{const H=new Date(V),z=Math.floor((new Date().getTime()-H.getTime())/1e3);if(z<60)return"Just now";let Y=z/31536e3;return Y>1?Math.floor(Y)+"y":(Y=z/2592e3,Y>1?Math.floor(Y)+"mo":(Y=z/86400,Y>1?Math.floor(Y)+"d":(Y=z/3600,Y>1?Math.floor(Y)+"h":(Y=z/60,Y>1?Math.floor(Y)+"m":"Just now"))))};if(o)return u.jsx(on,{});const D=n==null?void 0:n.participants.find(V=>V.id!==y);return u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsxs("div",{className:"flex h-[calc(100vh-200px)] bg-gray-800 rounded-lg shadow-2xl overflow-hidden",children:[u.jsxs("aside",{className:"w-1/3 xl:w-1/4 bg-gray-800 border-r border-gray-700 flex flex-col",children:[u.jsx("div",{className:"p-4 border-b border-gray-700",children:u.jsx("h1",{className:"text-xl font-bold text-white",children:"Direct Messages"})}),u.jsx("div",{className:"flex-grow overflow-y-auto",children:r.map(V=>{const H=V.participants.find(te=>te.id!==y),z=V.messages[V.messages.length-1],Y=(n==null?void 0:n.id)===V.id;return u.jsxs("button",{onClick:()=>i(V),className:`w-full text-left p-4 flex items-center gap-4 transition-colors ${Y?"bg-gray-700":"hover:bg-gray-700/50"}`,children:[u.jsxs("div",{className:"relative flex-shrink-0",children:[u.jsx("img",{src:H.avatarUrl,alt:H.name,className:"w-12 h-12 rounded-full object-cover"}),V.unreadCount>0&&u.jsx("span",{className:"absolute top-0 right-0 block h-3 w-3 rounded-full bg-brand-accent ring-2 ring-gray-800"})]}),u.jsxs("div",{className:"flex-grow overflow-hidden",children:[u.jsxs("div",{className:"flex justify-between items-baseline",children:[u.jsx("h3",{className:`font-semibold truncate ${V.unreadCount>0?"text-white":"text-gray-300"}`,children:H.name}),u.jsx("p",{className:"text-xs text-gray-500",children:A(z.timestamp)})]}),u.jsxs("p",{className:`text-sm truncate ${V.unreadCount>0?"text-gray-300":"text-gray-400"}`,children:[z.senderId===y&&"You: ",z.text]})]})]},V.id)})})]}),u.jsx("main",{className:"flex-1 flex flex-col",children:!n||!D?u.jsx("div",{className:"flex-grow flex items-center justify-center text-gray-500",children:u.jsx("p",{children:"Select a conversation to start chatting."})}):u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"p-4 border-b border-gray-700 flex items-center gap-4 bg-gray-800 z-10",children:[u.jsx("img",{src:D.avatarUrl,alt:D.name,className:"w-10 h-10 rounded-full object-cover"}),u.jsx("h2",{className:"text-lg font-bold text-white",children:D.name})]}),u.jsx("div",{className:"flex-grow p-6 overflow-y-auto",children:u.jsxs("div",{className:"space-y-6",children:[n.messages.map(V=>u.jsxs("div",{className:`flex items-end gap-3 ${V.senderId===y?"flex-row-reverse":""}`,children:[V.senderId!==y&&u.jsx("img",{src:D.avatarUrl,alt:D.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),u.jsx("div",{className:`p-3 rounded-2xl max-w-lg shadow ${V.senderId===y?"bg-brand-accent text-white rounded-br-none":"bg-gray-700 text-gray-300 rounded-bl-none"}`,children:u.jsx("p",{className:"text-sm",children:V.text})})]},V.id)),u.jsx("div",{ref:g})]})}),u.jsx("footer",{className:"p-4 bg-gray-800 border-t border-gray-700",children:u.jsxs("form",{onSubmit:x,className:"flex items-center gap-3",children:[u.jsx("input",{type:"text",value:d,onChange:V=>p(V.target.value),placeholder:`Message ${D.name}...`,className:"flex-grow bg-gray-700 border-gray-600 rounded-full py-2 px-4 text-sm text-white focus:ring-brand-accent focus:border-brand-accent"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-3 hover:bg-brand-accent-hover disabled:bg-gray-600",disabled:!d.trim(),children:u.jsx(me,{name:"send",className:"w-5 h-5"})})]})})]})})]})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsx(E4,{onPostCreated:w})})]})},S4=({onComplete:r,currentUserId:e,currentUserEmail:n})=>{const[i,o]=T.useState(1),[c,d]=T.useState(!1),[p,g]=T.useState(""),[y,x]=T.useState(""),[w,A]=T.useState(""),[D,V]=T.useState(""),[H,z]=T.useState(""),[Y,te]=T.useState(!1),[J,se]=T.useState(""),[le,ue]=T.useState(null),[I,N]=T.useState(""),[R,j]=T.useState(["Electronic","Hip Hop","Pop","Rock","Jazz","Classical","R&B","Soul","Country","Reggae","Latin","Indie","Alternative","Metal","Punk","Folk","Blues","Funk","Disco","House","Techno","Trance","Dubstep","Drum & Bass","Trap","Lo-Fi","Ambient","Experimental","World","Gospel","K-Pop","J-Pop","Afrobeat","Dancehall","Garage","Grime","Hardstyle","Progressive","Psychedelic","Synthwave","Vaporwave","Chillwave"]),[L,k]=T.useState(""),[C,Se]=T.useState(""),[pe,O]=T.useState(""),[W,de]=T.useState(""),xe=re=>{var be;const fe=(be=re.target.files)==null?void 0:be[0];if(fe){ue(fe);const Fe=new FileReader;Fe.onloadend=()=>{N(Fe.result)},Fe.readAsDataURL(fe)}},Ie=re=>{const fe=re.target.value;fe==="custom"?(te(!0),V("")):(te(!1),V(fe),z(""))},P=()=>{if(H.trim().length>0){const re=H.trim();R.includes(re)||j([...R,re].sort()),V(re),z(""),te(!1)}},ee=async()=>{console.log(" Starting profile creation..."),d(!0),g("");try{console.log(" Profile data:",{artistName:y,bio:w.substring(0,50),genre:D,location:J,hasAvatar:!!le});let re="https://picsum.photos/id/1015/200/200";console.log(le?" Avatar upload skipped (CORS issue) - using default avatar":" Using default avatar");const fe={id:e,name:y,bio:w,genre:D,location:J,avatarUrl:re,spotifyUrl:L||void 0,soundcloudUrl:C||void 0,instagramUrl:pe||void 0,twitterUrl:W||void 0,followers:0,following:0,isVerified:!1};console.log(" Saving profile to Firestore...");const be=await Fw(fe);console.log(" Profile created successfully:",be.id),console.log(" Calling onComplete..."),r(be)}catch(re){console.error(" Error creating artist profile:",re),g(re.message||"Failed to create profile. Please try again.")}finally{d(!1),console.log(" Profile creation process complete")}},F=y.trim().length>=2,ce=w.trim().length>=10&&D.trim().length>0;return u.jsx("div",{className:"fixed inset-0 bg-gray-900/95 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-8 text-center",children:[u.jsx(me,{name:"music-note",className:"w-16 h-16 mx-auto mb-4 text-white"}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome to SoundWave!"}),u.jsx("p",{className:"text-white/90",children:"Let's create your artist profile"})]}),u.jsxs("div",{className:"flex justify-center items-center gap-4 p-6 border-b border-gray-700",children:[u.jsxs("div",{className:`flex items-center gap-2 ${i>=1?"text-purple-500":"text-gray-500"}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i>=1?"bg-purple-500 text-white":"bg-gray-700"}`,children:"1"}),u.jsx("span",{className:"font-medium hidden sm:inline",children:"Basic Info"})]}),u.jsx("div",{className:"w-12 h-0.5 bg-gray-700"}),u.jsxs("div",{className:`flex items-center gap-2 ${i>=2?"text-purple-500":"text-gray-500"}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i>=2?"bg-purple-500 text-white":"bg-gray-700"}`,children:"2"}),u.jsx("span",{className:"font-medium hidden sm:inline",children:"About You"})]}),u.jsx("div",{className:"w-12 h-0.5 bg-gray-700"}),u.jsxs("div",{className:`flex items-center gap-2 ${i>=3?"text-purple-500":"text-gray-500"}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i>=3?"bg-purple-500 text-white":"bg-gray-700"}`,children:"3"}),u.jsx("span",{className:"font-medium hidden sm:inline",children:"Social Links"})]})]}),u.jsxs("div",{className:"p-8",children:[p&&u.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500",children:p}),i===1&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Artist Name *"}),u.jsx("input",{type:"text",value:y,onChange:re=>x(re.target.value),placeholder:"Enter your artist name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",maxLength:50}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This is how you'll appear on SoundWave"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Picture"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-700 overflow-hidden flex items-center justify-center",children:I?u.jsx("img",{src:I,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx(me,{name:"user",className:"w-12 h-12 text-gray-500"})}),u.jsxs("label",{className:"cursor-pointer",children:[u.jsx("div",{className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors",children:"Choose Image"}),u.jsx("input",{type:"file",accept:"image/*",onChange:xe,className:"hidden"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location"}),u.jsx("input",{type:"text",value:J,onChange:re=>se(re.target.value),placeholder:"e.g., Los Angeles, CA",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),i===2&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio *"}),u.jsx("textarea",{value:w,onChange:re=>A(re.target.value),placeholder:"Tell us about your music and journey...",rows:5,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none",maxLength:500}),u.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[w.length,"/500 characters"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Primary Genre *"}),u.jsxs("select",{value:Y?"custom":D,onChange:Ie,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[u.jsx("option",{value:"",children:"Select a genre"}),R.map(re=>u.jsx("option",{value:re,children:re},re)),u.jsx("option",{value:"custom",children:" Add Custom Genre"})]}),Y&&u.jsxs("div",{className:"mt-3 flex gap-2",children:[u.jsx("input",{type:"text",value:H,onChange:re=>z(re.target.value),onKeyPress:re=>re.key==="Enter"&&P(),placeholder:"Enter your genre (e.g., Future Bass)",className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",maxLength:30}),u.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Add"})]}),D&&!Y&&u.jsxs("p",{className:"text-xs text-green-400 mt-2",children:[" Selected: ",D]})]})]}),i===3&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("p",{className:"text-gray-400 text-sm",children:"Connect your social profiles (optional)"}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(me,{name:"spotify",className:"w-4 h-4 inline mr-2"}),"Spotify"]}),u.jsx("input",{type:"url",value:L,onChange:re=>k(re.target.value),placeholder:"https://open.spotify.com/artist/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(me,{name:"soundcloud",className:"w-4 h-4 inline mr-2"}),"SoundCloud"]}),u.jsx("input",{type:"url",value:C,onChange:re=>Se(re.target.value),placeholder:"https://soundcloud.com/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(me,{name:"instagram",className:"w-4 h-4 inline mr-2"}),"Instagram"]}),u.jsx("input",{type:"url",value:pe,onChange:re=>O(re.target.value),placeholder:"https://instagram.com/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(me,{name:"twitter",className:"w-4 h-4 inline mr-2"}),"Twitter/X"]}),u.jsx("input",{type:"url",value:W,onChange:re=>de(re.target.value),placeholder:"https://twitter.com/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]})]}),u.jsxs("div",{className:"p-6 border-t border-gray-700 flex justify-between",children:[i>1&&u.jsx(ze,{onClick:()=>o(i-1),variant:"secondary",disabled:c,children:"Back"}),u.jsx("div",{className:"ml-auto",children:i<3?u.jsx(ze,{onClick:()=>o(i+1),disabled:i===1?!F:!ce,children:"Next"}):u.jsx(ze,{onClick:ee,disabled:c||!F||!ce,children:c?"Creating Profile...":"Complete Setup"})})]})]})})},A4=Xw;function N4(){console.log(" App component rendering...");const[r,e]=T.useState(null),[n,i]=T.useState(null),[o,c]=T.useState(!0),[d,p]=T.useState(!1);return T.useEffect(()=>{console.log(" Setting up auth listener...");try{const g=Zx(bo,async y=>{if(console.log(" Auth state changed:",y?"User logged in":"No user"),e(y),y)try{console.log(" Checking for SoundWave profile...");const x=await Wh(y.uid);x?(console.log(" SoundWave profile found:",x),i(x),p(!1)):(console.log(" No SoundWave profile - showing onboarding"),p(!0))}catch(x){console.error(" Error checking profile:",x),p(!0)}c(!1),console.log(" Loading complete")});return()=>g()}catch(g){console.error(" Error setting up auth:",g),c(!1)}},[]),o?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:u.jsx("div",{className:"text-white text-xl",children:"Loading SoundWave..."})}):r&&d?u.jsx(S4,{currentUserId:r.uid,currentUserEmail:r.email||"",onComplete:g=>{console.log(" Onboarding complete:",g),i(g),p(!1)}}):r?u.jsx(YS,{children:u.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-900",children:[u.jsx(LI,{}),u.jsx("main",{className:"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8 mb-24",children:u.jsxs(SS,{children:[u.jsx($t,{path:"/",element:u.jsx($I,{})}),u.jsx($t,{path:"/library",element:u.jsx(e4,{})}),u.jsx($t,{path:"/community",element:u.jsx(JI,{})}),u.jsx($t,{path:"/playlists",element:u.jsx(t4,{})}),u.jsx($t,{path:"/labels",element:u.jsx(p4,{})}),u.jsx($t,{path:"/labels/:labelId",element:u.jsx(w4,{})}),u.jsx($t,{path:"/artist-hub",element:u.jsx(r4,{})}),u.jsx($t,{path:"/live-streams",element:u.jsx(a4,{})}),u.jsx($t,{path:"/tutorials",element:u.jsx(l4,{})}),u.jsx($t,{path:"/masterclass",element:u.jsx(u4,{})}),u.jsx($t,{path:"/samples",element:u.jsx(d4,{})}),u.jsx($t,{path:"/profile/:userId",element:u.jsx(WI,{})}),u.jsx($t,{path:"/settings/profile",element:u.jsx(A4,{})}),u.jsx($t,{path:"/upload",element:u.jsx(Xw,{})}),u.jsx($t,{path:"/import-collection",element:u.jsx(f4,{})}),u.jsx($t,{path:"/inbox",element:u.jsx(T4,{})})]})}),u.jsx(VI,{}),u.jsx(zI,{}),u.jsx(ZI,{})]})}):u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Authentication Required"}),u.jsx("p",{className:"mb-6",children:"Please sign in through the portal to access SoundWave."}),u.jsx("button",{onClick:()=>window.location.href="/Sites/soundwave/index.html",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg",children:"Go to SoundWave Gateway"})]})})}console.log(" SoundWave index.tsx loading...");const Zp=document.getElementById("root");console.log(" Root element:",Zp);if(!Zp)throw console.error(" Could not find root element!"),new Error("Could not find root element to mount to");console.log(" Root element found, creating React root...");const R4=kT.createRoot(Zp);console.log(" Rendering App...");R4.render(u.jsx(Qn.StrictMode,{children:u.jsx(UI,{children:u.jsx(N4,{})})}));console.log(" React render called");
