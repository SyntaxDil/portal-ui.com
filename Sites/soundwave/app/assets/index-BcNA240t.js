(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function xx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bm={exports:{}},tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function bb(){if(g0)return tu;g0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:t,type:i,key:u,ref:o!==void 0?o:null,props:a}}return tu.Fragment=e,tu.jsx=n,tu.jsxs=n,tu}var y0;function Ib(){return y0||(y0=1,Bm.exports=bb()),Bm.exports}var y=Ib(),Gm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function Rb(){if(v0)return Ne;v0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function C(G){return G===null||typeof G!="object"?null:(G=S&&G[S]||G["@@iterator"],typeof G=="function"?G:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,U={};function z(G,se,W){this.props=G,this.context=se,this.refs=U,this.updater=W||M}z.prototype.isReactComponent={},z.prototype.setState=function(G,se){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,se,"setState")},z.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function J(){}J.prototype=z.prototype;function j(G,se,W){this.props=G,this.context=se,this.refs=U,this.updater=W||M}var Y=j.prototype=new J;Y.constructor=j,V(Y,z.prototype),Y.isPureReactComponent=!0;var ie=Array.isArray;function oe(){}var P={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(G,se,W){var de=W.ref;return{$$typeof:t,type:G,key:se,ref:de!==void 0?de:null,props:W}}function k(G,se){return R(G.type,se,G.props)}function q(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function B(G){var se={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(W){return se[W]})}var L=/\/+/g;function je(G,se){return typeof G=="object"&&G!==null&&G.key!=null?B(""+G.key):se.toString(36)}function ye(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(oe,oe):(G.status="pending",G.then(function(se){G.status==="pending"&&(G.status="fulfilled",G.value=se)},function(se){G.status==="pending"&&(G.status="rejected",G.reason=se)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function O(G,se,W,de,me){var ve=typeof G;(ve==="undefined"||ve==="boolean")&&(G=null);var be=!1;if(G===null)be=!0;else switch(ve){case"bigint":case"string":case"number":be=!0;break;case"object":switch(G.$$typeof){case t:case e:be=!0;break;case _:return be=G._init,O(be(G._payload),se,W,de,me)}}if(be)return me=me(G),be=de===""?"."+je(G,0):de,ie(me)?(W="",be!=null&&(W=be.replace(L,"$&/")+"/"),O(me,se,W,"",function(mn){return mn})):me!=null&&(q(me)&&(me=k(me,W+(me.key==null||G&&G.key===me.key?"":(""+me.key).replace(L,"$&/")+"/")+be)),se.push(me)),1;be=0;var et=de===""?".":de+":";if(ie(G))for(var tt=0;tt<G.length;tt++)de=G[tt],ve=et+je(de,tt),be+=O(de,se,W,ve,me);else if(tt=C(G),typeof tt=="function")for(G=tt.call(G),tt=0;!(de=G.next()).done;)de=de.value,ve=et+je(de,tt++),be+=O(de,se,W,ve,me);else if(ve==="object"){if(typeof G.then=="function")return O(ye(G),se,W,de,me);throw se=String(G),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return be}function te(G,se,W){if(G==null)return G;var de=[],me=0;return O(G,de,"","",function(ve){return se.call(W,ve,me++)}),de}function fe(G){if(G._status===-1){var se=G._result;se=se(),se.then(function(W){(G._status===0||G._status===-1)&&(G._status=1,G._result=W)},function(W){(G._status===0||G._status===-1)&&(G._status=2,G._result=W)}),G._status===-1&&(G._status=0,G._result=se)}if(G._status===1)return G._result.default;throw G._result}var Se=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},ke={map:te,forEach:function(G,se,W){te(G,function(){se.apply(this,arguments)},W)},count:function(G){var se=0;return te(G,function(){se++}),se},toArray:function(G){return te(G,function(se){return se})||[]},only:function(G){if(!q(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return Ne.Activity=E,Ne.Children=ke,Ne.Component=z,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=j,Ne.StrictMode=i,Ne.Suspense=f,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(G){return P.H.useMemoCache(G)}},Ne.cache=function(G){return function(){return G.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(G,se,W){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var de=V({},G.props),me=G.key;if(se!=null)for(ve in se.key!==void 0&&(me=""+se.key),se)!N.call(se,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&se.ref===void 0||(de[ve]=se[ve]);var ve=arguments.length-2;if(ve===1)de.children=W;else if(1<ve){for(var be=Array(ve),et=0;et<ve;et++)be[et]=arguments[et+2];de.children=be}return R(G.type,me,de)},Ne.createContext=function(G){return G={$$typeof:u,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},Ne.createElement=function(G,se,W){var de,me={},ve=null;if(se!=null)for(de in se.key!==void 0&&(ve=""+se.key),se)N.call(se,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(me[de]=se[de]);var be=arguments.length-2;if(be===1)me.children=W;else if(1<be){for(var et=Array(be),tt=0;tt<be;tt++)et[tt]=arguments[tt+2];me.children=et}if(G&&G.defaultProps)for(de in be=G.defaultProps,be)me[de]===void 0&&(me[de]=be[de]);return R(G,ve,me)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(G){return{$$typeof:d,render:G}},Ne.isValidElement=q,Ne.lazy=function(G){return{$$typeof:_,_payload:{_status:-1,_result:G},_init:fe}},Ne.memo=function(G,se){return{$$typeof:h,type:G,compare:se===void 0?null:se}},Ne.startTransition=function(G){var se=P.T,W={};P.T=W;try{var de=G(),me=P.S;me!==null&&me(W,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(oe,Se)}catch(ve){Se(ve)}finally{se!==null&&W.types!==null&&(se.types=W.types),P.T=se}},Ne.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Ne.use=function(G){return P.H.use(G)},Ne.useActionState=function(G,se,W){return P.H.useActionState(G,se,W)},Ne.useCallback=function(G,se){return P.H.useCallback(G,se)},Ne.useContext=function(G){return P.H.useContext(G)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(G,se){return P.H.useDeferredValue(G,se)},Ne.useEffect=function(G,se){return P.H.useEffect(G,se)},Ne.useEffectEvent=function(G){return P.H.useEffectEvent(G)},Ne.useId=function(){return P.H.useId()},Ne.useImperativeHandle=function(G,se,W){return P.H.useImperativeHandle(G,se,W)},Ne.useInsertionEffect=function(G,se){return P.H.useInsertionEffect(G,se)},Ne.useLayoutEffect=function(G,se){return P.H.useLayoutEffect(G,se)},Ne.useMemo=function(G,se){return P.H.useMemo(G,se)},Ne.useOptimistic=function(G,se){return P.H.useOptimistic(G,se)},Ne.useReducer=function(G,se,W){return P.H.useReducer(G,se,W)},Ne.useRef=function(G){return P.H.useRef(G)},Ne.useState=function(G){return P.H.useState(G)},Ne.useSyncExternalStore=function(G,se,W){return P.H.useSyncExternalStore(G,se,W)},Ne.useTransition=function(){return P.H.useTransition()},Ne.version="19.2.0",Ne}var _0;function qp(){return _0||(_0=1,Gm.exports=Rb()),Gm.exports}var D=qp();const ui=xx(D);var Hm={exports:{}},nu={},zm={exports:{}},jm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function Nb(){return T0||(T0=1,(function(t){function e(O,te){var fe=O.length;O.push(te);e:for(;0<fe;){var Se=fe-1>>>1,ke=O[Se];if(0<o(ke,te))O[Se]=te,O[fe]=ke,fe=Se;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var te=O[0],fe=O.pop();if(fe!==te){O[0]=fe;e:for(var Se=0,ke=O.length,G=ke>>>1;Se<G;){var se=2*(Se+1)-1,W=O[se],de=se+1,me=O[de];if(0>o(W,fe))de<ke&&0>o(me,W)?(O[Se]=me,O[de]=fe,Se=de):(O[Se]=W,O[se]=fe,Se=se);else if(de<ke&&0>o(me,fe))O[Se]=me,O[de]=fe,Se=de;else break e}}return te}function o(O,te){var fe=O.sortIndex-te.sortIndex;return fe!==0?fe:O.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var f=[],h=[],_=1,E=null,S=3,C=!1,M=!1,V=!1,U=!1,z=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function Y(O){for(var te=n(h);te!==null;){if(te.callback===null)i(h);else if(te.startTime<=O)i(h),te.sortIndex=te.expirationTime,e(f,te);else break;te=n(h)}}function ie(O){if(V=!1,Y(O),!M)if(n(f)!==null)M=!0,oe||(oe=!0,B());else{var te=n(h);te!==null&&ye(ie,te.startTime-O)}}var oe=!1,P=-1,N=5,R=-1;function k(){return U?!0:!(t.unstable_now()-R<N)}function q(){if(U=!1,oe){var O=t.unstable_now();R=O;var te=!0;try{e:{M=!1,V&&(V=!1,J(P),P=-1),C=!0;var fe=S;try{t:{for(Y(O),E=n(f);E!==null&&!(E.expirationTime>O&&k());){var Se=E.callback;if(typeof Se=="function"){E.callback=null,S=E.priorityLevel;var ke=Se(E.expirationTime<=O);if(O=t.unstable_now(),typeof ke=="function"){E.callback=ke,Y(O),te=!0;break t}E===n(f)&&i(f),Y(O)}else i(f);E=n(f)}if(E!==null)te=!0;else{var G=n(h);G!==null&&ye(ie,G.startTime-O),te=!1}}break e}finally{E=null,S=fe,C=!1}te=void 0}}finally{te?B():oe=!1}}}var B;if(typeof j=="function")B=function(){j(q)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,je=L.port2;L.port1.onmessage=q,B=function(){je.postMessage(null)}}else B=function(){z(q,0)};function ye(O,te){P=z(function(){O(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(O){switch(S){case 1:case 2:case 3:var te=3;break;default:te=S}var fe=S;S=te;try{return O()}finally{S=fe}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(O,te){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var fe=S;S=O;try{return te()}finally{S=fe}},t.unstable_scheduleCallback=function(O,te,fe){var Se=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Se+fe:Se):fe=Se,O){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=fe+ke,O={id:_++,callback:te,priorityLevel:O,startTime:fe,expirationTime:ke,sortIndex:-1},fe>Se?(O.sortIndex=fe,e(h,O),n(f)===null&&O===n(h)&&(V?(J(P),P=-1):V=!0,ye(ie,fe-Se))):(O.sortIndex=ke,e(f,O),M||C||(M=!0,oe||(oe=!0,B()))),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var te=S;return function(){var fe=S;S=te;try{return O.apply(this,arguments)}finally{S=fe}}}})(jm)),jm}var E0;function Mb(){return E0||(E0=1,zm.exports=Nb()),zm.exports}var $m={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function Db(){if(x0)return on;x0=1;var t=qp();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(f,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:f,containerInfo:h,implementation:_}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(f,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,_)},on.flushSync=function(f){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=h,i.p=_,i.d.f()}},on.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},on.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},on.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:C}):_==="script"&&i.d.X(f,{crossOrigin:E,integrity:S,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},on.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},on.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin);i.d.L(f,_,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},on.preloadModule=function(f,h){if(typeof f=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},on.requestFormReset=function(f){i.d.r(f)},on.unstable_batchedUpdates=function(f,h){return f(h)},on.useFormState=function(f,h,_){return u.H.useFormState(f,h,_)},on.useFormStatus=function(){return u.H.useHostTransitionStatus()},on.version="19.2.0",on}var S0;function Pb(){if(S0)return $m.exports;S0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$m.exports=Db(),$m.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0;function kb(){if(w0)return nu;w0=1;var t=Mb(),e=qp(),n=Pb();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var v=l.return;if(v===null)break;var T=v.alternate;if(T===null){if(c=v.return,c!==null){l=c;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===l)return f(v),s;if(T===c)return f(v),r;T=T.sibling}throw Error(i(188))}if(l.return!==c.return)l=v,c=T;else{for(var w=!1,b=v.child;b;){if(b===l){w=!0,l=v,c=T;break}if(b===c){w=!0,c=v,l=T;break}b=b.sibling}if(!w){for(b=T.child;b;){if(b===l){w=!0,l=T,c=v;break}if(b===c){w=!0,c=T,l=v;break}b=b.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function _(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=_(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),j=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=q&&s[q]||s["@@iterator"],typeof s=="function"?s:null)}var L=Symbol.for("react.client.reference");function je(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===L?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case V:return"Fragment";case z:return"Profiler";case U:return"StrictMode";case ie:return"Suspense";case oe:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case M:return"Portal";case j:return s.displayName||"Context";case J:return(s._context.displayName||"Context")+".Consumer";case Y:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case P:return r=s.displayName||null,r!==null?r:je(s.type)||"Memo";case N:r=s._payload,s=s._init;try{return je(s(r))}catch{}}return null}var ye=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Se=[],ke=-1;function G(s){return{current:s}}function se(s){0>ke||(s.current=Se[ke],Se[ke]=null,ke--)}function W(s,r){ke++,Se[ke]=s.current,s.current=r}var de=G(null),me=G(null),ve=G(null),be=G(null);function et(s,r){switch(W(ve,r),W(me,s),W(de,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?F_(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=F_(r),s=q_(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}se(de),W(de,s)}function tt(){se(de),se(me),se(ve)}function mn(s){s.memoizedState!==null&&W(be,s);var r=de.current,l=q_(r,s.type);r!==l&&(W(me,s),W(de,l))}function xn(s){me.current===s&&(se(de),se(me)),be.current===s&&(se(be),Ql._currentValue=fe)}var pi,Po;function ni(s){if(pi===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);pi=r&&r[1]||"",Po=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pi+s+Po}var Or=!1;function ko(s,r){if(!s||Or)return"";Or=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var Z=ee}Reflect.construct(s,[],le)}else{try{le.call()}catch(ee){Z=ee}s.call(le.prototype)}}else{try{throw Error()}catch(ee){Z=ee}(le=s())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&Z&&typeof ee.stack=="string")return[ee.stack,Z.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=c.DetermineComponentFrameRoot(),w=T[0],b=T[1];if(w&&b){var F=w.split(`
`),X=b.split(`
`);for(v=c=0;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;for(;v<X.length&&!X[v].includes("DetermineComponentFrameRoot");)v++;if(c===F.length||v===X.length)for(c=F.length-1,v=X.length-1;1<=c&&0<=v&&F[c]!==X[v];)v--;for(;1<=c&&0<=v;c--,v--)if(F[c]!==X[v]){if(c!==1||v!==1)do if(c--,v--,0>v||F[c]!==X[v]){var re=`
`+F[c].replace(" at new "," at ");return s.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",s.displayName)),re}while(1<=c&&0<=v);break}}}finally{Or=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?ni(l):""}function Of(s,r){switch(s.tag){case 26:case 27:case 5:return ni(s.type);case 16:return ni("Lazy");case 13:return s.child!==r&&r!==null?ni("Suspense Fallback"):ni("Suspense");case 19:return ni("SuspenseList");case 0:case 15:return ko(s.type,!1);case 11:return ko(s.type.render,!1);case 1:return ko(s.type,!0);case 31:return ni("Activity");default:return""}}function Gu(s){try{var r="",l=null;do r+=Of(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Uo=Object.prototype.hasOwnProperty,Fr=t.unstable_scheduleCallback,Lo=t.unstable_cancelCallback,Ff=t.unstable_shouldYield,el=t.unstable_requestPaint,zt=t.unstable_now,Hu=t.unstable_getCurrentPriorityLevel,Ut=t.unstable_ImmediatePriority,Ot=t.unstable_UserBlockingPriority,Bi=t.unstable_NormalPriority,zu=t.unstable_LowPriority,tl=t.unstable_IdlePriority,qf=t.log,qr=t.unstable_setDisableYieldValue,Ds=null,sn=null;function Gn(s){if(typeof qf=="function"&&qr(s),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(Ds,s)}catch{}}var pn=Math.clz32?Math.clz32:ju,Bf=Math.log,nl=Math.LN2;function ju(s){return s>>>=0,s===0?32:31-(Bf(s)/nl|0)|0}var Br=256,gi=262144,Ps=4194304;function ii(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Hn(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var v=0,T=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var b=c&134217727;return b!==0?(c=b&~T,c!==0?v=ii(c):(w&=b,w!==0?v=ii(w):l||(l=b&~s,l!==0&&(v=ii(l))))):(b=c&~T,b!==0?v=ii(b):w!==0?v=ii(w):l||(l=c&~s,l!==0&&(v=ii(l)))),v===0?0:r!==0&&r!==v&&(r&T)===0&&(T=v&-v,l=r&-r,T>=l||T===32&&(l&4194048)!==0)?r:v}function ks(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Vo(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function il(){var s=Ps;return Ps<<=1,(Ps&62914560)===0&&(Ps=4194304),s}function Gi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Us(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function jt(s,r,l,c,v,T){var w=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var b=s.entanglements,F=s.expirationTimes,X=s.hiddenUpdates;for(l=w&~l;0<l;){var re=31-pn(l),le=1<<re;b[re]=0,F[re]=-1;var Z=X[re];if(Z!==null)for(X[re]=null,re=0;re<Z.length;re++){var ee=Z[re];ee!==null&&(ee.lane&=-536870913)}l&=~le}c!==0&&sl(s,c,0),T!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=T&~(w&~r))}function sl(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-pn(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Ls(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-pn(l),v=1<<c;v&r|s[c]&r&&(s[c]|=r),l&=~v}}function Vs(s,r){var l=r&-r;return l=(l&42)!==0?1:rl(l),(l&(s.suspendedLanes|r))!==0?0:l}function rl(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ol(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Hi(){var s=te.p;return s!==0?s:(s=window.event,s===void 0?32:u0(s.type))}function $u(s,r){var l=te.p;try{return te.p=s,r()}finally{te.p=l}}var yi=Math.random().toString(36).slice(2),_t="__reactFiber$"+yi,$t="__reactProps$"+yi,vi="__reactContainer$"+yi,Os="__reactEvents$"+yi,_i="__reactListeners$"+yi,Yu="__reactHandles$"+yi,al="__reactResources$"+yi,zi="__reactMarker$"+yi;function Gr(s){delete s[_t],delete s[$t],delete s[Os],delete s[_i],delete s[Yu]}function ji(s){var r=s[_t];if(r)return r;for(var l=s.parentNode;l;){if(r=l[vi]||l[_t]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Y_(s);s!==null;){if(l=s[_t])return l;s=Y_(s)}return r}s=l,l=s.parentNode}return null}function $i(s){if(s=s[_t]||s[vi]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Hr(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function si(s){var r=s[al];return r||(r=s[al]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function St(s){s[zi]=!0}var Oo=new Set,Fs={};function gn(s,r){Ti(s,r),Ti(s+"Capture",r)}function Ti(s,r){for(Fs[s]=r,s=0;s<r.length;s++)Oo.add(r[s])}var Gf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ll={},ul={};function Ju(s){return Uo.call(ul,s)?!0:Uo.call(ll,s)?!1:Gf.test(s)?ul[s]=!0:(ll[s]=!0,!1)}function qs(s,r,l){if(Ju(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Bs(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function zn(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function yn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ku(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Hf(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,T=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return v.call(this)},set:function(w){l=""+w,T.call(this,w)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Fo(s){if(!s._valueTracker){var r=Ku(s)?"checked":"value";s._valueTracker=Hf(s,r,""+s[r])}}function cl(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Ku(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function qo(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Yi=/[\n"\\]/g;function Tt(s){return s.replace(Yi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Gs(s,r,l,c,v,T,w,b){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),r!=null?w==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+yn(r)):s.value!==""+yn(r)&&(s.value=""+yn(r)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),r!=null?Bo(s,w,yn(r)):l!=null?Bo(s,w,yn(l)):c!=null&&s.removeAttribute("value"),v==null&&T!=null&&(s.defaultChecked=!!T),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.name=""+yn(b):s.removeAttribute("name")}function zr(s,r,l,c,v,T,w,b){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),r!=null||l!=null){if(!(T!=="submit"&&T!=="reset"||r!=null)){Fo(s);return}l=l!=null?""+yn(l):"",r=r!=null?""+yn(r):l,b||r===s.value||(s.value=r),s.defaultValue=r}c=c??v,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=b?s.checked:!!c,s.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),Fo(s)}function Bo(s,r,l){r==="number"&&qo(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function $e(s,r,l,c){if(s=s.options,r){r={};for(var v=0;v<l.length;v++)r["$"+l[v]]=!0;for(l=0;l<s.length;l++)v=r.hasOwnProperty("$"+s[l].value),s[l].selected!==v&&(s[l].selected=v),v&&c&&(s[l].defaultSelected=!0)}else{for(l=""+yn(l),r=null,v=0;v<s.length;v++){if(s[v].value===l){s[v].selected=!0,c&&(s[v].defaultSelected=!0);return}r!==null||s[v].disabled||(r=s[v])}r!==null&&(r.selected=!0)}}function jr(s,r,l){if(r!=null&&(r=""+yn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+yn(l):""}function Hs(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(ye(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=yn(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Fo(s)}function jn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var zf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||zf.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Wu(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var v in r)c=r[v],r.hasOwnProperty(v)&&l[v]!==c&&dl(s,v,c)}else for(var T in r)r.hasOwnProperty(T)&&dl(s,T,r[T])}function fl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$f=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ei(s){return $f.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ft(){}var Go=null;function Ho(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ji=null,Dn=null;function Qu(s){var r=$i(s);if(r&&(s=r.stateNode)){var l=s[$t]||null;e:switch(s=r.stateNode,r.type){case"input":if(Gs(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Tt(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var v=c[$t]||null;if(!v)throw Error(i(90));Gs(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&cl(c)}break e;case"textarea":jr(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&$e(s,!!l.multiple,r,!1)}}}var hl=!1;function Xu(s,r,l){if(hl)return s(r,l);hl=!0;try{var c=s(r);return c}finally{if(hl=!1,(Ji!==null||Dn!==null)&&(Jc(),Ji&&(r=Ji,s=Dn,Dn=Ji=null,Qu(r),s)))for(r=0;r<s.length;r++)Qu(s[r])}}function Sn(s,r){var l=s.stateNode;if(l===null)return null;var c=l[$t]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ml=!1;if(ri)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){ml=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{ml=!1}var Pn=null,zo=null,Si=null;function zs(){if(Si)return Si;var s,r=zo,l=r.length,c,v="value"in Pn?Pn.value:Pn.textContent,T=v.length;for(s=0;s<l&&r[s]===v[s];s++);var w=l-s;for(c=1;c<=w&&r[l-c]===v[T-c];c++);return Si=v.slice(s,1<c?1-c:void 0)}function $r(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function js(){return!0}function ct(){return!1}function rn(s){function r(l,c,v,T,w){this._reactName=l,this._targetInst=v,this.type=c,this.nativeEvent=T,this.target=w,this.currentTarget=null;for(var b in s)s.hasOwnProperty(b)&&(l=s[b],this[b]=l?l(T):T[b]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?js:ct,this.isPropagationStopped=ct,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),r}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yr=rn(Ki),$s=E({},Ki,{view:0,detail:0}),Zu=rn($s),Ys,jo,vn,Jr=E({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ks,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vn&&(vn&&s.type==="mousemove"?(Ys=s.screenX-vn.screenX,jo=s.screenY-vn.screenY):jo=Ys=0,vn=s),Ys)},movementY:function(s){return"movementY"in s?s.movementY:jo}}),ec=rn(Jr),Kr=E({},Jr,{dataTransfer:0}),tc=rn(Kr),pl=E({},$s,{relatedTarget:0}),Js=rn(pl),nc=E({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),$o=rn(nc),Yf=E({},Ki,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ic=rn(Yf),Wr=E({},Ki,{data:0}),gl=rn(Wr),sc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=vl[s])?!!r[s]:!1}function Ks(){return rc}var oc=E({},$s,{key:function(s){if(s.key){var r=sc[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=$r(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?yl[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ks,charCode:function(s){return s.type==="keypress"?$r(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?$r(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ac=rn(oc),Wi=E({},Jr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_l=rn(Wi),lc=E({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ks}),uc=rn(lc),cc=E({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yo=rn(cc),_n=E({},Jr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),dc=rn(_n),fc=E({},Ki,{newState:0,oldState:0}),Ws=rn(fc),p=[9,13,27,32],x=ri&&"CompositionEvent"in window,A=null;ri&&"documentMode"in document&&(A=document.documentMode);var I=ri&&"TextEvent"in window&&!A,K=ri&&(!x||A&&8<A&&11>=A),ne=" ",he=!1;function Ze(s,r){switch(s){case"keyup":return p.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Le=!1;function qt(s,r){switch(s){case"compositionend":return bt(r);case"keypress":return r.which!==32?null:(he=!0,ne);case"textInput":return s=r.data,s===ne&&he?null:s;default:return null}}function Bt(s,r){if(Le)return s==="compositionend"||!x&&Ze(s,r)?(s=zs(),Si=zo=Pn=null,Le=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return K&&r.locale!=="ko"?null:r.data;default:return null}}var Qs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wn(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Qs[s.type]:r==="textarea"}function Qr(s,r,l,c){Ji?Dn?Dn.push(c):Dn=[c]:Ji=c,r=td(r,"onChange"),0<r.length&&(l=new Yr("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var Qi=null,Tl=null;function eC(s){P_(s,0)}function hc(s){var r=Hr(s);if(cl(r))return s}function Xg(s,r){if(s==="change")return r}var Zg=!1;if(ri){var Jf;if(ri){var Kf="oninput"in document;if(!Kf){var ey=document.createElement("div");ey.setAttribute("oninput","return;"),Kf=typeof ey.oninput=="function"}Jf=Kf}else Jf=!1;Zg=Jf&&(!document.documentMode||9<document.documentMode)}function ty(){Qi&&(Qi.detachEvent("onpropertychange",ny),Tl=Qi=null)}function ny(s){if(s.propertyName==="value"&&hc(Tl)){var r=[];Qr(r,Tl,s,Ho(s)),Xu(eC,r)}}function tC(s,r,l){s==="focusin"?(ty(),Qi=r,Tl=l,Qi.attachEvent("onpropertychange",ny)):s==="focusout"&&ty()}function nC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return hc(Tl)}function iC(s,r){if(s==="click")return hc(r)}function sC(s,r){if(s==="input"||s==="change")return hc(r)}function rC(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var kn=typeof Object.is=="function"?Object.is:rC;function El(s,r){if(kn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var v=l[c];if(!Uo.call(r,v)||!kn(s[v],r[v]))return!1}return!0}function iy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function sy(s,r){var l=iy(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=iy(l)}}function ry(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?ry(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function oy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=qo(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=qo(s.document)}return r}function Wf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var oC=ri&&"documentMode"in document&&11>=document.documentMode,Jo=null,Qf=null,xl=null,Xf=!1;function ay(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Xf||Jo==null||Jo!==qo(c)||(c=Jo,"selectionStart"in c&&Wf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),xl&&El(xl,c)||(xl=c,c=td(Qf,"onSelect"),0<c.length&&(r=new Yr("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Jo)))}function Xr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Ko={animationend:Xr("Animation","AnimationEnd"),animationiteration:Xr("Animation","AnimationIteration"),animationstart:Xr("Animation","AnimationStart"),transitionrun:Xr("Transition","TransitionRun"),transitionstart:Xr("Transition","TransitionStart"),transitioncancel:Xr("Transition","TransitionCancel"),transitionend:Xr("Transition","TransitionEnd")},Zf={},ly={};ri&&(ly=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function Zr(s){if(Zf[s])return Zf[s];if(!Ko[s])return s;var r=Ko[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in ly)return Zf[s]=r[l];return s}var uy=Zr("animationend"),cy=Zr("animationiteration"),dy=Zr("animationstart"),aC=Zr("transitionrun"),lC=Zr("transitionstart"),uC=Zr("transitioncancel"),fy=Zr("transitionend"),hy=new Map,eh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eh.push("scrollEnd");function oi(s,r){hy.set(s,r),gn(r,[s])}var mc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},$n=[],Wo=0,th=0;function pc(){for(var s=Wo,r=th=Wo=0;r<s;){var l=$n[r];$n[r++]=null;var c=$n[r];$n[r++]=null;var v=$n[r];$n[r++]=null;var T=$n[r];if($n[r++]=null,c!==null&&v!==null){var w=c.pending;w===null?v.next=v:(v.next=w.next,w.next=v),c.pending=v}T!==0&&my(l,v,T)}}function gc(s,r,l,c){$n[Wo++]=s,$n[Wo++]=r,$n[Wo++]=l,$n[Wo++]=c,th|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function nh(s,r,l,c){return gc(s,r,l,c),yc(s)}function eo(s,r){return gc(s,null,null,r),yc(s)}function my(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var v=!1,T=s.return;T!==null;)T.childLanes|=l,c=T.alternate,c!==null&&(c.childLanes|=l),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(v=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,v&&r!==null&&(v=31-pn(l),s=T.hiddenUpdates,c=s[v],c===null?s[v]=[r]:c.push(r),r.lane=l|536870912),T):null}function yc(s){if(50<zl)throw zl=0,dm=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Qo={};function cC(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(s,r,l,c){return new cC(s,r,l,c)}function ih(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Xi(s,r){var l=s.alternate;return l===null?(l=Un(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function py(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function vc(s,r,l,c,v,T){var w=0;if(c=s,typeof s=="function")ih(s)&&(w=1);else if(typeof s=="string")w=pb(s,l,de.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=Un(31,l,r,v),s.elementType=R,s.lanes=T,s;case V:return to(l.children,v,T,r);case U:w=8,v|=24;break;case z:return s=Un(12,l,r,v|2),s.elementType=z,s.lanes=T,s;case ie:return s=Un(13,l,r,v),s.elementType=ie,s.lanes=T,s;case oe:return s=Un(19,l,r,v),s.elementType=oe,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:w=10;break e;case J:w=9;break e;case Y:w=11;break e;case P:w=14;break e;case N:w=16,c=null;break e}w=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Un(w,l,r,v),r.elementType=s,r.type=c,r.lanes=T,r}function to(s,r,l,c){return s=Un(7,s,c,r),s.lanes=l,s}function sh(s,r,l){return s=Un(6,s,null,r),s.lanes=l,s}function gy(s){var r=Un(18,null,null,0);return r.stateNode=s,r}function rh(s,r,l){return r=Un(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var yy=new WeakMap;function Yn(s,r){if(typeof s=="object"&&s!==null){var l=yy.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Gu(r)},yy.set(s,r),r)}return{value:s,source:r,stack:Gu(r)}}var Xo=[],Zo=0,_c=null,Sl=0,Jn=[],Kn=0,Xs=null,wi=1,Ai="";function Zi(s,r){Xo[Zo++]=Sl,Xo[Zo++]=_c,_c=s,Sl=r}function vy(s,r,l){Jn[Kn++]=wi,Jn[Kn++]=Ai,Jn[Kn++]=Xs,Xs=s;var c=wi;s=Ai;var v=32-pn(c)-1;c&=~(1<<v),l+=1;var T=32-pn(r)+v;if(30<T){var w=v-v%5;T=(c&(1<<w)-1).toString(32),c>>=w,v-=w,wi=1<<32-pn(r)+v|l<<v|c,Ai=T+s}else wi=1<<T|l<<v|c,Ai=s}function oh(s){s.return!==null&&(Zi(s,1),vy(s,1,0))}function ah(s){for(;s===_c;)_c=Xo[--Zo],Xo[Zo]=null,Sl=Xo[--Zo],Xo[Zo]=null;for(;s===Xs;)Xs=Jn[--Kn],Jn[Kn]=null,Ai=Jn[--Kn],Jn[Kn]=null,wi=Jn[--Kn],Jn[Kn]=null}function _y(s,r){Jn[Kn++]=wi,Jn[Kn++]=Ai,Jn[Kn++]=Xs,wi=r.id,Ai=r.overflow,Xs=s}var Yt=null,dt=null,Ge=!1,Zs=null,Wn=!1,lh=Error(i(519));function er(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wl(Yn(r,s)),lh}function Ty(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[_t]=s,r[$t]=c,l){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(l=0;l<$l.length;l++)Oe($l[l],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),zr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Hs(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||V_(r.textContent,l)?(c.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),c.onScroll!=null&&Oe("scroll",r),c.onScrollEnd!=null&&Oe("scrollend",r),c.onClick!=null&&(r.onclick=Ft),r=!0):r=!1,r||er(s,!0)}function Ey(s){for(Yt=s.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:Yt=Yt.return}}function ea(s){if(s!==Yt)return!1;if(!Ge)return Ey(s),Ge=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Cm(s.type,s.memoizedProps)),l=!l),l&&dt&&er(s),Ey(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));dt=$_(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));dt=$_(s)}else r===27?(r=dt,mr(s.type)?(s=Mm,Mm=null,dt=s):dt=r):dt=Yt?Xn(s.stateNode.nextSibling):null;return!0}function no(){dt=Yt=null,Ge=!1}function uh(){var s=Zs;return s!==null&&(In===null?In=s:In.push.apply(In,s),Zs=null),s}function wl(s){Zs===null?Zs=[s]:Zs.push(s)}var ch=G(null),io=null,es=null;function tr(s,r,l){W(ch,r._currentValue),r._currentValue=l}function ts(s){s._currentValue=ch.current,se(ch)}function dh(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function fh(s,r,l,c){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var T=v.dependencies;if(T!==null){var w=v.child;T=T.firstContext;e:for(;T!==null;){var b=T;T=v;for(var F=0;F<r.length;F++)if(b.context===r[F]){T.lanes|=l,b=T.alternate,b!==null&&(b.lanes|=l),dh(T.return,l,s),c||(w=null);break e}T=b.next}}else if(v.tag===18){if(w=v.return,w===null)throw Error(i(341));w.lanes|=l,T=w.alternate,T!==null&&(T.lanes|=l),dh(w,l,s),w=null}else w=v.child;if(w!==null)w.return=v;else for(w=v;w!==null;){if(w===s){w=null;break}if(v=w.sibling,v!==null){v.return=w.return,w=v;break}w=w.return}v=w}}function ta(s,r,l,c){s=null;for(var v=r,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var w=v.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var b=v.type;kn(v.pendingProps.value,w.value)||(s!==null?s.push(b):s=[b])}}else if(v===be.current){if(w=v.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Ql):s=[Ql])}v=v.return}s!==null&&fh(r,s,l,c),r.flags|=262144}function Tc(s){for(s=s.firstContext;s!==null;){if(!kn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function so(s){io=s,es=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Jt(s){return xy(io,s)}function Ec(s,r){return io===null&&so(s),xy(s,r)}function xy(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},es===null){if(s===null)throw Error(i(308));es=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else es=es.next=r;return l}var dC=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},fC=t.unstable_scheduleCallback,hC=t.unstable_NormalPriority,It={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hh(){return{controller:new dC,data:new Map,refCount:0}}function Al(s){s.refCount--,s.refCount===0&&fC(hC,function(){s.controller.abort()})}var Cl=null,mh=0,na=0,ia=null;function mC(s,r){if(Cl===null){var l=Cl=[];mh=0,na=ym(),ia={status:"pending",value:void 0,then:function(c){l.push(c)}}}return mh++,r.then(Sy,Sy),r}function Sy(){if(--mh===0&&Cl!==null){ia!==null&&(ia.status="fulfilled");var s=Cl;Cl=null,na=0,ia=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function pC(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var v=0;v<l.length;v++)(0,l[v])(r)},function(v){for(c.status="rejected",c.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),c}var wy=O.S;O.S=function(s,r){a_=zt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&mC(s,r),wy!==null&&wy(s,r)};var ro=G(null);function ph(){var s=ro.current;return s!==null?s:lt.pooledCache}function xc(s,r){r===null?W(ro,ro.current):W(ro,r.pool)}function Ay(){var s=ph();return s===null?null:{parent:It._currentValue,pool:s}}var sa=Error(i(460)),gh=Error(i(474)),Sc=Error(i(542)),wc={then:function(){}};function Cy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function by(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Ft,Ft),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Ry(s),s;default:if(typeof r.status=="string")r.then(Ft,Ft);else{if(s=lt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=c}},function(c){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Ry(s),s}throw ao=r,sa}}function oo(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ao=l,sa):l}}var ao=null;function Iy(){if(ao===null)throw Error(i(459));var s=ao;return ao=null,s}function Ry(s){if(s===sa||s===Sc)throw Error(i(483))}var ra=null,bl=0;function Ac(s){var r=bl;return bl+=1,ra===null&&(ra=[]),by(ra,s,r)}function Il(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Cc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Ny(s){function r($,H){if(s){var Q=$.deletions;Q===null?($.deletions=[H],$.flags|=16):Q.push(H)}}function l($,H){if(!s)return null;for(;H!==null;)r($,H),H=H.sibling;return null}function c($){for(var H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function v($,H){return $=Xi($,H),$.index=0,$.sibling=null,$}function T($,H,Q){return $.index=Q,s?(Q=$.alternate,Q!==null?(Q=Q.index,Q<H?($.flags|=67108866,H):Q):($.flags|=67108866,H)):($.flags|=1048576,H)}function w($){return s&&$.alternate===null&&($.flags|=67108866),$}function b($,H,Q,ae){return H===null||H.tag!==6?(H=sh(Q,$.mode,ae),H.return=$,H):(H=v(H,Q),H.return=$,H)}function F($,H,Q,ae){var we=Q.type;return we===V?re($,H,Q.props.children,ae,Q.key):H!==null&&(H.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&oo(we)===H.type)?(H=v(H,Q.props),Il(H,Q),H.return=$,H):(H=vc(Q.type,Q.key,Q.props,null,$.mode,ae),Il(H,Q),H.return=$,H)}function X($,H,Q,ae){return H===null||H.tag!==4||H.stateNode.containerInfo!==Q.containerInfo||H.stateNode.implementation!==Q.implementation?(H=rh(Q,$.mode,ae),H.return=$,H):(H=v(H,Q.children||[]),H.return=$,H)}function re($,H,Q,ae,we){return H===null||H.tag!==7?(H=to(Q,$.mode,ae,we),H.return=$,H):(H=v(H,Q),H.return=$,H)}function le($,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=sh(""+H,$.mode,Q),H.return=$,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case C:return Q=vc(H.type,H.key,H.props,null,$.mode,Q),Il(Q,H),Q.return=$,Q;case M:return H=rh(H,$.mode,Q),H.return=$,H;case N:return H=oo(H),le($,H,Q)}if(ye(H)||B(H))return H=to(H,$.mode,Q,null),H.return=$,H;if(typeof H.then=="function")return le($,Ac(H),Q);if(H.$$typeof===j)return le($,Ec($,H),Q);Cc($,H)}return null}function Z($,H,Q,ae){var we=H!==null?H.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return we!==null?null:b($,H,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:return Q.key===we?F($,H,Q,ae):null;case M:return Q.key===we?X($,H,Q,ae):null;case N:return Q=oo(Q),Z($,H,Q,ae)}if(ye(Q)||B(Q))return we!==null?null:re($,H,Q,ae,null);if(typeof Q.then=="function")return Z($,H,Ac(Q),ae);if(Q.$$typeof===j)return Z($,H,Ec($,Q),ae);Cc($,Q)}return null}function ee($,H,Q,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return $=$.get(Q)||null,b(H,$,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case C:return $=$.get(ae.key===null?Q:ae.key)||null,F(H,$,ae,we);case M:return $=$.get(ae.key===null?Q:ae.key)||null,X(H,$,ae,we);case N:return ae=oo(ae),ee($,H,Q,ae,we)}if(ye(ae)||B(ae))return $=$.get(Q)||null,re(H,$,ae,we,null);if(typeof ae.then=="function")return ee($,H,Q,Ac(ae),we);if(ae.$$typeof===j)return ee($,H,Q,Ec(H,ae),we);Cc(H,ae)}return null}function _e($,H,Q,ae){for(var we=null,Ye=null,xe=H,Ue=H=0,qe=null;xe!==null&&Ue<Q.length;Ue++){xe.index>Ue?(qe=xe,xe=null):qe=xe.sibling;var Je=Z($,xe,Q[Ue],ae);if(Je===null){xe===null&&(xe=qe);break}s&&xe&&Je.alternate===null&&r($,xe),H=T(Je,H,Ue),Ye===null?we=Je:Ye.sibling=Je,Ye=Je,xe=qe}if(Ue===Q.length)return l($,xe),Ge&&Zi($,Ue),we;if(xe===null){for(;Ue<Q.length;Ue++)xe=le($,Q[Ue],ae),xe!==null&&(H=T(xe,H,Ue),Ye===null?we=xe:Ye.sibling=xe,Ye=xe);return Ge&&Zi($,Ue),we}for(xe=c(xe);Ue<Q.length;Ue++)qe=ee(xe,$,Ue,Q[Ue],ae),qe!==null&&(s&&qe.alternate!==null&&xe.delete(qe.key===null?Ue:qe.key),H=T(qe,H,Ue),Ye===null?we=qe:Ye.sibling=qe,Ye=qe);return s&&xe.forEach(function(_r){return r($,_r)}),Ge&&Zi($,Ue),we}function Ce($,H,Q,ae){if(Q==null)throw Error(i(151));for(var we=null,Ye=null,xe=H,Ue=H=0,qe=null,Je=Q.next();xe!==null&&!Je.done;Ue++,Je=Q.next()){xe.index>Ue?(qe=xe,xe=null):qe=xe.sibling;var _r=Z($,xe,Je.value,ae);if(_r===null){xe===null&&(xe=qe);break}s&&xe&&_r.alternate===null&&r($,xe),H=T(_r,H,Ue),Ye===null?we=_r:Ye.sibling=_r,Ye=_r,xe=qe}if(Je.done)return l($,xe),Ge&&Zi($,Ue),we;if(xe===null){for(;!Je.done;Ue++,Je=Q.next())Je=le($,Je.value,ae),Je!==null&&(H=T(Je,H,Ue),Ye===null?we=Je:Ye.sibling=Je,Ye=Je);return Ge&&Zi($,Ue),we}for(xe=c(xe);!Je.done;Ue++,Je=Q.next())Je=ee(xe,$,Ue,Je.value,ae),Je!==null&&(s&&Je.alternate!==null&&xe.delete(Je.key===null?Ue:Je.key),H=T(Je,H,Ue),Ye===null?we=Je:Ye.sibling=Je,Ye=Je);return s&&xe.forEach(function(Cb){return r($,Cb)}),Ge&&Zi($,Ue),we}function at($,H,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===V&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:e:{for(var we=Q.key;H!==null;){if(H.key===we){if(we=Q.type,we===V){if(H.tag===7){l($,H.sibling),ae=v(H,Q.props.children),ae.return=$,$=ae;break e}}else if(H.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&oo(we)===H.type){l($,H.sibling),ae=v(H,Q.props),Il(ae,Q),ae.return=$,$=ae;break e}l($,H);break}else r($,H);H=H.sibling}Q.type===V?(ae=to(Q.props.children,$.mode,ae,Q.key),ae.return=$,$=ae):(ae=vc(Q.type,Q.key,Q.props,null,$.mode,ae),Il(ae,Q),ae.return=$,$=ae)}return w($);case M:e:{for(we=Q.key;H!==null;){if(H.key===we)if(H.tag===4&&H.stateNode.containerInfo===Q.containerInfo&&H.stateNode.implementation===Q.implementation){l($,H.sibling),ae=v(H,Q.children||[]),ae.return=$,$=ae;break e}else{l($,H);break}else r($,H);H=H.sibling}ae=rh(Q,$.mode,ae),ae.return=$,$=ae}return w($);case N:return Q=oo(Q),at($,H,Q,ae)}if(ye(Q))return _e($,H,Q,ae);if(B(Q)){if(we=B(Q),typeof we!="function")throw Error(i(150));return Q=we.call(Q),Ce($,H,Q,ae)}if(typeof Q.then=="function")return at($,H,Ac(Q),ae);if(Q.$$typeof===j)return at($,H,Ec($,Q),ae);Cc($,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,H!==null&&H.tag===6?(l($,H.sibling),ae=v(H,Q),ae.return=$,$=ae):(l($,H),ae=sh(Q,$.mode,ae),ae.return=$,$=ae),w($)):l($,H)}return function($,H,Q,ae){try{bl=0;var we=at($,H,Q,ae);return ra=null,we}catch(xe){if(xe===sa||xe===Sc)throw xe;var Ye=Un(29,xe,null,$.mode);return Ye.lanes=ae,Ye.return=$,Ye}finally{}}}var lo=Ny(!0),My=Ny(!1),nr=!1;function yh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ir(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function sr(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var v=c.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),c.pending=r,r=yc(s),my(s,null,l),r}return gc(s,c,r,l),yc(s)}function Rl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ls(s,l)}}function _h(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var v=null,T=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};T===null?v=T=w:T=T.next=w,l=l.next}while(l!==null);T===null?v=T=r:T=T.next=r}else v=T=r;l={baseState:c.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Th=!1;function Nl(){if(Th){var s=ia;if(s!==null)throw s}}function Ml(s,r,l,c){Th=!1;var v=s.updateQueue;nr=!1;var T=v.firstBaseUpdate,w=v.lastBaseUpdate,b=v.shared.pending;if(b!==null){v.shared.pending=null;var F=b,X=F.next;F.next=null,w===null?T=X:w.next=X,w=F;var re=s.alternate;re!==null&&(re=re.updateQueue,b=re.lastBaseUpdate,b!==w&&(b===null?re.firstBaseUpdate=X:b.next=X,re.lastBaseUpdate=F))}if(T!==null){var le=v.baseState;w=0,re=X=F=null,b=T;do{var Z=b.lane&-536870913,ee=Z!==b.lane;if(ee?(Fe&Z)===Z:(c&Z)===Z){Z!==0&&Z===na&&(Th=!0),re!==null&&(re=re.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var _e=s,Ce=b;Z=r;var at=l;switch(Ce.tag){case 1:if(_e=Ce.payload,typeof _e=="function"){le=_e.call(at,le,Z);break e}le=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ce.payload,Z=typeof _e=="function"?_e.call(at,le,Z):_e,Z==null)break e;le=E({},le,Z);break e;case 2:nr=!0}}Z=b.callback,Z!==null&&(s.flags|=64,ee&&(s.flags|=8192),ee=v.callbacks,ee===null?v.callbacks=[Z]:ee.push(Z))}else ee={lane:Z,tag:b.tag,payload:b.payload,callback:b.callback,next:null},re===null?(X=re=ee,F=le):re=re.next=ee,w|=Z;if(b=b.next,b===null){if(b=v.shared.pending,b===null)break;ee=b,b=ee.next,ee.next=null,v.lastBaseUpdate=ee,v.shared.pending=null}}while(!0);re===null&&(F=le),v.baseState=F,v.firstBaseUpdate=X,v.lastBaseUpdate=re,T===null&&(v.shared.lanes=0),ur|=w,s.lanes=w,s.memoizedState=le}}function Dy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Py(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Dy(l[s],r)}var oa=G(null),bc=G(0);function ky(s,r){s=cs,W(bc,s),W(oa,r),cs=s|r.baseLanes}function Eh(){W(bc,cs),W(oa,oa.current)}function xh(){cs=bc.current,se(oa),se(bc)}var Ln=G(null),Qn=null;function rr(s){var r=s.alternate;W(wt,wt.current&1),W(Ln,s),Qn===null&&(r===null||oa.current!==null||r.memoizedState!==null)&&(Qn=s)}function Sh(s){W(wt,wt.current),W(Ln,s),Qn===null&&(Qn=s)}function Uy(s){s.tag===22?(W(wt,wt.current),W(Ln,s),Qn===null&&(Qn=s)):or()}function or(){W(wt,wt.current),W(Ln,Ln.current)}function Vn(s){se(Ln),Qn===s&&(Qn=null),se(wt)}var wt=G(0);function Ic(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Rm(l)||Nm(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ns=0,Pe=null,rt=null,Rt=null,Rc=!1,aa=!1,uo=!1,Nc=0,Dl=0,la=null,gC=0;function Et(){throw Error(i(321))}function wh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!kn(s[l],r[l]))return!1;return!0}function Ah(s,r,l,c,v,T){return ns=T,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,O.H=s===null||s.memoizedState===null?vv:qh,uo=!1,T=l(c,v),uo=!1,aa&&(T=Vy(r,l,c,v)),Ly(s),T}function Ly(s){O.H=Ul;var r=rt!==null&&rt.next!==null;if(ns=0,Rt=rt=Pe=null,Rc=!1,Dl=0,la=null,r)throw Error(i(300));s===null||Nt||(s=s.dependencies,s!==null&&Tc(s)&&(Nt=!0))}function Vy(s,r,l,c){Pe=s;var v=0;do{if(aa&&(la=null),Dl=0,aa=!1,25<=v)throw Error(i(301));if(v+=1,Rt=rt=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}O.H=_v,T=r(l,c)}while(aa);return T}function yC(){var s=O.H,r=s.useState()[0];return r=typeof r.then=="function"?Pl(r):r,s=s.useState()[0],(rt!==null?rt.memoizedState:null)!==s&&(Pe.flags|=1024),r}function Ch(){var s=Nc!==0;return Nc=0,s}function bh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Ih(s){if(Rc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Rc=!1}ns=0,Rt=rt=Pe=null,aa=!1,Dl=Nc=0,la=null}function Tn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Pe.memoizedState=Rt=s:Rt=Rt.next=s,Rt}function At(){if(rt===null){var s=Pe.alternate;s=s!==null?s.memoizedState:null}else s=rt.next;var r=Rt===null?Pe.memoizedState:Rt.next;if(r!==null)Rt=r,rt=s;else{if(s===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));rt=s,s={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Rt===null?Pe.memoizedState=Rt=s:Rt=Rt.next=s}return Rt}function Mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(s){var r=Dl;return Dl+=1,la===null&&(la=[]),s=by(la,s,r),r=Pe,(Rt===null?r.memoizedState:Rt.next)===null&&(r=r.alternate,O.H=r===null||r.memoizedState===null?vv:qh),s}function Dc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Pl(s);if(s.$$typeof===j)return Jt(s)}throw Error(i(438,String(s)))}function Rh(s){var r=null,l=Pe.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Mc(),Pe.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=k;return r.index++,l}function is(s,r){return typeof r=="function"?r(s):r}function Pc(s){var r=At();return Nh(r,rt,s)}function Nh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var v=s.baseQueue,T=c.pending;if(T!==null){if(v!==null){var w=v.next;v.next=T.next,T.next=w}r.baseQueue=v=T,c.pending=null}if(T=s.baseState,v===null)s.memoizedState=T;else{r=v.next;var b=w=null,F=null,X=r,re=!1;do{var le=X.lane&-536870913;if(le!==X.lane?(Fe&le)===le:(ns&le)===le){var Z=X.revertLane;if(Z===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),le===na&&(re=!0);else if((ns&Z)===Z){X=X.next,Z===na&&(re=!0);continue}else le={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(b=F=le,w=T):F=F.next=le,Pe.lanes|=Z,ur|=Z;le=X.action,uo&&l(T,le),T=X.hasEagerState?X.eagerState:l(T,le)}else Z={lane:le,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(b=F=Z,w=T):F=F.next=Z,Pe.lanes|=le,ur|=le;X=X.next}while(X!==null&&X!==r);if(F===null?w=T:F.next=b,!kn(T,s.memoizedState)&&(Nt=!0,re&&(l=ia,l!==null)))throw l;s.memoizedState=T,s.baseState=w,s.baseQueue=F,c.lastRenderedState=T}return v===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Mh(s){var r=At(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,v=l.pending,T=r.memoizedState;if(v!==null){l.pending=null;var w=v=v.next;do T=s(T,w.action),w=w.next;while(w!==v);kn(T,r.memoizedState)||(Nt=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),l.lastRenderedState=T}return[T,c]}function Oy(s,r,l){var c=Pe,v=At(),T=Ge;if(T){if(l===void 0)throw Error(i(407));l=l()}else l=r();var w=!kn((rt||v).memoizedState,l);if(w&&(v.memoizedState=l,Nt=!0),v=v.queue,kh(By.bind(null,c,v,s),[s]),v.getSnapshot!==r||w||Rt!==null&&Rt.memoizedState.tag&1){if(c.flags|=2048,ua(9,{destroy:void 0},qy.bind(null,c,v,l,r),null),lt===null)throw Error(i(349));T||(ns&127)!==0||Fy(c,r,l)}return l}function Fy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Pe.updateQueue,r===null?(r=Mc(),Pe.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function qy(s,r,l,c){r.value=l,r.getSnapshot=c,Gy(r)&&Hy(s)}function By(s,r,l){return l(function(){Gy(r)&&Hy(s)})}function Gy(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!kn(s,l)}catch{return!0}}function Hy(s){var r=eo(s,2);r!==null&&Rn(r,s,2)}function Dh(s){var r=Tn();if(typeof s=="function"){var l=s;if(s=l(),uo){Gn(!0);try{l()}finally{Gn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:s},r}function zy(s,r,l,c){return s.baseState=l,Nh(s,rt,typeof c=="function"?c:is)}function vC(s,r,l,c,v){if(Lc(s))throw Error(i(485));if(s=r.action,s!==null){var T={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){T.listeners.push(w)}};O.T!==null?l(!0):T.isTransition=!1,c(T),l=r.pending,l===null?(T.next=r.pending=T,jy(r,T)):(T.next=l.next,r.pending=l.next=T)}}function jy(s,r){var l=r.action,c=r.payload,v=s.state;if(r.isTransition){var T=O.T,w={};O.T=w;try{var b=l(v,c),F=O.S;F!==null&&F(w,b),$y(s,r,b)}catch(X){Ph(s,r,X)}finally{T!==null&&w.types!==null&&(T.types=w.types),O.T=T}}else try{T=l(v,c),$y(s,r,T)}catch(X){Ph(s,r,X)}}function $y(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Yy(s,r,c)},function(c){return Ph(s,r,c)}):Yy(s,r,l)}function Yy(s,r,l){r.status="fulfilled",r.value=l,Jy(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,jy(s,l)))}function Ph(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Jy(r),r=r.next;while(r!==c)}s.action=null}function Jy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Ky(s,r){return r}function Wy(s,r){if(Ge){var l=lt.formState;if(l!==null){e:{var c=Pe;if(Ge){if(dt){t:{for(var v=dt,T=Wn;v.nodeType!==8;){if(!T){v=null;break t}if(v=Xn(v.nextSibling),v===null){v=null;break t}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){dt=Xn(v.nextSibling),c=v.data==="F!";break e}}er(c)}c=!1}c&&(r=l[0])}}return l=Tn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ky,lastRenderedState:r},l.queue=c,l=pv.bind(null,Pe,c),c.dispatch=l,c=Dh(!1),T=Fh.bind(null,Pe,!1,c.queue),c=Tn(),v={state:r,dispatch:null,action:s,pending:null},c.queue=v,l=vC.bind(null,Pe,v,T,l),v.dispatch=l,c.memoizedState=s,[r,l,!1]}function Qy(s){var r=At();return Xy(r,rt,s)}function Xy(s,r,l){if(r=Nh(s,r,Ky)[0],s=Pc(is)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Pl(r)}catch(w){throw w===sa?Sc:w}else c=r;r=At();var v=r.queue,T=v.dispatch;return l!==r.memoizedState&&(Pe.flags|=2048,ua(9,{destroy:void 0},_C.bind(null,v,l),null)),[c,T,s]}function _C(s,r){s.action=r}function Zy(s){var r=At(),l=rt;if(l!==null)return Xy(r,l,s);At(),r=r.memoizedState,l=At();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function ua(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=Mc(),Pe.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function ev(){return At().memoizedState}function kc(s,r,l,c){var v=Tn();Pe.flags|=s,v.memoizedState=ua(1|r,{destroy:void 0},l,c===void 0?null:c)}function Uc(s,r,l,c){var v=At();c=c===void 0?null:c;var T=v.memoizedState.inst;rt!==null&&c!==null&&wh(c,rt.memoizedState.deps)?v.memoizedState=ua(r,T,l,c):(Pe.flags|=s,v.memoizedState=ua(1|r,T,l,c))}function tv(s,r){kc(8390656,8,s,r)}function kh(s,r){Uc(2048,8,s,r)}function TC(s){Pe.flags|=4;var r=Pe.updateQueue;if(r===null)r=Mc(),Pe.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function nv(s){var r=At().memoizedState;return TC({ref:r,nextImpl:s}),function(){if((Xe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function iv(s,r){return Uc(4,2,s,r)}function sv(s,r){return Uc(4,4,s,r)}function rv(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function ov(s,r,l){l=l!=null?l.concat([s]):null,Uc(4,4,rv.bind(null,r,s),l)}function Uh(){}function av(s,r){var l=At();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&wh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function lv(s,r){var l=At();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&wh(r,c[1]))return c[0];if(c=s(),uo){Gn(!0);try{s()}finally{Gn(!1)}}return l.memoizedState=[c,r],c}function Lh(s,r,l){return l===void 0||(ns&1073741824)!==0&&(Fe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=u_(),Pe.lanes|=s,ur|=s,l)}function uv(s,r,l,c){return kn(l,r)?l:oa.current!==null?(s=Lh(s,l,c),kn(s,r)||(Nt=!0),s):(ns&42)===0||(ns&1073741824)!==0&&(Fe&261930)===0?(Nt=!0,s.memoizedState=l):(s=u_(),Pe.lanes|=s,ur|=s,r)}function cv(s,r,l,c,v){var T=te.p;te.p=T!==0&&8>T?T:8;var w=O.T,b={};O.T=b,Fh(s,!1,r,l);try{var F=v(),X=O.S;if(X!==null&&X(b,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var re=pC(F,c);kl(s,r,re,qn(s))}else kl(s,r,c,qn(s))}catch(le){kl(s,r,{then:function(){},status:"rejected",reason:le},qn())}finally{te.p=T,w!==null&&b.types!==null&&(w.types=b.types),O.T=w}}function EC(){}function Vh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var v=dv(s).queue;cv(s,v,r,fe,l===null?EC:function(){return fv(s),l(c)})}function dv(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:fe},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function fv(s){var r=dv(s);r.next===null&&(r=s.alternate.memoizedState),kl(s,r.next.queue,{},qn())}function Oh(){return Jt(Ql)}function hv(){return At().memoizedState}function mv(){return At().memoizedState}function xC(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=qn();s=ir(l);var c=sr(r,s,l);c!==null&&(Rn(c,r,l),Rl(c,r,l)),r={cache:hh()},s.payload=r;return}r=r.return}}function SC(s,r,l){var c=qn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Lc(s)?gv(r,l):(l=nh(s,r,l,c),l!==null&&(Rn(l,s,c),yv(l,r,c)))}function pv(s,r,l){var c=qn();kl(s,r,l,c)}function kl(s,r,l,c){var v={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Lc(s))gv(r,v);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var w=r.lastRenderedState,b=T(w,l);if(v.hasEagerState=!0,v.eagerState=b,kn(b,w))return gc(s,r,v,0),lt===null&&pc(),!1}catch{}finally{}if(l=nh(s,r,v,c),l!==null)return Rn(l,s,c),yv(l,r,c),!0}return!1}function Fh(s,r,l,c){if(c={lane:2,revertLane:ym(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Lc(s)){if(r)throw Error(i(479))}else r=nh(s,l,c,2),r!==null&&Rn(r,s,2)}function Lc(s){var r=s.alternate;return s===Pe||r!==null&&r===Pe}function gv(s,r){aa=Rc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function yv(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ls(s,l)}}var Ul={readContext:Jt,use:Dc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Ul.useEffectEvent=Et;var vv={readContext:Jt,use:Dc,useCallback:function(s,r){return Tn().memoizedState=[s,r===void 0?null:r],s},useContext:Jt,useEffect:tv,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,kc(4194308,4,rv.bind(null,r,s),l)},useLayoutEffect:function(s,r){return kc(4194308,4,s,r)},useInsertionEffect:function(s,r){kc(4,2,s,r)},useMemo:function(s,r){var l=Tn();r=r===void 0?null:r;var c=s();if(uo){Gn(!0);try{s()}finally{Gn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=Tn();if(l!==void 0){var v=l(r);if(uo){Gn(!0);try{l(r)}finally{Gn(!1)}}}else v=r;return c.memoizedState=c.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},c.queue=s,s=s.dispatch=SC.bind(null,Pe,s),[c.memoizedState,s]},useRef:function(s){var r=Tn();return s={current:s},r.memoizedState=s},useState:function(s){s=Dh(s);var r=s.queue,l=pv.bind(null,Pe,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Uh,useDeferredValue:function(s,r){var l=Tn();return Lh(l,s,r)},useTransition:function(){var s=Dh(!1);return s=cv.bind(null,Pe,s.queue,!0,!1),Tn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Pe,v=Tn();if(Ge){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),lt===null)throw Error(i(349));(Fe&127)!==0||Fy(c,r,l)}v.memoizedState=l;var T={value:l,getSnapshot:r};return v.queue=T,tv(By.bind(null,c,T,s),[s]),c.flags|=2048,ua(9,{destroy:void 0},qy.bind(null,c,T,l,r),null),l},useId:function(){var s=Tn(),r=lt.identifierPrefix;if(Ge){var l=Ai,c=wi;l=(c&~(1<<32-pn(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Nc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=gC++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Oh,useFormState:Wy,useActionState:Wy,useOptimistic:function(s){var r=Tn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Fh.bind(null,Pe,!0,l),l.dispatch=r,[s,r]},useMemoCache:Rh,useCacheRefresh:function(){return Tn().memoizedState=xC.bind(null,Pe)},useEffectEvent:function(s){var r=Tn(),l={impl:s};return r.memoizedState=l,function(){if((Xe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},qh={readContext:Jt,use:Dc,useCallback:av,useContext:Jt,useEffect:kh,useImperativeHandle:ov,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:lv,useReducer:Pc,useRef:ev,useState:function(){return Pc(is)},useDebugValue:Uh,useDeferredValue:function(s,r){var l=At();return uv(l,rt.memoizedState,s,r)},useTransition:function(){var s=Pc(is)[0],r=At().memoizedState;return[typeof s=="boolean"?s:Pl(s),r]},useSyncExternalStore:Oy,useId:hv,useHostTransitionStatus:Oh,useFormState:Qy,useActionState:Qy,useOptimistic:function(s,r){var l=At();return zy(l,rt,s,r)},useMemoCache:Rh,useCacheRefresh:mv};qh.useEffectEvent=nv;var _v={readContext:Jt,use:Dc,useCallback:av,useContext:Jt,useEffect:kh,useImperativeHandle:ov,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:lv,useReducer:Mh,useRef:ev,useState:function(){return Mh(is)},useDebugValue:Uh,useDeferredValue:function(s,r){var l=At();return rt===null?Lh(l,s,r):uv(l,rt.memoizedState,s,r)},useTransition:function(){var s=Mh(is)[0],r=At().memoizedState;return[typeof s=="boolean"?s:Pl(s),r]},useSyncExternalStore:Oy,useId:hv,useHostTransitionStatus:Oh,useFormState:Zy,useActionState:Zy,useOptimistic:function(s,r){var l=At();return rt!==null?zy(l,rt,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Rh,useCacheRefresh:mv};_v.useEffectEvent=nv;function Bh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:E({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Gh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=qn(),v=ir(c);v.payload=r,l!=null&&(v.callback=l),r=sr(s,v,c),r!==null&&(Rn(r,s,c),Rl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=qn(),v=ir(c);v.tag=1,v.payload=r,l!=null&&(v.callback=l),r=sr(s,v,c),r!==null&&(Rn(r,s,c),Rl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=qn(),c=ir(l);c.tag=2,r!=null&&(c.callback=r),r=sr(s,c,l),r!==null&&(Rn(r,s,l),Rl(r,s,l))}};function Tv(s,r,l,c,v,T,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,T,w):r.prototype&&r.prototype.isPureReactComponent?!El(l,c)||!El(v,T):!0}function Ev(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Gh.enqueueReplaceState(r,r.state,null)}function co(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=E({},l));for(var v in s)l[v]===void 0&&(l[v]=s[v])}return l}function xv(s){mc(s)}function Sv(s){console.error(s)}function wv(s){mc(s)}function Vc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Av(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Hh(s,r,l){return l=ir(l),l.tag=3,l.payload={element:null},l.callback=function(){Vc(s,r)},l}function Cv(s){return s=ir(s),s.tag=3,s}function bv(s,r,l,c){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var T=c.value;s.payload=function(){return v(T)},s.callback=function(){Av(r,l,c)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){Av(r,l,c),typeof v!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function wC(s,r,l,c,v){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&ta(r,l,v,!0),l=Ln.current,l!==null){switch(l.tag){case 31:case 13:return Qn===null?Kc():l.alternate===null&&xt===0&&(xt=3),l.flags&=-257,l.flags|=65536,l.lanes=v,c===wc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),mm(s,c,v)),!1;case 22:return l.flags|=65536,c===wc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),mm(s,c,v)),!1}throw Error(i(435,l.tag))}return mm(s,c,v),Kc(),!1}if(Ge)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,c!==lh&&(s=Error(i(422),{cause:c}),wl(Yn(s,l)))):(c!==lh&&(r=Error(i(423),{cause:c}),wl(Yn(r,l))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,c=Yn(c,l),v=Hh(s.stateNode,c,v),_h(s,v),xt!==4&&(xt=2)),!1;var T=Error(i(520),{cause:c});if(T=Yn(T,l),Hl===null?Hl=[T]:Hl.push(T),xt!==4&&(xt=2),r===null)return!0;c=Yn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=v&-v,l.lanes|=s,s=Hh(l.stateNode,c,s),_h(l,s),!1;case 1:if(r=l.type,T=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(cr===null||!cr.has(T))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Cv(v),bv(v,s,l,c),_h(l,v),!1}l=l.return}while(l!==null);return!1}var zh=Error(i(461)),Nt=!1;function Kt(s,r,l,c){r.child=s===null?My(r,null,l,c):lo(r,s.child,l,c)}function Iv(s,r,l,c,v){l=l.render;var T=r.ref;if("ref"in c){var w={};for(var b in c)b!=="ref"&&(w[b]=c[b])}else w=c;return so(r),c=Ah(s,r,l,w,T,v),b=Ch(),s!==null&&!Nt?(bh(s,r,v),ss(s,r,v)):(Ge&&b&&oh(r),r.flags|=1,Kt(s,r,c,v),r.child)}function Rv(s,r,l,c,v){if(s===null){var T=l.type;return typeof T=="function"&&!ih(T)&&T.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=T,Nv(s,r,T,c,v)):(s=vc(l.type,null,c,r,r.mode,v),s.ref=r.ref,s.return=r,r.child=s)}if(T=s.child,!Xh(s,v)){var w=T.memoizedProps;if(l=l.compare,l=l!==null?l:El,l(w,c)&&s.ref===r.ref)return ss(s,r,v)}return r.flags|=1,s=Xi(T,c),s.ref=r.ref,s.return=r,r.child=s}function Nv(s,r,l,c,v){if(s!==null){var T=s.memoizedProps;if(El(T,c)&&s.ref===r.ref)if(Nt=!1,r.pendingProps=c=T,Xh(s,v))(s.flags&131072)!==0&&(Nt=!0);else return r.lanes=s.lanes,ss(s,r,v)}return jh(s,r,l,c,v)}function Mv(s,r,l,c){var v=c.children,T=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(T=T!==null?T.baseLanes|l:l,s!==null){for(c=r.child=s.child,v=0;c!==null;)v=v|c.lanes|c.childLanes,c=c.sibling;c=v&~T}else c=0,r.child=null;return Dv(s,r,T,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&xc(r,T!==null?T.cachePool:null),T!==null?ky(r,T):Eh(),Uy(r);else return c=r.lanes=536870912,Dv(s,r,T!==null?T.baseLanes|l:l,l,c)}else T!==null?(xc(r,T.cachePool),ky(r,T),or(),r.memoizedState=null):(s!==null&&xc(r,null),Eh(),or());return Kt(s,r,v,l),r.child}function Ll(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Dv(s,r,l,c,v){var T=ph();return T=T===null?null:{parent:It._currentValue,pool:T},r.memoizedState={baseLanes:l,cachePool:T},s!==null&&xc(r,null),Eh(),Uy(r),s!==null&&ta(s,r,c,!0),r.childLanes=v,null}function Oc(s,r){return r=qc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function Pv(s,r,l){return lo(r,s.child,null,l),s=Oc(r,r.pendingProps),s.flags|=2,Vn(r),r.memoizedState=null,s}function AC(s,r,l){var c=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Ge){if(c.mode==="hidden")return s=Oc(r,c),r.lanes=536870912,Ll(null,s);if(Sh(r),(s=dt)?(s=j_(s,Wn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Xs!==null?{id:wi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},l=gy(s),l.return=r,r.child=l,Yt=r,dt=null)):s=null,s===null)throw er(r);return r.lanes=536870912,null}return Oc(r,c)}var T=s.memoizedState;if(T!==null){var w=T.dehydrated;if(Sh(r),v)if(r.flags&256)r.flags&=-257,r=Pv(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Nt||ta(s,r,l,!1),v=(l&s.childLanes)!==0,Nt||v){if(c=lt,c!==null&&(w=Vs(c,l),w!==0&&w!==T.retryLane))throw T.retryLane=w,eo(s,w),Rn(c,s,w),zh;Kc(),r=Pv(s,r,l)}else s=T.treeContext,dt=Xn(w.nextSibling),Yt=r,Ge=!0,Zs=null,Wn=!1,s!==null&&_y(r,s),r=Oc(r,c),r.flags|=4096;return r}return s=Xi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Fc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function jh(s,r,l,c,v){return so(r),l=Ah(s,r,l,c,void 0,v),c=Ch(),s!==null&&!Nt?(bh(s,r,v),ss(s,r,v)):(Ge&&c&&oh(r),r.flags|=1,Kt(s,r,l,v),r.child)}function kv(s,r,l,c,v,T){return so(r),r.updateQueue=null,l=Vy(r,c,l,v),Ly(s),c=Ch(),s!==null&&!Nt?(bh(s,r,T),ss(s,r,T)):(Ge&&c&&oh(r),r.flags|=1,Kt(s,r,l,T),r.child)}function Uv(s,r,l,c,v){if(so(r),r.stateNode===null){var T=Qo,w=l.contextType;typeof w=="object"&&w!==null&&(T=Jt(w)),T=new l(c,T),r.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Gh,r.stateNode=T,T._reactInternals=r,T=r.stateNode,T.props=c,T.state=r.memoizedState,T.refs={},yh(r),w=l.contextType,T.context=typeof w=="object"&&w!==null?Jt(w):Qo,T.state=r.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Bh(r,l,w,c),T.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(w=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),w!==T.state&&Gh.enqueueReplaceState(T,T.state,null),Ml(r,c,T,v),Nl(),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){T=r.stateNode;var b=r.memoizedProps,F=co(l,b);T.props=F;var X=T.context,re=l.contextType;w=Qo,typeof re=="object"&&re!==null&&(w=Jt(re));var le=l.getDerivedStateFromProps;re=typeof le=="function"||typeof T.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,re||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(b||X!==w)&&Ev(r,T,c,w),nr=!1;var Z=r.memoizedState;T.state=Z,Ml(r,c,T,v),Nl(),X=r.memoizedState,b||Z!==X||nr?(typeof le=="function"&&(Bh(r,l,le,c),X=r.memoizedState),(F=nr||Tv(r,l,F,c,Z,X,w))?(re||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=X),T.props=c,T.state=X,T.context=w,c=F):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{T=r.stateNode,vh(s,r),w=r.memoizedProps,re=co(l,w),T.props=re,le=r.pendingProps,Z=T.context,X=l.contextType,F=Qo,typeof X=="object"&&X!==null&&(F=Jt(X)),b=l.getDerivedStateFromProps,(X=typeof b=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(w!==le||Z!==F)&&Ev(r,T,c,F),nr=!1,Z=r.memoizedState,T.state=Z,Ml(r,c,T,v),Nl();var ee=r.memoizedState;w!==le||Z!==ee||nr||s!==null&&s.dependencies!==null&&Tc(s.dependencies)?(typeof b=="function"&&(Bh(r,l,b,c),ee=r.memoizedState),(re=nr||Tv(r,l,re,c,Z,ee,F)||s!==null&&s.dependencies!==null&&Tc(s.dependencies))?(X||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(c,ee,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(c,ee,F)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ee),T.props=c,T.state=ee,T.context=F,c=re):(typeof T.componentDidUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=1024),c=!1)}return T=c,Fc(s,r),c=(r.flags&128)!==0,T||c?(T=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:T.render(),r.flags|=1,s!==null&&c?(r.child=lo(r,s.child,null,v),r.child=lo(r,null,l,v)):Kt(s,r,l,v),r.memoizedState=T.state,s=r.child):s=ss(s,r,v),s}function Lv(s,r,l,c){return no(),r.flags|=256,Kt(s,r,l,c),r.child}var $h={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yh(s){return{baseLanes:s,cachePool:Ay()}}function Jh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Fn),s}function Vv(s,r,l){var c=r.pendingProps,v=!1,T=(r.flags&128)!==0,w;if((w=T)||(w=s!==null&&s.memoizedState===null?!1:(wt.current&2)!==0),w&&(v=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ge){if(v?rr(r):or(),(s=dt)?(s=j_(s,Wn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Xs!==null?{id:wi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},l=gy(s),l.return=r,r.child=l,Yt=r,dt=null)):s=null,s===null)throw er(r);return Nm(s)?r.lanes=32:r.lanes=536870912,null}var b=c.children;return c=c.fallback,v?(or(),v=r.mode,b=qc({mode:"hidden",children:b},v),c=to(c,v,l,null),b.return=r,c.return=r,b.sibling=c,r.child=b,c=r.child,c.memoizedState=Yh(l),c.childLanes=Jh(s,w,l),r.memoizedState=$h,Ll(null,c)):(rr(r),Kh(r,b))}var F=s.memoizedState;if(F!==null&&(b=F.dehydrated,b!==null)){if(T)r.flags&256?(rr(r),r.flags&=-257,r=Wh(s,r,l)):r.memoizedState!==null?(or(),r.child=s.child,r.flags|=128,r=null):(or(),b=c.fallback,v=r.mode,c=qc({mode:"visible",children:c.children},v),b=to(b,v,l,null),b.flags|=2,c.return=r,b.return=r,c.sibling=b,r.child=c,lo(r,s.child,null,l),c=r.child,c.memoizedState=Yh(l),c.childLanes=Jh(s,w,l),r.memoizedState=$h,r=Ll(null,c));else if(rr(r),Nm(b)){if(w=b.nextSibling&&b.nextSibling.dataset,w)var X=w.dgst;w=X,c=Error(i(419)),c.stack="",c.digest=w,wl({value:c,source:null,stack:null}),r=Wh(s,r,l)}else if(Nt||ta(s,r,l,!1),w=(l&s.childLanes)!==0,Nt||w){if(w=lt,w!==null&&(c=Vs(w,l),c!==0&&c!==F.retryLane))throw F.retryLane=c,eo(s,c),Rn(w,s,c),zh;Rm(b)||Kc(),r=Wh(s,r,l)}else Rm(b)?(r.flags|=192,r.child=s.child,r=null):(s=F.treeContext,dt=Xn(b.nextSibling),Yt=r,Ge=!0,Zs=null,Wn=!1,s!==null&&_y(r,s),r=Kh(r,c.children),r.flags|=4096);return r}return v?(or(),b=c.fallback,v=r.mode,F=s.child,X=F.sibling,c=Xi(F,{mode:"hidden",children:c.children}),c.subtreeFlags=F.subtreeFlags&65011712,X!==null?b=Xi(X,b):(b=to(b,v,l,null),b.flags|=2),b.return=r,c.return=r,c.sibling=b,r.child=c,Ll(null,c),c=r.child,b=s.child.memoizedState,b===null?b=Yh(l):(v=b.cachePool,v!==null?(F=It._currentValue,v=v.parent!==F?{parent:F,pool:F}:v):v=Ay(),b={baseLanes:b.baseLanes|l,cachePool:v}),c.memoizedState=b,c.childLanes=Jh(s,w,l),r.memoizedState=$h,Ll(s.child,c)):(rr(r),l=s.child,s=l.sibling,l=Xi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(w=r.deletions,w===null?(r.deletions=[s],r.flags|=16):w.push(s)),r.child=l,r.memoizedState=null,l)}function Kh(s,r){return r=qc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function qc(s,r){return s=Un(22,s,null,r),s.lanes=0,s}function Wh(s,r,l){return lo(r,s.child,null,l),s=Kh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Ov(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),dh(s.return,r,l)}function Qh(s,r,l,c,v,T){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:v,treeForkCount:T}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=l,w.tailMode=v,w.treeForkCount=T)}function Fv(s,r,l){var c=r.pendingProps,v=c.revealOrder,T=c.tail;c=c.children;var w=wt.current,b=(w&2)!==0;if(b?(w=w&1|2,r.flags|=128):w&=1,W(wt,w),Kt(s,r,c,l),c=Ge?Sl:0,!b&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ov(s,l,r);else if(s.tag===19)Ov(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(v){case"forwards":for(l=r.child,v=null;l!==null;)s=l.alternate,s!==null&&Ic(s)===null&&(v=l),l=l.sibling;l=v,l===null?(v=r.child,r.child=null):(v=l.sibling,l.sibling=null),Qh(r,!1,v,l,T,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=r.child,r.child=null;v!==null;){if(s=v.alternate,s!==null&&Ic(s)===null){r.child=v;break}s=v.sibling,v.sibling=l,l=v,v=s}Qh(r,!0,l,null,T,c);break;case"together":Qh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ss(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),ur|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(ta(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Xi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Xi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Xh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Tc(s)))}function CC(s,r,l){switch(r.tag){case 3:et(r,r.stateNode.containerInfo),tr(r,It,s.memoizedState.cache),no();break;case 27:case 5:mn(r);break;case 4:et(r,r.stateNode.containerInfo);break;case 10:tr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Sh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(rr(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Vv(s,r,l):(rr(r),s=ss(s,r,l),s!==null?s.sibling:null);rr(r);break;case 19:var v=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(ta(s,r,l,!1),c=(l&r.childLanes)!==0),v){if(c)return Fv(s,r,l);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),W(wt,wt.current),c)break;return null;case 22:return r.lanes=0,Mv(s,r,l,r.pendingProps);case 24:tr(r,It,s.memoizedState.cache)}return ss(s,r,l)}function qv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Nt=!0;else{if(!Xh(s,l)&&(r.flags&128)===0)return Nt=!1,CC(s,r,l);Nt=(s.flags&131072)!==0}else Nt=!1,Ge&&(r.flags&1048576)!==0&&vy(r,Sl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=oo(r.elementType),r.type=s,typeof s=="function")ih(s)?(c=co(s,c),r.tag=1,r=Uv(null,r,s,c,l)):(r.tag=0,r=jh(null,r,s,c,l));else{if(s!=null){var v=s.$$typeof;if(v===Y){r.tag=11,r=Iv(null,r,s,c,l);break e}else if(v===P){r.tag=14,r=Rv(null,r,s,c,l);break e}}throw r=je(s)||s,Error(i(306,r,""))}}return r;case 0:return jh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,v=co(c,r.pendingProps),Uv(s,r,c,v,l);case 3:e:{if(et(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var T=r.memoizedState;v=T.element,vh(s,r),Ml(r,c,null,l);var w=r.memoizedState;if(c=w.cache,tr(r,It,c),c!==T.cache&&fh(r,[It],l,!0),Nl(),c=w.element,T.isDehydrated)if(T={element:c,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){r=Lv(s,r,c,l);break e}else if(c!==v){v=Yn(Error(i(424)),r),wl(v),r=Lv(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(dt=Xn(s.firstChild),Yt=r,Ge=!0,Zs=null,Wn=!0,l=My(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(no(),c===v){r=ss(s,r,l);break e}Kt(s,r,c,l)}r=r.child}return r;case 26:return Fc(s,r),s===null?(l=Q_(r.type,null,r.pendingProps,null))?r.memoizedState=l:Ge||(l=r.type,s=r.pendingProps,c=nd(ve.current).createElement(l),c[_t]=r,c[$t]=s,Wt(c,l,s),St(c),r.stateNode=c):r.memoizedState=Q_(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return mn(r),s===null&&Ge&&(c=r.stateNode=J_(r.type,r.pendingProps,ve.current),Yt=r,Wn=!0,v=dt,mr(r.type)?(Mm=v,dt=Xn(c.firstChild)):dt=v),Kt(s,r,r.pendingProps.children,l),Fc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ge&&((v=c=dt)&&(c=nb(c,r.type,r.pendingProps,Wn),c!==null?(r.stateNode=c,Yt=r,dt=Xn(c.firstChild),Wn=!1,v=!0):v=!1),v||er(r)),mn(r),v=r.type,T=r.pendingProps,w=s!==null?s.memoizedProps:null,c=T.children,Cm(v,T)?c=null:w!==null&&Cm(v,w)&&(r.flags|=32),r.memoizedState!==null&&(v=Ah(s,r,yC,null,null,l),Ql._currentValue=v),Fc(s,r),Kt(s,r,c,l),r.child;case 6:return s===null&&Ge&&((s=l=dt)&&(l=ib(l,r.pendingProps,Wn),l!==null?(r.stateNode=l,Yt=r,dt=null,s=!0):s=!1),s||er(r)),null;case 13:return Vv(s,r,l);case 4:return et(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=lo(r,null,c,l):Kt(s,r,c,l),r.child;case 11:return Iv(s,r,r.type,r.pendingProps,l);case 7:return Kt(s,r,r.pendingProps,l),r.child;case 8:return Kt(s,r,r.pendingProps.children,l),r.child;case 12:return Kt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,tr(r,r.type,c.value),Kt(s,r,c.children,l),r.child;case 9:return v=r.type._context,c=r.pendingProps.children,so(r),v=Jt(v),c=c(v),r.flags|=1,Kt(s,r,c,l),r.child;case 14:return Rv(s,r,r.type,r.pendingProps,l);case 15:return Nv(s,r,r.type,r.pendingProps,l);case 19:return Fv(s,r,l);case 31:return AC(s,r,l);case 22:return Mv(s,r,l,r.pendingProps);case 24:return so(r),c=Jt(It),s===null?(v=ph(),v===null&&(v=lt,T=hh(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=l),v=T),r.memoizedState={parent:c,cache:v},yh(r),tr(r,It,v)):((s.lanes&l)!==0&&(vh(s,r),Ml(r,null,null,l),Nl()),v=s.memoizedState,T=r.memoizedState,v.parent!==c?(v={parent:c,cache:c},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),tr(r,It,c)):(c=T.cache,tr(r,It,c),c!==v.cache&&fh(r,[It],l,!0))),Kt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function rs(s){s.flags|=4}function Zh(s,r,l,c,v){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(v&335544128)===v)if(s.stateNode.complete)s.flags|=8192;else if(h_())s.flags|=8192;else throw ao=wc,gh}else s.flags&=-16777217}function Bv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!n0(r))if(h_())s.flags|=8192;else throw ao=wc,gh}function Bc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?il():536870912,s.lanes|=r,ha|=r)}function Vl(s,r){if(!Ge)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ft(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var v=s.child;v!==null;)l|=v.lanes|v.childLanes,c|=v.subtreeFlags&65011712,c|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)l|=v.lanes|v.childLanes,c|=v.subtreeFlags,c|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function bC(s,r,l){var c=r.pendingProps;switch(ah(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(r),null;case 1:return ft(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ts(It),tt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(ea(r)?rs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,uh())),ft(r),null;case 26:var v=r.type,T=r.memoizedState;return s===null?(rs(r),T!==null?(ft(r),Bv(r,T)):(ft(r),Zh(r,v,null,c,l))):T?T!==s.memoizedState?(rs(r),ft(r),Bv(r,T)):(ft(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&rs(r),ft(r),Zh(r,v,s,c,l)),null;case 27:if(xn(r),l=ve.current,v=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&rs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ft(r),null}s=de.current,ea(r)?Ty(r):(s=J_(v,c,l),r.stateNode=s,rs(r))}return ft(r),null;case 5:if(xn(r),v=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&rs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ft(r),null}if(T=de.current,ea(r))Ty(r);else{var w=nd(ve.current);switch(T){case 1:T=w.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:T=w.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":T=w.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":T=w.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":T=w.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?T.multiple=!0:c.size&&(T.size=c.size);break;default:T=typeof c.is=="string"?w.createElement(v,{is:c.is}):w.createElement(v)}}T[_t]=r,T[$t]=c;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)T.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=T;e:switch(Wt(T,v,c),v){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&rs(r)}}return ft(r),Zh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&rs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=ve.current,ea(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,v=Yt,v!==null)switch(v.tag){case 27:case 5:c=v.memoizedProps}s[_t]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||V_(s.nodeValue,l)),s||er(r,!0)}else s=nd(s).createTextNode(c),s[_t]=r,r.stateNode=s}return ft(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=ea(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[_t]=r}else no(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),s=!1}else l=uh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Vn(r),r):(Vn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ft(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=ea(r),c!==null&&c.dehydrated!==null){if(s===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[_t]=r}else no(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),v=!1}else v=uh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Vn(r),r):(Vn(r),null)}return Vn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,v=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(v=c.alternate.memoizedState.cachePool.pool),T=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(T=c.memoizedState.cachePool.pool),T!==v&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Bc(r,r.updateQueue),ft(r),null);case 4:return tt(),s===null&&Em(r.stateNode.containerInfo),ft(r),null;case 10:return ts(r.type),ft(r),null;case 19:if(se(wt),c=r.memoizedState,c===null)return ft(r),null;if(v=(r.flags&128)!==0,T=c.rendering,T===null)if(v)Vl(c,!1);else{if(xt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(T=Ic(s),T!==null){for(r.flags|=128,Vl(c,!1),s=T.updateQueue,r.updateQueue=s,Bc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)py(l,s),l=l.sibling;return W(wt,wt.current&1|2),Ge&&Zi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&zt()>$c&&(r.flags|=128,v=!0,Vl(c,!1),r.lanes=4194304)}else{if(!v)if(s=Ic(T),s!==null){if(r.flags|=128,v=!0,s=s.updateQueue,r.updateQueue=s,Bc(r,s),Vl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!T.alternate&&!Ge)return ft(r),null}else 2*zt()-c.renderingStartTime>$c&&l!==536870912&&(r.flags|=128,v=!0,Vl(c,!1),r.lanes=4194304);c.isBackwards?(T.sibling=r.child,r.child=T):(s=c.last,s!==null?s.sibling=T:r.child=T,c.last=T)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=zt(),s.sibling=null,l=wt.current,W(wt,v?l&1|2:l&1),Ge&&Zi(r,c.treeForkCount),s):(ft(r),null);case 22:case 23:return Vn(r),xh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ft(r),r.subtreeFlags&6&&(r.flags|=8192)):ft(r),l=r.updateQueue,l!==null&&Bc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&se(ro),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ts(It),ft(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function IC(s,r){switch(ah(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return ts(It),tt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return xn(r),null;case 31:if(r.memoizedState!==null){if(Vn(r),r.alternate===null)throw Error(i(340));no()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Vn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));no()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return se(wt),null;case 4:return tt(),null;case 10:return ts(r.type),null;case 22:case 23:return Vn(r),xh(),s!==null&&se(ro),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return ts(It),null;case 25:return null;default:return null}}function Gv(s,r){switch(ah(r),r.tag){case 3:ts(It),tt();break;case 26:case 27:case 5:xn(r);break;case 4:tt();break;case 31:r.memoizedState!==null&&Vn(r);break;case 13:Vn(r);break;case 19:se(wt);break;case 10:ts(r.type);break;case 22:case 23:Vn(r),xh(),s!==null&&se(ro);break;case 24:ts(It)}}function Ol(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var v=c.next;l=v;do{if((l.tag&s)===s){c=void 0;var T=l.create,w=l.inst;c=T(),w.destroy=c}l=l.next}while(l!==v)}}catch(b){it(r,r.return,b)}}function ar(s,r,l){try{var c=r.updateQueue,v=c!==null?c.lastEffect:null;if(v!==null){var T=v.next;c=T;do{if((c.tag&s)===s){var w=c.inst,b=w.destroy;if(b!==void 0){w.destroy=void 0,v=r;var F=l,X=b;try{X()}catch(re){it(v,F,re)}}}c=c.next}while(c!==T)}}catch(re){it(r,r.return,re)}}function Hv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{Py(r,l)}catch(c){it(s,s.return,c)}}}function zv(s,r,l){l.props=co(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){it(s,r,c)}}function Fl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(v){it(s,r,v)}}function Ci(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(v){it(s,r,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){it(s,r,v)}else l.current=null}function jv(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(v){it(s,s.return,v)}}function em(s,r,l){try{var c=s.stateNode;WC(c,s.type,l,r),c[$t]=r}catch(v){it(s,s.return,v)}}function $v(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&mr(s.type)||s.tag===4}function tm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||$v(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&mr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function nm(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Ft));else if(c!==4&&(c===27&&mr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(nm(s,r,l),s=s.sibling;s!==null;)nm(s,r,l),s=s.sibling}function Gc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&mr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Gc(s,r,l),s=s.sibling;s!==null;)Gc(s,r,l),s=s.sibling}function Yv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Wt(r,c,l),r[_t]=s,r[$t]=l}catch(T){it(s,s.return,T)}}var os=!1,Mt=!1,im=!1,Jv=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function RC(s,r){if(s=s.containerInfo,wm=ud,s=oy(s),Wf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var v=c.anchorOffset,T=c.focusNode;c=c.focusOffset;try{l.nodeType,T.nodeType}catch{l=null;break e}var w=0,b=-1,F=-1,X=0,re=0,le=s,Z=null;t:for(;;){for(var ee;le!==l||v!==0&&le.nodeType!==3||(b=w+v),le!==T||c!==0&&le.nodeType!==3||(F=w+c),le.nodeType===3&&(w+=le.nodeValue.length),(ee=le.firstChild)!==null;)Z=le,le=ee;for(;;){if(le===s)break t;if(Z===l&&++X===v&&(b=w),Z===T&&++re===c&&(F=w),(ee=le.nextSibling)!==null)break;le=Z,Z=le.parentNode}le=ee}l=b===-1||F===-1?null:{start:b,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Am={focusedElem:s,selectionRange:l},ud=!1,Gt=r;Gt!==null;)if(r=Gt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Gt=s;else for(;Gt!==null;){switch(r=Gt,T=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)v=s[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,l=r,v=T.memoizedProps,T=T.memoizedState,c=l.stateNode;try{var _e=co(l.type,v);s=c.getSnapshotBeforeUpdate(_e,T),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ce){it(l,l.return,Ce)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Im(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Im(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Gt=s;break}Gt=r.return}}function Kv(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ls(s,l),c&4&&Ol(5,l);break;case 1:if(ls(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(w){it(l,l.return,w)}else{var v=co(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(v,r,s.__reactInternalSnapshotBeforeUpdate)}catch(w){it(l,l.return,w)}}c&64&&Hv(l),c&512&&Fl(l,l.return);break;case 3:if(ls(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Py(s,r)}catch(w){it(l,l.return,w)}}break;case 27:r===null&&c&4&&Yv(l);case 26:case 5:ls(s,l),r===null&&c&4&&jv(l),c&512&&Fl(l,l.return);break;case 12:ls(s,l);break;case 31:ls(s,l),c&4&&Xv(s,l);break;case 13:ls(s,l),c&4&&Zv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=OC.bind(null,l),sb(s,l))));break;case 22:if(c=l.memoizedState!==null||os,!c){r=r!==null&&r.memoizedState!==null||Mt,v=os;var T=Mt;os=c,(Mt=r)&&!T?us(s,l,(l.subtreeFlags&8772)!==0):ls(s,l),os=v,Mt=T}break;case 30:break;default:ls(s,l)}}function Wv(s){var r=s.alternate;r!==null&&(s.alternate=null,Wv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Gr(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pt=null,An=!1;function as(s,r,l){for(l=l.child;l!==null;)Qv(s,r,l),l=l.sibling}function Qv(s,r,l){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Ds,l)}catch{}switch(l.tag){case 26:Mt||Ci(l,r),as(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Mt||Ci(l,r);var c=pt,v=An;mr(l.type)&&(pt=l.stateNode,An=!1),as(s,r,l),Jl(l.stateNode),pt=c,An=v;break;case 5:Mt||Ci(l,r);case 6:if(c=pt,v=An,pt=null,as(s,r,l),pt=c,An=v,pt!==null)if(An)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(T){it(l,r,T)}else try{pt.removeChild(l.stateNode)}catch(T){it(l,r,T)}break;case 18:pt!==null&&(An?(s=pt,H_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Ea(s)):H_(pt,l.stateNode));break;case 4:c=pt,v=An,pt=l.stateNode.containerInfo,An=!0,as(s,r,l),pt=c,An=v;break;case 0:case 11:case 14:case 15:ar(2,l,r),Mt||ar(4,l,r),as(s,r,l);break;case 1:Mt||(Ci(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&zv(l,r,c)),as(s,r,l);break;case 21:as(s,r,l);break;case 22:Mt=(c=Mt)||l.memoizedState!==null,as(s,r,l),Mt=c;break;default:as(s,r,l)}}function Xv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ea(s)}catch(l){it(r,r.return,l)}}}function Zv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ea(s)}catch(l){it(r,r.return,l)}}function NC(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Jv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Jv),r;default:throw Error(i(435,s.tag))}}function Hc(s,r){var l=NC(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var v=FC.bind(null,s,c);c.then(v,v)}})}function Cn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var v=l[c],T=s,w=r,b=w;e:for(;b!==null;){switch(b.tag){case 27:if(mr(b.type)){pt=b.stateNode,An=!1;break e}break;case 5:pt=b.stateNode,An=!1;break e;case 3:case 4:pt=b.stateNode.containerInfo,An=!0;break e}b=b.return}if(pt===null)throw Error(i(160));Qv(T,w,v),pt=null,An=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)e_(r,s),r=r.sibling}var ai=null;function e_(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Cn(r,s),bn(s),c&4&&(ar(3,s,s.return),Ol(3,s),ar(5,s,s.return));break;case 1:Cn(r,s),bn(s),c&512&&(Mt||l===null||Ci(l,l.return)),c&64&&os&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var v=ai;if(Cn(r,s),bn(s),c&512&&(Mt||l===null||Ci(l,l.return)),c&4){var T=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,v=v.ownerDocument||v;t:switch(c){case"title":T=v.getElementsByTagName("title")[0],(!T||T[zi]||T[_t]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(c),v.head.insertBefore(T,v.querySelector("head > title"))),Wt(T,c,l),T[_t]=s,St(T),c=T;break e;case"link":var w=e0("link","href",v).get(c+(l.href||""));if(w){for(var b=0;b<w.length;b++)if(T=w[b],T.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&T.getAttribute("rel")===(l.rel==null?null:l.rel)&&T.getAttribute("title")===(l.title==null?null:l.title)&&T.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(b,1);break t}}T=v.createElement(c),Wt(T,c,l),v.head.appendChild(T);break;case"meta":if(w=e0("meta","content",v).get(c+(l.content||""))){for(b=0;b<w.length;b++)if(T=w[b],T.getAttribute("content")===(l.content==null?null:""+l.content)&&T.getAttribute("name")===(l.name==null?null:l.name)&&T.getAttribute("property")===(l.property==null?null:l.property)&&T.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&T.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(b,1);break t}}T=v.createElement(c),Wt(T,c,l),v.head.appendChild(T);break;default:throw Error(i(468,c))}T[_t]=s,St(T),c=T}s.stateNode=c}else t0(v,s.type,s.stateNode);else s.stateNode=Z_(v,c,s.memoizedProps);else T!==c?(T===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):T.count--,c===null?t0(v,s.type,s.stateNode):Z_(v,c,s.memoizedProps)):c===null&&s.stateNode!==null&&em(s,s.memoizedProps,l.memoizedProps)}break;case 27:Cn(r,s),bn(s),c&512&&(Mt||l===null||Ci(l,l.return)),l!==null&&c&4&&em(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Cn(r,s),bn(s),c&512&&(Mt||l===null||Ci(l,l.return)),s.flags&32){v=s.stateNode;try{jn(v,"")}catch(_e){it(s,s.return,_e)}}c&4&&s.stateNode!=null&&(v=s.memoizedProps,em(s,v,l!==null?l.memoizedProps:v)),c&1024&&(im=!0);break;case 6:if(Cn(r,s),bn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(_e){it(s,s.return,_e)}}break;case 3:if(rd=null,v=ai,ai=id(r.containerInfo),Cn(r,s),ai=v,bn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Ea(r.containerInfo)}catch(_e){it(s,s.return,_e)}im&&(im=!1,t_(s));break;case 4:c=ai,ai=id(s.stateNode.containerInfo),Cn(r,s),bn(s),ai=c;break;case 12:Cn(r,s),bn(s);break;case 31:Cn(r,s),bn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Hc(s,c)));break;case 13:Cn(r,s),bn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(jc=zt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Hc(s,c)));break;case 22:v=s.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,X=os,re=Mt;if(os=X||v,Mt=re||F,Cn(r,s),Mt=re,os=X,bn(s),c&8192)e:for(r=s.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(l===null||F||os||Mt||fo(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){F=l=r;try{if(T=F.stateNode,v)w=T.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{b=F.stateNode;var le=F.memoizedProps.style,Z=le!=null&&le.hasOwnProperty("display")?le.display:null;b.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(_e){it(F,F.return,_e)}}}else if(r.tag===6){if(l===null){F=r;try{F.stateNode.nodeValue=v?"":F.memoizedProps}catch(_e){it(F,F.return,_e)}}}else if(r.tag===18){if(l===null){F=r;try{var ee=F.stateNode;v?z_(ee,!0):z_(F.stateNode,!1)}catch(_e){it(F,F.return,_e)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Hc(s,l))));break;case 19:Cn(r,s),bn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Hc(s,c)));break;case 30:break;case 21:break;default:Cn(r,s),bn(s)}}function bn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if($v(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var v=l.stateNode,T=tm(s);Gc(s,T,v);break;case 5:var w=l.stateNode;l.flags&32&&(jn(w,""),l.flags&=-33);var b=tm(s);Gc(s,b,w);break;case 3:case 4:var F=l.stateNode.containerInfo,X=tm(s);nm(s,X,F);break;default:throw Error(i(161))}}catch(re){it(s,s.return,re)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function t_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;t_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ls(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Kv(s,r.alternate,r),r=r.sibling}function fo(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:ar(4,r,r.return),fo(r);break;case 1:Ci(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&zv(r,r.return,l),fo(r);break;case 27:Jl(r.stateNode);case 26:case 5:Ci(r,r.return),fo(r);break;case 22:r.memoizedState===null&&fo(r);break;case 30:fo(r);break;default:fo(r)}s=s.sibling}}function us(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,v=s,T=r,w=T.flags;switch(T.tag){case 0:case 11:case 15:us(v,T,l),Ol(4,T);break;case 1:if(us(v,T,l),c=T,v=c.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(X){it(c,c.return,X)}if(c=T,v=c.updateQueue,v!==null){var b=c.stateNode;try{var F=v.shared.hiddenCallbacks;if(F!==null)for(v.shared.hiddenCallbacks=null,v=0;v<F.length;v++)Dy(F[v],b)}catch(X){it(c,c.return,X)}}l&&w&64&&Hv(T),Fl(T,T.return);break;case 27:Yv(T);case 26:case 5:us(v,T,l),l&&c===null&&w&4&&jv(T),Fl(T,T.return);break;case 12:us(v,T,l);break;case 31:us(v,T,l),l&&w&4&&Xv(v,T);break;case 13:us(v,T,l),l&&w&4&&Zv(v,T);break;case 22:T.memoizedState===null&&us(v,T,l),Fl(T,T.return);break;case 30:break;default:us(v,T,l)}r=r.sibling}}function sm(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Al(l))}function rm(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Al(s))}function li(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)n_(s,r,l,c),r=r.sibling}function n_(s,r,l,c){var v=r.flags;switch(r.tag){case 0:case 11:case 15:li(s,r,l,c),v&2048&&Ol(9,r);break;case 1:li(s,r,l,c);break;case 3:li(s,r,l,c),v&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Al(s)));break;case 12:if(v&2048){li(s,r,l,c),s=r.stateNode;try{var T=r.memoizedProps,w=T.id,b=T.onPostCommit;typeof b=="function"&&b(w,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(F){it(r,r.return,F)}}else li(s,r,l,c);break;case 31:li(s,r,l,c);break;case 13:li(s,r,l,c);break;case 23:break;case 22:T=r.stateNode,w=r.alternate,r.memoizedState!==null?T._visibility&2?li(s,r,l,c):ql(s,r):T._visibility&2?li(s,r,l,c):(T._visibility|=2,ca(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),v&2048&&sm(w,r);break;case 24:li(s,r,l,c),v&2048&&rm(r.alternate,r);break;default:li(s,r,l,c)}}function ca(s,r,l,c,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var T=s,w=r,b=l,F=c,X=w.flags;switch(w.tag){case 0:case 11:case 15:ca(T,w,b,F,v),Ol(8,w);break;case 23:break;case 22:var re=w.stateNode;w.memoizedState!==null?re._visibility&2?ca(T,w,b,F,v):ql(T,w):(re._visibility|=2,ca(T,w,b,F,v)),v&&X&2048&&sm(w.alternate,w);break;case 24:ca(T,w,b,F,v),v&&X&2048&&rm(w.alternate,w);break;default:ca(T,w,b,F,v)}r=r.sibling}}function ql(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,v=c.flags;switch(c.tag){case 22:ql(l,c),v&2048&&sm(c.alternate,c);break;case 24:ql(l,c),v&2048&&rm(c.alternate,c);break;default:ql(l,c)}r=r.sibling}}var Bl=8192;function da(s,r,l){if(s.subtreeFlags&Bl)for(s=s.child;s!==null;)i_(s,r,l),s=s.sibling}function i_(s,r,l){switch(s.tag){case 26:da(s,r,l),s.flags&Bl&&s.memoizedState!==null&&gb(l,ai,s.memoizedState,s.memoizedProps);break;case 5:da(s,r,l);break;case 3:case 4:var c=ai;ai=id(s.stateNode.containerInfo),da(s,r,l),ai=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Bl,Bl=16777216,da(s,r,l),Bl=c):da(s,r,l));break;default:da(s,r,l)}}function s_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Gl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Gt=c,o_(c,s)}s_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)r_(s),s=s.sibling}function r_(s){switch(s.tag){case 0:case 11:case 15:Gl(s),s.flags&2048&&ar(9,s,s.return);break;case 3:Gl(s);break;case 12:Gl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,zc(s)):Gl(s);break;default:Gl(s)}}function zc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Gt=c,o_(c,s)}s_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:ar(8,r,r.return),zc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,zc(r));break;default:zc(r)}s=s.sibling}}function o_(s,r){for(;Gt!==null;){var l=Gt;switch(l.tag){case 0:case 11:case 15:ar(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Al(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Gt=c;else e:for(l=s;Gt!==null;){c=Gt;var v=c.sibling,T=c.return;if(Wv(c),c===l){Gt=null;break e}if(v!==null){v.return=T,Gt=v;break e}Gt=T}}}var MC={getCacheForType:function(s){var r=Jt(It),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return Jt(It).controller.signal}},DC=typeof WeakMap=="function"?WeakMap:Map,Xe=0,lt=null,Ve=null,Fe=0,nt=0,On=null,lr=!1,fa=!1,om=!1,cs=0,xt=0,ur=0,ho=0,am=0,Fn=0,ha=0,Hl=null,In=null,lm=!1,jc=0,a_=0,$c=1/0,Yc=null,cr=null,Lt=0,dr=null,ma=null,ds=0,um=0,cm=null,l_=null,zl=0,dm=null;function qn(){return(Xe&2)!==0&&Fe!==0?Fe&-Fe:O.T!==null?ym():Hi()}function u_(){if(Fn===0)if((Fe&536870912)===0||Ge){var s=gi;gi<<=1,(gi&3932160)===0&&(gi=262144),Fn=s}else Fn=536870912;return s=Ln.current,s!==null&&(s.flags|=32),Fn}function Rn(s,r,l){(s===lt&&(nt===2||nt===9)||s.cancelPendingCommit!==null)&&(pa(s,0),fr(s,Fe,Fn,!1)),Us(s,l),((Xe&2)===0||s!==lt)&&(s===lt&&((Xe&2)===0&&(ho|=l),xt===4&&fr(s,Fe,Fn,!1)),bi(s))}function c_(s,r,l){if((Xe&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||ks(s,r),v=c?UC(s,r):hm(s,r,!0),T=c;do{if(v===0){fa&&!c&&fr(s,r,0,!1);break}else{if(l=s.current.alternate,T&&!PC(l)){v=hm(s,r,!1),T=!1;continue}if(v===2){if(T=r,s.errorRecoveryDisabledLanes&T)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var b=s;v=Hl;var F=b.current.memoizedState.isDehydrated;if(F&&(pa(b,w).flags|=256),w=hm(b,w,!1),w!==2){if(om&&!F){b.errorRecoveryDisabledLanes|=T,ho|=T,v=4;break e}T=In,In=v,T!==null&&(In===null?In=T:In.push.apply(In,T))}v=w}if(T=!1,v!==2)continue}}if(v===1){pa(s,0),fr(s,r,0,!0);break}e:{switch(c=s,T=v,T){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:fr(c,r,Fn,!lr);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=jc+300-zt(),10<v)){if(fr(c,r,Fn,!lr),Hn(c,0,!0)!==0)break e;ds=r,c.timeoutHandle=B_(d_.bind(null,c,l,In,Yc,lm,r,Fn,ho,ha,lr,T,"Throttled",-0,0),v);break e}d_(c,l,In,Yc,lm,r,Fn,ho,ha,lr,T,null,-0,0)}}break}while(!0);bi(s)}function d_(s,r,l,c,v,T,w,b,F,X,re,le,Z,ee){if(s.timeoutHandle=-1,le=r.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ft},i_(r,T,le);var _e=(T&62914560)===T?jc-zt():(T&4194048)===T?a_-zt():0;if(_e=yb(le,_e),_e!==null){ds=T,s.cancelPendingCommit=_e(__.bind(null,s,r,T,l,c,v,w,b,F,re,le,null,Z,ee)),fr(s,T,w,!X);return}}__(s,r,T,l,c,v,w,b,F)}function PC(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var v=l[c],T=v.getSnapshot;v=v.value;try{if(!kn(T(),v))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function fr(s,r,l,c){r&=~am,r&=~ho,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var v=r;0<v;){var T=31-pn(v),w=1<<T;c[T]=-1,v&=~w}l!==0&&sl(s,l,r)}function Jc(){return(Xe&6)===0?(jl(0),!1):!0}function fm(){if(Ve!==null){if(nt===0)var s=Ve.return;else s=Ve,es=io=null,Ih(s),ra=null,bl=0,s=Ve;for(;s!==null;)Gv(s.alternate,s),s=s.return;Ve=null}}function pa(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,ZC(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ds=0,fm(),lt=s,Ve=l=Xi(s.current,null),Fe=r,nt=0,On=null,lr=!1,fa=ks(s,r),om=!1,ha=Fn=am=ho=ur=xt=0,In=Hl=null,lm=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var v=31-pn(c),T=1<<v;r|=s[v],c&=~T}return cs=r,pc(),l}function f_(s,r){Pe=null,O.H=Ul,r===sa||r===Sc?(r=Iy(),nt=3):r===gh?(r=Iy(),nt=4):nt=r===zh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,On=r,Ve===null&&(xt=1,Vc(s,Yn(r,s.current)))}function h_(){var s=Ln.current;return s===null?!0:(Fe&4194048)===Fe?Qn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?s===Qn:!1}function m_(){var s=O.H;return O.H=Ul,s===null?Ul:s}function p_(){var s=O.A;return O.A=MC,s}function Kc(){xt=4,lr||(Fe&4194048)!==Fe&&Ln.current!==null||(fa=!0),(ur&134217727)===0&&(ho&134217727)===0||lt===null||fr(lt,Fe,Fn,!1)}function hm(s,r,l){var c=Xe;Xe|=2;var v=m_(),T=p_();(lt!==s||Fe!==r)&&(Yc=null,pa(s,r)),r=!1;var w=xt;e:do try{if(nt!==0&&Ve!==null){var b=Ve,F=On;switch(nt){case 8:fm(),w=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var X=nt;if(nt=0,On=null,ga(s,b,F,X),l&&fa){w=0;break e}break;default:X=nt,nt=0,On=null,ga(s,b,F,X)}}kC(),w=xt;break}catch(re){f_(s,re)}while(!0);return r&&s.shellSuspendCounter++,es=io=null,Xe=c,O.H=v,O.A=T,Ve===null&&(lt=null,Fe=0,pc()),w}function kC(){for(;Ve!==null;)g_(Ve)}function UC(s,r){var l=Xe;Xe|=2;var c=m_(),v=p_();lt!==s||Fe!==r?(Yc=null,$c=zt()+500,pa(s,r)):fa=ks(s,r);e:do try{if(nt!==0&&Ve!==null){r=Ve;var T=On;t:switch(nt){case 1:nt=0,On=null,ga(s,r,T,1);break;case 2:case 9:if(Cy(T)){nt=0,On=null,y_(r);break}r=function(){nt!==2&&nt!==9||lt!==s||(nt=7),bi(s)},T.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Cy(T)?(nt=0,On=null,y_(r)):(nt=0,On=null,ga(s,r,T,7));break;case 5:var w=null;switch(Ve.tag){case 26:w=Ve.memoizedState;case 5:case 27:var b=Ve;if(w?n0(w):b.stateNode.complete){nt=0,On=null;var F=b.sibling;if(F!==null)Ve=F;else{var X=b.return;X!==null?(Ve=X,Wc(X)):Ve=null}break t}}nt=0,On=null,ga(s,r,T,5);break;case 6:nt=0,On=null,ga(s,r,T,6);break;case 8:fm(),xt=6;break e;default:throw Error(i(462))}}LC();break}catch(re){f_(s,re)}while(!0);return es=io=null,O.H=c,O.A=v,Xe=l,Ve!==null?0:(lt=null,Fe=0,pc(),xt)}function LC(){for(;Ve!==null&&!Ff();)g_(Ve)}function g_(s){var r=qv(s.alternate,s,cs);s.memoizedProps=s.pendingProps,r===null?Wc(s):Ve=r}function y_(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=kv(l,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=kv(l,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:Ih(r);default:Gv(l,r),r=Ve=py(r,cs),r=qv(l,r,cs)}s.memoizedProps=s.pendingProps,r===null?Wc(s):Ve=r}function ga(s,r,l,c){es=io=null,Ih(r),ra=null,bl=0;var v=r.return;try{if(wC(s,v,r,l,Fe)){xt=1,Vc(s,Yn(l,s.current)),Ve=null;return}}catch(T){if(v!==null)throw Ve=v,T;xt=1,Vc(s,Yn(l,s.current)),Ve=null;return}r.flags&32768?(Ge||c===1?s=!0:fa||(Fe&536870912)!==0?s=!1:(lr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Ln.current,c!==null&&c.tag===13&&(c.flags|=16384))),v_(r,s)):Wc(r)}function Wc(s){var r=s;do{if((r.flags&32768)!==0){v_(r,lr);return}s=r.return;var l=bC(r.alternate,r,cs);if(l!==null){Ve=l;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=s}while(r!==null);xt===0&&(xt=5)}function v_(s,r){do{var l=IC(s.alternate,s);if(l!==null){l.flags&=32767,Ve=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ve=s;return}Ve=s=l}while(s!==null);xt=6,Ve=null}function __(s,r,l,c,v,T,w,b,F){s.cancelPendingCommit=null;do Qc();while(Lt!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(T=r.lanes|r.childLanes,T|=th,jt(s,l,T,w,b,F),s===lt&&(Ve=lt=null,Fe=0),ma=r,dr=s,ds=l,um=T,cm=v,l_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,qC(Bi,function(){return w_(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,v=te.p,te.p=2,w=Xe,Xe|=4;try{RC(s,r,l)}finally{Xe=w,te.p=v,O.T=c}}Lt=1,T_(),E_(),x_()}}function T_(){if(Lt===1){Lt=0;var s=dr,r=ma,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=O.T,O.T=null;var c=te.p;te.p=2;var v=Xe;Xe|=4;try{e_(r,s);var T=Am,w=oy(s.containerInfo),b=T.focusedElem,F=T.selectionRange;if(w!==b&&b&&b.ownerDocument&&ry(b.ownerDocument.documentElement,b)){if(F!==null&&Wf(b)){var X=F.start,re=F.end;if(re===void 0&&(re=X),"selectionStart"in b)b.selectionStart=X,b.selectionEnd=Math.min(re,b.value.length);else{var le=b.ownerDocument||document,Z=le&&le.defaultView||window;if(Z.getSelection){var ee=Z.getSelection(),_e=b.textContent.length,Ce=Math.min(F.start,_e),at=F.end===void 0?Ce:Math.min(F.end,_e);!ee.extend&&Ce>at&&(w=at,at=Ce,Ce=w);var $=sy(b,Ce),H=sy(b,at);if($&&H&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==H.node||ee.focusOffset!==H.offset)){var Q=le.createRange();Q.setStart($.node,$.offset),ee.removeAllRanges(),Ce>at?(ee.addRange(Q),ee.extend(H.node,H.offset)):(Q.setEnd(H.node,H.offset),ee.addRange(Q))}}}}for(le=[],ee=b;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<le.length;b++){var ae=le[b];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}ud=!!wm,Am=wm=null}finally{Xe=v,te.p=c,O.T=l}}s.current=r,Lt=2}}function E_(){if(Lt===2){Lt=0;var s=dr,r=ma,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=O.T,O.T=null;var c=te.p;te.p=2;var v=Xe;Xe|=4;try{Kv(s,r.alternate,r)}finally{Xe=v,te.p=c,O.T=l}}Lt=3}}function x_(){if(Lt===4||Lt===3){Lt=0,el();var s=dr,r=ma,l=ds,c=l_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Lt=5:(Lt=0,ma=dr=null,S_(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(cr=null),ol(l),r=r.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Ds,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=O.T,v=te.p,te.p=2,O.T=null;try{for(var T=s.onRecoverableError,w=0;w<c.length;w++){var b=c[w];T(b.value,{componentStack:b.stack})}}finally{O.T=r,te.p=v}}(ds&3)!==0&&Qc(),bi(s),v=s.pendingLanes,(l&261930)!==0&&(v&42)!==0?s===dm?zl++:(zl=0,dm=s):zl=0,jl(0)}}function S_(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Al(r)))}function Qc(){return T_(),E_(),x_(),w_()}function w_(){if(Lt!==5)return!1;var s=dr,r=um;um=0;var l=ol(ds),c=O.T,v=te.p;try{te.p=32>l?32:l,O.T=null,l=cm,cm=null;var T=dr,w=ds;if(Lt=0,ma=dr=null,ds=0,(Xe&6)!==0)throw Error(i(331));var b=Xe;if(Xe|=4,r_(T.current),n_(T,T.current,w,l),Xe=b,jl(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Ds,T)}catch{}return!0}finally{te.p=v,O.T=c,S_(s,r)}}function A_(s,r,l){r=Yn(l,r),r=Hh(s.stateNode,r,2),s=sr(s,r,2),s!==null&&(Us(s,2),bi(s))}function it(s,r,l){if(s.tag===3)A_(s,s,l);else for(;r!==null;){if(r.tag===3){A_(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(cr===null||!cr.has(c))){s=Yn(l,s),l=Cv(2),c=sr(r,l,2),c!==null&&(bv(l,c,r,s),Us(c,2),bi(c));break}}r=r.return}}function mm(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new DC;var v=new Set;c.set(r,v)}else v=c.get(r),v===void 0&&(v=new Set,c.set(r,v));v.has(l)||(om=!0,v.add(l),s=VC.bind(null,s,r,l),r.then(s,s))}function VC(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,lt===s&&(Fe&l)===l&&(xt===4||xt===3&&(Fe&62914560)===Fe&&300>zt()-jc?(Xe&2)===0&&pa(s,0):am|=l,ha===Fe&&(ha=0)),bi(s)}function C_(s,r){r===0&&(r=il()),s=eo(s,r),s!==null&&(Us(s,r),bi(s))}function OC(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),C_(s,l)}function FC(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,v=s.memoizedState;v!==null&&(l=v.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),C_(s,l)}function qC(s,r){return Fr(s,r)}var Xc=null,ya=null,pm=!1,Zc=!1,gm=!1,hr=0;function bi(s){s!==ya&&s.next===null&&(ya===null?Xc=ya=s:ya=ya.next=s),Zc=!0,pm||(pm=!0,GC())}function jl(s,r){if(!gm&&Zc){gm=!0;do for(var l=!1,c=Xc;c!==null;){if(s!==0){var v=c.pendingLanes;if(v===0)var T=0;else{var w=c.suspendedLanes,b=c.pingedLanes;T=(1<<31-pn(42|s)+1)-1,T&=v&~(w&~b),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(l=!0,N_(c,T))}else T=Fe,T=Hn(c,c===lt?T:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(T&3)===0||ks(c,T)||(l=!0,N_(c,T));c=c.next}while(l);gm=!1}}function BC(){b_()}function b_(){Zc=pm=!1;var s=0;hr!==0&&XC()&&(s=hr);for(var r=zt(),l=null,c=Xc;c!==null;){var v=c.next,T=I_(c,r);T===0?(c.next=null,l===null?Xc=v:l.next=v,v===null&&(ya=l)):(l=c,(s!==0||(T&3)!==0)&&(Zc=!0)),c=v}Lt!==0&&Lt!==5||jl(s),hr!==0&&(hr=0)}function I_(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,v=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var w=31-pn(T),b=1<<w,F=v[w];F===-1?((b&l)===0||(b&c)!==0)&&(v[w]=Vo(b,r)):F<=r&&(s.expiredLanes|=b),T&=~b}if(r=lt,l=Fe,l=Hn(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(nt===2||nt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Lo(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||ks(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Lo(c),ol(l)){case 2:case 8:l=Ot;break;case 32:l=Bi;break;case 268435456:l=tl;break;default:l=Bi}return c=R_.bind(null,s),l=Fr(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Lo(c),s.callbackPriority=2,s.callbackNode=null,2}function R_(s,r){if(Lt!==0&&Lt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Qc()&&s.callbackNode!==l)return null;var c=Fe;return c=Hn(s,s===lt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(c_(s,c,r),I_(s,zt()),s.callbackNode!=null&&s.callbackNode===l?R_.bind(null,s):null)}function N_(s,r){if(Qc())return null;c_(s,r,!0)}function GC(){eb(function(){(Xe&6)!==0?Fr(Ut,BC):b_()})}function ym(){if(hr===0){var s=na;s===0&&(s=Br,Br<<=1,(Br&261888)===0&&(Br=256)),hr=s}return hr}function M_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ei(""+s)}function D_(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function HC(s,r,l,c,v){if(r==="submit"&&l&&l.stateNode===v){var T=M_((v[$t]||null).action),w=c.submitter;w&&(r=(r=w[$t]||null)?M_(r.formAction):w.getAttribute("formAction"),r!==null&&(T=r,w=null));var b=new Yr("action","action",null,c,v);s.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hr!==0){var F=w?D_(v,w):new FormData(v);Vh(l,{pending:!0,data:F,method:v.method,action:T},null,F)}}else typeof T=="function"&&(b.preventDefault(),F=w?D_(v,w):new FormData(v),Vh(l,{pending:!0,data:F,method:v.method,action:T},T,F))},currentTarget:v}]})}}for(var vm=0;vm<eh.length;vm++){var _m=eh[vm],zC=_m.toLowerCase(),jC=_m[0].toUpperCase()+_m.slice(1);oi(zC,"on"+jC)}oi(uy,"onAnimationEnd"),oi(cy,"onAnimationIteration"),oi(dy,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(aC,"onTransitionRun"),oi(lC,"onTransitionStart"),oi(uC,"onTransitionCancel"),oi(fy,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$C=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function P_(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],v=c.event;c=c.listeners;e:{var T=void 0;if(r)for(var w=c.length-1;0<=w;w--){var b=c[w],F=b.instance,X=b.currentTarget;if(b=b.listener,F!==T&&v.isPropagationStopped())break e;T=b,v.currentTarget=X;try{T(v)}catch(re){mc(re)}v.currentTarget=null,T=F}else for(w=0;w<c.length;w++){if(b=c[w],F=b.instance,X=b.currentTarget,b=b.listener,F!==T&&v.isPropagationStopped())break e;T=b,v.currentTarget=X;try{T(v)}catch(re){mc(re)}v.currentTarget=null,T=F}}}}function Oe(s,r){var l=r[Os];l===void 0&&(l=r[Os]=new Set);var c=s+"__bubble";l.has(c)||(k_(r,s,2,!1),l.add(c))}function Tm(s,r,l){var c=0;r&&(c|=4),k_(l,s,c,r)}var ed="_reactListening"+Math.random().toString(36).slice(2);function Em(s){if(!s[ed]){s[ed]=!0,Oo.forEach(function(l){l!=="selectionchange"&&($C.has(l)||Tm(l,!1,s),Tm(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[ed]||(r[ed]=!0,Tm("selectionchange",!1,r))}}function k_(s,r,l,c){switch(u0(r)){case 2:var v=Tb;break;case 8:v=Eb;break;default:v=Lm}l=v.bind(null,r,l,s),v=void 0,!ml||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),c?v!==void 0?s.addEventListener(r,l,{capture:!0,passive:v}):s.addEventListener(r,l,!0):v!==void 0?s.addEventListener(r,l,{passive:v}):s.addEventListener(r,l,!1)}function xm(s,r,l,c,v){var T=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var b=c.stateNode.containerInfo;if(b===v)break;if(w===4)for(w=c.return;w!==null;){var F=w.tag;if((F===3||F===4)&&w.stateNode.containerInfo===v)return;w=w.return}for(;b!==null;){if(w=ji(b),w===null)return;if(F=w.tag,F===5||F===6||F===26||F===27){c=T=w;continue e}b=b.parentNode}}c=c.return}Xu(function(){var X=T,re=Ho(l),le=[];e:{var Z=hy.get(s);if(Z!==void 0){var ee=Yr,_e=s;switch(s){case"keypress":if($r(l)===0)break e;case"keydown":case"keyup":ee=ac;break;case"focusin":_e="focus",ee=Js;break;case"focusout":_e="blur",ee=Js;break;case"beforeblur":case"afterblur":ee=Js;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=uc;break;case uy:case cy:case dy:ee=$o;break;case fy:ee=Yo;break;case"scroll":case"scrollend":ee=Zu;break;case"wheel":ee=dc;break;case"copy":case"cut":case"paste":ee=ic;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=_l;break;case"toggle":case"beforetoggle":ee=Ws}var Ce=(r&4)!==0,at=!Ce&&(s==="scroll"||s==="scrollend"),$=Ce?Z!==null?Z+"Capture":null:Z;Ce=[];for(var H=X,Q;H!==null;){var ae=H;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||$===null||(ae=Sn(H,$),ae!=null&&Ce.push(Yl(H,ae,Q))),at)break;H=H.return}0<Ce.length&&(Z=new ee(Z,_e,null,l,re),le.push({event:Z,listeners:Ce}))}}if((r&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",ee=s==="mouseout"||s==="pointerout",Z&&l!==Go&&(_e=l.relatedTarget||l.fromElement)&&(ji(_e)||_e[vi]))break e;if((ee||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,ee?(_e=l.relatedTarget||l.toElement,ee=X,_e=_e?ji(_e):null,_e!==null&&(at=a(_e),Ce=_e.tag,_e!==at||Ce!==5&&Ce!==27&&Ce!==6)&&(_e=null)):(ee=null,_e=X),ee!==_e)){if(Ce=ec,ae="onMouseLeave",$="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(Ce=_l,ae="onPointerLeave",$="onPointerEnter",H="pointer"),at=ee==null?Z:Hr(ee),Q=_e==null?Z:Hr(_e),Z=new Ce(ae,H+"leave",ee,l,re),Z.target=at,Z.relatedTarget=Q,ae=null,ji(re)===X&&(Ce=new Ce($,H+"enter",_e,l,re),Ce.target=Q,Ce.relatedTarget=at,ae=Ce),at=ae,ee&&_e)t:{for(Ce=YC,$=ee,H=_e,Q=0,ae=$;ae;ae=Ce(ae))Q++;ae=0;for(var we=H;we;we=Ce(we))ae++;for(;0<Q-ae;)$=Ce($),Q--;for(;0<ae-Q;)H=Ce(H),ae--;for(;Q--;){if($===H||H!==null&&$===H.alternate){Ce=$;break t}$=Ce($),H=Ce(H)}Ce=null}else Ce=null;ee!==null&&U_(le,Z,ee,Ce,!1),_e!==null&&at!==null&&U_(le,at,_e,Ce,!0)}}e:{if(Z=X?Hr(X):window,ee=Z.nodeName&&Z.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Z.type==="file")var Ye=Xg;else if(wn(Z))if(Zg)Ye=sC;else{Ye=nC;var xe=tC}else ee=Z.nodeName,!ee||ee.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&fl(X.elementType)&&(Ye=Xg):Ye=iC;if(Ye&&(Ye=Ye(s,X))){Qr(le,Ye,l,re);break e}xe&&xe(s,Z,X),s==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&Bo(Z,"number",Z.value)}switch(xe=X?Hr(X):window,s){case"focusin":(wn(xe)||xe.contentEditable==="true")&&(Jo=xe,Qf=X,xl=null);break;case"focusout":xl=Qf=Jo=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,ay(le,l,re);break;case"selectionchange":if(oC)break;case"keydown":case"keyup":ay(le,l,re)}var Ue;if(x)e:{switch(s){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Le?Ze(s,l)&&(qe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(qe="onCompositionStart");qe&&(K&&l.locale!=="ko"&&(Le||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Le&&(Ue=zs()):(Pn=re,zo="value"in Pn?Pn.value:Pn.textContent,Le=!0)),xe=td(X,qe),0<xe.length&&(qe=new gl(qe,s,null,l,re),le.push({event:qe,listeners:xe}),Ue?qe.data=Ue:(Ue=bt(l),Ue!==null&&(qe.data=Ue)))),(Ue=I?qt(s,l):Bt(s,l))&&(qe=td(X,"onBeforeInput"),0<qe.length&&(xe=new gl("onBeforeInput","beforeinput",null,l,re),le.push({event:xe,listeners:qe}),xe.data=Ue)),HC(le,s,X,l,re)}P_(le,r)})}function Yl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function td(s,r){for(var l=r+"Capture",c=[];s!==null;){var v=s,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=Sn(s,l),v!=null&&c.unshift(Yl(s,v,T)),v=Sn(s,r),v!=null&&c.push(Yl(s,v,T))),s.tag===3)return c;s=s.return}return[]}function YC(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function U_(s,r,l,c,v){for(var T=r._reactName,w=[];l!==null&&l!==c;){var b=l,F=b.alternate,X=b.stateNode;if(b=b.tag,F!==null&&F===c)break;b!==5&&b!==26&&b!==27||X===null||(F=X,v?(X=Sn(l,T),X!=null&&w.unshift(Yl(l,X,F))):v||(X=Sn(l,T),X!=null&&w.push(Yl(l,X,F)))),l=l.return}w.length!==0&&s.push({event:r,listeners:w})}var JC=/\r\n?/g,KC=/\u0000|\uFFFD/g;function L_(s){return(typeof s=="string"?s:""+s).replace(JC,`
`).replace(KC,"")}function V_(s,r){return r=L_(r),L_(s)===r}function ot(s,r,l,c,v,T){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||jn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&jn(s,""+c);break;case"className":Bs(s,"class",c);break;case"tabIndex":Bs(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(s,l,c);break;case"style":Wu(s,c,T);break;case"data":if(r!=="object"){Bs(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ei(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(l==="formAction"?(r!=="input"&&ot(s,r,"name",v.name,v,null),ot(s,r,"formEncType",v.formEncType,v,null),ot(s,r,"formMethod",v.formMethod,v,null),ot(s,r,"formTarget",v.formTarget,v,null)):(ot(s,r,"encType",v.encType,v,null),ot(s,r,"method",v.method,v,null),ot(s,r,"target",v.target,v,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ei(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Ft);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Ei(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Oe("beforetoggle",s),Oe("toggle",s),qs(s,"popover",c);break;case"xlinkActuate":zn(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":zn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":zn(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":zn(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":zn(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":zn(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":zn(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":zn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":zn(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":qs(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=jf.get(l)||l,qs(s,l,c))}}function Sm(s,r,l,c,v,T){switch(l){case"style":Wu(s,c,T);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?jn(s,c):(typeof c=="number"||typeof c=="bigint")&&jn(s,""+c);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fs.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),r=l.slice(2,v?l.length-7:void 0),T=s[$t]||null,T=T!=null?T[l]:null,typeof T=="function"&&s.removeEventListener(r,T,v),typeof c=="function")){typeof T!="function"&&T!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,v);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):qs(s,l,c)}}}function Wt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",s),Oe("load",s);var c=!1,v=!1,T;for(T in l)if(l.hasOwnProperty(T)){var w=l[T];if(w!=null)switch(T){case"src":c=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(s,r,T,w,l,null)}}v&&ot(s,r,"srcSet",l.srcSet,l,null),c&&ot(s,r,"src",l.src,l,null);return;case"input":Oe("invalid",s);var b=T=w=v=null,F=null,X=null;for(c in l)if(l.hasOwnProperty(c)){var re=l[c];if(re!=null)switch(c){case"name":v=re;break;case"type":w=re;break;case"checked":F=re;break;case"defaultChecked":X=re;break;case"value":T=re;break;case"defaultValue":b=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,r));break;default:ot(s,r,c,re,l,null)}}zr(s,T,b,F,X,w,v,!1);return;case"select":Oe("invalid",s),c=w=T=null;for(v in l)if(l.hasOwnProperty(v)&&(b=l[v],b!=null))switch(v){case"value":T=b;break;case"defaultValue":w=b;break;case"multiple":c=b;default:ot(s,r,v,b,l,null)}r=T,l=w,s.multiple=!!c,r!=null?$e(s,!!c,r,!1):l!=null&&$e(s,!!c,l,!0);return;case"textarea":Oe("invalid",s),T=v=c=null;for(w in l)if(l.hasOwnProperty(w)&&(b=l[w],b!=null))switch(w){case"value":c=b;break;case"defaultValue":v=b;break;case"children":T=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:ot(s,r,w,b,l,null)}Hs(s,c,v,T);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(c=l[F],c!=null))switch(F){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(s,r,F,c,l,null)}return;case"dialog":Oe("beforetoggle",s),Oe("toggle",s),Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":Oe("load",s);break;case"video":case"audio":for(c=0;c<$l.length;c++)Oe($l[c],s);break;case"image":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"embed":case"source":case"link":Oe("error",s),Oe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(c=l[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(s,r,X,c,l,null)}return;default:if(fl(r)){for(re in l)l.hasOwnProperty(re)&&(c=l[re],c!==void 0&&Sm(s,r,re,c,l,void 0));return}}for(b in l)l.hasOwnProperty(b)&&(c=l[b],c!=null&&ot(s,r,b,c,l,null))}function WC(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,w=null,b=null,F=null,X=null,re=null;for(ee in l){var le=l[ee];if(l.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":F=le;default:c.hasOwnProperty(ee)||ot(s,r,ee,null,c,le)}}for(var Z in c){var ee=c[Z];if(le=l[Z],c.hasOwnProperty(Z)&&(ee!=null||le!=null))switch(Z){case"type":T=ee;break;case"name":v=ee;break;case"checked":X=ee;break;case"defaultChecked":re=ee;break;case"value":w=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,r));break;default:ee!==le&&ot(s,r,Z,ee,c,le)}}Gs(s,w,b,F,X,re,T,v);return;case"select":ee=w=b=Z=null;for(T in l)if(F=l[T],l.hasOwnProperty(T)&&F!=null)switch(T){case"value":break;case"multiple":ee=F;default:c.hasOwnProperty(T)||ot(s,r,T,null,c,F)}for(v in c)if(T=c[v],F=l[v],c.hasOwnProperty(v)&&(T!=null||F!=null))switch(v){case"value":Z=T;break;case"defaultValue":b=T;break;case"multiple":w=T;default:T!==F&&ot(s,r,v,T,c,F)}r=b,l=w,c=ee,Z!=null?$e(s,!!l,Z,!1):!!c!=!!l&&(r!=null?$e(s,!!l,r,!0):$e(s,!!l,l?[]:"",!1));return;case"textarea":ee=Z=null;for(b in l)if(v=l[b],l.hasOwnProperty(b)&&v!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ot(s,r,b,null,c,v)}for(w in c)if(v=c[w],T=l[w],c.hasOwnProperty(w)&&(v!=null||T!=null))switch(w){case"value":Z=v;break;case"defaultValue":ee=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==T&&ot(s,r,w,v,c,T)}jr(s,Z,ee);return;case"option":for(var _e in l)if(Z=l[_e],l.hasOwnProperty(_e)&&Z!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":s.selected=!1;break;default:ot(s,r,_e,null,c,Z)}for(F in c)if(Z=c[F],ee=l[F],c.hasOwnProperty(F)&&Z!==ee&&(Z!=null||ee!=null))switch(F){case"selected":s.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:ot(s,r,F,Z,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in l)Z=l[Ce],l.hasOwnProperty(Ce)&&Z!=null&&!c.hasOwnProperty(Ce)&&ot(s,r,Ce,null,c,Z);for(X in c)if(Z=c[X],ee=l[X],c.hasOwnProperty(X)&&Z!==ee&&(Z!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:ot(s,r,X,Z,c,ee)}return;default:if(fl(r)){for(var at in l)Z=l[at],l.hasOwnProperty(at)&&Z!==void 0&&!c.hasOwnProperty(at)&&Sm(s,r,at,void 0,c,Z);for(re in c)Z=c[re],ee=l[re],!c.hasOwnProperty(re)||Z===ee||Z===void 0&&ee===void 0||Sm(s,r,re,Z,c,ee);return}}for(var $ in l)Z=l[$],l.hasOwnProperty($)&&Z!=null&&!c.hasOwnProperty($)&&ot(s,r,$,null,c,Z);for(le in c)Z=c[le],ee=l[le],!c.hasOwnProperty(le)||Z===ee||Z==null&&ee==null||ot(s,r,le,Z,c,ee)}function O_(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QC(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var v=l[c],T=v.transferSize,w=v.initiatorType,b=v.duration;if(T&&b&&O_(w)){for(w=0,b=v.responseEnd,c+=1;c<l.length;c++){var F=l[c],X=F.startTime;if(X>b)break;var re=F.transferSize,le=F.initiatorType;re&&O_(le)&&(F=F.responseEnd,w+=re*(F<b?1:(b-X)/(F-X)))}if(--c,r+=8*(T+w)/(v.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var wm=null,Am=null;function nd(s){return s.nodeType===9?s:s.ownerDocument}function F_(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q_(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Cm(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var bm=null;function XC(){var s=window.event;return s&&s.type==="popstate"?s===bm?!1:(bm=s,!0):(bm=null,!1)}var B_=typeof setTimeout=="function"?setTimeout:void 0,ZC=typeof clearTimeout=="function"?clearTimeout:void 0,G_=typeof Promise=="function"?Promise:void 0,eb=typeof queueMicrotask=="function"?queueMicrotask:typeof G_<"u"?function(s){return G_.resolve(null).then(s).catch(tb)}:B_;function tb(s){setTimeout(function(){throw s})}function mr(s){return s==="head"}function H_(s,r){var l=r,c=0;do{var v=l.nextSibling;if(s.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(v),Ea(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Jl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Jl(l);for(var T=l.firstChild;T;){var w=T.nextSibling,b=T.nodeName;T[zi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=w}}else l==="body"&&Jl(s.ownerDocument.body);l=v}while(l);Ea(r)}function z_(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Im(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Im(l),Gr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function nb(s,r,l,c){for(;s.nodeType===1;){var v=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[zi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=Xn(s.nextSibling),s===null)break}return null}function ib(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Xn(s.nextSibling),s===null))return null;return s}function j_(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Xn(s.nextSibling),s===null))return null;return s}function Rm(s){return s.data==="$?"||s.data==="$~"}function Nm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function sb(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Xn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Mm=null;function $_(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Xn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function Y_(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function J_(s,r,l){switch(r=nd(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Jl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Gr(s)}var Zn=new Map,K_=new Set;function id(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var fs=te.d;te.d={f:rb,r:ob,D:ab,C:lb,L:ub,m:cb,X:fb,S:db,M:hb};function rb(){var s=fs.f(),r=Jc();return s||r}function ob(s){var r=$i(s);r!==null&&r.tag===5&&r.type==="form"?fv(r):fs.r(s)}var va=typeof document>"u"?null:document;function W_(s,r,l){var c=va;if(c&&typeof r=="string"&&r){var v=Tt(r);v='link[rel="'+s+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),K_.has(v)||(K_.add(v),s={rel:s,crossOrigin:l,href:r},c.querySelector(v)===null&&(r=c.createElement("link"),Wt(r,"link",s),St(r),c.head.appendChild(r)))}}function ab(s){fs.D(s),W_("dns-prefetch",s,null)}function lb(s,r){fs.C(s,r),W_("preconnect",s,r)}function ub(s,r,l){fs.L(s,r,l);var c=va;if(c&&s&&r){var v='link[rel="preload"][as="'+Tt(r)+'"]';r==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Tt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Tt(l.imageSizes)+'"]')):v+='[href="'+Tt(s)+'"]';var T=v;switch(r){case"style":T=_a(s);break;case"script":T=Ta(s)}Zn.has(T)||(s=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Zn.set(T,s),c.querySelector(v)!==null||r==="style"&&c.querySelector(Kl(T))||r==="script"&&c.querySelector(Wl(T))||(r=c.createElement("link"),Wt(r,"link",s),St(r),c.head.appendChild(r)))}}function cb(s,r){fs.m(s,r);var l=va;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+Tt(c)+'"][href="'+Tt(s)+'"]',T=v;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ta(s)}if(!Zn.has(T)&&(s=E({rel:"modulepreload",href:s},r),Zn.set(T,s),l.querySelector(v)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Wl(T)))return}c=l.createElement("link"),Wt(c,"link",s),St(c),l.head.appendChild(c)}}}function db(s,r,l){fs.S(s,r,l);var c=va;if(c&&s){var v=si(c).hoistableStyles,T=_a(s);r=r||"default";var w=v.get(T);if(!w){var b={loading:0,preload:null};if(w=c.querySelector(Kl(T)))b.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Zn.get(T))&&Dm(s,l);var F=w=c.createElement("link");St(F),Wt(F,"link",s),F._p=new Promise(function(X,re){F.onload=X,F.onerror=re}),F.addEventListener("load",function(){b.loading|=1}),F.addEventListener("error",function(){b.loading|=2}),b.loading|=4,sd(w,r,c)}w={type:"stylesheet",instance:w,count:1,state:b},v.set(T,w)}}}function fb(s,r){fs.X(s,r);var l=va;if(l&&s){var c=si(l).hoistableScripts,v=Ta(s),T=c.get(v);T||(T=l.querySelector(Wl(v)),T||(s=E({src:s,async:!0},r),(r=Zn.get(v))&&Pm(s,r),T=l.createElement("script"),St(T),Wt(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},c.set(v,T))}}function hb(s,r){fs.M(s,r);var l=va;if(l&&s){var c=si(l).hoistableScripts,v=Ta(s),T=c.get(v);T||(T=l.querySelector(Wl(v)),T||(s=E({src:s,async:!0,type:"module"},r),(r=Zn.get(v))&&Pm(s,r),T=l.createElement("script"),St(T),Wt(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},c.set(v,T))}}function Q_(s,r,l,c){var v=(v=ve.current)?id(v):null;if(!v)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=_a(l.href),l=si(v).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=_a(l.href);var T=si(v).hoistableStyles,w=T.get(s);if(w||(v=v.ownerDocument||v,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,w),(T=v.querySelector(Kl(s)))&&!T._p&&(w.instance=T,w.state.loading=5),Zn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Zn.set(s,l),T||mb(v,s,l,w.state))),r&&c===null)throw Error(i(528,""));return w}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ta(l),l=si(v).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function _a(s){return'href="'+Tt(s)+'"'}function Kl(s){return'link[rel="stylesheet"]['+s+"]"}function X_(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function mb(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Wt(r,"link",l),St(r),s.head.appendChild(r))}function Ta(s){return'[src="'+Tt(s)+'"]'}function Wl(s){return"script[async]"+s}function Z_(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+Tt(l.href)+'"]');if(c)return r.instance=c,St(c),c;var v=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),St(c),Wt(c,"style",v),sd(c,l.precedence,s),r.instance=c;case"stylesheet":v=_a(l.href);var T=s.querySelector(Kl(v));if(T)return r.state.loading|=4,r.instance=T,St(T),T;c=X_(l),(v=Zn.get(v))&&Dm(c,v),T=(s.ownerDocument||s).createElement("link"),St(T);var w=T;return w._p=new Promise(function(b,F){w.onload=b,w.onerror=F}),Wt(T,"link",c),r.state.loading|=4,sd(T,l.precedence,s),r.instance=T;case"script":return T=Ta(l.src),(v=s.querySelector(Wl(T)))?(r.instance=v,St(v),v):(c=l,(v=Zn.get(T))&&(c=E({},l),Pm(c,v)),s=s.ownerDocument||s,v=s.createElement("script"),St(v),Wt(v,"link",c),s.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,sd(c,l.precedence,s));return r.instance}function sd(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=c.length?c[c.length-1]:null,T=v,w=0;w<c.length;w++){var b=c[w];if(b.dataset.precedence===r)T=b;else if(T!==v)break}T?T.parentNode.insertBefore(s,T.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Dm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Pm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var rd=null;function e0(s,r,l){if(rd===null){var c=new Map,v=rd=new Map;v.set(l,c)}else v=rd,c=v.get(l),c||(c=new Map,v.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),v=0;v<l.length;v++){var T=l[v];if(!(T[zi]||T[_t]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var w=T.getAttribute(r)||"";w=s+w;var b=c.get(w);b?b.push(T):c.set(w,[T])}}return c}function t0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function pb(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function n0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function gb(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=_a(c.href),T=r.querySelector(Kl(v));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=od.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=T,St(T);return}T=r.ownerDocument||r,c=X_(c),(v=Zn.get(v))&&Dm(c,v),T=T.createElement("link"),St(T);var w=T;w._p=new Promise(function(b,F){w.onload=b,w.onerror=F}),Wt(T,"link",c),l.instance=T}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=od.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var km=0;function yb(s,r){return s.stylesheets&&s.count===0&&ld(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&ld(s,s.stylesheets),s.unsuspend){var T=s.unsuspend;s.unsuspend=null,T()}},6e4+r);0<s.imgBytes&&km===0&&(km=62500*QC());var v=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ld(s,s.stylesheets),s.unsuspend)){var T=s.unsuspend;s.unsuspend=null,T()}},(s.imgBytes>km?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(v)}}:null}function od(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ad=null;function ld(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ad=new Map,r.forEach(vb,s),ad=null,od.call(s))}function vb(s,r){if(!(r.state.loading&4)){var l=ad.get(s);if(l)var c=l.get(null);else{l=new Map,ad.set(s,l);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var w=v[T];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),c=w)}c&&l.set(null,c)}v=r.instance,w=v.getAttribute("data-precedence"),T=l.get(w)||c,T===c&&l.set(null,v),l.set(w,v),this.count++,c=od.bind(this),v.addEventListener("load",c),v.addEventListener("error",c),T?T.parentNode.insertBefore(v,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),r.state.loading|=4}}var Ql={$$typeof:j,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function _b(s,r,l,c,v,T,w,b,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=c,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function i0(s,r,l,c,v,T,w,b,F,X,re,le){return s=new _b(s,r,l,w,F,X,re,le,b),r=1,T===!0&&(r|=24),T=Un(3,null,null,r),s.current=T,T.stateNode=s,r=hh(),r.refCount++,s.pooledCache=r,r.refCount++,T.memoizedState={element:c,isDehydrated:l,cache:r},yh(T),s}function s0(s){return s?(s=Qo,s):Qo}function r0(s,r,l,c,v,T){v=s0(v),c.context===null?c.context=v:c.pendingContext=v,c=ir(r),c.payload={element:l},T=T===void 0?null:T,T!==null&&(c.callback=T),l=sr(s,c,r),l!==null&&(Rn(l,s,r),Rl(l,s,r))}function o0(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Um(s,r){o0(s,r),(s=s.alternate)&&o0(s,r)}function a0(s){if(s.tag===13||s.tag===31){var r=eo(s,67108864);r!==null&&Rn(r,s,67108864),Um(s,67108864)}}function l0(s){if(s.tag===13||s.tag===31){var r=qn();r=rl(r);var l=eo(s,r);l!==null&&Rn(l,s,r),Um(s,r)}}var ud=!0;function Tb(s,r,l,c){var v=O.T;O.T=null;var T=te.p;try{te.p=2,Lm(s,r,l,c)}finally{te.p=T,O.T=v}}function Eb(s,r,l,c){var v=O.T;O.T=null;var T=te.p;try{te.p=8,Lm(s,r,l,c)}finally{te.p=T,O.T=v}}function Lm(s,r,l,c){if(ud){var v=Vm(c);if(v===null)xm(s,r,c,cd,l),c0(s,c);else if(Sb(v,s,r,l,c))c.stopPropagation();else if(c0(s,c),r&4&&-1<xb.indexOf(s)){for(;v!==null;){var T=$i(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var w=ii(T.pendingLanes);if(w!==0){var b=T;for(b.pendingLanes|=2,b.entangledLanes|=2;w;){var F=1<<31-pn(w);b.entanglements[1]|=F,w&=~F}bi(T),(Xe&6)===0&&($c=zt()+500,jl(0))}}break;case 31:case 13:b=eo(T,2),b!==null&&Rn(b,T,2),Jc(),Um(T,2)}if(T=Vm(c),T===null&&xm(s,r,c,cd,l),T===v)break;v=T}v!==null&&c.stopPropagation()}else xm(s,r,c,null,l)}}function Vm(s){return s=Ho(s),Om(s)}var cd=null;function Om(s){if(cd=null,s=ji(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return cd=s,null}function u0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hu()){case Ut:return 2;case Ot:return 8;case Bi:case zu:return 32;case tl:return 268435456;default:return 32}default:return 32}}var Fm=!1,pr=null,gr=null,yr=null,Xl=new Map,Zl=new Map,vr=[],xb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c0(s,r){switch(s){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Xl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(r.pointerId)}}function eu(s,r,l,c,v,T){return s===null||s.nativeEvent!==T?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:T,targetContainers:[v]},r!==null&&(r=$i(r),r!==null&&a0(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),s)}function Sb(s,r,l,c,v){switch(r){case"focusin":return pr=eu(pr,s,r,l,c,v),!0;case"dragenter":return gr=eu(gr,s,r,l,c,v),!0;case"mouseover":return yr=eu(yr,s,r,l,c,v),!0;case"pointerover":var T=v.pointerId;return Xl.set(T,eu(Xl.get(T)||null,s,r,l,c,v)),!0;case"gotpointercapture":return T=v.pointerId,Zl.set(T,eu(Zl.get(T)||null,s,r,l,c,v)),!0}return!1}function d0(s){var r=ji(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,$u(s.priority,function(){l0(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,$u(s.priority,function(){l0(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function dd(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Vm(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Go=c,l.target.dispatchEvent(c),Go=null}else return r=$i(l),r!==null&&a0(r),s.blockedOn=l,!1;r.shift()}return!0}function f0(s,r,l){dd(s)&&l.delete(r)}function wb(){Fm=!1,pr!==null&&dd(pr)&&(pr=null),gr!==null&&dd(gr)&&(gr=null),yr!==null&&dd(yr)&&(yr=null),Xl.forEach(f0),Zl.forEach(f0)}function fd(s,r){s.blockedOn===r&&(s.blockedOn=null,Fm||(Fm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,wb)))}var hd=null;function h0(s){hd!==s&&(hd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hd===s&&(hd=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],v=s[r+2];if(typeof c!="function"){if(Om(c||l)===null)continue;break}var T=$i(l);T!==null&&(s.splice(r,3),r-=3,Vh(T,{pending:!0,data:v,method:l.method,action:c},c,v))}}))}function Ea(s){function r(F){return fd(F,s)}pr!==null&&fd(pr,s),gr!==null&&fd(gr,s),yr!==null&&fd(yr,s),Xl.forEach(r),Zl.forEach(r);for(var l=0;l<vr.length;l++){var c=vr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<vr.length&&(l=vr[0],l.blockedOn===null);)d0(l),l.blockedOn===null&&vr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var v=l[c],T=l[c+1],w=v[$t]||null;if(typeof T=="function")w||h0(l);else if(w){var b=null;if(T&&T.hasAttribute("formAction")){if(v=T,w=T[$t]||null)b=w.formAction;else if(Om(v)!==null)continue}else b=w.action;typeof b=="function"?l[c+1]=b:(l.splice(c,3),c-=3),h0(l)}}}function m0(){function s(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(w){return v=w})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,v=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function qm(s){this._internalRoot=s}md.prototype.render=qm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=qn();r0(l,c,s,r,null,null)},md.prototype.unmount=qm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;r0(s.current,2,null,s,null,null),Jc(),r[vi]=null}};function md(s){this._internalRoot=s}md.prototype.unstable_scheduleHydration=function(s){if(s){var r=Hi();s={blockedOn:null,target:s,priority:r};for(var l=0;l<vr.length&&r!==0&&r<vr[l].priority;l++);vr.splice(l,0,s),l===0&&d0(s)}};var p0=e.version;if(p0!=="19.2.0")throw Error(i(527,p0,"19.2.0"));te.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var Ab={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{Ds=pd.inject(Ab),sn=pd}catch{}}return nu.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",v=xv,T=Sv,w=wv;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=i0(s,1,!1,null,null,l,c,null,v,T,w,m0),s[vi]=r.current,Em(s),new qm(r)},nu.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,v="",T=xv,w=Sv,b=wv,F=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(b=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),r=i0(s,1,!0,r,l??null,c,v,F,T,w,b,m0),r.context=s0(null),l=r.current,c=qn(),c=rl(c),v=ir(c),v.callback=null,sr(l,v,c),l=c,r.current.lanes=l,Us(r,l),bi(r),s[vi]=r.current,Em(s),new md(r)},nu.version="19.2.0",nu}var A0;function Ub(){if(A0)return Hm.exports;A0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hm.exports=kb(),Hm.exports}var Lb=Ub();const Vb=xx(Lb);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var C0="popstate";function Ob(t={}){function e(o,a){let{pathname:u="/",search:d="",hash:f=""}=Ao(o.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),ap("",{pathname:u,search:d,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){let u=o.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let f=o.location.href,h=f.indexOf("#");d=h===-1?f:f.slice(0,h)}return d+"#"+(typeof a=="string"?a:gu(a))}function i(o,a){fi(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return qb(e,n,i,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Fb(){return Math.random().toString(36).substring(2,10)}function b0(t,e){return{usr:t.state,key:t.key,idx:e}}function ap(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ao(e):e,state:n,key:e&&e.key||i||Fb()}}function gu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function qb(t,e,n,i={}){let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d="POP",f=null,h=_();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function _(){return(u.state||{idx:null}).idx}function E(){d="POP";let U=_(),z=U==null?null:U-h;h=U,f&&f({action:d,location:V.location,delta:z})}function S(U,z){d="PUSH";let J=ap(V.location,U,z);n&&n(J,U),h=_()+1;let j=b0(J,h),Y=V.createHref(J);try{u.pushState(j,"",Y)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(Y)}a&&f&&f({action:d,location:V.location,delta:1})}function C(U,z){d="REPLACE";let J=ap(V.location,U,z);n&&n(J,U),h=_();let j=b0(J,h),Y=V.createHref(J);u.replaceState(j,"",Y),a&&f&&f({action:d,location:V.location,delta:0})}function M(U){return Bb(U)}let V={get action(){return d},get location(){return t(o,u)},listen(U){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(C0,E),f=U,()=>{o.removeEventListener(C0,E),f=null}},createHref(U){return e(o,U)},createURL:M,encodeLocation(U){let z=M(U);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:S,replace:C,go(U){return u.go(U)}};return V}function Bb(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:gu(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Sx(t,e,n="/"){return Gb(t,e,n,!1)}function Gb(t,e,n,i){let o=typeof e=="string"?Ao(e):e,a=Ts(o.pathname||"/",n);if(a==null)return null;let u=wx(t);Hb(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let h=eI(a);d=Xb(u[f],h,i)}return d}function wx(t,e=[],n=[],i="",o=!1){let a=(u,d,f=o,h)=>{let _={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&f)return;gt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let E=ys([i,_.relativePath]),S=n.concat(_);u.children&&u.children.length>0&&(gt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),wx(u.children,e,S,E,f)),!(u.path==null&&!u.index)&&e.push({path:E,score:Wb(E,u.index),routesMeta:S})};return t.forEach((u,d)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))a(u,d);else for(let h of Ax(u.path))a(u,d,!0,h)}),e}function Ax(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=Ax(i.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...u),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function Hb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Qb(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var zb=/^:[\w-]+$/,jb=3,$b=2,Yb=1,Jb=10,Kb=-2,I0=t=>t==="*";function Wb(t,e){let n=t.split("/"),i=n.length;return n.some(I0)&&(i+=Kb),e&&(i+=$b),n.filter(o=>!I0(o)).reduce((o,a)=>o+(zb.test(a)?jb:a===""?Yb:Jb),i)}function Qb(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function Xb(t,e,n=!1){let{routesMeta:i}=t,o={},a="/",u=[];for(let d=0;d<i.length;++d){let f=i[d],h=d===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=Ld({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},_),S=f.route;if(!E&&h&&n&&!i[i.length-1].route.index&&(E=Ld({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),u.push({params:o,pathname:ys([a,E.pathname]),pathnameBase:sI(ys([a,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(a=ys([a,E.pathnameBase]))}return u}function Ld(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Zb(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((h,{paramName:_,isOptional:E},S)=>{if(_==="*"){let M=d[S]||"";u=a.slice(0,a.length-M.length).replace(/(.)\/+$/,"$1")}const C=d[S];return E&&!C?h[_]=void 0:h[_]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:u,pattern:t}}function Zb(t,e=!1,n=!0){fi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(i.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function eI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ts(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function tI(t,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?Ao(t):t;return{pathname:n?n.startsWith("/")?n:nI(n,e):e,search:rI(i),hash:oI(o)}}function nI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Ym(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Cx(t){let e=iI(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function bx(t,e,n,i=!1){let o;typeof t=="string"?o=Ao(t):(o={...t},gt(!o.pathname||!o.pathname.includes("?"),Ym("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Ym("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Ym("#","search","hash",o)));let a=t===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=n;else{let E=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}d=E>=0?e[E]:"/"}let f=tI(o,d),h=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||_)&&(f.pathname+="/"),f}var ys=t=>t.join("/").replace(/\/\/+/g,"/"),sI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function aI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ix=["POST","PUT","PATCH","DELETE"];new Set(Ix);var lI=["GET",...Ix];new Set(lI);var Ga=D.createContext(null);Ga.displayName="DataRouter";var of=D.createContext(null);of.displayName="DataRouterState";D.createContext(!1);var Rx=D.createContext({isTransitioning:!1});Rx.displayName="ViewTransition";var uI=D.createContext(new Map);uI.displayName="Fetchers";var cI=D.createContext(null);cI.displayName="Await";var Li=D.createContext(null);Li.displayName="Navigation";var bu=D.createContext(null);bu.displayName="Location";var Vi=D.createContext({outlet:null,matches:[],isDataRoute:!1});Vi.displayName="Route";var Bp=D.createContext(null);Bp.displayName="RouteError";function dI(t,{relative:e}={}){gt(Iu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(Li),{hash:o,pathname:a,search:u}=Ru(t,{relative:e}),d=a;return n!=="/"&&(d=a==="/"?n:ys([n,a])),i.createHref({pathname:d,search:u,hash:o})}function Iu(){return D.useContext(bu)!=null}function Ur(){return gt(Iu(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(bu).location}var Nx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Mx(t){D.useContext(Li).static||D.useLayoutEffect(t)}function Dx(){let{isDataRoute:t}=D.useContext(Vi);return t?wI():fI()}function fI(){gt(Iu(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(Ga),{basename:e,navigator:n}=D.useContext(Li),{matches:i}=D.useContext(Vi),{pathname:o}=Ur(),a=JSON.stringify(Cx(i)),u=D.useRef(!1);return Mx(()=>{u.current=!0}),D.useCallback((f,h={})=>{if(fi(u.current,Nx),!u.current)return;if(typeof f=="number"){n.go(f);return}let _=bx(f,JSON.parse(a),o,h.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:ys([e,_.pathname])),(h.replace?n.replace:n.push)(_,h.state,h)},[e,n,a,o,t])}D.createContext(null);function Px(){let{matches:t}=D.useContext(Vi),e=t[t.length-1];return e?e.params:{}}function Ru(t,{relative:e}={}){let{matches:n}=D.useContext(Vi),{pathname:i}=Ur(),o=JSON.stringify(Cx(n));return D.useMemo(()=>bx(t,JSON.parse(o),i,e==="path"),[t,o,i,e])}function hI(t,e){return kx(t,e)}function kx(t,e,n,i,o){var J;gt(Iu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=D.useContext(Li),{matches:u}=D.useContext(Vi),d=u[u.length-1],f=d?d.params:{},h=d?d.pathname:"/",_=d?d.pathnameBase:"/",E=d&&d.route;{let j=E&&E.path||"";Ux(h,!E||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let S=Ur(),C;if(e){let j=typeof e=="string"?Ao(e):e;gt(_==="/"||((J=j.pathname)==null?void 0:J.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${j.pathname}" was given in the \`location\` prop.`),C=j}else C=S;let M=C.pathname||"/",V=M;if(_!=="/"){let j=_.replace(/^\//,"").split("/");V="/"+M.replace(/^\//,"").split("/").slice(j.length).join("/")}let U=Sx(t,{pathname:V});fi(E||U!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),fi(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=vI(U&&U.map(j=>Object.assign({},j,{params:Object.assign({},f,j.params),pathname:ys([_,a.encodeLocation?a.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?_:ys([_,a.encodeLocation?a.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),u,n,i,o);return e&&z?D.createElement(bu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},z):z}function mI(){let t=SI(),e=aI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:a},"ErrorBoundary")," or"," ",D.createElement("code",{style:a},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:o},n):null,u)}var pI=D.createElement(mI,null),gI=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(Vi.Provider,{value:this.props.routeContext},D.createElement(Bp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yI({routeContext:t,match:e,children:n}){let i=D.useContext(Ga);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Vi.Provider,{value:t},n)}function vI(t,e=[],n=null,i=null,o=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=n==null?void 0:n.errors;if(u!=null){let h=a.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);gt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let d=!1,f=-1;if(n)for(let h=0;h<a.length;h++){let _=a[h];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(f=h),_.route.id){let{loaderData:E,errors:S}=n,C=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!S||S[_.route.id]===void 0);if(_.route.lazy||C){d=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((h,_,E)=>{let S,C=!1,M=null,V=null;n&&(S=u&&_.route.id?u[_.route.id]:void 0,M=_.route.errorElement||pI,d&&(f<0&&E===0?(Ux("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,V=null):f===E&&(C=!0,V=_.route.hydrateFallbackElement||null)));let U=e.concat(a.slice(0,E+1)),z=()=>{let J;return S?J=M:C?J=V:_.route.Component?J=D.createElement(_.route.Component,null):_.route.element?J=_.route.element:J=h,D.createElement(yI,{match:_,routeContext:{outlet:h,matches:U,isDataRoute:n!=null},children:J})};return n&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?D.createElement(gI,{location:n.location,revalidation:n.revalidation,component:M,error:S,children:z(),routeContext:{outlet:null,matches:U,isDataRoute:!0},unstable_onError:i}):z()},null)}function Gp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _I(t){let e=D.useContext(Ga);return gt(e,Gp(t)),e}function TI(t){let e=D.useContext(of);return gt(e,Gp(t)),e}function EI(t){let e=D.useContext(Vi);return gt(e,Gp(t)),e}function Hp(t){let e=EI(t),n=e.matches[e.matches.length-1];return gt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function xI(){return Hp("useRouteId")}function SI(){var i;let t=D.useContext(Bp),e=TI("useRouteError"),n=Hp("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function wI(){let{router:t}=_I("useNavigate"),e=Hp("useNavigate"),n=D.useRef(!1);return Mx(()=>{n.current=!0}),D.useCallback(async(o,a={})=>{fi(n.current,Nx),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...a}))},[t,e])}var R0={};function Ux(t,e,n){!e&&!R0[t]&&(R0[t]=!0,fi(!1,n))}D.memo(AI);function AI({routes:t,future:e,state:n,unstable_onError:i}){return kx(t,void 0,n,i,e)}function ln(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CI({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:a=!1}){gt(!Iu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:u,navigator:o,static:a,future:{}}),[u,o,a]);typeof n=="string"&&(n=Ao(n));let{pathname:f="/",search:h="",hash:_="",state:E=null,key:S="default"}=n,C=D.useMemo(()=>{let M=Ts(f,u);return M==null?null:{location:{pathname:M,search:h,hash:_,state:E,key:S},navigationType:i}},[u,f,h,_,E,S,i]);return fi(C!=null,`<Router basename="${u}"> is not able to match the URL "${f}${h}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:D.createElement(Li.Provider,{value:d},D.createElement(bu.Provider,{children:e,value:C}))}function bI({children:t,location:e}){return hI(lp(t),e)}function lp(t,e=[]){let n=[];return D.Children.forEach(t,(i,o)=>{if(!D.isValidElement(i))return;let a=[...e,o];if(i.type===D.Fragment){n.push.apply(n,lp(i.props.children,a));return}gt(i.type===ln,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=lp(i.props.children,a)),n.push(u)}),n}var Sd="get",wd="application/x-www-form-urlencoded";function af(t){return t!=null&&typeof t.tagName=="string"}function II(t){return af(t)&&t.tagName.toLowerCase()==="button"}function RI(t){return af(t)&&t.tagName.toLowerCase()==="form"}function NI(t){return af(t)&&t.tagName.toLowerCase()==="input"}function MI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function DI(t,e){return t.button===0&&(!e||e==="_self")&&!MI(t)}var gd=null;function PI(){if(gd===null)try{new FormData(document.createElement("form"),0),gd=!1}catch{gd=!0}return gd}var kI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jm(t){return t!=null&&!kI.has(t)?(fi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wd}"`),null):t}function UI(t,e){let n,i,o,a,u;if(RI(t)){let d=t.getAttribute("action");i=d?Ts(d,e):null,n=t.getAttribute("method")||Sd,o=Jm(t.getAttribute("enctype"))||wd,a=new FormData(t)}else if(II(t)||NI(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(i=f?Ts(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Sd,o=Jm(t.getAttribute("formenctype"))||Jm(d.getAttribute("enctype"))||wd,a=new FormData(d,t),!PI()){let{name:h,type:_,value:E}=t;if(_==="image"){let S=h?`${h}.`:"";a.append(`${S}x`,"0"),a.append(`${S}y`,"0")}else h&&a.append(h,E)}}else{if(af(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Sd,i=null,o=wd,u=t}return a&&o==="text/plain"&&(u=a,a=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function LI(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Ts(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function VI(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function FI(t,e,n){let i=await Promise.all(t.map(async o=>{let a=e.routes[o.route.id];if(a){let u=await VI(a,n);return u.links?u.links():[]}return[]}));return HI(i.flat(1).filter(OI).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function N0(t,e,n,i,o,a){let u=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,d=(f,h)=>{var _;return n[h].pathname!==f.pathname||((_=n[h].route.path)==null?void 0:_.endsWith("*"))&&n[h].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,h)=>u(f,h)||d(f,h)):a==="data"?e.filter((f,h)=>{var E;let _=i.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(u(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let S=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function qI(t,e,{includeHydrateFallback:n}={}){return BI(t.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function BI(t){return[...new Set(t)]}function GI(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function HI(t,e){let n=new Set;return new Set(e),t.reduce((i,o)=>{let a=JSON.stringify(GI(o));return n.has(a)||(n.add(a),i.push({key:a,link:o})),i},[])}function Lx(){let t=D.useContext(Ga);return zp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function zI(){let t=D.useContext(of);return zp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var jp=D.createContext(void 0);jp.displayName="FrameworkContext";function Vx(){let t=D.useContext(jp);return zp(t,"You must render this element inside a <HydratedRouter> element"),t}function jI(t,e){let n=D.useContext(jp),[i,o]=D.useState(!1),[a,u]=D.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:_,onTouchStart:E}=e,S=D.useRef(null);D.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let V=z=>{z.forEach(J=>{u(J.isIntersecting)})},U=new IntersectionObserver(V,{threshold:.5});return S.current&&U.observe(S.current),()=>{U.disconnect()}}},[t]),D.useEffect(()=>{if(i){let V=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(V)}}},[i]);let C=()=>{o(!0)},M=()=>{o(!1),u(!1)};return n?t!=="intent"?[a,S,{}]:[a,S,{onFocus:iu(d,C),onBlur:iu(f,M),onMouseEnter:iu(h,C),onMouseLeave:iu(_,M),onTouchStart:iu(E,C)}]:[!1,S,{}]}function iu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $I({page:t,...e}){let{router:n}=Lx(),i=D.useMemo(()=>Sx(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D.createElement(JI,{page:t,matches:i,...e}):null}function YI(t){let{manifest:e,routeModules:n}=Vx(),[i,o]=D.useState([]);return D.useEffect(()=>{let a=!1;return FI(t,e,n).then(u=>{a||o(u)}),()=>{a=!0}},[t,e,n]),i}function JI({page:t,matches:e,...n}){let i=Ur(),{manifest:o,routeModules:a}=Vx(),{basename:u}=Lx(),{loaderData:d,matches:f}=zI(),h=D.useMemo(()=>N0(t,e,f,o,i,"data"),[t,e,f,o,i]),_=D.useMemo(()=>N0(t,e,f,o,i,"assets"),[t,e,f,o,i]),E=D.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let M=new Set,V=!1;if(e.forEach(z=>{var j;let J=o.routes[z.route.id];!J||!J.hasLoader||(!h.some(Y=>Y.route.id===z.route.id)&&z.route.id in d&&((j=a[z.route.id])!=null&&j.shouldRevalidate)||J.hasClientLoader?V=!0:M.add(z.route.id))}),M.size===0)return[];let U=LI(t,u,"data");return V&&M.size>0&&U.searchParams.set("_routes",e.filter(z=>M.has(z.route.id)).map(z=>z.route.id).join(",")),[U.pathname+U.search]},[u,d,i,o,h,e,t,a]),S=D.useMemo(()=>qI(_,o),[_,o]),C=YI(_);return D.createElement(D.Fragment,null,E.map(M=>D.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),S.map(M=>D.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),C.map(({key:M,link:V})=>D.createElement("link",{key:M,nonce:n.nonce,...V})))}function KI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Ox=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ox&&(window.__reactRouterVersion="7.9.5")}catch{}function WI({basename:t,children:e,window:n}){let i=D.useRef();i.current==null&&(i.current=Ob({window:n,v5Compat:!0}));let o=i.current,[a,u]=D.useState({action:o.action,location:o.location}),d=D.useCallback(f=>{D.startTransition(()=>u(f))},[u]);return D.useLayoutEffect(()=>o.listen(d),[o,d]),D.createElement(CI,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o})}var Fx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fn=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:a,replace:u,state:d,target:f,to:h,preventScrollReset:_,viewTransition:E,...S},C){let{basename:M}=D.useContext(Li),V=typeof h=="string"&&Fx.test(h),U,z=!1;if(typeof h=="string"&&V&&(U=h,Ox))try{let R=new URL(window.location.href),k=h.startsWith("//")?new URL(R.protocol+h):new URL(h),q=Ts(k.pathname,M);k.origin===R.origin&&q!=null?h=q+k.search+k.hash:z=!0}catch{fi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=dI(h,{relative:o}),[j,Y,ie]=jI(i,S),oe=ZI(h,{replace:u,state:d,target:f,preventScrollReset:_,relative:o,viewTransition:E});function P(R){e&&e(R),R.defaultPrevented||oe(R)}let N=D.createElement("a",{...S,...ie,href:U||J,onClick:z||a?e:P,ref:KI(C,Y),target:f,"data-discover":!V&&n==="render"?"true":void 0});return j&&!V?D.createElement(D.Fragment,null,N,D.createElement($I,{page:J})):N});fn.displayName="Link";var ei=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:a,to:u,viewTransition:d,children:f,...h},_){let E=Ru(u,{relative:h.relative}),S=Ur(),C=D.useContext(of),{navigator:M,basename:V}=D.useContext(Li),U=C!=null&&sR(E)&&d===!0,z=M.encodeLocation?M.encodeLocation(E).pathname:E.pathname,J=S.pathname,j=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(J=J.toLowerCase(),j=j?j.toLowerCase():null,z=z.toLowerCase()),j&&V&&(j=Ts(j,V)||j);const Y=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ie=J===z||!o&&J.startsWith(z)&&J.charAt(Y)==="/",oe=j!=null&&(j===z||!o&&j.startsWith(z)&&j.charAt(z.length)==="/"),P={isActive:ie,isPending:oe,isTransitioning:U},N=ie?e:void 0,R;typeof i=="function"?R=i(P):R=[i,ie?"active":null,oe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(P):a;return D.createElement(fn,{...h,"aria-current":N,className:R,ref:_,style:k,to:u,viewTransition:d},typeof f=="function"?f(P):f)});ei.displayName="NavLink";var QI=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:a,method:u=Sd,action:d,onSubmit:f,relative:h,preventScrollReset:_,viewTransition:E,...S},C)=>{let M=nR(),V=iR(d,{relative:h}),U=u.toLowerCase()==="get"?"get":"post",z=typeof d=="string"&&Fx.test(d),J=j=>{if(f&&f(j),j.defaultPrevented)return;j.preventDefault();let Y=j.nativeEvent.submitter,ie=(Y==null?void 0:Y.getAttribute("formmethod"))||u;M(Y||j.currentTarget,{fetcherKey:e,method:ie,navigate:n,replace:o,state:a,relative:h,preventScrollReset:_,viewTransition:E})};return D.createElement("form",{ref:C,method:U,action:V,onSubmit:i?f:J,...S,"data-discover":!z&&t==="render"?"true":void 0})});QI.displayName="Form";function XI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qx(t){let e=D.useContext(Ga);return gt(e,XI(t)),e}function ZI(t,{target:e,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:u}={}){let d=Dx(),f=Ur(),h=Ru(t,{relative:a});return D.useCallback(_=>{if(DI(_,e)){_.preventDefault();let E=n!==void 0?n:gu(f)===gu(h);d(t,{replace:E,state:i,preventScrollReset:o,relative:a,viewTransition:u})}},[f,d,h,n,i,e,t,o,a,u])}var eR=0,tR=()=>`__${String(++eR)}__`;function nR(){let{router:t}=qx("useSubmit"),{basename:e}=D.useContext(Li),n=xI();return D.useCallback(async(i,o={})=>{let{action:a,method:u,encType:d,formData:f,body:h}=UI(i,e);if(o.navigate===!1){let _=o.fetcherKey||tR();await t.fetch(_,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:h,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await t.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:h,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function iR(t,{relative:e}={}){let{basename:n}=D.useContext(Li),i=D.useContext(Vi);gt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...Ru(t||".",{relative:e})},u=Ur();if(t==null){a.search=u.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(_=>_==="")){d.delete("index"),f.filter(E=>E).forEach(E=>d.append("index",E));let _=d.toString();a.search=_?`?${_}`:""}}return(!t||t===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ys([n,a.pathname])),gu(a)}function sR(t,{relative:e}={}){let n=D.useContext(Rx);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=qx("useViewTransitionState"),o=Ru(t,{relative:e});if(!n.isTransitioning)return!1;let a=Ts(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=Ts(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Ld(o.pathname,u)!=null||Ld(o.pathname,a)!=null}const rR={play:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3l14 9-14 9V3z"}),pause:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 4h4v16H6zM14 4h4v16h-4z"}),logo:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 6l12-3"}),search:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}),previous:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"}),next:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}),upload:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"}),heart:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"}),comment:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}),"chat-bubble":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V7a2 2 0 012-2h4M9 14h6"}),x:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}),send:y.jsx("path",{d:"M22 2L11 13M22 2L15 22l-4-9-9-4 20-6z"}),camera:y.jsxs(y.Fragment,{children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"music-note":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z"}),"map-pin":y.jsxs(y.Fragment,{children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"globe-alt":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9M3 12a9 9 0 019-9"}),aperture:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m-2.122 2.122a5 5 0 01-7.072 0m-2.121-2.121a5 5 0 010-7.072m2.121-2.121a5 5 0 017.072 0"}),map:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13v-6m0 6l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 9m-6-2l6-3m0 0l6 3"}),radio:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 4.938A8.001 8.001 0 0112 4a8 8 0 017.069 4.938M15 12a3 3 0 11-6 0 3 3 0 016 0zm-3 8.062A8.001 8.001 0 0112 20a8 8 0 01-7.069-4.938M4.938 15A8.001 8.001 0 014 12a8 8 0 014.938-7.069"}),spotify:y.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20zm0 17.5a7.5 7.5 0 110-15 7.5 7.5 0 010 15zm-4.3-7.2a.7.7 0 00-1 .2.7.7 0 00.1 1l3.5 2a.7.7 0 001-.2.7.7 0 00-.2-1l-3.4-2zm.3-2.5a.7.7 0 00-1 .2.7.7 0 00.2 1l5.8 3.3a.7.7 0 001-.2.7.7 0 00-.2-1l-5.8-3.3zm.2-2.6a.7.7 0 00-1 .3.7.7 0 00.3 1l6.7 3.8a.7.7 0 001-.3.7.7 0 00-.3-1l-6.7-3.8z"}),soundcloud:y.jsx("path",{d:"M7 12a1 1 0 00-1-1H3a1 1 0 100 2h3a1 1 0 001-1zm14-1h-3a1 1 0 100 2h3a1 1 0 100-2zm-5-3a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm14 2c0-3.9-3.1-7-7-7s-7 3.1-7 7v1h14v-1z"}),youtube:y.jsx("path",{d:"M21.582 6.186A2.5 2.5 0 0020 4.5H4a2.5 2.5 0 00-2.5 2.5v10A2.5 2.5 0 004 19.5h16a2.5 2.5 0 002.5-2.5v-10a2.5 2.5 0 00-.918-1.814zM9.5 15.5v-7l7 3.5-7 3.5z"}),bandcamp:y.jsx("path",{d:"M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2l4 4 4-4v8H8v-8z"}),package:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4-8-4m16 0v10l-8 4-8-4V7"}),tshirt:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 4h6l2 2v2H7V6l2-2zm0 0V3a1 1 0 011-1h4a1 1 0 011 1v1m-6 0v12h6V4m-6 0H3v4l3 1 1-1h1M15 4h6v4l-3 1-1-1h-1"}),crown:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l3-3 4 4 4-4 3 3V5H5v10z"}),playlist:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"}),tag:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"}),"thumbs-up":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 9V5a3 3 0 00-3-3l-4 9v11h11.28a2 2 0 002-1.7l1.38-9a2 2 0 00-2-2.3H14z"}),"thumbs-down":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 15v4a3 3 0 003 3l4-9V5H5.72a2 2 0 00-2 1.7l-1.38 9a2 2 0 002 2.3h4.28z"}),"video-camera":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}),rss:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 11a9 9 0 019 9M4 4a16 16 0 0116 16M4 4v0"}),"book-open":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 1V6a4 4 0 00-4-4H5a4 4 0 00-4 4v12a4 4 0 004 4h14a4 4 0 004-4v-3m-4-1l-4-4 4-4"}),download:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"}),plus:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"}),mail:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}),microphone:y.jsxs(y.Fragment,{children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 10v2a7 7 0 01-14 0v-2"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 19v3"})]}),palette:y.jsxs(y.Fragment,{children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1v2m0 18v2m9-9h-2m-2-6.364L15.364 7M4.636 17.364L7 15m12.364 0L17 15M4.636 4.636L7 7"})]}),users:y.jsx(y.Fragment,{children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.134-1.276-.38-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.134-1.276.38-1.857m0 0a5.002 5.002 0 019.24 0M12 15a4 4 0 100-8 4 4 0 000 8z"})}),sparkles:y.jsx(y.Fragment,{children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M17 3v4M19 5h-4M14 17v4M16 19h-4M7.5 10.5L9 9m-1.5 3l-1.5 1.5M16.5 10.5L15 9m1.5 3l1.5 1.5"})})},Te=({name:t,className:e="h-6 w-6",style:n})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",style:n,children:rR[t]}),oR=()=>{const t={color:"white",backgroundColor:"#282828"};return y.jsx("header",{className:"bg-gray-800 sticky top-0 z-40 shadow-md",children:y.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsxs("div",{className:"flex items-center space-x-8",children:[y.jsxs(fn,{to:"/",className:"flex items-center space-x-2 text-white",children:[y.jsx(Te,{name:"logo",className:"h-8 w-8 text-brand-accent"}),y.jsx("span",{className:"font-bold text-xl",children:"SoundWave"})]}),y.jsxs("nav",{className:"hidden md:flex space-x-2",children:[y.jsx(ei,{to:"/",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Home"}),y.jsx(ei,{to:"/library",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Library"}),y.jsx(ei,{to:"/playlists",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Playlists"}),y.jsx(ei,{to:"/labels",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Labels"}),y.jsx(ei,{to:"/artist-hub",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Artist Hub"}),y.jsx(ei,{to:"/live-streams",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Live"}),y.jsx(ei,{to:"/community",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Community"}),y.jsx(ei,{to:"/tutorials",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Tutorials"}),y.jsx(ei,{to:"/masterclass",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Masterclass"}),y.jsx(ei,{to:"/samples",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Samples"}),y.jsx(ei,{to:"/upload",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Upload"})]})]}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",placeholder:"Search for tracks or artists...",className:"bg-gray-700 text-white placeholder-gray-400 border border-transparent focus:ring-2 focus:ring-brand-accent focus:border-transparent rounded-full py-2 px-4 w-64 transition-all"}),y.jsx(Te,{name:"search",className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]}),y.jsxs(fn,{to:"/inbox",className:"relative text-gray-400 hover:text-white transition-colors",children:[y.jsx(Te,{name:"mail",className:"h-6 w-6"}),y.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:"3"})]}),y.jsxs(fn,{to:"/profile/user_1",className:"flex items-center space-x-2",children:[y.jsx("img",{className:"h-8 w-8 rounded-full object-cover",src:"https://picsum.photos/id/1015/100/100",alt:"User Avatar"}),y.jsx("span",{className:"text-white font-medium hidden sm:block",children:"Sub-Tropical"})]})]})]})})})},aR=()=>y.jsx("footer",{className:"bg-gray-800 border-t border-gray-700 mt-auto",children:y.jsx("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:y.jsxs("p",{className:"text-center text-sm text-gray-400",children:[" ",new Date().getFullYear()," SoundWave. All rights reserved. A React & Gemini Showcase."]})})}),lR=()=>{const[t,e]=D.useState(null),[n,i]=D.useState(!1),[o,a]=D.useState(null),[u,d]=D.useState(!1),f=D.useCallback(E=>{(t==null?void 0:t.id)===E.id?i(S=>!S):(e(E),i(!0)),d(!1)},[t]),h=D.useCallback(E=>{(t==null?void 0:t.id)===E.id&&u?i(S=>!S):(e(E),i(!0),d(!0))},[t,u]),_=D.useCallback(()=>{t&&i(E=>(E&&d(!1),!E))},[t]);return{currentTrack:t,isPlaying:n,playTrack:f,togglePlayPause:_,onTrackEnd:o,setOnTrackEnd:a,isPreviewing:u,playPreview:h}},Ha=D.createContext(null),uR=({children:t})=>{const e=lR();return y.jsx(Ha.Provider,{value:e,children:t})},cR=()=>{const t=D.useContext(Ha),e=D.useRef(null),[n,i]=D.useState(0),o=D.useRef(null);if(!t)return null;const{currentTrack:a,isPlaying:u,togglePlayPause:d,onTrackEnd:f,isPreviewing:h}=t;D.useEffect(()=>{const E=e.current;if(E)if(u){const S=E.play();S!==void 0&&S.catch(C=>{C.name!=="AbortError"&&console.error("Audio play failed:",C)})}else E.pause()},[u,a]),D.useEffect(()=>(o.current&&(clearTimeout(o.current),o.current=null),u&&h&&(o.current=window.setTimeout(()=>{u&&h&&d()},3e4)),()=>{o.current&&clearTimeout(o.current)}),[a,u,h,d]),D.useEffect(()=>{const E=e.current;if(!E)return;i(0);const S=()=>{E.duration&&isFinite(E.duration)&&i(E.currentTime/E.duration*100)},C=()=>{f?f():d()};return E.addEventListener("timeupdate",S),E.addEventListener("ended",C),()=>{E.removeEventListener("timeupdate",S),E.removeEventListener("ended",C)}},[a,d,f]);const _=E=>{const S=e.current;if(!S||!isFinite(S.duration))return;const C=Number(E.target.value),M=C/100*S.duration;isFinite(M)&&(S.currentTime=M,i(C))};return a?y.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 h-24 z-50 flex items-center px-4 sm:px-6 lg:px-8",children:[y.jsx("audio",{ref:e,src:a.audioSrc}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("img",{src:a.coverArtUrl,alt:a.title,className:"w-16 h-16 rounded-md object-cover"}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h4",{className:"font-semibold text-white",children:a.title}),h&&y.jsx("span",{className:"text-xs font-bold bg-yellow-500 text-gray-900 px-2 py-0.5 rounded-full",children:"PREVIEW"})]}),y.jsx("p",{className:"text-sm text-gray-400",children:a.artistName})]})]}),y.jsxs("div",{className:"flex-grow flex items-center justify-center space-x-4 mx-8",children:[y.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white",children:y.jsx(Te,{name:"previous",className:"w-6 h-6"})}),y.jsx("button",{onClick:d,className:"bg-white rounded-full p-2 text-gray-900 hover:scale-105 transition-transform",children:y.jsx(Te,{name:u?"pause":"play",className:"w-8 h-8"})}),y.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white",children:y.jsx(Te,{name:"next",className:"w-6 h-6"})})]}),y.jsx("div",{className:"flex items-center space-x-2 w-1/3",children:y.jsx("input",{type:"range",min:"0",max:"100",value:n||0,onChange:_,className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer range-sm",style:{background:`linear-gradient(to right, #1DB954 ${n}%, #4B5563 ${n}%)`}})})]}):null},lf=({track:t,onViewComments:e})=>{var _;const n=D.useContext(Ha);if(!n)throw new Error("TrackCard must be used within an AudioProvider");const{playTrack:i,currentTrack:o,isPlaying:a}=n,u=(o==null?void 0:o.id)===t.id&&a,d=()=>{i(t)},f=()=>{switch(t.uploadType){case"For Sale":return`Buy for $${t.price.toFixed(2)}`;case"Free Download":return"Download";default:return null}},h=()=>{switch(t.category){case"Bootleg":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"Remix":return"bg-purple-500/20 text-purple-300 border-purple-500/30";default:return"bg-blue-500/20 text-blue-300 border-blue-500/30"}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:t.coverArtUrl,alt:`${t.title} cover art`,className:"w-full h-48 object-cover"}),y.jsx("button",{onClick:d,className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-label":`Play or pause ${t.title}`,children:y.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:y.jsx(Te,{name:u?"pause":"play",className:"h-8 w-8 text-white"})})}),y.jsx("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full border ${h()}`,children:t.category})]}),y.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[y.jsx("h3",{className:"font-bold text-lg text-white truncate",children:t.title}),y.jsxs("div",{className:"text-sm text-gray-400",children:[y.jsx(fn,{to:`/profile/${t.artistId}`,className:"hover:text-white hover:underline",children:t.artistName}),t.labelId&&t.labelName&&y.jsxs("span",{className:"text-xs",children:[" on ",y.jsx(fn,{to:`/labels/${t.labelId}`,className:"hover:text-white hover:underline font-semibold",children:t.labelName})]})]}),y.jsx("div",{className:"flex-grow mt-2",children:y.jsx("div",{className:"flex space-x-1",children:t.tags.slice(0,2).map(E=>y.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:E},E))})}),y.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e&&y.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors","aria-label":`View comments for ${t.title}`,children:[y.jsx(Te,{name:"comment",className:"w-4 h-4"}),y.jsx("span",{className:"text-xs font-semibold",children:((_=t.comments)==null?void 0:_.length)||0})]}),f()&&y.jsx("button",{className:"bg-transparent border border-brand-accent text-brand-accent px-3 py-1 rounded-full text-xs font-semibold hover:bg-brand-accent hover:text-white transition-colors",children:f()})]})]})]})},En=()=>y.jsx("div",{className:"flex justify-center items-center p-8",children:y.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-brand-accent"})}),dR=({comment:t})=>{const e=a=>{const u=new Date(a),d=Math.floor((new Date().getTime()-u.getTime())/1e3);let f=d/31536e3;return f>1?Math.floor(f)+" years ago":(f=d/2592e3,f>1?Math.floor(f)+" months ago":(f=d/86400,f>1?Math.floor(f)+" days ago":(f=d/3600,f>1?Math.floor(f)+" hours ago":(f=d/60,f>1?Math.floor(f)+" minutes ago":"Just now"))))},n=a=>a.split(/(@\w+)/g).map((u,d)=>u.startsWith("@")?y.jsx("strong",{className:"text-brand-accent font-semibold cursor-pointer hover:underline",children:u},d):u),i=t.authorId?`/profile/${t.authorId}`:"#",o=t.authorAvatarUrl||`https://i.pravatar.cc/150?u=${t.authorName}`;return y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(fn,{to:i,children:y.jsx("img",{src:o,alt:t.authorName,className:"w-10 h-10 rounded-full object-cover"})}),y.jsxs("div",{className:"flex-1 bg-gray-700/50 p-3 rounded-lg",children:[y.jsxs("div",{className:"flex items-baseline gap-2",children:[y.jsx(fn,{to:i,className:"font-bold text-white text-sm hover:underline",children:t.authorName}),y.jsx("span",{className:"text-xs text-gray-500",children:e(t.createdAt)})]}),y.jsx("p",{className:"text-gray-300 text-sm mt-1",children:n(t.content)})]})]})},We=({children:t,variant:e="primary",isLoading:n=!1,size:i="md",className:o,...a})=>{const u="rounded-full font-semibold transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",d={primary:"bg-brand-accent hover:bg-brand-accent-hover text-white focus:ring-brand-accent",secondary:"bg-gray-700 hover:bg-gray-600 text-white focus:ring-gray-500"},f={sm:"px-3 py-1.5 text-xs",md:"px-6 py-2"};return y.jsx("button",{className:[u,d[e],f[i],o].filter(Boolean).join(" "),disabled:n,...a,children:n?y.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):t})},fR=({onAddComment:t,placeholder:e="Add a comment or tag someone with @"})=>{const[n,i]=D.useState(""),[o,a]=D.useState(!1),[u,d]=D.useState(!1),[f,h]=D.useState(""),_=async E=>{if(E.preventDefault(),!n.trim()||u&&!f.trim())return;a(!0);let S;u?S={authorName:`${f} (Guest)`,authorAvatarUrl:`https://i.pravatar.cc/150?u=${f}`,content:n}:S={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100",content:n};try{await t(S),i(""),h("")}catch(C){console.error("Failed to add comment:",C)}finally{a(!1)}};return y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700/50",children:y.jsxs("form",{onSubmit:_,className:"flex items-start gap-3",children:[y.jsx("img",{src:u?"https://i.pravatar.cc/150?u=guest":"https://picsum.photos/id/1015/100/100",alt:"Your avatar",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),y.jsxs("div",{className:"flex-1 space-y-3",children:[y.jsx("textarea",{value:n,onChange:E=>i(E.target.value),placeholder:e,required:!0,rows:2,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400 text-sm"}),u&&y.jsx("div",{className:"flex gap-3",children:y.jsx("input",{type:"text",value:f,onChange:E=>h(E.target.value),required:!0,placeholder:"Your Name",className:"flex-1 bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-sm focus:ring-brand-accent focus:border-brand-accent"})}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{id:"guest-checkbox",type:"checkbox",checked:u,onChange:E=>d(E.target.checked),className:"h-4 w-4 rounded border-gray-600 bg-gray-700 text-brand-accent focus:ring-brand-accent"}),y.jsx("label",{htmlFor:"guest-checkbox",className:"ml-2 text-xs text-gray-400",children:"Comment as guest"})]}),y.jsx(We,{type:"submit",size:"sm",isLoading:o,children:"Post Comment"})]})]})]})})},Co=({comments:t,onAddComment:e,placeholder:n,startExpanded:i=!1})=>{const[o,a]=D.useState(i);return!o&&!i?y.jsxs("button",{onClick:()=>a(!0),className:"text-sm font-semibold text-gray-400 hover:text-white flex items-center gap-2",children:[y.jsx(Te,{name:"comment",className:"w-4 h-4"}),y.jsxs("span",{children:["View ",t.length," Comment",t.length!==1&&"s"]})]}):y.jsxs("div",{className:"w-full",children:[t.length>0&&y.jsx("div",{className:"space-y-4",children:t.map(u=>y.jsx(dR,{comment:u},u.id))}),y.jsx(fR,{onAddComment:e,placeholder:n})]})};var M0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},hR=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],u=t[n++],d=t[n++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Gx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const a=t[o],u=o+1<t.length,d=u?t[o+1]:0,f=o+2<t.length,h=f?t[o+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|h>>6,C=h&63;f||(C=64,u||(S=64)),i.push(n[_],n[E],n[S],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],d=o<t.length?n[t.charAt(o)]:0;++o;const h=o<t.length?n[t.charAt(o)]:64;++o;const E=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||d==null||h==null||E==null)throw new mR;const S=a<<2|d>>4;if(i.push(S),h!==64){const C=d<<4&240|h>>2;if(i.push(C),E!==64){const M=h<<6&192|E;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pR=function(t){const e=Bx(t);return Gx.encodeByteArray(e,!0)},Vd=function(t){return pR(t).replace(/\./g,"")},Hx=function(t){try{return Gx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=()=>gR().__FIREBASE_DEFAULTS__,vR=()=>{if(typeof process>"u"||typeof M0>"u")return;const t=M0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_R=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hx(t[1]);return e&&JSON.parse(e)},uf=()=>{try{return yR()||vR()||_R()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zx=t=>{var e,n;return(n=(e=uf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jx=t=>{const e=zx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},$x=()=>{var t;return(t=uf())===null||t===void 0?void 0:t.config},Yx=t=>{var e;return(e=uf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vd(JSON.stringify(n)),Vd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ER(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function xR(){var t;const e=(t=uf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CR(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bR(){return!xR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IR(){try{return typeof indexedDB=="object"}catch{return!1}}function RR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="FirebaseError";class Oi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=NR,Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?MR(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Oi(o,d,i)}}function MR(t,e){return t.replace(DR,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const DR=/\{\$([^}]+)}/g;function PR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Od(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const a=t[o],u=e[o];if(D0(a)&&D0(u)){if(!Od(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function D0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function kR(t,e){const n=new UR(t,e);return n.subscribe.bind(n)}class UR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");LR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Km),o.error===void 0&&(o.error=Km),o.complete===void 0&&(o.complete=Km);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Km(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){return t&&t._delegate?t._delegate:t}class Mr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new TR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FR(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:OR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OR(t){return t===mo?void 0:t}function FR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const BR={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},GR=He.INFO,HR={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},zR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=HR[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $p{constructor(e){this.name=e,this._logLevel=GR,this._logHandler=zR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const jR=(t,e)=>e.some(n=>t instanceof n);let P0,k0;function $R(){return P0||(P0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YR(){return k0||(k0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kx=new WeakMap,up=new WeakMap,Wx=new WeakMap,Wm=new WeakMap,Yp=new WeakMap;function JR(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(Ir(t.result)),o()},u=()=>{i(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&Kx.set(n,t)}).catch(()=>{}),Yp.set(e,t),e}function KR(t){if(up.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),o()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});up.set(t,e)}let cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return up.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WR(t){cp=t(cp)}function QR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Qm(this),e,...n);return Wx.set(i,e.sort?e.sort():[e]),Ir(i)}:YR().includes(t)?function(...e){return t.apply(Qm(this),e),Ir(Kx.get(this))}:function(...e){return Ir(t.apply(Qm(this),e))}}function XR(t){return typeof t=="function"?QR(t):(t instanceof IDBTransaction&&KR(t),jR(t,$R())?new Proxy(t,cp):t)}function Ir(t){if(t instanceof IDBRequest)return JR(t);if(Wm.has(t))return Wm.get(t);const e=XR(t);return e!==t&&(Wm.set(t,e),Yp.set(e,t)),e}const Qm=t=>Yp.get(t);function ZR(t,e,{blocked:n,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(t,e),d=Ir(u);return i&&u.addEventListener("upgradeneeded",f=>{i(Ir(u.result),f.oldVersion,f.newVersion,Ir(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const eN=["get","getKey","getAll","getAllKeys","count"],tN=["put","add","delete","clear"],Xm=new Map;function U0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xm.get(e))return Xm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=tN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||eN.includes(n)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let h=f.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),o&&f.done]))[0]};return Xm.set(e,a),a}WR(t=>({...t,get:(e,n,i)=>U0(e,n)||t.get(e,n,i),has:(e,n)=>!!U0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function iN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dp="@firebase/app",L0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new $p("@firebase/app"),sN="@firebase/app-compat",rN="@firebase/analytics-compat",oN="@firebase/analytics",aN="@firebase/app-check-compat",lN="@firebase/app-check",uN="@firebase/auth",cN="@firebase/auth-compat",dN="@firebase/database",fN="@firebase/data-connect",hN="@firebase/database-compat",mN="@firebase/functions",pN="@firebase/functions-compat",gN="@firebase/installations",yN="@firebase/installations-compat",vN="@firebase/messaging",_N="@firebase/messaging-compat",TN="@firebase/performance",EN="@firebase/performance-compat",xN="@firebase/remote-config",SN="@firebase/remote-config-compat",wN="@firebase/storage",AN="@firebase/storage-compat",CN="@firebase/firestore",bN="@firebase/vertexai-preview",IN="@firebase/firestore-compat",RN="firebase",NN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="[DEFAULT]",MN={[dp]:"fire-core",[sN]:"fire-core-compat",[oN]:"fire-analytics",[rN]:"fire-analytics-compat",[lN]:"fire-app-check",[aN]:"fire-app-check-compat",[uN]:"fire-auth",[cN]:"fire-auth-compat",[dN]:"fire-rtdb",[fN]:"fire-data-connect",[hN]:"fire-rtdb-compat",[mN]:"fire-fn",[pN]:"fire-fn-compat",[gN]:"fire-iid",[yN]:"fire-iid-compat",[vN]:"fire-fcm",[_N]:"fire-fcm-compat",[TN]:"fire-perf",[EN]:"fire-perf-compat",[xN]:"fire-rc",[SN]:"fire-rc-compat",[wN]:"fire-gcs",[AN]:"fire-gcs-compat",[CN]:"fire-fst",[IN]:"fire-fst-compat",[bN]:"fire-vertex","fire-js":"fire-js",[RN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new Map,DN=new Map,hp=new Map;function V0(t,e){try{t.container.addComponent(e)}catch(n){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _o(t){const e=t.name;if(hp.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;hp.set(e,t);for(const n of Fd.values())V0(n,t);for(const n of DN.values())V0(n,t);return!0}function cf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ar(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Nu("app","Firebase",PN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=NN;function Qx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:fp,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Rr.create("bad-app-name",{appName:String(o)});if(n||(n=$x()),!n)throw Rr.create("no-options");const a=Fd.get(o);if(a){if(Od(n,a.options)&&Od(i,a.config))return a;throw Rr.create("duplicate-app",{appName:o})}const u=new qR(o);for(const f of hp.values())u.addComponent(f);const d=new kN(n,i,u);return Fd.set(o,d),d}function Jp(t=fp){const e=Fd.get(t);if(!e&&t===fp&&$x())return Qx();if(!e)throw Rr.create("no-app",{appName:t});return e}function Ri(t,e,n){var i;let o=(i=MN[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(d.join(" "));return}_o(new Mr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="firebase-heartbeat-database",LN=1,yu="firebase-heartbeat-store";let Zm=null;function Xx(){return Zm||(Zm=ZR(UN,LN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Zm}async function VN(t){try{const n=(await Xx()).transaction(yu),i=await n.objectStore(yu).get(Zx(t));return await n.done,i}catch(e){if(e instanceof Oi)Es.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(n.message)}}}async function O0(t,e){try{const i=(await Xx()).transaction(yu,"readwrite");await i.objectStore(yu).put(e,Zx(t)),await i.done}catch(n){if(n instanceof Oi)Es.warn(n.message);else{const i=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Es.warn(i.message)}}}function Zx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=1024,FN=720*60*60*1e3;class qN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=F0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=FN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Es.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=F0(),{heartbeatsToSend:i,unsentEntries:o}=BN(this._heartbeatsCache.heartbeats),a=Vd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Es.warn(n),""}}}function F0(){return new Date().toISOString().substring(0,10)}function BN(t,e=ON){const n=[];let i=t.slice();for(const o of t){const a=n.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),q0(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),q0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class GN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IR()?RR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return O0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return O0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function q0(t){return Vd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){_o(new Mr("platform-logger",e=>new nN(e),"PRIVATE")),_o(new Mr("heartbeat",e=>new qN(e),"PRIVATE")),Ri(dp,L0,t),Ri(dp,L0,"esm2017"),Ri("fire-js","")}HN("");var zN="firebase",jN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ri(zN,jN,"app");function Kp(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function eS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $N=eS,tS=new Nu("auth","Firebase",eS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new $p("@firebase/auth");function YN(t,...e){qd.logLevel<=He.WARN&&qd.warn(`Auth (${bo}): ${t}`,...e)}function Ad(t,...e){qd.logLevel<=He.ERROR&&qd.error(`Auth (${bo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t,...e){throw Wp(t,...e)}function Ni(t,...e){return Wp(t,...e)}function nS(t,e,n){const i=Object.assign(Object.assign({},$N()),{[e]:n});return new Nu("auth","Firebase",i).create(e,{appName:t.name})}function yo(t){return nS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return tS.create(t,...e)}function Ie(t,e,...n){if(!t)throw Wp(e,...n)}function ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ad(e),new Error(e)}function Ss(t,e){t||ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JN(){return B0()==="http:"||B0()==="https:"}function B0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JN()||wR()||"connection"in navigator)?navigator.onLine:!0}function WN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ss(n>e,"Short delay should be less than long delay!"),this.isMobile=ER()||AR()}get(){return KN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e){Ss(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Du(3e4,6e4);function Xp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function za(t,e,n,i,o={}){return sS(t,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Mu(Object.assign({key:t.config.apiKey},u)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:f},a);return SR()||(h.referrerPolicy="no-referrer"),iS.fetch()(rS(t,t.config.apiHost,n,d),h)})}async function sS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},QN),e);try{const o=new e1(t),a=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw yd(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,h]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw yd(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw yd(t,"user-disabled",u);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw nS(t,_,h);xs(t,_)}}catch(o){if(o instanceof Oi)throw o;xs(t,"network-request-failed",{message:String(o)})}}async function ZN(t,e,n,i,o={}){const a=await za(t,e,n,i,o);return"mfaPendingCredential"in a&&xs(t,"multi-factor-auth-required",{_serverResponse:a}),a}function rS(t,e,n,i){const o=`${e}${n}?${i}`;return t.config.emulator?Qp(t.config,o):`${t.config.apiScheme}://${o}`}class e1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ni(this.auth,"network-request-failed")),XN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ni(t,e,i);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t1(t,e){return za(t,"POST","/v1/accounts:delete",e)}async function oS(t,e){return za(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n1(t,e=!1){const n=tn(t),i=await n.getIdToken(e),o=Zp(i);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:cu(ep(o.auth_time)),issuedAtTime:cu(ep(o.iat)),expirationTime:cu(ep(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ep(t){return Number(t)*1e3}function Zp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Ad("JWT malformed, contained fewer than 3 sections"),null;try{const o=Hx(n);return o?JSON.parse(o):(Ad("Failed to decode base64 JWT payload"),null)}catch(o){return Ad("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function G0(t){const e=Zp(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Oi&&i1(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function i1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(t){var e;const n=t.auth,i=await t.getIdToken(),o=await vu(t,oS(n,{idToken:i}));Ie(o==null?void 0:o.users.length,n,"internal-error");const a=o.users[0];t._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?aS(a.providerUserInfo):[],d=o1(t.providerData,u),f=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),_=f?h:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new pp(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(t,E)}async function r1(t){const e=tn(t);await Bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o1(t,e){return[...t.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function aS(t){return t.map(e=>{var{providerId:n}=e,i=Kp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(t,e){const n=await sS(t,{},async()=>{const i=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=t.config,u=rS(t,o,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",iS.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function l1(t,e){return za(t,"POST","/v2/accounts:revokeToken",Xp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=G0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:a}=await a1(e,n);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:a}=n,u=new ba;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ps{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,a=Kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new pp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await vu(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return n1(this,e)}reload(){return r1(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ps(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Bd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ar(this.auth.app))return Promise.reject(yo(this.auth));const e=await this.getIdToken();return await vu(this,t1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,a,u,d,f,h,_;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,S=(o=n.email)!==null&&o!==void 0?o:void 0,C=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,M=(u=n.photoURL)!==null&&u!==void 0?u:void 0,V=(d=n.tenantId)!==null&&d!==void 0?d:void 0,U=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,z=(h=n.createdAt)!==null&&h!==void 0?h:void 0,J=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:j,emailVerified:Y,isAnonymous:ie,providerData:oe,stsTokenManager:P}=n;Ie(j&&P,e,"internal-error");const N=ba.fromJSON(this.name,P);Ie(typeof j=="string",e,"internal-error"),Tr(E,e.name),Tr(S,e.name),Ie(typeof Y=="boolean",e,"internal-error"),Ie(typeof ie=="boolean",e,"internal-error"),Tr(C,e.name),Tr(M,e.name),Tr(V,e.name),Tr(U,e.name),Tr(z,e.name),Tr(J,e.name);const R=new ps({uid:j,auth:e,email:S,emailVerified:Y,displayName:E,isAnonymous:ie,photoURL:M,phoneNumber:C,tenantId:V,stsTokenManager:N,createdAt:z,lastLoginAt:J});return oe&&Array.isArray(oe)&&(R.providerData=oe.map(k=>Object.assign({},k))),U&&(R._redirectEventId=U),R}static async _fromIdTokenResponse(e,n,i=!1){const o=new ba;o.updateFromServerResponse(n);const a=new ps({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Bd(a),a}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?aS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new ba;d.updateFromIdToken(i);const f=new ps({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new pp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Map;function gs(t){Ss(t instanceof Function,"Expected a class definition");let e=H0.get(t);return e?(Ss(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,H0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lS.type="NONE";const z0=lS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t,e,n){return`firebase:${t}:${e}:${n}`}class Ia{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Cd(this.userKey,o.apiKey,a),this.fullPersistenceKey=Cd("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ps._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ia(gs(z0),e,i);const o=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||gs(z0);const u=Cd(i,e.config.apiKey,e.name);let d=null;for(const h of n)try{const _=await h._get(u);if(_){const E=ps._fromJSON(e,_);h!==a&&(d=E),a=h;break}}catch{}const f=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Ia(a,e,i):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new Ia(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mS(e))return"Blackberry";if(pS(e))return"Webos";if(cS(e))return"Safari";if((e.includes("chrome/")||dS(e))&&!e.includes("edge/"))return"Chrome";if(hS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function uS(t=hn()){return/firefox\//i.test(t)}function cS(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dS(t=hn()){return/crios\//i.test(t)}function fS(t=hn()){return/iemobile/i.test(t)}function hS(t=hn()){return/android/i.test(t)}function mS(t=hn()){return/blackberry/i.test(t)}function pS(t=hn()){return/webos/i.test(t)}function eg(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function u1(t=hn()){var e;return eg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function c1(){return CR()&&document.documentMode===10}function gS(t=hn()){return eg(t)||hS(t)||pS(t)||mS(t)||/windows phone/i.test(t)||fS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t,e=[]){let n;switch(t){case"Browser":n=j0(hn());break;case"Worker":n=`${j0(hn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(t,e={}){return za(t,"GET","/v2/passwordPolicy",Xp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=6;class m1{constructor(e){var n,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:h1,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $0(this),this.idTokenSubscription=new $0(this),this.beforeStateQueue=new d1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gs(n)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Ia.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await oS(this,{idToken:e}),i=await ps._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ar(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=o==null?void 0:o._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ar(this.app))return Promise.reject(yo(this));const n=e?tn(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ar(this.app)?Promise.reject(yo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ar(this.app)?Promise.reject(yo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f1(this),n=new m1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await l1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gs(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await Ia.create(this,[gs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,o);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&YN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function tg(t){return tn(t)}class $0{constructor(e){this.auth=e,this.observer=null,this.addObserver=kR(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ng={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g1(t){ng=t}function y1(t){return ng.loadJS(t)}function v1(){return ng.gapiScript}function _1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t,e){const n=cf(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),a=n.getOptions();if(Od(a,e??{}))return o;xs(o,"already-initialized")}return n.initialize({options:e})}function E1(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(gs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function vS(t,e,n){const i=tg(t);Ie(i._canInitEmulator,i,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!!(n!=null&&n.disableWarnings),a=_S(e),{host:u,port:d}=x1(e),f=d===null?"":`:${d}`;i.config.emulator={url:`${a}//${u}${f}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||S1()}function _S(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function x1(t){const e=_S(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:Y0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:Y0(u)}}}function Y0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function S1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,n){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(t,e){return ZN(t,"POST","/v1/accounts:signInWithIdp",Xp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="http://localhost";class To extends TS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new To(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,a=Kp(n,["providerId","signInMethod"]);if(!i||!o)return null;const u=new To(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Ra(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ra(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ra(e,n)}buildRequest(){const e={requestUri:w1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends ES{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Pu{constructor(){super("facebook.com")}static credential(e){return To._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.FACEBOOK_SIGN_IN_METHOD="facebook.com";Er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return To._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return xr.credential(n,i)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Pu{constructor(){super("github.com")}static credential(e){return To._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Pu{constructor(){super("twitter.com")}static credential(e,n){return To._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return wr.credential(n,i)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const a=await ps._fromIdTokenResponse(e,i,o),u=J0(i);return new ka({user:a,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=J0(i);return new ka({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function J0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends Oi{constructor(e,n,i,o){var a;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Gd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Gd(e,n,i,o)}}function xS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Gd._fromErrorAndOperation(t,a,e,i):a})}async function A1(t,e,n=!1){const i=await vu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ka._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(t,e,n=!1){const{auth:i}=t;if(Ar(i.app))return Promise.reject(yo(i));const o="reauthenticate";try{const a=await vu(t,xS(i,o,e,t),n);Ie(a.idToken,i,"internal-error");const u=Zp(a.idToken);Ie(u,i,"internal-error");const{sub:d}=u;return Ie(t.uid===d,i,"user-mismatch"),ka._forOperation(t,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&xs(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(t,e,n=!1){if(Ar(t.app))return Promise.reject(yo(t));const i="signIn",o=await xS(t,i,e),a=await ka._fromIdTokenResponse(t,i,o);return n||await t._updateCurrentUser(a.user),a}function I1(t,e,n,i){return tn(t).onIdTokenChanged(e,n,i)}function R1(t,e,n){return tn(t).beforeAuthStateChanged(e,n)}function SS(t,e,n,i){return tn(t).onAuthStateChanged(e,n,i)}const Hd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=1e3,M1=10;class AS extends wS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);c1()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,M1):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},N1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AS.type="LOCAL";const D1=AS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS extends wS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CS.type="SESSION";const bS=CS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new df(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:a}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(n.origin,a)),f=await P1(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const h=ig("",20);o.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}function U1(t){Mi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function L1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function O1(){return IS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="firebaseLocalStorageDb",F1=1,zd="firebaseLocalStorage",NS="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ff(t,e){return t.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function q1(){const t=indexedDB.deleteDatabase(RS);return new ku(t).toPromise()}function gp(){const t=indexedDB.open(RS,F1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(zd,{keyPath:NS})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(zd)?e(i):(i.close(),await q1(),e(await gp()))})})}async function K0(t,e,n){const i=ff(t,!0).put({[NS]:e,value:n});return new ku(i).toPromise()}async function B1(t,e){const n=ff(t,!1).get(e),i=await new ku(n).toPromise();return i===void 0?null:i.value}function W0(t,e){const n=ff(t,!0).delete(e);return new ku(n).toPromise()}const G1=800,H1=3;class MS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>H1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=df._getInstance(O1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await L1(),!this.activeServiceWorker)return;this.sender=new k1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gp();return await K0(e,Hd,"1"),await W0(e,Hd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>K0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>B1(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>W0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=ff(o,!1).getAll();return new ku(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MS.type="LOCAL";const z1=MS;new Du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e){return e?gs(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends TS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ra(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $1(t){return b1(t.auth,new sg(t),t.bypassAuthState)}function Y1(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),C1(n,new sg(t),t.bypassAuthState)}async function J1(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),A1(n,new sg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $1;case"linkViaPopup":case"linkViaRedirect":return J1;case"reauthViaPopup":case"reauthViaRedirect":return Y1;default:xs(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new Du(2e3,1e4);class Aa extends DS{constructor(e,n,i,o,a){super(e,n,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,K1.get())};e()}}Aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="pendingRedirect",bd=new Map;class Q1 extends DS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=bd.get(this.auth._key());if(!e){try{const i=await X1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}bd.set(this.auth._key(),e)}return this.bypassAuthState||bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function X1(t,e){const n=tM(e),i=eM(t);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function Z1(t,e){bd.set(t._key(),e)}function eM(t){return gs(t._redirectPersistence)}function tM(t){return Cd(W1,t.config.apiKey,t.name)}async function nM(t,e,n=!1){if(Ar(t.app))return Promise.reject(yo(t));const i=tg(t),o=j1(i,e),u=await new Q1(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=600*1e3;class sM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!PS(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ni(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q0(e))}saveEventToCache(e){this.cachedEventUids.add(Q0(e)),this.lastProcessedEventTime=Date.now()}}function Q0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e={}){return za(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lM=/^https?/;async function uM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oM(t);for(const n of e)try{if(cM(n))return}catch{}xs(t,"unauthorized-domain")}function cM(t){const e=mp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!lM.test(n))return!1;if(aM.test(t))return i===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new Du(3e4,6e4);function X0(){const t=Mi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fM(t){return new Promise((e,n)=>{var i,o,a;function u(){X0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X0(),n(Ni(t,"network-request-failed"))},timeout:dM.get()})}if(!((o=(i=Mi().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Mi().gapi)===null||a===void 0)&&a.load)u();else{const d=_1("iframefcb");return Mi()[d]=()=>{gapi.load?u():n(Ni(t,"network-request-failed"))},y1(`${v1()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw Id=null,e})}let Id=null;function hM(t){return Id=Id||fM(t),Id}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=new Du(5e3,15e3),pM="__/auth/iframe",gM="emulator/auth/iframe",yM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _M(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qp(e,gM):`https://${t.config.authDomain}/${pM}`,i={apiKey:e.apiKey,appName:t.name,v:bo},o=vM.get(t.config.apiHost);o&&(i.eid=o);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Mu(i).slice(1)}`}async function TM(t){const e=await hM(t),n=Mi().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:_M(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yM,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Ni(t,"network-request-failed"),d=Mi().setTimeout(()=>{a(u)},mM.get());function f(){Mi().clearTimeout(d),o(i)}i.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xM=500,SM=600,wM="_blank",AM="http://localhost";class Z0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CM(t,e,n,i=xM,o=SM){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},EM),{width:i.toString(),height:o.toString(),top:a,left:u}),h=hn().toLowerCase();n&&(d=dS(h)?wM:n),uS(h)&&(e=e||AM,f.scrollbars="yes");const _=Object.entries(f).reduce((S,[C,M])=>`${S}${C}=${M},`,"");if(u1(h)&&d!=="_self")return bM(e||"",d),new Z0(null);const E=window.open(e||"",d,_);Ie(E,t,"popup-blocked");try{E.focus()}catch{}return new Z0(E)}function bM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM="__/auth/handler",RM="emulator/auth/handler",NM=encodeURIComponent("fac");async function eT(t,e,n,i,o,a){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:bo,eventId:o};if(e instanceof ES){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",PR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Pu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await t._getAppCheckToken(),h=f?`#${NM}=${encodeURIComponent(f)}`:"";return`${MM(t)}?${Mu(d).slice(1)}${h}`}function MM({config:t}){return t.emulator?Qp(t,RM):`https://${t.authDomain}/${IM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="webStorageSupport";class DM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bS,this._completeRedirectFn=nM,this._overrideRedirectResult=Z1}async _openPopup(e,n,i,o){var a;Ss((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await eT(e,n,i,mp(),o);return CM(e,u,ig())}async _openRedirect(e,n,i,o){await this._originValidation(e);const a=await eT(e,n,i,mp(),o);return U1(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:a}=this.eventManagers[n];return o?Promise.resolve(o):(Ss(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await TM(e),i=new sM(e);return n.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tp,{type:tp},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[tp];u!==void 0&&n(!!u),xs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gS()||cS()||eg()}}const PM=DM;var tT="@firebase/auth",nT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LM(t){_o(new Mr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yS(t)},h=new p1(i,o,a,f);return E1(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),_o(new Mr("auth-internal",e=>{const n=tg(e.getProvider("auth").getImmediate());return(i=>new kM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ri(tT,nT,UM(t)),Ri(tT,nT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=300,OM=Yx("authIdTokenMaxAge")||VM;let iT=null;const FM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>OM)return;const o=n==null?void 0:n.token;iT!==o&&(iT=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function qM(t=Jp()){const e=cf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=T1(t,{popupRedirectResolver:PM,persistence:[z1,D1,bS]}),i=Yx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=FM(a.toString());R1(n,u,()=>u(n.currentUser)),I1(n,d=>u(d))}}const o=zx("auth");return o&&vS(n,`http://${o}`),n}function BM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}g1({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=o=>{const a=Ni("internal-error");a.customData=o,n(a)},i.type="text/javascript",i.charset="UTF-8",BM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LM("Browser");var sT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vo,kS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,N){function R(){}R.prototype=N.prototype,P.D=N.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(k,q,B){for(var L=Array(arguments.length-2),je=2;je<arguments.length;je++)L[je-2]=arguments[je];return N.prototype[q].apply(k,L)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,N,R){R||(R=0);var k=Array(16);if(typeof N=="string")for(var q=0;16>q;++q)k[q]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(q=0;16>q;++q)k[q]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=P.g[0],R=P.g[1],q=P.g[2];var B=P.g[3],L=N+(B^R&(q^B))+k[0]+3614090360&4294967295;N=R+(L<<7&4294967295|L>>>25),L=B+(q^N&(R^q))+k[1]+3905402710&4294967295,B=N+(L<<12&4294967295|L>>>20),L=q+(R^B&(N^R))+k[2]+606105819&4294967295,q=B+(L<<17&4294967295|L>>>15),L=R+(N^q&(B^N))+k[3]+3250441966&4294967295,R=q+(L<<22&4294967295|L>>>10),L=N+(B^R&(q^B))+k[4]+4118548399&4294967295,N=R+(L<<7&4294967295|L>>>25),L=B+(q^N&(R^q))+k[5]+1200080426&4294967295,B=N+(L<<12&4294967295|L>>>20),L=q+(R^B&(N^R))+k[6]+2821735955&4294967295,q=B+(L<<17&4294967295|L>>>15),L=R+(N^q&(B^N))+k[7]+4249261313&4294967295,R=q+(L<<22&4294967295|L>>>10),L=N+(B^R&(q^B))+k[8]+1770035416&4294967295,N=R+(L<<7&4294967295|L>>>25),L=B+(q^N&(R^q))+k[9]+2336552879&4294967295,B=N+(L<<12&4294967295|L>>>20),L=q+(R^B&(N^R))+k[10]+4294925233&4294967295,q=B+(L<<17&4294967295|L>>>15),L=R+(N^q&(B^N))+k[11]+2304563134&4294967295,R=q+(L<<22&4294967295|L>>>10),L=N+(B^R&(q^B))+k[12]+1804603682&4294967295,N=R+(L<<7&4294967295|L>>>25),L=B+(q^N&(R^q))+k[13]+4254626195&4294967295,B=N+(L<<12&4294967295|L>>>20),L=q+(R^B&(N^R))+k[14]+2792965006&4294967295,q=B+(L<<17&4294967295|L>>>15),L=R+(N^q&(B^N))+k[15]+1236535329&4294967295,R=q+(L<<22&4294967295|L>>>10),L=N+(q^B&(R^q))+k[1]+4129170786&4294967295,N=R+(L<<5&4294967295|L>>>27),L=B+(R^q&(N^R))+k[6]+3225465664&4294967295,B=N+(L<<9&4294967295|L>>>23),L=q+(N^R&(B^N))+k[11]+643717713&4294967295,q=B+(L<<14&4294967295|L>>>18),L=R+(B^N&(q^B))+k[0]+3921069994&4294967295,R=q+(L<<20&4294967295|L>>>12),L=N+(q^B&(R^q))+k[5]+3593408605&4294967295,N=R+(L<<5&4294967295|L>>>27),L=B+(R^q&(N^R))+k[10]+38016083&4294967295,B=N+(L<<9&4294967295|L>>>23),L=q+(N^R&(B^N))+k[15]+3634488961&4294967295,q=B+(L<<14&4294967295|L>>>18),L=R+(B^N&(q^B))+k[4]+3889429448&4294967295,R=q+(L<<20&4294967295|L>>>12),L=N+(q^B&(R^q))+k[9]+568446438&4294967295,N=R+(L<<5&4294967295|L>>>27),L=B+(R^q&(N^R))+k[14]+3275163606&4294967295,B=N+(L<<9&4294967295|L>>>23),L=q+(N^R&(B^N))+k[3]+4107603335&4294967295,q=B+(L<<14&4294967295|L>>>18),L=R+(B^N&(q^B))+k[8]+1163531501&4294967295,R=q+(L<<20&4294967295|L>>>12),L=N+(q^B&(R^q))+k[13]+2850285829&4294967295,N=R+(L<<5&4294967295|L>>>27),L=B+(R^q&(N^R))+k[2]+4243563512&4294967295,B=N+(L<<9&4294967295|L>>>23),L=q+(N^R&(B^N))+k[7]+1735328473&4294967295,q=B+(L<<14&4294967295|L>>>18),L=R+(B^N&(q^B))+k[12]+2368359562&4294967295,R=q+(L<<20&4294967295|L>>>12),L=N+(R^q^B)+k[5]+4294588738&4294967295,N=R+(L<<4&4294967295|L>>>28),L=B+(N^R^q)+k[8]+2272392833&4294967295,B=N+(L<<11&4294967295|L>>>21),L=q+(B^N^R)+k[11]+1839030562&4294967295,q=B+(L<<16&4294967295|L>>>16),L=R+(q^B^N)+k[14]+4259657740&4294967295,R=q+(L<<23&4294967295|L>>>9),L=N+(R^q^B)+k[1]+2763975236&4294967295,N=R+(L<<4&4294967295|L>>>28),L=B+(N^R^q)+k[4]+1272893353&4294967295,B=N+(L<<11&4294967295|L>>>21),L=q+(B^N^R)+k[7]+4139469664&4294967295,q=B+(L<<16&4294967295|L>>>16),L=R+(q^B^N)+k[10]+3200236656&4294967295,R=q+(L<<23&4294967295|L>>>9),L=N+(R^q^B)+k[13]+681279174&4294967295,N=R+(L<<4&4294967295|L>>>28),L=B+(N^R^q)+k[0]+3936430074&4294967295,B=N+(L<<11&4294967295|L>>>21),L=q+(B^N^R)+k[3]+3572445317&4294967295,q=B+(L<<16&4294967295|L>>>16),L=R+(q^B^N)+k[6]+76029189&4294967295,R=q+(L<<23&4294967295|L>>>9),L=N+(R^q^B)+k[9]+3654602809&4294967295,N=R+(L<<4&4294967295|L>>>28),L=B+(N^R^q)+k[12]+3873151461&4294967295,B=N+(L<<11&4294967295|L>>>21),L=q+(B^N^R)+k[15]+530742520&4294967295,q=B+(L<<16&4294967295|L>>>16),L=R+(q^B^N)+k[2]+3299628645&4294967295,R=q+(L<<23&4294967295|L>>>9),L=N+(q^(R|~B))+k[0]+4096336452&4294967295,N=R+(L<<6&4294967295|L>>>26),L=B+(R^(N|~q))+k[7]+1126891415&4294967295,B=N+(L<<10&4294967295|L>>>22),L=q+(N^(B|~R))+k[14]+2878612391&4294967295,q=B+(L<<15&4294967295|L>>>17),L=R+(B^(q|~N))+k[5]+4237533241&4294967295,R=q+(L<<21&4294967295|L>>>11),L=N+(q^(R|~B))+k[12]+1700485571&4294967295,N=R+(L<<6&4294967295|L>>>26),L=B+(R^(N|~q))+k[3]+2399980690&4294967295,B=N+(L<<10&4294967295|L>>>22),L=q+(N^(B|~R))+k[10]+4293915773&4294967295,q=B+(L<<15&4294967295|L>>>17),L=R+(B^(q|~N))+k[1]+2240044497&4294967295,R=q+(L<<21&4294967295|L>>>11),L=N+(q^(R|~B))+k[8]+1873313359&4294967295,N=R+(L<<6&4294967295|L>>>26),L=B+(R^(N|~q))+k[15]+4264355552&4294967295,B=N+(L<<10&4294967295|L>>>22),L=q+(N^(B|~R))+k[6]+2734768916&4294967295,q=B+(L<<15&4294967295|L>>>17),L=R+(B^(q|~N))+k[13]+1309151649&4294967295,R=q+(L<<21&4294967295|L>>>11),L=N+(q^(R|~B))+k[4]+4149444226&4294967295,N=R+(L<<6&4294967295|L>>>26),L=B+(R^(N|~q))+k[11]+3174756917&4294967295,B=N+(L<<10&4294967295|L>>>22),L=q+(N^(B|~R))+k[2]+718787259&4294967295,q=B+(L<<15&4294967295|L>>>17),L=R+(B^(q|~N))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+N&4294967295,P.g[1]=P.g[1]+(q+(L<<21&4294967295|L>>>11))&4294967295,P.g[2]=P.g[2]+q&4294967295,P.g[3]=P.g[3]+B&4294967295}i.prototype.u=function(P,N){N===void 0&&(N=P.length);for(var R=N-this.blockSize,k=this.B,q=this.h,B=0;B<N;){if(q==0)for(;B<=R;)o(this,P,B),B+=this.blockSize;if(typeof P=="string"){for(;B<N;)if(k[q++]=P.charCodeAt(B++),q==this.blockSize){o(this,k),q=0;break}}else for(;B<N;)if(k[q++]=P[B++],q==this.blockSize){o(this,k),q=0;break}}this.h=q,this.o+=N},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var N=1;N<P.length-8;++N)P[N]=0;var R=8*this.o;for(N=P.length-8;N<P.length;++N)P[N]=R&255,R/=256;for(this.u(P),P=Array(16),N=R=0;4>N;++N)for(var k=0;32>k;k+=8)P[R++]=this.g[N]>>>k&255;return P};function a(P,N){var R=d;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=N(P)}function u(P,N){this.h=N;for(var R=[],k=!0,q=P.length-1;0<=q;q--){var B=P[q]|0;k&&B==N||(R[q]=B,k=!1)}this.g=R}var d={};function f(P){return-128<=P&&128>P?a(P,function(N){return new u([N|0],0>N?-1:0)}):new u([P|0],0>P?-1:0)}function h(P){if(isNaN(P)||!isFinite(P))return E;if(0>P)return U(h(-P));for(var N=[],R=1,k=0;P>=R;k++)N[k]=P/R|0,R*=4294967296;return new u(N,0)}function _(P,N){if(P.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P.charAt(0)=="-")return U(_(P.substring(1),N));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(N,8)),k=E,q=0;q<P.length;q+=8){var B=Math.min(8,P.length-q),L=parseInt(P.substring(q,q+B),N);8>B?(B=h(Math.pow(N,B)),k=k.j(B).add(h(L))):(k=k.j(R),k=k.add(h(L)))}return k}var E=f(0),S=f(1),C=f(16777216);t=u.prototype,t.m=function(){if(V(this))return-U(this).m();for(var P=0,N=1,R=0;R<this.g.length;R++){var k=this.i(R);P+=(0<=k?k:4294967296+k)*N,N*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M(this))return"0";if(V(this))return"-"+U(this).toString(P);for(var N=h(Math.pow(P,6)),R=this,k="";;){var q=Y(R,N).g;R=z(R,q.j(N));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=q,M(R))return B+k;for(;6>B.length;)B="0"+B;k=B+k}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function M(P){if(P.h!=0)return!1;for(var N=0;N<P.g.length;N++)if(P.g[N]!=0)return!1;return!0}function V(P){return P.h==-1}t.l=function(P){return P=z(this,P),V(P)?-1:M(P)?0:1};function U(P){for(var N=P.g.length,R=[],k=0;k<N;k++)R[k]=~P.g[k];return new u(R,~P.h).add(S)}t.abs=function(){return V(this)?U(this):this},t.add=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],k=0,q=0;q<=N;q++){var B=k+(this.i(q)&65535)+(P.i(q)&65535),L=(B>>>16)+(this.i(q)>>>16)+(P.i(q)>>>16);k=L>>>16,B&=65535,L&=65535,R[q]=L<<16|B}return new u(R,R[R.length-1]&-2147483648?-1:0)};function z(P,N){return P.add(U(N))}t.j=function(P){if(M(this)||M(P))return E;if(V(this))return V(P)?U(this).j(U(P)):U(U(this).j(P));if(V(P))return U(this.j(U(P)));if(0>this.l(C)&&0>P.l(C))return h(this.m()*P.m());for(var N=this.g.length+P.g.length,R=[],k=0;k<2*N;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var q=0;q<P.g.length;q++){var B=this.i(k)>>>16,L=this.i(k)&65535,je=P.i(q)>>>16,ye=P.i(q)&65535;R[2*k+2*q]+=L*ye,J(R,2*k+2*q),R[2*k+2*q+1]+=B*ye,J(R,2*k+2*q+1),R[2*k+2*q+1]+=L*je,J(R,2*k+2*q+1),R[2*k+2*q+2]+=B*je,J(R,2*k+2*q+2)}for(k=0;k<N;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=N;k<2*N;k++)R[k]=0;return new u(R,0)};function J(P,N){for(;(P[N]&65535)!=P[N];)P[N+1]+=P[N]>>>16,P[N]&=65535,N++}function j(P,N){this.g=P,this.h=N}function Y(P,N){if(M(N))throw Error("division by zero");if(M(P))return new j(E,E);if(V(P))return N=Y(U(P),N),new j(U(N.g),U(N.h));if(V(N))return N=Y(P,U(N)),new j(U(N.g),N.h);if(30<P.g.length){if(V(P)||V(N))throw Error("slowDivide_ only works with positive integers.");for(var R=S,k=N;0>=k.l(P);)R=ie(R),k=ie(k);var q=oe(R,1),B=oe(k,1);for(k=oe(k,2),R=oe(R,2);!M(k);){var L=B.add(k);0>=L.l(P)&&(q=q.add(R),B=L),k=oe(k,1),R=oe(R,1)}return N=z(P,q.j(N)),new j(q,N)}for(q=E;0<=P.l(N);){for(R=Math.max(1,Math.floor(P.m()/N.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),B=h(R),L=B.j(N);V(L)||0<L.l(P);)R-=k,B=h(R),L=B.j(N);M(B)&&(B=S),q=q.add(B),P=z(P,L)}return new j(q,P)}t.A=function(P){return Y(this,P).h},t.and=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],k=0;k<N;k++)R[k]=this.i(k)&P.i(k);return new u(R,this.h&P.h)},t.or=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],k=0;k<N;k++)R[k]=this.i(k)|P.i(k);return new u(R,this.h|P.h)},t.xor=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],k=0;k<N;k++)R[k]=this.i(k)^P.i(k);return new u(R,this.h^P.h)};function ie(P){for(var N=P.g.length+1,R=[],k=0;k<N;k++)R[k]=P.i(k)<<1|P.i(k-1)>>>31;return new u(R,P.h)}function oe(P,N){var R=N>>5;N%=32;for(var k=P.g.length-R,q=[],B=0;B<k;B++)q[B]=0<N?P.i(B+R)>>>N|P.i(B+R+1)<<32-N:P.i(B+R);return new u(q,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,kS=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,vo=u}).apply(typeof sT<"u"?sT:typeof self<"u"?self:typeof window<"u"?window:{});var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var US,ou,LS,Rd,yp,VS,OS,FS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,x,A){return p==Array.prototype||p==Object.prototype||(p[x]=A.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof vd=="object"&&vd];for(var x=0;x<p.length;++x){var A=p[x];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function o(p,x){if(x)e:{var A=i;p=p.split(".");for(var I=0;I<p.length-1;I++){var K=p[I];if(!(K in A))break e;A=A[K]}p=p[p.length-1],I=A[p],x=x(I),x!=I&&x!=null&&e(A,p,{configurable:!0,writable:!0,value:x})}}function a(p,x){p instanceof String&&(p+="");var A=0,I=!1,K={next:function(){if(!I&&A<p.length){var ne=A++;return{value:x(ne,p[ne]),done:!1}}return I=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}o("Array.prototype.values",function(p){return p||function(){return a(this,function(x,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(p){var x=typeof p;return x=x!="object"?x:p?Array.isArray(p)?"array":x:"null",x=="array"||x=="object"&&typeof p.length=="number"}function h(p){var x=typeof p;return x=="object"&&p!=null||x=="function"}function _(p,x,A){return p.call.apply(p.bind,arguments)}function E(p,x,A){if(!p)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,I),p.apply(x,K)}}return function(){return p.apply(x,arguments)}}function S(p,x,A){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function C(p,x){var A=Array.prototype.slice.call(arguments,1);return function(){var I=A.slice();return I.push.apply(I,arguments),p.apply(this,I)}}function M(p,x){function A(){}A.prototype=x.prototype,p.aa=x.prototype,p.prototype=new A,p.prototype.constructor=p,p.Qb=function(I,K,ne){for(var he=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)he[Ze-2]=arguments[Ze];return x.prototype[K].apply(I,he)}}function V(p){const x=p.length;if(0<x){const A=Array(x);for(let I=0;I<x;I++)A[I]=p[I];return A}return[]}function U(p,x){for(let A=1;A<arguments.length;A++){const I=arguments[A];if(f(I)){const K=p.length||0,ne=I.length||0;p.length=K+ne;for(let he=0;he<ne;he++)p[K+he]=I[he]}else p.push(I)}}class z{constructor(x,A){this.i=x,this.j=A,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function J(p){return/^[\s\xa0]*$/.test(p)}function j(){var p=d.navigator;return p&&(p=p.userAgent)?p:""}function Y(p){return Y[" "](p),p}Y[" "]=function(){};var ie=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function oe(p,x,A){for(const I in p)x.call(A,p[I],I,p)}function P(p,x){for(const A in p)x.call(void 0,p[A],A,p)}function N(p){const x={};for(const A in p)x[A]=p[A];return x}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(p,x){let A,I;for(let K=1;K<arguments.length;K++){I=arguments[K];for(A in I)p[A]=I[A];for(let ne=0;ne<R.length;ne++)A=R[ne],Object.prototype.hasOwnProperty.call(I,A)&&(p[A]=I[A])}}function q(p){var x=1;p=p.split(":");const A=[];for(;0<x&&p.length;)A.push(p.shift()),x--;return p.length&&A.push(p.join(":")),A}function B(p){d.setTimeout(()=>{throw p},0)}function L(){var p=Se;let x=null;return p.g&&(x=p.g,p.g=p.g.next,p.g||(p.h=null),x.next=null),x}class je{constructor(){this.h=this.g=null}add(x,A){const I=ye.get();I.set(x,A),this.h?this.h.next=I:this.g=I,this.h=I}}var ye=new z(()=>new O,p=>p.reset());class O{constructor(){this.next=this.g=this.h=null}set(x,A){this.h=x,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let te,fe=!1,Se=new je,ke=()=>{const p=d.Promise.resolve(void 0);te=()=>{p.then(G)}};var G=()=>{for(var p;p=L();){try{p.h.call(p.g)}catch(A){B(A)}var x=ye;x.j(p),100>x.h&&(x.h++,p.next=x.g,x.g=p)}fe=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(p,x){this.type=p,this.g=this.target=x,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var p=!1,x=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const A=()=>{};d.addEventListener("test",A,x),d.removeEventListener("test",A,x)}catch{}return p})();function me(p,x){if(W.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var A=this.type=p.type,I=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=x,x=p.relatedTarget){if(ie){e:{try{Y(x.nodeName);var K=!0;break e}catch{}K=!1}K||(x=null)}}else A=="mouseover"?x=p.fromElement:A=="mouseout"&&(x=p.toElement);this.relatedTarget=x,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ve[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&me.aa.h.call(this)}}M(me,W);var ve={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),et=0;function tt(p,x,A,I,K){this.listener=p,this.proxy=null,this.src=x,this.type=A,this.capture=!!I,this.ha=K,this.key=++et,this.da=this.fa=!1}function mn(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function xn(p){this.src=p,this.g={},this.h=0}xn.prototype.add=function(p,x,A,I,K){var ne=p.toString();p=this.g[ne],p||(p=this.g[ne]=[],this.h++);var he=Po(p,x,I,K);return-1<he?(x=p[he],A||(x.fa=!1)):(x=new tt(x,this.src,ne,!!I,K),x.fa=A,p.push(x)),x};function pi(p,x){var A=x.type;if(A in p.g){var I=p.g[A],K=Array.prototype.indexOf.call(I,x,void 0),ne;(ne=0<=K)&&Array.prototype.splice.call(I,K,1),ne&&(mn(x),p.g[A].length==0&&(delete p.g[A],p.h--))}}function Po(p,x,A,I){for(var K=0;K<p.length;++K){var ne=p[K];if(!ne.da&&ne.listener==x&&ne.capture==!!A&&ne.ha==I)return K}return-1}var ni="closure_lm_"+(1e6*Math.random()|0),Or={};function ko(p,x,A,I,K){if(Array.isArray(x)){for(var ne=0;ne<x.length;ne++)ko(p,x[ne],A,I,K);return null}return A=Hu(A),p&&p[be]?p.K(x,A,h(I)?!!I.capture:!1,K):Of(p,x,A,!1,I,K)}function Of(p,x,A,I,K,ne){if(!x)throw Error("Invalid event type");var he=h(K)?!!K.capture:!!K,Ze=el(p);if(Ze||(p[ni]=Ze=new xn(p)),A=Ze.add(x,A,I,he,ne),A.proxy)return A;if(I=Gu(),A.proxy=I,I.src=p,I.listener=A,p.addEventListener)de||(K=he),K===void 0&&(K=!1),p.addEventListener(x.toString(),I,K);else if(p.attachEvent)p.attachEvent(Lo(x.toString()),I);else if(p.addListener&&p.removeListener)p.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Gu(){function p(A){return x.call(p.src,p.listener,A)}const x=Ff;return p}function Uo(p,x,A,I,K){if(Array.isArray(x))for(var ne=0;ne<x.length;ne++)Uo(p,x[ne],A,I,K);else I=h(I)?!!I.capture:!!I,A=Hu(A),p&&p[be]?(p=p.i,x=String(x).toString(),x in p.g&&(ne=p.g[x],A=Po(ne,A,I,K),-1<A&&(mn(ne[A]),Array.prototype.splice.call(ne,A,1),ne.length==0&&(delete p.g[x],p.h--)))):p&&(p=el(p))&&(x=p.g[x.toString()],p=-1,x&&(p=Po(x,A,I,K)),(A=-1<p?x[p]:null)&&Fr(A))}function Fr(p){if(typeof p!="number"&&p&&!p.da){var x=p.src;if(x&&x[be])pi(x.i,p);else{var A=p.type,I=p.proxy;x.removeEventListener?x.removeEventListener(A,I,p.capture):x.detachEvent?x.detachEvent(Lo(A),I):x.addListener&&x.removeListener&&x.removeListener(I),(A=el(x))?(pi(A,p),A.h==0&&(A.src=null,x[ni]=null)):mn(p)}}}function Lo(p){return p in Or?Or[p]:Or[p]="on"+p}function Ff(p,x){if(p.da)p=!0;else{x=new me(x,this);var A=p.listener,I=p.ha||p.src;p.fa&&Fr(p),p=A.call(I,x)}return p}function el(p){return p=p[ni],p instanceof xn?p:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hu(p){return typeof p=="function"?p:(p[zt]||(p[zt]=function(x){return p.handleEvent(x)}),p[zt])}function Ut(){se.call(this),this.i=new xn(this),this.M=this,this.F=null}M(Ut,se),Ut.prototype[be]=!0,Ut.prototype.removeEventListener=function(p,x,A,I){Uo(this,p,x,A,I)};function Ot(p,x){var A,I=p.F;if(I)for(A=[];I;I=I.F)A.push(I);if(p=p.M,I=x.type||x,typeof x=="string")x=new W(x,p);else if(x instanceof W)x.target=x.target||p;else{var K=x;x=new W(I,p),k(x,K)}if(K=!0,A)for(var ne=A.length-1;0<=ne;ne--){var he=x.g=A[ne];K=Bi(he,I,!0,x)&&K}if(he=x.g=p,K=Bi(he,I,!0,x)&&K,K=Bi(he,I,!1,x)&&K,A)for(ne=0;ne<A.length;ne++)he=x.g=A[ne],K=Bi(he,I,!1,x)&&K}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var p=this.i,x;for(x in p.g){for(var A=p.g[x],I=0;I<A.length;I++)mn(A[I]);delete p.g[x],p.h--}}this.F=null},Ut.prototype.K=function(p,x,A,I){return this.i.add(String(p),x,!1,A,I)},Ut.prototype.L=function(p,x,A,I){return this.i.add(String(p),x,!0,A,I)};function Bi(p,x,A,I){if(x=p.i.g[String(x)],!x)return!0;x=x.concat();for(var K=!0,ne=0;ne<x.length;++ne){var he=x[ne];if(he&&!he.da&&he.capture==A){var Ze=he.listener,bt=he.ha||he.src;he.fa&&pi(p.i,he),K=Ze.call(bt,I)!==!1&&K}}return K&&!I.defaultPrevented}function zu(p,x,A){if(typeof p=="function")A&&(p=S(p,A));else if(p&&typeof p.handleEvent=="function")p=S(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:d.setTimeout(p,x||0)}function tl(p){p.g=zu(()=>{p.g=null,p.i&&(p.i=!1,tl(p))},p.l);const x=p.h;p.h=null,p.m.apply(null,x)}class qf extends se{constructor(x,A){super(),this.m=x,this.l=A,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:tl(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(p){se.call(this),this.h=p,this.g={}}M(qr,se);var Ds=[];function sn(p){oe(p.g,function(x,A){this.g.hasOwnProperty(A)&&Fr(x)},p),p.g={}}qr.prototype.N=function(){qr.aa.N.call(this),sn(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=d.JSON.stringify,pn=d.JSON.parse,Bf=class{stringify(p){return d.JSON.stringify(p,void 0)}parse(p){return d.JSON.parse(p,void 0)}};function nl(){}nl.prototype.h=null;function ju(p){return p.h||(p.h=p.i())}function Br(){}var gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ps(){W.call(this,"d")}M(Ps,W);function ii(){W.call(this,"c")}M(ii,W);var Hn={},ks=null;function Vo(){return ks=ks||new Ut}Hn.La="serverreachability";function il(p){W.call(this,Hn.La,p)}M(il,W);function Gi(p){const x=Vo();Ot(x,new il(x))}Hn.STAT_EVENT="statevent";function Us(p,x){W.call(this,Hn.STAT_EVENT,p),this.stat=x}M(Us,W);function jt(p){const x=Vo();Ot(x,new Us(x,p))}Hn.Ma="timingevent";function sl(p,x){W.call(this,Hn.Ma,p),this.size=x}M(sl,W);function Ls(p,x){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){p()},x)}function Vs(){this.g=!0}Vs.prototype.xa=function(){this.g=!1};function rl(p,x,A,I,K,ne){p.info(function(){if(p.g)if(ne)for(var he="",Ze=ne.split("&"),bt=0;bt<Ze.length;bt++){var Le=Ze[bt].split("=");if(1<Le.length){var qt=Le[0];Le=Le[1];var Bt=qt.split("_");he=2<=Bt.length&&Bt[1]=="type"?he+(qt+"="+Le+"&"):he+(qt+"=redacted&")}}else he=null;else he=ne;return"XMLHTTP REQ ("+I+") [attempt "+K+"]: "+x+`
`+A+`
`+he})}function ol(p,x,A,I,K,ne,he){p.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+K+"]: "+x+`
`+A+`
`+ne+" "+he})}function Hi(p,x,A,I){p.info(function(){return"XMLHTTP TEXT ("+x+"): "+yi(p,A)+(I?" "+I:"")})}function $u(p,x){p.info(function(){return"TIMEOUT: "+x})}Vs.prototype.info=function(){};function yi(p,x){if(!p.g)return x;if(!x)return null;try{var A=JSON.parse(x);if(A){for(p=0;p<A.length;p++)if(Array.isArray(A[p])){var I=A[p];if(!(2>I.length)){var K=I[1];if(Array.isArray(K)&&!(1>K.length)){var ne=K[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var he=1;he<K.length;he++)K[he]=""}}}}return Gn(A)}catch{return x}}var _t={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$t={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vi;function Os(){}M(Os,nl),Os.prototype.g=function(){return new XMLHttpRequest},Os.prototype.i=function(){return{}},vi=new Os;function _i(p,x,A,I){this.j=p,this.i=x,this.l=A,this.R=I||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yu}function Yu(){this.i=null,this.g="",this.h=!1}var al={},zi={};function Gr(p,x,A){p.L=1,p.v=jr(Tt(x)),p.m=A,p.P=!0,ji(p,null)}function ji(p,x){p.F=Date.now(),si(p),p.A=Tt(p.v);var A=p.A,I=p.R;Array.isArray(I)||(I=[String(I)]),Ji(A.i,"t",I),p.C=0,A=p.j.J,p.h=new Yu,p.g=uc(p.j,A?x:null,!p.m),0<p.O&&(p.M=new qf(S(p.Y,p,p.g),p.O)),x=p.U,A=p.g,I=p.ca;var K="readystatechange";Array.isArray(K)||(K&&(Ds[0]=K.toString()),K=Ds);for(var ne=0;ne<K.length;ne++){var he=ko(A,K[ne],I||x.handleEvent,!1,x.h||x);if(!he)break;x.g[he.key]=he}x=p.H?N(p.H):{},p.m?(p.u||(p.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,x)):(p.u="GET",p.g.ea(p.A,p.u,null,x)),Gi(),rl(p.i,p.u,p.A,p.l,p.R,p.m)}_i.prototype.ca=function(p){p=p.target;const x=this.M;x&&vn(p)==3?x.j():this.Y(p)},_i.prototype.Y=function(p){try{if(p==this.g)e:{const Bt=vn(this.g);var x=this.g.Ba();const Qs=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||Jr(this.g)))){this.J||Bt!=4||x==7||(x==8||0>=Qs?Gi(3):Gi(2)),Oo(this);var A=this.g.Z();this.X=A;t:if($i(this)){var I=Jr(this.g);p="";var K=I.length,ne=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Fs(this);var he="";break t}this.h.i=new d.TextDecoder}for(x=0;x<K;x++)this.h.h=!0,p+=this.h.i.decode(I[x],{stream:!(ne&&x==K-1)});I.length=0,this.h.g+=p,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=A==200,ol(this.i,this.u,this.A,this.l,this.R,Bt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,bt=this.g;if((Ze=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Ze)){var Le=Ze;break t}}Le=null}if(A=Le)Hi(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ti(this,A);else{this.o=!1,this.s=3,jt(12),gn(this),Fs(this);break e}}if(this.P){A=!0;let wn;for(;!this.J&&this.C<he.length;)if(wn=Hr(this,he),wn==zi){Bt==4&&(this.s=4,jt(14),A=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==al){this.s=4,jt(15),Hi(this.i,this.l,he,"[Invalid Chunk]"),A=!1;break}else Hi(this.i,this.l,wn,null),Ti(this,wn);if($i(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||he.length!=0||this.h.h||(this.s=1,jt(16),A=!1),this.o=this.o&&A,!A)Hi(this.i,this.l,he,"[Invalid Chunked Response]"),gn(this),Fs(this);else if(0<he.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),vl(qt),qt.M=!0,jt(11))}}else Hi(this.i,this.l,he,null),Ti(this,he);Bt==4&&gn(this),this.o&&!this.J&&(Bt==4?oc(this.j,this):(this.o=!1,si(this)))}else ec(this.g),A==400&&0<he.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),gn(this),Fs(this)}}}catch{}finally{}};function $i(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Hr(p,x){var A=p.C,I=x.indexOf(`
`,A);return I==-1?zi:(A=Number(x.substring(A,I)),isNaN(A)?al:(I+=1,I+A>x.length?zi:(x=x.slice(I,I+A),p.C=I+A,x)))}_i.prototype.cancel=function(){this.J=!0,gn(this)};function si(p){p.S=Date.now()+p.I,St(p,p.I)}function St(p,x){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Ls(S(p.ba,p),x)}function Oo(p){p.B&&(d.clearTimeout(p.B),p.B=null)}_i.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?($u(this.i,this.A),this.L!=2&&(Gi(),jt(17)),gn(this),this.s=2,Fs(this)):St(this,this.S-p)};function Fs(p){p.j.G==0||p.J||oc(p.j,p)}function gn(p){Oo(p);var x=p.M;x&&typeof x.ma=="function"&&x.ma(),p.M=null,sn(p.U),p.g&&(x=p.g,p.g=null,x.abort(),x.ma())}function Ti(p,x){try{var A=p.j;if(A.G!=0&&(A.g==p||qs(A.h,p))){if(!p.K&&qs(A.h,p)&&A.G==3){try{var I=A.Da.g.parse(x)}catch{I=null}if(Array.isArray(I)&&I.length==3){var K=I;if(K[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<p.F)Ks(A),Js(A);else break e;yl(A),jt(18)}}else A.za=K[1],0<A.za-A.T&&37500>K[2]&&A.F&&A.v==0&&!A.C&&(A.C=Ls(S(A.Za,A),6e3));if(1>=Ju(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Wi(A,11)}else if((p.K||A.g==p)&&Ks(A),!J(x))for(K=A.Da.g.parse(x),x=0;x<K.length;x++){let Le=K[x];if(A.T=Le[0],Le=Le[1],A.G==2)if(Le[0]=="c"){A.K=Le[1],A.ia=Le[2];const qt=Le[3];qt!=null&&(A.la=qt,A.j.info("VER="+A.la));const Bt=Le[4];Bt!=null&&(A.Aa=Bt,A.j.info("SVER="+A.Aa));const Qs=Le[5];Qs!=null&&typeof Qs=="number"&&0<Qs&&(I=1.5*Qs,A.L=I,A.j.info("backChannelRequestTimeoutMs_="+I)),I=A;const wn=p.g;if(wn){const Qr=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qr){var ne=I.h;ne.g||Qr.indexOf("spdy")==-1&&Qr.indexOf("quic")==-1&&Qr.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Bs(ne,ne.h),ne.h=null))}if(I.D){const Qi=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qi&&(I.ya=Qi,$e(I.I,I.D,Qi))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-p.F,A.j.info("Handshake RTT: "+A.R+"ms")),I=A;var he=p;if(I.qa=lc(I,I.J?I.ia:null,I.W),he.K){zn(I.h,he);var Ze=he,bt=I.L;bt&&(Ze.I=bt),Ze.B&&(Oo(Ze),si(Ze)),I.g=he}else sc(I);0<A.i.length&&$o(A)}else Le[0]!="stop"&&Le[0]!="close"||Wi(A,7);else A.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Wi(A,7):pl(A):Le[0]!="noop"&&A.l&&A.l.ta(Le),A.v=0)}}Gi(4)}catch{}}var Gf=class{constructor(p,x){this.g=p,this.map=x}};function ll(p){this.l=p||10,d.PerformanceNavigationTiming?(p=d.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ul(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Ju(p){return p.h?1:p.g?p.g.size:0}function qs(p,x){return p.h?p.h==x:p.g?p.g.has(x):!1}function Bs(p,x){p.g?p.g.add(x):p.h=x}function zn(p,x){p.h&&p.h==x?p.h=null:p.g&&p.g.has(x)&&p.g.delete(x)}ll.prototype.cancel=function(){if(this.i=yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function yn(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let x=p.i;for(const A of p.g.values())x=x.concat(A.D);return x}return V(p.i)}function Ku(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(f(p)){for(var x=[],A=p.length,I=0;I<A;I++)x.push(p[I]);return x}x=[],A=0;for(I in p)x[A++]=p[I];return x}function Hf(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(f(p)||typeof p=="string"){var x=[];p=p.length;for(var A=0;A<p;A++)x.push(A);return x}x=[],A=0;for(const I in p)x[A++]=I;return x}}}function Fo(p,x){if(p.forEach&&typeof p.forEach=="function")p.forEach(x,void 0);else if(f(p)||typeof p=="string")Array.prototype.forEach.call(p,x,void 0);else for(var A=Hf(p),I=Ku(p),K=I.length,ne=0;ne<K;ne++)x.call(void 0,I[ne],A&&A[ne],p)}var cl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qo(p,x){if(p){p=p.split("&");for(var A=0;A<p.length;A++){var I=p[A].indexOf("="),K=null;if(0<=I){var ne=p[A].substring(0,I);K=p[A].substring(I+1)}else ne=p[A];x(ne,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Yi(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Yi){this.h=p.h,Gs(this,p.j),this.o=p.o,this.g=p.g,zr(this,p.s),this.l=p.l;var x=p.i,A=new Ei;A.i=x.i,x.g&&(A.g=new Map(x.g),A.h=x.h),Bo(this,A),this.m=p.m}else p&&(x=String(p).match(cl))?(this.h=!1,Gs(this,x[1]||"",!0),this.o=Hs(x[2]||""),this.g=Hs(x[3]||"",!0),zr(this,x[4]),this.l=Hs(x[5]||"",!0),Bo(this,x[6]||"",!0),this.m=Hs(x[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}Yi.prototype.toString=function(){var p=[],x=this.j;x&&p.push(jn(x,dl,!0),":");var A=this.g;return(A||x=="file")&&(p.push("//"),(x=this.o)&&p.push(jn(x,dl,!0),"@"),p.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&p.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&p.push("/"),p.push(jn(A,A.charAt(0)=="/"?fl:Wu,!0))),(A=this.i.toString())&&p.push("?",A),(A=this.m)&&p.push("#",jn(A,$f)),p.join("")};function Tt(p){return new Yi(p)}function Gs(p,x,A){p.j=A?Hs(x,!0):x,p.j&&(p.j=p.j.replace(/:$/,""))}function zr(p,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);p.s=x}else p.s=null}function Bo(p,x,A){x instanceof Ei?(p.i=x,Qu(p.i,p.h)):(A||(x=jn(x,jf)),p.i=new Ei(x,p.h))}function $e(p,x,A){p.i.set(x,A)}function jr(p){return $e(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Hs(p,x){return p?x?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function jn(p,x,A){return typeof p=="string"?(p=encodeURI(p).replace(x,zf),A&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function zf(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var dl=/[#\/\?@]/g,Wu=/[#\?:]/g,fl=/[#\?]/g,jf=/[#\?@]/g,$f=/#/g;function Ei(p,x){this.h=this.g=null,this.i=p||null,this.j=!!x}function Ft(p){p.g||(p.g=new Map,p.h=0,p.i&&qo(p.i,function(x,A){p.add(decodeURIComponent(x.replace(/\+/g," ")),A)}))}t=Ei.prototype,t.add=function(p,x){Ft(this),this.i=null,p=Dn(this,p);var A=this.g.get(p);return A||this.g.set(p,A=[]),A.push(x),this.h+=1,this};function Go(p,x){Ft(p),x=Dn(p,x),p.g.has(x)&&(p.i=null,p.h-=p.g.get(x).length,p.g.delete(x))}function Ho(p,x){return Ft(p),x=Dn(p,x),p.g.has(x)}t.forEach=function(p,x){Ft(this),this.g.forEach(function(A,I){A.forEach(function(K){p.call(x,K,I,this)},this)},this)},t.na=function(){Ft(this);const p=Array.from(this.g.values()),x=Array.from(this.g.keys()),A=[];for(let I=0;I<x.length;I++){const K=p[I];for(let ne=0;ne<K.length;ne++)A.push(x[I])}return A},t.V=function(p){Ft(this);let x=[];if(typeof p=="string")Ho(this,p)&&(x=x.concat(this.g.get(Dn(this,p))));else{p=Array.from(this.g.values());for(let A=0;A<p.length;A++)x=x.concat(p[A])}return x},t.set=function(p,x){return Ft(this),this.i=null,p=Dn(this,p),Ho(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[x]),this.h+=1,this},t.get=function(p,x){return p?(p=this.V(p),0<p.length?String(p[0]):x):x};function Ji(p,x,A){Go(p,x),0<A.length&&(p.i=null,p.g.set(Dn(p,x),V(A)),p.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],x=Array.from(this.g.keys());for(var A=0;A<x.length;A++){var I=x[A];const ne=encodeURIComponent(String(I)),he=this.V(I);for(I=0;I<he.length;I++){var K=ne;he[I]!==""&&(K+="="+encodeURIComponent(String(he[I]))),p.push(K)}}return this.i=p.join("&")};function Dn(p,x){return x=String(x),p.j&&(x=x.toLowerCase()),x}function Qu(p,x){x&&!p.j&&(Ft(p),p.i=null,p.g.forEach(function(A,I){var K=I.toLowerCase();I!=K&&(Go(this,I),Ji(this,K,A))},p)),p.j=x}function hl(p,x){const A=new Vs;if(d.Image){const I=new Image;I.onload=C(Sn,A,"TestLoadImage: loaded",!0,x,I),I.onerror=C(Sn,A,"TestLoadImage: error",!1,x,I),I.onabort=C(Sn,A,"TestLoadImage: abort",!1,x,I),I.ontimeout=C(Sn,A,"TestLoadImage: timeout",!1,x,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=p}else x(!1)}function Xu(p,x){const A=new Vs,I=new AbortController,K=setTimeout(()=>{I.abort(),Sn(A,"TestPingServer: timeout",!1,x)},1e4);fetch(p,{signal:I.signal}).then(ne=>{clearTimeout(K),ne.ok?Sn(A,"TestPingServer: ok",!0,x):Sn(A,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(K),Sn(A,"TestPingServer: error",!1,x)})}function Sn(p,x,A,I,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),I(A)}catch{}}function ri(){this.g=new Bf}function ml(p,x,A){const I=A||"";try{Fo(p,function(K,ne){let he=K;h(K)&&(he=Gn(K)),x.push(I+ne+"="+encodeURIComponent(he))})}catch(K){throw x.push(I+"type="+encodeURIComponent("_badmap")),K}}function xi(p){this.l=p.Ub||null,this.j=p.eb||!1}M(xi,nl),xi.prototype.g=function(){return new Pn(this.l,this.j)},xi.prototype.i=(function(p){return function(){return p}})({});function Pn(p,x){Ut.call(this),this.D=p,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Pn,Ut),t=Pn.prototype,t.open=function(p,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=x,this.readyState=1,zs(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(x.body=p),(this.D||d).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zo(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function zo(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var x=p.value?p.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!p.done}))&&(this.response=this.responseText+=x)}p.done?Si(this):zs(this),this.readyState==3&&zo(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Si(this))},t.Qa=function(p){this.g&&(this.response=p,Si(this))},t.ga=function(){this.g&&Si(this)};function Si(p){p.readyState=4,p.l=null,p.j=null,p.v=null,zs(p)}t.setRequestHeader=function(p,x){this.u.append(p,x)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],x=this.h.entries();for(var A=x.next();!A.done;)A=A.value,p.push(A[0]+": "+A[1]),A=x.next();return p.join(`\r
`)};function zs(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Pn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function $r(p){let x="";return oe(p,function(A,I){x+=I,x+=":",x+=A,x+=`\r
`}),x}function js(p,x,A){e:{for(I in A){var I=!1;break e}I=!0}I||(A=$r(A),typeof p=="string"?A!=null&&encodeURIComponent(String(A)):$e(p,x,A))}function ct(p){Ut.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(ct,Ut);var rn=/^https?$/i,Ki=["POST","PUT"];t=ct.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,x,A,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);x=x?x.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vi.g(),this.v=this.o?ju(this.o):ju(vi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(x,String(p),!0),this.B=!1}catch(ne){Yr(this,ne);return}if(p=A||"",A=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var K in I)A.set(K,I[K]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ne of I.keys())A.set(ne,I.get(ne));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(A.keys()).find(ne=>ne.toLowerCase()=="content-type"),K=d.FormData&&p instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ki,x,void 0))||I||K||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,he]of A)this.g.setRequestHeader(ne,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jo(this),this.u=!0,this.g.send(p),this.u=!1}catch(ne){Yr(this,ne)}};function Yr(p,x){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=x,p.m=5,$s(p),Ys(p)}function $s(p){p.A||(p.A=!0,Ot(p,"complete"),Ot(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ot(this,"complete"),Ot(this,"abort"),Ys(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ys(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zu(this):this.bb())},t.bb=function(){Zu(this)};function Zu(p){if(p.h&&typeof u<"u"&&(!p.v[1]||vn(p)!=4||p.Z()!=2)){if(p.u&&vn(p)==4)zu(p.Ea,0,p);else if(Ot(p,"readystatechange"),vn(p)==4){p.h=!1;try{const he=p.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var A;if(!(A=x)){var I;if(I=he===0){var K=String(p.D).match(cl)[1]||null;!K&&d.self&&d.self.location&&(K=d.self.location.protocol.slice(0,-1)),I=!rn.test(K?K.toLowerCase():"")}A=I}if(A)Ot(p,"complete"),Ot(p,"success");else{p.m=6;try{var ne=2<vn(p)?p.g.statusText:""}catch{ne=""}p.l=ne+" ["+p.Z()+"]",$s(p)}}finally{Ys(p)}}}}function Ys(p,x){if(p.g){jo(p);const A=p.g,I=p.v[0]?()=>{}:null;p.g=null,p.v=null,x||Ot(p,"ready");try{A.onreadystatechange=I}catch{}}}function jo(p){p.I&&(d.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function vn(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var x=this.g.responseText;return p&&x.indexOf(p)==0&&(x=x.substring(p.length)),pn(x)}};function Jr(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function ec(p){const x={};p=(p.g&&2<=vn(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<p.length;I++){if(J(p[I]))continue;var A=q(p[I]);const K=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ne=x[K]||[];x[K]=ne,ne.push(A)}P(x,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kr(p,x,A){return A&&A.internalChannelParams&&A.internalChannelParams[p]||x}function tc(p){this.Aa=0,this.i=[],this.j=new Vs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kr("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kr("baseRetryDelayMs",5e3,p),this.cb=Kr("retryDelaySeedMs",1e4,p),this.Wa=Kr("forwardChannelMaxRetries",2,p),this.wa=Kr("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new ll(p&&p.concurrentRequestLimit),this.Da=new ri,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tc.prototype,t.la=8,t.G=1,t.connect=function(p,x,A,I){jt(0),this.W=p,this.H=x||{},A&&I!==void 0&&(this.H.OSID=A,this.H.OAID=I),this.F=this.X,this.I=lc(this,null,this.W),$o(this)};function pl(p){if(nc(p),p.G==3){var x=p.U++,A=Tt(p.I);if($e(A,"SID",p.K),$e(A,"RID",x),$e(A,"TYPE","terminate"),Wr(p,A),x=new _i(p,p.j,x),x.L=2,x.v=jr(Tt(A)),A=!1,d.navigator&&d.navigator.sendBeacon)try{A=d.navigator.sendBeacon(x.v.toString(),"")}catch{}!A&&d.Image&&(new Image().src=x.v,A=!0),A||(x.g=uc(x.j,null),x.g.ea(x.v)),x.F=Date.now(),si(x)}_l(p)}function Js(p){p.g&&(vl(p),p.g.cancel(),p.g=null)}function nc(p){Js(p),p.u&&(d.clearTimeout(p.u),p.u=null),Ks(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&d.clearTimeout(p.s),p.s=null)}function $o(p){if(!ul(p.h)&&!p.s){p.s=!0;var x=p.Ga;te||ke(),fe||(te(),fe=!0),Se.add(x,p),p.B=0}}function Yf(p,x){return Ju(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=x.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Ls(S(p.Ga,p,x),ac(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const K=new _i(this,this.j,p);let ne=this.o;if(this.S&&(ne?(ne=N(ne),k(ne,this.S)):ne=this.S),this.m!==null||this.O||(K.H=ne,ne=null),this.P)e:{for(var x=0,A=0;A<this.i.length;A++){t:{var I=this.i[A];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(x+=I,4096<x){x=A;break e}if(x===4096||A===this.i.length-1){x=A+1;break e}}x=1e3}else x=1e3;x=gl(this,K,x),A=Tt(this.I),$e(A,"RID",p),$e(A,"CVER",22),this.D&&$e(A,"X-HTTP-Session-Id",this.D),Wr(this,A),ne&&(this.O?x="headers="+encodeURIComponent(String($r(ne)))+"&"+x:this.m&&js(A,this.m,ne)),Bs(this.h,K),this.Ua&&$e(A,"TYPE","init"),this.P?($e(A,"$req",x),$e(A,"SID","null"),K.T=!0,Gr(K,A,null)):Gr(K,A,x),this.G=2}}else this.G==3&&(p?ic(this,p):this.i.length==0||ul(this.h)||ic(this))};function ic(p,x){var A;x?A=x.l:A=p.U++;const I=Tt(p.I);$e(I,"SID",p.K),$e(I,"RID",A),$e(I,"AID",p.T),Wr(p,I),p.m&&p.o&&js(I,p.m,p.o),A=new _i(p,p.j,A,p.B+1),p.m===null&&(A.H=p.o),x&&(p.i=x.D.concat(p.i)),x=gl(p,A,1e3),A.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Bs(p.h,A),Gr(A,I,x)}function Wr(p,x){p.H&&oe(p.H,function(A,I){$e(x,I,A)}),p.l&&Fo({},function(A,I){$e(x,I,A)})}function gl(p,x,A){A=Math.min(p.i.length,A);var I=p.l?S(p.l.Na,p.l,p):null;e:{var K=p.i;let ne=-1;for(;;){const he=["count="+A];ne==-1?0<A?(ne=K[0].g,he.push("ofs="+ne)):ne=0:he.push("ofs="+ne);let Ze=!0;for(let bt=0;bt<A;bt++){let Le=K[bt].g;const qt=K[bt].map;if(Le-=ne,0>Le)ne=Math.max(0,K[bt].g-100),Ze=!1;else try{ml(qt,he,"req"+Le+"_")}catch{I&&I(qt)}}if(Ze){I=he.join("&");break e}}}return p=p.i.splice(0,A),x.D=p,I}function sc(p){if(!p.g&&!p.u){p.Y=1;var x=p.Fa;te||ke(),fe||(te(),fe=!0),Se.add(x,p),p.v=0}}function yl(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Ls(S(p.Fa,p),ac(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,rc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Ls(S(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Js(this),rc(this))};function vl(p){p.A!=null&&(d.clearTimeout(p.A),p.A=null)}function rc(p){p.g=new _i(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var x=Tt(p.qa);$e(x,"RID","rpc"),$e(x,"SID",p.K),$e(x,"AID",p.T),$e(x,"CI",p.F?"0":"1"),!p.F&&p.ja&&$e(x,"TO",p.ja),$e(x,"TYPE","xmlhttp"),Wr(p,x),p.m&&p.o&&js(x,p.m,p.o),p.L&&(p.g.I=p.L);var A=p.g;p=p.ia,A.L=1,A.v=jr(Tt(x)),A.m=null,A.P=!0,ji(A,p)}t.Za=function(){this.C!=null&&(this.C=null,Js(this),yl(this),jt(19))};function Ks(p){p.C!=null&&(d.clearTimeout(p.C),p.C=null)}function oc(p,x){var A=null;if(p.g==x){Ks(p),vl(p),p.g=null;var I=2}else if(qs(p.h,x))A=x.D,zn(p.h,x),I=1;else return;if(p.G!=0){if(x.o)if(I==1){A=x.m?x.m.length:0,x=Date.now()-x.F;var K=p.B;I=Vo(),Ot(I,new sl(I,A)),$o(p)}else sc(p);else if(K=x.s,K==3||K==0&&0<x.X||!(I==1&&Yf(p,x)||I==2&&yl(p)))switch(A&&0<A.length&&(x=p.h,x.i=x.i.concat(A)),K){case 1:Wi(p,5);break;case 4:Wi(p,10);break;case 3:Wi(p,6);break;default:Wi(p,2)}}}function ac(p,x){let A=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(A*=2),A*x}function Wi(p,x){if(p.j.info("Error code "+x),x==2){var A=S(p.fb,p),I=p.Xa;const K=!I;I=new Yi(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Gs(I,"https"),jr(I),K?hl(I.toString(),A):Xu(I.toString(),A)}else jt(2);p.G=0,p.l&&p.l.sa(x),_l(p),nc(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function _l(p){if(p.G=0,p.ka=[],p.l){const x=yn(p.h);(x.length!=0||p.i.length!=0)&&(U(p.ka,x),U(p.ka,p.i),p.h.i.length=0,V(p.i),p.i.length=0),p.l.ra()}}function lc(p,x,A){var I=A instanceof Yi?Tt(A):new Yi(A);if(I.g!="")x&&(I.g=x+"."+I.g),zr(I,I.s);else{var K=d.location;I=K.protocol,x=x?x+"."+K.hostname:K.hostname,K=+K.port;var ne=new Yi(null);I&&Gs(ne,I),x&&(ne.g=x),K&&zr(ne,K),A&&(ne.l=A),I=ne}return A=p.D,x=p.ya,A&&x&&$e(I,A,x),$e(I,"VER",p.la),Wr(p,I),I}function uc(p,x,A){if(x&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=p.Ca&&!p.pa?new ct(new xi({eb:A})):new ct(p.pa),x.Ha(p.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cc(){}t=cc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yo(){}Yo.prototype.g=function(p,x){return new _n(p,x)};function _n(p,x){Ut.call(this),this.g=new tc(x),this.l=p,this.h=x&&x.messageUrlParams||null,p=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(p?p["X-WebChannel-Content-Type"]=x.messageContentType:p={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(p?p["X-WebChannel-Client-Profile"]=x.va:p={"X-WebChannel-Client-Profile":x.va}),this.g.S=p,(p=x&&x.Sb)&&!J(p)&&(this.g.m=p),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!J(x)&&(this.g.D=x,p=this.h,p!==null&&x in p&&(p=this.h,x in p&&delete p[x])),this.j=new Ws(this)}M(_n,Ut),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){pl(this.g)},_n.prototype.o=function(p){var x=this.g;if(typeof p=="string"){var A={};A.__data__=p,p=A}else this.u&&(A={},A.__data__=Gn(p),p=A);x.i.push(new Gf(x.Ya++,p)),x.G==3&&$o(x)},_n.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,_n.aa.N.call(this)};function dc(p){Ps.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var x=p.__sm__;if(x){e:{for(const A in x){p=A;break e}p=void 0}(this.i=p)&&(p=this.i,x=x!==null&&p in x?x[p]:void 0),this.data=x}else this.data=p}M(dc,Ps);function fc(){ii.call(this),this.status=1}M(fc,ii);function Ws(p){this.g=p}M(Ws,cc),Ws.prototype.ua=function(){Ot(this.g,"a")},Ws.prototype.ta=function(p){Ot(this.g,new dc(p))},Ws.prototype.sa=function(p){Ot(this.g,new fc)},Ws.prototype.ra=function(){Ot(this.g,"b")},Yo.prototype.createWebChannel=Yo.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,FS=function(){return new Yo},OS=function(){return Vo()},VS=Hn,yp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,Rd=_t,$t.COMPLETE="complete",LS=$t,Br.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,ou=Br,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,US=ct}).apply(typeof vd<"u"?vd:typeof self<"u"?self:typeof window<"u"?window:{});const rT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new $p("@firebase/firestore");function su(){return Eo.logLevel}function Ee(t,...e){if(Eo.logLevel<=He.DEBUG){const n=e.map(rg);Eo.debug(`Firestore (${ja}): ${t}`,...n)}}function ws(t,...e){if(Eo.logLevel<=He.ERROR){const n=e.map(rg);Eo.error(`Firestore (${ja}): ${t}`,...n)}}function Ua(t,...e){if(Eo.logLevel<=He.WARN){const n=e.map(rg);Eo.warn(`Firestore (${ja}): ${t}`,...n)}}function rg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t="Unexpected state"){const e=`FIRESTORE (${ja}) INTERNAL ASSERTION FAILED: `+t;throw ws(e),new Error(e)}function st(t,e){t||Re()}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class HM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class zM{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0);let i=this.i;const o=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let a=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vs,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},d=f=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vs)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(st(typeof i.accessToken=="string"),new qS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string"),new un(e)}}class jM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $M{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new jM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class YM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){st(this.o===void 0);const i=a=>{a.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,Ee("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(st(typeof n.token=="string"),this.R=n.token,new YM(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=KM(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<n&&(i+=e.charAt(o[a]%e.length))}return i}}function Ke(t,e){return t<e?-1:t>e?1:0}function La(t,e,n){return t.length===e.length&&t.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Vt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Vt(0,0))}static max(){return new Me(new Vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,i){n===void 0?n=0:n>e.length&&Re(),i===void 0?i=e.length-n:i>e.length-n&&Re(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return _u.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _u?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const a=e.get(o),u=n.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class mt extends _u{construct(e,n,i){return new mt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(ue.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new mt(n)}static emptyPath(){return new mt([])}}const WM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends _u{construct(e,n,i){return new Zt(e,n,i)}static isValidIdentifier(e){return WM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Zt(["__name__"])}static fromServerFormat(e){const n=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ge(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ge(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ge(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new ge(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(n)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(mt.fromString(e))}static fromName(e){return new Ae(mt.fromString(e).popFirst(5))}static empty(){return new Ae(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new mt(e.slice()))}}function QM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=Me.fromTimestamp(i===1e9?new Vt(n+1,0):new Vt(n,i));return new Dr(o,Ae.empty(),e)}function XM(t){return new Dr(t.readTime,t.key,-1)}class Dr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Dr(Me.min(),Ae.empty(),-1)}static max(){return new Dr(Me.max(),Ae.empty(),-1)}}function ZM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==eD)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.reject(n)}static resolve(e){return new ce(((n,i)=>{n(e)}))}static reject(e){return new ce(((n,i)=>{i(e)}))}static waitFor(e){return new ce(((n,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&n()}),(f=>i(f)))})),u=!0,a===o&&n()}))}static or(e){let n=ce.resolve(!1);for(const i of e)n=n.next((o=>o?ce.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,a)=>{i.push(n.call(this,o,a))})),this.waitFor(i)}static mapArray(e,n){return new ce(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const h=f;n(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,n){return new ce(((i,o)=>{const a=()=>{e()===!0?n().next((()=>{a()}),o):i()};a()}))}}function nD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}og.oe=-1;function hf(t){return t==null}function jd(t){return t===0&&1/t==-1/0}function iD(t){return typeof t=="number"&&Number.isInteger(t)&&!jd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Io(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _d(this.root,e,this.comparator,!1)}getReverseIterator(){return new _d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _d(this.root,e,this.comparator,!0)}}class _d{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,i,o,a){this.key=e,this.value=n,this.color=i??Xt.RED,this.left=o??Xt.EMPTY,this.right=a??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,a){return new Xt(e??this.key,n??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,n,i),null):a===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,n,i,o,a){return this}insert(e,n,i){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aT(this.data.getIterator())}getIteratorFrom(e){return new aT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new en(this.comparator);return n.data=e,n}}class aT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new ci([])}unionWith(e){let n=new en(Zt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ci(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new HS("Invalid base64 string: "+a):a}})(e);return new nn(n)}static fromUint8Array(e){const n=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const sD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(st(!!t),typeof t=="string"){let e=0;const n=sD.exec(t);if(st(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xo(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function lg(t){const e=t.mapValue.fields.__previous_value__;return ag(e)?lg(e):e}function Tu(t){const e=Pr(t.mapValue.fields.__local_write_time__.timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,i,o,a,u,d,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=h}}class Eu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td={mapValue:{}};function So(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ag(t)?4:aD(t)?9007199254740991:oD(t)?10:11:Re()}function ki(t,e){if(t===e)return!0;const n=So(t);if(n!==So(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tu(t).isEqual(Tu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Pr(o.timestampValue),d=Pr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,a){return xo(o.bytesValue).isEqual(xo(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,a){return Ct(o.geoPointValue.latitude)===Ct(a.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(a.geoPointValue.longitude)})(t,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Ct(o.integerValue)===Ct(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Ct(o.doubleValue),d=Ct(a.doubleValue);return u===d?jd(u)===jd(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return La(t.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(oT(u)!==oT(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!ki(u[f],d[f])))return!1;return!0})(t,e);default:return Re()}}function xu(t,e){return(t.values||[]).find((n=>ki(n,e)))!==void 0}function Va(t,e){if(t===e)return 0;const n=So(t),i=So(e);if(n!==i)return Ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Ct(a.integerValue||a.doubleValue),f=Ct(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(t,e);case 3:return lT(t.timestampValue,e.timestampValue);case 4:return lT(Tu(t),Tu(e));case 5:return Ke(t.stringValue,e.stringValue);case 6:return(function(a,u){const d=xo(a),f=xo(u);return d.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let h=0;h<d.length&&h<f.length;h++){const _=Ke(d[h],f[h]);if(_!==0)return _}return Ke(d.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Ke(Ct(a.latitude),Ct(u.latitude));return d!==0?d:Ke(Ct(a.longitude),Ct(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return uT(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,h,_;const E=a.fields||{},S=u.fields||{},C=(d=E.value)===null||d===void 0?void 0:d.arrayValue,M=(f=S.value)===null||f===void 0?void 0:f.arrayValue,V=Ke(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((_=M==null?void 0:M.values)===null||_===void 0?void 0:_.length)||0);return V!==0?V:uT(C,M)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Td.mapValue&&u===Td.mapValue)return 0;if(a===Td.mapValue)return 1;if(u===Td.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),h=u.fields||{},_=Object.keys(h);f.sort(),_.sort();for(let E=0;E<f.length&&E<_.length;++E){const S=Ke(f[E],_[E]);if(S!==0)return S;const C=Va(d[f[E]],h[_[E]]);if(C!==0)return C}return Ke(f.length,_.length)})(t.mapValue,e.mapValue);default:throw Re()}}function lT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=Pr(t),i=Pr(e),o=Ke(n.seconds,i.seconds);return o!==0?o:Ke(n.nanos,i.nanos)}function uT(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const a=Va(n[o],i[o]);if(a)return a}return Ke(n.length,i.length)}function Oa(t){return vp(t)}function vp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Pr(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return xo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ae.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",o=!0;for(const a of n.values||[])o?o=!1:i+=",",i+=vp(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${vp(n.fields[u])}`;return o+"}"})(t.mapValue):Re()}function cT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _p(t){return!!t&&"integerValue"in t}function ug(t){return!!t&&"arrayValue"in t}function dT(t){return!!t&&"nullValue"in t}function fT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nd(t){return!!t&&"mapValue"in t}function oD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function du(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Io(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=du(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=du(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Nd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(n)}setAll(e){let n=Zt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,i,o),i={},o=[],n=d.popLast()}u?i[d.lastSegment()]=du(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,o)}delete(e){const n=this.field(e.popLast());Nd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Nd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Io(n,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Bn(du(this.value))}}function zS(t){const e=[];return Io(t.fields,((n,i)=>{const o=new Zt([n]);if(Nd(i)){const a=zS(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,i,o,a,u,d){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new cn(e,0,Me.min(),Me.min(),Me.min(),Bn.empty(),0)}static newFoundDocument(e,n,i,o){return new cn(e,1,n,Me.min(),i,o,0)}static newNoDocument(e,n){return new cn(e,2,n,Me.min(),Me.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Me.min(),Me.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n){this.position=e,this.inclusive=n}}function hT(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const a=e[o],u=t.position[o];if(a.field.isKeyField()?i=Ae.comparator(Ae.fromName(u.referenceValue),n.key):i=Va(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function mT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ki(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n="asc"){this.field=e,this.dir=n}}function lD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{}class Pt extends jS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new cD(e,n,i):n==="array-contains"?new hD(e,i):n==="in"?new mD(e,i):n==="not-in"?new pD(e,i):n==="array-contains-any"?new gD(e,i):new Pt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new dD(e,i):new fD(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Va(n,this.value)):n!==null&&So(this.value)===So(n)&&this.matchesComparison(Va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends jS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hi(e,n)}matches(e){return $S(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $S(t){return t.op==="and"}function YS(t){return uD(t)&&$S(t)}function uD(t){for(const e of t.filters)if(e instanceof hi)return!1;return!0}function Tp(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+Oa(t.value);if(YS(t))return t.filters.map((e=>Tp(e))).join(",");{const e=t.filters.map((n=>Tp(n))).join(",");return`${t.op}(${e})`}}function JS(t,e){return t instanceof Pt?(function(i,o){return o instanceof Pt&&i.op===o.op&&i.field.isEqual(o.field)&&ki(i.value,o.value)})(t,e):t instanceof hi?(function(i,o){return o instanceof hi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&JS(u,o.filters[d])),!0):!1})(t,e):void Re()}function KS(t){return t instanceof Pt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Oa(n.value)}`})(t):t instanceof hi?(function(n){return n.op.toString()+" {"+n.getFilters().map(KS).join(" ,")+"}"})(t):"Filter"}class cD extends Pt{constructor(e,n,i){super(e,n,i),this.key=Ae.fromName(i.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class dD extends Pt{constructor(e,n){super(e,"in",n),this.keys=WS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class fD extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=WS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function WS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Ae.fromName(i.referenceValue)))}class hD extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ug(n)&&xu(n.arrayValue,this.value)}}class mD extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xu(this.value.arrayValue,n)}}class pD extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xu(this.value.arrayValue,n)}}class gD extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ug(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>xu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function pT(t,e=null,n=[],i=[],o=null,a=null,u=null){return new yD(t,e,n,i,o,a,u)}function cg(t){const e=De(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Tp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),hf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Oa(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Oa(i))).join(",")),e.ue=n}return e.ue}function dg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mT(t.startAt,e.startAt)&&mT(t.endAt,e.endAt)}function Ep(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n=null,i=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vD(t,e,n,i,o,a,u,d){return new $a(t,e,n,i,o,a,u,d)}function fg(t){return new $a(t)}function gT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QS(t){return t.collectionGroup!==null}function fu(t){const e=De(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new en(Zt.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Su(a,i))})),n.has(Zt.keyField().canonicalString())||e.ce.push(new Su(Zt.keyField(),i))}return e.ce}function Di(t){const e=De(t);return e.le||(e.le=_D(e,fu(t))),e.le}function _D(t,e){if(t.limitType==="F")return pT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Su(o.field,a)}));const n=t.endAt?new $d(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new $d(t.startAt.position,t.startAt.inclusive):null;return pT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function xp(t,e){const n=t.filters.concat([e]);return new $a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yd(t,e,n){return new $a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mf(t,e){return dg(Di(t),Di(e))&&t.limitType===e.limitType}function XS(t){return`${cg(Di(t))}|lt:${t.limitType}`}function xa(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>KS(o))).join(", ")}]`),hf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Oa(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Oa(o))).join(",")),`Target(${i})`})(Di(t))}; limitType=${t.limitType})`}function pf(t,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ae.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,o){for(const a of fu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(t,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,f){const h=hT(u,d,f);return u.inclusive?h<=0:h<0})(i.startAt,fu(i),o)||i.endAt&&!(function(u,d,f){const h=hT(u,d,f);return u.inclusive?h>=0:h>0})(i.endAt,fu(i),o))})(t,e)}function TD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZS(t){return(e,n)=>{let i=!1;for(const o of fu(t)){const a=ED(o,e,n);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function ED(t,e,n){const i=t.field.isKeyField()?Ae.comparator(e.key,n.key):(function(a,u,d){const f=u.data.field(a),h=d.data.field(a);return f!==null&&h!==null?Va(f,h):Re()})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,((n,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return GS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new yt(Ae.comparator);function As(){return xD}const ew=new yt(Ae.comparator);function au(...t){let e=ew;for(const n of t)e=e.insert(n.key,n);return e}function tw(t){let e=ew;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function go(){return hu()}function nw(){return hu()}function hu(){return new Ya((t=>t.toString()),((t,e)=>t.isEqual(e)))}const SD=new yt(Ae.comparator),wD=new en(Ae.comparator);function Be(...t){let e=wD;for(const n of t)e=e.add(n);return e}const AD=new en(Ke);function CD(){return AD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function iw(t){return{integerValue:""+t}}function bD(t,e){return iD(e)?iw(e):hg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this._=void 0}}function ID(t,e,n){return t instanceof wu?(function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&ag(a)&&(a=lg(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(n,e):t instanceof Au?rw(t,e):t instanceof Cu?ow(t,e):(function(o,a){const u=sw(o,a),d=yT(u)+yT(o.Pe);return _p(u)&&_p(o.Pe)?iw(d):hg(o.serializer,d)})(t,e)}function RD(t,e,n){return t instanceof Au?rw(t,e):t instanceof Cu?ow(t,e):n}function sw(t,e){return t instanceof Jd?(function(i){return _p(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class wu extends gf{}class Au extends gf{constructor(e){super(),this.elements=e}}function rw(t,e){const n=aw(e);for(const i of t.elements)n.some((o=>ki(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Cu extends gf{constructor(e){super(),this.elements=e}}function ow(t,e){let n=aw(e);for(const i of t.elements)n=n.filter((o=>!ki(o,i)));return{arrayValue:{values:n}}}class Jd extends gf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function yT(t){return Ct(t.integerValue||t.doubleValue)}function aw(t){return ug(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n){this.field=e,this.transform=n}}function MD(t,e){return t.field.isEqual(e.field)&&(function(i,o){return i instanceof Au&&o instanceof Au||i instanceof Cu&&o instanceof Cu?La(i.elements,o.elements,ki):i instanceof Jd&&o instanceof Jd?ki(i.Pe,o.Pe):i instanceof wu&&o instanceof wu})(t.transform,e.transform)}class DD{constructor(e,n){this.version=e,this.transformResults=n}}class _s{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _s}static exists(e){return new _s(void 0,e)}static updateTime(e){return new _s(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Md(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yf{}function lw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cw(t.key,_s.none()):new vf(t.key,t.data,_s.none());{const n=t.data,i=Bn.empty();let o=new en(Zt.comparator);for(let a of e.fields)if(!o.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Ro(t.key,i,new ci(o.toArray()),_s.none())}}function PD(t,e,n){t instanceof vf?(function(o,a,u){const d=o.value.clone(),f=_T(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Ro?(function(o,a,u){if(!Md(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=_T(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(uw(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function mu(t,e,n,i){return t instanceof vf?(function(a,u,d,f){if(!Md(a.precondition,u))return d;const h=a.value.clone(),_=TT(a.fieldTransforms,f,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof Ro?(function(a,u,d,f){if(!Md(a.precondition,u))return d;const h=TT(a.fieldTransforms,f,u),_=u.data;return _.setAll(uw(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,u,d){return Md(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function kD(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),a=sw(i.transform,o||null);a!=null&&(n===null&&(n=Bn.empty()),n.set(i.field,a))}return n||null}function vT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&La(i,o,((a,u)=>MD(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vf extends yf{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ro extends yf{constructor(e,n,i,o,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function uw(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function _T(t,e,n){const i=new Map;st(t.length===n.length);for(let o=0;o<n.length;o++){const a=t[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,RD(u,d,n[o]))}return i}function TT(t,e,n){const i=new Map;for(const o of t){const a=o.transform,u=n.data.field(o.field);i.set(o.field,ID(a,u,e))}return i}class cw extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UD extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&PD(a,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=mu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=mu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=nw();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=n.has(o.key)?null:d;const f=lw(u,d);f!==null&&i.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Me.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,((n,i)=>vT(n,i)))&&La(this.baseMutations,e.baseMutations,((n,i)=>vT(n,i)))}}class mg{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){st(e.mutations.length===i.length);let o=(function(){return SD})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new mg(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,ze;function FD(t){switch(t){default:return Re();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function dw(t){if(t===void 0)return ws("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Dt.OK:return ue.OK;case Dt.CANCELLED:return ue.CANCELLED;case Dt.UNKNOWN:return ue.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return ue.INTERNAL;case Dt.UNAVAILABLE:return ue.UNAVAILABLE;case Dt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Dt.NOT_FOUND:return ue.NOT_FOUND;case Dt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Dt.ABORTED:return ue.ABORTED;case Dt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Dt.DATA_LOSS:return ue.DATA_LOSS;default:return Re()}}(ze=Dt||(Dt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=new vo([4294967295,4294967295],0);function ET(t){const e=qD().encode(t),n=new kS;return n.update(e),new Uint8Array(n.digest())}function xT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new vo([n,i],0),new vo([o,a],0)]}class pg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new lu(`Invalid padding: ${n}`);if(i<0)throw new lu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new lu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=vo.fromNumber(this.Ie)}Ee(e,n,i){let o=e.add(n.multiply(vo.fromNumber(i)));return o.compare(BD)===1&&(o=new vo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ET(e),[i,o]=xT(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);if(!this.de(u))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new pg(a,o,n);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const n=ET(e),[i,o]=xT(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,i,o,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new _f(Me.min(),o,new yt(Ke),As(),Be())}}class Vu{constructor(e,n,i,o,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Vu(i,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,i,o){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=o}}class fw{constructor(e,n){this.targetId=e,this.me=n}}class hw{constructor(e,n,i=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class ST{constructor(){this.fe=0,this.ge=AT(),this.pe=nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),n=Be(),i=Be();return this.ge.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Re()}})),new Vu(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=AT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,st(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GD{constructor(e){this.Le=e,this.Be=new Map,this.ke=As(),this.qe=wT(),this.Qe=new yt(Ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Re()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((i,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,i=e.me.count,o=this.Je(n);if(o){const a=o.target;if(Ep(a))if(i===0){const u=new Ae(a.path);this.Ue(n,u,cn.newNoDocument(u,Me.min()))}else st(i===1);else{const u=this.Ye(n);if(u!==i){const d=this.Ze(e),f=d?this.Xe(d,e,u):1;if(f!==0){this.je(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=n;let u,d;try{u=xo(i).toUint8Array()}catch(f){if(f instanceof HS)return Ua("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new pg(u,o,a)}catch(f){return Ua(f instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Ie===0?null:d}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach((a=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(n,a,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((a,u)=>{const d=this.Je(u);if(d){if(a.current&&Ep(d.target)){const f=new Ae(d.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,cn.newNoDocument(f,e))}a.be&&(n.set(u,a.ve()),a.Ce())}}));let i=Be();this.qe.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const h=this.Je(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const o=new _f(e,n,this.Qe,this.ke,i);return this.ke=As(),this.qe=wT(),this.Qe=new yt(Ke),o}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ST,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new en(Ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ST),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function wT(){return new yt(Ae.comparator)}function AT(){return new yt(Ae.comparator)}const HD={asc:"ASCENDING",desc:"DESCENDING"},zD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jD={and:"AND",or:"OR"};class $D{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sp(t,e){return t.useProto3Json||hf(e)?e:{value:e}}function Kd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YD(t,e){return Kd(t,e.toTimestamp())}function Pi(t){return st(!!t),Me.fromTimestamp((function(n){const i=Pr(n);return new Vt(i.seconds,i.nanos)})(t))}function gg(t,e){return wp(t,e).canonicalString()}function wp(t,e){const n=(function(o){return new mt(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function pw(t){const e=mt.fromString(t);return st(Tw(e)),e}function Ap(t,e){return gg(t.databaseId,e.path)}function np(t,e){const n=pw(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(yw(n))}function gw(t,e){return gg(t.databaseId,e)}function JD(t){const e=pw(t);return e.length===4?mt.emptyPath():yw(e)}function Cp(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yw(t){return st(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function CT(t,e,n){return{name:Ap(t,e),fields:n.value.mapValue.fields}}function KD(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(st(_===void 0||typeof _=="string"),nn.fromBase64String(_||"")):(st(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),nn.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?ue.UNKNOWN:dw(h.code);return new ge(_,h.message||"")})(u);n=new hw(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=np(t,i.document.name),a=Pi(i.document.updateTime),u=i.document.createTime?Pi(i.document.createTime):Me.min(),d=new Bn({mapValue:{fields:i.document.fields}}),f=cn.newFoundDocument(o,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];n=new Dd(h,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=np(t,i.document),a=i.readTime?Pi(i.readTime):Me.min(),u=cn.newNoDocument(o,a),d=i.removedTargetIds||[];n=new Dd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=np(t,i.document),a=i.removedTargetIds||[];n=new Dd([],a,o,null)}else{if(!("filter"in e))return Re();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new OD(o,a),d=i.targetId;n=new fw(d,u)}}return n}function WD(t,e){let n;if(e instanceof vf)n={update:CT(t,e.key,e.value)};else if(e instanceof cw)n={delete:Ap(t,e.key)};else if(e instanceof Ro)n={update:CT(t,e.key,e.data),updateMask:r2(e.fieldMask)};else{if(!(e instanceof UD))return Re();n={verify:Ap(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof wu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Au)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Cu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Jd)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw Re()})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:YD(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re()})(t,e.precondition)),n}function QD(t,e){return t&&t.length>0?(st(e!==void 0),t.map((n=>(function(o,a){let u=o.updateTime?Pi(o.updateTime):Pi(a);return u.isEqual(Me.min())&&(u=Pi(a)),new DD(u,o.transformResults||[])})(n,e)))):[]}function XD(t,e){return{documents:[gw(t,e.path)]}}function ZD(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=gw(t,o);const a=(function(h){if(h.length!==0)return _w(hi.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(S){return{field:Sa(S.field),direction:n2(S.dir)}})(_)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=Sp(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:n,parent:o}}function e2(t){let e=JD(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){st(i===1);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];n.where&&(a=(function(E){const S=vw(E);return S instanceof hi&&YS(S)?S.getFilters():[S]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((S=>(function(M){return new Su(wa(M.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(S)))})(n.orderBy));let d=null;n.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,hf(S)?null:S})(n.limit));let f=null;n.startAt&&(f=(function(E){const S=!!E.before,C=E.values||[];return new $d(C,S)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const S=!E.before,C=E.values||[];return new $d(C,S)})(n.endAt)),vD(e,o,u,a,d,"F",f,h)}function t2(t,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vw(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=wa(n.unaryFilter.field);return Pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=wa(n.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=wa(n.unaryFilter.field);return Pt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=wa(n.unaryFilter.field);return Pt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Re()}})(t):t.fieldFilter!==void 0?(function(n){return Pt.create(wa(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return hi.create(n.compositeFilter.filters.map((i=>vw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}})(n.compositeFilter.op))})(t):Re()}function n2(t){return HD[t]}function i2(t){return zD[t]}function s2(t){return jD[t]}function Sa(t){return{fieldPath:t.canonicalString()}}function wa(t){return Zt.fromServerFormat(t.fieldPath)}function _w(t){return t instanceof Pt?(function(n){if(n.op==="=="){if(fT(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NAN"}};if(dT(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fT(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NAN"}};if(dT(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(n.field),op:i2(n.op),value:n.value}}})(t):t instanceof hi?(function(n){const i=n.getFilters().map((o=>_w(o)));return i.length===1?i[0]:{compositeFilter:{op:s2(n.op),filters:i}}})(t):Re()}function r2(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Tw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,i,o,a=Me.min(),u=Me.min(),d=nn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.ct=e}}function a2(t){const e=e2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.un=new u2}addToCollectionParentIndex(e,n){return this.un.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(Dr.min())}updateCollectionGroup(e,n,i){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class u2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new en(mt.comparator),a=!o.has(i);return this.index[n]=o.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new en(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Fa(0)}static kn(){return new Fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.changes=new Ya((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ce.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&mu(i.mutation,o,ci.empty(),Vt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Be()){const o=go();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((a=>{let u=au();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=go();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Be())))}populateOverlays(e,n,i){const o=[];return i.forEach((a=>{n.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,i,o){let a=As();const u=hu(),d=(function(){return hu()})();return n.forEach(((f,h)=>{const _=i.get(h.key);o.has(h.key)&&(_===void 0||_.mutation instanceof Ro)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),mu(_.mutation,h,_.mutation.getFieldMask(),Vt.now())):u.set(h.key,ci.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,_)=>u.set(h,_))),n.forEach(((h,_)=>{var E;return d.set(h,new d2(_,(E=u.get(h))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,n){const i=hu();let o=new yt(((u,d)=>u-d)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((f=>{const h=n.get(f);if(h===null)return;let _=i.get(f)||ci.empty();_=d.applyToLocalView(h,_),i.set(f,_);const E=(o.get(d.batchId)||Be()).add(f);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),h=f.key,_=f.value,E=nw();_.forEach((S=>{if(!a.has(S)){const C=lw(n.get(S),i.get(S));C!==null&&E.set(S,C),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ce.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(u){return Ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-a.size):ce.resolve(go());let d=-1,f=a;return u.next((h=>ce.forEach(h,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?ce.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{f=f.insert(_,S)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,Be()))).next((_=>({batchId:d,changes:tw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next((i=>{let o=au();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const a=n.collectionGroup;let u=au();return this.indexManager.getCollectionParents(e,a).next((d=>ce.forEach(d,(f=>{const h=(function(E,S){return new $a(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((_=>{_.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,o)))).next((u=>{a.forEach(((f,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,cn.newInvalidDocument(_)))}));let d=au();return u.forEach(((f,h)=>{const _=a.get(f);_!==void 0&&mu(_.mutation,h,ci.empty(),Vt.now()),pf(n,h)&&(d=d.insert(f,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ce.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Pi(o.createTime)}})(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:a2(o.bundledQuery),readTime:Pi(o.readTime)}})(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.overlays=new yt(Ae.comparator),this.Ir=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const i=go();return ce.forEach(n,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,a)=>{this.ht(e,n,a)})),ce.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(i)),ce.resolve()}getOverlaysForCollection(e,n,i){const o=go(),a=n.length+1,u=new Ae(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let a=new yt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=go(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=go(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=o)););return ce.resolve(d)}ht(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new VD(n,i));let a=this.Ir.get(n);a===void 0&&(a=Be(),this.Ir.set(n,a)),this.Ir.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.Tr=new en(Ht.Er),this.dr=new en(Ht.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Ht(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Vr(new Ht(e,n))}mr(e,n){e.forEach((i=>this.removeReference(i,n)))}gr(e){const n=new Ae(new mt([])),i=new Ht(n,e),o=new Ht(n,e+1),a=[];return this.dr.forEachInRange([i,o],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ae(new mt([])),i=new Ht(n,e),o=new Ht(n,e+1);let a=Be();return this.dr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new Ht(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ht{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ae.comparator(e.key,n.key)||Ke(e.wr,n.wr)}static Ar(e,n){return Ke(e.wr,n.wr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new en(Ht.Er)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new LD(a,n,i,o);this.mutationQueue.push(u);for(const d of o)this.br=this.br.add(new Ht(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,n){return ce.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.vr(i),a=o<0?0:o;return ce.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ht(n,0),o=new Ht(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,o],(u=>{const d=this.Dr(u.wr);a.push(d)})),ce.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new en(Ke);return n.forEach((o=>{const a=new Ht(o,0),u=new Ht(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(d=>{i=i.add(d.wr)}))})),ce.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let a=i;Ae.isDocumentKey(a)||(a=a.child(""));const u=new Ht(new Ae(a),0);let d=new en(Ke);return this.br.forEachWhile((f=>{const h=f.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(f.wr)),!0)}),u),ce.resolve(this.Cr(d))}Cr(e){const n=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){st(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ce.forEach(n.mutations,(o=>{const a=new Ht(o.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,n){const i=new Ht(n,0),o=this.br.firstAfterOrEqual(i);return ce.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.Mr=e,this.docs=(function(){return new yt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),a=o?o.size:0,u=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ce.resolve(i?i.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let i=As();return n.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():cn.newInvalidDocument(o))})),ce.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let a=As();const u=n.path,d=new Ae(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:h,value:{document:_}}=f.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||ZM(XM(_),i)<=0||(o.has(_.key)||pf(n,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ce.resolve(a)}getAllFromCollectionGroup(e,n,i,o){Re()}Or(e,n){return ce.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new v2(this)}getSize(e){return ce.resolve(this.size)}}class v2 extends c2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),ce.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.persistence=e,this.Nr=new Ya((n=>cg(n)),dg),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yg,this.targetCount=0,this.kr=Fa.Bn()}forEachTarget(e,n){return this.Nr.forEach(((i,o)=>n(o))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),ce.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Fa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Kn(n),ce.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,i){let o=0;const a=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ce.waitFor(a).next((()=>o))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return ce.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),ce.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,a=[];return o&&n.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),ce.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return ce.resolve(i)}containsKey(e,n){return ce.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new og(0),this.Kr=!1,this.Kr=!0,this.$r=new p2,this.referenceDelegate=e(this),this.Ur=new _2(this),this.indexManager=new l2,this.remoteDocumentCache=(function(o){return new y2(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new o2(n),this.Gr=new h2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new m2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new g2(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){Ee("MemoryPersistence","Starting transaction:",e);const o=new E2(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((a=>this.referenceDelegate.jr(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Hr(e,n){return ce.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,n))))}}class E2 extends tD{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Jr=new yg,this.Yr=null}static Zr(e){return new vg(e)}get Xr(){if(this.Yr)return this.Yr;throw Re()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),ce.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((a=>this.Xr.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xr,(i=>{const o=Ae.fromPath(i);return this.ei(e,o).next((a=>{a||n.removeEntry(o,Me.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return ce.or([()=>ce.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(e,n){let i=Be(),o=Be();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new _g(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return bR()?8:nD(hn())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,o){const a={result:null};return this.Yi(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,n,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new x2;return this.Xi(e,n,u).next((d=>{if(a.result=d,this.zi)return this.es(e,n,u,d.size)}))})).next((()=>a.result))}es(e,n,i,o){return i.documentReadCount<this.ji?(su()<=He.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ce.resolve()):(su()<=He.DEBUG&&Ee("QueryEngine","Query:",xa(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(su()<=He.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Di(n))):ce.resolve())}Yi(e,n){if(gT(n))return ce.resolve(null);let i=Di(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Yd(n,null,"F"),i=Di(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Be(...a);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((f=>{const h=this.ts(n,d);return this.ns(n,h,u,f.readTime)?this.Yi(e,Yd(n,null,"F")):this.rs(e,h,n,f)}))))})))))}Zi(e,n,i,o){return gT(n)||o.isEqual(Me.min())?ce.resolve(null):this.Ji.getDocuments(e,i).next((a=>{const u=this.ts(n,a);return this.ns(n,u,i,o)?ce.resolve(null):(su()<=He.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xa(n)),this.rs(e,u,n,QM(o,-1)).next((d=>d)))}))}ts(e,n){let i=new en(ZS(e));return n.forEach(((o,a)=>{pf(e,a)&&(i=i.add(a))})),i}ns(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,n,i){return su()<=He.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",xa(n)),this.Ji.getDocumentsMatchingQuery(e,n,Dr.min(),i)}rs(e,n,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n,i,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new yt(Ke),this._s=new Ya((a=>cg(a)),dg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function A2(t,e,n,i){return new w2(t,e,n,i)}async function Ew(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,n.ls(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let f=Be();for(const h of o){u.push(h.batchId);for(const _ of h.mutations)f=f.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)f=f.add(_.key)}return n.localDocuments.getDocuments(i,f).next((h=>({hs:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function C2(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(d,f,h,_){const E=h.batch,S=E.keys();let C=ce.resolve();return S.forEach((M=>{C=C.next((()=>_.getEntry(f,M))).next((V=>{const U=h.docVersions.get(M);st(U!==null),V.version.compareTo(U)<0&&(E.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),_.addEntry(V)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(f,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let f=Be();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(f=f.add(d.batch.mutations[h].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function xw(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function b2(t,e){const n=De(t),i=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const d=[];e.targetChanges.forEach(((_,E)=>{const S=o.get(E);if(!S)return;d.push(n.Ur.removeMatchingKeys(a,_.removedDocuments,E).next((()=>n.Ur.addMatchingKeys(a,_.addedDocuments,E))));let C=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(nn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),o=o.insert(E,C),(function(V,U,z){return V.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(S,C,_)&&d.push(n.Ur.updateTargetData(a,C))}));let f=As(),h=Be();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(I2(a,u,e.documentUpdates).next((_=>{f=_.Ps,h=_.Is}))),!i.isEqual(Me.min())){const _=n.Ur.getLastRemoteSnapshotVersion(a).next((E=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return ce.waitFor(d).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(n.os=o,a)))}function I2(t,e,n){let i=Be(),o=Be();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let u=As();return n.forEach(((d,f)=>{const h=a.get(d);f.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(Me.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):Ee("LocalStore","Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",f.version)})),{Ps:u,Is:o}}))}function R2(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function N2(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Ur.getTargetData(i,e).next((a=>a?(o=a,ce.resolve(o)):n.Ur.allocateTargetId(i).next((u=>(o=new Cr(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i}))}async function bp(t,e,n){const i=De(t),o=i.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Lu(u))throw u;Ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function bT(t,e,n){const i=De(t);let o=Me.min(),a=Be();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,h,_){const E=De(f),S=E._s.get(_);return S!==void 0?ce.resolve(E.os.get(S)):E.Ur.getTargetData(h,_)})(i,u,Di(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>i.ss.getDocumentsMatchingQuery(u,e,n?o:Me.min(),n?a:Be()))).next((d=>(M2(i,TD(e),d),{documents:d,Ts:a})))))}function M2(t,e,n){let i=t.us.get(e)||Me.min();n.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.us.set(e,i)}class IT{constructor(){this.activeTargetIds=CD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class D2{constructor(){this.so=new IT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new IT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ed=null;function ip(){return Ed===null?Ed=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ed++,"0x"+Ed.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class L2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(n,i,o,a,u){const d=ip(),f=this.xo(n,i.toUriEncodedString());Ee("RestConnection",`Sending RPC '${n}' ${d}:`,f,o);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,u),this.No(n,f,h,o).then((_=>(Ee("RestConnection",`Received RPC '${n}' ${d}: `,_),_)),(_=>{throw Ua("RestConnection",`RPC '${n}' ${d} failed with error: `,_,"url: ",f,"request:",o),_}))}Lo(n,i,o,a,u,d){return this.Mo(n,i,o,a,u)}Oo(n,i,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ja})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((a,u)=>n[u]=a)),o&&o.headers.forEach(((a,u)=>n[u]=a))}xo(n,i){const o=k2[n];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,o){const a=ip();return new Promise(((u,d)=>{const f=new US;f.setWithCredentials(!0),f.listenOnce(LS.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Rd.NO_ERROR:const _=f.getResponseJson();Ee(an,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case Rd.TIMEOUT:Ee(an,`RPC '${e}' ${a} timed out`),d(new ge(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Rd.HTTP_ERROR:const E=f.getStatus();if(Ee(an,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const C=S==null?void 0:S.error;if(C&&C.status&&C.message){const M=(function(U){const z=U.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(z)>=0?z:ue.UNKNOWN})(C.status);d(new ge(M,C.message))}else d(new ge(ue.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ge(ue.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{Ee(an,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(o);Ee(an,`RPC '${e}' ${a} sending request:`,o),f.send(n,"POST",h,i,15)}))}Bo(e,n,i){const o=ip(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=FS(),d=OS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const _=a.join("");Ee(an,`Creating RPC '${e}' stream ${o}: ${_}`,f);const E=u.createWebChannel(_,f);let S=!1,C=!1;const M=new U2({Io:U=>{C?Ee(an,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(Ee(an,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),Ee(an,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},To:()=>E.close()}),V=(U,z,J)=>{U.listen(z,(j=>{try{J(j)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return V(E,ou.EventType.OPEN,(()=>{C||(Ee(an,`RPC '${e}' stream ${o} transport opened.`),M.yo())})),V(E,ou.EventType.CLOSE,(()=>{C||(C=!0,Ee(an,`RPC '${e}' stream ${o} transport closed`),M.So())})),V(E,ou.EventType.ERROR,(U=>{C||(C=!0,Ua(an,`RPC '${e}' stream ${o} transport errored:`,U),M.So(new ge(ue.UNAVAILABLE,"The operation could not be completed")))})),V(E,ou.EventType.MESSAGE,(U=>{var z;if(!C){const J=U.data[0];st(!!J);const j=J,Y=j.error||((z=j[0])===null||z===void 0?void 0:z.error);if(Y){Ee(an,`RPC '${e}' stream ${o} received error:`,Y);const ie=Y.status;let oe=(function(R){const k=Dt[R];if(k!==void 0)return dw(k)})(ie),P=Y.message;oe===void 0&&(oe=ue.INTERNAL,P="Unknown error status: "+ie+" with message "+Y.message),C=!0,M.So(new ge(oe,P)),E.close()}else Ee(an,`RPC '${e}' stream ${o} received:`,J),M.bo(J)}})),V(d,VS.STAT_EVENT,(U=>{U.stat===yp.PROXY?Ee(an,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===yp.NOPROXY&&Ee(an,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{M.wo()}),0),M}}function sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){return new $D(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n,i=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&Ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,i,o,a,u,d,f){this.ui=e,this.Ho=i,this.Jo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Sw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(ws(n.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===n&&this.P_(i,o)}),(i=>{e((()=>{const o=new ge(ue.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(Ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class V2 extends ww{constructor(e,n,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=KD(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Me.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Me.min():u.readTime?Pi(u.readTime):Me.min()})(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Cp(this.serializer),n.addTarget=(function(a,u){let d;const f=u.target;if(d=Ep(f)?{documents:XD(a,f)}:{query:ZD(a,f)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=mw(a,u.resumeToken);const h=Sp(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Me.min())>0){d.readTime=Kd(a,u.snapshotVersion.toTimestamp());const h=Sp(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=t2(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Cp(this.serializer),n.removeTarget=e,this.a_(n)}}class O2 extends ww{constructor(e,n,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return st(!!e.streamToken),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){st(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=QD(e.writeResults,e.commitTime),i=Pi(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Cp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>WD(this.serializer,i)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2 extends class{}{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ge(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,wp(n,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(ue.UNKNOWN,a.toString())}))}Lo(e,n,i,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,wp(n,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(ue.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class q2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ws(n),this.D_=!1):Ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,i,o,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{i.enqueueAndForget((async()=>{No(this)&&(Ee("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const h=De(f);h.L_.add(4),await Ou(h),h.q_.set("Unknown"),h.L_.delete(4),await Ef(h)})(this))}))})),this.q_=new q2(i,o)}}async function Ef(t){if(No(t))for(const e of t.B_)await e(!0)}async function Ou(t){for(const e of t.B_)await e(!1)}function Aw(t,e){const n=De(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sg(n)?xg(n):Ja(n).r_()&&Eg(n,e))}function Tg(t,e){const n=De(t),i=Ja(n);n.N_.delete(e),i.r_()&&Cw(n,e),n.N_.size===0&&(i.r_()?i.o_():No(n)&&n.q_.set("Unknown"))}function Eg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ja(t).A_(e)}function Cw(t,e){t.Q_.xe(e),Ja(t).R_(e)}function xg(t){t.Q_=new GD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ja(t).start(),t.q_.v_()}function Sg(t){return No(t)&&!Ja(t).n_()&&t.N_.size>0}function No(t){return De(t).L_.size===0}function bw(t){t.Q_=void 0}async function G2(t){t.q_.set("Online")}async function H2(t){t.N_.forEach(((e,n)=>{Eg(t,e)}))}async function z2(t,e){bw(t),Sg(t)?(t.q_.M_(e),xg(t)):t.q_.set("Unknown")}async function j2(t,e,n){if(t.q_.set("Online"),e instanceof hw&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.N_.delete(d),o.Q_.removeTarget(d))})(t,e)}catch(i){Ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Wd(t,i)}else if(e instanceof Dd?t.Q_.Ke(e):e instanceof fw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Me.min()))try{const i=await xw(t.localStore);n.compareTo(i)>=0&&await(function(a,u){const d=a.Q_.rt(u);return d.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.N_.get(h);_&&a.N_.set(h,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,h)=>{const _=a.N_.get(f);if(!_)return;a.N_.set(f,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),Cw(a,f);const E=new Cr(_.target,f,h,_.sequenceNumber);Eg(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(i){Ee("RemoteStore","Failed to raise snapshot:",i),await Wd(t,i)}}async function Wd(t,e,n){if(!Lu(e))throw e;t.L_.add(1),await Ou(t),t.q_.set("Offline"),n||(n=()=>xw(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ef(t)}))}function Iw(t,e){return e().catch((n=>Wd(t,n,e)))}async function xf(t){const e=De(t),n=kr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$2(e);)try{const o=await R2(e.localStore,i);if(o===null){e.O_.length===0&&n.o_();break}i=o.batchId,Y2(e,o)}catch(o){await Wd(e,o)}Rw(e)&&Nw(e)}function $2(t){return No(t)&&t.O_.length<10}function Y2(t,e){t.O_.push(e);const n=kr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Rw(t){return No(t)&&!kr(t).n_()&&t.O_.length>0}function Nw(t){kr(t).start()}async function J2(t){kr(t).p_()}async function K2(t){const e=kr(t);for(const n of t.O_)e.m_(n.mutations)}async function W2(t,e,n){const i=t.O_.shift(),o=mg.from(i,e,n);await Iw(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await xf(t)}async function Q2(t,e){e&&kr(t).V_&&await(async function(i,o){if((function(u){return FD(u)&&u!==ue.ABORTED})(o.code)){const a=i.O_.shift();kr(i).s_(),await Iw(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await xf(i)}})(t,e),Rw(t)&&Nw(t)}async function NT(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),Ee("RemoteStore","RemoteStore received new credentials");const i=No(n);n.L_.add(3),await Ou(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ef(n)}async function X2(t,e){const n=De(t);e?(n.L_.delete(2),await Ef(n)):e||(n.L_.add(2),await Ou(n),n.q_.set("Unknown"))}function Ja(t){return t.K_||(t.K_=(function(n,i,o){const a=De(n);return a.w_(),new V2(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Eo:G2.bind(null,t),Ro:H2.bind(null,t),mo:z2.bind(null,t),d_:j2.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),Sg(t)?xg(t):t.q_.set("Unknown")):(await t.K_.stop(),bw(t))}))),t.K_}function kr(t){return t.U_||(t.U_=(function(n,i,o){const a=De(n);return a.w_(),new O2(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:J2.bind(null,t),mo:Q2.bind(null,t),f_:K2.bind(null,t),g_:W2.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await xf(t)):(await t.U_.stop(),t.O_.length>0&&(Ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n,i,o,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,a){const u=Date.now()+i,d=new wg(e,n,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ag(t,e){if(ws("AsyncQueue",`${e}: ${t}`),Lu(t))return new ge(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ae.comparator(n.key,i.key):(n,i)=>Ae.comparator(n.key,i.key),this.keyedMap=au(),this.sortedSet=new yt(this.comparator)}static emptySet(e){return new Na(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Na;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.W_=new yt(Ae.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,i)=>{e.push(i)})),e}}class qa{constructor(e,n,i,o,a,u,d,f,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,o,a){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new qa(e,n,Na.emptySet(n),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class eP{constructor(){this.queries=DT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const o=De(n),a=o.queries;o.queries=DT(),a.forEach(((u,d)=>{for(const f of d.j_)f.onError(i)}))})(this,new ge(ue.ABORTED,"Firestore shutting down"))}}function DT(){return new Ya((t=>XS(t)),mf)}async function Mw(t,e){const n=De(t);let i=3;const o=e.query;let a=n.queries.get(o);a?!a.H_()&&e.J_()&&(i=2):(a=new Z2,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await n.onListen(o,!0);break;case 1:a.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const d=Ag(u,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(d)}n.queries.set(o,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Cg(n)}async function Dw(t,e){const n=De(t),i=e.query;let o=3;const a=n.queries.get(i);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function tP(t,e){const n=De(t);let i=!1;for(const o of e){const a=o.query,u=n.queries.get(a);if(u){for(const d of u.j_)d.X_(o)&&(i=!0);u.z_=o}}i&&Cg(n)}function nP(t,e,n){const i=De(t),o=i.queries.get(e);if(o)for(const a of o.j_)a.onError(n);i.queries.delete(e)}function Cg(t){t.Y_.forEach((e=>{e.next()}))}var Ip,PT;(PT=Ip||(Ip={})).ea="default",PT.Cache="cache";class Pw{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ip.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.key=e}}class Uw{constructor(e){this.key=e}}class iP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=ZS(e),this.Ra=new Na(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new MT,o=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const S=o.get(_),C=pf(this.query,E)?E:null,M=!!S&&this.mutatedKeys.has(S.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let U=!1;S&&C?S.data.isEqual(C.data)?M!==V&&(i.track({type:3,doc:C}),U=!0):this.ga(S,C)||(i.track({type:2,doc:C}),U=!0,(f&&this.Aa(C,f)>0||h&&this.Aa(C,h)<0)&&(d=!0)):!S&&C?(i.track({type:0,doc:C}),U=!0):S&&!C&&(i.track({type:1,doc:S}),U=!0,(f||h)&&(d=!0)),U&&(C?(u=u.add(C),a=V?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{Ra:u,fa:i,ns:d,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,E)=>(function(C,M){const V=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return V(C)-V(M)})(_.type,E.type)||this.Aa(_.doc,E.doc))),this.pa(i),o=o!=null&&o;const d=n&&!o?this.ya():[],f=this.da.size===0&&this.current&&!o?1:0,h=f!==this.Ea;return this.Ea=f,u.length!==0||h?{snapshot:new qa(this.query,e.Ra,a,u,e.mutatedKeys,f===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new MT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const n=[];return e.forEach((i=>{this.da.has(i)||n.push(new Uw(i))})),this.da.forEach((i=>{e.has(i)||n.push(new kw(i))})),n}ba(e){this.Ta=e.Ts,this.da=Be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sP{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class rP{constructor(e){this.key=e,this.va=!1}}class oP{constructor(e,n,i,o,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Ya((d=>XS(d)),mf),this.Ma=new Map,this.xa=new Set,this.Oa=new yt(Ae.comparator),this.Na=new Map,this.La=new yg,this.Ba={},this.ka=new Map,this.qa=Fa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function aP(t,e,n=!0){const i=Bw(t);let o;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await Lw(i,e,n,!0),o}async function lP(t,e){const n=Bw(t);await Lw(n,e,!0,!1)}async function Lw(t,e,n,i){const o=await N2(t.localStore,Di(e)),a=o.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let d;return i&&(d=await uP(t,e,a,u==="current",o.resumeToken)),t.isPrimaryClient&&n&&Aw(t.remoteStore,o),d}async function uP(t,e,n,i,o){t.Ka=(E,S,C)=>(async function(V,U,z,J){let j=U.view.ma(z);j.ns&&(j=await bT(V.localStore,U.query,!1).then((({documents:P})=>U.view.ma(P,j))));const Y=J&&J.targetChanges.get(U.targetId),ie=J&&J.targetMismatches.get(U.targetId)!=null,oe=U.view.applyChanges(j,V.isPrimaryClient,Y,ie);return UT(V,U.targetId,oe.wa),oe.snapshot})(t,E,S,C);const a=await bT(t.localStore,e,!0),u=new iP(e,a.Ts),d=u.ma(a.documents),f=Vu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),h=u.applyChanges(d,t.isPrimaryClient,f);UT(t,n,h.wa);const _=new sP(e,n,u);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function cP(t,e,n){const i=De(t),o=i.Fa.get(e),a=i.Ma.get(o.targetId);if(a.length>1)return i.Ma.set(o.targetId,a.filter((u=>!mf(u,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await bp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Tg(i.remoteStore,o.targetId),Rp(i,o.targetId)})).catch(Uu)):(Rp(i,o.targetId),await bp(i.localStore,o.targetId,!0))}async function dP(t,e){const n=De(t),i=n.Fa.get(e),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Tg(n.remoteStore,i.targetId))}async function fP(t,e,n){const i=_P(t);try{const o=await(function(u,d){const f=De(u),h=Vt.now(),_=d.reduce(((C,M)=>C.add(M.key)),Be());let E,S;return f.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let M=As(),V=Be();return f.cs.getEntries(C,_).next((U=>{M=U,M.forEach(((z,J)=>{J.isValidDocument()||(V=V.add(z))}))})).next((()=>f.localDocuments.getOverlayedDocuments(C,M))).next((U=>{E=U;const z=[];for(const J of d){const j=kD(J,E.get(J.key).overlayedDocument);j!=null&&z.push(new Ro(J.key,j,zS(j.value.mapValue),_s.exists(!0)))}return f.mutationQueue.addMutationBatch(C,h,z,d)})).next((U=>{S=U;const z=U.applyToLocalDocumentSet(E,V);return f.documentOverlayCache.saveOverlays(C,U.batchId,z)}))})).then((()=>({batchId:S.batchId,changes:tw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,f){let h=u.Ba[u.currentUser.toKey()];h||(h=new yt(Ke)),h=h.insert(d,f),u.Ba[u.currentUser.toKey()]=h})(i,o.batchId,n),await Fu(i,o.changes),await xf(i.remoteStore)}catch(o){const a=Ag(o,"Failed to persist write");n.reject(a)}}async function Vw(t,e){const n=De(t);try{const i=await b2(n.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=n.Na.get(a);u&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?st(u.va):o.removedDocuments.size>0&&(st(u.va),u.va=!1))})),await Fu(n,i,e)}catch(i){await Uu(i)}}function kT(t,e,n){const i=De(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach(((a,u)=>{const d=u.view.Z_(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const f=De(u);f.onlineState=d;let h=!1;f.queries.forEach(((_,E)=>{for(const S of E.j_)S.Z_(d)&&(h=!0)})),h&&Cg(f)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function hP(t,e,n){const i=De(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Na.get(e),a=o&&o.key;if(a){let u=new yt(Ae.comparator);u=u.insert(a,cn.newNoDocument(a,Me.min()));const d=Be().add(a),f=new _f(Me.min(),new Map,new yt(Ke),u,d);await Vw(i,f),i.Oa=i.Oa.remove(a),i.Na.delete(e),bg(i)}else await bp(i.localStore,e,!1).then((()=>Rp(i,e,n))).catch(Uu)}async function mP(t,e){const n=De(t),i=e.batch.batchId;try{const o=await C2(n.localStore,e);Fw(n,i,null),Ow(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Fu(n,o)}catch(o){await Uu(o)}}async function pP(t,e,n){const i=De(t);try{const o=await(function(u,d){const f=De(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return f.mutationQueue.lookupMutationBatch(h,d).next((E=>(st(E!==null),_=E.keys(),f.mutationQueue.removeMutationBatch(h,E)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>f.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);Fw(i,e,n),Ow(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Fu(i,o)}catch(o){await Uu(o)}}function Ow(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function Fw(t,e,n){const i=De(t);let o=i.Ba[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(n?a.reject(n):a.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Rp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((i=>{t.La.containsKey(i)||qw(t,i)}))}function qw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Tg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bg(t))}function UT(t,e,n){for(const i of n)i instanceof kw?(t.La.addReference(i.key,e),gP(t,i)):i instanceof Uw?(Ee("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||qw(t,i.key)):Re()}function gP(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(Ee("SyncEngine","New document in limbo: "+n),t.xa.add(i),bg(t))}function bg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ae(mt.fromString(e)),i=t.qa.next();t.Na.set(i,new rP(n)),t.Oa=t.Oa.insert(n,i),Aw(t.remoteStore,new Cr(Di(fg(n.path)),i,"TargetPurposeLimboResolution",og.oe))}}async function Fu(t,e,n){const i=De(t),o=[],a=[],u=[];i.Fa.isEmpty()||(i.Fa.forEach(((d,f)=>{u.push(i.Ka(f,e,n).then((h=>{var _;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(_=n==null?void 0:n.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(h){o.push(h);const E=_g.Wi(f.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Ca.d_(o),await(async function(f,h){const _=De(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ce.forEach(h,(S=>ce.forEach(S.$i,(C=>_.persistence.referenceDelegate.addReference(E,S.targetId,C))).next((()=>ce.forEach(S.Ui,(C=>_.persistence.referenceDelegate.removeReference(E,S.targetId,C)))))))))}catch(E){if(!Lu(E))throw E;Ee("LocalStore","Failed to update sequence numbers: "+E)}for(const E of h){const S=E.targetId;if(!E.fromCache){const C=_.os.get(S),M=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(M);_.os=_.os.insert(S,V)}}})(i.localStore,a))}async function yP(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){Ee("SyncEngine","User change. New user:",e.toKey());const i=await Ew(n.localStore,e);n.currentUser=e,(function(a,u){a.ka.forEach((d=>{d.forEach((f=>{f.reject(new ge(ue.CANCELLED,u))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Fu(n,i.hs)}}function vP(t,e){const n=De(t),i=n.Na.get(e);if(i&&i.va)return Be().add(i.key);{let o=Be();const a=n.Ma.get(e);if(!a)return o;for(const u of a){const d=n.Fa.get(u);o=o.unionWith(d.view.Va)}return o}}function Bw(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hP.bind(null,e),e.Ca.d_=tP.bind(null,e.eventManager),e.Ca.$a=nP.bind(null,e.eventManager),e}function _P(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pP.bind(null,e),e}class Qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return A2(this.persistence,new S2,e.initialUser,this.serializer)}Ga(e){return new T2(vg.Zr,this.serializer)}Wa(e){return new D2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qd.provider={build:()=>new Qd};class Np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yP.bind(null,this.syncEngine),await X2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eP})()}createDatastore(e){const n=Tf(e.databaseInfo.databaseId),i=(function(a){return new L2(a)})(e.databaseInfo);return(function(a,u,d,f){return new F2(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,a,u,d){return new B2(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>kT(this.syncEngine,n,0)),(function(){return RT.D()?new RT:new P2})())}createSyncEngine(e,n){return(function(o,a,u,d,f,h,_){const E=new oP(o,a,u,d,f,h);return _&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const a=De(o);Ee("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Ou(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Np.provider={build:()=>new Np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ws("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,i,o,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=BS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{Ee("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(Ee("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ag(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function rp(t,e){t.asyncQueue.verifyOperationInProgress(),Ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Ew(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function LT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await EP(t);Ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>NT(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,o)=>NT(e.remoteStore,o))),t._onlineComponents=e}async function EP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await rp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ue.FAILED_PRECONDITION||o.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Ua("Error using user provided cache. Falling back to memory cache: "+n),await rp(t,new Qd)}}else Ee("FirestoreClient","Using default OfflineComponentProvider"),await rp(t,new Qd);return t._offlineComponents}async function Hw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee("FirestoreClient","Using user provided OnlineComponentProvider"),await LT(t,t._uninitializedComponentsProvider._online)):(Ee("FirestoreClient","Using default OnlineComponentProvider"),await LT(t,new Np))),t._onlineComponents}function xP(t){return Hw(t).then((e=>e.syncEngine))}async function zw(t){const e=await Hw(t),n=e.eventManager;return n.onListen=aP.bind(null,e.syncEngine),n.onUnlisten=cP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dP.bind(null,e.syncEngine),n}function SP(t,e,n={}){const i=new vs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,h){const _=new Gw({next:S=>{_.Za(),u.enqueueAndForget((()=>Dw(a,E)));const C=S.docs.has(d);!C&&S.fromCache?h.reject(new ge(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&S.fromCache&&f&&f.source==="server"?h.reject(new ge(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),E=new Pw(fg(d.path),_,{includeMetadataChanges:!0,_a:!0});return Mw(a,E)})(await zw(t),t.asyncQueue,e,n,i))),i.promise}function wP(t,e,n={}){const i=new vs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,h){const _=new Gw({next:S=>{_.Za(),u.enqueueAndForget((()=>Dw(a,E))),S.fromCache&&f.source==="server"?h.reject(new ge(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(S)},error:S=>h.reject(S)}),E=new Pw(d,_,{includeMetadataChanges:!0,_a:!0});return Mw(a,E)})(await zw(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t,e,n){if(!n)throw new ge(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AP(t,e,n,i){if(e===!0&&i===!0)throw new ge(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function OT(t){if(!Ae.isDocumentKey(t))throw new ge(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FT(t){if(Ae.isDocumentKey(t))throw new ge(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re()}function wo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sf(t);throw new ge(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function CP(t,e){if(e<=0)throw new ge(ue.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ge(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ge(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ge(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wf{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qT(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new GM;switch(i.type){case"firstParty":return new $M(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=VT.get(n);i&&(Ee("ComponentProvider","Removing Datastore"),VT.delete(n),i.terminate())})(this),Promise.resolve()}}function Yw(t,e,n,i={}){var o;const a=(t=wo(t,wf))._getSettings(),u=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),i.mockUserToken){let d,f;if(typeof i.mockUserToken=="string")d=i.mockUserToken,f=un.MOCK_USER;else{d=Jx(i.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new ge(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new un(h)}t._authCredentials=new HM(new qS(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Lr(this.firestore,e,this._query)}}class Mn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class Nr extends Lr{constructor(e,n,i){super(e,n,fg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new Ae(e))}withConverter(e){return new Nr(this.firestore,e,this._path)}}function Ka(t,e,...n){if(t=tn(t),$w("collection","path",e),t instanceof wf){const i=mt.fromString(e,...n);return FT(i),new Nr(t,null,i)}{if(!(t instanceof Mn||t instanceof Nr))throw new ge(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(mt.fromString(e,...n));return FT(i),new Nr(t.firestore,null,i)}}function Ig(t,e,...n){if(t=tn(t),arguments.length===1&&(e=BS.newId()),$w("doc","path",e),t instanceof wf){const i=mt.fromString(e,...n);return OT(i),new Mn(t,null,new Ae(i))}{if(!(t instanceof Mn||t instanceof Nr))throw new ge(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(mt.fromString(e,...n));return OT(i),new Mn(t.firestore,t instanceof Nr?t.converter:null,new Ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Sw(this,"async_queue_retry"),this.Vu=()=>{const i=sp();i&&Ee("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=sp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new vs;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Lu(e))throw e;Ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(i);throw ws("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=wg.createAndSchedule(this,e,n,i,(a=>this.yu(a)));return this.Tu.push(o),o}fu(){this.Eu&&Re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Af extends wf{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new BT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BT(e),this._firestoreClient=void 0,await e}}}function bP(t,e){const n=typeof t=="object"?t:Jp(),i=typeof t=="string"?t:"(default)",o=cf(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=jx("firestore");a&&Yw(o,...a)}return o}function Rg(t){if(t._terminated)throw new ge(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IP(t),t._firestoreClient}function IP(t){var e,n,i;const o=t._freezeSettings(),a=(function(d,f,h,_){return new rD(d,f,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,jw(_.experimentalLongPollingOptions),_.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new TP(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ba(nn.fromBase64String(e))}catch(n){throw new ge(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ba(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^__.*__$/;class Jw{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ro(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Kw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Dg{constructor(e,n,i,o,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Kw(this.Cu)&&RP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class NP{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Tf(e)}Qu(e,n,i,o=!1){return new Dg({Cu:e,methodName:n,qu:i,path:Zt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ww(t){const e=t._freezeSettings(),n=Tf(t._databaseId);return new NP(t._databaseId,!!e.ignoreUndefinedProperties,n)}class If extends bf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof If}}class Pg extends bf{_toFieldTransform(e){return new ND(e.path,new wu)}isEqual(e){return e instanceof Pg}}function MP(t,e,n,i){const o=t.Qu(1,e,n);Xw("Data must be an object, but it was:",o,i);const a=[],u=Bn.empty();Io(i,((f,h)=>{const _=kg(e,f,n);h=tn(h);const E=o.Nu(_);if(h instanceof If)a.push(_);else{const S=qu(h,E);S!=null&&(a.push(_),u.set(_,S))}}));const d=new ci(a);return new Jw(u,d,o.fieldTransforms)}function DP(t,e,n,i,o,a){const u=t.Qu(1,e,n),d=[GT(e,i,n)],f=[o];if(a.length%2!=0)throw new ge(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(GT(e,a[S])),f.push(a[S+1]);const h=[],_=Bn.empty();for(let S=d.length-1;S>=0;--S)if(!LP(h,d[S])){const C=d[S];let M=f[S];M=tn(M);const V=u.Nu(C);if(M instanceof If)h.push(C);else{const U=qu(M,V);U!=null&&(h.push(C),_.set(C,U))}}const E=new ci(h);return new Jw(_,E,u.fieldTransforms)}function PP(t,e,n,i=!1){return qu(n,t.Qu(i?4:3,e))}function qu(t,e){if(Qw(t=tn(t)))return Xw("Unsupported field value:",e,t),kP(t,e);if(t instanceof bf)return(function(i,o){if(!Kw(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let f=qu(d,o.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(t,e)}return(function(i,o){if((i=tn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return bD(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Vt.fromDate(i);return{timestampValue:Kd(o.serializer,a)}}if(i instanceof Vt){const a=new Vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Kd(o.serializer,a)}}if(i instanceof Ng)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ba)return{bytesValue:mw(o.serializer,i._byteString)};if(i instanceof Mn){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:gg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Mg)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw d.Bu("VectorValues must only contain numeric values.");return hg(d.serializer,f)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${Sf(i)}`)})(t,e)}function kP(t,e){const n={};return GS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(t,((i,o)=>{const a=qu(o,e.Mu(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function Qw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vt||t instanceof Ng||t instanceof Ba||t instanceof Mn||t instanceof bf||t instanceof Mg)}function Xw(t,e,n){if(!Qw(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const i=Sf(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function GT(t,e,n){if((e=tn(e))instanceof Cf)return e._internalPath;if(typeof e=="string")return kg(t,e);throw Xd("Field path arguments must be of type string or ",t,!1,void 0,n)}const UP=new RegExp("[~\\*/\\[\\]]");function kg(t,e,n){if(e.search(UP)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cf(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xd(t,e,n,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${i}`),u&&(f+=` in document ${o}`),f+=")"),new ge(ue.INVALID_ARGUMENT,d+t+f)}function LP(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n,i,o,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VP extends Zw{data(){return super.data()}}function Rf(t,e){return typeof e=="string"?kg(t,e):e instanceof Cf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ug{}class Lg extends Ug{}function Nf(t,e,...n){let i=[];e instanceof Ug&&i.push(e),i=i.concat(n),(function(a){const u=a.filter((f=>f instanceof Vg)).length,d=a.filter((f=>f instanceof Mf)).length;if(u>1||u>0&&d>0)throw new ge(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)t=o._apply(t);return t}class Mf extends Lg{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Mf(e,n,i)}_apply(e){const n=this._parse(e);return tA(e._query,n),new Lr(e.firestore,e.converter,xp(e._query,n))}_parse(e){const n=Ww(e.firestore);return(function(a,u,d,f,h,_,E){let S;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){zT(E,_);const C=[];for(const M of E)C.push(HT(f,a,M));S={arrayValue:{values:C}}}else S=HT(f,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||zT(E,_),S=PP(d,u,E,_==="in"||_==="not-in");return Pt.create(h,_,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function FP(t,e,n){const i=e,o=Rf("where",t);return Mf._create(o,i,n)}class Vg extends Ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:hi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const f of d)tA(u,f),u=xp(u,f)})(e._query,n),new Lr(e.firestore,e.converter,xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Og extends Lg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Og(e,n)}_apply(e){const n=(function(o,a,u){if(o.startAt!==null)throw new ge(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Su(a,u)})(e._query,this._field,this._direction);return new Lr(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new $a(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Df(t,e="asc"){const n=e,i=Rf("orderBy",t);return Og._create(i,n)}class Fg extends Lg{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Fg(e,n,i)}_apply(e){return new Lr(e.firestore,e.converter,Yd(e._query,this._limit,this._limitType))}}function eA(t){return CP("limit",t),Fg._create("limit",t,"F")}function HT(t,e,n){if(typeof(n=tn(n))=="string"){if(n==="")throw new ge(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QS(e)&&n.indexOf("/")!==-1)throw new ge(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(mt.fromString(n));if(!Ae.isDocumentKey(i))throw new ge(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return cT(t,new Ae(i))}if(n instanceof Mn)return cT(t,n._key);throw new ge(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(n)}.`)}function zT(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tA(t,e){const n=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qP{convertValue(e,n="none"){switch(So(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Io(e,((o,a)=>{i[o]=this.convertValue(a,n)})),i}convertVectorValue(e){var n,i,o;const a=(o=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>Ct(u.doubleValue)));return new Mg(a)}convertGeoPoint(e){return new Ng(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=lg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=mt.fromString(e);st(Tw(i));const o=new Eu(i.get(1),i.get(3)),a=new Ae(i.popFirst(5));return o.isEqual(n)||ws(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nA extends Zw{constructor(e,n,i,o,a,u){super(e,n,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Rf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Pd extends nA{data(e={}){return super.data(e)}}class BP{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new uu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Pd(this._firestore,this._userDataWriter,i.key,i,new uu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const f=new Pd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new uu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new Pd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new uu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,_=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:GP(d.type),doc:f,oldIndex:h,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function GP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){t=wo(t,Mn);const e=wo(t.firestore,Af);return SP(Rg(e),t._key).then((n=>jP(e,t,n)))}class sA extends qP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ba(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,n)}}function Wa(t){t=wo(t,Lr);const e=wo(t.firestore,Af),n=Rg(e),i=new sA(e);return OP(t._query),wP(n,t._query).then((o=>new BP(e,i,t,o)))}function HP(t,e,n,...i){t=wo(t,Mn);const o=wo(t.firestore,Af),a=Ww(o);let u;return u=typeof(e=tn(e))=="string"||e instanceof Cf?DP(a,"updateDoc",t._key,e,n,i):MP(a,"updateDoc",t._key,e),zP(o,[u.toMutation(t._key,_s.exists(!0))])}function zP(t,e){return(function(i,o){const a=new vs;return i.asyncQueue.enqueueAndForget((async()=>fP(await xP(i),o,a))),a.promise})(Rg(t),e)}function jP(t,e,n){const i=n.docs.get(e._key),o=new sA(t);return new nA(t,o,e._key,i,new uu(n.hasPendingWrites,n.fromCache),e.converter)}function $P(){return new Pg("serverTimestamp")}(function(e,n=!0){(function(o){ja=o})(bo),_o(new Mr("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Af(new zM(i.getProvider("auth-internal")),new JM(i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ge(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(h.options.projectId,_)})(u,o),u);return a=Object.assign({useFetchStreams:n},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Ri(rT,"4.7.3",e),Ri(rT,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firebasestorage.googleapis.com",YP="storageBucket",JP=120*1e3,KP=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Oi{constructor(e,n,i=0){super(op(e),`Firebase Storage: ${n} (${op(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return op(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ui;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ui||(Ui={}));function op(t){return"storage/"+t}function WP(){const t="An unknown error occurred, please check the error payload for server response.";return new Fi(Ui.UNKNOWN,t)}function QP(){return new Fi(Ui.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XP(){return new Fi(Ui.CANCELED,"User canceled the upload/download.")}function ZP(t){return new Fi(Ui.INVALID_URL,"Invalid URL '"+t+"'.")}function ek(t){return new Fi(Ui.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jT(t){return new Fi(Ui.INVALID_ARGUMENT,t)}function oA(){return new Fi(Ui.APP_DELETED,"The Firebase app was deleted.")}function tk(t){return new Fi(Ui.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=di.makeFromUrl(e,n)}catch{return new di(e,"")}if(i.path==="")return i;throw ek(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),f={bucket:1,path:3};function h(Y){Y.path_=decodeURIComponent(Y.path)}const _="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",C=new RegExp(`^https?://${E}/${_}/b/${o}/o${S}`,"i"),M={bucket:1,path:3},V=n===rA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",z=new RegExp(`^https?://${V}/${o}/${U}`,"i"),j=[{regex:d,indices:f,postModify:a},{regex:C,indices:M,postModify:h},{regex:z,indices:{bucket:1,path:2},postModify:h}];for(let Y=0;Y<j.length;Y++){const ie=j[Y],oe=ie.regex.exec(e);if(oe){const P=oe[ie.indices.bucket];let N=oe[ie.indices.path];N||(N=""),i=new di(P,N),ie.postModify(i);break}}if(i==null)throw ZP(e);return i}}class nk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t,e,n){let i=1,o=null,a=null,u=!1,d=0;function f(){return d===2}let h=!1;function _(...U){h||(h=!0,e.apply(null,U))}function E(U){o=setTimeout(()=>{o=null,t(C,f())},U)}function S(){a&&clearTimeout(a)}function C(U,...z){if(h){S();return}if(U){S(),_.call(null,U,...z);return}if(f()||u){S(),_.call(null,U,...z);return}i<64&&(i*=2);let j;d===1?(d=2,j=0):j=(i+Math.random())*1e3,E(j)}let M=!1;function V(U){M||(M=!0,S(),!h&&(o!==null?(U||(d=2),clearTimeout(o),E(0)):U||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,V(!0)},n),V}function sk(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){return t!==void 0}function $T(t,e,n,i){if(i<e)throw jT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw jT(`Invalid value for '${t}'. Expected ${n} or less.`)}function ok(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const o=e(i)+"="+e(t[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var Zd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Zd||(Zd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t,e){const n=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n,i,o,a,u,d,f,h,_,E,S=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=_,this.connectionFactory_=E,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,M)=>{this.resolve_=C,this.reject_=M,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new xd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Zd.NO_ERROR,f=a.getStatus();if(!d||ak(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Zd.ABORT;i(!1,new xd(!1,null,_));return}const h=this.successCodes_.indexOf(f)!==-1;i(!0,new xd(h,a))})},n=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());rk(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=WP();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(o.canceled){const f=this.appDelete_?oA():XP();u(f)}else{const f=QP();u(f)}};this.canceled_?n(!1,new xd(!1,null,!0)):this.backoffId_=ik(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function uk(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ck(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dk(t,e){e&&(t["X-Firebase-GMPID"]=e)}function fk(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function hk(t,e,n,i,o,a,u=!0){const d=ok(t.urlParams),f=t.url+d,h=Object.assign({},t.headers);return dk(h,e),uk(h,n),ck(h,a),fk(h,i),new lk(f,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function pk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this._service=e,n instanceof di?this._location=n:this._location=di.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ef(e,n)}get root(){const e=new di(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pk(this._location.path)}get storage(){return this._service}get parent(){const e=mk(this._location.path);if(e===null)return null;const n=new di(this._location.bucket,e);return new ef(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tk(e)}}function YT(t,e){const n=e==null?void 0:e[YP];return n==null?null:di.makeFromBucketSpec(n,t)}function gk(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:Jx(o,t.app.options.projectId))}class yk{constructor(e,n,i,o,a){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=rA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=JP,this._maxUploadRetryTime=KP,this._requests=new Set,o!=null?this._bucket=di.makeFromBucketSpec(o,this._host):this._bucket=YT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=di.makeFromBucketSpec(this._url,e):this._bucket=YT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$T("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$T("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ef(this,e)}_makeRequest(e,n,i,o,a=!0){if(this._deleted)return new nk(oA());{const u=hk(e,this._appId,i,o,n,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const JT="@firebase/storage",KT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="storage";function vk(t=Jp(),e){t=tn(t);const i=cf(t,aA).getImmediate({identifier:e}),o=jx("storage");return o&&lA(i,...o),i}function lA(t,e,n,i={}){gk(t,e,n,i)}function _k(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new yk(n,i,o,e,bo)}function Tk(){_o(new Mr(aA,_k,"PUBLIC").setMultipleInstances(!0)),Ri(JT,KT,""),Ri(JT,KT,"esm2017")}Tk();var Ii=(t=>(t.FREE="Free Download",t.SALE="For Sale",t.PREVIEW="Preview Only",t))(Ii||{}),hs=(t=>(t.NEW_TRACK="NEW_TRACK",t.NEW_PHOTO="NEW_PHOTO",t.IRL_EVENT="IRL_EVENT",t))(hs||{}),Qt=(t=>(t.GEO="GEO",t.UNIVERSE="UNIVERSE",t.COUNTRY="COUNTRY",t))(Qt||{});const ut=[{id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:"Weaving deep, rolling basslines with atmospheric pads and intricate breaks. Welcome to the concrete jungle.",interview:[{question:"What's the story behind your name?",answer:"It's all about the fusion. The 'Sub' is for the deep bass frequencies I love, and 'Tropical' represents the atmospheric, jungle-like vibes I try to create. It's that contrast between urban and natural environments."},{question:"Who are your biggest influences?",answer:"Definitely the old-school legends like Goldie, Photek, and Dillinja for their breakbeat science. But also film composers like Hans Zimmer for their sense of scale and atmosphere. I try to bring that cinematic feel to a 170bpm tempo."},{question:"What's your go-to piece of studio gear?",answer:"It has to be my analog synth, the Moog Sub 37. You just can't replicate that warmth and weight with software. Every bassline I write starts there. It's the heart of my sound."}],gallery:["https://picsum.photos/id/1011/800/600","https://picsum.photos/id/1012/800/600","https://picsum.photos/id/1013/800/600"]},{id:"user_2",name:"Re-Flex",avatarUrl:"https://picsum.photos/id/1016/200/200",bio:"Heavy-hitting D&B with a focus on deep sub frequencies and technical rhythm patterns. For the heads.",interview:[{question:"Describe your sound in three words.",answer:"Deep, dark, and rolling."}],gallery:["https://picsum.photos/id/201/800/600","https://picsum.photos/id/202/800/600"]},{id:"user_3",name:"Lioness Vibe",avatarUrl:"https://picsum.photos/id/1025/200/200",bio:"Fusing classic reggae and dub culture with the energy of 170bpm jungle. Positive vibrations.",interview:[{question:"What's the message behind your music?",answer:"It's all about unity and positive energy. Taking the soundsystem culture I grew up with and bringing it to the jungle world. It's about respecting the roots."}],gallery:["https://picsum.photos/id/301/800/600","https://picsum.photos/id/302/800/600"]}],kt=[{id:"c1",authorId:"user_2",authorName:"Re-Flex",authorAvatarUrl:ut[1].avatarUrl,content:"Heavy roller this one!",createdAt:new Date(Date.now()-1e3*60*60*3).toISOString()},{id:"c2",authorId:"user_3",authorName:"Lioness Vibe",authorAvatarUrl:ut[2].avatarUrl,content:"Pure vibes. The atmosphere is incredible.",createdAt:new Date(Date.now()-1e3*60*30).toISOString()}],uA={label_1:[{id:"opp_1",title:"Seeking Vocalist for Deep Liquid Track",type:"Vocalist",description:"We have a deep, atmospheric liquid track in the works and are looking for a vocalist with a soulful, ethereal style to collaborate with. Please submit demos.",comments:[{id:"c1-opp",authorId:"user_2",authorName:"Re-Flex",authorAvatarUrl:ut[1].avatarUrl,content:"Sounds interesting. Sent you a DM with a link to a vocalist I worked with before.",createdAt:new Date(Date.now()-1e3*60*60*3).toISOString()},{id:"c2-opp",authorId:"user_3",authorName:"Lioness Vibe",authorAvatarUrl:ut[2].avatarUrl,content:"This sounds like a vibe for sure. Good luck finding someone!",createdAt:new Date(Date.now()-1e3*60*30).toISOString()}]},{id:"opp_2",title:"Graphic Designer for Album Art",type:"Designer",description:"We need a talented graphic designer to create the cover art and promotional materials for an upcoming EP. We are looking for a minimalist, abstract style.",comments:[{id:"c3-opp",authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:ut[0].avatarUrl,content:"My friend @PixelPusher does amazing work in this style, they should apply!",createdAt:new Date(Date.now()-1e3*60*60*24*2).toISOString()}]}]},cA=[{id:"label_1",name:"Deep Grooves",logoUrl:"https://picsum.photos/id/237/200/200",bannerUrl:"https://picsum.photos/id/1018/1200/400",bio:"Focused on the deeper, more atmospheric side of drum and bass. We push sounds that are both hypnotic and heavy, for the true heads who appreciate the art of the roller. Our mission is to champion producers who craft immersive soundscapes and push the boundaries of rhythm and bass.",artistIds:["user_1","user_2"],storeLinks:[{name:"Bandcamp",url:"#",icon:"bandcamp"},{name:"Merch Store",url:"#",icon:"package"}],featuredReleaseId:"track_2",galleryImageUrls:["https://picsum.photos/id/10/800/600","https://picsum.photos/id/22/800/600","https://picsum.photos/id/30/800/600"],opportunities:uA.label_1,eventPhotos:["https://picsum.photos/id/1040/800/600","https://picsum.photos/id/1041/800/600","https://picsum.photos/id/1042/800/600"],theme:{bannerUrl:"https://picsum.photos/id/1018/1200/400",accentColor:"#1DB954"},comments:[kt[0]]},{id:"label_2",name:"Jungle Massive Recordings",logoUrl:"https://picsum.photos/id/238/200/200",bannerUrl:"https://picsum.photos/id/1019/1200/400",bio:"Bringing the original jungle sound back to the forefront. Raw breakbeats, reggae samples, and chest-rattling basslines are our signature. We honor the roots while pushing the sound into the future.",artistIds:["user_3"],storeLinks:[{name:"Bandcamp",url:"#",icon:"bandcamp"}],featuredReleaseId:"track_3",theme:{bannerUrl:"https://picsum.photos/id/1019/1200/400",accentColor:"#F59E0B"}}],Ek={label_1:[{id:"le_1",title:"Deep Grooves Label Night",date:"2024-11-15",location:"Fabric, London",description:"Join us for a night of deep rollers with the full Deep Grooves roster.",ticketUrl:"#"},{id:"le_2",title:"Re-Flex Album Launch",date:"2024-12-05",location:"Watergate, Berlin",description:"Celebrating the launch of the new album from Re-Flex."}],label_2:[{id:"le_3",title:"Jungle Massive Soundclash",date:"2024-11-22",location:"The Black Swan, Bristol",description:"A night of classic jungle and dubplates, featuring Lioness Vibe and special guests.",ticketUrl:"#"}]},Nn=[{id:"track_1",title:"Concrete Jungle",artistId:"user_1",artistName:"Sub-Tropical",audioSrc:"https://storage.googleapis.com/jweb-app-media/track_1.mp3",coverArtUrl:"https://picsum.photos/id/145/400/400",price:1.29,currency:"USD",uploadType:Ii.SALE,description:"A deep, rolling drum & bass track with lush atmospheric pads and a heavy, off-beat sub bass. Takes you on a journey through the urban wilderness.",tags:["Drum & Bass","Jungle","Liquid"],category:"Official Release",labelId:"label_1",labelName:"Deep Grooves",comments:[...kt]},{id:"track_2",title:"Deepwater Horizon (Remix)",artistId:"user_2",artistName:"Re-Flex",audioSrc:"https://storage.googleapis.com/jweb-app-media/track_2.mp3",coverArtUrl:"https://picsum.photos/id/211/400/400",price:0,currency:"USD",uploadType:Ii.FREE,description:"Minimalist, tech-driven D&B. A hypnotic roller with a sub-bass that you feel more than you hear. Intricate percussion and subtle textures create a deep, meditative groove perfect for the late-night hours.",tags:["Deep D&B","Techstep","Rolling"],category:"Remix",sourceSamples:['"Think" break by Lyn Collins',"808 Sub Bass Patch"],labelId:"label_1",labelName:"Deep Grooves",comments:[kt[1]]},{id:"track_3",title:"Babylon Fall",artistId:"user_3",artistName:"Lioness Vibe",audioSrc:"https://storage.googleapis.com/jweb-app-media/track_3.mp3",coverArtUrl:"https://picsum.photos/id/310/400/400",price:0,currency:"USD",uploadType:Ii.PREVIEW,description:"Classic reggae vocal samples chopped over a thunderous amen break and a chest-rattling bassline. Pure dubwise jungle pressure, guaranteed to shake the foundations.",tags:["Reggae","Jungle","Dubwise"],category:"Official Release",labelId:"label_2",labelName:"Jungle Massive Recordings",comments:[]},{id:"track_4",title:"Amazon Flow",artistId:"user_1",artistName:"Sub-Tropical",audioSrc:"https://storage.googleapis.com/jweb-app-media/track_4.mp3",coverArtUrl:"https://picsum.photos/id/431/400/400",price:.99,currency:"USD",uploadType:Ii.SALE,description:"A liquid funk anthem. Smooth, melodic, and uplifting with a clean, rolling beat and warm bass. Perfect for a sunset session.",tags:["Liquid Funk","Atmospheric","D&B"],category:"Official Release",labelId:"label_1",labelName:"Deep Grooves",comments:[kt[0],kt[1]]},{id:"track_5",title:"Kingston Skank (Bootleg)",artistId:"user_1",artistName:"Sub-Tropical",audioSrc:"https://storage.googleapis.com/jweb-app-media/track_5.mp3",coverArtUrl:"https://picsum.photos/id/454/400/400",price:0,currency:"USD",uploadType:Ii.FREE,description:"Off-beat reggae guitars and horn stabs ride a high-energy 175bpm jungle rhythm track. This is an unofficial bootleg, for promotional use only.",tags:["Jungle","Reggae","Bootleg"],category:"Bootleg",comments:[kt[0]]}],qg=[{id:"post_1",title:"Favorite classic Amen break edits?",content:"The Amen break is the foundation! What are some of your favorite, most creative or influential edits of the Amen? Looking for inspiration for my next junglist track. Links appreciated!",authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100",createdAt:new Date(Date.now()-1e3*60*60*2).toISOString(),likes:25,replyCount:2,replies:[kt[0],kt[1]]},{id:"post_label_1",title:"New Release: Sub-Tropical - Concrete Jungle",content:"Our latest release from the one and only Sub-Tropical is out now on all major platforms! A deep, rolling journey into the concrete jungle. Grab it now on our Bandcamp.",authorId:"label_1",authorName:"Deep Grooves",authorAvatarUrl:"https://picsum.photos/id/237/100/100",createdAt:new Date(Date.now()-1e3*60*60*8).toISOString(),likes:52,replyCount:1,replies:[kt[0]]},{id:"post_2",title:"Best VSTs for creating deep, rolling sub-bass?",content:"I'm trying to get that really deep, clean, rolling sub that you can feel in your chest. Using Serum right now but wondering what else is out there. Any tips on synthesis or processing chains?",authorId:"user_2",authorName:"Re-Flex",authorAvatarUrl:"https://picsum.photos/id/1016/100/100",createdAt:new Date(Date.now()-1e3*60*60*24).toISOString(),likes:41,replyCount:0,replies:[]},{id:"post_3",title:"Who are your favorite reggae/dub artists to sample?",content:'Looking for some fresh (or classic) material to sample for my next jungle tune. Who are your go-to artists for vocal snippets, horn stabs, or basslines? Thinking King Tubby, Lee "Scratch" Perry, etc.',authorId:"user_3",authorName:"Lioness Vibe",authorAvatarUrl:"https://picsum.photos/id/1025/100/100",createdAt:new Date(Date.now()-1e3*60*60*72).toISOString(),likes:68,replyCount:1,replies:[kt[1]]}],xk=[{id:"conv_1",participants:[ut[0],ut[1]],unreadCount:2,messages:[{id:"msg_1",senderId:"user_2",text:'Yo, that "Concrete Jungle" track is heavy! Serious roller.',timestamp:new Date(Date.now()-1e3*60*60*5).toISOString()},{id:"msg_2",senderId:"user_1",text:"Thanks man, appreciate that! Your latest remix is sounding huge too.",timestamp:new Date(Date.now()-1e3*60*60*4).toISOString()},{id:"msg_3",senderId:"user_2",text:"We should collab on something soon.",timestamp:new Date(Date.now()-1e3*60*30).toISOString()},{id:"msg_4",senderId:"user_2",text:"Got a new sub bass technique I want to try out.",timestamp:new Date(Date.now()-1e3*60*29).toISOString()}]},{id:"conv_2",participants:[ut[0],ut[2]],unreadCount:1,messages:[{id:"msg_5",senderId:"user_3",text:"Big up on the jungle vibes recently! Keeping the sound alive.",timestamp:new Date(Date.now()-1e3*60*60*26).toISOString()},{id:"msg_6",senderId:"user_1",text:"Respect! Your dub influences are a massive inspiration.",timestamp:new Date(Date.now()-1e3*60*60*25).toISOString()},{id:"msg_7",senderId:"user_3",text:"I've got some rare reggae vocals if you ever need some for a track.",timestamp:new Date(Date.now()-1e3*60*15).toISOString()}]},{id:"conv_3",participants:[ut[0],{id:"label_1",name:"Deep Grooves",avatarUrl:"https://picsum.photos/id/237/200/200",bio:""}],unreadCount:0,messages:[{id:"msg_8",senderId:"label_1",text:'Hey, just checking in. The promo for "Concrete Jungle" is going great. DJs are loving it.',timestamp:new Date(Date.now()-1e3*60*60*72).toISOString()},{id:"msg_9",senderId:"user_1",text:"Awesome news! Thanks for the update.",timestamp:new Date(Date.now()-1e3*60*60*71).toISOString()}]}],Sk={user_1:[{id:"ext_1",platform:"Spotify",title:"Concrete Jungle EP",url:"#",isPaid:!0,type:"Official"},{id:"ext_2",platform:"SoundCloud",title:"Summer Breeze (Bootleg)",url:"#",isPaid:!1,type:"Bootleg"},{id:"ext_3",platform:"YouTube",title:"Amazon Flow (Official Video)",url:"#",isPaid:!1,type:"Official"},{id:"ext_4",platform:"Bandcamp",title:"Goldie - Terminator (Sub-Tropical Remix)",url:"#",isPaid:!0,type:"Remix",sourceArtist:"Goldie",sourceSamples:['"Terminator" vocal snippet',"Reese Bassline"]}],user_2:[],user_3:[]},wk={user_1:[{id:"pack_1",title:"Concrete Jungle - Supporter Pack",price:25,currency:"USD",description:"The ultimate collection for supporters. Get the official release, exclusive merchandise, and a host of unreleased content.",items:[{name:'Official "Concrete Jungle" Release',icon:"music-note"},{name:"Exclusive T-Shirt Merchandise",icon:"tshirt"},{name:"Unreleased VIP & Bootlegs",icon:"crown"},{name:"SoundWave Masterclass Access",icon:"camera"},{name:"Public Playlist Curation",icon:"playlist"}]}],user_2:[],user_3:[]},Ak=["This new 'Concrete Jungle' track is fire! ","Anyone got tips for sidechaining reverb?","Just dropped a new liquid funk tune, check it out on my profile!","What's your favorite synth for pads?","The bassline on 'Deepwater Horizon' is so clean.","Looking for collaborators for a jungle project.","That amen break is classic.","Lioness Vibe's new track is a banger.","Struggling with writer's block today.","Anyone else using Ableton Live?","The kicks in 'Babylon Fall' are hitting hard.","How do you process your drums for that punchy sound?"],Ck=[{id:"ge_1",type:hs.NEW_TRACK,title:'New Track: "Amazon Flow"',description:"A liquid funk anthem just dropped!",authorName:"Sub-Tropical",transform:"rotateY(250deg) rotateX(30deg) translateZ(100px)",animationDelay:"0s",locationName:"London, UK",country:"United Kingdom",groups:["@Genre:LiquidFunk","@Artist:Sub-Tropical","@ReleasedMusic"],influence:8,comments:[kt[0]]},{id:"ge_2",type:hs.IRL_EVENT,title:"Live Show: Berlin",description:"Catch Re-Flex live at Berghain next month.",authorName:"Re-Flex",transform:"rotateY(350deg) rotateX(45deg) translateZ(100px)",animationDelay:"0.4s",locationName:"Berlin, Germany",country:"Germany",groups:["@Events:LiveSet","@Artist:Re-Flex","@TicketSales"],influence:9,comments:[]},{id:"ge_3",type:hs.NEW_PHOTO,title:"New Studio Pic",description:"Lioness Vibe shared a photo of her new studio setup.",authorName:"Lioness Vibe",transform:"rotateY(220deg) rotateX(-15deg) translateZ(100px)",animationDelay:"0.2s",locationName:"Kingston, Jamaica",country:"Jamaica",groups:["@Artist:Lioness Vibe","@SocialMediaHub"],influence:6,comments:[kt[1]]},{id:"ge_4",type:hs.NEW_TRACK,title:'New Track: "Kingston Skank"',description:"High-energy jungle rhythms from Jamaica.",authorName:"Lioness Vibe",transform:"rotateY(10deg) rotateX(10deg) translateZ(100px)",animationDelay:"0.6s",locationName:"Kingston, Jamaica",country:"Jamaica",groups:["@Genre:Jungle","@Artist:Lioness Vibe","@ReleasedMusic"],influence:7,comments:[]},{id:"ge_5",type:hs.NEW_PHOTO,title:"Tokyo Street Art",description:"Inspiration hunting in Shibuya.",authorName:"Sub-Tropical",transform:"rotateY(80deg) rotateX(35deg) translateZ(100px)",animationDelay:"0.8s",locationName:"Tokyo, Japan",country:"Japan",groups:["@Mood:Inspiration","@Artist:Sub-Tropical","@SocialMediaHub"],influence:5,comments:[]}],bk=[{id:"station_1",name:"Jungle Pressure Radio",description:"The heaviest breaks and the deepest basslines. Strictly for the heads.",tags:["Jungle","Bootleg","Dubwise"],imageUrl:"https://picsum.photos/id/10/600/600"},{id:"station_2",name:"Liquid Funk Flow",description:"Smooth, soulful, and atmospheric drum & bass for the late night drive.",tags:["Liquid","Liquid Funk","Atmospheric"],imageUrl:"https://picsum.photos/id/22/600/600"},{id:"station_3",name:"Sub-Tropical FM",description:"A curated selection of tracks from the artist Sub-Tropical.",tags:[],artistId:"user_1",imageUrl:"https://picsum.photos/id/1015/600/600"}],Ik=[{id:"room_global",name:"SoundWave Global Room",host:{id:"dj_gemini",name:"DJ Gemini",avatarUrl:"https://i.pravatar.cc/150?u=dj_gemini",bio:""},viewers:142,isLive:!0},{id:"room_2",name:"Dubplate Feedback Session",host:ut[1],viewers:38,isLive:!0},{id:"room_3",name:"Reggae Roots & Culture",host:ut[2],viewers:76,isLive:!0}],dA=[{id:"cp_1",title:"Late Night Rollers",curator:ut[1],tracks:[Nn[1],Nn[3],Nn[0],Nn[4]],comments:[kt[0]]},{id:"cp_2",title:"Jungle Massive Selection",curator:ut[2],tracks:[Nn[2],Nn[4],Nn[0]],comments:[kt[1]]},{id:"cp_3",title:"Atmospheric Vibes",curator:ut[0],tracks:[Nn[0],Nn[3]],comments:[]},{id:"cp_4",title:"My D&B Favorites",curator:ut[0],tracks:[Nn[0],Nn[1],Nn[4]]}],fA=[{id:"tut_1",title:"Anatomy of a Jungle Breakbeat",instructor:ut[0],thumbnailUrl:"https://picsum.photos/id/501/400/225",duration:"12:45",difficulty:"Intermediate",tags:["Breakbeats","Jungle","Drums"],comments:[kt[0]]},{id:"tut_2",title:"Crafting Deep Sub-Bass",instructor:ut[1],thumbnailUrl:"https://picsum.photos/id/502/400/225",duration:"08:15",difficulty:"Beginner",tags:["Bass","Sound Design","Mixing"],comments:[kt[1]]},{id:"tut_3",title:"Dub Siren & FX Techniques",instructor:ut[2],thumbnailUrl:"https://picsum.photos/id/503/400/225",duration:"15:30",difficulty:"Intermediate",tags:["FX","Dub","Sound Design"]},{id:"tut_4",title:"Arranging a Liquid Funk Track",instructor:ut[0],thumbnailUrl:"https://picsum.photos/id/504/400/225",duration:"22:05",difficulty:"Advanced",tags:["Arrangement","Liquid Funk","Workflow"],comments:[]}],hA=[{id:"mc_1",title:"The Art of the Rolling Bassline",instructor:ut[1],coverArtUrl:"https://picsum.photos/id/601/600/400",description:"A comprehensive 4-hour course on the theory, sound design, and mixing techniques behind hypnotic, rolling D&B basslines.",price:79.99,currency:"USD",durationHours:4,comments:[kt[0],kt[1]]},{id:"mc_2",title:"Modern Jungle Production Workflow",instructor:ut[0],coverArtUrl:"https://picsum.photos/id/602/600/400",description:"From sampling and chopping breaks to modern processing and arrangement, this 6-hour masterclass covers everything you need to know to create authentic jungle tracks with a modern edge.",price:99.99,currency:"USD",durationHours:6,comments:[]}],mA=[{id:"sp_1",title:"Sub-Tropical DnB Essentials",creator:ut[0],coverArtUrl:"https://picsum.photos/id/701/400/400",price:29.99,currency:"USD",tags:["D&B","Jungle","Atmospheric"],contains:["25 Bass Loops","50 Drum Breaks","30 Pad Samples"],comments:[kt[0]]},{id:"sp_2",title:"Re-Flex Techstep Drums",creator:ut[1],coverArtUrl:"https://picsum.photos/id/702/400/400",price:19.99,currency:"USD",tags:["Techstep","Drums","Minimal"],contains:["100 Drum One-Shots","20 Percussion Loops"],comments:[kt[1]]},{id:"sp_3",title:"Lioness Vibe Dub Vocals Vol. 1",creator:ut[2],coverArtUrl:"https://picsum.photos/id/703/400/400",price:0,currency:"USD",tags:["Vocals","Dub","Reggae"],contains:["15 Vocal Phrases","10 FX One-Shots"],comments:[]}],vt=t=>new Promise(e=>setTimeout(e,t)),Rk=async t=>(await vt(50),Nn.filter(e=>e.labelId===t)),Nk=async t=>(await vt(50),qg.filter(e=>e.authorId===t).sort((e,n)=>new Date(n.createdAt).getTime()-new Date(e.createdAt).getTime())),pA=()=>Ak,Mk=async t=>(await vt(50),Sk[t]||[]),Dk=async t=>(await vt(50),wk[t]||[]),Pk=async()=>(await vt(50),bk),gA=async()=>(await vt(50),Ik),yA=async()=>(await vt(50),dA),kk=async()=>(await vt(50),fA),Uk=async()=>(await vt(50),hA),Lk=async()=>(await vt(50),mA),Vk=async t=>{await vt(50);const e=cA.find(n=>n.id===t);return e?ut.filter(n=>e.artistIds.includes(n.id)):[]},Ok=async t=>(await vt(50),Ek[t]||[]),Fk=async t=>(await vt(50),xk),vA=async t=>{await vt(300);const e={id:`post_${Date.now()}`,...t,createdAt:new Date().toISOString(),likes:0,replyCount:0,replies:[]};return qg.unshift(e),e},bs=t=>({id:`c_${Date.now()}_${Math.random()}`,createdAt:new Date().toISOString(),...t}),Bu=async(t,e)=>{await vt(200);const n=Nn.find(o=>o.id===t);if(!n)throw new Error("Track not found");const i=bs(e);return n.comments||(n.comments=[]),n.comments.push(i),i},qk=async(t,e)=>{await vt(200);const n=qg.find(o=>o.id===t);if(!n)throw new Error("Post not found");const i=bs(e);return n.replies||(n.replies=[]),n.replies.push(i),n.replyCount=n.replies.length,i},Bk=async(t,e)=>{await vt(200);const n=hA.find(o=>o.id===t);if(!n)throw new Error("Masterclass not found");const i=bs(e);return n.comments||(n.comments=[]),n.comments.push(i),i},Gk=async(t,e)=>{await vt(200);const n=mA.find(o=>o.id===t);if(!n)throw new Error("Sample pack not found");const i=bs(e);return n.comments||(n.comments=[]),n.comments.push(i),i},Hk=async(t,e)=>{await vt(200);const n=fA.find(o=>o.id===t);if(!n)throw new Error("Tutorial not found");const i=bs(e);return n.comments||(n.comments=[]),n.comments.push(i),i},zk=async(t,e)=>{await vt(200);const n=Ck.find(o=>o.id===t);if(!n)throw new Error("Global event not found");const i=bs(e);return n.comments||(n.comments=[]),n.comments.push(i),i},jk=async(t,e)=>{await vt(200);const n=dA.find(o=>o.id===t);if(!n)throw new Error("Playlist not found");const i=bs(e);return n.comments||(n.comments=[]),n.comments.push(i),i},$k=async(t,e)=>{await vt(200);const n=cA.find(o=>o.id===t);if(!n)throw new Error("Label not found");const i=bs(e);return n.comments||(n.comments=[]),n.comments.push(i),i},Yk=async(t,e,n)=>{await vt(200);const i=uA[t];if(!i)throw new Error("Label opportunities not found");const o=i.find(u=>u.id===e);if(!o)throw new Error("Opportunity not found");const a=bs(n);return o.comments||(o.comments=[]),o.comments.push(a),a};let po;try{window.FIREBASE_CONFIG?(po=window.FIREBASE_CONFIG,console.log("Using window.FIREBASE_CONFIG")):window.parent&&window.parent!==window?(po=window.parent.FIREBASE_CONFIG||window.parent.firebaseConfig,console.log("Using parent window config")):window.firebaseConfig&&(po=window.firebaseConfig,console.log("Using window.firebaseConfig")),po||(console.warn("No Firebase config found, using demo config"),po={apiKey:"demo-api-key",authDomain:"demo-project.firebaseapp.com",projectId:"demo-project",storageBucket:"demo-project.appspot.com",messagingSenderId:"123456789",appId:"demo-app-id"})}catch(t){console.error("Error loading Firebase config:",t),po={apiKey:"demo-api-key",authDomain:"demo-project.firebaseapp.com",projectId:"demo-project",storageBucket:"demo-project.appspot.com",messagingSenderId:"123456789",appId:"demo-app-id"}}const Bg=Qx(po),Gg=qM(Bg),qi=bP(Bg),Jk=vk(Bg);if(window.location.hostname==="localhost")try{vS(Gg,"http://localhost:9099",{disableWarnings:!0}),Yw(qi,"localhost",8080),lA(Jk,"localhost",9199)}catch{console.log("Firebase emulators not available, using production")}const Kk=()=>new Promise(t=>{const e=SS(Gg,n=>{e(),t(n)})}),_A=async()=>{const t=await Kk();if(!t)throw new Error("Authentication required");return t},Is={USERS:"soundwave_users",TRACKS:"soundwave_tracks",POSTS:"soundwave_posts",COMMENTS:"soundwave_comments",LABELS:"soundwave_labels",PLAYLISTS:"soundwave_playlists",MASTERCLASSES:"soundwave_masterclasses",TUTORIALS:"soundwave_tutorials",SAMPLE_PACKS:"soundwave_sample_packs",GLOBAL_EVENTS:"soundwave_global_events"},Rs=(t,e)=>{if(console.error(`Firestore ${e} error:`,t),t instanceof ge)switch(t.code){case"permission-denied":throw new Error("You do not have permission to perform this action");case"not-found":throw new Error("The requested item was not found");case"unavailable":throw new Error("Service temporarily unavailable. Please try again.");default:throw new Error(`${e} failed: ${t.message}`)}throw new Error(`${e} failed`)},TA=async()=>{try{return(await Wa(Ka(qi,Is.USERS))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return Rs(t,"Get users"),[]}},EA=async t=>{try{const e=await iA(Ig(qi,Is.USERS,t));return e.exists()?{id:e.id,...e.data()}:void 0}catch(e){Rs(e,"Get user");return}},Wk=async t=>{try{const n=(await _A()).uid,i={...t,id:n,updatedAt:$P()};return await HP(Ig(qi,Is.USERS,n),i),i}catch(e){throw Rs(e,"Create/update user"),e}},Pf=async()=>{try{const t=Nf(Ka(qi,Is.TRACKS),Df("createdAt","desc"));return(await Wa(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return Rs(t,"Get tracks"),[]}},Qk=async t=>{try{const e=Nf(Ka(qi,Is.TRACKS),FP("artistId","==",t),Df("createdAt","desc"));return(await Wa(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return Rs(e,"Get tracks by artist"),[]}},xA=async()=>{try{const t=Nf(Ka(qi,Is.POSTS),Df("createdAt","desc"),eA(50));return(await Wa(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return Rs(t,"Get posts"),[]}},Xk=async()=>{try{return(await Wa(Ka(qi,Is.LABELS))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return Rs(t,"Get labels"),[]}},Zk=async t=>{try{const e=await iA(Ig(qi,Is.LABELS,t));return e.exists()?{id:e.id,...e.data()}:void 0}catch(e){Rs(e,"Get label");return}},eU=async()=>{try{const t=Nf(Ka(qi,Is.GLOBAL_EVENTS),Df("createdAt","desc"),eA(20));return(await Wa(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return Rs(t,"Get global events"),[]}},tU=async()=>{var t;try{const e=await _A();if(!await EA(e.uid)){const i={name:e.displayName||((t=e.email)==null?void 0:t.split("@")[0])||"SoundWave User",bio:"New to SoundWave",avatarUrl:e.photoURL||"",interview:[],gallery:[]};await Wk(i)}}catch(e){console.error("Error initializing SoundWave user:",e)}},Hg=({post:t})=>{const[e,n]=D.useState(t),[i,o]=D.useState(!1),a=f=>{const h=new Date(f),_=Math.floor((new Date().getTime()-h.getTime())/1e3);let E=_/31536e3;return E>1?Math.floor(E)+" years ago":(E=_/2592e3,E>1?Math.floor(E)+" months ago":(E=_/86400,E>1?Math.floor(E)+" days ago":(E=_/3600,E>1?Math.floor(E)+" hours ago":(E=_/60,E>1?Math.floor(E)+" minutes ago":Math.floor(_)+" seconds ago"))))},u=e.authorId.startsWith("label_")?`/labels/${e.authorId}`:`/profile/${e.authorId}`,d=async f=>{try{const h=await qk(e.id,f);n(_=>({..._,replies:[..._.replies||[],h],replyCount:(_.replies||[]).length+1}))}catch(h){console.error("Failed to add reply:",h)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl",children:[y.jsxs("div",{className:"flex items-start space-x-4",children:[y.jsx(fn,{to:u,children:y.jsx("img",{src:e.authorAvatarUrl,alt:e.authorName,className:"w-12 h-12 rounded-full object-cover"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:e.title}),y.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["Posted by ",y.jsx(fn,{to:u,className:"font-medium hover:text-white hover:underline",children:e.authorName}),y.jsx("span",{className:"mx-2",children:""}),y.jsx("span",{children:a(e.createdAt)})]}),y.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:e.content})]})]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex items-center space-x-6 text-gray-400",children:[y.jsxs("button",{className:"flex items-center space-x-2 hover:text-brand-accent transition-colors",children:[y.jsx(Te,{name:"heart",className:"w-5 h-5"}),y.jsxs("span",{children:[e.likes," Likes"]})]}),y.jsxs("button",{onClick:()=>o(!i),className:"flex items-center space-x-2 hover:text-white transition-colors",children:[y.jsx(Te,{name:"comment",className:"w-5 h-5"}),y.jsxs("span",{children:[e.replyCount," Replies"]})]})]}),i&&y.jsx("div",{className:"mt-4",children:y.jsx(Co,{comments:e.replies||[],onAddComment:d,placeholder:"Write a reply..."})})]})},SA=({onPostCreated:t})=>{const[e,n]=D.useState(!1),[i,o]=D.useState(""),[a,u]=D.useState(""),d=async f=>{if(f.preventDefault(),!i.trim()||!a.trim())return;n(!0);const h={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100"};try{const _=await vA({title:i,content:a,...h});t(_),o(""),u("")}catch(_){console.error("Failed to add post:",_)}finally{n(!1)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg h-full",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create a New Post"}),y.jsxs("form",{onSubmit:d,className:"space-y-4",children:[y.jsx("div",{children:y.jsx("input",{type:"text",placeholder:"Post Title",value:i,onChange:f=>o(f.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})}),y.jsx("div",{children:y.jsx("textarea",{placeholder:"What's on your mind?",value:a,onChange:f=>u(f.target.value),required:!0,rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})}),y.jsx("div",{className:"flex justify-end",children:y.jsx(We,{type:"submit",isLoading:e,children:"Post"})})]})]})},nU=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(""),[o,a]=D.useState([]),u=D.useRef(null),d={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};D.useEffect(()=>{TA().then(a)},[]),D.useEffect(()=>{if(o.length===0)return;const h=pA(),_=o.filter(S=>S.id!==d.id);_.length>0&&e([{id:`msg_${Date.now()-5e3}`,user:_[0],text:"Welcome to the live chat!",timestamp:new Date(Date.now()-5e3).toISOString()},{id:`msg_${Date.now()-2e3}`,user:_[1%_.length],text:"Anyone working on new tunes?",timestamp:new Date(Date.now()-2e3).toISOString()}]);const E=setInterval(()=>{const S=_[Math.floor(Math.random()*_.length)],C=h[Math.floor(Math.random()*h.length)],M={id:`msg_${Date.now()}`,user:S,text:C,timestamp:new Date().toISOString()};e(V=>[...V,M])},8e3);return()=>clearInterval(E)},[o]),D.useEffect(()=>{var h;(h=u.current)==null||h.scrollIntoView({behavior:"smooth"})},[t]);const f=h=>{if(h.preventDefault(),!n.trim())return;const _={id:`msg_${Date.now()}`,user:d,text:n,timestamp:new Date().toISOString()};e(E=>[...E,_]),i("")};return y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[500px]",children:[y.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:y.jsxs("div",{className:"space-y-4",children:[t.map(h=>y.jsxs("div",{className:`flex items-start gap-3 ${h.user.id===d.id?"flex-row-reverse":""}`,children:[y.jsx("img",{src:h.user.avatarUrl,alt:h.user.name,className:"w-10 h-10 rounded-full object-cover"}),y.jsxs("div",{className:`p-3 rounded-lg max-w-sm shadow ${h.user.id===d.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[y.jsx("p",{className:"font-bold text-sm mb-1",children:h.user.name}),y.jsx("p",{className:"text-sm",children:h.text})]})]},h.id)),y.jsx("div",{ref:u})]})}),y.jsx("div",{className:"p-4 bg-gray-700/50 border-t border-gray-700",children:y.jsxs("form",{onSubmit:f,className:"flex gap-3 items-center",children:[y.jsx("img",{src:d.avatarUrl,alt:"Your avatar",className:"w-8 h-8 rounded-full"}),y.jsx("input",{type:"text",value:n,onChange:h=>i(h.target.value),placeholder:"Join the conversation...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),y.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-2 hover:bg-brand-accent-hover disabled:bg-gray-500 transition-colors",disabled:!n.trim(),children:y.jsx(Te,{name:"send",className:"w-5 h-5"})})]})})]})},Mo=({isOpen:t,onClose:e,title:n,comments:i,onAddComment:o})=>{const a=D.useRef(null);return D.useEffect(()=>{const u=d=>{d.key==="Escape"&&e()};return t&&(document.addEventListener("keydown",u),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",u),document.body.style.overflow=""}},[t,e]),t?y.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm","aria-labelledby":"comment-modal-title",role:"dialog","aria-modal":"true",onClick:e,children:y.jsxs("div",{ref:a,className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl h-full max-h-[80vh] flex flex-col overflow-hidden",onClick:u=>u.stopPropagation(),children:[y.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-700 flex-shrink-0",children:[y.jsx("h2",{id:"comment-modal-title",className:"text-xl font-bold text-white truncate",children:n}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white p-2 rounded-full","aria-label":"Close comment modal",children:y.jsx(Te,{name:"x",className:"w-6 h-6"})})]}),y.jsx("main",{className:"flex-grow overflow-y-auto p-6",children:y.jsx(Co,{comments:i,onAddComment:o,startExpanded:!0})})]})}):null},wA=t=>{switch(t){case hs.NEW_TRACK:return"music-note";case hs.NEW_PHOTO:return"camera";case hs.IRL_EVENT:return"map-pin";default:return"chat-bubble"}},WT=({event:t,onClick:e,onMouseEnter:n,onMouseLeave:i,className:o="event-ping",isDimmed:a,isHighlighted:u,size:d=32})=>{const f=d*.6;return y.jsx("div",{className:`${o} ${a?"dimmed":""}`,style:{transform:t.transform,animationDelay:t.animationDelay,width:`${d}px`,height:`${d}px`,marginLeft:`${-d/2}px`,marginTop:`${-d/2}px`},onMouseEnter:()=>n(t),onMouseLeave:i,onClick:()=>e(t),"aria-label":`Event: ${t.title}`,children:y.jsx("div",{className:`event-ping-icon ${u?"highlight":""}`,style:{animationDelay:t.animationDelay},children:y.jsx(Te,{name:wA(t.type),className:"transition-all",style:{width:f,height:f}})})})},iU=({mode:t,setMode:e})=>{const n="flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium transition-colors",i="bg-brand-accent text-white",o="bg-gray-700 text-gray-300 hover:bg-gray-600",a=[{key:Qt.GEO,icon:"globe-alt",label:"Geo"},{key:Qt.UNIVERSE,icon:"aperture",label:"Universe"},{key:Qt.COUNTRY,icon:"map",label:"Countries"}];return y.jsx("div",{className:"flex space-x-2 p-1 bg-gray-900/50 rounded-full",children:a.map(({key:u,icon:d,label:f})=>y.jsxs("button",{onClick:()=>e(u),className:`${n} ${t===u?i:o}`,children:[y.jsx(Te,{name:d,className:"w-4 h-4"}),y.jsx("span",{children:f})]},u))})},sU=()=>{var se;const[e,n]=D.useState([]),[i,o]=D.useState(!0),[a,u]=D.useState(Qt.GEO),[d,f]=D.useState(null),[h,_]=D.useState(null),[E,S]=D.useState(null),[C,M]=D.useState(1),[V,U]=D.useState({x:-20,y:30}),[z,J]=D.useState({x:0,y:0,z:0}),[j,Y]=D.useState(!1),ie=D.useRef({x:0,y:0}),[oe,P]=D.useState(null),N=["@Artist:Sub-Tropical","@Genre:Jungle","@Genre:LiquidFunk"],[R,k]=D.useState(null);D.useEffect(()=>{eU().then(W=>{n(W),o(!1)})},[]),D.useEffect(()=>{f(null),S(null),P(null),k(null),J({x:0,y:0,z:0}),M(1)},[a]);const q=D.useMemo(()=>{if(a!==Qt.UNIVERSE)return[];const W=new Map;e.forEach(me=>{me.groups.forEach(ve=>{const be=ve.split(":")[0];W.set(be,(W.get(be)||0)+1)})});const de=Array.from(W.keys());return de.map((me,ve)=>{const be=ve/de.length*2*Math.PI,et=Math.random()*Math.PI-Math.PI/2,tt=120+Math.random()*20,mn=Math.cos(be)*Math.cos(et)*tt,xn=Math.sin(be)*Math.cos(et)*tt,pi=Math.sin(et)*tt;return{name:me,transform:`translateX(-50%) translateY(-50%) translateX(${mn}px) translateY(${pi}px) translateZ(${xn}px) rotateY(${-be}rad) rotateX(${-et}rad)`,position:{x:mn,y:pi,z:xn},influence:W.get(me)||1}})},[e,a]),B=D.useMemo(()=>{if(a!==Qt.COUNTRY)return[];const W=e.reduce((me,ve)=>(me[ve.country]=me[ve.country]||[],me[ve.country].push(ve),me),{}),de={"United Kingdom":{top:"40%",left:"45%"},Germany:{top:"42%",left:"55%"},Jamaica:{top:"70%",left:"25%"},Japan:{top:"50%",left:"85%"}};return Object.entries(W).map(([me,ve])=>({name:me,count:ve.length,events:ve,position:de[me]||{top:"50%",left:"50%"}}))},[e,a]),L=W=>{W.preventDefault();const de=.001;M(me=>Math.max(.5,Math.min(3,me-W.deltaY*de)))},je=W=>{Y(!0),ie.current={x:W.clientX,y:W.clientY}},ye=()=>Y(!1),O=W=>{if(!j)return;const de=W.clientX-ie.current.x,me=W.clientY-ie.current.y;ie.current={x:W.clientX,y:W.clientY},U(ve=>({y:ve.y+de*.2,x:Math.max(-90,Math.min(90,ve.x-me*.2))}))},te=W=>{oe===W.name?(P(null),J({x:0,y:0,z:0})):(P(W.name),J({x:-W.position.x,y:-W.position.y,z:-W.position.z}))},fe=async W=>{if(h)try{const de=await zk(h.id,W),me={...h,comments:[...h.comments||[],de]};_(me),n(ve=>ve.map(be=>be.id===me.id?me:be))}catch(de){console.error("Failed to add comment to event:",de)}},Se=Array.from({length:12}).map((W,de)=>y.jsx("div",{className:"globe-slice",style:{transform:`rotateY(${180/12*de}deg)`}},de)),ke=()=>{switch(a){case Qt.GEO:return"Global Activity";case Qt.UNIVERSE:return"Musical Universe";case Qt.COUNTRY:return"Community Hotspots";default:return"Activity Hub"}},G=()=>{switch(a){case Qt.GEO:return"Real-time user activity by location.";case Qt.UNIVERSE:return"Click a bubble to focus. Drag to orbit.";case Qt.COUNTRY:return"Scroll to zoom. Click a bubble to explore.";default:return"See what's happening now."}};return y.jsxs(y.Fragment,{children:[h&&y.jsx(Mo,{isOpen:!!h,onClose:()=>_(null),title:`Comments for ${h.title}`,comments:h.comments||[],onAddComment:fe}),y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[500px] p-4 text-center items-center justify-between relative overflow-hidden",children:[y.jsxs("div",{className:"relative z-20 flex justify-between w-full items-start",children:[y.jsxs("div",{className:"text-left",children:[y.jsx("h4",{className:"font-bold text-white text-lg",children:ke()}),y.jsx("p",{className:"text-sm text-gray-400 max-w-xs",children:G()})]}),y.jsx(iU,{mode:a,setMode:u})]}),y.jsx("div",{className:"flex-grow flex items-center justify-center w-full h-full relative",children:i?y.jsx(En,{}):y.jsxs(y.Fragment,{children:[a===Qt.GEO&&y.jsx("div",{className:"globe-container",children:y.jsxs("div",{className:"relative",children:[y.jsxs("div",{className:"globe",children:[Se,e.map(W=>y.jsx(WT,{event:W,onClick:_,onMouseEnter:f,onMouseLeave:()=>f(null)},W.id))]}),y.jsx("div",{className:"globe-shadow"})]})}),a===Qt.UNIVERSE&&y.jsx("div",{className:"universe-container",onMouseDown:je,onMouseUp:ye,onMouseLeave:ye,onMouseMove:O,onWheel:L,children:y.jsxs("div",{className:"universe-core",style:{transform:`
                                        rotateX(${V.x}deg) 
                                        rotateY(${V.y}deg) 
                                        translateX(${z.x*C}px) 
                                        translateY(${z.y*C}px) 
                                        translateZ(${z.z*C}px) 
                                        scale(${C})
                                    `},children:[q.map(W=>{const de=40+W.influence*8,me=Math.min(.1+W.influence*.05,.7);return y.jsx("div",{className:`universe-node ${oe===W.name?"focused":""} ${oe&&oe!==W.name?"dimmed":""}`,style:{transform:W.transform,fontSize:`${8+W.influence*1.5}px`,width:`${de}px`,height:`${de}px`,backgroundColor:`rgba(168, 85, 247, ${me})`},onClick:()=>te(W),children:W.name},W.name)}),e.map(W=>{const de=oe?W.groups.some(ve=>ve.startsWith(oe)):!0,me=24+W.influence*2;return y.jsx(WT,{event:W,size:me,className:"universe-event-ping",isDimmed:oe!==null&&!de,isHighlighted:de,onClick:_,onMouseEnter:f,onMouseLeave:()=>f(null)},W.id)})]})}),a===Qt.COUNTRY&&y.jsx("div",{className:"country-view-container",onWheel:L,children:y.jsxs("div",{className:"country-view-wrapper",style:{transform:`scale(${C})`},children:[B.map(W=>{const me=40+W.count*15,ve=R===W.name,be=R&&!ve;return y.jsx("div",{className:`country-bubble ${ve?"active":""} ${be?"dimmed":""}`,style:{top:W.position.top,left:W.position.left,width:`${me}px`,height:`${me}px`,fontSize:`${10+W.count}px`},onClick:()=>k(et=>et===W.name?null:W.name),onMouseEnter:()=>S(W),onMouseLeave:()=>S(null),children:W.name.split(" ").map(et=>et[0]).join("")},W.name)}),R&&((se=B.find(W=>W.name===R))==null?void 0:se.events.map((W,de,me)=>{const ve=B.find(xn=>xn.name===R),be=de/me.length*2*Math.PI,et=(40+ve.count*15)*.7,tt=`calc(${ve.position.top} + ${Math.sin(be)*et}px)`,mn=`calc(${ve.position.left} + ${Math.cos(be)*et}px)`;return y.jsx("div",{className:"local-event-ping",style:{top:tt,left:mn},onMouseEnter:()=>f(W),onMouseLeave:()=>f(null),onClick:()=>_(W),children:y.jsx(Te,{name:wA(W.type),className:"w-3 h-3 text-white"})},W.id)}))]})})]})}),y.jsxs("div",{className:"absolute bottom-4 left-4 right-4 z-10 flex items-end gap-4",children:[a===Qt.UNIVERSE&&y.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm p-3 rounded-lg flex-shrink-0",children:[y.jsx("h5",{className:"font-bold text-white text-sm mb-2 text-left",children:"My Bubbles"}),y.jsx("div",{className:"flex flex-col gap-1 items-start",children:N.map(W=>{const de=W.split(":")[0];return y.jsx("button",{onClick:()=>{const me=q.find(ve=>ve.name===de);me&&te(me)},className:`text-xs text-left transition-colors w-full px-2 py-1 rounded ${oe===de?"bg-brand-accent text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:W},W)})}),oe&&y.jsx("button",{onClick:()=>{P(null),J({x:0,y:0,z:0})},className:"text-xs text-gray-400 hover:text-white mt-2 w-full text-center",children:"Reset View"})]}),y.jsx("div",{className:"event-info-box bg-gray-900/80 backdrop-blur-sm p-4 rounded-lg transition-all duration-300 flex-grow",children:d?y.jsxs("div",{className:"opacity-100 transition-opacity duration-300 text-left",children:[y.jsx("h5",{className:"font-bold text-white",children:d.title}),y.jsx("p",{className:"text-sm text-gray-300",children:d.locationName}),y.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["By ",d.authorName]}),y.jsxs(We,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>_(d),children:[y.jsx(Te,{name:"comment",className:"w-4 h-4 mr-2"}),"View Comments"]})]}):E?y.jsxs("div",{className:"opacity-100 transition-opacity duration-300 text-left",children:[y.jsx("h5",{className:"font-bold text-white",children:E.name}),y.jsxs("p",{className:"text-sm text-gray-300",children:[E.count," active event",E.count>1?"s":""]})]}):y.jsx("div",{className:"opacity-70 transition-opacity duration-300",children:y.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Hover over an item for details."})})})]})]})]})},rU=()=>{const[t,e]=D.useState([]),[n,i]=D.useState([]),[o,a]=D.useState(!0),[u,d]=D.useState(null);D.useEffect(()=>{(async()=>{a(!0);const[E,S]=await Promise.all([Pf(),xA()]);e(E),i(S),a(!1)})()},[]);const f=_=>{i(E=>[_,...E].slice(0,2))},h=async _=>{if(u)try{const E=await Bu(u.id,_),S={...u,comments:[...u.comments||[],E]};d(S),e(C=>C.map(M=>M.id===S.id?S:M))}catch(E){console.error("Failed to add comment:",E)}};return o?y.jsx(En,{}):y.jsxs("div",{children:[u&&y.jsx(Mo,{isOpen:!!u,onClose:()=>d(null),title:`Comments for ${u.title}`,comments:u.comments||[],onAddComment:h}),y.jsxs("section",{id:"featured-tracks",children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Featured Tracks"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Discover new music from artists around the world."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:t.map(_=>y.jsx(lf,{track:_,onViewComments:d},_.id))})]}),y.jsxs("section",{id:"community-spotlight",className:"mt-16",children:[y.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Community Spotlight"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Join the conversation or start your own."}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[y.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.slice(0,2).map(_=>y.jsx(Hg,{post:_},_.id)),n.length===0&&y.jsx("p",{className:"text-gray-400",children:"No community posts yet. Be the first!"})]}),y.jsx("div",{className:"lg:col-span-1",children:y.jsx(SA,{onPostCreated:f})})]})]}),y.jsxs("section",{id:"activity-hub",className:"mt-16",children:[y.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Activity Hub"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"See what's happening in the community right now."}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Live Chat"}),y.jsx(nU,{})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Globalizer"}),y.jsx(sU,{})]})]})]})]})},oU={Spotify:{icon:"spotify",color:"text-green-500"},SoundCloud:{icon:"soundcloud",color:"text-orange-500"},YouTube:{icon:"youtube",color:"text-red-500"},Bandcamp:{icon:"bandcamp",color:"text-cyan-400"}},aU=({releases:t})=>{const e=(n,i)=>{console.log(`${n} button clicked for: ${i}`),alert(`Feature coming soon: ${n} for "${i}"`)};return y.jsx("div",{className:"space-y-4",children:t.map(n=>{const i=oU[n.platform],o=n.type==="Bootleg"?!0:!n.isPaid;return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4 transition-colors hover:bg-gray-700/50",children:[y.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 ${i.color} hover:opacity-80 transition-opacity`,children:y.jsx(Te,{name:i.icon,className:"w-10 h-10"})}),y.jsxs("div",{className:"flex-grow",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"font-bold text-white hover:underline",children:n.title}),y.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full border ${o?"bg-green-500/20 text-green-300 border-green-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`,children:o?"Free":"Paid"})]}),n.type==="Remix"&&n.sourceArtist&&y.jsxs("p",{className:"text-sm text-gray-400",children:["Remix of a track by ",y.jsx("span",{className:"font-semibold text-gray-300",children:n.sourceArtist})]})]}),y.jsx("div",{className:"w-full sm:w-auto",children:n.type==="Remix"&&n.sourceSamples&&y.jsxs("div",{className:"mb-2 sm:mb-0",children:[y.jsx("p",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Source Samples:"}),y.jsx("div",{className:"flex flex-wrap gap-1",children:n.sourceSamples.map((a,u)=>y.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:a},u))})]})}),n.type==="Remix"&&y.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 self-start sm:self-center mt-2 sm:mt-0",children:[y.jsxs("button",{onClick:()=>e("Tag Samples",n.title),className:"text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors",children:[y.jsx(Te,{name:"tag",className:"w-3 h-3"})," Tag Samples"]}),y.jsxs("button",{onClick:()=>e("Request Remix",n.title),className:"text-xs bg-purple-600/50 hover:bg-purple-600/80 text-purple-200 px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors",children:[y.jsx(Te,{name:"music-note",className:"w-3 h-3"})," Request Remix"]})]})]},n.id)})})},lU=({pack:t})=>y.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-800/80 border border-brand-accent/30 rounded-lg shadow-2xl p-6 flex flex-col h-full transform transition-transform duration-300 hover:scale-105 hover:shadow-brand-accent/20",children:[y.jsxs("div",{className:"flex-grow",children:[y.jsxs("div",{className:"mb-4",children:[y.jsx(Te,{name:"package",className:"w-10 h-10 text-brand-accent mb-2"}),y.jsx("h3",{className:"text-2xl font-bold text-white",children:t.title}),y.jsx("p",{className:"text-gray-400 mt-1",children:t.description})]}),y.jsx("ul",{className:"space-y-3 my-6",children:t.items.map((e,n)=>y.jsxs("li",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"bg-gray-700 rounded-full p-2",children:y.jsx(Te,{name:e.icon,className:"w-4 h-4 text-brand-accent-hover"})}),y.jsx("span",{className:"text-gray-300",children:e.name})]},n))})]}),y.jsxs("div",{className:"mt-6 text-center",children:[y.jsxs("p",{className:"text-4xl font-bold text-white mb-4",children:["$",t.price.toFixed(2)," ",y.jsx("span",{className:"text-lg font-normal text-gray-400",children:t.currency})]}),y.jsx(We,{className:"w-full",children:"Purchase Pack"})]})]}),uU=({collection:t})=>y.jsxs("div",{children:[y.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Your Collection (",t.length," tracks)"]}),y.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden max-h-[60vh] overflow-y-auto",children:y.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[y.jsx("thead",{className:"text-xs text-gray-300 uppercase bg-gray-700 sticky top-0 z-10",children:y.jsxs("tr",{children:[y.jsx("th",{scope:"col",className:"px-4 py-3",children:"#"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Title"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Artist"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Album"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Genre"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Key"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Time"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Plays"})]})}),y.jsx("tbody",{children:t.map((e,n)=>y.jsxs("tr",{className:"bg-gray-800 border-b border-gray-700 hover:bg-gray-700/50",children:[y.jsx("td",{className:"px-4 py-3",children:n+1}),y.jsx("th",{scope:"row",className:"px-4 py-3 font-medium text-white whitespace-nowrap",children:e.title}),y.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.artist}),y.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.album}),y.jsx("td",{className:"px-4 py-3",children:e.genre}),y.jsx("td",{className:"px-4 py-3",children:e.key}),y.jsxs("td",{className:"px-4 py-3",children:[e.totalTime,"s"]}),y.jsx("td",{className:"px-4 py-3",children:e.playCount})]},e.trackId||n))})]})})]}),cU=()=>{const{userId:t}=Px(),e=Ur(),[n,i]=D.useState(null),[o,a]=D.useState([]),[u,d]=D.useState([]),[f,h]=D.useState([]),[_,E]=D.useState(null),[S,C]=D.useState(!0),[M,V]=D.useState("tracks"),[U,z]=D.useState(!1),[J,j]=D.useState(null);D.useEffect(()=>{var N;(N=e.state)!=null&&N.collection&&(E(e.state.collection),V("collection"),window.history.replaceState({},document.title))},[e.state]),D.useEffect(()=>{(async()=>{if(!t)return;C(!0);const[R,k,q,B]=await Promise.all([EA(t),Qk(t),Mk(t),Dk(t)]);i(R||null),a(k),d(q),h(B),C(!1)})()},[t]);const Y=()=>{z(N=>!N)},ie=async N=>{if(J)try{const R=await Bu(J.id,N),k={...J,comments:[...J.comments||[],R]};j(k),a(q=>q.map(B=>B.id===k.id?k:B))}catch(R){console.error("Failed to add comment:",R)}},oe=()=>{switch(M){case"tracks":return y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map(N=>y.jsx(lf,{track:N,onViewComments:j},N.id))});case"releases":return y.jsx(aU,{releases:u});case"packs":return y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(N=>y.jsx(lU,{pack:N},N.id))});case"collection":return _?y.jsx(uU,{collection:_}):y.jsxs("div",{className:"text-center py-20 px-6 bg-gray-800 rounded-lg border-2 border-dashed border-gray-700",children:[y.jsx(Te,{name:"playlist",className:"w-16 h-16 mx-auto text-gray-500 mb-4"}),y.jsx("h3",{className:"text-2xl font-semibold text-white",children:"Your Music Collection is Empty"}),y.jsx("p",{className:"text-gray-400 mt-2 mb-6 max-w-md mx-auto",children:"Import your Rekordbox XML file to see all your tracks, organize them, and build playlists."}),y.jsx(fn,{to:"/import-collection",children:y.jsxs(We,{children:[y.jsx(Te,{name:"upload",className:"w-5 h-5 mr-2"}),"Import Your Collection"]})})]});default:return null}},P=({tab:N,label:R,count:k})=>y.jsxs("button",{onClick:()=>V(N),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors border-b-2 ${M===N?"text-white border-brand-accent bg-gray-700/50":"text-gray-400 border-transparent hover:text-white hover:border-gray-500"}`,children:[R,typeof k<"u"&&k>0&&y.jsx("span",{className:"text-xs bg-gray-600 rounded-full px-2 py-0.5 ml-1",children:k})]});return S?y.jsx(En,{}):n?y.jsxs("div",{className:"text-white",children:[J&&y.jsx(Mo,{isOpen:!!J,onClose:()=>j(null),title:`Comments for ${J.title}`,comments:J.comments||[],onAddComment:ie}),y.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 mb-8 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-8",children:[y.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-40 h-40 rounded-full object-cover border-4 border-gray-700 flex-shrink-0"}),y.jsxs("div",{className:"flex-grow w-full",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[y.jsx("h1",{className:"text-4xl font-bold",children:n.name}),y.jsx(We,{onClick:Y,variant:U?"secondary":"primary",className:"w-full sm:w-auto flex-shrink-0",children:U?"Following":"Follow"})]}),y.jsx("p",{className:"text-gray-400 mt-2 max-w-xl",children:n.bio})]})]}),y.jsx("div",{className:"border-b border-gray-700 mb-6",children:y.jsxs("nav",{className:"-mb-px flex space-x-4",children:[y.jsx(P,{tab:"tracks",label:"All Tracks",count:o.length}),y.jsx(P,{tab:"releases",label:"External Releases",count:u.length}),y.jsx(P,{tab:"packs",label:"Premium Packs",count:f.length}),y.jsx(P,{tab:"collection",label:"My Collection",count:(_==null?void 0:_.length)||0})]})}),y.jsx("div",{children:oe()})]}):y.jsx("div",{className:"text-center text-white",children:"User not found."})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dU,fU;function hU(){return{geminiUrl:dU,vertexUrl:fU}}function mU(t,e,n,i){var o,a;if(!(t!=null&&t.baseUrl)){const u=hU();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ns{}function pe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const f=t[d];if(Array.isArray(n))for(let h=0;h<f.length;h++){const _=f[h];g(_,e.slice(a+1),n[h])}else for(const h of f)g(h,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const f=t[d];g(f[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(d=>m(d,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function pU(t,e){for(const[n,i]of Object.entries(e)){const o=n.split("."),a=i.split("."),u=new Set;let d=-1;for(let f=0;f<o.length;f++)if(o[f]==="*"){d=f;break}if(d!==-1&&a.length>d)for(let f=d;f<a.length;f++){const h=a[f];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Mp(t,o,a,0,u)}}function Mp(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const f of d[u])Mp(f,e,n,i+1,o)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),f={};for(const h of d)f[h]=u[h];for(const[h,_]of Object.entries(f)){const E=[];for(const S of n.slice(i))S==="*"?E.push(h):E.push(S);g(u,E,_)}for(const h of d)delete u[h]}}else{const u=t;a in u&&Mp(u[a],e,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zg(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gU(t){const e={},n=m(t,["operationName"]);n!=null&&g(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function yU(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],_U(u)),e}function vU(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response"]);return u!=null&&g(e,["response"],TU(u)),e}function _U(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>EU(u))),g(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function TU(t){const e={},n=m(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>xU(u))),g(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function EU(t){const e={},n=m(t,["video"]);return n!=null&&g(e,["video"],IU(n)),e}function xU(t){const e={},n=m(t,["_self"]);return n!=null&&g(e,["video"],RU(n)),e}function SU(t){const e={},n=m(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function wU(t){const e={},n=m(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function AU(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response"]);return u!=null&&g(e,["response"],CU(u)),e}function CU(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&g(e,["parent"],i);const o=m(t,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function AA(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response"]);return u!=null&&g(e,["response"],bU(u)),e}function bU(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&g(e,["parent"],i);const o=m(t,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function IU(t){const e={},n=m(t,["uri"]);n!=null&&g(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],zg(i));const o=m(t,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function RU(t){const e={},n=m(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],zg(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var QT;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(QT||(QT={}));var XT;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(XT||(XT={}));var ZT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ZT||(ZT={}));var br;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(br||(br={}));var eE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eE||(eE={}));var tE;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(tE||(tE={}));var nE;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(nE||(nE={}));var iE;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(iE||(iE={}));var sE;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(sE||(sE={}));var rE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(rE||(rE={}));var oE;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(oE||(oE={}));var aE;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(aE||(aE={}));var lE;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(lE||(lE={}));var uE;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(uE||(uE={}));var cE;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(cE||(cE={}));var dE;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(dE||(dE={}));var fE;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(fE||(fE={}));var hE;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(hE||(hE={}));var tf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(tf||(tf={}));var mE;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mE||(mE={}));var pE;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(pE||(pE={}));var gE;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(gE||(gE={}));var Dp;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Dp||(Dp={}));var yE;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(yE||(yE={}));var vE;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(vE||(vE={}));var _E;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(_E||(_E={}));var TE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(TE||(TE={}));var EE;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(EE||(EE={}));var xE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(xE||(xE={}));var SE;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(SE||(SE={}));var wE;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(wE||(wE={}));var AE;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(AE||(AE={}));var CE;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(CE||(CE={}));var bE;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(bE||(bE={}));var IE;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(IE||(IE={}));var RE;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(RE||(RE={}));var NE;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(NE||(NE={}));var ME;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ME||(ME={}));var DE;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(DE||(DE={}));var PE;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(PE||(PE={}));var kE;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(kE||(kE={}));var UE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(UE||(UE={}));var LE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(LE||(LE={}));var VE;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(VE||(VE={}));var OE;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(OE||(OE={}));var FE;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(FE||(FE={}));var qE;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(qE||(qE={}));var BE;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(BE||(BE={}));var GE;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(GE||(GE={}));var HE;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(HE||(HE={}));var zE;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(zE||(zE={}));var jE;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(jE||(jE={}));var Ca;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ca||(Ca={}));class Pp{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ru{get text(){var e,n,i,o,a,u,d,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const E=[];for(const S of(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[C,M]of Object.entries(S))C!=="text"&&C!=="thought"&&(M!==null||M!==void 0)&&E.push(C);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,h+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,n,i,o,a,u,d,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const E of(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[S,C]of Object.entries(E))S!=="inlineData"&&(C!==null||C!==void 0)&&_.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,o,a,u,d,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,o,a,u,d,f,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,o,a,u,d,f,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class $E{}class YE{}class NU{}class MU{}class DU{}class PU{}class JE{}class KE{}class WE{}class kU{}class nf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new nf;let o;const a=e;return n?o=vU(a):o=yU(a),Object.assign(i,o),i}}class QE{}class XE{}class ZE{}class UU{}class LU{}class VU{}class jg{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new jg,a=AU(e);return Object.assign(i,a),i}}class OU{}class FU{}class qU{}class ex{}class BU{get text(){var e,n,i;let o="",a=!1;const u=[];for(const d of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(d))f!=="text"&&f!=="thought"&&h!==null&&u.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,n,i;let o="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(u))d!=="inlineData"&&f!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class GU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class $g{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new $g,a=AA(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function CA(t,e){const n=Qe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function bA(t){return Array.isArray(t)?t.map(e=>sf(e)):[sf(t)]}function sf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function IA(t){const e=sf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function RA(t){const e=sf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tx(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function NA(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>tx(e)):[tx(t)]}function kp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function nx(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ix(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dn(t){if(t==null)throw new Error("ContentUnion is required");return kp(t)?t:{role:"user",parts:NA(t)}}function Yg(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=dn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=dn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>dn(n)):[dn(e)]}function ti(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(nx(t)||ix(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(t)]}const e=[],n=[],i=kp(t[0]);for(const o of t){const a=kp(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(nx(o)||ix(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:NA(n)}),e}function HU(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(br).includes(n[0].toUpperCase())?n[0].toUpperCase():br.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(br).includes(i.toUpperCase())?i.toUpperCase():br.TYPE_UNSPECIFIED})}}function Ma(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&HU(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(br).includes(d.toUpperCase())?d.toUpperCase():br.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Ma(d);else if(i.includes(u)){const f=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}f.push(Ma(h))}e[u]=f}else if(o.includes(u)){const f={};for(const[h,_]of Object.entries(d))f[h]=Ma(_);e[u]=f}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Jg(t){return Ma(t)}function Kg(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Wg(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Qa(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ma(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ma(e.response));return t}function Xa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function zU(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Ms(t,e){if(typeof e!="string")throw new Error("name must be a string");return zU(t,e,"cachedContents")}function MA(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Vr(t){return zg(t)}function jU(t){return t!=null&&typeof t=="object"&&"name"in t}function $U(t){return t!=null&&typeof t=="object"&&"video"in t}function YU(t){return t!=null&&typeof t=="object"&&"uri"in t}function DA(t){var e;let n;if(jU(t)&&(n=t.name),!(YU(t)&&(n=t.uri,n===void 0))&&!($U(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function PA(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function kA(t){for(const e of["models","tunedModels","publisherModels"])if(JU(t,e))return t[e];return[]}function JU(t,e){return t!==null&&typeof t=="object"&&e in t}function KU(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function WU(t,e={}){const n=[],i=new Set;for(const o of t){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=KU(o,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function UA(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function QU(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function LA(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const f=u.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Za(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function VA(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XU(t){const e={},n=m(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>RL(u))),g(e,["inlinedResponses"],a)}const o=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function ZU(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const o=m(t,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function eL(t){const e={},n=m(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const o=m(t,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function kd(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const o=m(t,["metadata","state"]);o!=null&&g(e,["state"],VA(o));const a=m(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=m(t,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const d=m(t,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const f=m(t,["metadata","model"]);f!=null&&g(e,["model"],f);const h=m(t,["metadata","output"]);return h!=null&&g(e,["dest"],XU(LA(h))),e}function Up(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["displayName"]);i!=null&&g(e,["displayName"],i);const o=m(t,["state"]);o!=null&&g(e,["state"],VA(o));const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["createTime"]);u!=null&&g(e,["createTime"],u);const d=m(t,["startTime"]);d!=null&&g(e,["startTime"],d);const f=m(t,["endTime"]);f!=null&&g(e,["endTime"],f);const h=m(t,["updateTime"]);h!=null&&g(e,["updateTime"],h);const _=m(t,["model"]);_!=null&&g(e,["model"],_);const E=m(t,["inputConfig"]);E!=null&&g(e,["src"],tL(E));const S=m(t,["outputConfig"]);S!=null&&g(e,["dest"],ZU(LA(S)));const C=m(t,["completionStats"]);return C!=null&&g(e,["completionStats"],C),e}function tL(t){const e={},n=m(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const o=m(t,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function nL(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&g(n,["fileName"],i);const o=m(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>IL(t,u))),g(n,["requests","requests"],a)}return n}function iL(t){const e={},n=m(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const o=m(t,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function sL(t){const e={},n=m(t,["data"]);if(n!=null&&g(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function rL(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Za(t,i)),n}function oL(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Za(t,i)),n}function aL(t){const e={},n=m(t,["content"]);n!=null&&g(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],lL(i));const o=m(t,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=m(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=m(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=m(t,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const f=m(t,["index"]);f!=null&&g(e,["index"],f);const h=m(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const _=m(t,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(C=>C)),g(e,["safetyRatings"],S)}const E=m(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function lL(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function OA(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>LL(a))),g(e,["parts"],o)}const i=m(t,["role"]);return i!=null&&g(e,["role"],i),e}function uL(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function cL(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=m(t,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],eL(QU(o))),n}function sx(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["src"]);o!=null&&g(n,["batch","inputConfig"],nL(t,UA(t,o)));const a=m(e,["config"]);return a!=null&&uL(a,n),n}function dL(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["model"],Qe(t,i));const o=m(e,["src"]);o!=null&&g(n,["inputConfig"],iL(UA(t,o)));const a=m(e,["config"]);return a!=null&&cL(a,n),n}function fL(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function hL(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["src"]);o!=null&&g(n,["batch","inputConfig"],TL(t,o));const a=m(e,["config"]);return a!=null&&fL(a,n),n}function mL(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Za(t,i)),n}function pL(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Za(t,i)),n}function gL(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&g(e,["name"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);return a!=null&&g(e,["error"],a),e}function yL(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&g(e,["name"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);return a!=null&&g(e,["error"],a),e}function vL(t,e){const n={},i=m(e,["contents"]);if(i!=null){let a=Yg(t,i);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["requests[]","request","content"],a)}const o=m(e,["config"]);return o!=null&&(g(n,["_self"],_L(o,n)),pU(n,{"requests[].*":"requests[].request.*"})),n}function _L(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=m(t,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=m(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function TL(t,e){const n={},i=m(e,["fileName"]);i!=null&&g(n,["file_name"],i);const o=m(e,["inlinedRequests"]);return o!=null&&g(n,["requests"],vL(t,o)),n}function EL(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function xL(t,e,n){const i={},o=m(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],OA(dn(o)));const a=m(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=m(e,["topP"]);u!=null&&g(i,["topP"],u);const d=m(e,["topK"]);d!=null&&g(i,["topK"],d);const f=m(e,["candidateCount"]);f!=null&&g(i,["candidateCount"],f);const h=m(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const _=m(e,["stopSequences"]);_!=null&&g(i,["stopSequences"],_);const E=m(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=m(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const C=m(e,["presencePenalty"]);C!=null&&g(i,["presencePenalty"],C);const M=m(e,["frequencyPenalty"]);M!=null&&g(i,["frequencyPenalty"],M);const V=m(e,["seed"]);V!=null&&g(i,["seed"],V);const U=m(e,["responseMimeType"]);U!=null&&g(i,["responseMimeType"],U);const z=m(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],Jg(z));const J=m(e,["responseJsonSchema"]);if(J!=null&&g(i,["responseJsonSchema"],J),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=m(e,["safetySettings"]);if(n!==void 0&&j!=null){let B=j;Array.isArray(B)&&(B=B.map(L=>VL(L))),g(n,["safetySettings"],B)}const Y=m(e,["tools"]);if(n!==void 0&&Y!=null){let B=Xa(Y);Array.isArray(B)&&(B=B.map(L=>OL(Qa(L)))),g(n,["tools"],B)}const ie=m(e,["toolConfig"]);if(n!==void 0&&ie!=null&&g(n,["toolConfig"],ie),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=m(e,["cachedContent"]);n!==void 0&&oe!=null&&g(n,["cachedContent"],Ms(t,oe));const P=m(e,["responseModalities"]);P!=null&&g(i,["responseModalities"],P);const N=m(e,["mediaResolution"]);N!=null&&g(i,["mediaResolution"],N);const R=m(e,["speechConfig"]);if(R!=null&&g(i,["speechConfig"],Kg(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=m(e,["thinkingConfig"]);k!=null&&g(i,["thinkingConfig"],k);const q=m(e,["imageConfig"]);return q!=null&&g(i,["imageConfig"],q),i}function SL(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>aL(h))),g(e,["candidates"],f)}const o=m(t,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=m(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=m(t,["responseId"]);u!=null&&g(e,["responseId"],u);const d=m(t,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function wL(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Za(t,i)),n}function AL(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Za(t,i)),n}function CL(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function bL(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function IL(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["request","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let d=ti(o);Array.isArray(d)&&(d=d.map(f=>OA(f))),g(n,["request","contents"],d)}const a=m(e,["metadata"]);a!=null&&g(n,["metadata"],a);const u=m(e,["config"]);return u!=null&&g(n,["request","generationConfig"],xL(t,u,m(n,["request"],{}))),n}function RL(t){const e={},n=m(t,["response"]);n!=null&&g(e,["response"],SL(n));const i=m(t,["error"]);return i!=null&&g(e,["error"],i),e}function NL(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ML(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const a=m(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function DL(t){const e={},n=m(t,["config"]);return n!=null&&NL(n,e),e}function PL(t){const e={},n=m(t,["config"]);return n!=null&&ML(n,e),e}function kL(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>kd(u))),g(e,["batchJobs"],a)}return e}function UL(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Up(u))),g(e,["batchJobs"],a)}return e}function LL(t){const e={},n=m(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=m(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=m(t,["fileData"]);a!=null&&g(e,["fileData"],EL(a));const u=m(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&g(e,["inlineData"],sL(d));const f=m(t,["text"]);f!=null&&g(e,["text"],f);const h=m(t,["thought"]);h!=null&&g(e,["thought"],h);const _=m(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=m(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function VL(t){const e={},n=m(t,["category"]);if(n!=null&&g(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function OL(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["functionDeclarations"],_)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=m(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=m(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=m(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],CL(d));const f=m(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],bL(f));const h=m(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Cs||(Cs={}));class Do{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FL extends Ns{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Do(Cs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=sx(this.apiClient,e),i=n._url,o=pe("{model}:batchGenerateContent",i),d=n.batch.inputConfig.requests,f=d.requests,h=[];for(const _ of f){const E=Object.assign({},_);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const C=E.request;C.systemInstruction=S,E.request=C}h.push(E)}return d.requests=h,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=dL(this.apiClient,e);return d=pe("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Up(_))}else{const h=sx(this.apiClient,e);return d=pe("{model}:batchGenerateContent",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>kd(_))}}async createEmbeddingsInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=hL(this.apiClient,e);return a=pe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>kd(f))}}async get(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=AL(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Up(_))}else{const h=wL(this.apiClient,e);return d=pe("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>kd(_))}}async cancel(e){var n,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const f=oL(this.apiClient,e);u=pe("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=rL(this.apiClient,e);u=pe("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=PL(e);return d=pe("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=UL(_),S=new ex;return Object.assign(S,E),S})}else{const h=DL(e);return d=pe("batches",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=kL(_),S=new ex;return Object.assign(S,E),S})}}async delete(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=pL(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>yL(_))}else{const h=mL(this.apiClient,e);return d=pe("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>gL(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qL(t){const e={},n=m(t,["data"]);if(n!=null&&g(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function rx(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>aV(a))),g(e,["parts"],o)}const i=m(t,["role"]);return i!=null&&g(e,["role"],i),e}function BL(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=m(t,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=m(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=m(t,["contents"]);if(e!==void 0&&u!=null){let _=ti(u);Array.isArray(_)&&(_=_.map(E=>rx(E))),g(e,["contents"],_)}const d=m(t,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],rx(dn(d)));const f=m(t,["tools"]);if(e!==void 0&&f!=null){let _=f;Array.isArray(_)&&(_=_.map(E=>lV(E))),g(e,["tools"],_)}const h=m(t,["toolConfig"]);if(e!==void 0&&h!=null&&g(e,["toolConfig"],h),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function GL(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=m(t,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=m(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=m(t,["contents"]);if(e!==void 0&&u!=null){let E=ti(u);Array.isArray(E)&&(E=E.map(S=>S)),g(e,["contents"],E)}const d=m(t,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],dn(d));const f=m(t,["tools"]);if(e!==void 0&&f!=null){let E=f;Array.isArray(E)&&(E=E.map(S=>uV(S))),g(e,["tools"],E)}const h=m(t,["toolConfig"]);e!==void 0&&h!=null&&g(e,["toolConfig"],h);const _=m(t,["kmsKeyName"]);return e!==void 0&&_!=null&&g(e,["encryption_spec","kmsKeyName"],_),n}function HL(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["model"],CA(t,i));const o=m(e,["config"]);return o!=null&&BL(o,n),n}function zL(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["model"],CA(t,i));const o=m(e,["config"]);return o!=null&&GL(o,n),n}function jL(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Ms(t,i)),n}function $L(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Ms(t,i)),n}function YL(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function JL(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function KL(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function WL(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&g(e,["description"],n);const i=m(t,["name"]);i!=null&&g(e,["name"],i);const o=m(t,["parameters"]);o!=null&&g(e,["parameters"],o);const a=m(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=m(t,["response"]);u!=null&&g(e,["response"],u);const d=m(t,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function QL(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Ms(t,i)),n}function XL(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Ms(t,i)),n}function ZL(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function eV(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function tV(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function nV(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function iV(t){const e={},n=m(t,["config"]);return n!=null&&tV(n,e),e}function sV(t){const e={},n=m(t,["config"]);return n!=null&&nV(n,e),e}function rV(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function oV(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function aV(t){const e={},n=m(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=m(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=m(t,["fileData"]);a!=null&&g(e,["fileData"],KL(a));const u=m(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&g(e,["inlineData"],qL(d));const f=m(t,["text"]);f!=null&&g(e,["text"],f);const h=m(t,["thought"]);h!=null&&g(e,["thought"],h);const _=m(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=m(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function lV(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["functionDeclarations"],_)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=m(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=m(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=m(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],ZL(d));const f=m(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],eV(f));const h=m(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function uV(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>WL(S))),g(e,["functionDeclarations"],E)}const i=m(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=m(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=m(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=m(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=m(t,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=m(t,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const h=m(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const _=m(t,["urlContext"]);return _!=null&&g(e,["urlContext"],_),e}function cV(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=m(t,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),n}function dV(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=m(t,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),n}function fV(t,e){const n={},i=m(e,["name"]);i!=null&&g(n,["_url","name"],Ms(t,i));const o=m(e,["config"]);return o!=null&&cV(o,n),n}function hV(t,e){const n={},i=m(e,["name"]);i!=null&&g(n,["_url","name"],Ms(t,i));const o=m(e,["config"]);return o!=null&&dV(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mV extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Do(Cs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=zL(this.apiClient,e);return d=pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=HL(this.apiClient,e);return d=pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=XL(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=QL(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=$L(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=JL(_),S=new XE;return Object.assign(S,E),S})}else{const h=jL(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=YL(_),S=new XE;return Object.assign(S,E),S})}}async update(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=hV(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=fV(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=sV(e);return d=pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=oV(_),S=new ZE;return Object.assign(S,E),S})}else{const h=iV(e);return d=pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=rV(_),S=new ZE;return Object.assign(S,E),S})}}}function ox(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ht(t){return this instanceof ht?(this.v=t,this):new ht(t)}function Da(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(C){return function(M){return Promise.resolve(M).then(C,E)}}function d(C,M){i[C]&&(o[C]=function(V){return new Promise(function(U,z){a.push([C,V,U,z])>1||f(C,V)})},M&&(o[C]=M(o[C])))}function f(C,M){try{h(i[C](M))}catch(V){S(a[0][3],V)}}function h(C){C.value instanceof ht?Promise.resolve(C.value.v).then(_,E):S(a[0][2],C)}function _(C){f("next",C)}function E(C){f("throw",C)}function S(C,M){C(M),a.shift(),a.length&&f(a[0][0],a[0][1])}}function pu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ox=="function"?ox(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(d,f){u=t[a](u),o(d,f,u.done,u.value)})}}function o(a,u,d,f){Promise.resolve(f).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pV(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:FA(n)}function FA(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function gV(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ax(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let a=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),a&&!FA(t[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class yV{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new vV(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vV{constructor(e,n,i,o={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),gV(a)}async sendMessage(e){var n;await this.sendPromise;const i=dn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,d;const f=await o,h=(u=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=f.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];_!=null&&(S=(d=_.slice(E))!==null&&d!==void 0?d:[]);const C=h?[h]:[];this.recordHistory(i,C,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=dn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?ax(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return Da(this,arguments,function*(){var u,d,f,h;const _=[];try{for(var E=!0,S=pu(e),C;C=yield ht(S.next()),u=C.done,!u;E=!0){h=C.value,E=!1;const M=h;if(pV(M)){const V=(o=(i=M.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;V!==void 0&&_.push(V)}yield yield ht(M)}}catch(M){d={error:M}}finally{try{!E&&!u&&(f=S.return)&&(yield ht(f.call(S)))}finally{if(d)throw d.error}}this.recordHistory(n,_)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(a=>a.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...ax(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,kf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _V(t){const e={},n=m(t,["file"]);return n!=null&&g(e,["file"],n),e}function TV(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function EV(t){const e={},n=m(t,["name"]);return n!=null&&g(e,["_url","file"],DA(n)),e}function xV(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function SV(t){const e={},n=m(t,["name"]);return n!=null&&g(e,["_url","file"],DA(n)),e}function wV(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function AV(t){const e={},n=m(t,["config"]);return n!=null&&wV(n,e),e}function CV(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bV extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Do(Cs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=AV(e);return a=pe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>{const h=CV(f),_=new OU;return Object.assign(_,h),_})}}async createInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_V(e);return a=pe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=TV(f),_=new FU;return Object.assign(_,h),_})}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=SV(e);return a=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=EV(e);return a=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>{const h=xV(f),_=new qU;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ud(t){const e={},n=m(t,["data"]);if(n!=null&&g(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function IV(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>HV(a))),g(e,["parts"],o)}const i=m(t,["role"]);return i!=null&&g(e,["role"],i),e}function RV(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function NV(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&g(e,["description"],n);const i=m(t,["name"]);i!=null&&g(e,["name"],i);const o=m(t,["parameters"]);o!=null&&g(e,["parameters"],o);const a=m(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=m(t,["response"]);u!=null&&g(e,["response"],u);const d=m(t,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function MV(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=m(t,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=m(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=m(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=m(t,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const f=m(t,["logprobs"]);f!=null&&g(e,["logprobs"],f);const h=m(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const _=m(t,["mediaResolution"]);_!=null&&g(e,["mediaResolution"],_);const E=m(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const S=m(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const C=m(t,["responseMimeType"]);C!=null&&g(e,["responseMimeType"],C);const M=m(t,["responseModalities"]);M!=null&&g(e,["responseModalities"],M);const V=m(t,["responseSchema"]);V!=null&&g(e,["responseSchema"],V);const U=m(t,["routingConfig"]);U!=null&&g(e,["routingConfig"],U);const z=m(t,["seed"]);z!=null&&g(e,["seed"],z);const J=m(t,["speechConfig"]);J!=null&&g(e,["speechConfig"],qA(J));const j=m(t,["stopSequences"]);j!=null&&g(e,["stopSequences"],j);const Y=m(t,["temperature"]);Y!=null&&g(e,["temperature"],Y);const ie=m(t,["thinkingConfig"]);ie!=null&&g(e,["thinkingConfig"],ie);const oe=m(t,["topK"]);oe!=null&&g(e,["topK"],oe);const P=m(t,["topP"]);if(P!=null&&g(e,["topP"],P),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function DV(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function PV(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function kV(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=m(t,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=m(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=m(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=m(t,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const h=m(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const _=m(t,["seed"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","seed"],_);const E=m(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Wg(E));const S=m(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const C=m(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=m(t,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],IV(dn(M)));const V=m(t,["tools"]);if(e!==void 0&&V!=null){let oe=Xa(V);Array.isArray(oe)&&(oe=oe.map(P=>jV(Qa(P)))),g(e,["setup","tools"],oe)}const U=m(t,["sessionResumption"]);e!==void 0&&U!=null&&g(e,["setup","sessionResumption"],zV(U));const z=m(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const J=m(t,["outputAudioTranscription"]);e!==void 0&&J!=null&&g(e,["setup","outputAudioTranscription"],J);const j=m(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&g(e,["setup","realtimeInputConfig"],j);const Y=m(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ie=m(t,["proactivity"]);return e!==void 0&&ie!=null&&g(e,["setup","proactivity"],ie),n}function UV(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],MV(i));const o=m(t,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=m(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=m(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=m(t,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const h=m(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const _=m(t,["seed"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","seed"],_);const E=m(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],qA(Wg(E)));const S=m(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const C=m(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=m(t,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],dn(M));const V=m(t,["tools"]);if(e!==void 0&&V!=null){let oe=Xa(V);Array.isArray(oe)&&(oe=oe.map(P=>$V(Qa(P)))),g(e,["setup","tools"],oe)}const U=m(t,["sessionResumption"]);e!==void 0&&U!=null&&g(e,["setup","sessionResumption"],U);const z=m(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const J=m(t,["outputAudioTranscription"]);e!==void 0&&J!=null&&g(e,["setup","outputAudioTranscription"],J);const j=m(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&g(e,["setup","realtimeInputConfig"],j);const Y=m(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ie=m(t,["proactivity"]);return e!==void 0&&ie!=null&&g(e,["setup","proactivity"],ie),n}function LV(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["setup","model"],Qe(t,i));const o=m(e,["config"]);return o!=null&&g(n,["config"],kV(o,n)),n}function VV(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["setup","model"],Qe(t,i));const o=m(e,["config"]);return o!=null&&g(n,["config"],UV(o,n)),n}function OV(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function FV(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["weightedPrompts"],i)}return e}function qV(t){const e={},n=m(t,["media"]);if(n!=null){let h=bA(n);Array.isArray(h)&&(h=h.map(_=>Ud(_))),g(e,["mediaChunks"],h)}const i=m(t,["audio"]);i!=null&&g(e,["audio"],Ud(RA(i)));const o=m(t,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=m(t,["video"]);a!=null&&g(e,["video"],Ud(IA(a)));const u=m(t,["text"]);u!=null&&g(e,["text"],u);const d=m(t,["activityStart"]);d!=null&&g(e,["activityStart"],d);const f=m(t,["activityEnd"]);return f!=null&&g(e,["activityEnd"],f),e}function BV(t){const e={},n=m(t,["media"]);if(n!=null){let h=bA(n);Array.isArray(h)&&(h=h.map(_=>_)),g(e,["mediaChunks"],h)}const i=m(t,["audio"]);i!=null&&g(e,["audio"],RA(i));const o=m(t,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=m(t,["video"]);a!=null&&g(e,["video"],IA(a));const u=m(t,["text"]);u!=null&&g(e,["text"],u);const d=m(t,["activityStart"]);d!=null&&g(e,["activityStart"],d);const f=m(t,["activityEnd"]);return f!=null&&g(e,["activityEnd"],f),e}function GV(t){const e={},n=m(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&g(e,["serverContent"],i);const o=m(t,["toolCall"]);o!=null&&g(e,["toolCall"],o);const a=m(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=m(t,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],YV(u));const d=m(t,["goAway"]);d!=null&&g(e,["goAway"],d);const f=m(t,["sessionResumptionUpdate"]);return f!=null&&g(e,["sessionResumptionUpdate"],f),e}function HV(t){const e={},n=m(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=m(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=m(t,["fileData"]);a!=null&&g(e,["fileData"],RV(a));const u=m(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&g(e,["inlineData"],Ud(d));const f=m(t,["text"]);f!=null&&g(e,["text"],f);const h=m(t,["thought"]);h!=null&&g(e,["thought"],h);const _=m(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=m(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function zV(t){const e={},n=m(t,["handle"]);if(n!=null&&g(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qA(t){const e={},n=m(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function jV(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["functionDeclarations"],_)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=m(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=m(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=m(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],DV(d));const f=m(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],PV(f));const h=m(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function $V(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>NV(S))),g(e,["functionDeclarations"],E)}const i=m(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=m(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=m(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=m(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=m(t,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=m(t,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const h=m(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const _=m(t,["urlContext"]);return _!=null&&g(e,["urlContext"],_),e}function YV(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const o=m(t,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const a=m(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=m(t,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const d=m(t,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const f=m(t,["promptTokensDetails"]);if(f!=null){let C=f;Array.isArray(C)&&(C=C.map(M=>M)),g(e,["promptTokensDetails"],C)}const h=m(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(M=>M)),g(e,["cacheTokensDetails"],C)}const _=m(t,["candidatesTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(M=>M)),g(e,["responseTokensDetails"],C)}const E=m(t,["toolUsePromptTokensDetails"]);if(E!=null){let C=E;Array.isArray(C)&&(C=C.map(M=>M)),g(e,["toolUsePromptTokensDetails"],C)}const S=m(t,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JV(t){const e={},n=m(t,["data"]);if(n!=null&&g(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function KV(t){const e={},n=m(t,["content"]);n!=null&&g(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],WV(i));const o=m(t,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=m(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=m(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=m(t,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const f=m(t,["index"]);f!=null&&g(e,["index"],f);const h=m(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const _=m(t,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(C=>C)),g(e,["safetyRatings"],S)}const E=m(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function WV(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function QV(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let a=ti(o);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["contents"],a)}return n}function XV(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["tokensInfo"],o)}return e}function ZV(t){const e={},n=m(t,["values"]);n!=null&&g(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&g(e,["statistics"],e4(i)),e}function e4(t){const e={},n=m(t,["truncated"]);n!=null&&g(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function Uf(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>r3(a))),g(e,["parts"],o)}const i=m(t,["role"]);return i!=null&&g(e,["role"],i),e}function t4(t){const e={},n=m(t,["controlType"]);n!=null&&g(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function n4(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function i4(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],dn(i));const o=m(t,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>jA(d))),g(e,["tools"],u)}const a=m(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],$4(a)),n}function s4(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>Uf(d))),g(n,["contents"],u)}const a=m(e,["config"]);return a!=null&&n4(a),n}function r4(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>d)),g(n,["contents"],u)}const a=m(e,["config"]);return a!=null&&i4(a,n),n}function o4(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const o=m(t,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function a4(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function l4(t,e){const n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Qe(t,i)),n}function u4(t,e){const n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Qe(t,i)),n}function c4(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function d4(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function f4(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=m(t,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=m(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=m(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=m(t,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const f=m(t,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const h=m(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const _=m(t,["personGeneration"]);e!==void 0&&_!=null&&g(e,["parameters","personGeneration"],_);const E=m(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=m(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const C=m(t,["language"]);e!==void 0&&C!=null&&g(e,["parameters","language"],C);const M=m(t,["outputMimeType"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","mimeType"],M);const V=m(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","compressionQuality"],V);const U=m(t,["addWatermark"]);e!==void 0&&U!=null&&g(e,["parameters","addWatermark"],U);const z=m(t,["labels"]);e!==void 0&&z!=null&&g(e,["labels"],z);const J=m(t,["editMode"]);e!==void 0&&J!=null&&g(e,["parameters","editMode"],J);const j=m(t,["baseSteps"]);return e!==void 0&&j!=null&&g(e,["parameters","editConfig","baseSteps"],j),n}function h4(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=m(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>d3(f))),g(n,["instances[0]","referenceImages"],d)}const u=m(e,["config"]);return u!=null&&f4(u,n),n}function m4(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Lf(a))),g(e,["generatedImages"],o)}return e}function p4(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=m(t,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=m(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function g4(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const o=m(t,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const a=m(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=m(t,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const d=m(t,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),n}function y4(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let d=Yg(t,o);Array.isArray(d)&&(d=d.map(f=>f)),g(n,["requests[]","content"],d)}const a=m(e,["config"]);a!=null&&p4(a,n);const u=m(e,["model"]);return u!==void 0&&g(n,["requests[]","model"],Qe(t,u)),n}function v4(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let u=Yg(t,o);Array.isArray(u)&&(u=u.map(d=>d)),g(n,["instances[]","content"],u)}const a=m(e,["config"]);return a!=null&&g4(a,n),n}function _4(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const o=m(t,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function T4(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>ZV(u))),g(e,["embeddings"],a)}const o=m(t,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function E4(t){const e={},n=m(t,["endpoint"]);n!=null&&g(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function x4(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function S4(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&g(e,["description"],n);const i=m(t,["name"]);i!=null&&g(e,["name"],i);const o=m(t,["parameters"]);o!=null&&g(e,["parameters"],o);const a=m(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=m(t,["response"]);u!=null&&g(e,["response"],u);const d=m(t,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function w4(t,e,n){const i={},o=m(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],Uf(dn(o)));const a=m(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=m(e,["topP"]);u!=null&&g(i,["topP"],u);const d=m(e,["topK"]);d!=null&&g(i,["topK"],d);const f=m(e,["candidateCount"]);f!=null&&g(i,["candidateCount"],f);const h=m(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const _=m(e,["stopSequences"]);_!=null&&g(i,["stopSequences"],_);const E=m(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=m(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const C=m(e,["presencePenalty"]);C!=null&&g(i,["presencePenalty"],C);const M=m(e,["frequencyPenalty"]);M!=null&&g(i,["frequencyPenalty"],M);const V=m(e,["seed"]);V!=null&&g(i,["seed"],V);const U=m(e,["responseMimeType"]);U!=null&&g(i,["responseMimeType"],U);const z=m(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],Jg(z));const J=m(e,["responseJsonSchema"]);if(J!=null&&g(i,["responseJsonSchema"],J),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=m(e,["safetySettings"]);if(n!==void 0&&j!=null){let B=j;Array.isArray(B)&&(B=B.map(L=>f3(L))),g(n,["safetySettings"],B)}const Y=m(e,["tools"]);if(n!==void 0&&Y!=null){let B=Xa(Y);Array.isArray(B)&&(B=B.map(L=>v3(Qa(L)))),g(n,["tools"],B)}const ie=m(e,["toolConfig"]);if(n!==void 0&&ie!=null&&g(n,["toolConfig"],ie),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=m(e,["cachedContent"]);n!==void 0&&oe!=null&&g(n,["cachedContent"],Ms(t,oe));const P=m(e,["responseModalities"]);P!=null&&g(i,["responseModalities"],P);const N=m(e,["mediaResolution"]);N!=null&&g(i,["mediaResolution"],N);const R=m(e,["speechConfig"]);if(R!=null&&g(i,["speechConfig"],Kg(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=m(e,["thinkingConfig"]);k!=null&&g(i,["thinkingConfig"],k);const q=m(e,["imageConfig"]);return q!=null&&g(i,["imageConfig"],q),i}function A4(t,e,n){const i={},o=m(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],dn(o));const a=m(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=m(e,["topP"]);u!=null&&g(i,["topP"],u);const d=m(e,["topK"]);d!=null&&g(i,["topK"],d);const f=m(e,["candidateCount"]);f!=null&&g(i,["candidateCount"],f);const h=m(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const _=m(e,["stopSequences"]);_!=null&&g(i,["stopSequences"],_);const E=m(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=m(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const C=m(e,["presencePenalty"]);C!=null&&g(i,["presencePenalty"],C);const M=m(e,["frequencyPenalty"]);M!=null&&g(i,["frequencyPenalty"],M);const V=m(e,["seed"]);V!=null&&g(i,["seed"],V);const U=m(e,["responseMimeType"]);U!=null&&g(i,["responseMimeType"],U);const z=m(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],Jg(z));const J=m(e,["responseJsonSchema"]);J!=null&&g(i,["responseJsonSchema"],J);const j=m(e,["routingConfig"]);j!=null&&g(i,["routingConfig"],j);const Y=m(e,["modelSelectionConfig"]);Y!=null&&g(i,["modelConfig"],Y);const ie=m(e,["safetySettings"]);if(n!==void 0&&ie!=null){let O=ie;Array.isArray(O)&&(O=O.map(te=>te)),g(n,["safetySettings"],O)}const oe=m(e,["tools"]);if(n!==void 0&&oe!=null){let O=Xa(oe);Array.isArray(O)&&(O=O.map(te=>jA(Qa(te)))),g(n,["tools"],O)}const P=m(e,["toolConfig"]);n!==void 0&&P!=null&&g(n,["toolConfig"],P);const N=m(e,["labels"]);n!==void 0&&N!=null&&g(n,["labels"],N);const R=m(e,["cachedContent"]);n!==void 0&&R!=null&&g(n,["cachedContent"],Ms(t,R));const k=m(e,["responseModalities"]);k!=null&&g(i,["responseModalities"],k);const q=m(e,["mediaResolution"]);q!=null&&g(i,["mediaResolution"],q);const B=m(e,["speechConfig"]);B!=null&&g(i,["speechConfig"],zA(Kg(B)));const L=m(e,["audioTimestamp"]);L!=null&&g(i,["audioTimestamp"],L);const je=m(e,["thinkingConfig"]);je!=null&&g(i,["thinkingConfig"],je);const ye=m(e,["imageConfig"]);return ye!=null&&g(i,["imageConfig"],ye),i}function lx(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>Uf(d))),g(n,["contents"],u)}const a=m(e,["config"]);return a!=null&&g(n,["generationConfig"],w4(t,a,n)),n}function ux(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>d)),g(n,["contents"],u)}const a=m(e,["config"]);return a!=null&&g(n,["generationConfig"],A4(t,a,n)),n}function cx(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>KV(h))),g(e,["candidates"],f)}const o=m(t,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=m(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=m(t,["responseId"]);u!=null&&g(e,["responseId"],u);const d=m(t,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function dx(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),g(e,["candidates"],h)}const o=m(t,["createTime"]);o!=null&&g(e,["createTime"],o);const a=m(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=m(t,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const d=m(t,["responseId"]);d!=null&&g(e,["responseId"],d);const f=m(t,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function C4(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const a=m(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=m(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const f=m(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&g(e,["parameters","includeSafetyAttributes"],f);const h=m(t,["includeRaiReason"]);e!==void 0&&h!=null&&g(e,["parameters","includeRaiReason"],h);const _=m(t,["language"]);e!==void 0&&_!=null&&g(e,["parameters","language"],_);const E=m(t,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const S=m(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=m(t,["imageSize"]);if(e!==void 0&&C!=null&&g(e,["parameters","sampleImageSize"],C),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function b4(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=m(t,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=m(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=m(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=m(t,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const f=m(t,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const h=m(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const _=m(t,["personGeneration"]);e!==void 0&&_!=null&&g(e,["parameters","personGeneration"],_);const E=m(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=m(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const C=m(t,["language"]);e!==void 0&&C!=null&&g(e,["parameters","language"],C);const M=m(t,["outputMimeType"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","mimeType"],M);const V=m(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","compressionQuality"],V);const U=m(t,["addWatermark"]);e!==void 0&&U!=null&&g(e,["parameters","addWatermark"],U);const z=m(t,["labels"]);e!==void 0&&z!=null&&g(e,["labels"],z);const J=m(t,["imageSize"]);e!==void 0&&J!=null&&g(e,["parameters","sampleImageSize"],J);const j=m(t,["enhancePrompt"]);return e!==void 0&&j!=null&&g(e,["parameters","enhancePrompt"],j),n}function I4(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=m(e,["config"]);return a!=null&&C4(a,n),n}function R4(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=m(e,["config"]);return a!=null&&b4(a,n),n}function N4(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>G4(u))),g(e,["generatedImages"],a)}const o=m(t,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],GA(o)),e}function M4(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Lf(u))),g(e,["generatedImages"],a)}const o=m(t,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],HA(o)),e}function D4(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=m(t,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=m(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=m(t,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const d=m(t,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=m(t,["negativePrompt"]);e!==void 0&&f!=null&&g(e,["parameters","negativePrompt"],f);const h=m(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=m(t,["lastFrame"]);e!==void 0&&_!=null&&g(e,["instances[0]","lastFrame"],Vf(_));const E=m(t,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(C=>M3(C))),g(e,["instances[0]","referenceImages"],S)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function P4(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const a=m(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=m(t,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const d=m(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const f=m(t,["aspectRatio"]);e!==void 0&&f!=null&&g(e,["parameters","aspectRatio"],f);const h=m(t,["resolution"]);e!==void 0&&h!=null&&g(e,["parameters","resolution"],h);const _=m(t,["personGeneration"]);e!==void 0&&_!=null&&g(e,["parameters","personGeneration"],_);const E=m(t,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const S=m(t,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const C=m(t,["enhancePrompt"]);e!==void 0&&C!=null&&g(e,["parameters","enhancePrompt"],C);const M=m(t,["generateAudio"]);e!==void 0&&M!=null&&g(e,["parameters","generateAudio"],M);const V=m(t,["lastFrame"]);e!==void 0&&V!=null&&g(e,["instances[0]","lastFrame"],mi(V));const U=m(t,["referenceImages"]);if(e!==void 0&&U!=null){let j=U;Array.isArray(j)&&(j=j.map(Y=>D3(Y))),g(e,["instances[0]","referenceImages"],j)}const z=m(t,["mask"]);e!==void 0&&z!=null&&g(e,["instances[0]","mask"],N3(z));const J=m(t,["compressionQuality"]);return e!==void 0&&J!=null&&g(e,["parameters","compressionQuality"],J),n}function k4(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],O4(u)),e}function U4(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response"]);return u!=null&&g(e,["response"],F4(u)),e}function L4(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=m(e,["image"]);a!=null&&g(n,["instances[0]","image"],Vf(a));const u=m(e,["video"]);u!=null&&g(n,["instances[0]","video"],$A(u));const d=m(e,["source"]);d!=null&&q4(d,n);const f=m(e,["config"]);return f!=null&&D4(f,n),n}function V4(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=m(e,["image"]);a!=null&&g(n,["instances[0]","image"],mi(a));const u=m(e,["video"]);u!=null&&g(n,["instances[0]","video"],YA(u));const d=m(e,["source"]);d!=null&&B4(d,n);const f=m(e,["config"]);return f!=null&&P4(f,n),n}function O4(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>z4(u))),g(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function F4(t){const e={},n=m(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>j4(u))),g(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function q4(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=m(t,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Vf(o));const a=m(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],$A(a)),n}function B4(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=m(t,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],mi(o));const a=m(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],YA(a)),n}function G4(t){const e={},n=m(t,["_self"]);n!=null&&g(e,["image"],Q4(n));const i=m(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=m(t,["_self"]);return o!=null&&g(e,["safetyAttributes"],GA(o)),e}function Lf(t){const e={},n=m(t,["_self"]);n!=null&&g(e,["image"],BA(n));const i=m(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=m(t,["_self"]);o!=null&&g(e,["safetyAttributes"],HA(o));const a=m(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function H4(t){const e={},n=m(t,["_self"]);n!=null&&g(e,["mask"],BA(n));const i=m(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["labels"],o)}return e}function z4(t){const e={},n=m(t,["video"]);return n!=null&&g(e,["video"],I3(n)),e}function j4(t){const e={},n=m(t,["_self"]);return n!=null&&g(e,["video"],R3(n)),e}function $4(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=m(t,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=m(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=m(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=m(t,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const f=m(t,["logprobs"]);f!=null&&g(e,["logprobs"],f);const h=m(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const _=m(t,["mediaResolution"]);_!=null&&g(e,["mediaResolution"],_);const E=m(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const S=m(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const C=m(t,["responseMimeType"]);C!=null&&g(e,["responseMimeType"],C);const M=m(t,["responseModalities"]);M!=null&&g(e,["responseModalities"],M);const V=m(t,["responseSchema"]);V!=null&&g(e,["responseSchema"],V);const U=m(t,["routingConfig"]);U!=null&&g(e,["routingConfig"],U);const z=m(t,["seed"]);z!=null&&g(e,["seed"],z);const J=m(t,["speechConfig"]);J!=null&&g(e,["speechConfig"],zA(J));const j=m(t,["stopSequences"]);j!=null&&g(e,["stopSequences"],j);const Y=m(t,["temperature"]);Y!=null&&g(e,["temperature"],Y);const ie=m(t,["thinkingConfig"]);ie!=null&&g(e,["thinkingConfig"],ie);const oe=m(t,["topK"]);oe!=null&&g(e,["topK"],oe);const P=m(t,["topP"]);if(P!=null&&g(e,["topP"],P),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Y4(t,e){const n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Qe(t,i)),n}function J4(t,e){const n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Qe(t,i)),n}function K4(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function W4(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function Q4(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],Vr(n));const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function BA(t){const e={},n=m(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],Vr(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Vf(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],Vr(n));const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function mi(t){const e={},n=m(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Vr(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function X4(t,e,n){const i={},o=m(e,["pageSize"]);n!==void 0&&o!=null&&g(n,["_query","pageSize"],o);const a=m(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=m(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const d=m(e,["queryBase"]);return n!==void 0&&d!=null&&g(n,["_url","models_url"],PA(t,d)),i}function Z4(t,e,n){const i={},o=m(e,["pageSize"]);n!==void 0&&o!=null&&g(n,["_query","pageSize"],o);const a=m(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=m(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const d=m(e,["queryBase"]);return n!==void 0&&d!=null&&g(n,["_url","models_url"],PA(t,d)),i}function e3(t,e){const n={},i=m(e,["config"]);return i!=null&&X4(t,i,n),n}function t3(t,e){const n={},i=m(e,["config"]);return i!=null&&Z4(t,i,n),n}function n3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["_self"]);if(o!=null){let a=kA(o);Array.isArray(a)&&(a=a.map(u=>Lp(u))),g(e,["models"],a)}return e}function i3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["_self"]);if(o!=null){let a=kA(o);Array.isArray(a)&&(a=a.map(u=>Vp(u))),g(e,["models"],a)}return e}function s3(t){const e={},n=m(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const o=m(t,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function Lp(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["displayName"]);i!=null&&g(e,["displayName"],i);const o=m(t,["description"]);o!=null&&g(e,["description"],o);const a=m(t,["version"]);a!=null&&g(e,["version"],a);const u=m(t,["_self"]);u!=null&&g(e,["tunedModelInfo"],_3(u));const d=m(t,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const f=m(t,["outputTokenLimit"]);f!=null&&g(e,["outputTokenLimit"],f);const h=m(t,["supportedGenerationMethods"]);return h!=null&&g(e,["supportedActions"],h),e}function Vp(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["displayName"]);i!=null&&g(e,["displayName"],i);const o=m(t,["description"]);o!=null&&g(e,["description"],o);const a=m(t,["versionId"]);a!=null&&g(e,["version"],a);const u=m(t,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>E4(S))),g(e,["endpoints"],E)}const d=m(t,["labels"]);d!=null&&g(e,["labels"],d);const f=m(t,["_self"]);f!=null&&g(e,["tunedModelInfo"],T3(f));const h=m(t,["defaultCheckpointId"]);h!=null&&g(e,["defaultCheckpointId"],h);const _=m(t,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(S=>S)),g(e,["checkpoints"],E)}return e}function r3(t){const e={},n=m(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=m(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=m(t,["fileData"]);a!=null&&g(e,["fileData"],x4(a));const u=m(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&g(e,["inlineData"],JV(d));const f=m(t,["text"]);f!=null&&g(e,["text"],f);const h=m(t,["thought"]);h!=null&&g(e,["thought"],h);const _=m(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=m(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function o3(t){const e={},n=m(t,["productImage"]);return n!=null&&g(e,["image"],mi(n)),e}function a3(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=m(t,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const a=m(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=m(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=m(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const f=m(t,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const h=m(t,["addWatermark"]);e!==void 0&&h!=null&&g(e,["parameters","addWatermark"],h);const _=m(t,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const E=m(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const S=m(t,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const C=m(t,["labels"]);return e!==void 0&&C!=null&&g(e,["labels"],C),n}function l3(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["source"]);o!=null&&c3(o,n);const a=m(e,["config"]);return a!=null&&a3(a,n),n}function u3(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Lf(o))),g(e,["generatedImages"],i)}return e}function c3(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=m(t,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],mi(o));const a=m(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>o3(d))),g(e,["instances[0]","productImages"],u)}return n}function d3(t){const e={},n=m(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],mi(n));const i=m(t,["referenceId"]);i!=null&&g(e,["referenceId"],i);const o=m(t,["referenceType"]);o!=null&&g(e,["referenceType"],o);const a=m(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],s3(a));const u=m(t,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],t4(u));const d=m(t,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const f=m(t,["subjectImageConfig"]);return f!=null&&g(e,["subjectImageConfig"],f),e}function GA(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=m(t,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function HA(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=m(t,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function f3(t){const e={},n=m(t,["category"]);if(n!=null&&g(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function h3(t){const e={},n=m(t,["image"]);return n!=null&&g(e,["image"],mi(n)),e}function m3(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const o=m(t,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const a=m(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=m(t,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const d=m(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const f=m(t,["labels"]);return e!==void 0&&f!=null&&g(e,["labels"],f),n}function p3(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["source"]);o!=null&&y3(o,n);const a=m(e,["config"]);return a!=null&&m3(a,n),n}function g3(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>H4(o))),g(e,["generatedMasks"],i)}return e}function y3(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=m(t,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],mi(o));const a=m(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],h3(a)),n}function zA(t){const e={},n=m(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function v3(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["functionDeclarations"],_)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=m(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=m(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=m(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],K4(d));const f=m(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],W4(f));const h=m(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function jA(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>S4(S))),g(e,["functionDeclarations"],E)}const i=m(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=m(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=m(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=m(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=m(t,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=m(t,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const h=m(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const _=m(t,["urlContext"]);return _!=null&&g(e,["urlContext"],_),e}function _3(t){const e={},n=m(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&g(e,["createTime"],i);const o=m(t,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function T3(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&g(e,["createTime"],i);const o=m(t,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function E3(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=m(t,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=m(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function x3(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=m(t,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=m(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function S3(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","name"],Qe(t,i));const o=m(e,["config"]);return o!=null&&E3(o,n),n}function w3(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["config"]);return o!=null&&x3(o,n),n}function A3(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=m(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const a=m(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=m(t,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const d=m(t,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const f=m(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","compressionQuality"],f);const h=m(t,["enhanceInputImage"]);e!==void 0&&h!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=m(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=m(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=m(t,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const C=m(t,["mode"]);return e!==void 0&&C!=null&&g(e,["parameters","mode"],C),n}function C3(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["image"]);o!=null&&g(n,["instances[0]","image"],mi(o));const a=m(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=m(e,["config"]);return u!=null&&A3(u,n),n}function b3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Lf(a))),g(e,["generatedImages"],o)}return e}function I3(t){const e={},n=m(t,["uri"]);n!=null&&g(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Vr(i));const o=m(t,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function R3(t){const e={},n=m(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Vr(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function N3(t){const e={},n=m(t,["image"]);n!=null&&g(e,["_self"],mi(n));const i=m(t,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function M3(t){const e={},n=m(t,["image"]);n!=null&&g(e,["image"],Vf(n));const i=m(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function D3(t){const e={},n=m(t,["image"]);n!=null&&g(e,["image"],mi(n));const i=m(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function $A(t){const e={},n=m(t,["uri"]);n!=null&&g(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&g(e,["encodedVideo"],Vr(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function YA(t){const e={},n=m(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Vr(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P3="Content-Type",k3="X-Server-Timeout",U3="User-Agent",Op="x-goog-api-client",L3="1.29.0",V3=`google-genai-sdk/${L3}`,O3="v1beta1",F3="v1beta",fx=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class q3{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:O3,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:F3,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(n))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>a.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&B3(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await hx(o),new Pp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await hx(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return Da(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:f}=yield ht(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(f,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),C=S.status,M=S.code,V=`got status: ${C}. ${JSON.stringify(E)}`;if(M>=400&&M<600)throw new kf({message:V,status:M})}}catch(E){if(E.name==="ApiError")throw E}u+=h;let _=u.match(fx);for(;_;){const E=_[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ht(new Pp(S)),u=u.slice(_[0].length),_=u.match(fx)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=V3+" "+this.clientOptions.userAgentExtra;return e[U3]=n,e[Op]=n,e[P3]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(k3,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const f={file:o},h=this.getFileName(e),_=pe("upload/v1beta/files",f._url),E=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,f,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var o;const a=this.clientOptions.uploader,u=await a.stat(n),d=String(u.size),f=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const S=await this.fetchUploadUrl(h,d,f,_,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,a,u){var d;let f={};u?f=u:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:f});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function hx(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new kf({message:o,status:n}):new Error(o)}}function B3(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f)){const h=u[f],_=d[f];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[f]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[f]=h)}return d}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G3="mcp_used/unknown";let H3=!1;function JA(t){for(const e of t)if(z3(e)||typeof e=="object"&&"inputSchema"in e)return!0;return H3}function KA(t){var e;const n=(e=t[Op])!==null&&e!==void 0?e:"";t[Op]=(n+` ${G3}`).trimStart()}function z3(t){return t!==null&&typeof t=="object"&&t instanceof Qg}function j3(t,e=100){return Da(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield ht(t.listTools({cursor:i}));for(const u of a.tools)yield yield ht(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class Qg{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Qg(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,f=(n=void 0,pu(j3(_))),h;h=await f.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const E=o;u.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=_}}catch(E){n={error:E}}finally{try{!d&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),WU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $3(t,e,n){const i=new GU;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}class Y3{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=W3(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(j=>{h=j}),E=e.callbacks,S=function(){h({})},C=this.apiClient,M={onopen:S,onmessage:j=>{$3(C,E.onmessage,j)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(j){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(j){}},V=this.webSocketFactory.create(f,K3(u),M);V.connect(),await _;const J={setup:{model:Qe(this.apiClient,e.model)}};return V.send(JSON.stringify(J)),new J3(V,this.apiClient)}}class J3{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=FV(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=OV(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ca.PLAY)}pause(){this.sendPlaybackControl(Ca.PAUSE)}stop(){this.sendPlaybackControl(Ca.STOP)}resetContext(){this.sendPlaybackControl(Ca.RESET_CONTEXT)}close(){this.conn.close()}}function K3(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function W3(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function X3(t,e,n){const i=new BU;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const a=JSON.parse(o);if(t.isVertexAI()){const u=GV(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class Z3{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Y3(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&JA(e.config.tools)&&KA(E);const S=iO(E);if(this.apiClient.isVertexAI())_=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const R=this.apiClient.getApiKey();let k="BidiGenerateContent",q="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",q="access_token"),_=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${k}?${q}=${R}`}let C=()=>{};const M=new Promise(R=>{C=R}),V=e.callbacks,U=function(){var R;(R=V==null?void 0:V.onopen)===null||R===void 0||R.call(V),C({})},z=this.apiClient,J={onopen:U,onmessage:R=>{X3(z,V.onmessage,R)},onerror:(n=V==null?void 0:V.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=V==null?void 0:V.onclose)!==null&&i!==void 0?i:function(R){}},j=this.webSocketFactory.create(_,nO(S),J);j.connect(),await M;let Y=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Y.startsWith("publishers/")){const R=this.apiClient.getProject(),k=this.apiClient.getLocation();Y=`projects/${R}/locations/${k}/`+Y}let ie={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[tf.AUDIO]}:e.config.responseModalities=[tf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const oe=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],P=[];for(const R of oe)if(this.isCallableTool(R)){const k=R;P.push(await k.tool())}else P.push(R);P.length>0&&(e.config.tools=P);const N={model:Y,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ie=VV(this.apiClient,N):ie=LV(this.apiClient,N),delete ie.config,j.send(JSON.stringify(ie)),new tO(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const eO={turnComplete:!0};class tO{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ti(n.turns),e.isVertexAI()||(i=i.map(o=>Uf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Q3)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},eO),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:BV(e)}:n={realtimeInput:qV(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function nO(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function iO(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mx=10;function px(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Pa(u)){o=!0;break}if(!o)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Pa(t){return"callTool"in t&&typeof t.callTool=="function"}function sO(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Pa(o)))!==null&&i!==void 0?i:!1}function gx(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(Pa(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(o)}),n}function yx(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rO extends Ns{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,a,u,d;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!sO(n)||px(n.config))return await this.generateContentInternal(f);const h=gx(n);if(h.length>0){const V=h.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let _,E;const S=ti(f.contents),C=(a=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:mx;let M=0;for(;M<C&&(_=await this.generateContentInternal(f),!(!_.functionCalls||_.functionCalls.length===0));){const V=_.candidates[0].content,U=[];for(const z of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Pa(z)){const j=await z.callTool(_.functionCalls);U.push(...j)}M++,E={role:"user",parts:U},f.contents=ti(f.contents),f.contents.push(V),f.contents.push(E),yx(f.config)&&(S.push(V),S.push(E))}return yx(f.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),px(n.config)){const o=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(o)}const i=gx(n);if(i.length>0){const o=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=f==null?void 0:f.safetyAttributes:u.push(f);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Do(Cs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,a,u,d,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((f=(d=n.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async f=>Pa(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&JA(e.config.tools)){const f=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),KA(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var n,i,o;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Pa(u)){const d=u,f=await d.tool();for(const h of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var n,i,o;const a=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:mx;let u=!1,d=0;const f=await this.initAfcToolsMap(e);return(function(h,_,E){var S,C;return Da(this,arguments,function*(){for(var M,V,U,z;d<a;){u&&(d++,u=!1);const ie=yield ht(h.processParamsMaybeAddMcpUsage(E)),oe=yield ht(h.generateContentStreamInternal(ie)),P=[],N=[];try{for(var J=!0,j=(V=void 0,pu(oe)),Y;Y=yield ht(j.next()),M=Y.done,!M;J=!0){z=Y.value,J=!1;const R=z;if(yield yield ht(R),R.candidates&&(!((S=R.candidates[0])===null||S===void 0)&&S.content)){N.push(R.candidates[0].content);for(const k of(C=R.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(d<a&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(k.functionCall.name)){const q=yield ht(_.get(k.functionCall.name).callTool([k.functionCall]));P.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(R){V={error:R}}finally{try{!J&&!M&&(U=j.return)&&(yield ht(U.call(j)))}finally{if(V)throw V.error}}if(P.length>0){u=!0;const R=new ru;R.candidates=[{content:{role:"user",parts:P}}],yield yield ht(R);const k=[];k.push(...N),k.push({role:"user",parts:P});const q=ti(E.contents).concat(k);E.contents=q}else break}})})(this,f,e)}async generateContentInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=ux(this.apiClient,e);return d=pe("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=dx(_),S=new ru;return Object.assign(S,E),S})}else{const h=lx(this.apiClient,e);return d=pe("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=cx(_),S=new ru;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=ux(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return Da(this,arguments,function*(){var S,C,M,V;try{for(var U=!0,z=pu(E),J;J=yield ht(z.next()),S=J.done,!S;U=!0){V=J.value,U=!1;const j=V,Y=dx(yield ht(j.json()));Y.sdkHttpResponse={headers:j.headers};const ie=new ru;Object.assign(ie,Y),yield yield ht(ie)}}catch(j){C={error:j}}finally{try{!U&&!S&&(M=z.return)&&(yield ht(M.call(z)))}finally{if(C)throw C.error}}})})}else{const h=lx(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return Da(this,arguments,function*(){var S,C,M,V;try{for(var U=!0,z=pu(E),J;J=yield ht(z.next()),S=J.done,!S;U=!0){V=J.value,U=!1;const j=V,Y=cx(yield ht(j.json()));Y.sdkHttpResponse={headers:j.headers};const ie=new ru;Object.assign(ie,Y),yield yield ht(ie)}}catch(j){C={error:j}}finally{try{!U&&!S&&(M=z.return)&&(yield ht(M.call(z)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=v4(this.apiClient,e);return d=pe("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=T4(_),S=new $E;return Object.assign(S,E),S})}else{const h=y4(this.apiClient,e);return d=pe("{model}:batchEmbedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=_4(_),S=new $E;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=R4(this.apiClient,e);return d=pe("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=M4(_),S=new YE;return Object.assign(S,E),S})}else{const h=I4(this.apiClient,e);return d=pe("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=N4(_),S=new YE;return Object.assign(S,E),S})}}async editImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=h4(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>{const h=m4(f),_=new NU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=C3(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>{const h=b3(f),_=new MU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=l3(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=u3(f),_=new DU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=p3(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=g3(f),_=new PU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=J4(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Vp(_))}else{const h=Y4(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Lp(_))}}async listInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=t3(this.apiClient,e);return d=pe("{models_url}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=i3(_),S=new JE;return Object.assign(S,E),S})}else{const h=e3(this.apiClient,e);return d=pe("{models_url}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=n3(_),S=new JE;return Object.assign(S,E),S})}}async update(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=w3(this.apiClient,e);return d=pe("{model}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Vp(_))}else{const h=S3(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Lp(_))}}async delete(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=u4(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=d4(_),S=new KE;return Object.assign(S,E),S})}else{const h=l4(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=c4(_),S=new KE;return Object.assign(S,E),S})}}async countTokens(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=r4(this.apiClient,e);return d=pe("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=a4(_),S=new WE;return Object.assign(S,E),S})}else{const h=s4(this.apiClient,e);return d=pe("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=o4(_),S=new WE;return Object.assign(S,E),S})}}async computeTokens(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=QV(this.apiClient,e);return a=pe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>{const h=XV(f),_=new kU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=V4(this.apiClient,e);return d=pe("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const E=U4(_),S=new nf;return Object.assign(S,E),S})}else{const h=L4(this.apiClient,e);return d=pe("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const E=k4(_),S=new nf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oO extends Ns{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=wU(e);return d=pe("{operationName}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=SU(e);return d=pe("{operationName}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=gU(e);return a=pe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aO(t){const e={},n=m(t,["data"]);if(n!=null&&g(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function lO(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>gO(a))),g(e,["parts"],o)}const i=m(t,["role"]);return i!=null&&g(e,["role"],i),e}function uO(t,e,n){const i={},o=m(e,["expireTime"]);n!==void 0&&o!=null&&g(n,["expireTime"],o);const a=m(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const u=m(e,["uses"]);n!==void 0&&u!=null&&g(n,["uses"],u);const d=m(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&g(n,["bidiGenerateContentSetup"],pO(t,d));const f=m(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&g(n,["fieldMask"],f),i}function cO(t,e){const n={},i=m(e,["config"]);return i!=null&&g(n,["config"],uO(t,i,n)),n}function dO(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function fO(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function hO(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function mO(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=m(t,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=m(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=m(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=m(t,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const h=m(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const _=m(t,["seed"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","seed"],_);const E=m(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Wg(E));const S=m(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const C=m(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=m(t,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],lO(dn(M)));const V=m(t,["tools"]);if(e!==void 0&&V!=null){let oe=Xa(V);Array.isArray(oe)&&(oe=oe.map(P=>vO(Qa(P)))),g(e,["setup","tools"],oe)}const U=m(t,["sessionResumption"]);e!==void 0&&U!=null&&g(e,["setup","sessionResumption"],yO(U));const z=m(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const J=m(t,["outputAudioTranscription"]);e!==void 0&&J!=null&&g(e,["setup","outputAudioTranscription"],J);const j=m(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&g(e,["setup","realtimeInputConfig"],j);const Y=m(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ie=m(t,["proactivity"]);return e!==void 0&&ie!=null&&g(e,["setup","proactivity"],ie),n}function pO(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["setup","model"],Qe(t,i));const o=m(e,["config"]);return o!=null&&g(n,["config"],mO(o,n)),n}function gO(t){const e={},n=m(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=m(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=m(t,["fileData"]);a!=null&&g(e,["fileData"],dO(a));const u=m(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&g(e,["inlineData"],aO(d));const f=m(t,["text"]);f!=null&&g(e,["text"],f);const h=m(t,["thought"]);h!=null&&g(e,["thought"],h);const _=m(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=m(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function yO(t){const e={},n=m(t,["handle"]);if(n!=null&&g(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vO(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["functionDeclarations"],_)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=m(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=m(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=m(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],fO(d));const f=m(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],hO(f));const h=m(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _O(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${n}.${a}`);e.push(...o)}else e.push(n)}return e.join(",")}function TO(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const a=_O(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const f=[];a&&f.push(a),d.length>0&&f.push(...d),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class EO extends Ns{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=cO(this.apiClient,e);a=pe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=TO(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xO(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function SO(t){const e={},n=m(t,["config"]);return n!=null&&xO(n,e),e}function wO(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function AO(t){const e={},n=m(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&wO(i,e),e}function CO(t){const e={},n=m(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function bO(t,e){const n={},i=m(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const o=m(t,["chunkingConfig"]);return e!==void 0&&o!=null&&g(e,["chunkingConfig"],o),n}function IO(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response"]);return u!=null&&g(e,["response"],NO(u)),e}function RO(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=m(t,["fileName"]);i!=null&&g(e,["fileName"],i);const o=m(t,["config"]);return o!=null&&bO(o,e),e}function NO(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&g(e,["parent"],i);const o=m(t,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function MO(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function DO(t){const e={},n=m(t,["config"]);return n!=null&&MO(n,e),e}function PO(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function kO(t,e){const n={},i=m(t,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const o=m(t,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const a=m(t,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>f)),g(e,["customMetadata"],d)}const u=m(t,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),n}function UO(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=m(t,["config"]);return i!=null&&kO(i,e),e}function LO(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VO(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function OO(t){const e={},n=m(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&VO(i,e),e}function FO(t){const e={},n=m(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function qO(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function BO(t){const e={},n=m(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=m(t,["config"]);return i!=null&&qO(i,e),e}function GO(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HO extends Ns{constructor(e){super(),this.apiClient=e,this.list=async n=>new Do(Cs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FO(e);return a=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=OO(e);o=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BO(e);return a=pe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=GO(f),_=new UU;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zO extends Ns{constructor(e,n=new HO(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Do(Cs.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=SO(e);return a=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=CO(e);return a=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=AO(e);o=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DO(e);return a=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=PO(f),_=new LU;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UO(e);return a=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=LO(f),_=new VU;return Object.assign(_,h),_})}}async importFile(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RO(e);return a=pe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=IO(f),_=new jg;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jO(t,e){const n={},i=m(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function $O(t,e){const n={},i=m(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function YO(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=m(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=m(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=m(t,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=m(t,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const f=m(t,["learningRate"]);if(e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","learningRate"],f),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function JO(t,e,n){const i={};let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const C=m(t,["validationDataset"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec"],vx(C))}else if(o==="PREFERENCE_TUNING"){const C=m(t,["validationDataset"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec"],vx(C))}const a=m(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=m(t,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=m(t,["epochCount"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(d==="PREFERENCE_TUNING"){const C=m(t,["epochCount"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=m(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(f==="PREFERENCE_TUNING"){const C=m(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=m(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=m(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=m(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let _=m(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const C=m(t,["adapterSize"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(_==="PREFERENCE_TUNING"){const C=m(t,["adapterSize"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=m(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=m(t,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function KO(t,e){const n={},i=m(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const o=m(t,["preTunedModel"]);o!=null&&g(n,["preTunedModel"],o);const a=m(t,["trainingDataset"]);a!=null&&o6(a);const u=m(t,["config"]);return u!=null&&YO(u,n),n}function WO(t,e){const n={},i=m(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const o=m(t,["preTunedModel"]);o!=null&&g(n,["preTunedModel"],o);const a=m(t,["trainingDataset"]);a!=null&&a6(a,n,e);const u=m(t,["config"]);return u!=null&&JO(u,n,e),n}function QO(t,e){const n={},i=m(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function XO(t,e){const n={},i=m(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function ZO(t,e,n){const i={},o=m(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=m(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=m(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function e6(t,e,n){const i={},o=m(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=m(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=m(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function t6(t,e){const n={},i=m(t,["config"]);return i!=null&&ZO(i,n),n}function n6(t,e){const n={},i=m(t,["config"]);return i!=null&&e6(i,n),n}function i6(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=m(t,["nextPageToken"]);o!=null&&g(n,["nextPageToken"],o);const a=m(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>WA(d))),g(n,["tuningJobs"],u)}return n}function s6(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=m(t,["nextPageToken"]);o!=null&&g(n,["nextPageToken"],o);const a=m(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Fp(d))),g(n,["tuningJobs"],u)}return n}function r6(t,e){const n={},i=m(t,["name"]);i!=null&&g(n,["model"],i);const o=m(t,["name"]);return o!=null&&g(n,["endpoint"],o),n}function o6(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(n,["examples","examples"],o)}return n}function a6(t,e,n){const i={};let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=m(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=m(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=m(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=m(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=m(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function WA(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=m(t,["name"]);o!=null&&g(n,["name"],o);const a=m(t,["state"]);a!=null&&g(n,["state"],MA(a));const u=m(t,["createTime"]);u!=null&&g(n,["createTime"],u);const d=m(t,["tuningTask","startTime"]);d!=null&&g(n,["startTime"],d);const f=m(t,["tuningTask","completeTime"]);f!=null&&g(n,["endTime"],f);const h=m(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const _=m(t,["description"]);_!=null&&g(n,["description"],_);const E=m(t,["baseModel"]);E!=null&&g(n,["baseModel"],E);const S=m(t,["_self"]);return S!=null&&g(n,["tunedModel"],r6(S)),n}function Fp(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=m(t,["name"]);o!=null&&g(n,["name"],o);const a=m(t,["state"]);a!=null&&g(n,["state"],MA(a));const u=m(t,["createTime"]);u!=null&&g(n,["createTime"],u);const d=m(t,["startTime"]);d!=null&&g(n,["startTime"],d);const f=m(t,["endTime"]);f!=null&&g(n,["endTime"],f);const h=m(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const _=m(t,["error"]);_!=null&&g(n,["error"],_);const E=m(t,["description"]);E!=null&&g(n,["description"],E);const S=m(t,["baseModel"]);S!=null&&g(n,["baseModel"],S);const C=m(t,["tunedModel"]);C!=null&&g(n,["tunedModel"],C);const M=m(t,["preTunedModel"]);M!=null&&g(n,["preTunedModel"],M);const V=m(t,["supervisedTuningSpec"]);V!=null&&g(n,["supervisedTuningSpec"],V);const U=m(t,["preferenceOptimizationSpec"]);U!=null&&g(n,["preferenceOptimizationSpec"],U);const z=m(t,["tuningDataStats"]);z!=null&&g(n,["tuningDataStats"],z);const J=m(t,["encryptionSpec"]);J!=null&&g(n,["encryptionSpec"],J);const j=m(t,["partnerModelTuningSpec"]);j!=null&&g(n,["partnerModelTuningSpec"],j);const Y=m(t,["customBaseModel"]);Y!=null&&g(n,["customBaseModel"],Y);const ie=m(t,["experiment"]);ie!=null&&g(n,["experiment"],ie);const oe=m(t,["labels"]);oe!=null&&g(n,["labels"],oe);const P=m(t,["outputUri"]);P!=null&&g(n,["outputUri"],P);const N=m(t,["pipelineJob"]);N!=null&&g(n,["pipelineJob"],N);const R=m(t,["serviceAccount"]);R!=null&&g(n,["serviceAccount"],R);const k=m(t,["tunedModelDisplayName"]);k!=null&&g(n,["tunedModelDisplayName"],k);const q=m(t,["veoTuningSpec"]);return q!=null&&g(n,["veoTuningSpec"],q),n}function l6(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=m(t,["name"]);o!=null&&g(n,["name"],o);const a=m(t,["metadata"]);a!=null&&g(n,["metadata"],a);const u=m(t,["done"]);u!=null&&g(n,["done"],u);const d=m(t,["error"]);return d!=null&&g(n,["error"],d),n}function vx(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const o=m(t,["vertexDatasetResource"]);return o!=null&&g(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u6 extends Ns{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Do(Cs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Dp.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=XO(e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>Fp(_))}else{const h=QO(e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>WA(_))}}async listInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=n6(e);return d=pe("tuningJobs",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=s6(_),S=new QE;return Object.assign(S,E),S})}else{const h=t6(e);return d=pe("tunedModels",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=i6(_),S=new QE;return Object.assign(S,E),S})}}async cancel(e){var n,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const f=$O(e);u=pe("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=jO(e);u=pe("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=WO(e,e);return a=pe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>Fp(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=KO(e);return a=pe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>l6(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c6{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const d6=1024*1024*8,f6=3,h6=1e3,m6=2,rf="x-goog-upload-status";async function p6(t,e,n){var i;const o=await QA(t,e,n),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[rf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function g6(t,e,n){var i;const o=await QA(t,e,n),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[rf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=AA(a),d=new $g;return Object.assign(d,u),d}async function QA(t,e,n){var i,o;let a=0,u=0,d=new Pp(new Response),f="upload";for(a=t.size;u<a;){const h=Math.min(d6,a-u),_=t.slice(u,u+h);u+h>=a&&(f+=", finalize");let E=0,S=h6;for(;E<f6&&(d=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[rf]));)E++,await v6(S),S=S*m6;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[rf])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function y6(t){return{size:t.size,type:t.type}}function v6(t){return new Promise(e=>setTimeout(e,t))}class _6{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await p6(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await g6(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await y6(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T6{create(e,n,i){return new E6(e,n,i)}}class E6{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _x="x-goog-api-key";class x6{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(_x)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(_x,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S6="gl-node/";class w6{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=mU(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new x6(this.apiKey);this.apiClient=new q3({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:S6+"web",uploader:new _6,downloader:new c6}),this.models=new rO(this.apiClient),this.live=new Z3(this.apiClient,o,new T6),this.batches=new FL(this.apiClient),this.chats=new yV(this.models,this.apiClient),this.caches=new mV(this.apiClient),this.files=new bV(this.apiClient),this.operations=new oO(this.apiClient),this.authTokens=new EO(this.apiClient),this.tunings=new u6(this.apiClient),this.fileSearchStores=new zO(this.apiClient)}}const A6=void 0;console.error("Gemini API key not found. Please set the API_KEY environment variable.");new w6({apiKey:A6});const C6=async t=>"AI features are currently unavailable.",b6=async t=>"Sorry, I'm currently unable to chat.",I6=async(t,e)=>"Welcome back to SoundWave radio...",R6=async(t,e)=>{console.log(`Simulating AI theme generation for ${t}`),await new Promise(i=>setTimeout(i,1500));const n=[{bannerUrl:"https://picsum.photos/id/1043/1200/400",accentColor:"#3B82F6"},{bannerUrl:"https://picsum.photos/id/1050/1200/400",accentColor:"#EF4444"},{bannerUrl:"https://picsum.photos/id/1060/1200/400",accentColor:"#A855F7"}];return n[Math.floor(Math.random()*n.length)]},N6=()=>{const[t,e]=D.useState(""),[n,i]=D.useState(""),[o,a]=D.useState(Ii.PREVIEW),[u,d]=D.useState(.99),[f,h]=D.useState(""),[_,E]=D.useState(""),[S,C]=D.useState(!1),[M,V]=D.useState(!1),[U,z]=D.useState(!1),J=async()=>{if(_){C(!0);try{const Y=await C6(_);i(Y)}catch(Y){console.error("Failed to generate description:",Y)}finally{C(!1)}}},j=Y=>{Y.preventDefault(),V(!0),setTimeout(()=>{V(!1),z(!0),console.log({title:t,description:n,uploadType:o,price:o==="For Sale"?u:0,tags:f.split(",")}),setTimeout(()=>z(!1),3e3)},1500)};return y.jsxs("div",{className:"max-w-4xl mx-auto text-white",children:[y.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Upload Your Track"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Share your music with the world. Fill out the details below."}),U&&y.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-300 px-4 py-3 rounded-lg relative mb-6",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Success!"}),y.jsx("span",{className:"block sm:inline",children:" Your track has been uploaded."})]}),y.jsxs("form",{onSubmit:j,className:"space-y-8",children:[y.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-lg",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"col-span-1",children:[y.jsx("label",{htmlFor:"track-title",className:"block text-sm font-medium text-gray-400 mb-2",children:"Track Title"}),y.jsx("input",{type:"text",id:"track-title",value:t,onChange:Y=>e(Y.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"})]}),y.jsxs("div",{className:"col-span-1",children:[y.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-400 mb-2",children:"Tags (comma-separated)"}),y.jsx("input",{type:"text",id:"tags",value:f,onChange:Y=>h(Y.target.value),placeholder:"e.g. lofi, chill, electronic",className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"})]})]}),y.jsxs("div",{className:"mt-6",children:[y.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-400 mb-2",children:"Description"}),y.jsx("textarea",{id:"description",value:n,onChange:Y=>i(Y.target.value),rows:4,required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"}),y.jsxs("div",{className:"mt-4 p-4 bg-gray-700/50 rounded-lg",children:[y.jsx("label",{htmlFor:"ai-prompt",className:"block text-sm font-medium text-gray-400 mb-2",children:"Need help with the description? Give the AI some keywords."}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("input",{type:"text",id:"ai-prompt",value:_,onChange:Y=>E(Y.target.value),placeholder:"e.g. epic, cinematic, synthwave",className:"flex-grow bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"}),y.jsx(We,{type:"button",onClick:J,isLoading:S,variant:"secondary",children:"Generate"})]})]})]}),y.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Upload Type"}),y.jsxs("select",{value:o,onChange:Y=>a(Y.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition",children:[y.jsx("option",{value:Ii.PREVIEW,children:"Preview Only"}),y.jsx("option",{value:Ii.FREE,children:"Free Download"}),y.jsx("option",{value:Ii.SALE,children:"For Sale"})]})]}),o==="For Sale"&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-400 mb-2",children:"Price (USD)"}),y.jsx("input",{type:"number",id:"price",value:u,onChange:Y=>d(Number(Y.target.value)),min:"0.50",step:"0.01",className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"})]})]})]}),y.jsx("div",{className:"flex justify-end",children:y.jsxs(We,{type:"submit",isLoading:M,children:[y.jsx(Te,{name:"upload",className:"w-5 h-5 mr-2"}),"Upload Track"]})})]})]})},M6=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0);D.useEffect(()=>{(async()=>{i(!0);const u=await xA();e(u),i(!1)})()},[]);const o=a=>{e([a,...t])};return y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Community Hub"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Connect with fellow artists and fans. Share your thoughts, ask questions, and collaborate."}),y.jsx("div",{className:"mb-8",children:y.jsx(SA,{onPostCreated:o})}),n?y.jsx(En,{}):y.jsx("div",{className:"space-y-6",children:t.map(a=>y.jsx(Hg,{post:a},a.id))})]})},D6=()=>{const[t,e]=ui.useState(!1),[n,i]=ui.useState([]),[o,a]=ui.useState(""),[u,d]=ui.useState(!1),f=ui.useRef(null),h={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200"},_=()=>{var S;(S=f.current)==null||S.scrollIntoView({behavior:"smooth"})};ui.useEffect(_,[n]),ui.useEffect(()=>{i([{id:`msg_${Date.now()}`,user:{id:"dj_gemini",name:"DJ Gemini",avatarUrl:"https://i.pravatar.cc/150?u=dj_gemini"},text:"Welcome to the SoundWave global chat! Feel free to talk about music, production, or just say hi.",timestamp:new Date().toISOString()}])},[]);const E=async S=>{if(S.preventDefault(),!o.trim())return;const C={id:`msg_${Date.now()}`,user:{id:h.id,name:h.name,avatarUrl:h.avatarUrl},text:o,timestamp:new Date().toISOString()};i(M=>[...M,C]),a(""),d(!0),setTimeout(async()=>{const M=await b6(),V={id:`msg_${Date.now()+1}`,user:{id:"dj_gemini",name:"DJ Gemini",avatarUrl:"https://i.pravatar.cc/150?u=dj_gemini"},text:M,timestamp:new Date().toISOString()};i(U=>[...U,V]),d(!1)},1e3+Math.random()*1e3)};return y.jsxs(y.Fragment,{children:[!t&&y.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-brand-accent hover:bg-brand-accent-hover text-white rounded-full p-4 shadow-lg z-50 transition-transform transform hover:scale-110","aria-label":"Open global chat",children:y.jsx(Te,{name:"chat-bubble",className:"w-8 h-8"})}),y.jsx("div",{className:`fixed bottom-0 right-0 h-full w-full sm:h-auto sm:w-96 bg-gray-800 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"translate-x-full"}`,children:y.jsxs("div",{className:"flex flex-col h-full",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 border-b border-gray-600",children:[y.jsx("h3",{className:"font-bold text-white text-lg",children:"Global Chat"}),y.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white","aria-label":"Close global chat",children:y.jsx(Te,{name:"x",className:"w-6 h-6"})})]}),y.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:y.jsxs("div",{className:"space-y-4",children:[n.map(S=>y.jsxs("div",{className:`flex items-start gap-3 ${S.user.id===h.id?"flex-row-reverse":""}`,children:[y.jsx("img",{src:S.user.avatarUrl,alt:S.user.name,className:"w-8 h-8 rounded-full object-cover"}),y.jsxs("div",{className:`p-3 rounded-lg max-w-xs ${S.user.id===h.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[y.jsx("p",{className:"font-bold text-sm",children:S.user.name}),y.jsx("p",{className:"text-sm",children:S.text})]})]},S.id)),u&&y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("img",{src:"https://i.pravatar.cc/150?u=dj_gemini",alt:"DJ Gemini",className:"w-8 h-8 rounded-full object-cover"}),y.jsx("div",{className:"p-3 rounded-lg max-w-xs bg-gray-700 text-gray-400",children:y.jsx("p",{className:"text-sm italic",children:"DJ Gemini is typing..."})})]}),y.jsx("div",{ref:f})]})}),y.jsx("div",{className:"p-4 bg-gray-700 border-t border-gray-600",children:y.jsxs("form",{onSubmit:E,className:"flex gap-2",children:[y.jsx("input",{type:"text",value:o,onChange:S=>a(S.target.value),placeholder:"Type a message...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400",disabled:u}),y.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-3 hover:bg-brand-accent-hover disabled:bg-gray-500",disabled:u||!o.trim(),children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z",clipRule:"evenodd"})})})]})})]})})]})},P6=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0),[o,a]=D.useState(null);D.useEffect(()=>{(async()=>{i(!0);const f=await Pf();e(f),i(!1)})()},[]);const u=async d=>{if(o)try{const f=await Bu(o.id,d),h={...o,comments:[...o.comments||[],f]};a(h),e(_=>_.map(E=>E.id===h.id?h:E))}catch(f){console.error("Failed to add comment:",f)}};return n?y.jsx(En,{}):y.jsxs("div",{children:[o&&y.jsx(Mo,{isOpen:!!o,onClose:()=>a(null),title:`Comments for ${o.title}`,comments:o.comments||[],onAddComment:u}),y.jsxs("section",{id:"global-library",children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Global Library"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Explore all tracks uploaded by the SoundWave community."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:t.map(d=>y.jsx(lf,{track:d,onViewComments:a},d.id))})]})]})},k6=()=>{const[t,e]=D.useState([]),[n,i]=D.useState([]),[o,a]=D.useState([]),[u,d]=D.useState(!0),[f,h]=D.useState(null),[_,E]=D.useState([]),[S,C]=D.useState(0),[M,V]=D.useState(""),[U,z]=D.useState(!1),[J,j]=D.useState(null),Y=D.useContext(Ha);if(!Y)throw new Error("PlaylistsPage must be used within an AudioProvider");const{playTrack:ie,currentTrack:oe,isPlaying:P,setOnTrackEnd:N}=Y;D.useEffect(()=>{(async()=>{d(!0);const[O,te,fe]=await Promise.all([Pk(),Pf(),yA()]);e(O),a(te),i(fe.filter(Se=>Se.curator.id==="user_1")),d(!1)})()},[]);const R=ui.useCallback(()=>{_.length!==0&&C(ye=>{const O=(ye+1)%_.length,te=_[O];return ie(te),k(te),O})},[_,ie]);D.useEffect(()=>(f&&N(()=>R),()=>{N(null)}),[f,N,R]);const k=async ye=>{z(!0),V("");const O=await I6(ye.title,ye.artistName);V(O),z(!1)},q=ye=>{let O;ye.artistId?O=o.filter(fe=>fe.artistId===ye.artistId):O=o.filter(fe=>fe.tags.some(Se=>ye.tags.includes(Se)));const te=O.sort(()=>.5-Math.random());E(te),h(ye),C(0),te.length>0&&(ie(te[0]),k(te[0]))},B=()=>{h(null),E([])},L=async ye=>{if(J)try{const O=await jk(J.id,ye),te={...J,comments:[...J.comments||[],O]};j(te),i(fe=>fe.map(Se=>Se.id===te.id?te:Se))}catch(O){console.error("Failed to add comment to playlist:",O)}},je=_[S];return u?y.jsx(En,{}):f&&je?y.jsx(L6,{station:f,track:je,djCommentary:M,isGeneratingCommentary:U,isPlaying:P,onBack:B,onNext:R}):y.jsxs("div",{children:[J&&y.jsx(Mo,{isOpen:!!J,onClose:()=>j(null),title:`Comments for ${J.title}`,comments:J.comments||[],onAddComment:L}),y.jsxs("section",{id:"my-playlists",className:"mb-16",children:[y.jsx("div",{className:"flex justify-between items-center mb-6",children:y.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Playlists"})}),n.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(ye=>y.jsx(U6,{playlist:ye,onViewComments:j},ye.id))}):y.jsxs("div",{className:"text-center py-10 px-6 bg-gray-800 rounded-lg",children:[y.jsx(Te,{name:"playlist",className:"w-12 h-12 mx-auto text-gray-500 mb-4"}),y.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Playlists Yet"}),y.jsx("p",{className:"text-gray-400 mt-2",children:"You haven't created any playlists."})]})]}),y.jsxs("section",{id:"radio-stations",children:[y.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Radio Stations"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Tune in to AI-powered radio stations based on genres, moods, and artists."}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(ye=>y.jsxs("div",{className:"group relative rounded-lg overflow-hidden shadow-lg h-64",children:[y.jsx("img",{src:ye.imageUrl,alt:ye.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),y.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-end",children:[y.jsx("h3",{className:"text-2xl font-bold text-white",children:ye.name}),y.jsx("p",{className:"text-gray-300 text-sm mb-4",children:ye.description}),y.jsx("div",{className:"w-1/2",children:y.jsx(We,{onClick:()=>q(ye),children:"Tune In"})})]})]},ye.id))})]})]})},U6=({playlist:t,onViewComments:e})=>{var n;return y.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg flex flex-col gap-4 transition-all duration-300 hover:bg-gray-700 hover:shadow-xl",children:[y.jsx("div",{className:"grid grid-cols-2 gap-1 w-full aspect-square rounded-md overflow-hidden bg-gray-900",children:t.tracks.slice(0,4).map(i=>y.jsx("img",{src:i.coverArtUrl,alt:"",className:"w-full h-full object-cover"},i.id))}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-white truncate",children:t.title}),y.jsxs("p",{className:"text-sm text-gray-400",children:[t.tracks.length," tracks"]}),y.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700 flex justify-between items-center",children:[y.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors",children:[y.jsx(Te,{name:"comment",className:"w-4 h-4"}),y.jsx("span",{className:"text-xs font-semibold",children:((n=t.comments)==null?void 0:n.length)||0})]}),y.jsx(We,{size:"sm",children:"Play"})]})]})]})},L6=({station:t,track:e,djCommentary:n,isGeneratingCommentary:i,isPlaying:o,onBack:a,onNext:u})=>y.jsx("div",{className:"max-w-4xl mx-auto",children:y.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-2xl",children:[y.jsxs("div",{className:"flex justify-between items-start mb-6",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-400",children:"Now Playing on"}),y.jsx("h2",{className:"text-3xl font-bold text-white",children:t.name})]}),y.jsx(We,{onClick:a,variant:"secondary",children:"Change Station"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[y.jsxs("div",{className:"relative w-full aspect-square rounded-lg overflow-hidden shadow-lg",children:[y.jsx("img",{src:e.coverArtUrl,alt:e.title,className:"w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center gap-1 opacity-40",children:Array.from({length:20}).map((d,f)=>y.jsx("div",{className:"audio-bar w-2 h-24 bg-white",style:{animationDelay:`${f*.1}s`,animationPlayState:o?"running":"paused"}},f))})]}),y.jsxs("div",{className:"flex flex-col",children:[y.jsx("h3",{className:"text-4xl font-bold text-white",children:e.title}),y.jsx("p",{className:"text-xl text-gray-400 mb-6",children:e.artistName}),y.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm border border-gray-600 rounded-lg p-4 mt-6 relative",children:[y.jsx("div",{className:"absolute -top-3 left-8 w-6 h-6 bg-gray-700/50 border-t border-l border-gray-600 transform rotate-45",style:{clipPath:"polygon(0 0, 100% 0, 100% 100%)"}}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("img",{src:"https://i.pravatar.cc/150?u=dj_gemini",alt:"DJ Gemini",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-bold text-brand-accent",children:"DJ Gemini"}),i?y.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}):y.jsxs("p",{className:"text-gray-300 italic",children:['"',n,'"']})]})]})]}),y.jsx("div",{className:"mt-8 flex items-center gap-4",children:y.jsxs(We,{onClick:u,className:"w-full",children:[y.jsx(Te,{name:"next",className:"w-5 h-5 mr-2"}),"Next Track"]})})]})]})]})}),XA=({room:t,onLeave:e})=>{const n=D.useRef(null),[i,o]=D.useState(null),[a,u]=D.useState(null),[d,f]=D.useState([]),[h,_]=D.useState(""),E=D.useRef(null),S={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};D.useEffect(()=>((async()=>{try{const V=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(V),n.current&&(n.current.srcObject=V)}catch(V){console.error("Error accessing media devices.",V),u("Could not access camera/microphone. Please check permissions.")}})(),()=>{i&&i.getTracks().forEach(V=>V.stop())}),[]),D.useEffect(()=>{const M=setInterval(()=>{const V=["This is fire!","Great stream!","Loving the vibes","Tune!"],U=V[Math.floor(Math.random()*V.length)],z={id:`msg_${Date.now()}`,user:{id:`user_${Math.random()}`,name:"Viewer",avatarUrl:`https://i.pravatar.cc/150?u=${Math.random()}`},text:U,timestamp:new Date().toISOString()};f(J=>[...J,z].slice(-10))},5e3+Math.random()*3e3);return()=>clearInterval(M)},[]),D.useEffect(()=>{var M;(M=E.current)==null||M.scrollIntoView({behavior:"smooth"})},[d]);const C=M=>{if(M.preventDefault(),!h.trim())return;const V={id:`msg_${Date.now()}`,user:S,text:h,timestamp:new Date().toISOString()};f(U=>[...U,V].slice(-10)),_("")};return y.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-90 z-50 flex flex-col items-center justify-center p-4",onClick:e,children:y.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-6xl h-full max-h-[90vh] flex flex-col md:flex-row overflow-hidden",onClick:M=>M.stopPropagation(),children:[y.jsxs("div",{className:"flex-grow bg-black relative flex items-center justify-center",children:[a?y.jsxs("div",{className:"text-center text-red-400 p-4",children:[y.jsx(Te,{name:"x",className:"w-12 h-12 mx-auto mb-2"}),y.jsx("p",{className:"font-semibold",children:"Stream Error"}),y.jsx("p",{children:a})]}):y.jsx("video",{ref:n,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),y.jsx("div",{className:"absolute top-4 left-4 bg-black/50 p-2 rounded-lg",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("img",{src:t.host.avatarUrl,alt:t.host.name,className:"w-10 h-10 rounded-full"}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-white",children:t.name}),y.jsxs("p",{className:"text-sm text-gray-300",children:["Hosted by ",t.host.name]})]})]})}),y.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-4",children:[y.jsxs("div",{className:"flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-md text-sm font-bold",children:[y.jsx(Te,{name:"rss",className:"w-4 h-4 animate-pulse"}),"LIVE"]}),y.jsxs("div",{className:"bg-black/50 text-white px-3 py-1 rounded-md text-sm",children:[t.viewers," watching"]})]})]}),y.jsxs("div",{className:"w-full md:w-80 lg:w-96 bg-gray-800 border-l border-gray-700 flex flex-col h-1/3 md:h-full",children:[y.jsx("div",{className:"p-4 border-b border-gray-700",children:y.jsx("h3",{className:"font-bold text-white",children:"Live Chat"})}),y.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[d.map(M=>y.jsxs("div",{className:"flex items-start gap-2",children:[y.jsx("img",{src:M.user.avatarUrl,alt:M.user.name,className:"w-8 h-8 rounded-full"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-semibold text-gray-300",children:M.user.name}),y.jsx("p",{className:"text-sm text-gray-400 bg-gray-700 px-3 py-1 rounded-lg",children:M.text})]})]},M.id)),y.jsx("div",{ref:E})]}),y.jsx("div",{className:"p-4 border-t border-gray-700",children:y.jsxs("form",{onSubmit:C,className:"flex gap-2",children:[y.jsx("input",{type:"text",value:h,onChange:M=>_(M.target.value),placeholder:"Say something...",className:"flex-grow bg-gray-700 border-gray-600 rounded-full py-2 px-3 text-sm text-white focus:ring-brand-accent-hover focus:border-brand-accent-hover"}),y.jsx("button",{type:"submit",className:"bg-brand-accent p-2 rounded-full text-white hover:bg-brand-accent-hover",children:y.jsx(Te,{name:"send",className:"w-5 h-5"})})]})})]}),y.jsx(We,{onClick:e,className:"absolute bottom-4 left-1/2 -translate-x-1/2",variant:"secondary",children:"Leave Stream"})]})})},Tx=({track:t,onUpvote:e,onDownvote:n,onPreview:i,onViewComments:o,audioCtx:a,isNext:u=!1})=>{var S;if(!a)return null;const{currentTrack:d,isPlaying:f,isPreviewing:h}=a,_=(d==null?void 0:d.id)===t.id&&f&&h,E=t.isPremiere?"border-2 border-purple-500/50 shadow-lg shadow-purple-500/20":"";return y.jsxs("div",{className:`relative p-3 rounded-md flex items-center gap-4 transition-all ${u?"bg-gray-700/70":"bg-gray-700/40"} hover:bg-gray-600/50 ${E}`,children:[t.isPremiere&&y.jsxs("div",{className:"absolute -top-2.5 -right-2.5 bg-purple-600 text-white text-[10px] font-bold px-2 py-1 rounded-full flex items-center gap-1 transform rotate-[15deg] shadow-md z-10",children:[y.jsx(Te,{name:"crown",className:"w-3 h-3"}),"PREMIERE"]}),y.jsx("img",{src:t.coverArtUrl,alt:t.title,className:"w-12 h-12 rounded-md object-cover"}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("p",{className:"font-semibold text-white",children:t.title}),y.jsx("p",{className:"text-sm text-gray-400",children:t.artistName})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{onClick:()=>o(t),className:"p-3 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors flex items-center gap-1.5 text-xs","aria-label":`View comments for ${t.title}`,children:[y.jsx(Te,{name:"comment",className:"w-4 h-4"}),y.jsx("span",{children:((S=t.comments)==null?void 0:S.length)||0})]}),y.jsx("button",{onClick:()=>i(t),className:"p-3 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":`Preview ${t.title}`,children:y.jsx(Te,{name:_?"pause":"play",className:"w-5 h-5"})})]}),y.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[y.jsx("button",{onClick:()=>e(t.id),className:"p-2 bg-gray-600/50 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":"Upvote",children:y.jsx(Te,{name:"thumbs-up",className:"w-4 h-4"})}),y.jsx("span",{className:"font-bold text-white w-4 text-center",children:t.votes}),y.jsx("button",{onClick:()=>n(t.id),className:"p-2 bg-gray-600/50 rounded-full hover:bg-red-500 hover:text-white transition-colors","aria-label":"Downvote",children:y.jsx(Te,{name:"thumbs-down",className:"w-4 h-4"})})]})]})},V6=()=>{var ye;const[t,e]=D.useState([]),[n,i]=D.useState([]),[o,a]=D.useState([]),[u,d]=D.useState([]),[f,h]=D.useState(!0),[_,E]=D.useState(null),[S,C]=D.useState(null),M=D.useContext(Ha);if(!M)throw new Error("ArtistHubPage must be used within an AudioProvider");const{playTrack:V,currentTrack:U,isPlaying:z,setOnTrackEnd:J,playPreview:j}=M,Y=D.useMemo(()=>[...t].sort((O,te)=>te.votes-O.votes),[t]),ie=D.useMemo(()=>Y.find(O=>O.id===(U==null?void 0:U.id))||Y[0],[Y,U]),oe=D.useMemo(()=>Y.find(O=>O.id!==(ie==null?void 0:ie.id)),[Y,ie]),P=D.useMemo(()=>Y.filter(O=>O.id!==(ie==null?void 0:ie.id)&&O.id!==(oe==null?void 0:oe.id)),[Y,ie,oe]),N=ui.useCallback(()=>{oe&&V(oe)},[oe,V]);D.useEffect(()=>(J(()=>N),()=>J(null)),[J,N]),D.useEffect(()=>{(async()=>{h(!0);const[te,fe,Se]=await Promise.all([gA(),Pf(),yA()]);i(te),a(fe),d(Se);const ke=fe.slice(0,5).map((G,se)=>({...G,votes:Math.floor(Math.random()*5)+(5-se),addedBy:"DJ Gemini",isPremiere:!0}));e(ke),h(!1),!U&&ke.length>0&&V(ke.sort((G,se)=>se.votes-G.votes)[0])})()},[]);const R=O=>{e(te=>te.map(fe=>fe.id===O?{...fe,votes:fe.votes+1}:fe))},k=O=>{e(te=>te.map(Se=>Se.id===O?{...Se,votes:Se.votes-1}:Se).filter(Se=>Se.id===(U==null?void 0:U.id)||Se.votes>-3))},q=O=>{j(O)},B=()=>{if(o.length===0)return;const O=o.filter(te=>!t.some(fe=>fe.id===te.id));if(O.length>0){const fe={...O[Math.floor(Math.random()*O.length)],votes:1,addedBy:"Sub-Tropical",isPremiere:!0};e(Se=>[...Se,fe])}else alert("All tracks are already in the queue!")},L=()=>{E({id:"my_room",name:"Sub-Tropical's Studio Session",host:{id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""},viewers:1,isLive:!0})},je=async O=>{if(S)try{const te=await Bu(S.id,O),fe={...S,comments:[...S.comments||[],te]};C(fe),e(Se=>Se.map(ke=>ke.id===fe.id?fe:ke))}catch(te){console.error("Failed to add comment:",te)}};return f?y.jsx(En,{}):_?y.jsx(XA,{room:_,onLeave:()=>E(null)}):y.jsxs("div",{children:[S&&y.jsx(Mo,{isOpen:!!S,onClose:()=>C(null),title:`Comments for ${S.title}`,comments:S.comments||[],onAddComment:je}),y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Artist Hub"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Collaborate on a live playlist and join live streams from artists."}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[y.jsxs("div",{className:"lg:col-span-2 bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Global Playlist"}),y.jsx(We,{onClick:B,children:"Add Your Track"})]}),y.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2",children:[ie&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-brand-accent mb-2 uppercase tracking-wider",children:"Playing Now"}),y.jsxs("div",{className:`relative bg-gray-700/50 rounded-lg p-4 flex gap-4 items-center shadow-lg ${ie.isPremiere?"ring-2 ring-purple-500 shadow-purple-500/20":"ring-2 ring-brand-accent"}`,children:[ie.isPremiere&&y.jsxs("div",{className:"absolute -top-3 -right-3 bg-purple-600 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 transform rotate-[15deg] shadow-lg z-10",children:[y.jsx(Te,{name:"crown",className:"w-4 h-4"}),"PREMIERE"]}),y.jsx("img",{src:ie.coverArtUrl,alt:ie.title,className:"w-24 h-24 rounded-md object-cover"}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("h4",{className:"text-2xl font-bold text-white",children:ie.title}),y.jsx("p",{className:"text-lg text-gray-300",children:ie.artistName}),y.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Added by ",ie.addedBy]}),y.jsxs(We,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>C(ie),children:[y.jsx(Te,{name:"comment",className:"w-4 h-4 mr-2"}),((ye=ie.comments)==null?void 0:ye.length)||0," Comments"]})]}),y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx("button",{onClick:()=>R(ie.id),className:"p-2 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":"Upvote",children:y.jsx(Te,{name:"thumbs-up",className:"w-5 h-5"})}),y.jsx("span",{className:"font-bold text-white text-xl",children:ie.votes}),y.jsx("button",{onClick:()=>k(ie.id),className:"p-2 bg-gray-600 rounded-full hover:bg-red-500 hover:text-white transition-colors","aria-label":"Downvote",children:y.jsx(Te,{name:"thumbs-down",className:"w-5 h-5"})})]})]})]}),oe&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-md font-semibold text-gray-400 mb-2 uppercase tracking-wider",children:"Playing Next"}),y.jsx(Tx,{track:oe,onUpvote:R,onDownvote:k,onPreview:q,onViewComments:C,audioCtx:M,isNext:!0})]}),P.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-md font-semibold text-gray-400 mb-2 border-t border-gray-700 pt-4 uppercase tracking-wider",children:"Queue"}),y.jsx("div",{className:"space-y-3",children:P.map(O=>y.jsx(Tx,{track:O,onUpvote:R,onDownvote:k,onPreview:q,onViewComments:C,audioCtx:M},O.id))})]})]})]}),y.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Live Rooms"}),y.jsxs(We,{onClick:L,variant:"secondary",children:[y.jsx(Te,{name:"video-camera",className:"w-5 h-5 mr-2"}),"Go Live"]})]}),y.jsx("div",{className:"space-y-4",children:n.map(O=>y.jsxs("div",{className:"bg-gray-700 p-3 rounded-md flex items-center gap-4",children:[y.jsx("img",{src:O.host.avatarUrl,alt:O.host.name,className:"w-12 h-12 rounded-full object-cover"}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("p",{className:"font-semibold text-white",children:O.name}),y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[y.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),y.jsxs("span",{children:[O.viewers," watching"]})]})]}),y.jsx(We,{onClick:()=>E(O),children:"Join"})]},O.id))})]}),y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Community Playlists"}),y.jsx("div",{className:"space-y-4",children:u.map(O=>y.jsxs("div",{className:"bg-gray-700 p-3 rounded-md flex items-center gap-4 transition-colors hover:bg-gray-600/50",children:[y.jsx("div",{className:"grid grid-cols-2 gap-0.5 w-16 h-16 flex-shrink-0 rounded-md overflow-hidden bg-gray-900",children:O.tracks.slice(0,4).map(te=>y.jsx("img",{src:te.coverArtUrl,alt:"",className:"w-full h-full object-cover"},te.id))}),y.jsxs("div",{className:"flex-grow overflow-hidden",children:[y.jsx("p",{className:"font-semibold text-white truncate",children:O.title}),y.jsxs("p",{className:"text-sm text-gray-400",children:["by ",O.curator.name]})]}),y.jsx(We,{onClick:()=>alert(`Now playing ${O.title}`),size:"sm",children:"Listen"})]},O.id))})]})]})]})]})},O6=({room:t,onJoin:e})=>y.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[y.jsxs("div",{className:"relative h-48 w-full bg-gray-900 flex items-center justify-center",children:[y.jsx("img",{src:t.host.avatarUrl,alt:t.host.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-700 transition-transform duration-300 group-hover:scale-110"}),y.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-md text-xs font-bold shadow-md",children:[y.jsx(Te,{name:"rss",className:"w-3 h-3 animate-pulse"}),"LIVE"]}),y.jsxs("div",{className:"absolute bottom-3 left-3 bg-black/50 text-white px-3 py-1 rounded-md text-xs",children:[t.viewers," watching"]})]}),y.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[y.jsx("h3",{className:"font-bold text-lg text-white truncate",children:t.name}),y.jsxs("p",{className:"text-sm text-gray-400",children:["Hosted by ",t.host.name]}),y.jsx("div",{className:"flex-grow mt-4",children:y.jsx(We,{onClick:()=>e(t),className:"w-full",children:"Join Stream"})})]})]}),F6=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0),[o,a]=D.useState(null);return D.useEffect(()=>{(async()=>{i(!0);const d=await gA();e(d),i(!1)})()},[]),n?y.jsx(En,{}):o?y.jsx(XA,{room:o,onLeave:()=>a(null)}):y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Live Streams"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Join live sessions from artists around the world. Watch performances, get feedback, or learn new skills."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(u=>y.jsx(O6,{room:u,onJoin:a},u.id))})]})},q6=({tutorial:t})=>{var d;const[e,n]=D.useState(t),[i,o]=D.useState(!1),a=()=>{switch(e.difficulty){case"Beginner":return"bg-green-500/20 text-green-300 border-green-500/30";case"Intermediate":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"Advanced":return"bg-red-500/20 text-red-300 border-red-500/30"}},u=async f=>{try{const h=await Hk(e.id,f);n(_=>({..._,comments:[..._.comments||[],h]}))}catch(h){console.error("Failed to add comment:",h)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:e.thumbnailUrl,alt:`${e.title} thumbnail`,className:"w-full h-40 object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:y.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:y.jsx(Te,{name:"play",className:"h-8 w-8 text-white"})})}),y.jsx("span",{className:"absolute bottom-2 right-2 text-xs font-semibold bg-gray-900/80 text-white px-2 py-1 rounded",children:e.duration}),y.jsx("span",{className:`absolute top-2 left-2 text-xs font-semibold px-2 py-1 rounded-full border ${a()}`,children:e.difficulty})]}),y.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[y.jsx("h3",{className:"font-bold text-md text-white truncate",children:e.title}),y.jsx(fn,{to:`/profile/${e.instructor.id}`,className:"text-sm text-gray-400 hover:text-white hover:underline",children:e.instructor.name}),y.jsx("div",{className:"flex-grow mt-2",children:y.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(f=>y.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:f},f))})}),y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:y.jsxs("button",{onClick:()=>o(!i),className:"w-full text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 py-1.5 rounded-md flex items-center justify-center gap-1.5 transition-colors",children:[y.jsx(Te,{name:"comment",className:"w-4 h-4"}),y.jsxs("span",{children:[((d=e.comments)==null?void 0:d.length)||0," Comments"]})]})})]}),i&&y.jsx("div",{className:"p-4 border-t border-gray-700",children:y.jsx(Co,{comments:e.comments||[],onAddComment:u})})]})},B6=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0);return D.useEffect(()=>{(async()=>{i(!0);const a=await kk();e(a),i(!1)})()},[]),n?y.jsx(En,{}):y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Tutorials"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Learn new skills and production techniques from talented artists in the community."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(o=>y.jsx(q6,{tutorial:o},o.id))})]})},G6=({masterclass:t})=>{const[e,n]=D.useState(t),i=async o=>{try{const a=await Bk(e.id,o);n(u=>({...u,comments:[...u.comments||[],a]}))}catch(a){console.error("Failed to add comment:",a)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl transition-colors hover:bg-gray-700/50",children:[y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 p-8",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("img",{src:e.coverArtUrl,alt:e.title,className:"w-full md:w-64 h-auto rounded-lg object-cover shadow-lg"})}),y.jsxs("div",{className:"flex flex-col items-start text-center md:text-left",children:[y.jsx("h2",{className:"text-3xl font-bold text-white",children:e.title}),y.jsxs("div",{className:"flex items-center gap-2 mt-2 text-gray-400",children:[y.jsx("img",{src:e.instructor.avatarUrl,alt:e.instructor.name,className:"w-6 h-6 rounded-full"}),y.jsxs("span",{children:["with ",e.instructor.name]})]}),y.jsx("p",{className:"text-gray-300 my-4 max-w-lg",children:e.description}),y.jsx("div",{className:"flex items-center gap-6 text-gray-300 text-sm mb-6",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Te,{name:"book-open",className:"w-5 h-5 text-brand-accent"}),y.jsxs("span",{children:[e.durationHours," hours of content"]})]})}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs(We,{children:["Enroll for $",e.price.toFixed(2)]}),y.jsx(We,{variant:"secondary",children:"Learn More"})]})]})]}),y.jsxs("div",{className:"p-8 border-t border-gray-700",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Community Discussion"}),y.jsx(Co,{comments:e.comments||[],onAddComment:i})]})]})},H6=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0);return D.useEffect(()=>{(async()=>{i(!0);const a=await Uk();e(a),i(!1)})()},[]),n?y.jsx(En,{}):y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Masterclasses"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Take a deep dive with exclusive, in-depth courses from top-tier artists and producers."}),y.jsx("div",{className:"space-y-8",children:t.map(o=>y.jsx(G6,{masterclass:o},o.id))})]})},z6=({pack:t})=>{var d;const[e,n]=D.useState(t),[i,o]=D.useState(!1),a=e.price===0,u=async f=>{try{const h=await Gk(e.id,f);n(_=>({..._,comments:[..._.comments||[],h]}))}catch(h){console.error("Failed to add comment:",h)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:e.coverArtUrl,alt:`${e.title} cover art`,className:"w-full h-48 object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:y.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:y.jsx(Te,{name:"play",className:"h-8 w-8 text-white"})})}),y.jsx("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full border ${a?"bg-green-500/20 text-green-300 border-green-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`,children:a?"Free":`$${e.price.toFixed(2)}`})]}),y.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[y.jsx("h3",{className:"font-bold text-lg text-white truncate",children:e.title}),y.jsxs(fn,{to:`/profile/${e.creator.id}`,className:"text-sm text-gray-400 hover:text-white hover:underline",children:["by ",e.creator.name]}),y.jsx("div",{className:"flex-grow mt-2",children:y.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(f=>y.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:f},f))})}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 space-y-3",children:[y.jsxs("button",{className:"w-full bg-brand-accent text-white px-4 py-2 rounded-full text-sm font-semibold hover:bg-brand-accent-hover transition-colors flex items-center justify-center gap-2",children:[y.jsx(Te,{name:"download",className:"w-4 h-4"}),y.jsx("span",{children:a?"Download":"Purchase"})]}),y.jsxs("button",{onClick:()=>o(!i),className:"w-full bg-gray-700 text-gray-300 px-4 py-2 rounded-full text-sm font-semibold hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",children:[y.jsx(Te,{name:"comment",className:"w-4 h-4"}),y.jsxs("span",{children:[((d=e.comments)==null?void 0:d.length)||0," Comments"]})]})]})]}),i&&y.jsx("div",{className:"p-4 border-t border-gray-700",children:y.jsx(Co,{comments:e.comments||[],onAddComment:u})})]})},j6=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0);return D.useEffect(()=>{(async()=>{i(!0);const a=await Lk();e(a),i(!1)})()},[]),n?y.jsx(En,{}):y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sample Packs"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Find the perfect sound for your next track. High-quality, royalty-free samples from the community."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:t.map(o=>y.jsx(z6,{pack:o},o.id))})]})},$6=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!1),[o,a]=D.useState(null),[u,d]=D.useState(null),f=Dx(),h=Y=>{try{const oe=new DOMParser().parseFromString(Y,"application/xml");if(oe.querySelector("parsererror"))throw new Error("Failed to parse XML file. Please ensure it's a valid Rekordbox XML.");const N=oe.querySelectorAll("COLLECTION > TRACK");if(N.length===0)throw new Error("No tracks found in the <COLLECTION> tag. Please check your XML file structure.");const R=Array.from(N).map(k=>({trackId:k.getAttribute("TrackID")||"",title:k.getAttribute("Name")||"N/A",artist:k.getAttribute("Artist")||"N/A",album:k.getAttribute("Album")||"N/A",genre:k.getAttribute("Genre")||"N/A",totalTime:k.getAttribute("TotalTime")||"N/A",dateAdded:k.getAttribute("DateAdded")||"N/A",comments:k.getAttribute("Comments")||"",playCount:k.getAttribute("PlayCount")||"0",key:k.getAttribute("Tonality")||"N/A"}));f("/profile/user_1",{state:{collection:R}})}catch(ie){a(ie.message||"An unknown error occurred during parsing."),e([])}finally{i(!1)}},_=D.useCallback(Y=>{if(Y.length===0)return;const ie=Y[0];if(ie.type!=="text/xml"){a("Invalid file type. Please upload a Rekordbox XML file.");return}i(!0),a(null),e([]),d(ie.name);const oe=new FileReader;oe.onabort=()=>{a("File reading was aborted."),i(!1)},oe.onerror=()=>{a("File reading has failed."),i(!1)},oe.onload=()=>{const P=oe.result;h(P)},oe.readAsText(ie)},[]),[E,S]=D.useState(!1),C=ui.useRef(null),M=Y=>{Y.preventDefault(),Y.stopPropagation(),S(!0)},V=Y=>{Y.preventDefault(),Y.stopPropagation(),S(!1)},U=Y=>{Y.preventDefault(),Y.stopPropagation()},z=Y=>{Y.preventDefault(),Y.stopPropagation(),S(!1),Y.dataTransfer.files&&Y.dataTransfer.files.length>0&&(_(Array.from(Y.dataTransfer.files)),Y.dataTransfer.clearData())},J=Y=>{Y.target.files&&Y.target.files.length>0&&_(Array.from(Y.target.files))},j=()=>{var Y;(Y=C.current)==null||Y.click()};return y.jsxs("div",{className:"max-w-7xl mx-auto text-white",children:[y.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Import Rekordbox Collection"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Upload your Rekordbox XML file to view and manage your music library."}),y.jsxs("div",{role:"button",tabIndex:0,"aria-label":"Upload Rekordbox XML file",className:`bg-gray-800 p-8 rounded-lg shadow-lg border-2 border-dashed ${E?"border-brand-accent":"border-gray-600"} transition-colors duration-300 text-center cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-accent`,onDragEnter:M,onDragLeave:V,onDragOver:U,onDrop:z,onClick:j,onKeyDown:Y=>(Y.key==="Enter"||Y.key===" ")&&j(),children:[y.jsx("input",{ref:C,type:"file",accept:".xml,text/xml",onChange:J,className:"hidden"}),y.jsx(Te,{name:"upload",className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),y.jsx("h2",{className:"text-xl font-semibold",children:n?"Processing...":u?`File: ${u}`:"Drop your Rekordbox XML here or click to browse"}),y.jsx("p",{className:"text-gray-500 mt-1",children:"Export your collection from Rekordbox as an XML file."})]}),n&&y.jsx(En,{}),o&&y.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative my-6",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Error:"}),y.jsxs("span",{className:"block sm:inline",children:[" ",o]})]}),t.length>0&&!n&&y.jsxs("div",{className:"mt-8 text-center",children:[y.jsxs("h2",{className:"text-xl font-semibold text-green-400",children:["Successfully processed ",t.length," tracks."]}),y.jsx("p",{className:"text-gray-400",children:"Redirecting you to your profile..."})]})]})},Y6=({label:t})=>y.jsxs(fn,{to:`/labels/${t.id}`,className:"group block bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:scale-105",children:[y.jsxs("div",{className:"relative h-40",children:[y.jsx("img",{src:t.bannerUrl,alt:`${t.name} banner`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-800 via-gray-800/50 to-transparent"})]}),y.jsxs("div",{className:"p-4 -mt-16 relative flex items-center space-x-4",children:[y.jsx("img",{src:t.logoUrl,alt:`${t.name} logo`,className:"w-20 h-20 rounded-full object-cover border-4 border-gray-800 group-hover:border-gray-700 transition-colors"}),y.jsx("div",{children:y.jsx("h3",{className:"font-bold text-xl text-white",children:t.name})})]})]}),J6=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0);return D.useEffect(()=>{(async()=>{i(!0);const a=await Xk();e(a),i(!1)})()},[]),n?y.jsx(En,{}):y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Record Labels"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Discover the labels shaping the sound of the community."}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(o=>y.jsx(Y6,{label:o},o.id))})]})},K6=({event:t})=>{const e=new Date(t.date),n=e.toLocaleString("default",{month:"short"}).toUpperCase(),i=e.getDate();return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 flex flex-col sm:flex-row items-start gap-6 transition-colors hover:bg-gray-700/50",children:[y.jsxs("div",{className:"flex-shrink-0 text-center bg-gray-700 rounded-md p-3 w-full sm:w-20",children:[y.jsx("p",{className:"text-sm font-bold text-brand-accent",children:n}),y.jsx("p",{className:"text-3xl font-bold text-white",children:i})]}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:t.title}),y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mt-1",children:[y.jsx(Te,{name:"map-pin",className:"w-4 h-4"}),y.jsx("span",{children:t.location})]}),y.jsx("p",{className:"text-gray-300 mt-2",children:t.description})]}),t.ticketUrl&&y.jsx("div",{className:"self-center sm:self-auto",children:y.jsx("a",{href:t.ticketUrl,target:"_blank",rel:"noopener noreferrer",children:y.jsx(We,{children:"Buy Tickets"})})})]})},W6=({track:t,onViewComments:e})=>{var f;const n=D.useContext(Ha);if(!n)throw new Error("FeaturedReleaseCard must be used within an AudioProvider");const{playTrack:i,currentTrack:o,isPlaying:a}=n,u=(o==null?void 0:o.id)===t.id&&a,d=()=>{i(t)};return y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col md:flex-row",children:[y.jsx("div",{className:"md:w-1/3 flex-shrink-0",children:y.jsx("img",{src:t.coverArtUrl,alt:t.title,className:"w-full h-full object-cover"})}),y.jsxs("div",{className:"p-8 flex flex-col justify-center",children:[y.jsx("h3",{className:"text-3xl lg:text-4xl font-bold text-white",children:t.title}),y.jsxs("p",{className:"text-xl text-gray-400 mt-1 mb-4",children:["by ",t.artistName]}),y.jsx("p",{className:"text-gray-300 max-w-prose mb-6",children:t.description}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs(We,{onClick:d,size:"md",children:[y.jsx(Te,{name:u?"pause":"play",className:"w-5 h-5 mr-2"}),u?"Pause":"Play"]}),y.jsx(We,{variant:"secondary",children:"View Release"}),e&&y.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[y.jsx(Te,{name:"comment",className:"w-5 h-5"}),y.jsx("span",{className:"font-semibold",children:((f=t.comments)==null?void 0:f.length)||0})]})]})]})]})},Q6=({artist:t,tracks:e,onViewMore:n})=>y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col md:flex-row items-center p-6 gap-6",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-700"})}),y.jsxs("div",{className:"flex-grow w-full",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-2",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-2xl font-bold text-white",children:t.name}),y.jsx("p",{className:"text-gray-400 mt-1 max-w-md line-clamp-2",children:t.bio})]}),y.jsxs("div",{className:"flex gap-2 flex-shrink-0 mt-2 sm:mt-0",children:[y.jsx(We,{onClick:n,variant:"secondary",size:"sm",children:"View More"}),y.jsx(fn,{to:`/profile/${t.id}`,children:y.jsx(We,{variant:"secondary",size:"sm",children:"Profile"})})]})]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[y.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Latest on this label:"}),e.length>0?y.jsx("div",{className:"space-y-2",children:e.map(i=>y.jsxs("div",{className:"flex items-center justify-between bg-gray-700/50 p-2 rounded-md",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Te,{name:"music-note",className:"w-4 h-4 text-brand-accent"}),y.jsx("span",{className:"text-white text-sm",children:i.title})]}),y.jsx("span",{className:"text-xs text-gray-400",children:i.category})]},i.id))}):y.jsx("p",{className:"text-sm text-gray-500",children:"No tracks found on this label."})]})]})]}),X6=({artist:t,onClose:e})=>{var n;return y.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:e,children:y.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col overflow-hidden relative",onClick:i=>i.stopPropagation(),children:[y.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-20 bg-gray-900/50 p-2 rounded-full",children:y.jsx(Te,{name:"x",className:"w-6 h-6"})}),y.jsxs("div",{className:"relative h-64 w-full flex-shrink-0",children:[y.jsx("img",{src:((n=t.gallery)==null?void 0:n[0])||t.avatarUrl,alt:`${t.name}`,className:"w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-800 to-transparent flex items-end p-8",children:y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-800"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-300",children:"In Conversation with"}),y.jsx("h1",{className:"text-4xl font-bold text-white",children:t.name})]})]})})]}),y.jsx("div",{className:"flex-grow overflow-y-auto p-8",children:y.jsxs("div",{className:"prose prose-invert prose-lg max-w-none",children:[y.jsx("p",{className:"lead text-xl text-gray-300",children:t.bio}),t.interview&&t.interview.length>0&&y.jsx("div",{className:"mt-12",children:t.interview.map((i,o)=>y.jsxs("div",{className:"mb-8",children:[y.jsx("h3",{className:"text-brand-accent font-semibold",children:i.question}),y.jsx("p",{children:i.answer})]},o))}),t.gallery&&t.gallery.length>1&&y.jsxs("div",{className:"mt-12",children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Gallery"}),y.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:t.gallery.map((i,o)=>y.jsx("img",{src:i,alt:`Artist gallery image ${o+1}`,className:"w-full h-40 object-cover rounded-lg shadow-md"},o))})]})]})})]})})},Z6=({opportunity:t,labelId:e})=>{var h,_;const[n,i]=D.useState(t),[o,a]=D.useState(!1),d={Artist:{icon:"music-note",color:"text-blue-400"},Vocalist:{icon:"microphone",color:"text-purple-400"},Designer:{icon:"palette",color:"text-yellow-400"},Collaborator:{icon:"users",color:"text-green-400"}}[n.type]||{icon:"sparkles",color:"text-gray-400"},f=async E=>{try{const S=await Yk(e,n.id,E);i(C=>({...C,comments:[...C.comments||[],S]}))}catch(S){console.error("Failed to add comment:",S)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 transition-colors hover:bg-gray-700/50",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[y.jsx("div",{className:"flex-shrink-0 bg-gray-700 p-4 rounded-full",children:y.jsx(Te,{name:d.icon,className:`w-8 h-8 ${d.color}`})}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("span",{className:`text-sm font-bold uppercase tracking-wider ${d.color}`,children:n.type}),y.jsx("h3",{className:"text-xl font-bold text-white mt-1",children:n.title}),y.jsx("p",{className:"text-gray-300 mt-2",children:n.description})]}),y.jsx("div",{className:"self-center sm:self-auto flex-shrink-0",children:y.jsx(We,{onClick:()=>alert("Application form coming soon!"),children:"Apply Now"})})]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[y.jsxs("button",{onClick:()=>a(E=>!E),className:"text-sm font-semibold text-gray-400 hover:text-white flex items-center gap-2",children:[y.jsx(Te,{name:"comment",className:"w-4 h-4"}),y.jsxs("span",{children:[o?"Hide":"View"," ",((h=n.comments)==null?void 0:h.length)||0," Comment",((_=n.comments)==null?void 0:_.length)!==1&&"s"]})]}),o&&y.jsx("div",{className:"mt-4",children:y.jsx(Co,{comments:n.comments||[],onAddComment:f})})]})]})},Ex=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(""),[o,a]=D.useState([]),u=D.useRef(null),d={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};D.useEffect(()=>{TA().then(a)},[]),D.useEffect(()=>{if(o.length===0)return;const h=pA(),_=o.filter(S=>S.id!==d.id);_.length>0&&e([{id:`msg_label_${Date.now()}`,user:_[0],text:"This label is legendary!",timestamp:new Date(Date.now()-5e3).toISOString()}]);const E=setInterval(()=>{if(document.hidden)return;const S=_[Math.floor(Math.random()*_.length)],C=h[Math.floor(Math.random()*h.length)],M={id:`msg_label_${Date.now()}`,user:S,text:C,timestamp:new Date().toISOString()};e(V=>[...V,M].slice(-20))},1e4);return()=>clearInterval(E)},[o]),D.useEffect(()=>{var h;(h=u.current)==null||h.scrollIntoView({behavior:"smooth"})},[t]);const f=h=>{if(h.preventDefault(),!n.trim())return;const _={id:`msg_label_${Date.now()}`,user:d,text:n,timestamp:new Date().toISOString()};e(E=>[...E,_]),i("")};return y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[400px]",children:[y.jsx("h3",{className:"text-xl font-bold text-white p-4 border-b border-gray-700",children:"Community Chat"}),y.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:y.jsxs("div",{className:"space-y-4",children:[t.map(h=>y.jsxs("div",{className:`flex items-start gap-3 ${h.user.id===d.id?"flex-row-reverse":""}`,children:[y.jsx("img",{src:h.user.avatarUrl,alt:h.user.name,className:"w-8 h-8 rounded-full object-cover"}),y.jsxs("div",{className:`p-3 rounded-lg max-w-sm shadow ${h.user.id===d.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[y.jsx("p",{className:"font-bold text-sm mb-1",children:h.user.name}),y.jsx("p",{className:"text-sm",children:h.text})]})]},h.id)),y.jsx("div",{ref:u})]})}),y.jsx("div",{className:"p-4 bg-gray-700/50 border-t border-gray-700",children:y.jsxs("form",{onSubmit:f,className:"flex gap-3 items-center",children:[y.jsx("input",{type:"text",value:n,onChange:h=>i(h.target.value),placeholder:"Join the conversation...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),y.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-2 hover:bg-brand-accent-hover disabled:bg-gray-500 transition-colors",disabled:!n.trim(),children:y.jsx(Te,{name:"send",className:"w-5 h-5"})})]})})]})},eF=()=>{const[t,e]=D.useState(""),[n,i]=D.useState(!1),[o,a]=D.useState(!1),u=d=>{d.preventDefault(),t&&(i(!0),setTimeout(()=>{i(!1),a(!0)},1e3))};return o?y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 text-center",children:[y.jsx("div",{className:"bg-green-500/20 text-green-300 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:y.jsx(Te,{name:"thumbs-up",className:"w-8 h-8"})}),y.jsx("h3",{className:"text-xl font-bold text-white",children:"You're Subscribed!"}),y.jsx("p",{className:"text-gray-400 mt-2",children:"Thanks for joining our mailing list. Keep an eye on your inbox for exclusive content."})]}):y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Join the Mailing List"}),y.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"Get exclusive downloads, event news, and special offers directly in your inbox."}),y.jsxs("form",{onSubmit:u,className:"space-y-3",children:[y.jsx("input",{type:"email",value:t,onChange:d=>e(d.target.value),placeholder:"Enter your email",required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white"}),y.jsx(We,{type:"submit",isLoading:n,className:"w-full",children:"Subscribe"})]})]})},tF=()=>{var je;const{labelId:t}=Px(),[e,n]=D.useState(null),[i,o]=D.useState([]),[a,u]=D.useState([]),[d,f]=D.useState([]),[h,_]=D.useState([]),[E,S]=D.useState(!0),[C,M]=D.useState("releases"),[V,U]=D.useState(!1),[z,J]=D.useState(null),[j,Y]=D.useState(null),[ie,oe]=D.useState(null);D.useEffect(()=>{(async()=>{if(t){S(!0);try{const[O,te,fe,Se,ke]=await Promise.all([Zk(t),Rk(t),Vk(t),Nk(t),Ok(t)]);n(O||null),o(te),u(fe),f(Se),_(ke),O!=null&&O.theme&&J(O.theme)}catch(O){console.error("Failed to fetch label data:",O)}finally{S(!1)}}})()},[t]);const P=async()=>{if(e){U(!0);try{const ye=await R6(e.name,e.bio);J(ye)}catch(ye){console.error("AI theme generation failed:",ye),alert("Sorry, we couldn't generate a new theme right now.")}finally{U(!1)}}},N=async ye=>{if(ie)try{const O=await Bu(ie.id,ye),te={...ie,comments:[...ie.comments||[],O]};oe(te),o(fe=>fe.map(Se=>Se.id===te.id?te:Se))}catch(O){console.error("Failed to add comment to track:",O)}},R=async ye=>{if(e)try{const O=await $k(e.id,ye);n(te=>te?{...te,comments:[...te.comments||[],O]}:null)}catch(O){console.error("Failed to add comment to label:",O)}},k=e!=null&&e.featuredReleaseId?i.find(ye=>ye.id===e.featuredReleaseId):null,q=e!=null&&e.featuredReleaseId?i.filter(ye=>ye.id!==e.featuredReleaseId):i,B=()=>{var ye;switch(C){case"releases":return y.jsxs("div",{children:[k&&y.jsxs("div",{className:"mb-12",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-wider",children:"Featured Release"}),y.jsx(W6,{track:k,onViewComments:oe})]}),y.jsx("h2",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-wider",children:"All Releases"}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:q.map(O=>y.jsx(lf,{track:O,onViewComments:oe},O.id))})]});case"artists":return y.jsx("div",{className:"space-y-8",children:a.map(O=>y.jsx(Q6,{artist:O,tracks:i.filter(te=>te.artistId===O.id).slice(0,3),onViewMore:()=>Y(O)},O.id))});case"about":return y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[y.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[y.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Our Story"}),y.jsx("p",{className:"text-gray-300 whitespace-pre-line leading-relaxed",children:e==null?void 0:e.bio})]}),y.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Community Feedback"}),y.jsx(Co,{comments:(e==null?void 0:e.comments)||[],onAddComment:R})]}),(e==null?void 0:e.eventPhotos)&&e.eventPhotos.length>0&&y.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Event Photos"}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:e.eventPhotos.map((O,te)=>y.jsx("img",{src:O,alt:`Label event photo ${te+1}`,className:"w-full h-40 object-cover rounded-md shadow-lg"},te))})]})]}),y.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[y.jsx(eF,{}),(e==null?void 0:e.storeLinks)&&y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Stores"}),y.jsx("div",{className:"space-y-3",children:e.storeLinks.map(O=>y.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 p-4 rounded-lg flex items-center gap-4 hover:bg-gray-600 transition-colors",children:[y.jsx(Te,{name:O.icon,className:"w-6 h-6 text-brand-accent"}),y.jsx("span",{className:"font-bold text-white",children:O.name})]},O.name))})]})]})]});case"posts":return y.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:d.map(O=>y.jsx(Hg,{post:O},O.id))});case"events":return y.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:h.map(O=>y.jsx(K6,{event:O},O.id))});case"opportunities":return y.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:(ye=e==null?void 0:e.opportunities)==null?void 0:ye.map(O=>y.jsx(Z6,{opportunity:O,labelId:e.id},O.id))});case"chat":return y.jsx("div",{className:"max-w-4xl mx-auto",children:y.jsx(Ex,{})});default:return null}},L=({tab:ye,label:O,count:te})=>y.jsxs("button",{onClick:()=>M(ye),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors border-b-2 whitespace-nowrap ${C===ye?"text-white border-brand-accent bg-gray-700/50":"text-gray-400 border-transparent hover:text-white hover:border-gray-500"}`,children:[O,typeof te<"u"&&te>0&&y.jsx("span",{className:"text-xs bg-gray-600 rounded-full px-2 py-0.5 ml-1",children:te})]});return E?y.jsx(En,{}):e?y.jsxs("div",{children:[ie&&y.jsx(Mo,{isOpen:!!ie,onClose:()=>oe(null),title:`Comments for ${ie.title}`,comments:ie.comments||[],onAddComment:N}),j&&y.jsx(X6,{artist:j,onClose:()=>Y(null)}),y.jsxs("div",{className:"relative h-48 md:h-64 bg-gray-800 rounded-lg overflow-hidden mb-[-80px]",children:[y.jsx("img",{src:(z==null?void 0:z.bannerUrl)||e.bannerUrl,alt:`${e.name} banner`,className:"w-full h-full object-cover opacity-40 transition-all duration-500"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"})]}),y.jsx("div",{className:"relative px-8",children:y.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6",children:[y.jsx("img",{src:e.logoUrl,alt:`${e.name} logo`,className:"w-40 h-40 rounded-full object-cover border-4 border-gray-900 flex-shrink-0"}),y.jsx("div",{className:"flex-grow text-center md:text-left",children:y.jsx("h1",{className:"text-4xl font-bold text-white",children:e.name})}),y.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[y.jsx(We,{onClick:()=>alert("Contact form coming soon!"),variant:"secondary",children:"Contact"}),y.jsx(We,{onClick:P,isLoading:V,variant:"secondary",children:"Generate Theme"}),y.jsx(We,{children:"Follow Label"})]})]})}),y.jsx("div",{className:"my-8 max-w-5xl mx-auto",children:y.jsx(Ex,{})}),y.jsx("div",{className:"mt-8 border-b border-gray-700 mb-6",children:y.jsxs("nav",{className:"-mb-px flex space-x-4 overflow-x-auto",children:[y.jsx(L,{tab:"releases",label:"Releases",count:i.length}),y.jsx(L,{tab:"artists",label:"Artists",count:a.length}),y.jsx(L,{tab:"about",label:"About"}),y.jsx(L,{tab:"events",label:"Events",count:h.length}),y.jsx(L,{tab:"opportunities",label:"Opportunities",count:(je=e.opportunities)==null?void 0:je.length}),y.jsx(L,{tab:"chat",label:"Live Chat"}),y.jsx(L,{tab:"posts",label:"Posts",count:d.length})]})}),y.jsx("div",{children:B()})]}):y.jsx("div",{className:"text-center text-white",children:"Label not found."})},nF=({onPostCreated:t})=>{const[e,n]=D.useState(!1),[i,o]=D.useState(""),[a,u]=D.useState(""),[d,f]=D.useState("followers"),h=async _=>{if(_.preventDefault(),!i.trim()||!a.trim())return;n(!0);const E={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100"};try{const S=await vA({title:i,content:a,audience:d,...E});t(S),o(""),u(""),f("followers")}catch(S){console.error("Failed to add post:",S)}finally{n(!1)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-2xl h-full",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Make a Broadcast"}),y.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Create a post to share with your audience. This will appear in their community feed."}),y.jsxs("form",{onSubmit:h,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"broadcast-title",className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),y.jsx("input",{id:"broadcast-title",type:"text",placeholder:"e.g. New Track Out Sunday!",value:i,onChange:_=>o(_.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"broadcast-content",className:"block text-sm font-medium text-gray-400 mb-1",children:"Message"}),y.jsx("textarea",{id:"broadcast-content",placeholder:"Share some details with your fans...",value:a,onChange:_=>u(_.target.value),required:!0,rows:5,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"broadcast-audience",className:"block text-sm font-medium text-gray-400 mb-1",children:"Audience"}),y.jsxs("select",{id:"broadcast-audience",value:d,onChange:_=>f(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white",children:[y.jsx("option",{value:"followers",children:"All Followers"}),y.jsx("option",{value:"subscribers",children:"Paid Subscribers"}),y.jsx("option",{value:"public",children:"Public"})]})]}),y.jsx("div",{className:"flex justify-end pt-2",children:y.jsxs(We,{type:"submit",isLoading:e,children:[y.jsx(Te,{name:"send",className:"w-4 h-4 mr-2"}),"Broadcast Post"]})})]})]})},iF=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(null),[o,a]=D.useState(!0),[u,d]=D.useState(""),f=D.useRef(null),h="user_1";D.useEffect(()=>{(async()=>{a(!0);const V=await Fk();e(V),V.length>0&&i(V[0]),a(!1)})()},[]),D.useEffect(()=>{var M;(M=f.current)==null||M.scrollIntoView({behavior:"smooth"})},[n,n==null?void 0:n.messages.length]);const _=M=>{if(M.preventDefault(),!u.trim()||!n)return;const V={id:`msg_${Date.now()}`,senderId:h,text:u,timestamp:new Date().toISOString()},U={...n,messages:[...n.messages,V]};i(U),e(z=>z.map(J=>J.id===U.id?U:J)),d("")},E=M=>{alert(`Broadcast sent to ${M.audience}! Title: ${M.title}`)},S=M=>{const V=new Date(M),U=Math.floor((new Date().getTime()-V.getTime())/1e3);if(U<60)return"Just now";let z=U/31536e3;return z>1?Math.floor(z)+"y":(z=U/2592e3,z>1?Math.floor(z)+"mo":(z=U/86400,z>1?Math.floor(z)+"d":(z=U/3600,z>1?Math.floor(z)+"h":(z=U/60,z>1?Math.floor(z)+"m":"Just now"))))};if(o)return y.jsx(En,{});const C=n==null?void 0:n.participants.find(M=>M.id!==h);return y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[y.jsx("div",{className:"lg:col-span-2",children:y.jsxs("div",{className:"flex h-[calc(100vh-200px)] bg-gray-800 rounded-lg shadow-2xl overflow-hidden",children:[y.jsxs("aside",{className:"w-1/3 xl:w-1/4 bg-gray-800 border-r border-gray-700 flex flex-col",children:[y.jsx("div",{className:"p-4 border-b border-gray-700",children:y.jsx("h1",{className:"text-xl font-bold text-white",children:"Direct Messages"})}),y.jsx("div",{className:"flex-grow overflow-y-auto",children:t.map(M=>{const V=M.participants.find(J=>J.id!==h),U=M.messages[M.messages.length-1],z=(n==null?void 0:n.id)===M.id;return y.jsxs("button",{onClick:()=>i(M),className:`w-full text-left p-4 flex items-center gap-4 transition-colors ${z?"bg-gray-700":"hover:bg-gray-700/50"}`,children:[y.jsxs("div",{className:"relative flex-shrink-0",children:[y.jsx("img",{src:V.avatarUrl,alt:V.name,className:"w-12 h-12 rounded-full object-cover"}),M.unreadCount>0&&y.jsx("span",{className:"absolute top-0 right-0 block h-3 w-3 rounded-full bg-brand-accent ring-2 ring-gray-800"})]}),y.jsxs("div",{className:"flex-grow overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-baseline",children:[y.jsx("h3",{className:`font-semibold truncate ${M.unreadCount>0?"text-white":"text-gray-300"}`,children:V.name}),y.jsx("p",{className:"text-xs text-gray-500",children:S(U.timestamp)})]}),y.jsxs("p",{className:`text-sm truncate ${M.unreadCount>0?"text-gray-300":"text-gray-400"}`,children:[U.senderId===h&&"You: ",U.text]})]})]},M.id)})})]}),y.jsx("main",{className:"flex-1 flex flex-col",children:!n||!C?y.jsx("div",{className:"flex-grow flex items-center justify-center text-gray-500",children:y.jsx("p",{children:"Select a conversation to start chatting."})}):y.jsxs(y.Fragment,{children:[y.jsxs("header",{className:"p-4 border-b border-gray-700 flex items-center gap-4 bg-gray-800 z-10",children:[y.jsx("img",{src:C.avatarUrl,alt:C.name,className:"w-10 h-10 rounded-full object-cover"}),y.jsx("h2",{className:"text-lg font-bold text-white",children:C.name})]}),y.jsx("div",{className:"flex-grow p-6 overflow-y-auto",children:y.jsxs("div",{className:"space-y-6",children:[n.messages.map(M=>y.jsxs("div",{className:`flex items-end gap-3 ${M.senderId===h?"flex-row-reverse":""}`,children:[M.senderId!==h&&y.jsx("img",{src:C.avatarUrl,alt:C.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),y.jsx("div",{className:`p-3 rounded-2xl max-w-lg shadow ${M.senderId===h?"bg-brand-accent text-white rounded-br-none":"bg-gray-700 text-gray-300 rounded-bl-none"}`,children:y.jsx("p",{className:"text-sm",children:M.text})})]},M.id)),y.jsx("div",{ref:f})]})}),y.jsx("footer",{className:"p-4 bg-gray-800 border-t border-gray-700",children:y.jsxs("form",{onSubmit:_,className:"flex items-center gap-3",children:[y.jsx("input",{type:"text",value:u,onChange:M=>d(M.target.value),placeholder:`Message ${C.name}...`,className:"flex-grow bg-gray-700 border-gray-600 rounded-full py-2 px-4 text-sm text-white focus:ring-brand-accent focus:border-brand-accent"}),y.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-3 hover:bg-brand-accent-hover disabled:bg-gray-600",disabled:!u.trim(),children:y.jsx(Te,{name:"send",className:"w-5 h-5"})})]})})]})})]})}),y.jsx("div",{className:"lg:col-span-1",children:y.jsx(nF,{onPostCreated:E})})]})};function sF(){const[t,e]=D.useState(null),[n,i]=D.useState(!0);return D.useEffect(()=>{const o=SS(Gg,async a=>{if(e(a),a)try{await tU()}catch(u){console.error("Error initializing SoundWave user:",u)}i(!1)});return()=>o()},[]),n?y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:y.jsx("div",{className:"text-white text-xl",children:"Loading SoundWave..."})}):t?y.jsx(WI,{children:y.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-900",children:[y.jsx(oR,{}),y.jsx("main",{className:"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8 mb-24",children:y.jsxs(bI,{children:[y.jsx(ln,{path:"/",element:y.jsx(rU,{})}),y.jsx(ln,{path:"/library",element:y.jsx(P6,{})}),y.jsx(ln,{path:"/community",element:y.jsx(M6,{})}),y.jsx(ln,{path:"/playlists",element:y.jsx(k6,{})}),y.jsx(ln,{path:"/labels",element:y.jsx(J6,{})}),y.jsx(ln,{path:"/labels/:labelId",element:y.jsx(tF,{})}),y.jsx(ln,{path:"/artist-hub",element:y.jsx(V6,{})}),y.jsx(ln,{path:"/live-streams",element:y.jsx(F6,{})}),y.jsx(ln,{path:"/tutorials",element:y.jsx(B6,{})}),y.jsx(ln,{path:"/masterclass",element:y.jsx(H6,{})}),y.jsx(ln,{path:"/samples",element:y.jsx(j6,{})}),y.jsx(ln,{path:"/profile/:userId",element:y.jsx(cU,{})}),y.jsx(ln,{path:"/upload",element:y.jsx(N6,{})}),y.jsx(ln,{path:"/import-collection",element:y.jsx($6,{})}),y.jsx(ln,{path:"/inbox",element:y.jsx(iF,{})})]})}),y.jsx(aR,{}),y.jsx(cR,{}),y.jsx(D6,{})]})}):y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:y.jsxs("div",{className:"text-center text-white",children:[y.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Authentication Required"}),y.jsx("p",{className:"mb-6",children:"Please return to the portal to sign in."}),y.jsx("button",{onClick:()=>window.location.href="../index.html",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg",children:"Go to Portal"})]})})}const ZA=document.getElementById("root");if(!ZA)throw new Error("Could not find root element to mount to");const rF=Vb.createRoot(ZA);rF.render(y.jsx(ui.StrictMode,{children:y.jsx(uR,{children:y.jsx(sF,{})})}));
