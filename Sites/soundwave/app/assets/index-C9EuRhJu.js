(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Z_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var rm={exports:{}},Dl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function ST(){if(yv)return Dl;yv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:d,ref:o!==void 0?o:null,props:c}}return Dl.Fragment=e,Dl.jsx=n,Dl.jsxs=n,Dl}var vv;function AT(){return vv||(vv=1,rm.exports=ST()),rm.exports}var u=AT(),im={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function NT(){if(_v)return Ce;_v=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),A=Symbol.iterator;function D(U){return U===null||typeof U!="object"?null:(U=A&&U[A]||U["@@iterator"],typeof U=="function"?U:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,z={};function Y(U,Z,H){this.props=U,this.context=Z,this.refs=z,this.updater=H||V}Y.prototype.isReactComponent={},Y.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},Y.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function te(){}te.prototype=Y.prototype;function J(U,Z,H){this.props=U,this.context=Z,this.refs=z,this.updater=H||V}var se=J.prototype=new te;se.constructor=J,F(se,Y.prototype),se.isPureReactComponent=!0;var oe=Array.isArray;function ce(){}var I={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(U,Z,H){var le=H.ref;return{$$typeof:r,type:U,key:Z,ref:le!==void 0?le:null,props:H}}function j(U,Z){return R(U.type,Z,U.props)}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function k(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(H){return Z[H]})}var C=/\/+/g;function Ae(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?k(""+U.key):Z.toString(36)}function me(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(ce,ce):(U.status="pending",U.then(function(Z){U.status==="pending"&&(U.status="fulfilled",U.value=Z)},function(Z){U.status==="pending"&&(U.status="rejected",U.reason=Z)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function O(U,Z,H,le,ue){var ge=typeof U;(ge==="undefined"||ge==="boolean")&&(U=null);var we=!1;if(U===null)we=!0;else switch(ge){case"bigint":case"string":case"number":we=!0;break;case"object":switch(U.$$typeof){case r:case e:we=!0;break;case _:return we=U._init,O(we(U._payload),Z,H,le,ue)}}if(we)return ue=ue(U),we=le===""?"."+Ae(U,0):le,oe(ue)?(H="",we!=null&&(H=we.replace(C,"$&/")+"/"),O(ue,Z,H,"",function(pt){return pt})):ue!=null&&(L(ue)&&(ue=j(ue,H+(ue.key==null||U&&U.key===ue.key?"":(""+ue.key).replace(C,"$&/")+"/")+we)),Z.push(ue)),1;we=0;var ve=le===""?".":le+":";if(oe(U))for(var Le=0;Le<U.length;Le++)le=U[Le],ge=ve+Ae(le,Le),we+=O(le,Z,H,ge,ue);else if(Le=D(U),typeof Le=="function")for(U=Le.call(U),Le=0;!(le=U.next()).done;)le=le.value,ge=ve+Ae(le,Le++),we+=O(le,Z,H,ge,ue);else if(ge==="object"){if(typeof U.then=="function")return O(me(U),Z,H,le,ue);throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return we}function W(U,Z,H){if(U==null)return U;var le=[],ue=0;return O(U,le,"","",function(ge){return Z.call(H,ge,ue++)}),le}function de(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(H){(U._status===0||U._status===-1)&&(U._status=1,U._result=H)},function(H){(U._status===0||U._status===-1)&&(U._status=2,U._result=H)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var be=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},De={map:W,forEach:function(U,Z,H){W(U,function(){Z.apply(this,arguments)},H)},count:function(U){var Z=0;return W(U,function(){Z++}),Z},toArray:function(U){return W(U,function(Z){return Z})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Ce.Activity=w,Ce.Children=De,Ce.Component=Y,Ce.Fragment=n,Ce.Profiler=o,Ce.PureComponent=J,Ce.StrictMode=i,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(U){return I.H.useMemoCache(U)}},Ce.cache=function(U){return function(){return U.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(U,Z,H){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var le=F({},U.props),ue=U.key;if(Z!=null)for(ge in Z.key!==void 0&&(ue=""+Z.key),Z)!N.call(Z,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&Z.ref===void 0||(le[ge]=Z[ge]);var ge=arguments.length-2;if(ge===1)le.children=H;else if(1<ge){for(var we=Array(ge),ve=0;ve<ge;ve++)we[ve]=arguments[ve+2];le.children=we}return R(U.type,ue,le)},Ce.createContext=function(U){return U={$$typeof:d,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:c,_context:U},U},Ce.createElement=function(U,Z,H){var le,ue={},ge=null;if(Z!=null)for(le in Z.key!==void 0&&(ge=""+Z.key),Z)N.call(Z,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ue[le]=Z[le]);var we=arguments.length-2;if(we===1)ue.children=H;else if(1<we){for(var ve=Array(we),Le=0;Le<we;Le++)ve[Le]=arguments[Le+2];ue.children=ve}if(U&&U.defaultProps)for(le in we=U.defaultProps,we)ue[le]===void 0&&(ue[le]=we[le]);return R(U,ge,ue)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(U){return{$$typeof:g,render:U}},Ce.isValidElement=L,Ce.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:de}},Ce.memo=function(U,Z){return{$$typeof:y,type:U,compare:Z===void 0?null:Z}},Ce.startTransition=function(U){var Z=I.T,H={};I.T=H;try{var le=U(),ue=I.S;ue!==null&&ue(H,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ce,be)}catch(ge){be(ge)}finally{Z!==null&&H.types!==null&&(Z.types=H.types),I.T=Z}},Ce.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ce.use=function(U){return I.H.use(U)},Ce.useActionState=function(U,Z,H){return I.H.useActionState(U,Z,H)},Ce.useCallback=function(U,Z){return I.H.useCallback(U,Z)},Ce.useContext=function(U){return I.H.useContext(U)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(U,Z){return I.H.useDeferredValue(U,Z)},Ce.useEffect=function(U,Z){return I.H.useEffect(U,Z)},Ce.useEffectEvent=function(U){return I.H.useEffectEvent(U)},Ce.useId=function(){return I.H.useId()},Ce.useImperativeHandle=function(U,Z,H){return I.H.useImperativeHandle(U,Z,H)},Ce.useInsertionEffect=function(U,Z){return I.H.useInsertionEffect(U,Z)},Ce.useLayoutEffect=function(U,Z){return I.H.useLayoutEffect(U,Z)},Ce.useMemo=function(U,Z){return I.H.useMemo(U,Z)},Ce.useOptimistic=function(U,Z){return I.H.useOptimistic(U,Z)},Ce.useReducer=function(U,Z,H){return I.H.useReducer(U,Z,H)},Ce.useRef=function(U){return I.H.useRef(U)},Ce.useState=function(U){return I.H.useState(U)},Ce.useSyncExternalStore=function(U,Z,H){return I.H.useSyncExternalStore(U,Z,H)},Ce.useTransition=function(){return I.H.useTransition()},Ce.version="19.2.0",Ce}var xv;function Ym(){return xv||(xv=1,im.exports=NT()),im.exports}var T=Ym();const Qn=Z_(T);var am={exports:{}},Ml={},om={exports:{}},lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function RT(){return bv||(bv=1,(function(r){function e(O,W){var de=O.length;O.push(W);e:for(;0<de;){var be=de-1>>>1,De=O[be];if(0<o(De,W))O[be]=W,O[de]=De,de=be;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],de=O.pop();if(de!==W){O[0]=de;e:for(var be=0,De=O.length,U=De>>>1;be<U;){var Z=2*(be+1)-1,H=O[Z],le=Z+1,ue=O[le];if(0>o(H,de))le<De&&0>o(ue,H)?(O[be]=ue,O[le]=de,be=le):(O[be]=H,O[Z]=de,be=Z);else if(le<De&&0>o(ue,de))O[be]=ue,O[le]=de,be=le;else break e}}return W}function o(O,W){var de=O.sortIndex-W.sortIndex;return de!==0?de:O.id-W.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var p=[],y=[],_=1,w=null,A=3,D=!1,V=!1,F=!1,z=!1,Y=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function se(O){for(var W=n(y);W!==null;){if(W.callback===null)i(y);else if(W.startTime<=O)i(y),W.sortIndex=W.expirationTime,e(p,W);else break;W=n(y)}}function oe(O){if(F=!1,se(O),!V)if(n(p)!==null)V=!0,ce||(ce=!0,k());else{var W=n(y);W!==null&&me(oe,W.startTime-O)}}var ce=!1,I=-1,N=5,R=-1;function j(){return z?!0:!(r.unstable_now()-R<N)}function L(){if(z=!1,ce){var O=r.unstable_now();R=O;var W=!0;try{e:{V=!1,F&&(F=!1,te(I),I=-1),D=!0;var de=A;try{t:{for(se(O),w=n(p);w!==null&&!(w.expirationTime>O&&j());){var be=w.callback;if(typeof be=="function"){w.callback=null,A=w.priorityLevel;var De=be(w.expirationTime<=O);if(O=r.unstable_now(),typeof De=="function"){w.callback=De,se(O),W=!0;break t}w===n(p)&&i(p),se(O)}else i(p);w=n(p)}if(w!==null)W=!0;else{var U=n(y);U!==null&&me(oe,U.startTime-O),W=!1}}break e}finally{w=null,A=de,D=!1}W=void 0}}finally{W?k():ce=!1}}}var k;if(typeof J=="function")k=function(){J(L)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ae=C.port2;C.port1.onmessage=L,k=function(){Ae.postMessage(null)}}else k=function(){Y(L,0)};function me(O,W){I=Y(function(){O(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(O){O.callback=null},r.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(O){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var de=A;A=W;try{return O()}finally{A=de}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var de=A;A=O;try{return W()}finally{A=de}},r.unstable_scheduleCallback=function(O,W,de){var be=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?be+de:be):de=be,O){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=de+De,O={id:_++,callback:W,priorityLevel:O,startTime:de,expirationTime:De,sortIndex:-1},de>be?(O.sortIndex=de,e(y,O),n(p)===null&&O===n(y)&&(F?(te(I),I=-1):F=!0,me(oe,de-be))):(O.sortIndex=De,e(p,O),V||D||(V=!0,ce||(ce=!0,k()))),O},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(O){var W=A;return function(){var de=A;A=W;try{return O.apply(this,arguments)}finally{A=de}}}})(lm)),lm}var wv;function CT(){return wv||(wv=1,om.exports=RT()),om.exports}var cm={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function jT(){if(Ev)return sn;Ev=1;var r=Ym();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,y,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:y,implementation:_}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,sn.createPortal=function(p,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,_)},sn.flushSync=function(p){var y=d.T,_=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=y,i.p=_,i.d.f()}},sn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(p,y))},sn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},sn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var _=y.as,w=g(_,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:A,fetchPriority:D}):_==="script"&&i.d.X(p,{crossOrigin:w,integrity:A,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},sn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=g(y.as,y.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(p)},sn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,w=g(_,y.crossOrigin);i.d.L(p,_,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},sn.preloadModule=function(p,y){if(typeof p=="string")if(y){var _=g(y.as,y.crossOrigin);i.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(p)},sn.requestFormReset=function(p){i.d.r(p)},sn.unstable_batchedUpdates=function(p,y){return p(y)},sn.useFormState=function(p,y,_){return d.H.useFormState(p,y,_)},sn.useFormStatus=function(){return d.H.useHostTransitionStatus()},sn.version="19.2.0",sn}var Tv;function IT(){if(Tv)return cm.exports;Tv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),cm.exports=jT(),cm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function DT(){if(Sv)return Ml;Sv=1;var r=CT(),e=Ym(),n=IT();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(i(188))}function y(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,l=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return p(f),t;if(m===l)return p(f),s;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=m;else{for(var x=!1,E=f.child;E;){if(E===a){x=!0,a=f,l=m;break}if(E===l){x=!0,l=f,a=m;break}E=E.sibling}if(!x){for(E=m.child;E;){if(E===a){x=!0,a=m,l=f;break}if(E===l){x=!0,l=m,a=f;break}E=E.sibling}if(!x)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function _(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=_(t),s!==null)return s;t=t.sibling}return null}var w=Object.assign,A=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),J=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case Y:return"Profiler";case z:return"StrictMode";case oe:return"Suspense";case ce:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case V:return"Portal";case J:return t.displayName||"Context";case te:return(t._context.displayName||"Context")+".Consumer";case se:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return s=t.displayName||null,s!==null?s:Ae(t.type)||"Memo";case N:s=t._payload,t=t._init;try{return Ae(t(s))}catch{}}return null}var me=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},be=[],De=-1;function U(t){return{current:t}}function Z(t){0>De||(t.current=be[De],be[De]=null,De--)}function H(t,s){De++,be[De]=t.current,t.current=s}var le=U(null),ue=U(null),ge=U(null),we=U(null);function ve(t,s){switch(H(ge,s),H(ue,t),H(le,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?z0(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=z0(s),t=B0(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Z(le),H(le,t)}function Le(){Z(le),Z(ue),Z(ge)}function pt(t){t.memoizedState!==null&&H(we,t);var s=le.current,a=B0(s,t.type);s!==a&&(H(ue,t),H(le,a))}function It(t){ue.current===t&&(Z(le),Z(ue)),we.current===t&&(Z(we),Rl._currentValue=de)}var cs,ya;function Wn(t){if(cs===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);cs=s&&s[1]||"",ya=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cs+t+ya}var Ni=!1;function va(t,s){if(!t||Ni)return"";Ni=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Q){var K=Q}Reflect.construct(t,[],re)}else{try{re.call()}catch(Q){K=Q}t.call(re.prototype)}}else{try{throw Error()}catch(Q){K=Q}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],E=m[1];if(x&&E){var M=x.split(`
`),$=E.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===$.length)for(l=M.length-1,f=$.length-1;1<=l&&0<=f&&M[l]!==$[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==$[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==$[f]){var ee=`
`+M[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=f);break}}}finally{Ni=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Wn(a):""}function ed(t,s){switch(t.tag){case 26:case 27:case 5:return Wn(t.type);case 16:return Wn("Lazy");case 13:return t.child!==s&&s!==null?Wn("Suspense Fallback"):Wn("Suspense");case 19:return Wn("SuspenseList");case 0:case 15:return va(t.type,!1);case 11:return va(t.type.render,!1);case 1:return va(t.type,!0);case 31:return Wn("Activity");default:return""}}function vc(t){try{var s="",a=null;do s+=ed(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var _a=Object.prototype.hasOwnProperty,Ri=r.unstable_scheduleCallback,xa=r.unstable_cancelCallback,td=r.unstable_shouldYield,Io=r.unstable_requestPaint,Bt=r.unstable_now,_c=r.unstable_getCurrentPriorityLevel,Rt=r.unstable_ImmediatePriority,Dt=r.unstable_UserBlockingPriority,ks=r.unstable_NormalPriority,xc=r.unstable_LowPriority,Do=r.unstable_IdlePriority,nd=r.log,Ci=r.unstable_setDisableYieldValue,xr=null,tn=null;function Ln(t){if(typeof nd=="function"&&Ci(t),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(xr,t)}catch{}}var un=Math.clz32?Math.clz32:bc,sd=Math.log,Mo=Math.LN2;function bc(t){return t>>>=0,t===0?32:31-(sd(t)/Mo|0)|0}var ji=256,us=262144,br=4194304;function Jn(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Vn(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?f=Jn(l):(x&=E,x!==0?f=Jn(x):a||(a=E&~t,a!==0&&(f=Jn(a))))):(E=l&~m,E!==0?f=Jn(E):x!==0?f=Jn(x):a||(a=l&~t,a!==0&&(f=Jn(a)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:f}function wr(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function ba(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oo(){var t=br;return br<<=1,(br&62914560)===0&&(br=4194304),t}function Ls(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Er(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function qt(t,s,a,l,f,m){var x=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,M=t.expirationTimes,$=t.hiddenUpdates;for(a=x&~a;0<a;){var ee=31-un(a),re=1<<ee;E[ee]=0,M[ee]=-1;var K=$[ee];if(K!==null)for($[ee]=null,ee=0;ee<K.length;ee++){var Q=K[ee];Q!==null&&(Q.lane&=-536870913)}a&=~re}l!==0&&ko(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~s))}function ko(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-un(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Tr(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-un(a),f=1<<l;f&s|t[l]&s&&(t[l]|=s),a&=~f}}function Sr(t,s){var a=s&-s;return a=(a&42)!==0?1:Lo(a),(a&(t.suspendedLanes|s))!==0?0:a}function Lo(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Vo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Vs(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:uv(t.type))}function wc(t,s){var a=W.p;try{return W.p=t,s()}finally{W.p=a}}var hs=Math.random().toString(36).slice(2),dt="__reactFiber$"+hs,Ft="__reactProps$"+hs,ds="__reactContainer$"+hs,Ar="__reactEvents$"+hs,fs="__reactListeners$"+hs,Ec="__reactHandles$"+hs,Uo="__reactResources$"+hs,Us="__reactMarker$"+hs;function Ii(t){delete t[dt],delete t[Ft],delete t[Ar],delete t[fs],delete t[Ec]}function Ps(t){var s=t[dt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[ds]||a[dt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Y0(t);t!==null;){if(a=t[dt])return a;t=Y0(t)}return s}t=a,a=t.parentNode}return null}function zs(t){if(t=t[dt]||t[ds]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Di(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Zn(t){var s=t[Uo];return s||(s=t[Uo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function yt(t){t[Us]=!0}var wa=new Set,Nr={};function hn(t,s){ms(t,s),ms(t+"Capture",s)}function ms(t,s){for(Nr[t]=s,t=0;t<s.length;t++)wa.add(s[t])}var rd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Po={},zo={};function Tc(t){return _a.call(zo,t)?!0:_a.call(Po,t)?!1:rd.test(t)?zo[t]=!0:(Po[t]=!0,!1)}function Rr(t,s,a){if(Tc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Cr(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Un(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function dn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sc(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function id(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(x){a=""+x,m.call(this,x)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ea(t){if(!t._valueTracker){var s=Sc(t)?"checked":"value";t._valueTracker=id(t,s,""+t[s])}}function Bo(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Sc(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Ta(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Bs=/[\n"\\]/g;function ft(t){return t.replace(Bs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function jr(t,s,a,l,f,m,x,E){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),s!=null?x==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+dn(s)):t.value!==""+dn(s)&&(t.value=""+dn(s)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),s!=null?Sa(t,x,dn(s)):a!=null?Sa(t,x,dn(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+dn(E):t.removeAttribute("name")}function Mi(t,s,a,l,f,m,x,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Ea(t);return}a=a!=null?""+dn(a):"",s=s!=null?""+dn(s):a,E||s===t.value||(t.value=s),t.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),Ea(t)}function Sa(t,s,a){s==="number"&&Ta(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function $e(t,s,a,l){if(t=t.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=s.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+dn(a),s=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function Oi(t,s,a){if(s!=null&&(s=""+dn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+dn(a):""}function Ir(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(me(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=dn(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ea(t)}function Pn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var ad=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qo(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||ad.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Ac(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&qo(t,f,l)}else for(var m in s)s.hasOwnProperty(m)&&qo(t,m,s[m])}function Fo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var od=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ld=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gs(t){return ld.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Mt(){}var Aa=null;function Na(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qs=null,An=null;function Nc(t){var s=zs(t);if(s&&(t=s.stateNode)){var a=t[Ft]||null;e:switch(t=s.stateNode,s.type){case"input":if(jr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ft(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var f=l[Ft]||null;if(!f)throw Error(i(90));jr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Bo(l)}break e;case"textarea":Oi(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&$e(t,!!a.multiple,s,!1)}}}var Ho=!1;function Rc(t,s,a){if(Ho)return t(s,a);Ho=!0;try{var l=t(s);return l}finally{if(Ho=!1,(qs!==null||An!==null)&&(Tu(),qs&&(s=qs,t=An,An=qs=null,Nc(s),t)))for(s=0;s<t.length;s++)Nc(t[s])}}function vn(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Ft]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Go=!1;if(es)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){Go=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{Go=!1}var Nn=null,Ra=null,ys=null;function Dr(){if(ys)return ys;var t,s=Ra,a=s.length,l,f="value"in Nn?Nn.value:Nn.textContent,m=f.length;for(t=0;t<a&&s[t]===f[t];t++);var x=a-t;for(l=1;l<=x&&s[a-l]===f[m-l];l++);return ys=f.slice(t,1<l?1-l:void 0)}function ki(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Mr(){return!0}function it(){return!1}function nn(t){function s(a,l,f,m,x){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Mr:it,this.isPropagationStopped=it,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),s}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=nn(Fs),Or=w({},Fs,{view:0,detail:0}),Cc=nn(Or),kr,Ca,fn,Vi=w({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fn&&(fn&&t.type==="mousemove"?(kr=t.screenX-fn.screenX,Ca=t.screenY-fn.screenY):Ca=kr=0,fn=t),kr)},movementY:function(t){return"movementY"in t?t.movementY:Ca}}),jc=nn(Vi),Ui=w({},Vi,{dataTransfer:0}),Ic=nn(Ui),$o=w({},Or,{relatedTarget:0}),Lr=nn($o),Dc=w({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=nn(Dc),cd=w({},Fs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mc=nn(cd),Pi=w({},Fs,{data:0}),Ko=nn(Pi),Oc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kc(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Qo[t])?!!s[t]:!1}function Vr(){return kc}var Lc=w({},Or,{key:function(t){if(t.key){var s=Oc[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ki(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(t){return t.type==="keypress"?ki(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ki(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vc=nn(Lc),Hs=w({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xo=nn(Hs),Uc=w({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),Pc=nn(Uc),zc=w({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ia=nn(zc),mn=w({},Vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bc=nn(mn),qc=w({},Fs,{newState:0,oldState:0}),Ur=nn(qc),h=[9,13,27,32],v=es&&"CompositionEvent"in window,b=null;es&&"documentMode"in document&&(b=document.documentMode);var S=es&&"TextEvent"in window&&!b,q=es&&(!v||b&&8<b&&11>=b),X=" ",he=!1;function We(t,s){switch(t){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ke=!1;function Ot(t,s){switch(t){case"compositionend":return bt(s);case"keypress":return s.which!==32?null:(he=!0,X);case"textInput":return t=s.data,t===X&&he?null:t;default:return null}}function kt(t,s){if(ke)return t==="compositionend"||!v&&We(t,s)?(t=Dr(),ys=Ra=Nn=null,ke=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return q&&s.locale!=="ko"?null:s.data;default:return null}}var Pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _n(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Pr[t.type]:s==="textarea"}function zi(t,s,a,l){qs?An?An.push(l):An=[l]:qs=l,s=Iu(s,"onChange"),0<s.length&&(a=new Li("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var Gs=null,Wo=null;function Jw(t){O0(t,0)}function Fc(t){var s=Di(t);if(Bo(s))return t}function Zg(t,s){if(t==="change")return s}var ep=!1;if(es){var ud;if(es){var hd="oninput"in document;if(!hd){var tp=document.createElement("div");tp.setAttribute("oninput","return;"),hd=typeof tp.oninput=="function"}ud=hd}else ud=!1;ep=ud&&(!document.documentMode||9<document.documentMode)}function np(){Gs&&(Gs.detachEvent("onpropertychange",sp),Wo=Gs=null)}function sp(t){if(t.propertyName==="value"&&Fc(Wo)){var s=[];zi(s,Wo,t,Na(t)),Rc(Jw,s)}}function Zw(t,s,a){t==="focusin"?(np(),Gs=s,Wo=a,Gs.attachEvent("onpropertychange",sp)):t==="focusout"&&np()}function eE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fc(Wo)}function tE(t,s){if(t==="click")return Fc(s)}function nE(t,s){if(t==="input"||t==="change")return Fc(s)}function sE(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Rn=typeof Object.is=="function"?Object.is:sE;function Jo(t,s){if(Rn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!_a.call(s,f)||!Rn(t[f],s[f]))return!1}return!0}function rp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ip(t,s){var a=rp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=rp(a)}}function ap(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?ap(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function op(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Ta(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Ta(t.document)}return s}function dd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var rE=es&&"documentMode"in document&&11>=document.documentMode,Da=null,fd=null,Zo=null,md=!1;function lp(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;md||Da==null||Da!==Ta(l)||(l=Da,"selectionStart"in l&&dd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Zo&&Jo(Zo,l)||(Zo=l,l=Iu(fd,"onSelect"),0<l.length&&(s=new Li("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=Da)))}function Bi(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ma={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionrun:Bi("Transition","TransitionRun"),transitionstart:Bi("Transition","TransitionStart"),transitioncancel:Bi("Transition","TransitionCancel"),transitionend:Bi("Transition","TransitionEnd")},gd={},cp={};es&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function qi(t){if(gd[t])return gd[t];if(!Ma[t])return t;var s=Ma[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in cp)return gd[t]=s[a];return t}var up=qi("animationend"),hp=qi("animationiteration"),dp=qi("animationstart"),iE=qi("transitionrun"),aE=qi("transitionstart"),oE=qi("transitioncancel"),fp=qi("transitionend"),mp=new Map,pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pd.push("scrollEnd");function ts(t,s){mp.set(t,s),hn(s,[t])}var Hc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},zn=[],Oa=0,yd=0;function Gc(){for(var t=Oa,s=yd=Oa=0;s<t;){var a=zn[s];zn[s++]=null;var l=zn[s];zn[s++]=null;var f=zn[s];zn[s++]=null;var m=zn[s];if(zn[s++]=null,l!==null&&f!==null){var x=l.pending;x===null?f.next=f:(f.next=x.next,x.next=f),l.pending=f}m!==0&&gp(a,f,m)}}function $c(t,s,a,l){zn[Oa++]=t,zn[Oa++]=s,zn[Oa++]=a,zn[Oa++]=l,yd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function vd(t,s,a,l){return $c(t,s,a,l),Kc(t)}function Fi(t,s){return $c(t,null,null,s),Kc(t)}function gp(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-un(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[s]:l.push(s),s.lane=a|536870912),m):null}function Kc(t){if(50<bl)throw bl=0,Rf=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ka={};function lE(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,s,a,l){return new lE(t,s,a,l)}function _d(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $s(t,s){var a=t.alternate;return a===null?(a=Cn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function pp(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Yc(t,s,a,l,f,m){var x=0;if(l=t,typeof t=="function")_d(t)&&(x=1);else if(typeof t=="string")x=fT(t,a,le.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Cn(31,a,s,f),t.elementType=R,t.lanes=m,t;case F:return Hi(a.children,f,m,s);case z:x=8,f|=24;break;case Y:return t=Cn(12,a,s,f|2),t.elementType=Y,t.lanes=m,t;case oe:return t=Cn(13,a,s,f),t.elementType=oe,t.lanes=m,t;case ce:return t=Cn(19,a,s,f),t.elementType=ce,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:x=10;break e;case te:x=9;break e;case se:x=11;break e;case I:x=14;break e;case N:x=16,l=null;break e}x=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return s=Cn(x,a,s,f),s.elementType=t,s.type=l,s.lanes=m,s}function Hi(t,s,a,l){return t=Cn(7,t,l,s),t.lanes=a,t}function xd(t,s,a){return t=Cn(6,t,null,s),t.lanes=a,t}function yp(t){var s=Cn(18,null,null,0);return s.stateNode=t,s}function bd(t,s,a){return s=Cn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var vp=new WeakMap;function Bn(t,s){if(typeof t=="object"&&t!==null){var a=vp.get(t);return a!==void 0?a:(s={value:t,source:s,stack:vc(s)},vp.set(t,s),s)}return{value:t,source:s,stack:vc(s)}}var La=[],Va=0,Qc=null,el=0,qn=[],Fn=0,zr=null,vs=1,_s="";function Ks(t,s){La[Va++]=el,La[Va++]=Qc,Qc=t,el=s}function _p(t,s,a){qn[Fn++]=vs,qn[Fn++]=_s,qn[Fn++]=zr,zr=t;var l=vs;t=_s;var f=32-un(l)-1;l&=~(1<<f),a+=1;var m=32-un(s)+f;if(30<m){var x=f-f%5;m=(l&(1<<x)-1).toString(32),l>>=x,f-=x,vs=1<<32-un(s)+f|a<<f|l,_s=m+t}else vs=1<<m|a<<f|l,_s=t}function wd(t){t.return!==null&&(Ks(t,1),_p(t,1,0))}function Ed(t){for(;t===Qc;)Qc=La[--Va],La[Va]=null,el=La[--Va],La[Va]=null;for(;t===zr;)zr=qn[--Fn],qn[Fn]=null,_s=qn[--Fn],qn[Fn]=null,vs=qn[--Fn],qn[Fn]=null}function xp(t,s){qn[Fn++]=vs,qn[Fn++]=_s,qn[Fn++]=zr,vs=s.id,_s=s.overflow,zr=t}var Ht=null,at=null,Fe=!1,Br=null,Hn=!1,Td=Error(i(519));function qr(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl(Bn(s,t)),Td}function bp(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[dt]=t,s[Ft]=l,a){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(a=0;a<El.length;a++)Ue(El[a],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":Ue("invalid",s),Mi(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ue("invalid",s);break;case"textarea":Ue("invalid",s),Ir(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||U0(s.textContent,a)?(l.popover!=null&&(Ue("beforetoggle",s),Ue("toggle",s)),l.onScroll!=null&&Ue("scroll",s),l.onScrollEnd!=null&&Ue("scrollend",s),l.onClick!=null&&(s.onclick=Mt),s=!0):s=!1,s||qr(t,!0)}function wp(t){for(Ht=t.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Ht=Ht.return}}function Ua(t){if(t!==Ht)return!1;if(!Fe)return wp(t),Fe=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Ff(t.type,t.memoizedProps)),a=!a),a&&at&&qr(t),wp(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));at=K0(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));at=K0(t)}else s===27?(s=at,ni(t.type)?(t=Yf,Yf=null,at=t):at=s):at=Ht?$n(t.stateNode.nextSibling):null;return!0}function Gi(){at=Ht=null,Fe=!1}function Sd(){var t=Br;return t!==null&&(En===null?En=t:En.push.apply(En,t),Br=null),t}function tl(t){Br===null?Br=[t]:Br.push(t)}var Ad=U(null),$i=null,Ys=null;function Fr(t,s,a){H(Ad,s._currentValue),s._currentValue=a}function Qs(t){t._currentValue=Ad.current,Z(Ad)}function Nd(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Rd(t,s,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var M=0;M<s.length;M++)if(E.context===s[M]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),Nd(m.return,a,t),l||(x=null);break e}m=E.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Nd(x,a,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Pa(t,s,a,l){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var E=f.type;Rn(f.pendingProps.value,x.value)||(t!==null?t.push(E):t=[E])}}else if(f===we.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Rl):t=[Rl])}f=f.return}t!==null&&Rd(s,t,a,l),s.flags|=262144}function Xc(t){for(t=t.firstContext;t!==null;){if(!Rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ki(t){$i=t,Ys=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return Ep($i,t)}function Wc(t,s){return $i===null&&Ki(t),Ep(t,s)}function Ep(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ys===null){if(t===null)throw Error(i(308));Ys=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Ys=Ys.next=s;return a}var cE=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},uE=r.unstable_scheduleCallback,hE=r.unstable_NormalPriority,wt={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cd(){return{controller:new cE,data:new Map,refCount:0}}function nl(t){t.refCount--,t.refCount===0&&uE(hE,function(){t.controller.abort()})}var sl=null,jd=0,za=0,Ba=null;function dE(t,s){if(sl===null){var a=sl=[];jd=0,za=Of(),Ba={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jd++,s.then(Tp,Tp),s}function Tp(){if(--jd===0&&sl!==null){Ba!==null&&(Ba.status="fulfilled");var t=sl;sl=null,za=0,Ba=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function fE(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Sp=O.S;O.S=function(t,s){l0=Bt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&dE(t,s),Sp!==null&&Sp(t,s)};var Yi=U(null);function Id(){var t=Yi.current;return t!==null?t:rt.pooledCache}function Jc(t,s){s===null?H(Yi,Yi.current):H(Yi,s.pool)}function Ap(){var t=Id();return t===null?null:{parent:wt._currentValue,pool:t}}var qa=Error(i(460)),Dd=Error(i(474)),Zc=Error(i(542)),eu={then:function(){}};function Np(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Rp(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Mt,Mt),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,jp(t),t;default:if(typeof s.status=="string")s.then(Mt,Mt);else{if(t=rt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,jp(t),t}throw Xi=s,qa}}function Qi(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Xi=a,qa):a}}var Xi=null;function Cp(){if(Xi===null)throw Error(i(459));var t=Xi;return Xi=null,t}function jp(t){if(t===qa||t===Zc)throw Error(i(483))}var Fa=null,rl=0;function tu(t){var s=rl;return rl+=1,Fa===null&&(Fa=[]),Rp(Fa,t,s)}function il(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function nu(t,s){throw s.$$typeof===A?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Ip(t){function s(B,P){if(t){var G=B.deletions;G===null?(B.deletions=[P],B.flags|=16):G.push(P)}}function a(B,P){if(!t)return null;for(;P!==null;)s(B,P),P=P.sibling;return null}function l(B){for(var P=new Map;B!==null;)B.key!==null?P.set(B.key,B):P.set(B.index,B),B=B.sibling;return P}function f(B,P){return B=$s(B,P),B.index=0,B.sibling=null,B}function m(B,P,G){return B.index=G,t?(G=B.alternate,G!==null?(G=G.index,G<P?(B.flags|=67108866,P):G):(B.flags|=67108866,P)):(B.flags|=1048576,P)}function x(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function E(B,P,G,ne){return P===null||P.tag!==6?(P=xd(G,B.mode,ne),P.return=B,P):(P=f(P,G),P.return=B,P)}function M(B,P,G,ne){var Ee=G.type;return Ee===F?ee(B,P,G.props.children,ne,G.key):P!==null&&(P.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===N&&Qi(Ee)===P.type)?(P=f(P,G.props),il(P,G),P.return=B,P):(P=Yc(G.type,G.key,G.props,null,B.mode,ne),il(P,G),P.return=B,P)}function $(B,P,G,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=bd(G,B.mode,ne),P.return=B,P):(P=f(P,G.children||[]),P.return=B,P)}function ee(B,P,G,ne,Ee){return P===null||P.tag!==7?(P=Hi(G,B.mode,ne,Ee),P.return=B,P):(P=f(P,G),P.return=B,P)}function re(B,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=xd(""+P,B.mode,G),P.return=B,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case D:return G=Yc(P.type,P.key,P.props,null,B.mode,G),il(G,P),G.return=B,G;case V:return P=bd(P,B.mode,G),P.return=B,P;case N:return P=Qi(P),re(B,P,G)}if(me(P)||k(P))return P=Hi(P,B.mode,G,null),P.return=B,P;if(typeof P.then=="function")return re(B,tu(P),G);if(P.$$typeof===J)return re(B,Wc(B,P),G);nu(B,P)}return null}function K(B,P,G,ne){var Ee=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ee!==null?null:E(B,P,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case D:return G.key===Ee?M(B,P,G,ne):null;case V:return G.key===Ee?$(B,P,G,ne):null;case N:return G=Qi(G),K(B,P,G,ne)}if(me(G)||k(G))return Ee!==null?null:ee(B,P,G,ne,null);if(typeof G.then=="function")return K(B,P,tu(G),ne);if(G.$$typeof===J)return K(B,P,Wc(B,G),ne);nu(B,G)}return null}function Q(B,P,G,ne,Ee){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(G)||null,E(P,B,""+ne,Ee);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case D:return B=B.get(ne.key===null?G:ne.key)||null,M(P,B,ne,Ee);case V:return B=B.get(ne.key===null?G:ne.key)||null,$(P,B,ne,Ee);case N:return ne=Qi(ne),Q(B,P,G,ne,Ee)}if(me(ne)||k(ne))return B=B.get(G)||null,ee(P,B,ne,Ee,null);if(typeof ne.then=="function")return Q(B,P,G,tu(ne),Ee);if(ne.$$typeof===J)return Q(B,P,G,Wc(P,ne),Ee);nu(P,ne)}return null}function ye(B,P,G,ne){for(var Ee=null,Ke=null,xe=P,Oe=P=0,ze=null;xe!==null&&Oe<G.length;Oe++){xe.index>Oe?(ze=xe,xe=null):ze=xe.sibling;var Ye=K(B,xe,G[Oe],ne);if(Ye===null){xe===null&&(xe=ze);break}t&&xe&&Ye.alternate===null&&s(B,xe),P=m(Ye,P,Oe),Ke===null?Ee=Ye:Ke.sibling=Ye,Ke=Ye,xe=ze}if(Oe===G.length)return a(B,xe),Fe&&Ks(B,Oe),Ee;if(xe===null){for(;Oe<G.length;Oe++)xe=re(B,G[Oe],ne),xe!==null&&(P=m(xe,P,Oe),Ke===null?Ee=xe:Ke.sibling=xe,Ke=xe);return Fe&&Ks(B,Oe),Ee}for(xe=l(xe);Oe<G.length;Oe++)ze=Q(xe,B,Oe,G[Oe],ne),ze!==null&&(t&&ze.alternate!==null&&xe.delete(ze.key===null?Oe:ze.key),P=m(ze,P,Oe),Ke===null?Ee=ze:Ke.sibling=ze,Ke=ze);return t&&xe.forEach(function(oi){return s(B,oi)}),Fe&&Ks(B,Oe),Ee}function Se(B,P,G,ne){if(G==null)throw Error(i(151));for(var Ee=null,Ke=null,xe=P,Oe=P=0,ze=null,Ye=G.next();xe!==null&&!Ye.done;Oe++,Ye=G.next()){xe.index>Oe?(ze=xe,xe=null):ze=xe.sibling;var oi=K(B,xe,Ye.value,ne);if(oi===null){xe===null&&(xe=ze);break}t&&xe&&oi.alternate===null&&s(B,xe),P=m(oi,P,Oe),Ke===null?Ee=oi:Ke.sibling=oi,Ke=oi,xe=ze}if(Ye.done)return a(B,xe),Fe&&Ks(B,Oe),Ee;if(xe===null){for(;!Ye.done;Oe++,Ye=G.next())Ye=re(B,Ye.value,ne),Ye!==null&&(P=m(Ye,P,Oe),Ke===null?Ee=Ye:Ke.sibling=Ye,Ke=Ye);return Fe&&Ks(B,Oe),Ee}for(xe=l(xe);!Ye.done;Oe++,Ye=G.next())Ye=Q(xe,B,Oe,Ye.value,ne),Ye!==null&&(t&&Ye.alternate!==null&&xe.delete(Ye.key===null?Oe:Ye.key),P=m(Ye,P,Oe),Ke===null?Ee=Ye:Ke.sibling=Ye,Ke=Ye);return t&&xe.forEach(function(TT){return s(B,TT)}),Fe&&Ks(B,Oe),Ee}function st(B,P,G,ne){if(typeof G=="object"&&G!==null&&G.type===F&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case D:e:{for(var Ee=G.key;P!==null;){if(P.key===Ee){if(Ee=G.type,Ee===F){if(P.tag===7){a(B,P.sibling),ne=f(P,G.props.children),ne.return=B,B=ne;break e}}else if(P.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===N&&Qi(Ee)===P.type){a(B,P.sibling),ne=f(P,G.props),il(ne,G),ne.return=B,B=ne;break e}a(B,P);break}else s(B,P);P=P.sibling}G.type===F?(ne=Hi(G.props.children,B.mode,ne,G.key),ne.return=B,B=ne):(ne=Yc(G.type,G.key,G.props,null,B.mode,ne),il(ne,G),ne.return=B,B=ne)}return x(B);case V:e:{for(Ee=G.key;P!==null;){if(P.key===Ee)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){a(B,P.sibling),ne=f(P,G.children||[]),ne.return=B,B=ne;break e}else{a(B,P);break}else s(B,P);P=P.sibling}ne=bd(G,B.mode,ne),ne.return=B,B=ne}return x(B);case N:return G=Qi(G),st(B,P,G,ne)}if(me(G))return ye(B,P,G,ne);if(k(G)){if(Ee=k(G),typeof Ee!="function")throw Error(i(150));return G=Ee.call(G),Se(B,P,G,ne)}if(typeof G.then=="function")return st(B,P,tu(G),ne);if(G.$$typeof===J)return st(B,P,Wc(B,G),ne);nu(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(a(B,P.sibling),ne=f(P,G),ne.return=B,B=ne):(a(B,P),ne=xd(G,B.mode,ne),ne.return=B,B=ne),x(B)):a(B,P)}return function(B,P,G,ne){try{rl=0;var Ee=st(B,P,G,ne);return Fa=null,Ee}catch(xe){if(xe===qa||xe===Zc)throw xe;var Ke=Cn(29,xe,null,B.mode);return Ke.lanes=ne,Ke.return=B,Ke}finally{}}}var Wi=Ip(!0),Dp=Ip(!1),Hr=!1;function Md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Od(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Gr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function $r(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Kc(t),gp(t,null,a),s}return $c(t,l,s,a),Kc(t)}function al(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Tr(t,a)}}function kd(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Ld=!1;function ol(){if(Ld){var t=Ba;if(t!==null)throw t}}function ll(t,s,a,l){Ld=!1;var f=t.updateQueue;Hr=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var M=E,$=M.next;M.next=null,x===null?m=$:x.next=$,x=M;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,E=ee.lastBaseUpdate,E!==x&&(E===null?ee.firstBaseUpdate=$:E.next=$,ee.lastBaseUpdate=M))}if(m!==null){var re=f.baseState;x=0,ee=$=M=null,E=m;do{var K=E.lane&-536870913,Q=K!==E.lane;if(Q?(Pe&K)===K:(l&K)===K){K!==0&&K===za&&(Ld=!0),ee!==null&&(ee=ee.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ye=t,Se=E;K=s;var st=a;switch(Se.tag){case 1:if(ye=Se.payload,typeof ye=="function"){re=ye.call(st,re,K);break e}re=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Se.payload,K=typeof ye=="function"?ye.call(st,re,K):ye,K==null)break e;re=w({},re,K);break e;case 2:Hr=!0}}K=E.callback,K!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ee===null?($=ee=Q,M=re):ee=ee.next=Q,x|=K;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;Q=E,E=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);ee===null&&(M=re),f.baseState=M,f.firstBaseUpdate=$,f.lastBaseUpdate=ee,m===null&&(f.shared.lanes=0),Wr|=x,t.lanes=x,t.memoizedState=re}}function Mp(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function Op(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Mp(a[t],s)}var Ha=U(null),su=U(0);function kp(t,s){t=rr,H(su,t),H(Ha,s),rr=t|s.baseLanes}function Vd(){H(su,rr),H(Ha,Ha.current)}function Ud(){rr=su.current,Z(Ha),Z(su)}var jn=U(null),Gn=null;function Kr(t){var s=t.alternate;H(vt,vt.current&1),H(jn,t),Gn===null&&(s===null||Ha.current!==null||s.memoizedState!==null)&&(Gn=t)}function Pd(t){H(vt,vt.current),H(jn,t),Gn===null&&(Gn=t)}function Lp(t){t.tag===22?(H(vt,vt.current),H(jn,t),Gn===null&&(Gn=t)):Yr()}function Yr(){H(vt,vt.current),H(jn,jn.current)}function In(t){Z(jn),Gn===t&&(Gn=null),Z(vt)}var vt=U(0);function ru(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||$f(a)||Kf(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Xs=0,Me=null,tt=null,Et=null,iu=!1,Ga=!1,Ji=!1,au=0,cl=0,$a=null,mE=0;function mt(){throw Error(i(321))}function zd(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Rn(t[a],s[a]))return!1;return!0}function Bd(t,s,a,l,f,m){return Xs=m,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=t===null||t.memoizedState===null?_y:nf,Ji=!1,m=a(l,f),Ji=!1,Ga&&(m=Up(s,a,l,f)),Vp(t),m}function Vp(t){O.H=dl;var s=tt!==null&&tt.next!==null;if(Xs=0,Et=tt=Me=null,iu=!1,cl=0,$a=null,s)throw Error(i(300));t===null||Tt||(t=t.dependencies,t!==null&&Xc(t)&&(Tt=!0))}function Up(t,s,a,l){Me=t;var f=0;do{if(Ga&&($a=null),cl=0,Ga=!1,25<=f)throw Error(i(301));if(f+=1,Et=tt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}O.H=xy,m=s(a,l)}while(Ga);return m}function gE(){var t=O.H,s=t.useState()[0];return s=typeof s.then=="function"?ul(s):s,t=t.useState()[0],(tt!==null?tt.memoizedState:null)!==t&&(Me.flags|=1024),s}function qd(){var t=au!==0;return au=0,t}function Fd(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Hd(t){if(iu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}iu=!1}Xs=0,Et=tt=Me=null,Ga=!1,cl=au=0,$a=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Me.memoizedState=Et=t:Et=Et.next=t,Et}function _t(){if(tt===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var s=Et===null?Me.memoizedState:Et.next;if(s!==null)Et=s,tt=t;else{if(t===null)throw Me.alternate===null?Error(i(467)):Error(i(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Et===null?Me.memoizedState=Et=t:Et=Et.next=t}return Et}function ou(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(t){var s=cl;return cl+=1,$a===null&&($a=[]),t=Rp($a,t,s),s=Me,(Et===null?s.memoizedState:Et.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?_y:nf),t}function lu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ul(t);if(t.$$typeof===J)return Gt(t)}throw Error(i(438,String(t)))}function Gd(t){var s=null,a=Me.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ou(),Me.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=j;return s.index++,a}function Ws(t,s){return typeof s=="function"?s(t):s}function cu(t){var s=_t();return $d(s,tt,t)}function $d(t,s,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}s.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var E=x=null,M=null,$=s,ee=!1;do{var re=$.lane&-536870913;if(re!==$.lane?(Pe&re)===re:(Xs&re)===re){var K=$.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),re===za&&(ee=!0);else if((Xs&K)===K){$=$.next,K===za&&(ee=!0);continue}else re={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(E=M=re,x=m):M=M.next=re,Me.lanes|=K,Wr|=K;re=$.action,Ji&&a(m,re),m=$.hasEagerState?$.eagerState:a(m,re)}else K={lane:re,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(E=M=K,x=m):M=M.next=K,Me.lanes|=re,Wr|=re;$=$.next}while($!==null&&$!==s);if(M===null?x=m:M.next=E,!Rn(m,t.memoizedState)&&(Tt=!0,ee&&(a=Ba,a!==null)))throw a;t.memoizedState=m,t.baseState=x,t.baseQueue=M,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Kd(t){var s=_t(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do m=t(m,x.action),x=x.next;while(x!==f);Rn(m,s.memoizedState)||(Tt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function Pp(t,s,a){var l=Me,f=_t(),m=Fe;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=s();var x=!Rn((tt||f).memoizedState,a);if(x&&(f.memoizedState=a,Tt=!0),f=f.queue,Xd(qp.bind(null,l,f,t),[t]),f.getSnapshot!==s||x||Et!==null&&Et.memoizedState.tag&1){if(l.flags|=2048,Ka(9,{destroy:void 0},Bp.bind(null,l,f,a,s),null),rt===null)throw Error(i(349));m||(Xs&127)!==0||zp(l,s,a)}return a}function zp(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Me.updateQueue,s===null?(s=ou(),Me.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Bp(t,s,a,l){s.value=a,s.getSnapshot=l,Fp(s)&&Hp(t)}function qp(t,s,a){return a(function(){Fp(s)&&Hp(t)})}function Fp(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Rn(t,a)}catch{return!0}}function Hp(t){var s=Fi(t,2);s!==null&&Tn(s,t,2)}function Yd(t){var s=gn();if(typeof t=="function"){var a=t;if(t=a(),Ji){Ln(!0);try{a()}finally{Ln(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:t},s}function Gp(t,s,a,l){return t.baseState=a,$d(t,tt,typeof l=="function"?l:Ws)}function pE(t,s,a,l,f){if(du(t))throw Error(i(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};O.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,$p(s,m)):(m.next=a.next,s.pending=a.next=m)}}function $p(t,s){var a=s.action,l=s.payload,f=t.state;if(s.isTransition){var m=O.T,x={};O.T=x;try{var E=a(f,l),M=O.S;M!==null&&M(x,E),Kp(t,s,E)}catch($){Qd(t,s,$)}finally{m!==null&&x.types!==null&&(m.types=x.types),O.T=m}}else try{m=a(f,l),Kp(t,s,m)}catch($){Qd(t,s,$)}}function Kp(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Yp(t,s,l)},function(l){return Qd(t,s,l)}):Yp(t,s,a)}function Yp(t,s,a){s.status="fulfilled",s.value=a,Qp(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,$p(t,a)))}function Qd(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,Qp(s),s=s.next;while(s!==l)}t.action=null}function Qp(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Xp(t,s){return s}function Wp(t,s){if(Fe){var a=rt.formState;if(a!==null){e:{var l=Me;if(Fe){if(at){t:{for(var f=at,m=Hn;f.nodeType!==8;){if(!m){f=null;break t}if(f=$n(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){at=$n(f.nextSibling),l=f.data==="F!";break e}}qr(l)}l=!1}l&&(s=a[0])}}return a=gn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xp,lastRenderedState:s},a.queue=l,a=py.bind(null,Me,l),l.dispatch=a,l=Yd(!1),m=tf.bind(null,Me,!1,l.queue),l=gn(),f={state:s,dispatch:null,action:t,pending:null},l.queue=f,a=pE.bind(null,Me,f,m,a),f.dispatch=a,l.memoizedState=t,[s,a,!1]}function Jp(t){var s=_t();return Zp(s,tt,t)}function Zp(t,s,a){if(s=$d(t,s,Xp)[0],t=cu(Ws)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=ul(s)}catch(x){throw x===qa?Zc:x}else l=s;s=_t();var f=s.queue,m=f.dispatch;return a!==s.memoizedState&&(Me.flags|=2048,Ka(9,{destroy:void 0},yE.bind(null,f,a),null)),[l,m,t]}function yE(t,s){t.action=s}function ey(t){var s=_t(),a=tt;if(a!==null)return Zp(s,a,t);_t(),s=s.memoizedState,a=_t();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Ka(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Me.updateQueue,s===null&&(s=ou(),Me.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function ty(){return _t().memoizedState}function uu(t,s,a,l){var f=gn();Me.flags|=t,f.memoizedState=Ka(1|s,{destroy:void 0},a,l===void 0?null:l)}function hu(t,s,a,l){var f=_t();l=l===void 0?null:l;var m=f.memoizedState.inst;tt!==null&&l!==null&&zd(l,tt.memoizedState.deps)?f.memoizedState=Ka(s,m,a,l):(Me.flags|=t,f.memoizedState=Ka(1|s,m,a,l))}function ny(t,s){uu(8390656,8,t,s)}function Xd(t,s){hu(2048,8,t,s)}function vE(t){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=ou(),Me.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function sy(t){var s=_t().memoizedState;return vE({ref:s,nextImpl:t}),function(){if((Xe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function ry(t,s){return hu(4,2,t,s)}function iy(t,s){return hu(4,4,t,s)}function ay(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function oy(t,s,a){a=a!=null?a.concat([t]):null,hu(4,4,ay.bind(null,s,t),a)}function Wd(){}function ly(t,s){var a=_t();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&zd(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function cy(t,s){var a=_t();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&zd(s,l[1]))return l[0];if(l=t(),Ji){Ln(!0);try{t()}finally{Ln(!1)}}return a.memoizedState=[l,s],l}function Jd(t,s,a){return a===void 0||(Xs&1073741824)!==0&&(Pe&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=u0(),Me.lanes|=t,Wr|=t,a)}function uy(t,s,a,l){return Rn(a,s)?a:Ha.current!==null?(t=Jd(t,a,l),Rn(t,s)||(Tt=!0),t):(Xs&42)===0||(Xs&1073741824)!==0&&(Pe&261930)===0?(Tt=!0,t.memoizedState=a):(t=u0(),Me.lanes|=t,Wr|=t,s)}function hy(t,s,a,l,f){var m=W.p;W.p=m!==0&&8>m?m:8;var x=O.T,E={};O.T=E,tf(t,!1,s,a);try{var M=f(),$=O.S;if($!==null&&$(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ee=fE(M,l);hl(t,s,ee,On(t))}else hl(t,s,l,On(t))}catch(re){hl(t,s,{then:function(){},status:"rejected",reason:re},On())}finally{W.p=m,x!==null&&E.types!==null&&(x.types=E.types),O.T=x}}function _E(){}function Zd(t,s,a,l){if(t.tag!==5)throw Error(i(476));var f=dy(t).queue;hy(t,f,s,de,a===null?_E:function(){return fy(t),a(l)})}function dy(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:de},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function fy(t){var s=dy(t);s.next===null&&(s=t.alternate.memoizedState),hl(t,s.next.queue,{},On())}function ef(){return Gt(Rl)}function my(){return _t().memoizedState}function gy(){return _t().memoizedState}function xE(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=On();t=Gr(a);var l=$r(s,t,a);l!==null&&(Tn(l,s,a),al(l,s,a)),s={cache:Cd()},t.payload=s;return}s=s.return}}function bE(t,s,a){var l=On();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},du(t)?yy(s,a):(a=vd(t,s,a,l),a!==null&&(Tn(a,t,l),vy(a,s,l)))}function py(t,s,a){var l=On();hl(t,s,a,l)}function hl(t,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(du(t))yy(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var x=s.lastRenderedState,E=m(x,a);if(f.hasEagerState=!0,f.eagerState=E,Rn(E,x))return $c(t,s,f,0),rt===null&&Gc(),!1}catch{}finally{}if(a=vd(t,s,f,l),a!==null)return Tn(a,t,l),vy(a,s,l),!0}return!1}function tf(t,s,a,l){if(l={lane:2,revertLane:Of(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},du(t)){if(s)throw Error(i(479))}else s=vd(t,a,l,2),s!==null&&Tn(s,t,2)}function du(t){var s=t.alternate;return t===Me||s!==null&&s===Me}function yy(t,s){Ga=iu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function vy(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Tr(t,a)}}var dl={readContext:Gt,use:lu,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};dl.useEffectEvent=mt;var _y={readContext:Gt,use:lu,useCallback:function(t,s){return gn().memoizedState=[t,s===void 0?null:s],t},useContext:Gt,useEffect:ny,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,uu(4194308,4,ay.bind(null,s,t),a)},useLayoutEffect:function(t,s){return uu(4194308,4,t,s)},useInsertionEffect:function(t,s){uu(4,2,t,s)},useMemo:function(t,s){var a=gn();s=s===void 0?null:s;var l=t();if(Ji){Ln(!0);try{t()}finally{Ln(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=gn();if(a!==void 0){var f=a(s);if(Ji){Ln(!0);try{a(s)}finally{Ln(!1)}}}else f=s;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=bE.bind(null,Me,t),[l.memoizedState,t]},useRef:function(t){var s=gn();return t={current:t},s.memoizedState=t},useState:function(t){t=Yd(t);var s=t.queue,a=py.bind(null,Me,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Wd,useDeferredValue:function(t,s){var a=gn();return Jd(a,t,s)},useTransition:function(){var t=Yd(!1);return t=hy.bind(null,Me,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Me,f=gn();if(Fe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),rt===null)throw Error(i(349));(Pe&127)!==0||zp(l,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,ny(qp.bind(null,l,m,t),[t]),l.flags|=2048,Ka(9,{destroy:void 0},Bp.bind(null,l,m,a,s),null),a},useId:function(){var t=gn(),s=rt.identifierPrefix;if(Fe){var a=_s,l=vs;a=(l&~(1<<32-un(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=au++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=mE++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:ef,useFormState:Wp,useActionState:Wp,useOptimistic:function(t){var s=gn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=tf.bind(null,Me,!0,a),a.dispatch=s,[t,s]},useMemoCache:Gd,useCacheRefresh:function(){return gn().memoizedState=xE.bind(null,Me)},useEffectEvent:function(t){var s=gn(),a={impl:t};return s.memoizedState=a,function(){if((Xe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},nf={readContext:Gt,use:lu,useCallback:ly,useContext:Gt,useEffect:Xd,useImperativeHandle:oy,useInsertionEffect:ry,useLayoutEffect:iy,useMemo:cy,useReducer:cu,useRef:ty,useState:function(){return cu(Ws)},useDebugValue:Wd,useDeferredValue:function(t,s){var a=_t();return uy(a,tt.memoizedState,t,s)},useTransition:function(){var t=cu(Ws)[0],s=_t().memoizedState;return[typeof t=="boolean"?t:ul(t),s]},useSyncExternalStore:Pp,useId:my,useHostTransitionStatus:ef,useFormState:Jp,useActionState:Jp,useOptimistic:function(t,s){var a=_t();return Gp(a,tt,t,s)},useMemoCache:Gd,useCacheRefresh:gy};nf.useEffectEvent=sy;var xy={readContext:Gt,use:lu,useCallback:ly,useContext:Gt,useEffect:Xd,useImperativeHandle:oy,useInsertionEffect:ry,useLayoutEffect:iy,useMemo:cy,useReducer:Kd,useRef:ty,useState:function(){return Kd(Ws)},useDebugValue:Wd,useDeferredValue:function(t,s){var a=_t();return tt===null?Jd(a,t,s):uy(a,tt.memoizedState,t,s)},useTransition:function(){var t=Kd(Ws)[0],s=_t().memoizedState;return[typeof t=="boolean"?t:ul(t),s]},useSyncExternalStore:Pp,useId:my,useHostTransitionStatus:ef,useFormState:ey,useActionState:ey,useOptimistic:function(t,s){var a=_t();return tt!==null?Gp(a,tt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Gd,useCacheRefresh:gy};xy.useEffectEvent=sy;function sf(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:w({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var rf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=On(),f=Gr(l);f.payload=s,a!=null&&(f.callback=a),s=$r(t,f,l),s!==null&&(Tn(s,t,l),al(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=On(),f=Gr(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=$r(t,f,l),s!==null&&(Tn(s,t,l),al(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=On(),l=Gr(a);l.tag=2,s!=null&&(l.callback=s),s=$r(t,l,a),s!==null&&(Tn(s,t,a),al(s,t,a))}};function by(t,s,a,l,f,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,x):s.prototype&&s.prototype.isPureReactComponent?!Jo(a,l)||!Jo(f,m):!0}function wy(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&rf.enqueueReplaceState(s,s.state,null)}function Zi(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=w({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Ey(t){Hc(t)}function Ty(t){console.error(t)}function Sy(t){Hc(t)}function fu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Ay(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function af(t,s,a){return a=Gr(a),a.tag=3,a.payload={element:null},a.callback=function(){fu(t,s)},a}function Ny(t){return t=Gr(t),t.tag=3,t}function Ry(t,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){Ay(s,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){Ay(s,a,l),typeof f!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function wE(t,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Pa(s,a,f,!0),a=jn.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?Su():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===eu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),If(t,l,f)),!1;case 22:return a.flags|=65536,l===eu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),If(t,l,f)),!1}throw Error(i(435,a.tag))}return If(t,l,f),Su(),!1}if(Fe)return s=jn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Td&&(t=Error(i(422),{cause:l}),tl(Bn(t,a)))):(l!==Td&&(s=Error(i(423),{cause:l}),tl(Bn(s,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Bn(l,a),f=af(t.stateNode,l,f),kd(t,f),gt!==4&&(gt=2)),!1;var m=Error(i(520),{cause:l});if(m=Bn(m,a),xl===null?xl=[m]:xl.push(m),gt!==4&&(gt=2),s===null)return!0;l=Bn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=af(a.stateNode,l,t),kd(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Jr===null||!Jr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ny(f),Ry(f,t,a,l),kd(a,f),!1}a=a.return}while(a!==null);return!1}var of=Error(i(461)),Tt=!1;function $t(t,s,a,l){s.child=t===null?Dp(s,null,a,l):Wi(s,t.child,a,l)}function Cy(t,s,a,l,f){a=a.render;var m=s.ref;if("ref"in l){var x={};for(var E in l)E!=="ref"&&(x[E]=l[E])}else x=l;return Ki(s),l=Bd(t,s,a,x,m,f),E=qd(),t!==null&&!Tt?(Fd(t,s,f),Js(t,s,f)):(Fe&&E&&wd(s),s.flags|=1,$t(t,s,l,f),s.child)}function jy(t,s,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!_d(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Iy(t,s,m,l,f)):(t=Yc(a.type,null,l,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!gf(t,f)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:Jo,a(x,l)&&t.ref===s.ref)return Js(t,s,f)}return s.flags|=1,t=$s(m,l),t.ref=s.ref,t.return=s,s.child=t}function Iy(t,s,a,l,f){if(t!==null){var m=t.memoizedProps;if(Jo(m,l)&&t.ref===s.ref)if(Tt=!1,s.pendingProps=l=m,gf(t,f))(t.flags&131072)!==0&&(Tt=!0);else return s.lanes=t.lanes,Js(t,s,f)}return lf(t,s,a,l,f)}function Dy(t,s,a,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=s.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,s.child=null;return My(t,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Jc(s,m!==null?m.cachePool:null),m!==null?kp(s,m):Vd(),Lp(s);else return l=s.lanes=536870912,My(t,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Jc(s,m.cachePool),kp(s,m),Yr(),s.memoizedState=null):(t!==null&&Jc(s,null),Vd(),Yr());return $t(t,s,f,a),s.child}function fl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function My(t,s,a,l,f){var m=Id();return m=m===null?null:{parent:wt._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&Jc(s,null),Vd(),Lp(s),t!==null&&Pa(t,s,l,!0),s.childLanes=f,null}function mu(t,s){return s=pu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Oy(t,s,a){return Wi(s,t.child,null,a),t=mu(s,s.pendingProps),t.flags|=2,In(s),s.memoizedState=null,t}function EE(t,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Fe){if(l.mode==="hidden")return t=mu(s,l),s.lanes=536870912,fl(null,t);if(Pd(s),(t=at)?(t=$0(t,Hn),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:zr!==null?{id:vs,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},a=yp(t),a.return=s,s.child=a,Ht=s,at=null)):t=null,t===null)throw qr(s);return s.lanes=536870912,null}return mu(s,l)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(Pd(s),f)if(s.flags&256)s.flags&=-257,s=Oy(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(Tt||Pa(t,s,a,!1),f=(a&t.childLanes)!==0,Tt||f){if(l=rt,l!==null&&(x=Sr(l,a),x!==0&&x!==m.retryLane))throw m.retryLane=x,Fi(t,x),Tn(l,t,x),of;Su(),s=Oy(t,s,a)}else t=m.treeContext,at=$n(x.nextSibling),Ht=s,Fe=!0,Br=null,Hn=!1,t!==null&&xp(s,t),s=mu(s,l),s.flags|=4096;return s}return t=$s(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function gu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function lf(t,s,a,l,f){return Ki(s),a=Bd(t,s,a,l,void 0,f),l=qd(),t!==null&&!Tt?(Fd(t,s,f),Js(t,s,f)):(Fe&&l&&wd(s),s.flags|=1,$t(t,s,a,f),s.child)}function ky(t,s,a,l,f,m){return Ki(s),s.updateQueue=null,a=Up(s,l,a,f),Vp(t),l=qd(),t!==null&&!Tt?(Fd(t,s,m),Js(t,s,m)):(Fe&&l&&wd(s),s.flags|=1,$t(t,s,a,m),s.child)}function Ly(t,s,a,l,f){if(Ki(s),s.stateNode===null){var m=ka,x=a.contextType;typeof x=="object"&&x!==null&&(m=Gt(x)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=rf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Md(s),x=a.contextType,m.context=typeof x=="object"&&x!==null?Gt(x):ka,m.state=s.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(sf(s,a,x,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&rf.enqueueReplaceState(m,m.state,null),ll(s,l,m,f),ol(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var E=s.memoizedProps,M=Zi(a,E);m.props=M;var $=m.context,ee=a.contextType;x=ka,typeof ee=="object"&&ee!==null&&(x=Gt(ee));var re=a.getDerivedStateFromProps;ee=typeof re=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,ee||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||$!==x)&&wy(s,m,l,x),Hr=!1;var K=s.memoizedState;m.state=K,ll(s,l,m,f),ol(),$=s.memoizedState,E||K!==$||Hr?(typeof re=="function"&&(sf(s,a,re,l),$=s.memoizedState),(M=Hr||by(s,a,M,l,K,$,x))?(ee||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=$),m.props=l,m.state=$,m.context=x,l=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Od(t,s),x=s.memoizedProps,ee=Zi(a,x),m.props=ee,re=s.pendingProps,K=m.context,$=a.contextType,M=ka,typeof $=="object"&&$!==null&&(M=Gt($)),E=a.getDerivedStateFromProps,($=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==re||K!==M)&&wy(s,m,l,M),Hr=!1,K=s.memoizedState,m.state=K,ll(s,l,m,f),ol();var Q=s.memoizedState;x!==re||K!==Q||Hr||t!==null&&t.dependencies!==null&&Xc(t.dependencies)?(typeof E=="function"&&(sf(s,a,E,l),Q=s.memoizedState),(ee=Hr||by(s,a,ee,l,K,Q,M)||t!==null&&t.dependencies!==null&&Xc(t.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Q,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Q,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Q),m.props=l,m.state=Q,m.context=M,l=ee):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,gu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=Wi(s,t.child,null,f),s.child=Wi(s,null,a,f)):$t(t,s,a,f),s.memoizedState=m.state,t=s.child):t=Js(t,s,f),t}function Vy(t,s,a,l){return Gi(),s.flags|=256,$t(t,s,a,l),s.child}var cf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uf(t){return{baseLanes:t,cachePool:Ap()}}function hf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Mn),t}function Uy(t,s,a){var l=s.pendingProps,f=!1,m=(s.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(vt.current&2)!==0),x&&(f=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,t===null){if(Fe){if(f?Kr(s):Yr(),(t=at)?(t=$0(t,Hn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:zr!==null?{id:vs,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},a=yp(t),a.return=s,s.child=a,Ht=s,at=null)):t=null,t===null)throw qr(s);return Kf(t)?s.lanes=32:s.lanes=536870912,null}var E=l.children;return l=l.fallback,f?(Yr(),f=s.mode,E=pu({mode:"hidden",children:E},f),l=Hi(l,f,a,null),E.return=s,l.return=s,E.sibling=l,s.child=E,l=s.child,l.memoizedState=uf(a),l.childLanes=hf(t,x,a),s.memoizedState=cf,fl(null,l)):(Kr(s),df(s,E))}var M=t.memoizedState;if(M!==null&&(E=M.dehydrated,E!==null)){if(m)s.flags&256?(Kr(s),s.flags&=-257,s=ff(t,s,a)):s.memoizedState!==null?(Yr(),s.child=t.child,s.flags|=128,s=null):(Yr(),E=l.fallback,f=s.mode,l=pu({mode:"visible",children:l.children},f),E=Hi(E,f,a,null),E.flags|=2,l.return=s,E.return=s,l.sibling=E,s.child=l,Wi(s,t.child,null,a),l=s.child,l.memoizedState=uf(a),l.childLanes=hf(t,x,a),s.memoizedState=cf,s=fl(null,l));else if(Kr(s),Kf(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var $=x.dgst;x=$,l=Error(i(419)),l.stack="",l.digest=x,tl({value:l,source:null,stack:null}),s=ff(t,s,a)}else if(Tt||Pa(t,s,a,!1),x=(a&t.childLanes)!==0,Tt||x){if(x=rt,x!==null&&(l=Sr(x,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Fi(t,l),Tn(x,t,l),of;$f(E)||Su(),s=ff(t,s,a)}else $f(E)?(s.flags|=192,s.child=t.child,s=null):(t=M.treeContext,at=$n(E.nextSibling),Ht=s,Fe=!0,Br=null,Hn=!1,t!==null&&xp(s,t),s=df(s,l.children),s.flags|=4096);return s}return f?(Yr(),E=l.fallback,f=s.mode,M=t.child,$=M.sibling,l=$s(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,$!==null?E=$s($,E):(E=Hi(E,f,a,null),E.flags|=2),E.return=s,l.return=s,l.sibling=E,s.child=l,fl(null,l),l=s.child,E=t.child.memoizedState,E===null?E=uf(a):(f=E.cachePool,f!==null?(M=wt._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=Ap(),E={baseLanes:E.baseLanes|a,cachePool:f}),l.memoizedState=E,l.childLanes=hf(t,x,a),s.memoizedState=cf,fl(t.child,l)):(Kr(s),a=t.child,t=a.sibling,a=$s(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(x=s.deletions,x===null?(s.deletions=[t],s.flags|=16):x.push(t)),s.child=a,s.memoizedState=null,a)}function df(t,s){return s=pu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function pu(t,s){return t=Cn(22,t,null,s),t.lanes=0,t}function ff(t,s,a){return Wi(s,t.child,null,a),t=df(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Py(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Nd(t.return,s,a)}function mf(t,s,a,l,f,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=f,x.treeForkCount=m)}function zy(t,s,a){var l=s.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var x=vt.current,E=(x&2)!==0;if(E?(x=x&1|2,s.flags|=128):x&=1,H(vt,x),$t(t,s,l,a),l=Fe?el:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Py(t,a,s);else if(t.tag===19)Py(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)t=a.alternate,t!==null&&ru(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),mf(s,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&ru(t)===null){s.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}mf(s,!0,a,null,m,l);break;case"together":mf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Js(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Wr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Pa(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=$s(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=$s(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function gf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Xc(t)))}function TE(t,s,a){switch(s.tag){case 3:ve(s,s.stateNode.containerInfo),Fr(s,wt,t.memoizedState.cache),Gi();break;case 27:case 5:pt(s);break;case 4:ve(s,s.stateNode.containerInfo);break;case 10:Fr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Pd(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Kr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Uy(t,s,a):(Kr(s),t=Js(t,s,a),t!==null?t.sibling:null);Kr(s);break;case 19:var f=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Pa(t,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return zy(t,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),H(vt,vt.current),l)break;return null;case 22:return s.lanes=0,Dy(t,s,a,s.pendingProps);case 24:Fr(s,wt,t.memoizedState.cache)}return Js(t,s,a)}function By(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Tt=!0;else{if(!gf(t,a)&&(s.flags&128)===0)return Tt=!1,TE(t,s,a);Tt=(t.flags&131072)!==0}else Tt=!1,Fe&&(s.flags&1048576)!==0&&_p(s,el,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=Qi(s.elementType),s.type=t,typeof t=="function")_d(t)?(l=Zi(t,l),s.tag=1,s=Ly(null,s,t,l,a)):(s.tag=0,s=lf(null,s,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===se){s.tag=11,s=Cy(null,s,t,l,a);break e}else if(f===I){s.tag=14,s=jy(null,s,t,l,a);break e}}throw s=Ae(t)||t,Error(i(306,s,""))}}return s;case 0:return lf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=Zi(l,s.pendingProps),Ly(t,s,l,f,a);case 3:e:{if(ve(s,s.stateNode.containerInfo),t===null)throw Error(i(387));l=s.pendingProps;var m=s.memoizedState;f=m.element,Od(t,s),ll(s,l,null,a);var x=s.memoizedState;if(l=x.cache,Fr(s,wt,l),l!==m.cache&&Rd(s,[wt],a,!0),ol(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Vy(t,s,l,a);break e}else if(l!==f){f=Bn(Error(i(424)),s),tl(f),s=Vy(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(at=$n(t.firstChild),Ht=s,Fe=!0,Br=null,Hn=!0,a=Dp(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gi(),l===f){s=Js(t,s,a);break e}$t(t,s,l,a)}s=s.child}return s;case 26:return gu(t,s),t===null?(a=J0(s.type,null,s.pendingProps,null))?s.memoizedState=a:Fe||(a=s.type,t=s.pendingProps,l=Du(ge.current).createElement(a),l[dt]=s,l[Ft]=t,Kt(l,a,t),yt(l),s.stateNode=l):s.memoizedState=J0(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return pt(s),t===null&&Fe&&(l=s.stateNode=Q0(s.type,s.pendingProps,ge.current),Ht=s,Hn=!0,f=at,ni(s.type)?(Yf=f,at=$n(l.firstChild)):at=f),$t(t,s,s.pendingProps.children,a),gu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Fe&&((f=l=at)&&(l=eT(l,s.type,s.pendingProps,Hn),l!==null?(s.stateNode=l,Ht=s,at=$n(l.firstChild),Hn=!1,f=!0):f=!1),f||qr(s)),pt(s),f=s.type,m=s.pendingProps,x=t!==null?t.memoizedProps:null,l=m.children,Ff(f,m)?l=null:x!==null&&Ff(f,x)&&(s.flags|=32),s.memoizedState!==null&&(f=Bd(t,s,gE,null,null,a),Rl._currentValue=f),gu(t,s),$t(t,s,l,a),s.child;case 6:return t===null&&Fe&&((t=a=at)&&(a=tT(a,s.pendingProps,Hn),a!==null?(s.stateNode=a,Ht=s,at=null,t=!0):t=!1),t||qr(s)),null;case 13:return Uy(t,s,a);case 4:return ve(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Wi(s,null,l,a):$t(t,s,l,a),s.child;case 11:return Cy(t,s,s.type,s.pendingProps,a);case 7:return $t(t,s,s.pendingProps,a),s.child;case 8:return $t(t,s,s.pendingProps.children,a),s.child;case 12:return $t(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Fr(s,s.type,l.value),$t(t,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,Ki(s),f=Gt(f),l=l(f),s.flags|=1,$t(t,s,l,a),s.child;case 14:return jy(t,s,s.type,s.pendingProps,a);case 15:return Iy(t,s,s.type,s.pendingProps,a);case 19:return zy(t,s,a);case 31:return EE(t,s,a);case 22:return Dy(t,s,a,s.pendingProps);case 24:return Ki(s),l=Gt(wt),t===null?(f=Id(),f===null&&(f=rt,m=Cd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),s.memoizedState={parent:l,cache:f},Md(s),Fr(s,wt,f)):((t.lanes&a)!==0&&(Od(t,s),ll(s,null,null,a),ol()),f=t.memoizedState,m=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Fr(s,wt,l)):(l=m.cache,Fr(s,wt,l),l!==f.cache&&Rd(s,[wt],a,!0))),$t(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Zs(t){t.flags|=4}function pf(t,s,a,l,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(m0())t.flags|=8192;else throw Xi=eu,Dd}else t.flags&=-16777217}function qy(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!sv(s))if(m0())t.flags|=8192;else throw Xi=eu,Dd}function yu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Oo():536870912,t.lanes|=s,Wa|=s)}function ml(t,s){if(!Fe)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ot(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function SE(t,s,a){var l=s.pendingProps;switch(Ed(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(s),null;case 1:return ot(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Qs(wt),Le(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ua(s)?Zs(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Sd())),ot(s),null;case 26:var f=s.type,m=s.memoizedState;return t===null?(Zs(s),m!==null?(ot(s),qy(s,m)):(ot(s),pf(s,f,null,l,a))):m?m!==t.memoizedState?(Zs(s),ot(s),qy(s,m)):(ot(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&Zs(s),ot(s),pf(s,f,t,l,a)),null;case 27:if(It(s),a=ge.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Zs(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return ot(s),null}t=le.current,Ua(s)?bp(s):(t=Q0(f,l,a),s.stateNode=t,Zs(s))}return ot(s),null;case 5:if(It(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Zs(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return ot(s),null}if(m=le.current,Ua(s))bp(s);else{var x=Du(ge.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?x.createElement(f,{is:l.is}):x.createElement(f)}}m[dt]=s,m[Ft]=l;e:for(x=s.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===s)break e;for(;x.sibling===null;){if(x.return===null||x.return===s)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}s.stateNode=m;e:switch(Kt(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Zs(s)}}return ot(s),pf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&Zs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(t=ge.current,Ua(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,f=Ht,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[dt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||U0(t.nodeValue,a)),t||qr(s,!0)}else t=Du(t).createTextNode(l),t[dt]=s,s.stateNode=t}return ot(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=Ua(s),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[dt]=s}else Gi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ot(s),t=!1}else a=Sd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(In(s),s):(In(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ot(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ua(s),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[dt]=s}else Gi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ot(s),f=!1}else f=Sd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(In(s),s):(In(s),null)}return In(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),yu(s,s.updateQueue),ot(s),null);case 4:return Le(),t===null&&Uf(s.stateNode.containerInfo),ot(s),null;case 10:return Qs(s.type),ot(s),null;case 19:if(Z(vt),l=s.memoizedState,l===null)return ot(s),null;if(f=(s.flags&128)!==0,m=l.rendering,m===null)if(f)ml(l,!1);else{if(gt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=ru(t),m!==null){for(s.flags|=128,ml(l,!1),t=m.updateQueue,s.updateQueue=t,yu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)pp(a,t),a=a.sibling;return H(vt,vt.current&1|2),Fe&&Ks(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&Bt()>wu&&(s.flags|=128,f=!0,ml(l,!1),s.lanes=4194304)}else{if(!f)if(t=ru(m),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,yu(s,t),ml(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Fe)return ot(s),null}else 2*Bt()-l.renderingStartTime>wu&&a!==536870912&&(s.flags|=128,f=!0,ml(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(t=l.last,t!==null?t.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Bt(),t.sibling=null,a=vt.current,H(vt,f?a&1|2:a&1),Fe&&Ks(s,l.treeForkCount),t):(ot(s),null);case 22:case 23:return In(s),Ud(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(ot(s),s.subtreeFlags&6&&(s.flags|=8192)):ot(s),a=s.updateQueue,a!==null&&yu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&Z(Yi),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Qs(wt),ot(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function AE(t,s){switch(Ed(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Qs(wt),Le(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return It(s),null;case 31:if(s.memoizedState!==null){if(In(s),s.alternate===null)throw Error(i(340));Gi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(In(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Gi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Z(vt),null;case 4:return Le(),null;case 10:return Qs(s.type),null;case 22:case 23:return In(s),Ud(),t!==null&&Z(Yi),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Qs(wt),null;case 25:return null;default:return null}}function Fy(t,s){switch(Ed(s),s.tag){case 3:Qs(wt),Le();break;case 26:case 27:case 5:It(s);break;case 4:Le();break;case 31:s.memoizedState!==null&&In(s);break;case 13:In(s);break;case 19:Z(vt);break;case 10:Qs(s.type);break;case 22:case 23:In(s),Ud(),t!==null&&Z(Yi);break;case 24:Qs(wt)}}function gl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,x=a.inst;l=m(),x.destroy=l}a=a.next}while(a!==f)}}catch(E){Ze(s,s.return,E)}}function Qr(t,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var x=l.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,f=s;var M=a,$=E;try{$()}catch(ee){Ze(f,M,ee)}}}l=l.next}while(l!==m)}}catch(ee){Ze(s,s.return,ee)}}function Hy(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Op(s,a)}catch(l){Ze(t,t.return,l)}}}function Gy(t,s,a){a.props=Zi(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ze(t,s,l)}}function pl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){Ze(t,s,f)}}function xs(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Ze(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Ze(t,s,f)}else a.current=null}function $y(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Ze(t,t.return,f)}}function yf(t,s,a){try{var l=t.stateNode;YE(l,t.type,a,s),l[Ft]=s}catch(f){Ze(t,t.return,f)}}function Ky(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ni(t.type)||t.tag===4}function vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ky(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ni(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _f(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Mt));else if(l!==4&&(l===27&&ni(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(_f(t,s,a),t=t.sibling;t!==null;)_f(t,s,a),t=t.sibling}function vu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&ni(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(vu(t,s,a),t=t.sibling;t!==null;)vu(t,s,a),t=t.sibling}function Yy(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Kt(s,l,a),s[dt]=t,s[Ft]=a}catch(m){Ze(t,t.return,m)}}var er=!1,St=!1,xf=!1,Qy=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function NE(t,s){if(t=t.containerInfo,Bf=Pu,t=op(t),dd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,E=-1,M=-1,$=0,ee=0,re=t,K=null;t:for(;;){for(var Q;re!==a||f!==0&&re.nodeType!==3||(E=x+f),re!==m||l!==0&&re.nodeType!==3||(M=x+l),re.nodeType===3&&(x+=re.nodeValue.length),(Q=re.firstChild)!==null;)K=re,re=Q;for(;;){if(re===t)break t;if(K===a&&++$===f&&(E=x),K===m&&++ee===l&&(M=x),(Q=re.nextSibling)!==null)break;re=K,K=re.parentNode}re=Q}a=E===-1||M===-1?null:{start:E,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(qf={focusedElem:t,selectionRange:a},Pu=!1,Lt=s;Lt!==null;)if(s=Lt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Lt=t;else for(;Lt!==null;){switch(s=Lt,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ye=Zi(a.type,f);t=l.getSnapshotBeforeUpdate(ye,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Se){Ze(a,a.return,Se)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Gf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,Lt=t;break}Lt=s.return}}function Xy(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:nr(t,a),l&4&&gl(5,a);break;case 1:if(nr(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(x){Ze(a,a.return,x)}else{var f=Zi(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(x){Ze(a,a.return,x)}}l&64&&Hy(a),l&512&&pl(a,a.return);break;case 3:if(nr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Op(t,s)}catch(x){Ze(a,a.return,x)}}break;case 27:s===null&&l&4&&Yy(a);case 26:case 5:nr(t,a),s===null&&l&4&&$y(a),l&512&&pl(a,a.return);break;case 12:nr(t,a);break;case 31:nr(t,a),l&4&&Zy(t,a);break;case 13:nr(t,a),l&4&&e0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=LE.bind(null,a),nT(t,a))));break;case 22:if(l=a.memoizedState!==null||er,!l){s=s!==null&&s.memoizedState!==null||St,f=er;var m=St;er=l,(St=s)&&!m?sr(t,a,(a.subtreeFlags&8772)!==0):nr(t,a),er=f,St=m}break;case 30:break;default:nr(t,a)}}function Wy(t){var s=t.alternate;s!==null&&(t.alternate=null,Wy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Ii(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,xn=!1;function tr(t,s,a){for(a=a.child;a!==null;)Jy(t,s,a),a=a.sibling}function Jy(t,s,a){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(xr,a)}catch{}switch(a.tag){case 26:St||xs(a,s),tr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:St||xs(a,s);var l=ct,f=xn;ni(a.type)&&(ct=a.stateNode,xn=!1),tr(t,s,a),Sl(a.stateNode),ct=l,xn=f;break;case 5:St||xs(a,s);case 6:if(l=ct,f=xn,ct=null,tr(t,s,a),ct=l,xn=f,ct!==null)if(xn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(m){Ze(a,s,m)}else try{ct.removeChild(a.stateNode)}catch(m){Ze(a,s,m)}break;case 18:ct!==null&&(xn?(t=ct,H0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),io(t)):H0(ct,a.stateNode));break;case 4:l=ct,f=xn,ct=a.stateNode.containerInfo,xn=!0,tr(t,s,a),ct=l,xn=f;break;case 0:case 11:case 14:case 15:Qr(2,a,s),St||Qr(4,a,s),tr(t,s,a);break;case 1:St||(xs(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Gy(a,s,l)),tr(t,s,a);break;case 21:tr(t,s,a);break;case 22:St=(l=St)||a.memoizedState!==null,tr(t,s,a),St=l;break;default:tr(t,s,a)}}function Zy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{io(t)}catch(a){Ze(s,s.return,a)}}}function e0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{io(t)}catch(a){Ze(s,s.return,a)}}function RE(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Qy),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Qy),s;default:throw Error(i(435,t.tag))}}function _u(t,s){var a=RE(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=VE.bind(null,t,l);l.then(f,f)}})}function bn(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,x=s,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(ni(E.type)){ct=E.stateNode,xn=!1;break e}break;case 5:ct=E.stateNode,xn=!1;break e;case 3:case 4:ct=E.stateNode.containerInfo,xn=!0;break e}E=E.return}if(ct===null)throw Error(i(160));Jy(m,x,f),ct=null,xn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)t0(s,t),s=s.sibling}var ns=null;function t0(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(s,t),wn(t),l&4&&(Qr(3,t,t.return),gl(3,t),Qr(5,t,t.return));break;case 1:bn(s,t),wn(t),l&512&&(St||a===null||xs(a,a.return)),l&64&&er&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ns;if(bn(s,t),wn(t),l&512&&(St||a===null||xs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Us]||m[dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Kt(m,l,a),m[dt]=t,yt(m),l=m;break e;case"link":var x=tv("link","href",f).get(l+(a.href||""));if(x){for(var E=0;E<x.length;E++)if(m=x[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(E,1);break t}}m=f.createElement(l),Kt(m,l,a),f.head.appendChild(m);break;case"meta":if(x=tv("meta","content",f).get(l+(a.content||""))){for(E=0;E<x.length;E++)if(m=x[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(E,1);break t}}m=f.createElement(l),Kt(m,l,a),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[dt]=t,yt(m),l=m}t.stateNode=l}else nv(f,t.type,t.stateNode);else t.stateNode=ev(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?nv(f,t.type,t.stateNode):ev(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&yf(t,t.memoizedProps,a.memoizedProps)}break;case 27:bn(s,t),wn(t),l&512&&(St||a===null||xs(a,a.return)),a!==null&&l&4&&yf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(bn(s,t),wn(t),l&512&&(St||a===null||xs(a,a.return)),t.flags&32){f=t.stateNode;try{Pn(f,"")}catch(ye){Ze(t,t.return,ye)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,yf(t,f,a!==null?a.memoizedProps:f)),l&1024&&(xf=!0);break;case 6:if(bn(s,t),wn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ye){Ze(t,t.return,ye)}}break;case 3:if(ku=null,f=ns,ns=Mu(s.containerInfo),bn(s,t),ns=f,wn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{io(s.containerInfo)}catch(ye){Ze(t,t.return,ye)}xf&&(xf=!1,n0(t));break;case 4:l=ns,ns=Mu(t.stateNode.containerInfo),bn(s,t),wn(t),ns=l;break;case 12:bn(s,t),wn(t);break;case 31:bn(s,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_u(t,l)));break;case 13:bn(s,t),wn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(bu=Bt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_u(t,l)));break;case 22:f=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,$=er,ee=St;if(er=$||f,St=ee||M,bn(s,t),St=ee,er=$,wn(t),l&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||M||er||St||ea(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){M=a=s;try{if(m=M.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=M.stateNode;var re=M.memoizedProps.style,K=re!=null&&re.hasOwnProperty("display")?re.display:null;E.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ye){Ze(M,M.return,ye)}}}else if(s.tag===6){if(a===null){M=s;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(ye){Ze(M,M.return,ye)}}}else if(s.tag===18){if(a===null){M=s;try{var Q=M.stateNode;f?G0(Q,!0):G0(M.stateNode,!1)}catch(ye){Ze(M,M.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,_u(t,a))));break;case 19:bn(s,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_u(t,l)));break;case 30:break;case 21:break;default:bn(s,t),wn(t)}}function wn(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(Ky(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=vf(t);vu(t,m,f);break;case 5:var x=a.stateNode;a.flags&32&&(Pn(x,""),a.flags&=-33);var E=vf(t);vu(t,E,x);break;case 3:case 4:var M=a.stateNode.containerInfo,$=vf(t);_f(t,$,M);break;default:throw Error(i(161))}}catch(ee){Ze(t,t.return,ee)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function n0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;n0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function nr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Xy(t,s.alternate,s),s=s.sibling}function ea(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Qr(4,s,s.return),ea(s);break;case 1:xs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Gy(s,s.return,a),ea(s);break;case 27:Sl(s.stateNode);case 26:case 5:xs(s,s.return),ea(s);break;case 22:s.memoizedState===null&&ea(s);break;case 30:ea(s);break;default:ea(s)}t=t.sibling}}function sr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=t,m=s,x=m.flags;switch(m.tag){case 0:case 11:case 15:sr(f,m,a),gl(4,m);break;case 1:if(sr(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){Ze(l,l.return,$)}if(l=m,f=l.updateQueue,f!==null){var E=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)Mp(M[f],E)}catch($){Ze(l,l.return,$)}}a&&x&64&&Hy(m),pl(m,m.return);break;case 27:Yy(m);case 26:case 5:sr(f,m,a),a&&l===null&&x&4&&$y(m),pl(m,m.return);break;case 12:sr(f,m,a);break;case 31:sr(f,m,a),a&&x&4&&Zy(f,m);break;case 13:sr(f,m,a),a&&x&4&&e0(f,m);break;case 22:m.memoizedState===null&&sr(f,m,a),pl(m,m.return);break;case 30:break;default:sr(f,m,a)}s=s.sibling}}function bf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&nl(a))}function wf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&nl(t))}function ss(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)s0(t,s,a,l),s=s.sibling}function s0(t,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ss(t,s,a,l),f&2048&&gl(9,s);break;case 1:ss(t,s,a,l);break;case 3:ss(t,s,a,l),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&nl(t)));break;case 12:if(f&2048){ss(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,x=m.id,E=m.onPostCommit;typeof E=="function"&&E(x,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){Ze(s,s.return,M)}}else ss(t,s,a,l);break;case 31:ss(t,s,a,l);break;case 13:ss(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,x=s.alternate,s.memoizedState!==null?m._visibility&2?ss(t,s,a,l):yl(t,s):m._visibility&2?ss(t,s,a,l):(m._visibility|=2,Ya(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&bf(x,s);break;case 24:ss(t,s,a,l),f&2048&&wf(s.alternate,s);break;default:ss(t,s,a,l)}}function Ya(t,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,x=s,E=a,M=l,$=x.flags;switch(x.tag){case 0:case 11:case 15:Ya(m,x,E,M,f),gl(8,x);break;case 23:break;case 22:var ee=x.stateNode;x.memoizedState!==null?ee._visibility&2?Ya(m,x,E,M,f):yl(m,x):(ee._visibility|=2,Ya(m,x,E,M,f)),f&&$&2048&&bf(x.alternate,x);break;case 24:Ya(m,x,E,M,f),f&&$&2048&&wf(x.alternate,x);break;default:Ya(m,x,E,M,f)}s=s.sibling}}function yl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,f=l.flags;switch(l.tag){case 22:yl(a,l),f&2048&&bf(l.alternate,l);break;case 24:yl(a,l),f&2048&&wf(l.alternate,l);break;default:yl(a,l)}s=s.sibling}}var vl=8192;function Qa(t,s,a){if(t.subtreeFlags&vl)for(t=t.child;t!==null;)r0(t,s,a),t=t.sibling}function r0(t,s,a){switch(t.tag){case 26:Qa(t,s,a),t.flags&vl&&t.memoizedState!==null&&mT(a,ns,t.memoizedState,t.memoizedProps);break;case 5:Qa(t,s,a);break;case 3:case 4:var l=ns;ns=Mu(t.stateNode.containerInfo),Qa(t,s,a),ns=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=vl,vl=16777216,Qa(t,s,a),vl=l):Qa(t,s,a));break;default:Qa(t,s,a)}}function i0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function _l(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Lt=l,o0(l,t)}i0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)a0(t),t=t.sibling}function a0(t){switch(t.tag){case 0:case 11:case 15:_l(t),t.flags&2048&&Qr(9,t,t.return);break;case 3:_l(t);break;case 12:_l(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,xu(t)):_l(t);break;default:_l(t)}}function xu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Lt=l,o0(l,t)}i0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Qr(8,s,s.return),xu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,xu(s));break;default:xu(s)}t=t.sibling}}function o0(t,s){for(;Lt!==null;){var a=Lt;switch(a.tag){case 0:case 11:case 15:Qr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:nl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Lt=l;else e:for(a=t;Lt!==null;){l=Lt;var f=l.sibling,m=l.return;if(Wy(l),l===a){Lt=null;break e}if(f!==null){f.return=m,Lt=f;break e}Lt=m}}}var CE={getCacheForType:function(t){var s=Gt(wt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Gt(wt).controller.signal}},jE=typeof WeakMap=="function"?WeakMap:Map,Xe=0,rt=null,Ve=null,Pe=0,Je=0,Dn=null,Xr=!1,Xa=!1,Ef=!1,rr=0,gt=0,Wr=0,ta=0,Tf=0,Mn=0,Wa=0,xl=null,En=null,Sf=!1,bu=0,l0=0,wu=1/0,Eu=null,Jr=null,Ct=0,Zr=null,Ja=null,ir=0,Af=0,Nf=null,c0=null,bl=0,Rf=null;function On(){return(Xe&2)!==0&&Pe!==0?Pe&-Pe:O.T!==null?Of():Vs()}function u0(){if(Mn===0)if((Pe&536870912)===0||Fe){var t=us;us<<=1,(us&3932160)===0&&(us=262144),Mn=t}else Mn=536870912;return t=jn.current,t!==null&&(t.flags|=32),Mn}function Tn(t,s,a){(t===rt&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(Za(t,0),ei(t,Pe,Mn,!1)),Er(t,a),((Xe&2)===0||t!==rt)&&(t===rt&&((Xe&2)===0&&(ta|=a),gt===4&&ei(t,Pe,Mn,!1)),bs(t))}function h0(t,s,a){if((Xe&6)!==0)throw Error(i(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||wr(t,s),f=l?ME(t,s):jf(t,s,!0),m=l;do{if(f===0){Xa&&!l&&ei(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!IE(a)){f=jf(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var E=t;f=xl;var M=E.current.memoizedState.isDehydrated;if(M&&(Za(E,x).flags|=256),x=jf(E,x,!1),x!==2){if(Ef&&!M){E.errorRecoveryDisabledLanes|=m,ta|=m,f=4;break e}m=En,En=f,m!==null&&(En===null?En=m:En.push.apply(En,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){Za(t,0),ei(t,s,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ei(l,s,Mn,!Xr);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=bu+300-Bt(),10<f)){if(ei(l,s,Mn,!Xr),Vn(l,0,!0)!==0)break e;ir=s,l.timeoutHandle=q0(d0.bind(null,l,a,En,Eu,Sf,s,Mn,ta,Wa,Xr,m,"Throttled",-0,0),f);break e}d0(l,a,En,Eu,Sf,s,Mn,ta,Wa,Xr,m,null,-0,0)}}break}while(!0);bs(t)}function d0(t,s,a,l,f,m,x,E,M,$,ee,re,K,Q){if(t.timeoutHandle=-1,re=s.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mt},r0(s,m,re);var ye=(m&62914560)===m?bu-Bt():(m&4194048)===m?l0-Bt():0;if(ye=gT(re,ye),ye!==null){ir=m,t.cancelPendingCommit=ye(x0.bind(null,t,s,m,a,l,f,x,E,M,ee,re,null,K,Q)),ei(t,m,x,!$);return}}x0(t,s,m,a,l,f,x,E,M)}function IE(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Rn(m(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ei(t,s,a,l){s&=~Tf,s&=~ta,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var f=s;0<f;){var m=31-un(f),x=1<<m;l[m]=-1,f&=~x}a!==0&&ko(t,a,s)}function Tu(){return(Xe&6)===0?(wl(0),!1):!0}function Cf(){if(Ve!==null){if(Je===0)var t=Ve.return;else t=Ve,Ys=$i=null,Hd(t),Fa=null,rl=0,t=Ve;for(;t!==null;)Fy(t.alternate,t),t=t.return;Ve=null}}function Za(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,WE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ir=0,Cf(),rt=t,Ve=a=$s(t.current,null),Pe=s,Je=0,Dn=null,Xr=!1,Xa=wr(t,s),Ef=!1,Wa=Mn=Tf=ta=Wr=gt=0,En=xl=null,Sf=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var f=31-un(l),m=1<<f;s|=t[f],l&=~m}return rr=s,Gc(),a}function f0(t,s){Me=null,O.H=dl,s===qa||s===Zc?(s=Cp(),Je=3):s===Dd?(s=Cp(),Je=4):Je=s===of?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Dn=s,Ve===null&&(gt=1,fu(t,Bn(s,t.current)))}function m0(){var t=jn.current;return t===null?!0:(Pe&4194048)===Pe?Gn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?t===Gn:!1}function g0(){var t=O.H;return O.H=dl,t===null?dl:t}function p0(){var t=O.A;return O.A=CE,t}function Su(){gt=4,Xr||(Pe&4194048)!==Pe&&jn.current!==null||(Xa=!0),(Wr&134217727)===0&&(ta&134217727)===0||rt===null||ei(rt,Pe,Mn,!1)}function jf(t,s,a){var l=Xe;Xe|=2;var f=g0(),m=p0();(rt!==t||Pe!==s)&&(Eu=null,Za(t,s)),s=!1;var x=gt;e:do try{if(Je!==0&&Ve!==null){var E=Ve,M=Dn;switch(Je){case 8:Cf(),x=6;break e;case 3:case 2:case 9:case 6:jn.current===null&&(s=!0);var $=Je;if(Je=0,Dn=null,eo(t,E,M,$),a&&Xa){x=0;break e}break;default:$=Je,Je=0,Dn=null,eo(t,E,M,$)}}DE(),x=gt;break}catch(ee){f0(t,ee)}while(!0);return s&&t.shellSuspendCounter++,Ys=$i=null,Xe=l,O.H=f,O.A=m,Ve===null&&(rt=null,Pe=0,Gc()),x}function DE(){for(;Ve!==null;)y0(Ve)}function ME(t,s){var a=Xe;Xe|=2;var l=g0(),f=p0();rt!==t||Pe!==s?(Eu=null,wu=Bt()+500,Za(t,s)):Xa=wr(t,s);e:do try{if(Je!==0&&Ve!==null){s=Ve;var m=Dn;t:switch(Je){case 1:Je=0,Dn=null,eo(t,s,m,1);break;case 2:case 9:if(Np(m)){Je=0,Dn=null,v0(s);break}s=function(){Je!==2&&Je!==9||rt!==t||(Je=7),bs(t)},m.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Np(m)?(Je=0,Dn=null,v0(s)):(Je=0,Dn=null,eo(t,s,m,7));break;case 5:var x=null;switch(Ve.tag){case 26:x=Ve.memoizedState;case 5:case 27:var E=Ve;if(x?sv(x):E.stateNode.complete){Je=0,Dn=null;var M=E.sibling;if(M!==null)Ve=M;else{var $=E.return;$!==null?(Ve=$,Au($)):Ve=null}break t}}Je=0,Dn=null,eo(t,s,m,5);break;case 6:Je=0,Dn=null,eo(t,s,m,6);break;case 8:Cf(),gt=6;break e;default:throw Error(i(462))}}OE();break}catch(ee){f0(t,ee)}while(!0);return Ys=$i=null,O.H=l,O.A=f,Xe=a,Ve!==null?0:(rt=null,Pe=0,Gc(),gt)}function OE(){for(;Ve!==null&&!td();)y0(Ve)}function y0(t){var s=By(t.alternate,t,rr);t.memoizedProps=t.pendingProps,s===null?Au(t):Ve=s}function v0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=ky(a,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=ky(a,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:Hd(s);default:Fy(a,s),s=Ve=pp(s,rr),s=By(a,s,rr)}t.memoizedProps=t.pendingProps,s===null?Au(t):Ve=s}function eo(t,s,a,l){Ys=$i=null,Hd(s),Fa=null,rl=0;var f=s.return;try{if(wE(t,f,s,a,Pe)){gt=1,fu(t,Bn(a,t.current)),Ve=null;return}}catch(m){if(f!==null)throw Ve=f,m;gt=1,fu(t,Bn(a,t.current)),Ve=null;return}s.flags&32768?(Fe||l===1?t=!0:Xa||(Pe&536870912)!==0?t=!1:(Xr=t=!0,(l===2||l===9||l===3||l===6)&&(l=jn.current,l!==null&&l.tag===13&&(l.flags|=16384))),_0(s,t)):Au(s)}function Au(t){var s=t;do{if((s.flags&32768)!==0){_0(s,Xr);return}t=s.return;var a=SE(s.alternate,s,rr);if(a!==null){Ve=a;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=t}while(s!==null);gt===0&&(gt=5)}function _0(t,s){do{var a=AE(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);gt=6,Ve=null}function x0(t,s,a,l,f,m,x,E,M){t.cancelPendingCommit=null;do Nu();while(Ct!==0);if((Xe&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=yd,qt(t,a,m,x,E,M),t===rt&&(Ve=rt=null,Pe=0),Ja=s,Zr=t,ir=a,Af=m,Nf=f,c0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,UE(ks,function(){return S0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=O.T,O.T=null,f=W.p,W.p=2,x=Xe,Xe|=4;try{NE(t,s,a)}finally{Xe=x,W.p=f,O.T=l}}Ct=1,b0(),w0(),E0()}}function b0(){if(Ct===1){Ct=0;var t=Zr,s=Ja,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var l=W.p;W.p=2;var f=Xe;Xe|=4;try{t0(s,t);var m=qf,x=op(t.containerInfo),E=m.focusedElem,M=m.selectionRange;if(x!==E&&E&&E.ownerDocument&&ap(E.ownerDocument.documentElement,E)){if(M!==null&&dd(E)){var $=M.start,ee=M.end;if(ee===void 0&&(ee=$),"selectionStart"in E)E.selectionStart=$,E.selectionEnd=Math.min(ee,E.value.length);else{var re=E.ownerDocument||document,K=re&&re.defaultView||window;if(K.getSelection){var Q=K.getSelection(),ye=E.textContent.length,Se=Math.min(M.start,ye),st=M.end===void 0?Se:Math.min(M.end,ye);!Q.extend&&Se>st&&(x=st,st=Se,Se=x);var B=ip(E,Se),P=ip(E,st);if(B&&P&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==P.node||Q.focusOffset!==P.offset)){var G=re.createRange();G.setStart(B.node,B.offset),Q.removeAllRanges(),Se>st?(Q.addRange(G),Q.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),Q.addRange(G))}}}}for(re=[],Q=E;Q=Q.parentNode;)Q.nodeType===1&&re.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<re.length;E++){var ne=re[E];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Pu=!!Bf,qf=Bf=null}finally{Xe=f,W.p=l,O.T=a}}t.current=s,Ct=2}}function w0(){if(Ct===2){Ct=0;var t=Zr,s=Ja,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var l=W.p;W.p=2;var f=Xe;Xe|=4;try{Xy(t,s.alternate,s)}finally{Xe=f,W.p=l,O.T=a}}Ct=3}}function E0(){if(Ct===4||Ct===3){Ct=0,Io();var t=Zr,s=Ja,a=ir,l=c0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ct=5:(Ct=0,Ja=Zr=null,T0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Jr=null),Vo(a),s=s.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(xr,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=O.T,f=W.p,W.p=2,O.T=null;try{for(var m=t.onRecoverableError,x=0;x<l.length;x++){var E=l[x];m(E.value,{componentStack:E.stack})}}finally{O.T=s,W.p=f}}(ir&3)!==0&&Nu(),bs(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===Rf?bl++:(bl=0,Rf=t):bl=0,wl(0)}}function T0(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,nl(s)))}function Nu(){return b0(),w0(),E0(),S0()}function S0(){if(Ct!==5)return!1;var t=Zr,s=Af;Af=0;var a=Vo(ir),l=O.T,f=W.p;try{W.p=32>a?32:a,O.T=null,a=Nf,Nf=null;var m=Zr,x=ir;if(Ct=0,Ja=Zr=null,ir=0,(Xe&6)!==0)throw Error(i(331));var E=Xe;if(Xe|=4,a0(m.current),s0(m,m.current,x,a),Xe=E,wl(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(xr,m)}catch{}return!0}finally{W.p=f,O.T=l,T0(t,s)}}function A0(t,s,a){s=Bn(a,s),s=af(t.stateNode,s,2),t=$r(t,s,2),t!==null&&(Er(t,2),bs(t))}function Ze(t,s,a){if(t.tag===3)A0(t,t,a);else for(;s!==null;){if(s.tag===3){A0(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Jr===null||!Jr.has(l))){t=Bn(a,t),a=Ny(2),l=$r(s,a,2),l!==null&&(Ry(a,l,s,t),Er(l,2),bs(l));break}}s=s.return}}function If(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new jE;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(Ef=!0,f.add(a),t=kE.bind(null,t,s,a),s.then(t,t))}function kE(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,rt===t&&(Pe&a)===a&&(gt===4||gt===3&&(Pe&62914560)===Pe&&300>Bt()-bu?(Xe&2)===0&&Za(t,0):Tf|=a,Wa===Pe&&(Wa=0)),bs(t)}function N0(t,s){s===0&&(s=Oo()),t=Fi(t,s),t!==null&&(Er(t,s),bs(t))}function LE(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),N0(t,a)}function VE(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),N0(t,a)}function UE(t,s){return Ri(t,s)}var Ru=null,to=null,Df=!1,Cu=!1,Mf=!1,ti=0;function bs(t){t!==to&&t.next===null&&(to===null?Ru=to=t:to=to.next=t),Cu=!0,Df||(Df=!0,zE())}function wl(t,s){if(!Mf&&Cu){Mf=!0;do for(var a=!1,l=Ru;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var x=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-un(42|t)+1)-1,m&=f&~(x&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,I0(l,m))}else m=Pe,m=Vn(l,l===rt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||wr(l,m)||(a=!0,I0(l,m));l=l.next}while(a);Mf=!1}}function PE(){R0()}function R0(){Cu=Df=!1;var t=0;ti!==0&&XE()&&(t=ti);for(var s=Bt(),a=null,l=Ru;l!==null;){var f=l.next,m=C0(l,s);m===0?(l.next=null,a===null?Ru=f:a.next=f,f===null&&(to=a)):(a=l,(t!==0||(m&3)!==0)&&(Cu=!0)),l=f}Ct!==0&&Ct!==5||wl(t),ti!==0&&(ti=0)}function C0(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-un(m),E=1<<x,M=f[x];M===-1?((E&a)===0||(E&l)!==0)&&(f[x]=ba(E,s)):M<=s&&(t.expiredLanes|=E),m&=~E}if(s=rt,a=Pe,a=Vn(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&xa(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||wr(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&xa(l),Vo(a)){case 2:case 8:a=Dt;break;case 32:a=ks;break;case 268435456:a=Do;break;default:a=ks}return l=j0.bind(null,t),a=Ri(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&xa(l),t.callbackPriority=2,t.callbackNode=null,2}function j0(t,s){if(Ct!==0&&Ct!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Nu()&&t.callbackNode!==a)return null;var l=Pe;return l=Vn(t,t===rt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(h0(t,l,s),C0(t,Bt()),t.callbackNode!=null&&t.callbackNode===a?j0.bind(null,t):null)}function I0(t,s){if(Nu())return null;h0(t,s,!0)}function zE(){JE(function(){(Xe&6)!==0?Ri(Rt,PE):R0()})}function Of(){if(ti===0){var t=za;t===0&&(t=ji,ji<<=1,(ji&261888)===0&&(ji=256)),ti=t}return ti}function D0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:gs(""+t)}function M0(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function BE(t,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var m=D0((f[Ft]||null).action),x=l.submitter;x&&(s=(s=x[Ft]||null)?D0(s.formAction):x.getAttribute("formAction"),s!==null&&(m=s,x=null));var E=new Li("action","action",null,l,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ti!==0){var M=x?M0(f,x):new FormData(f);Zd(a,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(E.preventDefault(),M=x?M0(f,x):new FormData(f),Zd(a,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var kf=0;kf<pd.length;kf++){var Lf=pd[kf],qE=Lf.toLowerCase(),FE=Lf[0].toUpperCase()+Lf.slice(1);ts(qE,"on"+FE)}ts(up,"onAnimationEnd"),ts(hp,"onAnimationIteration"),ts(dp,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(iE,"onTransitionRun"),ts(aE,"onTransitionStart"),ts(oE,"onTransitionCancel"),ts(fp,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function O0(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var x=l.length-1;0<=x;x--){var E=l[x],M=E.instance,$=E.currentTarget;if(E=E.listener,M!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=$;try{m(f)}catch(ee){Hc(ee)}f.currentTarget=null,m=M}else for(x=0;x<l.length;x++){if(E=l[x],M=E.instance,$=E.currentTarget,E=E.listener,M!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=$;try{m(f)}catch(ee){Hc(ee)}f.currentTarget=null,m=M}}}}function Ue(t,s){var a=s[Ar];a===void 0&&(a=s[Ar]=new Set);var l=t+"__bubble";a.has(l)||(k0(s,t,2,!1),a.add(l))}function Vf(t,s,a){var l=0;s&&(l|=4),k0(a,t,l,s)}var ju="_reactListening"+Math.random().toString(36).slice(2);function Uf(t){if(!t[ju]){t[ju]=!0,wa.forEach(function(a){a!=="selectionchange"&&(HE.has(a)||Vf(a,!1,t),Vf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ju]||(s[ju]=!0,Vf("selectionchange",!1,s))}}function k0(t,s,a,l){switch(uv(s)){case 2:var f=vT;break;case 8:f=_T;break;default:f=Zf}a=f.bind(null,s,a,t),f=void 0,!Go||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(s,a,{capture:!0,passive:f}):t.addEventListener(s,a,!0):f!==void 0?t.addEventListener(s,a,{passive:f}):t.addEventListener(s,a,!1)}function Pf(t,s,a,l,f){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var E=l.stateNode.containerInfo;if(E===f)break;if(x===4)for(x=l.return;x!==null;){var M=x.tag;if((M===3||M===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;E!==null;){if(x=Ps(E),x===null)return;if(M=x.tag,M===5||M===6||M===26||M===27){l=m=x;continue e}E=E.parentNode}}l=l.return}Rc(function(){var $=m,ee=Na(a),re=[];e:{var K=mp.get(t);if(K!==void 0){var Q=Li,ye=t;switch(t){case"keypress":if(ki(a)===0)break e;case"keydown":case"keyup":Q=Vc;break;case"focusin":ye="focus",Q=Lr;break;case"focusout":ye="blur",Q=Lr;break;case"beforeblur":case"afterblur":Q=Lr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Pc;break;case up:case hp:case dp:Q=ja;break;case fp:Q=Ia;break;case"scroll":case"scrollend":Q=Cc;break;case"wheel":Q=Bc;break;case"copy":case"cut":case"paste":Q=Mc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Xo;break;case"toggle":case"beforetoggle":Q=Ur}var Se=(s&4)!==0,st=!Se&&(t==="scroll"||t==="scrollend"),B=Se?K!==null?K+"Capture":null:K;Se=[];for(var P=$,G;P!==null;){var ne=P;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||B===null||(ne=vn(P,B),ne!=null&&Se.push(Tl(P,ne,G))),st)break;P=P.return}0<Se.length&&(K=new Q(K,ye,null,a,ee),re.push({event:K,listeners:Se}))}}if((s&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",K&&a!==Aa&&(ye=a.relatedTarget||a.fromElement)&&(Ps(ye)||ye[ds]))break e;if((Q||K)&&(K=ee.window===ee?ee:(K=ee.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(ye=a.relatedTarget||a.toElement,Q=$,ye=ye?Ps(ye):null,ye!==null&&(st=c(ye),Se=ye.tag,ye!==st||Se!==5&&Se!==27&&Se!==6)&&(ye=null)):(Q=null,ye=$),Q!==ye)){if(Se=jc,ne="onMouseLeave",B="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Se=Xo,ne="onPointerLeave",B="onPointerEnter",P="pointer"),st=Q==null?K:Di(Q),G=ye==null?K:Di(ye),K=new Se(ne,P+"leave",Q,a,ee),K.target=st,K.relatedTarget=G,ne=null,Ps(ee)===$&&(Se=new Se(B,P+"enter",ye,a,ee),Se.target=G,Se.relatedTarget=st,ne=Se),st=ne,Q&&ye)t:{for(Se=GE,B=Q,P=ye,G=0,ne=B;ne;ne=Se(ne))G++;ne=0;for(var Ee=P;Ee;Ee=Se(Ee))ne++;for(;0<G-ne;)B=Se(B),G--;for(;0<ne-G;)P=Se(P),ne--;for(;G--;){if(B===P||P!==null&&B===P.alternate){Se=B;break t}B=Se(B),P=Se(P)}Se=null}else Se=null;Q!==null&&L0(re,K,Q,Se,!1),ye!==null&&st!==null&&L0(re,st,ye,Se,!0)}}e:{if(K=$?Di($):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var Ke=Zg;else if(_n(K))if(ep)Ke=nE;else{Ke=eE;var xe=Zw}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&Fo($.elementType)&&(Ke=Zg):Ke=tE;if(Ke&&(Ke=Ke(t,$))){zi(re,Ke,a,ee);break e}xe&&xe(t,K,$),t==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&Sa(K,"number",K.value)}switch(xe=$?Di($):window,t){case"focusin":(_n(xe)||xe.contentEditable==="true")&&(Da=xe,fd=$,Zo=null);break;case"focusout":Zo=fd=Da=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,lp(re,a,ee);break;case"selectionchange":if(rE)break;case"keydown":case"keyup":lp(re,a,ee)}var Oe;if(v)e:{switch(t){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ke?We(t,a)&&(ze="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(q&&a.locale!=="ko"&&(ke||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ke&&(Oe=Dr()):(Nn=ee,Ra="value"in Nn?Nn.value:Nn.textContent,ke=!0)),xe=Iu($,ze),0<xe.length&&(ze=new Ko(ze,t,null,a,ee),re.push({event:ze,listeners:xe}),Oe?ze.data=Oe:(Oe=bt(a),Oe!==null&&(ze.data=Oe)))),(Oe=S?Ot(t,a):kt(t,a))&&(ze=Iu($,"onBeforeInput"),0<ze.length&&(xe=new Ko("onBeforeInput","beforeinput",null,a,ee),re.push({event:xe,listeners:ze}),xe.data=Oe)),BE(re,t,$,a,ee)}O0(re,s)})}function Tl(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Iu(t,s){for(var a=s+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=vn(t,a),f!=null&&l.unshift(Tl(t,f,m)),f=vn(t,s),f!=null&&l.push(Tl(t,f,m))),t.tag===3)return l;t=t.return}return[]}function GE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function L0(t,s,a,l,f){for(var m=s._reactName,x=[];a!==null&&a!==l;){var E=a,M=E.alternate,$=E.stateNode;if(E=E.tag,M!==null&&M===l)break;E!==5&&E!==26&&E!==27||$===null||(M=$,f?($=vn(a,m),$!=null&&x.unshift(Tl(a,$,M))):f||($=vn(a,m),$!=null&&x.push(Tl(a,$,M)))),a=a.return}x.length!==0&&t.push({event:s,listeners:x})}var $E=/\r\n?/g,KE=/\u0000|\uFFFD/g;function V0(t){return(typeof t=="string"?t:""+t).replace($E,`
`).replace(KE,"")}function U0(t,s){return s=V0(s),V0(t)===s}function nt(t,s,a,l,f,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Pn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Pn(t,""+l);break;case"className":Cr(t,"class",l);break;case"tabIndex":Cr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Cr(t,a,l);break;case"style":Ac(t,l,m);break;case"data":if(s!=="object"){Cr(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=gs(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&nt(t,s,"name",f.name,f,null),nt(t,s,"formEncType",f.formEncType,f,null),nt(t,s,"formMethod",f.formMethod,f,null),nt(t,s,"formTarget",f.formTarget,f,null)):(nt(t,s,"encType",f.encType,f,null),nt(t,s,"method",f.method,f,null),nt(t,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=gs(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Mt);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=gs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),Rr(t,"popover",l);break;case"xlinkActuate":Un(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Un(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Un(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Un(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Un(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Un(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Un(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Rr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=od.get(a)||a,Rr(t,a,l))}}function zf(t,s,a,l,f,m){switch(a){case"style":Ac(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Pn(t,l):(typeof l=="number"||typeof l=="bigint")&&Pn(t,""+l);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Mt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),m=t[Ft]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Rr(t,a,l)}}}function Kt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(t,s,m,x,a,null)}}f&&nt(t,s,"srcSet",a.srcSet,a,null),l&&nt(t,s,"src",a.src,a,null);return;case"input":Ue("invalid",t);var E=m=x=f=null,M=null,$=null;for(l in a)if(a.hasOwnProperty(l)){var ee=a[l];if(ee!=null)switch(l){case"name":f=ee;break;case"type":x=ee;break;case"checked":M=ee;break;case"defaultChecked":$=ee;break;case"value":m=ee;break;case"defaultValue":E=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:nt(t,s,l,ee,a,null)}}Mi(t,m,E,M,$,x,f,!1);return;case"select":Ue("invalid",t),l=x=m=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":x=E;break;case"multiple":l=E;default:nt(t,s,f,E,a,null)}s=m,a=x,t.multiple=!!l,s!=null?$e(t,!!l,s,!1):a!=null&&$e(t,!!l,a,!0);return;case"textarea":Ue("invalid",t),m=f=l=null;for(x in a)if(a.hasOwnProperty(x)&&(E=a[x],E!=null))switch(x){case"value":l=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:nt(t,s,x,E,a,null)}Ir(t,l,f,m);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(t,s,M,l,a,null)}return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(l=0;l<El.length;l++)Ue(El[l],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(l=a[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(t,s,$,l,a,null)}return;default:if(Fo(s)){for(ee in a)a.hasOwnProperty(ee)&&(l=a[ee],l!==void 0&&zf(t,s,ee,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&nt(t,s,E,l,a,null))}function YE(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,E=null,M=null,$=null,ee=null;for(Q in a){var re=a[Q];if(a.hasOwnProperty(Q)&&re!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":M=re;default:l.hasOwnProperty(Q)||nt(t,s,Q,null,l,re)}}for(var K in l){var Q=l[K];if(re=a[K],l.hasOwnProperty(K)&&(Q!=null||re!=null))switch(K){case"type":m=Q;break;case"name":f=Q;break;case"checked":$=Q;break;case"defaultChecked":ee=Q;break;case"value":x=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:Q!==re&&nt(t,s,K,Q,l,re)}}jr(t,x,E,M,$,ee,m,f);return;case"select":Q=x=E=K=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":Q=M;default:l.hasOwnProperty(m)||nt(t,s,m,null,l,M)}for(f in l)if(m=l[f],M=a[f],l.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":K=m;break;case"defaultValue":E=m;break;case"multiple":x=m;default:m!==M&&nt(t,s,f,m,l,M)}s=E,a=x,l=Q,K!=null?$e(t,!!a,K,!1):!!l!=!!a&&(s!=null?$e(t,!!a,s,!0):$e(t,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:nt(t,s,E,null,l,f)}for(x in l)if(f=l[x],m=a[x],l.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":K=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&nt(t,s,x,f,l,m)}Oi(t,K,Q);return;case"option":for(var ye in a)if(K=a[ye],a.hasOwnProperty(ye)&&K!=null&&!l.hasOwnProperty(ye))switch(ye){case"selected":t.selected=!1;break;default:nt(t,s,ye,null,l,K)}for(M in l)if(K=l[M],Q=a[M],l.hasOwnProperty(M)&&K!==Q&&(K!=null||Q!=null))switch(M){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:nt(t,s,M,K,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)K=a[Se],a.hasOwnProperty(Se)&&K!=null&&!l.hasOwnProperty(Se)&&nt(t,s,Se,null,l,K);for($ in l)if(K=l[$],Q=a[$],l.hasOwnProperty($)&&K!==Q&&(K!=null||Q!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:nt(t,s,$,K,l,Q)}return;default:if(Fo(s)){for(var st in a)K=a[st],a.hasOwnProperty(st)&&K!==void 0&&!l.hasOwnProperty(st)&&zf(t,s,st,void 0,l,K);for(ee in l)K=l[ee],Q=a[ee],!l.hasOwnProperty(ee)||K===Q||K===void 0&&Q===void 0||zf(t,s,ee,K,l,Q);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!l.hasOwnProperty(B)&&nt(t,s,B,null,l,K);for(re in l)K=l[re],Q=a[re],!l.hasOwnProperty(re)||K===Q||K==null&&Q==null||nt(t,s,re,K,l,Q)}function P0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,x=f.initiatorType,E=f.duration;if(m&&E&&P0(x)){for(x=0,E=f.responseEnd,l+=1;l<a.length;l++){var M=a[l],$=M.startTime;if($>E)break;var ee=M.transferSize,re=M.initiatorType;ee&&P0(re)&&(M=M.responseEnd,x+=ee*(M<E?1:(E-$)/(M-$)))}if(--l,s+=8*(m+x)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bf=null,qf=null;function Du(t){return t.nodeType===9?t:t.ownerDocument}function z0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B0(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Ff(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Hf=null;function XE(){var t=window.event;return t&&t.type==="popstate"?t===Hf?!1:(Hf=t,!0):(Hf=null,!1)}var q0=typeof setTimeout=="function"?setTimeout:void 0,WE=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,JE=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(t){return F0.resolve(null).then(t).catch(ZE)}:q0;function ZE(t){setTimeout(function(){throw t})}function ni(t){return t==="head"}function H0(t,s){var a=s,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),io(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Sl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Sl(a);for(var m=a.firstChild;m;){var x=m.nextSibling,E=m.nodeName;m[Us]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=x}}else a==="body"&&Sl(t.ownerDocument.body);a=f}while(a);io(s)}function G0(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Gf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Gf(a),Ii(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function eT(t,s,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Us])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=$n(t.nextSibling),t===null)break}return null}function tT(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=$n(t.nextSibling),t===null))return null;return t}function $0(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=$n(t.nextSibling),t===null))return null;return t}function $f(t){return t.data==="$?"||t.data==="$~"}function Kf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function nT(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function $n(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Yf=null;function K0(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return $n(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Y0(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function Q0(t,s,a){switch(s=Du(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Sl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ii(t)}var Kn=new Map,X0=new Set;function Mu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ar=W.d;W.d={f:sT,r:rT,D:iT,C:aT,L:oT,m:lT,X:uT,S:cT,M:hT};function sT(){var t=ar.f(),s=Tu();return t||s}function rT(t){var s=zs(t);s!==null&&s.tag===5&&s.type==="form"?fy(s):ar.r(t)}var no=typeof document>"u"?null:document;function W0(t,s,a){var l=no;if(l&&typeof s=="string"&&s){var f=ft(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),X0.has(f)||(X0.add(f),t={rel:t,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Kt(s,"link",t),yt(s),l.head.appendChild(s)))}}function iT(t){ar.D(t),W0("dns-prefetch",t,null)}function aT(t,s){ar.C(t,s),W0("preconnect",t,s)}function oT(t,s,a){ar.L(t,s,a);var l=no;if(l&&t&&s){var f='link[rel="preload"][as="'+ft(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ft(a.imageSizes)+'"]')):f+='[href="'+ft(t)+'"]';var m=f;switch(s){case"style":m=so(t);break;case"script":m=ro(t)}Kn.has(m)||(t=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Kn.set(m,t),l.querySelector(f)!==null||s==="style"&&l.querySelector(Al(m))||s==="script"&&l.querySelector(Nl(m))||(s=l.createElement("link"),Kt(s,"link",t),yt(s),l.head.appendChild(s)))}}function lT(t,s){ar.m(t,s);var a=no;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+ft(l)+'"][href="'+ft(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ro(t)}if(!Kn.has(m)&&(t=w({rel:"modulepreload",href:t},s),Kn.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Nl(m)))return}l=a.createElement("link"),Kt(l,"link",t),yt(l),a.head.appendChild(l)}}}function cT(t,s,a){ar.S(t,s,a);var l=no;if(l&&t){var f=Zn(l).hoistableStyles,m=so(t);s=s||"default";var x=f.get(m);if(!x){var E={loading:0,preload:null};if(x=l.querySelector(Al(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Kn.get(m))&&Qf(t,a);var M=x=l.createElement("link");yt(M),Kt(M,"link",t),M._p=new Promise(function($,ee){M.onload=$,M.onerror=ee}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Ou(x,s,l)}x={type:"stylesheet",instance:x,count:1,state:E},f.set(m,x)}}}function uT(t,s){ar.X(t,s);var a=no;if(a&&t){var l=Zn(a).hoistableScripts,f=ro(t),m=l.get(f);m||(m=a.querySelector(Nl(f)),m||(t=w({src:t,async:!0},s),(s=Kn.get(f))&&Xf(t,s),m=a.createElement("script"),yt(m),Kt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function hT(t,s){ar.M(t,s);var a=no;if(a&&t){var l=Zn(a).hoistableScripts,f=ro(t),m=l.get(f);m||(m=a.querySelector(Nl(f)),m||(t=w({src:t,async:!0,type:"module"},s),(s=Kn.get(f))&&Xf(t,s),m=a.createElement("script"),yt(m),Kt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function J0(t,s,a,l){var f=(f=ge.current)?Mu(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=so(a.href),a=Zn(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=so(a.href);var m=Zn(f).hoistableStyles,x=m.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=f.querySelector(Al(t)))&&!m._p&&(x.instance=m,x.state.loading=5),Kn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(t,a),m||dT(f,t,a,x.state))),s&&l===null)throw Error(i(528,""));return x}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ro(a),a=Zn(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function so(t){return'href="'+ft(t)+'"'}function Al(t){return'link[rel="stylesheet"]['+t+"]"}function Z0(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function dT(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Kt(s,"link",a),yt(s),t.head.appendChild(s))}function ro(t){return'[src="'+ft(t)+'"]'}function Nl(t){return"script[async]"+t}function ev(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+ft(a.href)+'"]');if(l)return s.instance=l,yt(l),l;var f=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),yt(l),Kt(l,"style",f),Ou(l,a.precedence,t),s.instance=l;case"stylesheet":f=so(a.href);var m=t.querySelector(Al(f));if(m)return s.state.loading|=4,s.instance=m,yt(m),m;l=Z0(a),(f=Kn.get(f))&&Qf(l,f),m=(t.ownerDocument||t).createElement("link"),yt(m);var x=m;return x._p=new Promise(function(E,M){x.onload=E,x.onerror=M}),Kt(m,"link",l),s.state.loading|=4,Ou(m,a.precedence,t),s.instance=m;case"script":return m=ro(a.src),(f=t.querySelector(Nl(m)))?(s.instance=f,yt(f),f):(l=a,(f=Kn.get(m))&&(l=w({},a),Xf(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),yt(f),Kt(f,"link",l),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Ou(l,a.precedence,t));return s.instance}function Ou(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,x=0;x<l.length;x++){var E=l[x];if(E.dataset.precedence===s)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Qf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Xf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var ku=null;function tv(t,s,a){if(ku===null){var l=new Map,f=ku=new Map;f.set(a,l)}else f=ku,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Us]||m[dt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(s)||"";x=t+x;var E=l.get(x);E?E.push(m):l.set(x,[m])}}return l}function nv(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function fT(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function sv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function mT(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=so(l.href),m=s.querySelector(Al(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Lu.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,yt(m);return}m=s.ownerDocument||s,l=Z0(l),(f=Kn.get(f))&&Qf(l,f),m=m.createElement("link"),yt(m);var x=m;x._p=new Promise(function(E,M){x.onload=E,x.onerror=M}),Kt(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Lu.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Wf=0;function gT(t,s){return t.stylesheets&&t.count===0&&Uu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Uu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Wf===0&&(Wf=62500*QE());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Uu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Wf?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Lu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Vu=null;function Uu(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Vu=new Map,s.forEach(pT,t),Vu=null,Lu.call(t))}function pT(t,s){if(!(s.state.loading&4)){var a=Vu.get(t);if(a)var l=a.get(null);else{a=new Map,Vu.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}f=s.instance,x=f.getAttribute("data-precedence"),m=a.get(x)||l,m===l&&a.set(null,f),a.set(x,f),this.count++,l=Lu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var Rl={$$typeof:J,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function yT(t,s,a,l,f,m,x,E,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function rv(t,s,a,l,f,m,x,E,M,$,ee,re){return t=new yT(t,s,a,x,M,$,ee,re,E),s=1,m===!0&&(s|=24),m=Cn(3,null,null,s),t.current=m,m.stateNode=t,s=Cd(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Md(m),t}function iv(t){return t?(t=ka,t):ka}function av(t,s,a,l,f,m){f=iv(f),l.context===null?l.context=f:l.pendingContext=f,l=Gr(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=$r(t,l,s),a!==null&&(Tn(a,t,s),al(a,t,s))}function ov(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Jf(t,s){ov(t,s),(t=t.alternate)&&ov(t,s)}function lv(t){if(t.tag===13||t.tag===31){var s=Fi(t,67108864);s!==null&&Tn(s,t,67108864),Jf(t,67108864)}}function cv(t){if(t.tag===13||t.tag===31){var s=On();s=Lo(s);var a=Fi(t,s);a!==null&&Tn(a,t,s),Jf(t,s)}}var Pu=!0;function vT(t,s,a,l){var f=O.T;O.T=null;var m=W.p;try{W.p=2,Zf(t,s,a,l)}finally{W.p=m,O.T=f}}function _T(t,s,a,l){var f=O.T;O.T=null;var m=W.p;try{W.p=8,Zf(t,s,a,l)}finally{W.p=m,O.T=f}}function Zf(t,s,a,l){if(Pu){var f=em(l);if(f===null)Pf(t,s,l,zu,a),hv(t,l);else if(bT(f,t,s,a,l))l.stopPropagation();else if(hv(t,l),s&4&&-1<xT.indexOf(t)){for(;f!==null;){var m=zs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Jn(m.pendingLanes);if(x!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var M=1<<31-un(x);E.entanglements[1]|=M,x&=~M}bs(m),(Xe&6)===0&&(wu=Bt()+500,wl(0))}}break;case 31:case 13:E=Fi(m,2),E!==null&&Tn(E,m,2),Tu(),Jf(m,2)}if(m=em(l),m===null&&Pf(t,s,l,zu,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Pf(t,s,l,null,a)}}function em(t){return t=Na(t),tm(t)}var zu=null;function tm(t){if(zu=null,t=Ps(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=d(s),t!==null)return t;t=null}else if(a===31){if(t=g(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return zu=t,null}function uv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_c()){case Rt:return 2;case Dt:return 8;case ks:case xc:return 32;case Do:return 268435456;default:return 32}default:return 32}}var nm=!1,si=null,ri=null,ii=null,Cl=new Map,jl=new Map,ai=[],xT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hv(t,s){switch(t){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Cl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(s.pointerId)}}function Il(t,s,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},s!==null&&(s=zs(s),s!==null&&lv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function bT(t,s,a,l,f){switch(s){case"focusin":return si=Il(si,t,s,a,l,f),!0;case"dragenter":return ri=Il(ri,t,s,a,l,f),!0;case"mouseover":return ii=Il(ii,t,s,a,l,f),!0;case"pointerover":var m=f.pointerId;return Cl.set(m,Il(Cl.get(m)||null,t,s,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,jl.set(m,Il(jl.get(m)||null,t,s,a,l,f)),!0}return!1}function dv(t){var s=Ps(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){t.blockedOn=s,wc(t.priority,function(){cv(a)});return}}else if(s===31){if(s=g(a),s!==null){t.blockedOn=s,wc(t.priority,function(){cv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bu(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=em(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Aa=l,a.target.dispatchEvent(l),Aa=null}else return s=zs(a),s!==null&&lv(s),t.blockedOn=a,!1;s.shift()}return!0}function fv(t,s,a){Bu(t)&&a.delete(s)}function wT(){nm=!1,si!==null&&Bu(si)&&(si=null),ri!==null&&Bu(ri)&&(ri=null),ii!==null&&Bu(ii)&&(ii=null),Cl.forEach(fv),jl.forEach(fv)}function qu(t,s){t.blockedOn===s&&(t.blockedOn=null,nm||(nm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wT)))}var Fu=null;function mv(t){Fu!==t&&(Fu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Fu===t&&(Fu=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],f=t[s+2];if(typeof l!="function"){if(tm(l||a)===null)continue;break}var m=zs(a);m!==null&&(t.splice(s,3),s-=3,Zd(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function io(t){function s(M){return qu(M,t)}si!==null&&qu(si,t),ri!==null&&qu(ri,t),ii!==null&&qu(ii,t),Cl.forEach(s),jl.forEach(s);for(var a=0;a<ai.length;a++){var l=ai[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ai.length&&(a=ai[0],a.blockedOn===null);)dv(a),a.blockedOn===null&&ai.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],x=f[Ft]||null;if(typeof m=="function")x||mv(a);else if(x){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[Ft]||null)E=x.formAction;else if(tm(f)!==null)continue}else E=x.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),mv(a)}}}function gv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function sm(t){this._internalRoot=t}Hu.prototype.render=sm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=On();av(a,l,t,s,null,null)},Hu.prototype.unmount=sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;av(t.current,2,null,t,null,null),Tu(),s[ds]=null}};function Hu(t){this._internalRoot=t}Hu.prototype.unstable_scheduleHydration=function(t){if(t){var s=Vs();t={blockedOn:null,target:t,priority:s};for(var a=0;a<ai.length&&s!==0&&s<ai[a].priority;a++);ai.splice(a,0,t),a===0&&dv(t)}};var pv=e.version;if(pv!=="19.2.0")throw Error(i(527,pv,"19.2.0"));W.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(s),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var ET={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{xr=Gu.inject(ET),tn=Gu}catch{}}return Ml.createRoot=function(t,s){if(!o(t))throw Error(i(299));var a=!1,l="",f=Ey,m=Ty,x=Sy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError)),s=rv(t,1,!1,null,null,a,l,null,f,m,x,gv),t[ds]=s.current,Uf(t),new sm(s)},Ml.hydrateRoot=function(t,s,a){if(!o(t))throw Error(i(299));var l=!1,f="",m=Ey,x=Ty,E=Sy,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),s=rv(t,1,!0,s,a??null,l,f,M,m,x,E,gv),s.context=iv(null),a=s.current,l=On(),l=Lo(l),f=Gr(l),f.callback=null,$r(a,f,l),a=l,s.current.lanes=a,Er(s,a),bs(s),t[ds]=s.current,Uf(t),new Hu(s)},Ml.version="19.2.0",Ml}var Av;function MT(){if(Av)return am.exports;Av=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),am.exports=DT(),am.exports}var OT=MT();const kT=Z_(OT);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Nv="popstate";function LT(r={}){function e(o,c){let{pathname:d="/",search:g="",hash:p=""}=ha(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Tm("",{pathname:d,search:g,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let d=o.document.querySelector("base"),g="";if(d&&d.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");g=y===-1?p:p.slice(0,y)}return g+"#"+(typeof c=="string"?c:Gl(c))}function i(o,c){as(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return UT(e,n,i,r)}function ut(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function as(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VT(){return Math.random().toString(36).substring(2,10)}function Rv(r,e){return{usr:r.state,key:r.key,idx:e}}function Tm(r,e,n=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ha(e):e,state:n,key:e&&e.key||i||VT()}}function Gl({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function ha(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function UT(r,e,n,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,d=o.history,g="POP",p=null,y=_();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function _(){return(d.state||{idx:null}).idx}function w(){g="POP";let z=_(),Y=z==null?null:z-y;y=z,p&&p({action:g,location:F.location,delta:Y})}function A(z,Y){g="PUSH";let te=Tm(F.location,z,Y);n&&n(te,z),y=_()+1;let J=Rv(te,y),se=F.createHref(te);try{d.pushState(J,"",se)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;o.location.assign(se)}c&&p&&p({action:g,location:F.location,delta:1})}function D(z,Y){g="REPLACE";let te=Tm(F.location,z,Y);n&&n(te,z),y=_();let J=Rv(te,y),se=F.createHref(te);d.replaceState(J,"",se),c&&p&&p({action:g,location:F.location,delta:0})}function V(z){return PT(z)}let F={get action(){return g},get location(){return r(o,d)},listen(z){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Nv,w),p=z,()=>{o.removeEventListener(Nv,w),p=null}},createHref(z){return e(o,z)},createURL:V,encodeLocation(z){let Y=V(z);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:A,replace:D,go(z){return d.go(z)}};return F}function PT(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ut(n,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Gl(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function ex(r,e,n="/"){return zT(r,e,n,!1)}function zT(r,e,n,i){let o=typeof e=="string"?ha(e):e,c=fr(o.pathname||"/",n);if(c==null)return null;let d=tx(r);BT(d);let g=null;for(let p=0;g==null&&p<d.length;++p){let y=JT(c);g=XT(d[p],y,i)}return g}function tx(r,e=[],n=[],i="",o=!1){let c=(d,g,p=o,y)=>{let _={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&p)return;ut(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let w=ur([i,_.relativePath]),A=n.concat(_);d.children&&d.children.length>0&&(ut(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),tx(d.children,e,A,w,p)),!(d.path==null&&!d.index)&&e.push({path:w,score:YT(w,d.index),routesMeta:A})};return r.forEach((d,g)=>{var p;if(d.path===""||!((p=d.path)!=null&&p.includes("?")))c(d,g);else for(let y of nx(d.path))c(d,g,!0,y)}),e}function nx(r){let e=r.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let d=nx(i.join("/")),g=[];return g.push(...d.map(p=>p===""?c:[c,p].join("/"))),o&&g.push(...d),g.map(p=>r.startsWith("/")&&p===""?"/":p)}function BT(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:QT(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var qT=/^:[\w-]+$/,FT=3,HT=2,GT=1,$T=10,KT=-2,Cv=r=>r==="*";function YT(r,e){let n=r.split("/"),i=n.length;return n.some(Cv)&&(i+=KT),e&&(i+=HT),n.filter(o=>!Cv(o)).reduce((o,c)=>o+(qT.test(c)?FT:c===""?GT:$T),i)}function QT(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function XT(r,e,n=!1){let{routesMeta:i}=r,o={},c="/",d=[];for(let g=0;g<i.length;++g){let p=i[g],y=g===i.length-1,_=c==="/"?e:e.slice(c.length)||"/",w=hh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),A=p.route;if(!w&&y&&n&&!i[i.length-1].route.index&&(w=hh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:ur([c,w.pathname]),pathnameBase:nS(ur([c,w.pathnameBase])),route:A}),w.pathnameBase!=="/"&&(c=ur([c,w.pathnameBase]))}return d}function hh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,i]=WT(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:i.reduce((y,{paramName:_,isOptional:w},A)=>{if(_==="*"){let V=g[A]||"";d=c.slice(0,c.length-V.length).replace(/(.)\/+$/,"$1")}const D=g[A];return w&&!D?y[_]=void 0:y[_]=(D||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:r}}function WT(r,e=!1,n=!0){as(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,p)=>(i.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function JT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return as(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function fr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=r.charAt(n);return i&&i!=="/"?null:r.slice(n)||"/"}function ZT(r,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof r=="string"?ha(r):r;return{pathname:n?n.startsWith("/")?n:eS(n,e):e,search:sS(i),hash:rS(o)}}function eS(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function um(r,e,n,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tS(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sx(r){let e=tS(r);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function rx(r,e,n,i=!1){let o;typeof r=="string"?o=ha(r):(o={...r},ut(!o.pathname||!o.pathname.includes("?"),um("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),um("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),um("#","search","hash",o)));let c=r===""||o.pathname==="",d=c?"/":o.pathname,g;if(d==null)g=n;else{let w=e.length-1;if(!i&&d.startsWith("..")){let A=d.split("/");for(;A[0]==="..";)A.shift(),w-=1;o.pathname=A.join("/")}g=w>=0?e[w]:"/"}let p=ZT(o,g),y=d&&d!=="/"&&d.endsWith("/"),_=(c||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}var ur=r=>r.join("/").replace(/\/\/+/g,"/"),nS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),sS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,rS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function iS(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ix=["POST","PUT","PATCH","DELETE"];new Set(ix);var aS=["GET",...ix];new Set(aS);var Eo=T.createContext(null);Eo.displayName="DataRouter";var jh=T.createContext(null);jh.displayName="DataRouterState";T.createContext(!1);var ax=T.createContext({isTransitioning:!1});ax.displayName="ViewTransition";var oS=T.createContext(new Map);oS.displayName="Fetchers";var lS=T.createContext(null);lS.displayName="Await";var js=T.createContext(null);js.displayName="Navigation";var nc=T.createContext(null);nc.displayName="Location";var Is=T.createContext({outlet:null,matches:[],isDataRoute:!1});Is.displayName="Route";var Qm=T.createContext(null);Qm.displayName="RouteError";function cS(r,{relative:e}={}){ut(sc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=T.useContext(js),{hash:o,pathname:c,search:d}=rc(r,{relative:e}),g=c;return n!=="/"&&(g=c==="/"?n:ur([n,c])),i.createHref({pathname:g,search:d,hash:o})}function sc(){return T.useContext(nc)!=null}function Ti(){return ut(sc(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(nc).location}var ox="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lx(r){T.useContext(js).static||T.useLayoutEffect(r)}function Ih(){let{isDataRoute:r}=T.useContext(Is);return r?wS():uS()}function uS(){ut(sc(),"useNavigate() may be used only in the context of a <Router> component.");let r=T.useContext(Eo),{basename:e,navigator:n}=T.useContext(js),{matches:i}=T.useContext(Is),{pathname:o}=Ti(),c=JSON.stringify(sx(i)),d=T.useRef(!1);return lx(()=>{d.current=!0}),T.useCallback((p,y={})=>{if(as(d.current,ox),!d.current)return;if(typeof p=="number"){n.go(p);return}let _=rx(p,JSON.parse(c),o,y.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:ur([e,_.pathname])),(y.replace?n.replace:n.push)(_,y.state,y)},[e,n,c,o,r])}T.createContext(null);function cx(){let{matches:r}=T.useContext(Is),e=r[r.length-1];return e?e.params:{}}function rc(r,{relative:e}={}){let{matches:n}=T.useContext(Is),{pathname:i}=Ti(),o=JSON.stringify(sx(n));return T.useMemo(()=>rx(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function hS(r,e){return ux(r,e)}function ux(r,e,n,i,o){var te;ut(sc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=T.useContext(js),{matches:d}=T.useContext(Is),g=d[d.length-1],p=g?g.params:{},y=g?g.pathname:"/",_=g?g.pathnameBase:"/",w=g&&g.route;{let J=w&&w.path||"";hx(y,!w||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let A=Ti(),D;if(e){let J=typeof e=="string"?ha(e):e;ut(_==="/"||((te=J.pathname)==null?void 0:te.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${J.pathname}" was given in the \`location\` prop.`),D=J}else D=A;let V=D.pathname||"/",F=V;if(_!=="/"){let J=_.replace(/^\//,"").split("/");F="/"+V.replace(/^\//,"").split("/").slice(J.length).join("/")}let z=ex(r,{pathname:F});as(w||z!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),as(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=pS(z&&z.map(J=>Object.assign({},J,{params:Object.assign({},p,J.params),pathname:ur([_,c.encodeLocation?c.encodeLocation(J.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?_:ur([_,c.encodeLocation?c.encodeLocation(J.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathnameBase])})),d,n,i,o);return e&&Y?T.createElement(nc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},Y):Y}function dS(){let r=bS(),e=iS(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:c},"ErrorBoundary")," or"," ",T.createElement("code",{style:c},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:o},n):null,d)}var fS=T.createElement(dS,null),mS=class extends T.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?T.createElement(Is.Provider,{value:this.props.routeContext},T.createElement(Qm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gS({routeContext:r,match:e,children:n}){let i=T.useContext(Eo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Is.Provider,{value:r},n)}function pS(r,e=[],n=null,i=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let c=r,d=n==null?void 0:n.errors;if(d!=null){let y=c.findIndex(_=>_.route.id&&(d==null?void 0:d[_.route.id])!==void 0);ut(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let g=!1,p=-1;if(n)for(let y=0;y<c.length;y++){let _=c[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=y),_.route.id){let{loaderData:w,errors:A}=n,D=_.route.loader&&!w.hasOwnProperty(_.route.id)&&(!A||A[_.route.id]===void 0);if(_.route.lazy||D){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((y,_,w)=>{let A,D=!1,V=null,F=null;n&&(A=d&&_.route.id?d[_.route.id]:void 0,V=_.route.errorElement||fS,g&&(p<0&&w===0?(hx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,F=null):p===w&&(D=!0,F=_.route.hydrateFallbackElement||null)));let z=e.concat(c.slice(0,w+1)),Y=()=>{let te;return A?te=V:D?te=F:_.route.Component?te=T.createElement(_.route.Component,null):_.route.element?te=_.route.element:te=y,T.createElement(gS,{match:_,routeContext:{outlet:y,matches:z,isDataRoute:n!=null},children:te})};return n&&(_.route.ErrorBoundary||_.route.errorElement||w===0)?T.createElement(mS,{location:n.location,revalidation:n.revalidation,component:V,error:A,children:Y(),routeContext:{outlet:null,matches:z,isDataRoute:!0},unstable_onError:i}):Y()},null)}function Xm(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yS(r){let e=T.useContext(Eo);return ut(e,Xm(r)),e}function vS(r){let e=T.useContext(jh);return ut(e,Xm(r)),e}function _S(r){let e=T.useContext(Is);return ut(e,Xm(r)),e}function Wm(r){let e=_S(r),n=e.matches[e.matches.length-1];return ut(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function xS(){return Wm("useRouteId")}function bS(){var i;let r=T.useContext(Qm),e=vS("useRouteError"),n=Wm("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[n]}function wS(){let{router:r}=yS("useNavigate"),e=Wm("useNavigate"),n=T.useRef(!1);return lx(()=>{n.current=!0}),T.useCallback(async(o,c={})=>{as(n.current,ox),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...c}))},[r,e])}var jv={};function hx(r,e,n){!e&&!jv[r]&&(jv[r]=!0,as(!1,n))}T.memo(ES);function ES({routes:r,future:e,state:n,unstable_onError:i}){return ux(r,void 0,n,i,e)}function Yt(r){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function TS({basename:r="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:c=!1}){ut(!sc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),g=T.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof n=="string"&&(n=ha(n));let{pathname:p="/",search:y="",hash:_="",state:w=null,key:A="default"}=n,D=T.useMemo(()=>{let V=fr(p,d);return V==null?null:{location:{pathname:V,search:y,hash:_,state:w,key:A},navigationType:i}},[d,p,y,_,w,A,i]);return as(D!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:T.createElement(js.Provider,{value:g},T.createElement(nc.Provider,{children:e,value:D}))}function SS({children:r,location:e}){return hS(Sm(r),e)}function Sm(r,e=[]){let n=[];return T.Children.forEach(r,(i,o)=>{if(!T.isValidElement(i))return;let c=[...e,o];if(i.type===T.Fragment){n.push.apply(n,Sm(i.props.children,c));return}ut(i.type===Yt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Sm(i.props.children,c)),n.push(d)}),n}var Zu="get",eh="application/x-www-form-urlencoded";function Dh(r){return r!=null&&typeof r.tagName=="string"}function AS(r){return Dh(r)&&r.tagName.toLowerCase()==="button"}function NS(r){return Dh(r)&&r.tagName.toLowerCase()==="form"}function RS(r){return Dh(r)&&r.tagName.toLowerCase()==="input"}function CS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function jS(r,e){return r.button===0&&(!e||e==="_self")&&!CS(r)}var $u=null;function IS(){if($u===null)try{new FormData(document.createElement("form"),0),$u=!1}catch{$u=!0}return $u}var DS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hm(r){return r!=null&&!DS.has(r)?(as(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${eh}"`),null):r}function MS(r,e){let n,i,o,c,d;if(NS(r)){let g=r.getAttribute("action");i=g?fr(g,e):null,n=r.getAttribute("method")||Zu,o=hm(r.getAttribute("enctype"))||eh,c=new FormData(r)}else if(AS(r)||RS(r)&&(r.type==="submit"||r.type==="image")){let g=r.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||g.getAttribute("action");if(i=p?fr(p,e):null,n=r.getAttribute("formmethod")||g.getAttribute("method")||Zu,o=hm(r.getAttribute("formenctype"))||hm(g.getAttribute("enctype"))||eh,c=new FormData(g,r),!IS()){let{name:y,type:_,value:w}=r;if(_==="image"){let A=y?`${y}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else y&&c.append(y,w)}}else{if(Dh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Zu,i=null,o=eh,d=r}return c&&o==="text/plain"&&(d=c,c=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jm(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function OS(r,e,n){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&fr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function kS(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function VS(r,e,n){let i=await Promise.all(r.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await kS(c,n);return d.links?d.links():[]}return[]}));return BS(i.flat(1).filter(LS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Iv(r,e,n,i,o,c){let d=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>{var _;return n[y].pathname!==p.pathname||((_=n[y].route.path)==null?void 0:_.endsWith("*"))&&n[y].params["*"]!==p.params["*"]};return c==="assets"?e.filter((p,y)=>d(p,y)||g(p,y)):c==="data"?e.filter((p,y)=>{var w;let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(d(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let A=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function US(r,e,{includeHydrateFallback:n}={}){return PS(r.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function PS(r){return[...new Set(r)]}function zS(r){let e={},n=Object.keys(r).sort();for(let i of n)e[i]=r[i];return e}function BS(r,e){let n=new Set;return new Set(e),r.reduce((i,o)=>{let c=JSON.stringify(zS(o));return n.has(c)||(n.add(c),i.push({key:c,link:o})),i},[])}function dx(){let r=T.useContext(Eo);return Jm(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function qS(){let r=T.useContext(jh);return Jm(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Zm=T.createContext(void 0);Zm.displayName="FrameworkContext";function fx(){let r=T.useContext(Zm);return Jm(r,"You must render this element inside a <HydratedRouter> element"),r}function FS(r,e){let n=T.useContext(Zm),[i,o]=T.useState(!1),[c,d]=T.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:_,onTouchStart:w}=e,A=T.useRef(null);T.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let F=Y=>{Y.forEach(te=>{d(te.isIntersecting)})},z=new IntersectionObserver(F,{threshold:.5});return A.current&&z.observe(A.current),()=>{z.disconnect()}}},[r]),T.useEffect(()=>{if(i){let F=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(F)}}},[i]);let D=()=>{o(!0)},V=()=>{o(!1),d(!1)};return n?r!=="intent"?[c,A,{}]:[c,A,{onFocus:Ol(g,D),onBlur:Ol(p,V),onMouseEnter:Ol(y,D),onMouseLeave:Ol(_,V),onTouchStart:Ol(w,D)}]:[!1,A,{}]}function Ol(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function HS({page:r,...e}){let{router:n}=dx(),i=T.useMemo(()=>ex(n.routes,r,n.basename),[n.routes,r,n.basename]);return i?T.createElement($S,{page:r,matches:i,...e}):null}function GS(r){let{manifest:e,routeModules:n}=fx(),[i,o]=T.useState([]);return T.useEffect(()=>{let c=!1;return VS(r,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[r,e,n]),i}function $S({page:r,matches:e,...n}){let i=Ti(),{manifest:o,routeModules:c}=fx(),{basename:d}=dx(),{loaderData:g,matches:p}=qS(),y=T.useMemo(()=>Iv(r,e,p,o,i,"data"),[r,e,p,o,i]),_=T.useMemo(()=>Iv(r,e,p,o,i,"assets"),[r,e,p,o,i]),w=T.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let V=new Set,F=!1;if(e.forEach(Y=>{var J;let te=o.routes[Y.route.id];!te||!te.hasLoader||(!y.some(se=>se.route.id===Y.route.id)&&Y.route.id in g&&((J=c[Y.route.id])!=null&&J.shouldRevalidate)||te.hasClientLoader?F=!0:V.add(Y.route.id))}),V.size===0)return[];let z=OS(r,d,"data");return F&&V.size>0&&z.searchParams.set("_routes",e.filter(Y=>V.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[z.pathname+z.search]},[d,g,i,o,y,e,r,c]),A=T.useMemo(()=>US(_,o),[_,o]),D=GS(_);return T.createElement(T.Fragment,null,w.map(V=>T.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...n})),A.map(V=>T.createElement("link",{key:V,rel:"modulepreload",href:V,...n})),D.map(({key:V,link:F})=>T.createElement("link",{key:V,nonce:n.nonce,...F})))}function KS(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var mx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mx&&(window.__reactRouterVersion="7.9.5")}catch{}function YS({basename:r,children:e,window:n}){let i=T.useRef();i.current==null&&(i.current=LT({window:n,v5Compat:!0}));let o=i.current,[c,d]=T.useState({action:o.action,location:o.location}),g=T.useCallback(p=>{T.startTransition(()=>d(p))},[d]);return T.useLayoutEffect(()=>o.listen(g),[o,g]),T.createElement(TS,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o})}var gx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ut=T.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:c,replace:d,state:g,target:p,to:y,preventScrollReset:_,viewTransition:w,...A},D){let{basename:V}=T.useContext(js),F=typeof y=="string"&&gx.test(y),z,Y=!1;if(typeof y=="string"&&F&&(z=y,mx))try{let R=new URL(window.location.href),j=y.startsWith("//")?new URL(R.protocol+y):new URL(y),L=fr(j.pathname,V);j.origin===R.origin&&L!=null?y=L+j.search+j.hash:Y=!0}catch{as(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=cS(y,{relative:o}),[J,se,oe]=FS(i,A),ce=WS(y,{replace:d,state:g,target:p,preventScrollReset:_,relative:o,viewTransition:w});function I(R){e&&e(R),R.defaultPrevented||ce(R)}let N=T.createElement("a",{...A,...oe,href:z||te,onClick:Y||c?e:I,ref:KS(D,se),target:p,"data-discover":!F&&n==="render"?"true":void 0});return J&&!F?T.createElement(T.Fragment,null,N,T.createElement(HS,{page:te})):N});Ut.displayName="Link";var Yn=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:c,to:d,viewTransition:g,children:p,...y},_){let w=rc(d,{relative:y.relative}),A=Ti(),D=T.useContext(jh),{navigator:V,basename:F}=T.useContext(js),z=D!=null&&n1(w)&&g===!0,Y=V.encodeLocation?V.encodeLocation(w).pathname:w.pathname,te=A.pathname,J=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(te=te.toLowerCase(),J=J?J.toLowerCase():null,Y=Y.toLowerCase()),J&&F&&(J=fr(J,F)||J);const se=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let oe=te===Y||!o&&te.startsWith(Y)&&te.charAt(se)==="/",ce=J!=null&&(J===Y||!o&&J.startsWith(Y)&&J.charAt(Y.length)==="/"),I={isActive:oe,isPending:ce,isTransitioning:z},N=oe?e:void 0,R;typeof i=="function"?R=i(I):R=[i,oe?"active":null,ce?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let j=typeof c=="function"?c(I):c;return T.createElement(Ut,{...y,"aria-current":N,className:R,ref:_,style:j,to:d,viewTransition:g},typeof p=="function"?p(I):p)});Yn.displayName="NavLink";var QS=T.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:c,method:d=Zu,action:g,onSubmit:p,relative:y,preventScrollReset:_,viewTransition:w,...A},D)=>{let V=e1(),F=t1(g,{relative:y}),z=d.toLowerCase()==="get"?"get":"post",Y=typeof g=="string"&&gx.test(g),te=J=>{if(p&&p(J),J.defaultPrevented)return;J.preventDefault();let se=J.nativeEvent.submitter,oe=(se==null?void 0:se.getAttribute("formmethod"))||d;V(se||J.currentTarget,{fetcherKey:e,method:oe,navigate:n,replace:o,state:c,relative:y,preventScrollReset:_,viewTransition:w})};return T.createElement("form",{ref:D,method:z,action:F,onSubmit:i?p:te,...A,"data-discover":!Y&&r==="render"?"true":void 0})});QS.displayName="Form";function XS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function px(r){let e=T.useContext(Eo);return ut(e,XS(r)),e}function WS(r,{target:e,replace:n,state:i,preventScrollReset:o,relative:c,viewTransition:d}={}){let g=Ih(),p=Ti(),y=rc(r,{relative:c});return T.useCallback(_=>{if(jS(_,e)){_.preventDefault();let w=n!==void 0?n:Gl(p)===Gl(y);g(r,{replace:w,state:i,preventScrollReset:o,relative:c,viewTransition:d})}},[p,g,y,n,i,e,r,o,c,d])}var JS=0,ZS=()=>`__${String(++JS)}__`;function e1(){let{router:r}=px("useSubmit"),{basename:e}=T.useContext(js),n=xS();return T.useCallback(async(i,o={})=>{let{action:c,method:d,encType:g,formData:p,body:y}=MS(i,e);if(o.navigate===!1){let _=o.fetcherKey||ZS();await r.fetch(_,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||g,flushSync:o.flushSync})}else await r.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function t1(r,{relative:e}={}){let{basename:n}=T.useContext(js),i=T.useContext(Is);ut(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...rc(r||".",{relative:e})},d=Ti();if(r==null){c.search=d.search;let g=new URLSearchParams(c.search),p=g.getAll("index");if(p.some(_=>_==="")){g.delete("index"),p.filter(w=>w).forEach(w=>g.append("index",w));let _=g.toString();c.search=_?`?${_}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:ur([n,c.pathname])),Gl(c)}function n1(r,{relative:e}={}){let n=T.useContext(ax);ut(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=px("useViewTransitionState"),o=rc(r,{relative:e});if(!n.isTransitioning)return!1;let c=fr(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=fr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return hh(o.pathname,d)!=null||hh(o.pathname,c)!=null}const s1={play:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3l14 9-14 9V3z"}),pause:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 4h4v16H6zM14 4h4v16h-4z"}),logo:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 6l12-3"}),search:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}),previous:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"}),next:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}),upload:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"}),heart:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"}),comment:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}),"chat-bubble":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V7a2 2 0 012-2h4M9 14h6"}),x:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}),send:u.jsx("path",{d:"M22 2L11 13M22 2L15 22l-4-9-9-4 20-6z"}),camera:u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"music-note":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z"}),"map-pin":u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"globe-alt":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9M3 12a9 9 0 019-9"}),aperture:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m-2.122 2.122a5 5 0 01-7.072 0m-2.121-2.121a5 5 0 010-7.072m2.121-2.121a5 5 0 017.072 0"}),map:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13v-6m0 6l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 9m-6-2l6-3m0 0l6 3"}),radio:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 4.938A8.001 8.001 0 0112 4a8 8 0 017.069 4.938M15 12a3 3 0 11-6 0 3 3 0 016 0zm-3 8.062A8.001 8.001 0 0112 20a8 8 0 01-7.069-4.938M4.938 15A8.001 8.001 0 014 12a8 8 0 014.938-7.069"}),spotify:u.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20zm0 17.5a7.5 7.5 0 110-15 7.5 7.5 0 010 15zm-4.3-7.2a.7.7 0 00-1 .2.7.7 0 00.1 1l3.5 2a.7.7 0 001-.2.7.7 0 00-.2-1l-3.4-2zm.3-2.5a.7.7 0 00-1 .2.7.7 0 00.2 1l5.8 3.3a.7.7 0 001-.2.7.7 0 00-.2-1l-5.8-3.3zm.2-2.6a.7.7 0 00-1 .3.7.7 0 00.3 1l6.7 3.8a.7.7 0 001-.3.7.7 0 00-.3-1l-6.7-3.8z"}),soundcloud:u.jsx("path",{d:"M7 12a1 1 0 00-1-1H3a1 1 0 100 2h3a1 1 0 001-1zm14-1h-3a1 1 0 100 2h3a1 1 0 100-2zm-5-3a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm14 2c0-3.9-3.1-7-7-7s-7 3.1-7 7v1h14v-1z"}),youtube:u.jsx("path",{d:"M21.582 6.186A2.5 2.5 0 0020 4.5H4a2.5 2.5 0 00-2.5 2.5v10A2.5 2.5 0 004 19.5h16a2.5 2.5 0 002.5-2.5v-10a2.5 2.5 0 00-.918-1.814zM9.5 15.5v-7l7 3.5-7 3.5z"}),bandcamp:u.jsx("path",{d:"M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2l4 4 4-4v8H8v-8z"}),package:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4-8-4m16 0v10l-8 4-8-4V7"}),tshirt:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 4h6l2 2v2H7V6l2-2zm0 0V3a1 1 0 011-1h4a1 1 0 011 1v1m-6 0v12h6V4m-6 0H3v4l3 1 1-1h1M15 4h6v4l-3 1-1-1h-1"}),crown:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l3-3 4 4 4-4 3 3V5H5v10z"}),playlist:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"}),tag:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"}),"thumbs-up":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 9V5a3 3 0 00-3-3l-4 9v11h11.28a2 2 0 002-1.7l1.38-9a2 2 0 00-2-2.3H14z"}),"thumbs-down":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 15v4a3 3 0 003 3l4-9V5H5.72a2 2 0 00-2 1.7l-1.38 9a2 2 0 002 2.3h4.28z"}),"video-camera":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}),rss:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 11a9 9 0 019 9M4 4a16 16 0 0116 16M4 4v0"}),"book-open":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 1V6a4 4 0 00-4-4H5a4 4 0 00-4 4v12a4 4 0 004 4h14a4 4 0 004-4v-3m-4-1l-4-4 4-4"}),download:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"}),plus:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"}),mail:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}),microphone:u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 10v2a7 7 0 01-14 0v-2"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 19v3"})]}),palette:u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1v2m0 18v2m9-9h-2m-2-6.364L15.364 7M4.636 17.364L7 15m12.364 0L17 15M4.636 4.636L7 7"})]}),users:u.jsx(u.Fragment,{children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.134-1.276-.38-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.134-1.276.38-1.857m0 0a5.002 5.002 0 019.24 0M12 15a4 4 0 100-8 4 4 0 000 8z"})}),sparkles:u.jsx(u.Fragment,{children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M17 3v4M19 5h-4M14 17v4M16 19h-4M7.5 10.5L9 9m-1.5 3l-1.5 1.5M16.5 10.5L15 9m1.5 3l1.5 1.5"})})},fe=({name:r,className:e="h-6 w-6",style:n})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",style:n,children:s1[r]});var Dv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},r1=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],d=r[n++],g=r[n++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],d=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},vx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,g=d?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,_=c>>2,w=(c&3)<<4|g>>4;let A=(g&15)<<2|y>>6,D=y&63;p||(D=64,d||(A=64)),i.push(n[_],n[w],n[A],n[D])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(yx(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):r1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],g=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||g==null||y==null||w==null)throw new i1;const A=c<<2|g>>4;if(i.push(A),y!==64){const D=g<<4&240|y>>2;if(i.push(D),w!==64){const V=y<<6&192|w;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class i1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a1=function(r){const e=yx(r);return vx.encodeByteArray(e,!0)},dh=function(r){return a1(r).replace(/\./g,"")},_x=function(r){try{return vx.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=()=>o1().__FIREBASE_DEFAULTS__,c1=()=>{if(typeof process>"u"||typeof Dv>"u")return;const r=Dv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},u1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&_x(r[1]);return e&&JSON.parse(e)},Mh=()=>{try{return l1()||c1()||u1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},xx=r=>{var e,n;return(n=(e=Mh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},bx=r=>{const e=xx(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},wx=()=>{var r;return(r=Mh())===null||r===void 0?void 0:r.config},Ex=r=>{var e;return(e=Mh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[dh(JSON.stringify(n)),dh(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function f1(){var r;const e=(r=Mh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function g1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function p1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function y1(){const r=ln();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function v1(){return!f1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _1(){try{return typeof indexedDB=="object"}catch{return!1}}function x1(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="FirebaseError";class Ds extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=b1,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ic.prototype.create)}}class ic{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?w1(c,i):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new Ds(o,g,i)}}function w1(r,e){return r.replace(E1,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const E1=/\{\$([^}]+)}/g;function T1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function fh(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=r[o],d=e[o];if(Mv(c)&&Mv(d)){if(!fh(c,d))return!1}else if(c!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Mv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function S1(r,e){const n=new A1(r,e);return n.subscribe.bind(n)}class A1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");N1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=dm),o.error===void 0&&(o.error=dm),o.complete===void 0&&(o.complete=dm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(r){return r&&r._delegate?r._delegate:r}class _i{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new h1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j1(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);i===g&&d.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:C1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C1(r){return r===na?void 0:r}function j1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new R1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(He||(He={}));const D1={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},M1=He.INFO,O1={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},k1=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=O1[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eg{constructor(e){this.name=e,this._logLevel=M1,this._logHandler=k1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const L1=(r,e)=>e.some(n=>r instanceof n);let Ov,kv;function V1(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U1(){return kv||(kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sx=new WeakMap,Am=new WeakMap,Ax=new WeakMap,fm=new WeakMap,tg=new WeakMap;function P1(r){const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(pi(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Sx.set(n,r)}).catch(()=>{}),tg.set(e,r),e}function z1(r){if(Am.has(r))return;const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Am.set(r,e)}let Nm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Am.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ax.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pi(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function B1(r){Nm=r(Nm)}function q1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(mm(this),e,...n);return Ax.set(i,e.sort?e.sort():[e]),pi(i)}:U1().includes(r)?function(...e){return r.apply(mm(this),e),pi(Sx.get(this))}:function(...e){return pi(r.apply(mm(this),e))}}function F1(r){return typeof r=="function"?q1(r):(r instanceof IDBTransaction&&z1(r),L1(r,V1())?new Proxy(r,Nm):r)}function pi(r){if(r instanceof IDBRequest)return P1(r);if(fm.has(r))return fm.get(r);const e=F1(r);return e!==r&&(fm.set(r,e),tg.set(e,r)),e}const mm=r=>tg.get(r);function H1(r,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),g=pi(d);return i&&d.addEventListener("upgradeneeded",p=>{i(pi(d.result),p.oldVersion,p.newVersion,pi(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const G1=["get","getKey","getAll","getAllKeys","count"],$1=["put","add","delete","clear"],gm=new Map;function Lv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(gm.get(e))return gm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=$1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||G1.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return gm.set(e,c),c}B1(r=>({...r,get:(e,n,i)=>Lv(e,n)||r.get(e,n,i),has:(e,n)=>!!Lv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Y1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rm="@firebase/app",Vv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new eg("@firebase/app"),Q1="@firebase/app-compat",X1="@firebase/analytics-compat",W1="@firebase/analytics",J1="@firebase/app-check-compat",Z1="@firebase/app-check",eA="@firebase/auth",tA="@firebase/auth-compat",nA="@firebase/database",sA="@firebase/data-connect",rA="@firebase/database-compat",iA="@firebase/functions",aA="@firebase/functions-compat",oA="@firebase/installations",lA="@firebase/installations-compat",cA="@firebase/messaging",uA="@firebase/messaging-compat",hA="@firebase/performance",dA="@firebase/performance-compat",fA="@firebase/remote-config",mA="@firebase/remote-config-compat",gA="@firebase/storage",pA="@firebase/storage-compat",yA="@firebase/firestore",vA="@firebase/vertexai-preview",_A="@firebase/firestore-compat",xA="firebase",bA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="[DEFAULT]",wA={[Rm]:"fire-core",[Q1]:"fire-core-compat",[W1]:"fire-analytics",[X1]:"fire-analytics-compat",[Z1]:"fire-app-check",[J1]:"fire-app-check-compat",[eA]:"fire-auth",[tA]:"fire-auth-compat",[nA]:"fire-rtdb",[sA]:"fire-data-connect",[rA]:"fire-rtdb-compat",[iA]:"fire-fn",[aA]:"fire-fn-compat",[oA]:"fire-iid",[lA]:"fire-iid-compat",[cA]:"fire-fcm",[uA]:"fire-fcm-compat",[hA]:"fire-perf",[dA]:"fire-perf-compat",[fA]:"fire-rc",[mA]:"fire-rc-compat",[gA]:"fire-gcs",[pA]:"fire-gcs-compat",[yA]:"fire-fst",[_A]:"fire-fst-compat",[vA]:"fire-vertex","fire-js":"fire-js",[xA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map,EA=new Map,jm=new Map;function Uv(r,e){try{r.container.addComponent(e)}catch(n){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function aa(r){const e=r.name;if(jm.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,r);for(const n of mh.values())Uv(n,r);for(const n of EA.values())Uv(n,r);return!0}function Oh(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function mi(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new ic("app","Firebase",TA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=bA;function Nx(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Cm,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw yi.create("bad-app-name",{appName:String(o)});if(n||(n=wx()),!n)throw yi.create("no-options");const c=mh.get(o);if(c){if(fh(n,c.options)&&fh(i,c.config))return c;throw yi.create("duplicate-app",{appName:o})}const d=new I1(o);for(const p of jm.values())d.addComponent(p);const g=new SA(n,i,d);return mh.set(o,g),g}function ng(r=Cm){const e=mh.get(r);if(!e&&r===Cm&&wx())return Nx();if(!e)throw yi.create("no-app",{appName:r});return e}function ws(r,e,n){var i;let o=(i=wA[r])!==null&&i!==void 0?i:r;n&&(o+=`-${n}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const g=[`Unable to register library "${o}" with version "${e}":`];c&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(g.join(" "));return}aa(new _i(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="firebase-heartbeat-database",NA=1,$l="firebase-heartbeat-store";let pm=null;function Rx(){return pm||(pm=H1(AA,NA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore($l)}catch(n){console.warn(n)}}}}).catch(r=>{throw yi.create("idb-open",{originalErrorMessage:r.message})})),pm}async function RA(r){try{const n=(await Rx()).transaction($l),i=await n.objectStore($l).get(Cx(r));return await n.done,i}catch(e){if(e instanceof Ds)mr.warn(e.message);else{const n=yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mr.warn(n.message)}}}async function Pv(r,e){try{const i=(await Rx()).transaction($l,"readwrite");await i.objectStore($l).put(e,Cx(r)),await i.done}catch(n){if(n instanceof Ds)mr.warn(n.message);else{const i=yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mr.warn(i.message)}}}function Cx(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1024,jA=720*60*60*1e3;class IA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=zv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const g=new Date(d.date).valueOf();return Date.now()-g<=jA}),this._storage.overwrite(this._heartbeatsCache))}catch(i){mr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zv(),{heartbeatsToSend:i,unsentEntries:o}=DA(this._heartbeatsCache.heartbeats),c=dh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return mr.warn(n),""}}}function zv(){return new Date().toISOString().substring(0,10)}function DA(r,e=CA){const n=[];let i=r.slice();for(const o of r){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),Bv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Bv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class MA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _1()?x1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Pv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Pv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Bv(r){return dh(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(r){aa(new _i("platform-logger",e=>new K1(e),"PRIVATE")),aa(new _i("heartbeat",e=>new IA(e),"PRIVATE")),ws(Rm,Vv,r),ws(Rm,Vv,"esm2017"),ws("fire-js","")}OA("");var kA="firebase",LA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ws(kA,LA,"app");function sg(r,e){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(n[i[o]]=r[i[o]]);return n}function jx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VA=jx,Ix=new ic("auth","Firebase",jx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new eg("@firebase/auth");function UA(r,...e){gh.logLevel<=He.WARN&&gh.warn(`Auth (${da}): ${r}`,...e)}function th(r,...e){gh.logLevel<=He.ERROR&&gh.error(`Auth (${da}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(r,...e){throw rg(r,...e)}function Es(r,...e){return rg(r,...e)}function Dx(r,e,n){const i=Object.assign(Object.assign({},VA()),{[e]:n});return new ic("auth","Firebase",i).create(e,{appName:r.name})}function ra(r){return Dx(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rg(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return Ix.create(r,...e)}function Ne(r,e,...n){if(!r)throw rg(e,...n)}function or(r){const e="INTERNAL ASSERTION FAILED: "+r;throw th(e),new Error(e)}function pr(r,e){r||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function PA(){return qv()==="http:"||qv()==="https:"}function qv(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PA()||g1()||"connection"in navigator)?navigator.onLine:!0}function BA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.shortDelay=e,this.longDelay=n,pr(n>e,"Short delay should be less than long delay!"),this.isMobile=d1()||p1()}get(){return zA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(r,e){pr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new oc(3e4,6e4);function ag(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function To(r,e,n,i,o={}){return Ox(r,o,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const g=ac(Object.assign({key:r.config.apiKey},d)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},c);return m1()||(y.referrerPolicy="no-referrer"),Mx.fetch()(kx(r,r.config.apiHost,n,g),y)})}async function Ox(r,e,n){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},qA),e);try{const o=new GA(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Ku(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ku(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Ku(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw Ku(r,"user-disabled",d);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Dx(r,_,y);gr(r,_)}}catch(o){if(o instanceof Ds)throw o;gr(r,"network-request-failed",{message:String(o)})}}async function HA(r,e,n,i,o={}){const c=await To(r,e,n,i,o);return"mfaPendingCredential"in c&&gr(r,"multi-factor-auth-required",{_serverResponse:c}),c}function kx(r,e,n,i){const o=`${e}${n}?${i}`;return r.config.emulator?ig(r.config,o):`${r.config.apiScheme}://${o}`}class GA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Es(this.auth,"network-request-failed")),FA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ku(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Es(r,e,i);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(r,e){return To(r,"POST","/v1/accounts:delete",e)}async function Lx(r,e){return To(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KA(r,e=!1){const n=pn(r),i=await n.getIdToken(e),o=og(i);Ne(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:zl(ym(o.auth_time)),issuedAtTime:zl(ym(o.iat)),expirationTime:zl(ym(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function ym(r){return Number(r)*1e3}function og(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const o=_x(n);return o?JSON.parse(o):(th("Failed to decode base64 JWT payload"),null)}catch(o){return th("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Fv(r){const e=og(r);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ds&&YA(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function YA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(r){var e;const n=r.auth,i=await r.getIdToken(),o=await Kl(r,Lx(n,{idToken:i}));Ne(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];r._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Vx(c.providerUserInfo):[],g=WA(r.providerData,d),p=r.isAnonymous,y=!(r.email&&c.passwordHash)&&!(g!=null&&g.length),_=p?y:!1,w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new Dm(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(r,w)}async function XA(r){const e=pn(r);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WA(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Vx(r){return r.map(e=>{var{providerId:n}=e,i=sg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(r,e){const n=await Ox(r,{},async()=>{const i=ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=kx(r,o,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",Mx.fetch()(d,{method:"POST",headers:g,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZA(r,e){return To(r,"POST","/v2/accounts:revokeToken",ag(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=Fv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await JA(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,d=new uo;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Ne(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Ne(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(r,e){Ne(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class lr{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,c=sg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Dm(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Kl(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KA(this,e)}reload(){return XA(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mi(this.auth.app))return Promise.reject(ra(this.auth));const e=await this.getIdToken();return await Kl(this,$A(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,c,d,g,p,y,_;const w=(i=n.displayName)!==null&&i!==void 0?i:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,D=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,V=(d=n.photoURL)!==null&&d!==void 0?d:void 0,F=(g=n.tenantId)!==null&&g!==void 0?g:void 0,z=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(y=n.createdAt)!==null&&y!==void 0?y:void 0,te=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:J,emailVerified:se,isAnonymous:oe,providerData:ce,stsTokenManager:I}=n;Ne(J&&I,e,"internal-error");const N=uo.fromJSON(this.name,I);Ne(typeof J=="string",e,"internal-error"),li(w,e.name),li(A,e.name),Ne(typeof se=="boolean",e,"internal-error"),Ne(typeof oe=="boolean",e,"internal-error"),li(D,e.name),li(V,e.name),li(F,e.name),li(z,e.name),li(Y,e.name),li(te,e.name);const R=new lr({uid:J,auth:e,email:A,emailVerified:se,displayName:w,isAnonymous:oe,photoURL:V,phoneNumber:D,tenantId:F,stsTokenManager:N,createdAt:Y,lastLoginAt:te});return ce&&Array.isArray(ce)&&(R.providerData=ce.map(j=>Object.assign({},j))),z&&(R._redirectEventId=z),R}static async _fromIdTokenResponse(e,n,i=!1){const o=new uo;o.updateFromServerResponse(n);const c=new lr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ph(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Ne(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Vx(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),g=new uo;g.updateFromIdToken(i);const p=new lr({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Dm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map;function cr(r){pr(r instanceof Function,"Expected a class definition");let e=Hv.get(r);return e?(pr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Hv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ux.type="NONE";const Gv=Ux;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(r,e,n){return`firebase:${r}:${e}:${n}`}class ho{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=nh(this.userKey,o.apiKey,c),this.fullPersistenceKey=nh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ho(cr(Gv),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||cr(Gv);const d=nh(i,e.config.apiKey,e.name);let g=null;for(const y of n)try{const _=await y._get(d);if(_){const w=lr._fromJSON(e,_);y!==c&&(g=w),c=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new ho(c,e,i):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new ho(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Px(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hx(e))return"Blackberry";if(Gx(e))return"Webos";if(zx(e))return"Safari";if((e.includes("chrome/")||Bx(e))&&!e.includes("edge/"))return"Chrome";if(Fx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Px(r=ln()){return/firefox\//i.test(r)}function zx(r=ln()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bx(r=ln()){return/crios\//i.test(r)}function qx(r=ln()){return/iemobile/i.test(r)}function Fx(r=ln()){return/android/i.test(r)}function Hx(r=ln()){return/blackberry/i.test(r)}function Gx(r=ln()){return/webos/i.test(r)}function lg(r=ln()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eN(r=ln()){var e;return lg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tN(){return y1()&&document.documentMode===10}function $x(r=ln()){return lg(r)||Fx(r)||Gx(r)||Hx(r)||/windows phone/i.test(r)||qx(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(r,e=[]){let n;switch(r){case"Browser":n=$v(ln());break;case"Worker":n=`${$v(ln())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${da}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((d,g)=>{try{const p=e(c);d(p)}catch(p){g(p)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(r,e={}){return To(r,"GET","/v2/passwordPolicy",ag(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=6;class iN{constructor(e){var n,i,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:rN,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,c,d,g;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(g=p.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),p}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kv(this),this.idTokenSubscription=new Kv(this),this.beforeStateQueue=new nN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ix,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cr(n)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Lx(this,{idToken:e}),i=await lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mi(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===g)&&(p!=null&&p.user)&&(o=p.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mi(this.app))return Promise.reject(ra(this));const n=e?pn(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mi(this.app)?Promise.reject(ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mi(this.app)?Promise.reject(ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sN(this),n=new iN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ic("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cr(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&UA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function cg(r){return pn(r)}class Kv{constructor(e){this.auth=e,this.observer=null,this.addObserver=S1(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ug={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oN(r){ug=r}function lN(r){return ug.loadJS(r)}function cN(){return ug.gapiScript}function uN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(r,e){const n=Oh(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(fh(c,e??{}))return o;gr(o,"already-initialized")}return n.initialize({options:e})}function dN(r,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(cr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function fN(r,e,n){const i=cg(r);Ne(i._canInitEmulator,i,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=Yx(e),{host:d,port:g}=mN(e),p=g===null?"":`:${g}`;i.config.emulator={url:`${c}//${d}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})}),gN()}function Yx(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function mN(r){const e=Yx(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:Yv(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:Yv(d)}}}function Yv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function gN(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(r,e){return HA(r,"POST","/v1/accounts:signInWithIdp",ag(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="http://localhost";class oa extends Qx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,c=sg(n,["providerId","signInMethod"]);if(!i||!o)return null;const d=new oa(i,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return fo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,fo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fo(e,n)}buildRequest(){const e={requestUri:pN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ac(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends Xx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends lc{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oa._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return hi.credential(n,i)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends lc{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends lc{constructor(){super("twitter.com")}static credential(e,n){return oa._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return fi.credential(n,i)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await lr._fromIdTokenResponse(e,i,o),d=Qv(i);return new go({user:c,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=Qv(i);return new go({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function Qv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends Ds{constructor(e,n,i,o){var c;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,yh.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new yh(e,n,i,o)}}function Wx(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?yh._fromErrorAndOperation(r,c,e,i):c})}async function yN(r,e,n=!1){const i=await Kl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return go._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(r,e,n=!1){const{auth:i}=r;if(mi(i.app))return Promise.reject(ra(i));const o="reauthenticate";try{const c=await Kl(r,Wx(i,o,e,r),n);Ne(c.idToken,i,"internal-error");const d=og(c.idToken);Ne(d,i,"internal-error");const{sub:g}=d;return Ne(r.uid===g,i,"user-mismatch"),go._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&gr(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(r,e,n=!1){if(mi(r.app))return Promise.reject(ra(r));const i="signIn",o=await Wx(r,i,e),c=await go._fromIdTokenResponse(r,i,o);return n||await r._updateCurrentUser(c.user),c}function xN(r,e,n,i){return pn(r).onIdTokenChanged(e,n,i)}function bN(r,e,n){return pn(r).beforeAuthStateChanged(e,n)}function Jx(r,e,n,i){return pn(r).onAuthStateChanged(e,n,i)}function wN(r){return pn(r).signOut()}const vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=1e3,TN=10;class eb extends Zx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$x(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);tN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,TN):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},EN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eb.type="LOCAL";const SN=eb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb extends Zx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tb.type="SESSION";const nb=tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new kh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const g=Array.from(d).map(async y=>y(n.origin,c)),p=await AN(g);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const y=hg("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(w){const A=w;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(A.data.response);break;default:clearTimeout(_),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(){return window}function RN(r){Ts().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(){return typeof Ts().WorkerGlobalScope<"u"&&typeof Ts().importScripts=="function"}async function CN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function IN(){return sb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="firebaseLocalStorageDb",DN=1,_h="firebaseLocalStorage",ib="fbase_key";class cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lh(r,e){return r.transaction([_h],e?"readwrite":"readonly").objectStore(_h)}function MN(){const r=indexedDB.deleteDatabase(rb);return new cc(r).toPromise()}function Mm(){const r=indexedDB.open(rb,DN);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(_h,{keyPath:ib})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(_h)?e(i):(i.close(),await MN(),e(await Mm()))})})}async function Xv(r,e,n){const i=Lh(r,!0).put({[ib]:e,value:n});return new cc(i).toPromise()}async function ON(r,e){const n=Lh(r,!1).get(e),i=await new cc(n).toPromise();return i===void 0?null:i.value}function Wv(r,e){const n=Lh(r,!0).delete(e);return new cc(n).toPromise()}const kN=800,LN=3;class ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>LN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kh._getInstance(IN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await CN(),!this.activeServiceWorker)return;this.sender=new NN(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await Xv(e,vh,"1"),await Wv(e,vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Xv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>ON(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Lh(o,!1).getAll();return new cc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ab.type="LOCAL";const VN=ab;new oc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(r,e){return e?cr(e):(Ne(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg extends Qx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PN(r){return _N(r.auth,new dg(r),r.bypassAuthState)}function zN(r){const{auth:e,user:n}=r;return Ne(n,e,"internal-error"),vN(n,new dg(r),r.bypassAuthState)}async function BN(r){const{auth:e,user:n}=r;return Ne(n,e,"internal-error"),yN(n,new dg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:d,type:g}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PN;case"linkViaPopup":case"linkViaRedirect":return BN;case"reauthViaPopup":case"reauthViaRedirect":return zN;default:gr(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new oc(2e3,1e4);class co extends ob{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qN.get())};e()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="pendingRedirect",sh=new Map;class HN extends ob{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=sh.get(this.auth._key());if(!e){try{const i=await GN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GN(r,e){const n=YN(e),i=KN(r);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function $N(r,e){sh.set(r._key(),e)}function KN(r){return cr(r._redirectPersistence)}function YN(r){return nh(FN,r.config.apiKey,r.name)}async function QN(r,e,n=!1){if(mi(r.app))return Promise.reject(ra(r));const i=cg(r),o=UN(i,e),d=await new HN(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=600*1e3;class WN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!lb(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Es(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jv(e))}saveEventToCache(e){this.cachedEventUids.add(Jv(e)),this.lastProcessedEventTime=Date.now()}}function Jv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function lb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(r,e={}){return To(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t2=/^https?/;async function n2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await ZN(r);for(const n of e)try{if(s2(n))return}catch{}gr(r,"unauthorized-domain")}function s2(r){const e=Im(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!t2.test(n))return!1;if(e2.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new oc(3e4,6e4);function Zv(){const r=Ts().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function i2(r){return new Promise((e,n)=>{var i,o,c;function d(){Zv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zv(),n(Es(r,"network-request-failed"))},timeout:r2.get()})}if(!((o=(i=Ts().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Ts().gapi)===null||c===void 0)&&c.load)d();else{const g=uN("iframefcb");return Ts()[g]=()=>{gapi.load?d():n(Es(r,"network-request-failed"))},lN(`${cN()}?onload=${g}`).catch(p=>n(p))}}).catch(e=>{throw rh=null,e})}let rh=null;function a2(r){return rh=rh||i2(r),rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=new oc(5e3,15e3),l2="__/auth/iframe",c2="emulator/auth/iframe",u2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d2(r){const e=r.config;Ne(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?ig(e,c2):`https://${r.config.authDomain}/${l2}`,i={apiKey:e.apiKey,appName:r.name,v:da},o=h2.get(r.config.apiHost);o&&(i.eid=o);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${ac(i).slice(1)}`}async function f2(r){const e=await a2(r),n=Ts().gapi;return Ne(n,r,"internal-error"),e.open({where:document.body,url:d2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u2,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const d=Es(r,"network-request-failed"),g=Ts().setTimeout(()=>{c(d)},o2.get());function p(){Ts().clearTimeout(g),o(i)}i.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g2=500,p2=600,y2="_blank",v2="http://localhost";class e_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _2(r,e,n,i=g2,o=p2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let g="";const p=Object.assign(Object.assign({},m2),{width:i.toString(),height:o.toString(),top:c,left:d}),y=ln().toLowerCase();n&&(g=Bx(y)?y2:n),Px(y)&&(e=e||v2,p.scrollbars="yes");const _=Object.entries(p).reduce((A,[D,V])=>`${A}${D}=${V},`,"");if(eN(y)&&g!=="_self")return x2(e||"",g),new e_(null);const w=window.open(e||"",g,_);Ne(w,r,"popup-blocked");try{w.focus()}catch{}return new e_(w)}function x2(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="__/auth/handler",w2="emulator/auth/handler",E2=encodeURIComponent("fac");async function t_(r,e,n,i,o,c){Ne(r.config.authDomain,r,"auth-domain-config-required"),Ne(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:da,eventId:o};if(e instanceof Xx){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",T1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))d[_]=w}if(e instanceof lc){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(d.scopes=_.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const _ of Object.keys(g))g[_]===void 0&&delete g[_];const p=await r._getAppCheckToken(),y=p?`#${E2}=${encodeURIComponent(p)}`:"";return`${T2(r)}?${ac(g).slice(1)}${y}`}function T2({config:r}){return r.emulator?ig(r,w2):`https://${r.authDomain}/${b2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="webStorageSupport";class S2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nb,this._completeRedirectFn=QN,this._overrideRedirectResult=$N}async _openPopup(e,n,i,o){var c;pr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await t_(e,n,i,Im(),o);return _2(e,d,hg())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await t_(e,n,i,Im(),o);return RN(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(pr(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await f2(e),i=new WN(e);return n.register("authEvent",o=>(Ne(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vm,{type:vm},o=>{var c;const d=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[vm];d!==void 0&&n(!!d),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=n2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $x()||zx()||lg()}}const A2=S2;var n_="@firebase/auth",s_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function C2(r){aa(new _i("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=i.options;Ne(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kx(r)},y=new aN(i,o,c,p);return dN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),aa(new _i("auth-internal",e=>{const n=cg(e.getProvider("auth").getImmediate());return(i=>new N2(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(n_,s_,R2(r)),ws(n_,s_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=300,I2=Ex("authIdTokenMaxAge")||j2;let r_=null;const D2=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>I2)return;const o=n==null?void 0:n.token;r_!==o&&(r_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function M2(r=ng()){const e=Oh(r,"auth");if(e.isInitialized())return e.getImmediate();const n=hN(r,{popupRedirectResolver:A2,persistence:[VN,SN,nb]}),i=Ex("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=D2(c.toString());bN(n,d,()=>d(n.currentUser)),xN(n,g=>d(g))}}const o=xx("auth");return o&&fN(n,`http://${o}`),n}function O2(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}oN({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const c=Es("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",O2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});C2("Browser");var i_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ia,cb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,N){function R(){}R.prototype=N.prototype,I.D=N.prototype,I.prototype=new R,I.prototype.constructor=I,I.C=function(j,L,k){for(var C=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)C[Ae-2]=arguments[Ae];return N.prototype[L].apply(j,C)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,N,R){R||(R=0);var j=Array(16);if(typeof N=="string")for(var L=0;16>L;++L)j[L]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(L=0;16>L;++L)j[L]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=I.g[0],R=I.g[1],L=I.g[2];var k=I.g[3],C=N+(k^R&(L^k))+j[0]+3614090360&4294967295;N=R+(C<<7&4294967295|C>>>25),C=k+(L^N&(R^L))+j[1]+3905402710&4294967295,k=N+(C<<12&4294967295|C>>>20),C=L+(R^k&(N^R))+j[2]+606105819&4294967295,L=k+(C<<17&4294967295|C>>>15),C=R+(N^L&(k^N))+j[3]+3250441966&4294967295,R=L+(C<<22&4294967295|C>>>10),C=N+(k^R&(L^k))+j[4]+4118548399&4294967295,N=R+(C<<7&4294967295|C>>>25),C=k+(L^N&(R^L))+j[5]+1200080426&4294967295,k=N+(C<<12&4294967295|C>>>20),C=L+(R^k&(N^R))+j[6]+2821735955&4294967295,L=k+(C<<17&4294967295|C>>>15),C=R+(N^L&(k^N))+j[7]+4249261313&4294967295,R=L+(C<<22&4294967295|C>>>10),C=N+(k^R&(L^k))+j[8]+1770035416&4294967295,N=R+(C<<7&4294967295|C>>>25),C=k+(L^N&(R^L))+j[9]+2336552879&4294967295,k=N+(C<<12&4294967295|C>>>20),C=L+(R^k&(N^R))+j[10]+4294925233&4294967295,L=k+(C<<17&4294967295|C>>>15),C=R+(N^L&(k^N))+j[11]+2304563134&4294967295,R=L+(C<<22&4294967295|C>>>10),C=N+(k^R&(L^k))+j[12]+1804603682&4294967295,N=R+(C<<7&4294967295|C>>>25),C=k+(L^N&(R^L))+j[13]+4254626195&4294967295,k=N+(C<<12&4294967295|C>>>20),C=L+(R^k&(N^R))+j[14]+2792965006&4294967295,L=k+(C<<17&4294967295|C>>>15),C=R+(N^L&(k^N))+j[15]+1236535329&4294967295,R=L+(C<<22&4294967295|C>>>10),C=N+(L^k&(R^L))+j[1]+4129170786&4294967295,N=R+(C<<5&4294967295|C>>>27),C=k+(R^L&(N^R))+j[6]+3225465664&4294967295,k=N+(C<<9&4294967295|C>>>23),C=L+(N^R&(k^N))+j[11]+643717713&4294967295,L=k+(C<<14&4294967295|C>>>18),C=R+(k^N&(L^k))+j[0]+3921069994&4294967295,R=L+(C<<20&4294967295|C>>>12),C=N+(L^k&(R^L))+j[5]+3593408605&4294967295,N=R+(C<<5&4294967295|C>>>27),C=k+(R^L&(N^R))+j[10]+38016083&4294967295,k=N+(C<<9&4294967295|C>>>23),C=L+(N^R&(k^N))+j[15]+3634488961&4294967295,L=k+(C<<14&4294967295|C>>>18),C=R+(k^N&(L^k))+j[4]+3889429448&4294967295,R=L+(C<<20&4294967295|C>>>12),C=N+(L^k&(R^L))+j[9]+568446438&4294967295,N=R+(C<<5&4294967295|C>>>27),C=k+(R^L&(N^R))+j[14]+3275163606&4294967295,k=N+(C<<9&4294967295|C>>>23),C=L+(N^R&(k^N))+j[3]+4107603335&4294967295,L=k+(C<<14&4294967295|C>>>18),C=R+(k^N&(L^k))+j[8]+1163531501&4294967295,R=L+(C<<20&4294967295|C>>>12),C=N+(L^k&(R^L))+j[13]+2850285829&4294967295,N=R+(C<<5&4294967295|C>>>27),C=k+(R^L&(N^R))+j[2]+4243563512&4294967295,k=N+(C<<9&4294967295|C>>>23),C=L+(N^R&(k^N))+j[7]+1735328473&4294967295,L=k+(C<<14&4294967295|C>>>18),C=R+(k^N&(L^k))+j[12]+2368359562&4294967295,R=L+(C<<20&4294967295|C>>>12),C=N+(R^L^k)+j[5]+4294588738&4294967295,N=R+(C<<4&4294967295|C>>>28),C=k+(N^R^L)+j[8]+2272392833&4294967295,k=N+(C<<11&4294967295|C>>>21),C=L+(k^N^R)+j[11]+1839030562&4294967295,L=k+(C<<16&4294967295|C>>>16),C=R+(L^k^N)+j[14]+4259657740&4294967295,R=L+(C<<23&4294967295|C>>>9),C=N+(R^L^k)+j[1]+2763975236&4294967295,N=R+(C<<4&4294967295|C>>>28),C=k+(N^R^L)+j[4]+1272893353&4294967295,k=N+(C<<11&4294967295|C>>>21),C=L+(k^N^R)+j[7]+4139469664&4294967295,L=k+(C<<16&4294967295|C>>>16),C=R+(L^k^N)+j[10]+3200236656&4294967295,R=L+(C<<23&4294967295|C>>>9),C=N+(R^L^k)+j[13]+681279174&4294967295,N=R+(C<<4&4294967295|C>>>28),C=k+(N^R^L)+j[0]+3936430074&4294967295,k=N+(C<<11&4294967295|C>>>21),C=L+(k^N^R)+j[3]+3572445317&4294967295,L=k+(C<<16&4294967295|C>>>16),C=R+(L^k^N)+j[6]+76029189&4294967295,R=L+(C<<23&4294967295|C>>>9),C=N+(R^L^k)+j[9]+3654602809&4294967295,N=R+(C<<4&4294967295|C>>>28),C=k+(N^R^L)+j[12]+3873151461&4294967295,k=N+(C<<11&4294967295|C>>>21),C=L+(k^N^R)+j[15]+530742520&4294967295,L=k+(C<<16&4294967295|C>>>16),C=R+(L^k^N)+j[2]+3299628645&4294967295,R=L+(C<<23&4294967295|C>>>9),C=N+(L^(R|~k))+j[0]+4096336452&4294967295,N=R+(C<<6&4294967295|C>>>26),C=k+(R^(N|~L))+j[7]+1126891415&4294967295,k=N+(C<<10&4294967295|C>>>22),C=L+(N^(k|~R))+j[14]+2878612391&4294967295,L=k+(C<<15&4294967295|C>>>17),C=R+(k^(L|~N))+j[5]+4237533241&4294967295,R=L+(C<<21&4294967295|C>>>11),C=N+(L^(R|~k))+j[12]+1700485571&4294967295,N=R+(C<<6&4294967295|C>>>26),C=k+(R^(N|~L))+j[3]+2399980690&4294967295,k=N+(C<<10&4294967295|C>>>22),C=L+(N^(k|~R))+j[10]+4293915773&4294967295,L=k+(C<<15&4294967295|C>>>17),C=R+(k^(L|~N))+j[1]+2240044497&4294967295,R=L+(C<<21&4294967295|C>>>11),C=N+(L^(R|~k))+j[8]+1873313359&4294967295,N=R+(C<<6&4294967295|C>>>26),C=k+(R^(N|~L))+j[15]+4264355552&4294967295,k=N+(C<<10&4294967295|C>>>22),C=L+(N^(k|~R))+j[6]+2734768916&4294967295,L=k+(C<<15&4294967295|C>>>17),C=R+(k^(L|~N))+j[13]+1309151649&4294967295,R=L+(C<<21&4294967295|C>>>11),C=N+(L^(R|~k))+j[4]+4149444226&4294967295,N=R+(C<<6&4294967295|C>>>26),C=k+(R^(N|~L))+j[11]+3174756917&4294967295,k=N+(C<<10&4294967295|C>>>22),C=L+(N^(k|~R))+j[2]+718787259&4294967295,L=k+(C<<15&4294967295|C>>>17),C=R+(k^(L|~N))+j[9]+3951481745&4294967295,I.g[0]=I.g[0]+N&4294967295,I.g[1]=I.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+L&4294967295,I.g[3]=I.g[3]+k&4294967295}i.prototype.u=function(I,N){N===void 0&&(N=I.length);for(var R=N-this.blockSize,j=this.B,L=this.h,k=0;k<N;){if(L==0)for(;k<=R;)o(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<N;)if(j[L++]=I.charCodeAt(k++),L==this.blockSize){o(this,j),L=0;break}}else for(;k<N;)if(j[L++]=I[k++],L==this.blockSize){o(this,j),L=0;break}}this.h=L,this.o+=N},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var N=1;N<I.length-8;++N)I[N]=0;var R=8*this.o;for(N=I.length-8;N<I.length;++N)I[N]=R&255,R/=256;for(this.u(I),I=Array(16),N=R=0;4>N;++N)for(var j=0;32>j;j+=8)I[R++]=this.g[N]>>>j&255;return I};function c(I,N){var R=g;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=N(I)}function d(I,N){this.h=N;for(var R=[],j=!0,L=I.length-1;0<=L;L--){var k=I[L]|0;j&&k==N||(R[L]=k,j=!1)}this.g=R}var g={};function p(I){return-128<=I&&128>I?c(I,function(N){return new d([N|0],0>N?-1:0)}):new d([I|0],0>I?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return w;if(0>I)return z(y(-I));for(var N=[],R=1,j=0;I>=R;j++)N[j]=I/R|0,R*=4294967296;return new d(N,0)}function _(I,N){if(I.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(I.charAt(0)=="-")return z(_(I.substring(1),N));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(N,8)),j=w,L=0;L<I.length;L+=8){var k=Math.min(8,I.length-L),C=parseInt(I.substring(L,L+k),N);8>k?(k=y(Math.pow(N,k)),j=j.j(k).add(y(C))):(j=j.j(R),j=j.add(y(C)))}return j}var w=p(0),A=p(1),D=p(16777216);r=d.prototype,r.m=function(){if(F(this))return-z(this).m();for(var I=0,N=1,R=0;R<this.g.length;R++){var j=this.i(R);I+=(0<=j?j:4294967296+j)*N,N*=4294967296}return I},r.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(F(this))return"-"+z(this).toString(I);for(var N=y(Math.pow(I,6)),R=this,j="";;){var L=se(R,N).g;R=Y(R,L.j(N));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(I);if(R=L,V(R))return k+j;for(;6>k.length;)k="0"+k;j=k+j}},r.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(var N=0;N<I.g.length;N++)if(I.g[N]!=0)return!1;return!0}function F(I){return I.h==-1}r.l=function(I){return I=Y(this,I),F(I)?-1:V(I)?0:1};function z(I){for(var N=I.g.length,R=[],j=0;j<N;j++)R[j]=~I.g[j];return new d(R,~I.h).add(A)}r.abs=function(){return F(this)?z(this):this},r.add=function(I){for(var N=Math.max(this.g.length,I.g.length),R=[],j=0,L=0;L<=N;L++){var k=j+(this.i(L)&65535)+(I.i(L)&65535),C=(k>>>16)+(this.i(L)>>>16)+(I.i(L)>>>16);j=C>>>16,k&=65535,C&=65535,R[L]=C<<16|k}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Y(I,N){return I.add(z(N))}r.j=function(I){if(V(this)||V(I))return w;if(F(this))return F(I)?z(this).j(z(I)):z(z(this).j(I));if(F(I))return z(this.j(z(I)));if(0>this.l(D)&&0>I.l(D))return y(this.m()*I.m());for(var N=this.g.length+I.g.length,R=[],j=0;j<2*N;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(var L=0;L<I.g.length;L++){var k=this.i(j)>>>16,C=this.i(j)&65535,Ae=I.i(L)>>>16,me=I.i(L)&65535;R[2*j+2*L]+=C*me,te(R,2*j+2*L),R[2*j+2*L+1]+=k*me,te(R,2*j+2*L+1),R[2*j+2*L+1]+=C*Ae,te(R,2*j+2*L+1),R[2*j+2*L+2]+=k*Ae,te(R,2*j+2*L+2)}for(j=0;j<N;j++)R[j]=R[2*j+1]<<16|R[2*j];for(j=N;j<2*N;j++)R[j]=0;return new d(R,0)};function te(I,N){for(;(I[N]&65535)!=I[N];)I[N+1]+=I[N]>>>16,I[N]&=65535,N++}function J(I,N){this.g=I,this.h=N}function se(I,N){if(V(N))throw Error("division by zero");if(V(I))return new J(w,w);if(F(I))return N=se(z(I),N),new J(z(N.g),z(N.h));if(F(N))return N=se(I,z(N)),new J(z(N.g),N.h);if(30<I.g.length){if(F(I)||F(N))throw Error("slowDivide_ only works with positive integers.");for(var R=A,j=N;0>=j.l(I);)R=oe(R),j=oe(j);var L=ce(R,1),k=ce(j,1);for(j=ce(j,2),R=ce(R,2);!V(j);){var C=k.add(j);0>=C.l(I)&&(L=L.add(R),k=C),j=ce(j,1),R=ce(R,1)}return N=Y(I,L.j(N)),new J(L,N)}for(L=w;0<=I.l(N);){for(R=Math.max(1,Math.floor(I.m()/N.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),k=y(R),C=k.j(N);F(C)||0<C.l(I);)R-=j,k=y(R),C=k.j(N);V(k)&&(k=A),L=L.add(k),I=Y(I,C)}return new J(L,I)}r.A=function(I){return se(this,I).h},r.and=function(I){for(var N=Math.max(this.g.length,I.g.length),R=[],j=0;j<N;j++)R[j]=this.i(j)&I.i(j);return new d(R,this.h&I.h)},r.or=function(I){for(var N=Math.max(this.g.length,I.g.length),R=[],j=0;j<N;j++)R[j]=this.i(j)|I.i(j);return new d(R,this.h|I.h)},r.xor=function(I){for(var N=Math.max(this.g.length,I.g.length),R=[],j=0;j<N;j++)R[j]=this.i(j)^I.i(j);return new d(R,this.h^I.h)};function oe(I){for(var N=I.g.length+1,R=[],j=0;j<N;j++)R[j]=I.i(j)<<1|I.i(j-1)>>>31;return new d(R,I.h)}function ce(I,N){var R=N>>5;N%=32;for(var j=I.g.length-R,L=[],k=0;k<j;k++)L[k]=0<N?I.i(k+R)>>>N|I.i(k+R+1)<<32-N:I.i(k+R);return new d(L,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,cb=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=_,ia=d}).apply(typeof i_<"u"?i_:typeof self<"u"?self:typeof window<"u"?window:{});var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ub,Ll,hb,ih,Om,db,fb,mb;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,b){return h==Array.prototype||h==Object.prototype||(h[v]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yu=="object"&&Yu];for(var v=0;v<h.length;++v){var b=h[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=n(this);function o(h,v){if(v)e:{var b=i;h=h.split(".");for(var S=0;S<h.length-1;S++){var q=h[S];if(!(q in b))break e;b=b[q]}h=h[h.length-1],S=b[h],v=v(S),v!=S&&v!=null&&e(b,h,{configurable:!0,writable:!0,value:v})}}function c(h,v){h instanceof String&&(h+="");var b=0,S=!1,q={next:function(){if(!S&&b<h.length){var X=b++;return{value:v(X,h[X]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(h){return h||function(){return c(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function p(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function y(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function _(h,v,b){return h.call.apply(h.bind,arguments)}function w(h,v,b){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function A(h,v,b){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,A.apply(null,arguments)}function D(h,v){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function V(h,v){function b(){}b.prototype=v.prototype,h.aa=v.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(S,q,X){for(var he=Array(arguments.length-2),We=2;We<arguments.length;We++)he[We-2]=arguments[We];return v.prototype[q].apply(S,he)}}function F(h){const v=h.length;if(0<v){const b=Array(v);for(let S=0;S<v;S++)b[S]=h[S];return b}return[]}function z(h,v){for(let b=1;b<arguments.length;b++){const S=arguments[b];if(p(S)){const q=h.length||0,X=S.length||0;h.length=q+X;for(let he=0;he<X;he++)h[q+he]=S[he]}else h.push(S)}}class Y{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function te(h){return/^[\s\xa0]*$/.test(h)}function J(){var h=g.navigator;return h&&(h=h.userAgent)?h:""}function se(h){return se[" "](h),h}se[" "]=function(){};var oe=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function ce(h,v,b){for(const S in h)v.call(b,h[S],S,h)}function I(h,v){for(const b in h)v.call(void 0,h[b],b,h)}function N(h){const v={};for(const b in h)v[b]=h[b];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,v){let b,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(b in S)h[b]=S[b];for(let X=0;X<R.length;X++)b=R[X],Object.prototype.hasOwnProperty.call(S,b)&&(h[b]=S[b])}}function L(h){var v=1;h=h.split(":");const b=[];for(;0<v&&h.length;)b.push(h.shift()),v--;return h.length&&b.push(h.join(":")),b}function k(h){g.setTimeout(()=>{throw h},0)}function C(){var h=be;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Ae{constructor(){this.h=this.g=null}add(v,b){const S=me.get();S.set(v,b),this.h?this.h.next=S:this.g=S,this.h=S}}var me=new Y(()=>new O,h=>h.reset());class O{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let W,de=!1,be=new Ae,De=()=>{const h=g.Promise.resolve(void 0);W=()=>{h.then(U)}};var U=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(b){k(b)}var v=me;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}de=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var le=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};g.addEventListener("test",b,v),g.removeEventListener("test",b,v)}catch{}return h})();function ue(h,v){if(H.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(oe){e:{try{se(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else b=="mouseover"?v=h.fromElement:b=="mouseout"&&(v=h.toElement);this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ge[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ue.aa.h.call(this)}}V(ue,H);var ge={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),ve=0;function Le(h,v,b,S,q){this.listener=h,this.proxy=null,this.src=v,this.type=b,this.capture=!!S,this.ha=q,this.key=++ve,this.da=this.fa=!1}function pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function It(h){this.src=h,this.g={},this.h=0}It.prototype.add=function(h,v,b,S,q){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var he=ya(h,v,S,q);return-1<he?(v=h[he],b||(v.fa=!1)):(v=new Le(v,this.src,X,!!S,q),v.fa=b,h.push(v)),v};function cs(h,v){var b=v.type;if(b in h.g){var S=h.g[b],q=Array.prototype.indexOf.call(S,v,void 0),X;(X=0<=q)&&Array.prototype.splice.call(S,q,1),X&&(pt(v),h.g[b].length==0&&(delete h.g[b],h.h--))}}function ya(h,v,b,S){for(var q=0;q<h.length;++q){var X=h[q];if(!X.da&&X.listener==v&&X.capture==!!b&&X.ha==S)return q}return-1}var Wn="closure_lm_"+(1e6*Math.random()|0),Ni={};function va(h,v,b,S,q){if(Array.isArray(v)){for(var X=0;X<v.length;X++)va(h,v[X],b,S,q);return null}return b=_c(b),h&&h[we]?h.K(v,b,y(S)?!!S.capture:!1,q):ed(h,v,b,!1,S,q)}function ed(h,v,b,S,q,X){if(!v)throw Error("Invalid event type");var he=y(q)?!!q.capture:!!q,We=Io(h);if(We||(h[Wn]=We=new It(h)),b=We.add(v,b,S,he,X),b.proxy)return b;if(S=vc(),b.proxy=S,S.src=h,S.listener=b,h.addEventListener)le||(q=he),q===void 0&&(q=!1),h.addEventListener(v.toString(),S,q);else if(h.attachEvent)h.attachEvent(xa(v.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function vc(){function h(b){return v.call(h.src,h.listener,b)}const v=td;return h}function _a(h,v,b,S,q){if(Array.isArray(v))for(var X=0;X<v.length;X++)_a(h,v[X],b,S,q);else S=y(S)?!!S.capture:!!S,b=_c(b),h&&h[we]?(h=h.i,v=String(v).toString(),v in h.g&&(X=h.g[v],b=ya(X,b,S,q),-1<b&&(pt(X[b]),Array.prototype.splice.call(X,b,1),X.length==0&&(delete h.g[v],h.h--)))):h&&(h=Io(h))&&(v=h.g[v.toString()],h=-1,v&&(h=ya(v,b,S,q)),(b=-1<h?v[h]:null)&&Ri(b))}function Ri(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[we])cs(v.i,h);else{var b=h.type,S=h.proxy;v.removeEventListener?v.removeEventListener(b,S,h.capture):v.detachEvent?v.detachEvent(xa(b),S):v.addListener&&v.removeListener&&v.removeListener(S),(b=Io(v))?(cs(b,h),b.h==0&&(b.src=null,v[Wn]=null)):pt(h)}}}function xa(h){return h in Ni?Ni[h]:Ni[h]="on"+h}function td(h,v){if(h.da)h=!0;else{v=new ue(v,this);var b=h.listener,S=h.ha||h.src;h.fa&&Ri(h),h=b.call(S,v)}return h}function Io(h){return h=h[Wn],h instanceof It?h:null}var Bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _c(h){return typeof h=="function"?h:(h[Bt]||(h[Bt]=function(v){return h.handleEvent(v)}),h[Bt])}function Rt(){Z.call(this),this.i=new It(this),this.M=this,this.F=null}V(Rt,Z),Rt.prototype[we]=!0,Rt.prototype.removeEventListener=function(h,v,b,S){_a(this,h,v,b,S)};function Dt(h,v){var b,S=h.F;if(S)for(b=[];S;S=S.F)b.push(S);if(h=h.M,S=v.type||v,typeof v=="string")v=new H(v,h);else if(v instanceof H)v.target=v.target||h;else{var q=v;v=new H(S,h),j(v,q)}if(q=!0,b)for(var X=b.length-1;0<=X;X--){var he=v.g=b[X];q=ks(he,S,!0,v)&&q}if(he=v.g=h,q=ks(he,S,!0,v)&&q,q=ks(he,S,!1,v)&&q,b)for(X=0;X<b.length;X++)he=v.g=b[X],q=ks(he,S,!1,v)&&q}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var b=h.g[v],S=0;S<b.length;S++)pt(b[S]);delete h.g[v],h.h--}}this.F=null},Rt.prototype.K=function(h,v,b,S){return this.i.add(String(h),v,!1,b,S)},Rt.prototype.L=function(h,v,b,S){return this.i.add(String(h),v,!0,b,S)};function ks(h,v,b,S){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,X=0;X<v.length;++X){var he=v[X];if(he&&!he.da&&he.capture==b){var We=he.listener,bt=he.ha||he.src;he.fa&&cs(h.i,he),q=We.call(bt,S)!==!1&&q}}return q&&!S.defaultPrevented}function xc(h,v,b){if(typeof h=="function")b&&(h=A(h,b));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:g.setTimeout(h,v||0)}function Do(h){h.g=xc(()=>{h.g=null,h.i&&(h.i=!1,Do(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class nd extends Z{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Do(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(h){Z.call(this),this.h=h,this.g={}}V(Ci,Z);var xr=[];function tn(h){ce(h.g,function(v,b){this.g.hasOwnProperty(b)&&Ri(v)},h),h.g={}}Ci.prototype.N=function(){Ci.aa.N.call(this),tn(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=g.JSON.stringify,un=g.JSON.parse,sd=class{stringify(h){return g.JSON.stringify(h,void 0)}parse(h){return g.JSON.parse(h,void 0)}};function Mo(){}Mo.prototype.h=null;function bc(h){return h.h||(h.h=h.i())}function ji(){}var us={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function br(){H.call(this,"d")}V(br,H);function Jn(){H.call(this,"c")}V(Jn,H);var Vn={},wr=null;function ba(){return wr=wr||new Rt}Vn.La="serverreachability";function Oo(h){H.call(this,Vn.La,h)}V(Oo,H);function Ls(h){const v=ba();Dt(v,new Oo(v))}Vn.STAT_EVENT="statevent";function Er(h,v){H.call(this,Vn.STAT_EVENT,h),this.stat=v}V(Er,H);function qt(h){const v=ba();Dt(v,new Er(v,h))}Vn.Ma="timingevent";function ko(h,v){H.call(this,Vn.Ma,h),this.size=v}V(ko,H);function Tr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){h()},v)}function Sr(){this.g=!0}Sr.prototype.xa=function(){this.g=!1};function Lo(h,v,b,S,q,X){h.info(function(){if(h.g)if(X)for(var he="",We=X.split("&"),bt=0;bt<We.length;bt++){var ke=We[bt].split("=");if(1<ke.length){var Ot=ke[0];ke=ke[1];var kt=Ot.split("_");he=2<=kt.length&&kt[1]=="type"?he+(Ot+"="+ke+"&"):he+(Ot+"=redacted&")}}else he=null;else he=X;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+v+`
`+b+`
`+he})}function Vo(h,v,b,S,q,X,he){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+v+`
`+b+`
`+X+" "+he})}function Vs(h,v,b,S){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+hs(h,b)+(S?" "+S:"")})}function wc(h,v){h.info(function(){return"TIMEOUT: "+v})}Sr.prototype.info=function(){};function hs(h,v){if(!h.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var S=b[h];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var X=q[0];if(X!="noop"&&X!="stop"&&X!="close")for(var he=1;he<q.length;he++)q[he]=""}}}}return Ln(b)}catch{return v}}var dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ft={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ds;function Ar(){}V(Ar,Mo),Ar.prototype.g=function(){return new XMLHttpRequest},Ar.prototype.i=function(){return{}},ds=new Ar;function fs(h,v,b,S){this.j=h,this.i=v,this.l=b,this.R=S||1,this.U=new Ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ec}function Ec(){this.i=null,this.g="",this.h=!1}var Uo={},Us={};function Ii(h,v,b){h.L=1,h.v=Oi(ft(v)),h.m=b,h.P=!0,Ps(h,null)}function Ps(h,v){h.F=Date.now(),Zn(h),h.A=ft(h.v);var b=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),qs(b.i,"t",S),h.C=0,b=h.j.J,h.h=new Ec,h.g=Pc(h.j,b?v:null,!h.m),0<h.O&&(h.M=new nd(A(h.Y,h,h.g),h.O)),v=h.U,b=h.g,S=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(xr[0]=q.toString()),q=xr);for(var X=0;X<q.length;X++){var he=va(b,q[X],S||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Ls(),Lo(h.i,h.u,h.A,h.l,h.R,h.m)}fs.prototype.ca=function(h){h=h.target;const v=this.M;v&&fn(h)==3?v.j():this.Y(h)},fs.prototype.Y=function(h){try{if(h==this.g)e:{const kt=fn(this.g);var v=this.g.Ba();const Pr=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Vi(this.g)))){this.J||kt!=4||v==7||(v==8||0>=Pr?Ls(3):Ls(2)),wa(this);var b=this.g.Z();this.X=b;t:if(zs(this)){var S=Vi(this.g);h="";var q=S.length,X=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Nr(this);var he="";break t}this.h.i=new g.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(S[v],{stream:!(X&&v==q-1)});S.length=0,this.h.g+=h,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=b==200,Vo(this.i,this.u,this.A,this.l,this.R,kt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var We,bt=this.g;if((We=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(We)){var ke=We;break t}}ke=null}if(b=ke)Vs(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ms(this,b);else{this.o=!1,this.s=3,qt(12),hn(this),Nr(this);break e}}if(this.P){b=!0;let _n;for(;!this.J&&this.C<he.length;)if(_n=Di(this,he),_n==Us){kt==4&&(this.s=4,qt(14),b=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Uo){this.s=4,qt(15),Vs(this.i,this.l,he,"[Invalid Chunk]"),b=!1;break}else Vs(this.i,this.l,_n,null),ms(this,_n);if(zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||he.length!=0||this.h.h||(this.s=1,qt(16),b=!1),this.o=this.o&&b,!b)Vs(this.i,this.l,he,"[Invalid Chunked Response]"),hn(this),Nr(this);else if(0<he.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Qo(Ot),Ot.M=!0,qt(11))}}else Vs(this.i,this.l,he,null),ms(this,he);kt==4&&hn(this),this.o&&!this.J&&(kt==4?Lc(this.j,this):(this.o=!1,Zn(this)))}else jc(this.g),b==400&&0<he.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),hn(this),Nr(this)}}}catch{}finally{}};function zs(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Di(h,v){var b=h.C,S=v.indexOf(`
`,b);return S==-1?Us:(b=Number(v.substring(b,S)),isNaN(b)?Uo:(S+=1,S+b>v.length?Us:(v=v.slice(S,S+b),h.C=S+b,v)))}fs.prototype.cancel=function(){this.J=!0,hn(this)};function Zn(h){h.S=Date.now()+h.I,yt(h,h.I)}function yt(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Tr(A(h.ba,h),v)}function wa(h){h.B&&(g.clearTimeout(h.B),h.B=null)}fs.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(wc(this.i,this.A),this.L!=2&&(Ls(),qt(17)),hn(this),this.s=2,Nr(this)):yt(this,this.S-h)};function Nr(h){h.j.G==0||h.J||Lc(h.j,h)}function hn(h){wa(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,tn(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function ms(h,v){try{var b=h.j;if(b.G!=0&&(b.g==h||Rr(b.h,h))){if(!h.K&&Rr(b.h,h)&&b.G==3){try{var S=b.Da.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)Vr(b),Lr(b);else break e;Yo(b),qt(18)}}else b.za=q[1],0<b.za-b.T&&37500>q[2]&&b.F&&b.v==0&&!b.C&&(b.C=Tr(A(b.Za,b),6e3));if(1>=Tc(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Hs(b,11)}else if((h.K||b.g==h)&&Vr(b),!te(v))for(q=b.Da.g.parse(v),v=0;v<q.length;v++){let ke=q[v];if(b.T=ke[0],ke=ke[1],b.G==2)if(ke[0]=="c"){b.K=ke[1],b.ia=ke[2];const Ot=ke[3];Ot!=null&&(b.la=Ot,b.j.info("VER="+b.la));const kt=ke[4];kt!=null&&(b.Aa=kt,b.j.info("SVER="+b.Aa));const Pr=ke[5];Pr!=null&&typeof Pr=="number"&&0<Pr&&(S=1.5*Pr,b.L=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const _n=h.g;if(_n){const zi=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zi){var X=S.h;X.g||zi.indexOf("spdy")==-1&&zi.indexOf("quic")==-1&&zi.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Cr(X,X.h),X.h=null))}if(S.D){const Gs=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Gs&&(S.ya=Gs,$e(S.I,S.D,Gs))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),S=b;var he=h;if(S.qa=Uc(S,S.J?S.ia:null,S.W),he.K){Un(S.h,he);var We=he,bt=S.L;bt&&(We.I=bt),We.B&&(wa(We),Zn(We)),S.g=he}else Oc(S);0<b.i.length&&ja(b)}else ke[0]!="stop"&&ke[0]!="close"||Hs(b,7);else b.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Hs(b,7):$o(b):ke[0]!="noop"&&b.l&&b.l.ta(ke),b.v=0)}}Ls(4)}catch{}}var rd=class{constructor(h,v){this.g=h,this.map=v}};function Po(h){this.l=h||10,g.PerformanceNavigationTiming?(h=g.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Tc(h){return h.h?1:h.g?h.g.size:0}function Rr(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Cr(h,v){h.g?h.g.add(v):h.h=v}function Un(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Po.prototype.cancel=function(){if(this.i=dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function dn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const b of h.g.values())v=v.concat(b.D);return v}return F(h.i)}function Sc(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var v=[],b=h.length,S=0;S<b;S++)v.push(h[S]);return v}v=[],b=0;for(S in h)v[b++]=h[S];return v}function id(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var v=[];h=h.length;for(var b=0;b<h;b++)v.push(b);return v}v=[],b=0;for(const S in h)v[b++]=S;return v}}}function Ea(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var b=id(h),S=Sc(h),q=S.length,X=0;X<q;X++)v.call(void 0,S[X],b&&b[X],h)}var Bo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(h,v){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var S=h[b].indexOf("="),q=null;if(0<=S){var X=h[b].substring(0,S);q=h[b].substring(S+1)}else X=h[b];v(X,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Bs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bs){this.h=h.h,jr(this,h.j),this.o=h.o,this.g=h.g,Mi(this,h.s),this.l=h.l;var v=h.i,b=new gs;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Sa(this,b),this.m=h.m}else h&&(v=String(h).match(Bo))?(this.h=!1,jr(this,v[1]||"",!0),this.o=Ir(v[2]||""),this.g=Ir(v[3]||"",!0),Mi(this,v[4]),this.l=Ir(v[5]||"",!0),Sa(this,v[6]||"",!0),this.m=Ir(v[7]||"")):(this.h=!1,this.i=new gs(null,this.h))}Bs.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Pn(v,qo,!0),":");var b=this.g;return(b||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Pn(v,qo,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Pn(b,b.charAt(0)=="/"?Fo:Ac,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Pn(b,ld)),h.join("")};function ft(h){return new Bs(h)}function jr(h,v,b){h.j=b?Ir(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Mi(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Sa(h,v,b){v instanceof gs?(h.i=v,Nc(h.i,h.h)):(b||(v=Pn(v,od)),h.i=new gs(v,h.h))}function $e(h,v,b){h.i.set(v,b)}function Oi(h){return $e(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ir(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Pn(h,v,b){return typeof h=="string"?(h=encodeURI(h).replace(v,ad),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ad(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var qo=/[#\/\?@]/g,Ac=/[#\?:]/g,Fo=/[#\?]/g,od=/[#\?@]/g,ld=/#/g;function gs(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Mt(h){h.g||(h.g=new Map,h.h=0,h.i&&Ta(h.i,function(v,b){h.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}r=gs.prototype,r.add=function(h,v){Mt(this),this.i=null,h=An(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(v),this.h+=1,this};function Aa(h,v){Mt(h),v=An(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Na(h,v){return Mt(h),v=An(h,v),h.g.has(v)}r.forEach=function(h,v){Mt(this),this.g.forEach(function(b,S){b.forEach(function(q){h.call(v,q,S,this)},this)},this)},r.na=function(){Mt(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let S=0;S<v.length;S++){const q=h[S];for(let X=0;X<q.length;X++)b.push(v[S])}return b},r.V=function(h){Mt(this);let v=[];if(typeof h=="string")Na(this,h)&&(v=v.concat(this.g.get(An(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)v=v.concat(h[b])}return v},r.set=function(h,v){return Mt(this),this.i=null,h=An(this,h),Na(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},r.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function qs(h,v,b){Aa(h,v),0<b.length&&(h.i=null,h.g.set(An(h,v),F(b)),h.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var S=v[b];const X=encodeURIComponent(String(S)),he=this.V(S);for(S=0;S<he.length;S++){var q=X;he[S]!==""&&(q+="="+encodeURIComponent(String(he[S]))),h.push(q)}}return this.i=h.join("&")};function An(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Nc(h,v){v&&!h.j&&(Mt(h),h.i=null,h.g.forEach(function(b,S){var q=S.toLowerCase();S!=q&&(Aa(this,S),qs(this,q,b))},h)),h.j=v}function Ho(h,v){const b=new Sr;if(g.Image){const S=new Image;S.onload=D(vn,b,"TestLoadImage: loaded",!0,v,S),S.onerror=D(vn,b,"TestLoadImage: error",!1,v,S),S.onabort=D(vn,b,"TestLoadImage: abort",!1,v,S),S.ontimeout=D(vn,b,"TestLoadImage: timeout",!1,v,S),g.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else v(!1)}function Rc(h,v){const b=new Sr,S=new AbortController,q=setTimeout(()=>{S.abort(),vn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:S.signal}).then(X=>{clearTimeout(q),X.ok?vn(b,"TestPingServer: ok",!0,v):vn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),vn(b,"TestPingServer: error",!1,v)})}function vn(h,v,b,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(b)}catch{}}function es(){this.g=new sd}function Go(h,v,b){const S=b||"";try{Ea(h,function(q,X){let he=q;y(q)&&(he=Ln(q)),v.push(S+X+"="+encodeURIComponent(he))})}catch(q){throw v.push(S+"type="+encodeURIComponent("_badmap")),q}}function ps(h){this.l=h.Ub||null,this.j=h.eb||!1}V(ps,Mo),ps.prototype.g=function(){return new Nn(this.l,this.j)},ps.prototype.i=(function(h){return function(){return h}})({});function Nn(h,v){Rt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Nn,Rt),r=Nn.prototype,r.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,Dr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||g).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Dr(this)),this.g&&(this.readyState=3,Dr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ra(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ra(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ys(this):Dr(this),this.readyState==3&&Ra(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,ys(this))},r.Qa=function(h){this.g&&(this.response=h,ys(this))},r.ga=function(){this.g&&ys(this)};function ys(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Dr(h)}r.setRequestHeader=function(h,v){this.u.append(h,v)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=v.next();return h.join(`\r
`)};function Dr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Nn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ki(h){let v="";return ce(h,function(b,S){v+=S,v+=":",v+=b,v+=`\r
`}),v}function Mr(h,v,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=ki(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):$e(h,v,b))}function it(h){Rt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(it,Rt);var nn=/^https?$/i,Fs=["POST","PUT"];r=it.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,v,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ds.g(),this.v=this.o?bc(this.o):bc(ds),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(X){Li(this,X);return}if(h=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)b.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())b.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),q=g.FormData&&h instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Fs,v,void 0))||S||q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,he]of b)this.g.setRequestHeader(X,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ca(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){Li(this,X)}};function Li(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Or(h),kr(h)}function Or(h){h.A||(h.A=!0,Dt(h,"complete"),Dt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Dt(this,"complete"),Dt(this,"abort"),kr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kr(this,!0)),it.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Cc(this):this.bb())},r.bb=function(){Cc(this)};function Cc(h){if(h.h&&typeof d<"u"&&(!h.v[1]||fn(h)!=4||h.Z()!=2)){if(h.u&&fn(h)==4)xc(h.Ea,0,h);else if(Dt(h,"readystatechange"),fn(h)==4){h.h=!1;try{const he=h.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var S;if(S=he===0){var q=String(h.D).match(Bo)[1]||null;!q&&g.self&&g.self.location&&(q=g.self.location.protocol.slice(0,-1)),S=!nn.test(q?q.toLowerCase():"")}b=S}if(b)Dt(h,"complete"),Dt(h,"success");else{h.m=6;try{var X=2<fn(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",Or(h)}}finally{kr(h)}}}}function kr(h,v){if(h.g){Ca(h);const b=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Dt(h,"ready");try{b.onreadystatechange=S}catch{}}}function Ca(h){h.I&&(g.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function fn(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),un(v)}};function Vi(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function jc(h){const v={};h=(h.g&&2<=fn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(te(h[S]))continue;var b=L(h[S]);const q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=v[q]||[];v[q]=X,X.push(b)}I(v,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(h,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||v}function Ic(h){this.Aa=0,this.i=[],this.j=new Sr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ui("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ui("baseRetryDelayMs",5e3,h),this.cb=Ui("retryDelaySeedMs",1e4,h),this.Wa=Ui("forwardChannelMaxRetries",2,h),this.wa=Ui("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Po(h&&h.concurrentRequestLimit),this.Da=new es,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ic.prototype,r.la=8,r.G=1,r.connect=function(h,v,b,S){qt(0),this.W=h,this.H=v||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.I=Uc(this,null,this.W),ja(this)};function $o(h){if(Dc(h),h.G==3){var v=h.U++,b=ft(h.I);if($e(b,"SID",h.K),$e(b,"RID",v),$e(b,"TYPE","terminate"),Pi(h,b),v=new fs(h,h.j,v),v.L=2,v.v=Oi(ft(b)),b=!1,g.navigator&&g.navigator.sendBeacon)try{b=g.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&g.Image&&(new Image().src=v.v,b=!0),b||(v.g=Pc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Zn(v)}Xo(h)}function Lr(h){h.g&&(Qo(h),h.g.cancel(),h.g=null)}function Dc(h){Lr(h),h.u&&(g.clearTimeout(h.u),h.u=null),Vr(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&g.clearTimeout(h.s),h.s=null)}function ja(h){if(!zo(h.h)&&!h.s){h.s=!0;var v=h.Ga;W||De(),de||(W(),de=!0),be.add(v,h),h.B=0}}function cd(h,v){return Tc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Tr(A(h.Ga,h,v),Vc(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new fs(this,this.j,h);let X=this.o;if(this.S&&(X?(X=N(X),j(X,this.S)):X=this.S),this.m!==null||this.O||(q.H=X,X=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Ko(this,q,v),b=ft(this.I),$e(b,"RID",h),$e(b,"CVER",22),this.D&&$e(b,"X-HTTP-Session-Id",this.D),Pi(this,b),X&&(this.O?v="headers="+encodeURIComponent(String(ki(X)))+"&"+v:this.m&&Mr(b,this.m,X)),Cr(this.h,q),this.Ua&&$e(b,"TYPE","init"),this.P?($e(b,"$req",v),$e(b,"SID","null"),q.T=!0,Ii(q,b,null)):Ii(q,b,v),this.G=2}}else this.G==3&&(h?Mc(this,h):this.i.length==0||zo(this.h)||Mc(this))};function Mc(h,v){var b;v?b=v.l:b=h.U++;const S=ft(h.I);$e(S,"SID",h.K),$e(S,"RID",b),$e(S,"AID",h.T),Pi(h,S),h.m&&h.o&&Mr(S,h.m,h.o),b=new fs(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Ko(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Cr(h.h,b),Ii(b,S,v)}function Pi(h,v){h.H&&ce(h.H,function(b,S){$e(v,S,b)}),h.l&&Ea({},function(b,S){$e(v,S,b)})}function Ko(h,v,b){b=Math.min(h.i.length,b);var S=h.l?A(h.l.Na,h.l,h):null;e:{var q=h.i;let X=-1;for(;;){const he=["count="+b];X==-1?0<b?(X=q[0].g,he.push("ofs="+X)):X=0:he.push("ofs="+X);let We=!0;for(let bt=0;bt<b;bt++){let ke=q[bt].g;const Ot=q[bt].map;if(ke-=X,0>ke)X=Math.max(0,q[bt].g-100),We=!1;else try{Go(Ot,he,"req"+ke+"_")}catch{S&&S(Ot)}}if(We){S=he.join("&");break e}}}return h=h.i.splice(0,b),v.D=h,S}function Oc(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;W||De(),de||(W(),de=!0),be.add(v,h),h.v=0}}function Yo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Tr(A(h.Fa,h),Vc(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,kc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Tr(A(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),Lr(this),kc(this))};function Qo(h){h.A!=null&&(g.clearTimeout(h.A),h.A=null)}function kc(h){h.g=new fs(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=ft(h.qa);$e(v,"RID","rpc"),$e(v,"SID",h.K),$e(v,"AID",h.T),$e(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&$e(v,"TO",h.ja),$e(v,"TYPE","xmlhttp"),Pi(h,v),h.m&&h.o&&Mr(v,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Oi(ft(v)),b.m=null,b.P=!0,Ps(b,h)}r.Za=function(){this.C!=null&&(this.C=null,Lr(this),Yo(this),qt(19))};function Vr(h){h.C!=null&&(g.clearTimeout(h.C),h.C=null)}function Lc(h,v){var b=null;if(h.g==v){Vr(h),Qo(h),h.g=null;var S=2}else if(Rr(h.h,v))b=v.D,Un(h.h,v),S=1;else return;if(h.G!=0){if(v.o)if(S==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;S=ba(),Dt(S,new ko(S,b)),ja(h)}else Oc(h);else if(q=v.s,q==3||q==0&&0<v.X||!(S==1&&cd(h,v)||S==2&&Yo(h)))switch(b&&0<b.length&&(v=h.h,v.i=v.i.concat(b)),q){case 1:Hs(h,5);break;case 4:Hs(h,10);break;case 3:Hs(h,6);break;default:Hs(h,2)}}}function Vc(h,v){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*v}function Hs(h,v){if(h.j.info("Error code "+v),v==2){var b=A(h.fb,h),S=h.Xa;const q=!S;S=new Bs(S||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||jr(S,"https"),Oi(S),q?Ho(S.toString(),b):Rc(S.toString(),b)}else qt(2);h.G=0,h.l&&h.l.sa(v),Xo(h),Dc(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function Xo(h){if(h.G=0,h.ka=[],h.l){const v=dn(h.h);(v.length!=0||h.i.length!=0)&&(z(h.ka,v),z(h.ka,h.i),h.h.i.length=0,F(h.i),h.i.length=0),h.l.ra()}}function Uc(h,v,b){var S=b instanceof Bs?ft(b):new Bs(b);if(S.g!="")v&&(S.g=v+"."+S.g),Mi(S,S.s);else{var q=g.location;S=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var X=new Bs(null);S&&jr(X,S),v&&(X.g=v),q&&Mi(X,q),b&&(X.l=b),S=X}return b=h.D,v=h.ya,b&&v&&$e(S,b,v),$e(S,"VER",h.la),Pi(h,S),S}function Pc(h,v,b){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new it(new ps({eb:b})):new it(h.pa),v.Ha(h.J),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function zc(){}r=zc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ia(){}Ia.prototype.g=function(h,v){return new mn(h,v)};function mn(h,v){Rt.call(this),this.g=new Ic(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!te(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!te(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Ur(this)}V(mn,Rt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){$o(this.g)},mn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=Ln(h),h=b);v.i.push(new rd(v.Ya++,h)),v.G==3&&ja(v)},mn.prototype.N=function(){this.g.l=null,delete this.j,$o(this.g),delete this.g,mn.aa.N.call(this)};function Bc(h){br.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const b in v){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}V(Bc,br);function qc(){Jn.call(this),this.status=1}V(qc,Jn);function Ur(h){this.g=h}V(Ur,zc),Ur.prototype.ua=function(){Dt(this.g,"a")},Ur.prototype.ta=function(h){Dt(this.g,new Bc(h))},Ur.prototype.sa=function(h){Dt(this.g,new qc)},Ur.prototype.ra=function(){Dt(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,mb=function(){return new Ia},fb=function(){return ba()},db=Vn,Om={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,ih=dt,Ft.COMPLETE="complete",hb=Ft,ji.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Ll=ji,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,ub=it}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});const a_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new eg("@firebase/firestore");function kl(){return la.logLevel}function _e(r,...e){if(la.logLevel<=He.DEBUG){const n=e.map(fg);la.debug(`Firestore (${So}): ${r}`,...n)}}function yr(r,...e){if(la.logLevel<=He.ERROR){const n=e.map(fg);la.error(`Firestore (${So}): ${r}`,...n)}}function po(r,...e){if(la.logLevel<=He.WARN){const n=e.map(fg);la.warn(`Firestore (${So}): ${r}`,...n)}}function fg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(r="Unexpected state"){const e=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: `+r;throw yr(e),new Error(e)}function et(r,e){r||Re()}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(an.UNAUTHENTICATED)))}shutdown(){}}class L2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class V2{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let c=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new hr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new hr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string"),new gb(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new an(e)}}class U2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=an.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class P2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new U2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){et(this.o===void 0);const i=c=>{c.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,_e("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(et(typeof n.token=="string"),this.R=n.token,new z2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=q2(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%e.length))}return i}}function Qe(r,e){return r<e?-1:r>e?1:0}function yo(r,e,n){return r.length===e.length&&r.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new jt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.timestamp=e}static fromTimestamp(e){return new je(e)}static min(){return new je(new jt(0,0))}static max(){return new je(new jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n,i){n===void 0?n=0:n>e.length&&Re(),i===void 0?i=e.length-n:i>e.length-n&&Re(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Yl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yl?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=e.get(o),d=n.get(o);if(c<d)return-1;if(c>d)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class lt extends Yl{construct(e,n,i){return new lt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new lt(n)}static emptyPath(){return new lt([])}}const F2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Yl{construct(e,n,i){return new Wt(e,n,i)}static isValidIdentifier(e){return F2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new pe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(i+=g,o++):(c(),o++)}if(c(),d)throw new pe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(lt.fromString(e))}static fromName(e){return new Te(lt.fromString(e).popFirst(5))}static empty(){return new Te(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new lt(e.slice()))}}function H2(r,e){const n=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=je.fromTimestamp(i===1e9?new jt(n+1,0):new jt(n,i));return new xi(o,Te.empty(),e)}function G2(r){return new xi(r.readTime,r.key,-1)}class xi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new xi(je.min(),Te.empty(),-1)}static max(){return new xi(je.max(),Te.empty(),-1)}}function $2(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(r.documentKey,e.documentKey),n!==0?n:Qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==K2)throw r;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,i)=>{n(e)}))}static reject(e){return new ae(((n,i)=>{i(e)}))}static waitFor(e){return new ae(((n,i)=>{let o=0,c=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++c,d&&c===o&&n()}),(p=>i(p)))})),d=!0,c===o&&n()}))}static or(e){let n=ae.resolve(!1);for(const i of e)n=n.next((o=>o?ae.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,c)=>{i.push(n.call(this,o,c))})),this.waitFor(i)}static mapArray(e,n){return new ae(((i,o)=>{const c=e.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(e[y]).next((_=>{d[y]=_,++g,g===c&&i(d)}),(_=>o(_)))}}))}static doWhile(e,n){return new ae(((i,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):i()};c()}))}}function Q2(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hc(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}mg.oe=-1;function Vh(r){return r==null}function xh(r){return r===0&&1/r==-1/0}function X2(r){return typeof r=="number"&&Number.isInteger(r)&&!xh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ao(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function yb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??Xt.RED,this.left=o??Xt.EMPTY,this.right=c??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new Xt(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,n,i,o,c){return this}insert(e,n,i){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new l_(this.data.getIterator())}getIteratorFrom(e){return new l_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class l_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new rs([])}unionWith(e){let n=new Jt(Wt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new rs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new vb("Invalid base64 string: "+c):c}})(e);return new Zt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const W2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bi(r){if(et(!!r),typeof r=="string"){let e=0;const n=W2.exec(r);if(et(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xt(r.seconds),nanos:xt(r.nanos)}}function xt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ca(r){return typeof r=="string"?Zt.fromBase64String(r):Zt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pg(r){const e=r.mapValue.fields.__previous_value__;return gg(e)?pg(e):e}function Ql(r){const e=bi(r.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n,i,o,c,d,g,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y}}class Xl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu={mapValue:{}};function ua(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?gg(r)?4:eR(r)?9007199254740991:Z2(r)?10:11:Re()}function Rs(r,e){if(r===e)return!0;const n=ua(r);if(n!==ua(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ql(r).isEqual(Ql(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=bi(o.timestampValue),g=bi(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return ca(o.bytesValue).isEqual(ca(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return xt(o.geoPointValue.latitude)===xt(c.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return xt(o.integerValue)===xt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=xt(o.doubleValue),g=xt(c.doubleValue);return d===g?xh(d)===xh(g):isNaN(d)&&isNaN(g)}return!1})(r,e);case 9:return yo(r.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},g=c.mapValue.fields||{};if(o_(d)!==o_(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!Rs(d[p],g[p])))return!1;return!0})(r,e);default:return Re()}}function Wl(r,e){return(r.values||[]).find((n=>Rs(n,e)))!==void 0}function vo(r,e){if(r===e)return 0;const n=ua(r),i=ua(e);if(n!==i)return Qe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=xt(c.integerValue||c.doubleValue),p=xt(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(r,e);case 3:return c_(r.timestampValue,e.timestampValue);case 4:return c_(Ql(r),Ql(e));case 5:return Qe(r.stringValue,e.stringValue);case 6:return(function(c,d){const g=ca(c),p=ca(d);return g.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const _=Qe(g[y],p[y]);if(_!==0)return _}return Qe(g.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Qe(xt(c.latitude),xt(d.latitude));return g!==0?g:Qe(xt(c.longitude),xt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return u_(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var g,p,y,_;const w=c.fields||{},A=d.fields||{},D=(g=w.value)===null||g===void 0?void 0:g.arrayValue,V=(p=A.value)===null||p===void 0?void 0:p.arrayValue,F=Qe(((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0,((_=V==null?void 0:V.values)===null||_===void 0?void 0:_.length)||0);return F!==0?F:u_(D,V)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Xu.mapValue&&d===Xu.mapValue)return 0;if(c===Xu.mapValue)return 1;if(d===Xu.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=d.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const A=Qe(p[w],_[w]);if(A!==0)return A;const D=vo(g[p[w]],y[_[w]]);if(D!==0)return D}return Qe(p.length,_.length)})(r.mapValue,e.mapValue);default:throw Re()}}function c_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Qe(r,e);const n=bi(r),i=bi(e),o=Qe(n.seconds,i.seconds);return o!==0?o:Qe(n.nanos,i.nanos)}function u_(r,e){const n=r.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=vo(n[o],i[o]);if(c)return c}return Qe(n.length,i.length)}function _o(r){return km(r)}function km(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const i=bi(n);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return ca(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Te.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let i="[",o=!0;for(const c of n.values||[])o?o=!1:i+=",",i+=km(c);return i+"]"})(r.arrayValue):"mapValue"in r?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${km(n.fields[d])}`;return o+"}"})(r.mapValue):Re()}function h_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Lm(r){return!!r&&"integerValue"in r}function yg(r){return!!r&&"arrayValue"in r}function d_(r){return!!r&&"nullValue"in r}function f_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ah(r){return!!r&&"mapValue"in r}function Z2(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Bl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ao(r.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Bl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function eR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ah(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bl(n)}setAll(e){let n=Wt.emptyPath(),i={},o=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,i,o),i={},o=[],n=g.popLast()}d?i[g.lastSegment()]=Bl(d):o.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());ah(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];ah(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Ao(n,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new Xn(Bl(this.value))}}function _b(r){const e=[];return Ao(r.fields,((n,i)=>{const o=new Wt([n]);if(ah(i)){const c=_b(i.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new rs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n,i,o,c,d,g){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new on(e,0,je.min(),je.min(),je.min(),Xn.empty(),0)}static newFoundDocument(e,n,i,o){return new on(e,1,n,je.min(),i,o,0)}static newNoDocument(e,n){return new on(e,2,n,je.min(),je.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new on(e,3,n,je.min(),je.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n){this.position=e,this.inclusive=n}}function m_(r,e,n){let i=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?i=Te.comparator(Te.fromName(d.referenceValue),n.key):i=vo(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function g_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Rs(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function tR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{}class Nt extends xb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new sR(e,n,i):n==="array-contains"?new aR(e,i):n==="in"?new oR(e,i):n==="not-in"?new lR(e,i):n==="array-contains-any"?new cR(e,i):new Nt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new rR(e,i):new iR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vo(n,this.value)):n!==null&&ua(this.value)===ua(n)&&this.matchesComparison(vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class os extends xb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new os(e,n)}matches(e){return bb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bb(r){return r.op==="and"}function wb(r){return nR(r)&&bb(r)}function nR(r){for(const e of r.filters)if(e instanceof os)return!1;return!0}function Vm(r){if(r instanceof Nt)return r.field.canonicalString()+r.op.toString()+_o(r.value);if(wb(r))return r.filters.map((e=>Vm(e))).join(",");{const e=r.filters.map((n=>Vm(n))).join(",");return`${r.op}(${e})`}}function Eb(r,e){return r instanceof Nt?(function(i,o){return o instanceof Nt&&i.op===o.op&&i.field.isEqual(o.field)&&Rs(i.value,o.value)})(r,e):r instanceof os?(function(i,o){return o instanceof os&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,d,g)=>c&&Eb(d,o.filters[g])),!0):!1})(r,e):void Re()}function Tb(r){return r instanceof Nt?(function(n){return`${n.field.canonicalString()} ${n.op} ${_o(n.value)}`})(r):r instanceof os?(function(n){return n.op.toString()+" {"+n.getFilters().map(Tb).join(" ,")+"}"})(r):"Filter"}class sR extends Nt{constructor(e,n,i){super(e,n,i),this.key=Te.fromName(i.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class rR extends Nt{constructor(e,n){super(e,"in",n),this.keys=Sb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class iR extends Nt{constructor(e,n){super(e,"not-in",n),this.keys=Sb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Sb(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class aR extends Nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yg(n)&&Wl(n.arrayValue,this.value)}}class oR extends Nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wl(this.value.arrayValue,n)}}class lR extends Nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Wl(this.value.arrayValue,n)}}class cR extends Nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Wl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n=null,i=[],o=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=d,this.endAt=g,this.ue=null}}function p_(r,e=null,n=[],i=[],o=null,c=null,d=null){return new uR(r,e,n,i,o,c,d)}function vg(r){const e=Ie(r);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Vm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>_o(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>_o(i))).join(",")),e.ue=n}return e.ue}function _g(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!tR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!Eb(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!g_(r.startAt,e.startAt)&&g_(r.endAt,e.endAt)}function Um(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n=null,i=[],o=[],c=null,d="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hR(r,e,n,i,o,c,d,g){return new No(r,e,n,i,o,c,d,g)}function xg(r){return new No(r)}function y_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Ab(r){return r.collectionGroup!==null}function ql(r){const e=Ie(r);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Jt(Wt.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Jl(c,i))})),n.has(Wt.keyField().canonicalString())||e.ce.push(new Jl(Wt.keyField(),i))}return e.ce}function Ss(r){const e=Ie(r);return e.le||(e.le=dR(e,ql(r))),e.le}function dR(r,e){if(r.limitType==="F")return p_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Jl(o.field,c)}));const n=r.endAt?new bh(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new bh(r.startAt.position,r.startAt.inclusive):null;return p_(r.path,r.collectionGroup,e,r.filters,r.limit,n,i)}}function Pm(r,e){const n=r.filters.concat([e]);return new No(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function wh(r,e,n){return new No(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Uh(r,e){return _g(Ss(r),Ss(e))&&r.limitType===e.limitType}function Nb(r){return`${vg(Ss(r))}|lt:${r.limitType}`}function ao(r){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>Tb(o))).join(", ")}]`),Vh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>_o(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>_o(o))).join(",")),`Target(${i})`})(Ss(r))}; limitType=${r.limitType})`}function Ph(r,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Te.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(r,e)&&(function(i,o){for(const c of ql(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,g,p){const y=m_(d,g,p);return d.inclusive?y<=0:y<0})(i.startAt,ql(i),o)||i.endAt&&!(function(d,g,p){const y=m_(d,g,p);return d.inclusive?y>=0:y>0})(i.endAt,ql(i),o))})(r,e)}function fR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Rb(r){return(e,n)=>{let i=!1;for(const o of ql(r)){const c=mR(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function mR(r,e,n){const i=r.field.isKeyField()?Te.comparator(e.key,n.key):(function(c,d,g){const p=d.data.field(c),y=g.data.field(c);return p!==null&&y!==null?vo(p,y):Re()})(r.field,e,n);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,((n,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return yb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new ht(Te.comparator);function vr(){return gR}const Cb=new ht(Te.comparator);function Vl(...r){let e=Cb;for(const n of r)e=e.insert(n.key,n);return e}function jb(r){let e=Cb;return r.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function sa(){return Fl()}function Ib(){return Fl()}function Fl(){return new Ro((r=>r.toString()),((r,e)=>r.isEqual(e)))}const pR=new ht(Te.comparator),yR=new Jt(Te.comparator);function Be(...r){let e=yR;for(const n of r)e=e.add(n);return e}const vR=new Jt(Qe);function _R(){return vR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function Db(r){return{integerValue:""+r}}function xR(r,e){return X2(e)?Db(e):bg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this._=void 0}}function bR(r,e,n){return r instanceof Zl?(function(o,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&gg(c)&&(c=pg(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}})(n,e):r instanceof ec?Ob(r,e):r instanceof tc?kb(r,e):(function(o,c){const d=Mb(o,c),g=v_(d)+v_(o.Pe);return Lm(d)&&Lm(o.Pe)?Db(g):bg(o.serializer,g)})(r,e)}function wR(r,e,n){return r instanceof ec?Ob(r,e):r instanceof tc?kb(r,e):n}function Mb(r,e){return r instanceof Eh?(function(i){return Lm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Zl extends zh{}class ec extends zh{constructor(e){super(),this.elements=e}}function Ob(r,e){const n=Lb(e);for(const i of r.elements)n.some((o=>Rs(o,i)))||n.push(i);return{arrayValue:{values:n}}}class tc extends zh{constructor(e){super(),this.elements=e}}function kb(r,e){let n=Lb(e);for(const i of r.elements)n=n.filter((o=>!Rs(o,i)));return{arrayValue:{values:n}}}class Eh extends zh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function v_(r){return xt(r.integerValue||r.doubleValue)}function Lb(r){return yg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n){this.field=e,this.transform=n}}function TR(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof ec&&o instanceof ec||i instanceof tc&&o instanceof tc?yo(i.elements,o.elements,Rs):i instanceof Eh&&o instanceof Eh?Rs(i.Pe,o.Pe):i instanceof Zl&&o instanceof Zl})(r.transform,e.transform)}class SR{constructor(e,n){this.version=e,this.transformResults=n}}class As{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new As}static exists(e){return new As(void 0,e)}static updateTime(e){return new As(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Bh{}function Vb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Pb(r.key,As.none()):new dc(r.key,r.data,As.none());{const n=r.data,i=Xn.empty();let o=new Jt(Wt.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),o=o.add(c)}return new fa(r.key,i,new rs(o.toArray()),As.none())}}function AR(r,e,n){r instanceof dc?(function(o,c,d){const g=o.value.clone(),p=x_(o.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):r instanceof fa?(function(o,c,d){if(!oh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const g=x_(o.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(Ub(o)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Hl(r,e,n,i){return r instanceof dc?(function(c,d,g,p){if(!oh(c.precondition,d))return g;const y=c.value.clone(),_=b_(c.fieldTransforms,p,d);return y.setAll(_),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,e,n,i):r instanceof fa?(function(c,d,g,p){if(!oh(c.precondition,d))return g;const y=b_(c.fieldTransforms,p,d),_=d.data;return _.setAll(Ub(c)),_.setAll(y),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,e,n,i):(function(c,d,g){return oh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(r,e,n)}function NR(r,e){let n=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),c=Mb(i.transform,o||null);c!=null&&(n===null&&(n=Xn.empty()),n.set(i.field,c))}return n||null}function __(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&yo(i,o,((c,d)=>TR(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class dc extends Bh{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fa extends Bh{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ub(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=r.data.field(n);e.set(n,i)}})),e}function x_(r,e,n){const i=new Map;et(r.length===n.length);for(let o=0;o<n.length;o++){const c=r[o],d=c.transform,g=e.data.field(c.field);i.set(c.field,wR(d,g,n[o]))}return i}function b_(r,e,n){const i=new Map;for(const o of r){const c=o.transform,d=n.data.field(o.field);i.set(o.field,bR(c,d,e))}return i}class Pb extends Bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RR extends Bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&AR(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Hl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Hl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Ib();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(o.key)?null:g;const p=Vb(d,g);p!==null&&i.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(je.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,((n,i)=>__(n,i)))&&yo(this.baseMutations,e.baseMutations,((n,i)=>__(n,i)))}}class wg{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){et(e.mutations.length===i.length);let o=(function(){return pR})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,i[d].version);return new wg(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Ge;function DR(r){switch(r){default:return Re();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function zb(r){if(r===void 0)return yr("GRPC error has no .code"),ie.UNKNOWN;switch(r){case At.OK:return ie.OK;case At.CANCELLED:return ie.CANCELLED;case At.UNKNOWN:return ie.UNKNOWN;case At.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case At.INTERNAL:return ie.INTERNAL;case At.UNAVAILABLE:return ie.UNAVAILABLE;case At.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case At.NOT_FOUND:return ie.NOT_FOUND;case At.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case At.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case At.ABORTED:return ie.ABORTED;case At.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case At.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case At.DATA_LOSS:return ie.DATA_LOSS;default:return Re()}}(Ge=At||(At={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=new ia([4294967295,4294967295],0);function w_(r){const e=MR().encode(r),n=new cb;return n.update(e),new Uint8Array(n.digest())}function E_(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ia([n,i],0),new ia([o,c],0)]}class Eg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ul(`Invalid padding: ${n}`);if(i<0)throw new Ul(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ul(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ul(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ia.fromNumber(this.Ie)}Ee(e,n,i){let o=e.add(n.multiply(ia.fromNumber(i)));return o.compare(OR)===1&&(o=new ia([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=w_(e),[i,o]=E_(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(i,o,c);if(!this.de(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Eg(c,o,n);return i.forEach((g=>d.insert(g))),d}insert(e){if(this.Ie===0)return;const n=w_(e),[i,o]=E_(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(i,o,c);this.Ae(d)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,fc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new qh(je.min(),o,new ht(Qe),vr(),Be())}}class fc{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new fc(i,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,i,o){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=o}}class Bb{constructor(e,n){this.targetId=e,this.me=n}}class qb{constructor(e,n,i=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class T_{constructor(){this.fe=0,this.ge=A_(),this.pe=Zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),n=Be(),i=Be();return this.ge.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Re()}})),new fc(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=A_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kR{constructor(e){this.Le=e,this.Be=new Map,this.ke=vr(),this.qe=S_(),this.Qe=new ht(Qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Re()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((i,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,i=e.me.count,o=this.Je(n);if(o){const c=o.target;if(Um(c))if(i===0){const d=new Te(c.path);this.Ue(n,d,on.newNoDocument(d,je.min()))}else et(i===1);else{const d=this.Ye(n);if(d!==i){const g=this.Ze(e),p=g?this.Xe(g,e,d):1;if(p!==0){this.je(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,y)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let d,g;try{d=ca(i).toUint8Array()}catch(p){if(p instanceof vb)return po("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Eg(d,o,c)}catch(p){return po(p instanceof Ul?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.Ie===0?null:g}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach((c=>{const d=this.Le.tt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.Ue(n,c,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((c,d)=>{const g=this.Je(d);if(g){if(c.current&&Um(g.target)){const p=new Te(g.target.path);this.ke.get(p)!==null||this.it(d,p)||this.Ue(d,p,on.newNoDocument(p,e))}c.be&&(n.set(d,c.ve()),c.Ce())}}));let i=Be();this.qe.forEach(((c,d)=>{let g=!0;d.forEachWhile((p=>{const y=this.Je(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(c))})),this.ke.forEach(((c,d)=>d.setReadTime(e)));const o=new qh(e,n,this.Qe,this.ke,i);return this.ke=vr(),this.qe=S_(),this.Qe=new ht(Qe),o}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new T_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Jt(Qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new T_),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function S_(){return new ht(Te.comparator)}function A_(){return new ht(Te.comparator)}const LR={asc:"ASCENDING",desc:"DESCENDING"},VR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UR={and:"AND",or:"OR"};class PR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zm(r,e){return r.useProto3Json||Vh(e)?e:{value:e}}function Th(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function zR(r,e){return Th(r,e.toTimestamp())}function Ns(r){return et(!!r),je.fromTimestamp((function(n){const i=bi(n);return new jt(i.seconds,i.nanos)})(r))}function Tg(r,e){return Bm(r,e).canonicalString()}function Bm(r,e){const n=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Hb(r){const e=lt.fromString(r);return et(Qb(e)),e}function qm(r,e){return Tg(r.databaseId,e.path)}function _m(r,e){const n=Hb(e);if(n.get(1)!==r.databaseId.projectId)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Te($b(n))}function Gb(r,e){return Tg(r.databaseId,e)}function BR(r){const e=Hb(r);return e.length===4?lt.emptyPath():$b(e)}function Fm(r){return new lt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function $b(r){return et(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function N_(r,e,n){return{name:qm(r,e),fields:n.value.mapValue.fields}}function qR(r,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Re()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,_){return y.useProto3Json?(et(_===void 0||typeof _=="string"),Zt.fromBase64String(_||"")):(et(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Zt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(y){const _=y.code===void 0?ie.UNKNOWN:zb(y.code);return new pe(_,y.message||"")})(d);n=new qb(i,o,c,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=_m(r,i.document.name),c=Ns(i.document.updateTime),d=i.document.createTime?Ns(i.document.createTime):je.min(),g=new Xn({mapValue:{fields:i.document.fields}}),p=on.newFoundDocument(o,c,d,g),y=i.targetIds||[],_=i.removedTargetIds||[];n=new lh(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=_m(r,i.document),c=i.readTime?Ns(i.readTime):je.min(),d=on.newNoDocument(o,c),g=i.removedTargetIds||[];n=new lh([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=_m(r,i.document),c=i.removedTargetIds||[];n=new lh([],c,o,null)}else{if(!("filter"in e))return Re();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,d=new IR(o,c),g=i.targetId;n=new Bb(g,d)}}return n}function FR(r,e){let n;if(e instanceof dc)n={update:N_(r,e.key,e.value)};else if(e instanceof Pb)n={delete:qm(r,e.key)};else if(e instanceof fa)n={update:N_(r,e.key,e.data),updateMask:JR(e.fieldMask)};else{if(!(e instanceof RR))return Re();n={verify:qm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const g=d.transform;if(g instanceof Zl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ec)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof tc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Eh)return{fieldPath:d.field.canonicalString(),increment:g.Pe};throw Re()})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:zR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Re()})(r,e.precondition)),n}function HR(r,e){return r&&r.length>0?(et(e!==void 0),r.map((n=>(function(o,c){let d=o.updateTime?Ns(o.updateTime):Ns(c);return d.isEqual(je.min())&&(d=Ns(c)),new SR(d,o.transformResults||[])})(n,e)))):[]}function GR(r,e){return{documents:[Gb(r,e.path)]}}function $R(r,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Gb(r,o);const c=(function(y){if(y.length!==0)return Yb(os.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((_=>(function(A){return{field:oo(A.field),direction:QR(A.dir)}})(_)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=zm(r,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:n,parent:o}}function KR(r){let e=BR(r.parent);const n=r.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){et(i===1);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];n.where&&(c=(function(w){const A=Kb(w);return A instanceof os&&wb(A)?A.getFilters():[A]})(n.where));let d=[];n.orderBy&&(d=(function(w){return w.map((A=>(function(V){return new Jl(lo(V.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(A)))})(n.orderBy));let g=null;n.limit&&(g=(function(w){let A;return A=typeof w=="object"?w.value:w,Vh(A)?null:A})(n.limit));let p=null;n.startAt&&(p=(function(w){const A=!!w.before,D=w.values||[];return new bh(D,A)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const A=!w.before,D=w.values||[];return new bh(D,A)})(n.endAt)),hR(e,o,d,c,g,"F",p,y)}function YR(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Kb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=lo(n.unaryFilter.field);return Nt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=lo(n.unaryFilter.field);return Nt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=lo(n.unaryFilter.field);return Nt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=lo(n.unaryFilter.field);return Nt.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Re()}})(r):r.fieldFilter!==void 0?(function(n){return Nt.create(lo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return os.create(n.compositeFilter.filters.map((i=>Kb(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}})(n.compositeFilter.op))})(r):Re()}function QR(r){return LR[r]}function XR(r){return VR[r]}function WR(r){return UR[r]}function oo(r){return{fieldPath:r.canonicalString()}}function lo(r){return Wt.fromServerFormat(r.fieldPath)}function Yb(r){return r instanceof Nt?(function(n){if(n.op==="=="){if(f_(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(d_(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(f_(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(d_(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:XR(n.op),value:n.value}}})(r):r instanceof os?(function(n){const i=n.getFilters().map((o=>Yb(o)));return i.length===1?i[0]:{compositeFilter:{op:WR(n.op),filters:i}}})(r):Re()}function JR(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Qb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,i,o,c=je.min(),d=je.min(),g=Zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.ct=e}}function eC(r){const e=KR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?wh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.un=new nC}addToCollectionParentIndex(e,n){return this.un.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(xi.min())}updateCollectionGroup(e,n,i){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class nC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Jt(lt.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Jt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xo(0)}static kn(){return new xo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.changes=new Ro((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ae.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Hl(i.mutation,o,rs.empty(),jt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Be()){const o=sa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((c=>{let d=Vl();return c.forEach(((g,p)=>{d=d.insert(g,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=sa();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Be())))}populateOverlays(e,n,i){const o=[];return i.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,i,o){let c=vr();const d=Fl(),g=(function(){return Fl()})();return n.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof fa)?c=c.insert(y.key,y):_!==void 0?(d.set(y.key,_.mutation.getFieldMask()),Hl(_.mutation,y,_.mutation.getFieldMask(),jt.now())):d.set(y.key,rs.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((y,_)=>d.set(y,_))),n.forEach(((y,_)=>{var w;return g.set(y,new rC(_,(w=d.get(y))!==null&&w!==void 0?w:null))})),g)))}recalculateAndSaveOverlays(e,n){const i=Fl();let o=new ht(((d,g)=>d-g)),c=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let _=i.get(p)||rs.empty();_=g.applyToLocalView(y,_),i.set(p,_);const w=(o.get(g.batchId)||Be()).add(p);o=o.insert(g.batchId,w)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,_=p.value,w=Ib();_.forEach((A=>{if(!c.has(A)){const D=Vb(n.get(A),i.get(A));D!==null&&w.set(A,D),c=c.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ae.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ab(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):ae.resolve(sa());let g=-1,p=c;return d.next((y=>ae.forEach(y,((_,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),c.get(_)?ae.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{p=p.insert(_,A)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,p,y,Be()))).next((_=>({batchId:g,changes:jb(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((i=>{let o=Vl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let d=Vl();return this.indexManager.getCollectionParents(e,c).next((g=>ae.forEach(g,(p=>{const y=(function(w,A){return new No(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((w,A)=>{d=d.insert(w,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o)))).next((d=>{c.forEach(((p,y)=>{const _=y.getKey();d.get(_)===null&&(d=d.insert(_,on.newInvalidDocument(_)))}));let g=Vl();return d.forEach(((p,y)=>{const _=c.get(p);_!==void 0&&Hl(_.mutation,y,rs.empty(),jt.now()),Ph(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ae.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ns(o.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:eC(o.bundledQuery),readTime:Ns(o.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.overlays=new ht(Te.comparator),this.Ir=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const i=sa();return ae.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,c)=>{this.ht(e,n,c)})),ae.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Ir.delete(i)),ae.resolve()}getOverlaysForCollection(e,n,i){const o=sa(),c=n.length+1,d=new Te(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new ht(((y,_)=>y-_));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let _=c.get(y.largestBatchId);_===null&&(_=sa(),c=c.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const g=sa(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>g.set(y,_))),!(g.size()>=o)););return ae.resolve(g)}ht(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new jR(n,i));let c=this.Ir.get(n);c===void 0&&(c=Be(),this.Ir.set(n,c)),this.Ir.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(){this.Tr=new Jt(Vt.Er),this.dr=new Jt(Vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Vt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Vr(new Vt(e,n))}mr(e,n){e.forEach((i=>this.removeReference(i,n)))}gr(e){const n=new Te(new lt([])),i=new Vt(n,e),o=new Vt(n,e+1),c=[];return this.dr.forEachInRange([i,o],(d=>{this.Vr(d),c.push(d.key)})),c}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Te(new lt([])),i=new Vt(n,e),o=new Vt(n,e+1);let c=Be();return this.dr.forEachInRange([i,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Vt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Vt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Te.comparator(e.key,n.key)||Qe(e.wr,n.wr)}static Ar(e,n){return Qe(e.wr,n.wr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Jt(Vt.Er)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new CR(c,n,i,o);this.mutationQueue.push(d);for(const g of o)this.br=this.br.add(new Vt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ae.resolve(d)}lookupMutationBatch(e,n){return ae.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.vr(i),c=o<0?0:o;return ae.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Vt(n,0),o=new Vt(n,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([i,o],(d=>{const g=this.Dr(d.wr);c.push(g)})),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Jt(Qe);return n.forEach((o=>{const c=new Vt(o,0),d=new Vt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,d],(g=>{i=i.add(g.wr)}))})),ae.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;Te.isDocumentKey(c)||(c=c.child(""));const d=new Vt(new Te(c),0);let g=new Jt(Qe);return this.br.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.wr)),!0)}),d),ae.resolve(this.Cr(g))}Cr(e){const n=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){et(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ae.forEach(n.mutations,(o=>{const c=new Vt(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,n){const i=new Vt(n,0),o=this.br.firstAfterOrEqual(i);return ae.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.Mr=e,this.docs=(function(){return new ht(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,d=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ae.resolve(i?i.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let i=vr();return n.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():on.newInvalidDocument(o))})),ae.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=vr();const d=n.path,g=new Te(d.child("")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||$2(G2(_),i)<=0||(o.has(_.key)||Ph(n,_))&&(c=c.insert(_.key,_.mutableCopy()))}return ae.resolve(c)}getAllFromCollectionGroup(e,n,i,o){Re()}Or(e,n){return ae.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new hC(this)}getSize(e){return ae.resolve(this.size)}}class hC extends sC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),ae.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.persistence=e,this.Nr=new Ro((n=>vg(n)),_g),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sg,this.targetCount=0,this.kr=xo.Bn()}forEachTarget(e,n){return this.Nr.forEach(((i,o)=>n(o))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),ae.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Kn(n),ae.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.Nr.forEach(((d,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.Nr.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ae.waitFor(c).next((()=>o))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return ae.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),ae.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ae.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return ae.resolve(i)}containsKey(e,n){return ae.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new mg(0),this.Kr=!1,this.Kr=!0,this.$r=new lC,this.referenceDelegate=e(this),this.Ur=new dC(this),this.indexManager=new tC,this.remoteDocumentCache=(function(o){return new uC(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new ZR(n),this.Gr=new aC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new cC(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){_e("MemoryPersistence","Starting transaction:",e);const o=new mC(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((c=>this.referenceDelegate.jr(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Hr(e,n){return ae.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,n))))}}class mC extends Y2{constructor(e){super(),this.currentSequenceNumber=e}}class Ag{constructor(e){this.persistence=e,this.Jr=new Sg,this.Yr=null}static Zr(e){return new Ag(e)}get Xr(){if(this.Yr)return this.Yr;throw Re()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),ae.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.Xr.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Xr,(i=>{const o=Te.fromPath(i);return this.ei(e,o).next((c=>{c||n.removeEntry(o,je.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return ae.or([()=>ae.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(e,n){let i=Be(),o=Be();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Ng(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return v1()?8:Q2(ln())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.Yi(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.Zi(e,n,o,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new gC;return this.Xi(e,n,d).next((g=>{if(c.result=g,this.zi)return this.es(e,n,d,g.size)}))})).next((()=>c.result))}es(e,n,i,o){return i.documentReadCount<this.ji?(kl()<=He.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ae.resolve()):(kl()<=He.DEBUG&&_e("QueryEngine","Query:",ao(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(kl()<=He.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ss(n))):ae.resolve())}Yi(e,n){if(y_(n))return ae.resolve(null);let i=Ss(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=wh(n,null,"F"),i=Ss(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Be(...c);return this.Ji.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.ts(n,g);return this.ns(n,y,d,p.readTime)?this.Yi(e,wh(n,null,"F")):this.rs(e,y,n,p)}))))})))))}Zi(e,n,i,o){return y_(n)||o.isEqual(je.min())?ae.resolve(null):this.Ji.getDocuments(e,i).next((c=>{const d=this.ts(n,c);return this.ns(n,d,i,o)?ae.resolve(null):(kl()<=He.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ao(n)),this.rs(e,d,n,H2(o,-1)).next((g=>g)))}))}ts(e,n){let i=new Jt(Rb(e));return n.forEach(((o,c)=>{Ph(e,c)&&(i=i.add(c))})),i}ns(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Xi(e,n,i){return kl()<=He.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",ao(n)),this.Ji.getDocumentsMatchingQuery(e,n,xi.min(),i)}rs(e,n,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,i,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new ht(Qe),this._s=new Ro((c=>vg(c)),_g),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function vC(r,e,n,i){return new yC(r,e,n,i)}async function Xb(r,e){const n=Ie(r);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,n.ls(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],g=[];let p=Be();for(const y of o){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of c){g.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(i,p).next((y=>({hs:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function _C(r,e){const n=Ie(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=n.cs.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,_){const w=y.batch,A=w.keys();let D=ae.resolve();return A.forEach((V=>{D=D.next((()=>_.getEntry(p,V))).next((F=>{const z=y.docVersions.get(V);et(z!==null),F.version.compareTo(z)<0&&(w.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),_.addEntry(F)))}))})),D.next((()=>g.mutationQueue.removeMutationBatch(p,w)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let p=Be();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function Wb(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function xC(r,e){const n=Ie(r),i=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const g=[];e.targetChanges.forEach(((_,w)=>{const A=o.get(w);if(!A)return;g.push(n.Ur.removeMatchingKeys(c,_.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(c,_.addedDocuments,w))));let D=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?D=D.withResumeToken(Zt.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):_.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(_.resumeToken,i)),o=o.insert(w,D),(function(F,z,Y){return F.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(A,D,_)&&g.push(n.Ur.updateTargetData(c,D))}));let p=vr(),y=Be();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,_))})),g.push(bC(c,d,e.documentUpdates).next((_=>{p=_.Ps,y=_.Is}))),!i.isEqual(je.min())){const _=n.Ur.getLastRemoteSnapshotVersion(c).next((w=>n.Ur.setTargetsMetadata(c,c.currentSequenceNumber,i)));g.push(_)}return ae.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(n.os=o,c)))}function bC(r,e,n){let i=Be(),o=Be();return n.forEach((c=>i=i.add(c))),e.getEntries(r,i).next((c=>{let d=vr();return n.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(je.min())?(e.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(g,p)):_e("LocalStore","Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{Ps:d,Is:o}}))}function wC(r,e){const n=Ie(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function EC(r,e){const n=Ie(r);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Ur.getTargetData(i,e).next((c=>c?(o=c,ae.resolve(o)):n.Ur.allocateTargetId(i).next((d=>(o=new gi(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i}))}async function Hm(r,e,n){const i=Ie(r),o=i.os.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!hc(d))throw d;_e("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function R_(r,e,n){const i=Ie(r);let o=je.min(),c=Be();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,_){const w=Ie(p),A=w._s.get(_);return A!==void 0?ae.resolve(w.os.get(A)):w.Ur.getTargetData(y,_)})(i,d,Ss(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(d,g.targetId).next((p=>{c=p}))})).next((()=>i.ss.getDocumentsMatchingQuery(d,e,n?o:je.min(),n?c:Be()))).next((g=>(TC(i,fR(e),g),{documents:g,Ts:c})))))}function TC(r,e,n){let i=r.us.get(e)||je.min();n.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),r.us.set(e,i)}class C_{constructor(){this.activeTargetIds=_R()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SC{constructor(){this.so=new C_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new C_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){_e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){_e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu=null;function xm(){return Wu===null?Wu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wu++,"0x"+Wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class CC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${o}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${c}`}get Fo(){return!1}Mo(n,i,o,c,d){const g=xm(),p=this.xo(n,i.toUriEncodedString());_e("RestConnection",`Sending RPC '${n}' ${g}:`,p,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,c,d),this.No(n,p,y,o).then((_=>(_e("RestConnection",`Received RPC '${n}' ${g}: `,_),_)),(_=>{throw po("RestConnection",`RPC '${n}' ${g} failed with error: `,_,"url: ",p,"request:",o),_}))}Lo(n,i,o,c,d,g){return this.Mo(n,i,o,c,d)}Oo(n,i,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+So})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((c,d)=>n[d]=c)),o&&o.headers.forEach(((c,d)=>n[d]=c))}xo(n,i){const o=NC[n];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,o){const c=xm();return new Promise(((d,g)=>{const p=new ub;p.setWithCredentials(!0),p.listenOnce(hb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case ih.NO_ERROR:const _=p.getResponseJson();_e(rn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),d(_);break;case ih.TIMEOUT:_e(rn,`RPC '${e}' ${c} timed out`),g(new pe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const w=p.getStatus();if(_e(rn,`RPC '${e}' ${c} failed with status:`,w,"response text:",p.getResponseText()),w>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A==null?void 0:A.error;if(D&&D.status&&D.message){const V=(function(z){const Y=z.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(Y)>=0?Y:ie.UNKNOWN})(D.status);g(new pe(V,D.message))}else g(new pe(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new pe(ie.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{_e(rn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(o);_e(rn,`RPC '${e}' ${c} sending request:`,o),p.send(n,"POST",y,i,15)}))}Bo(e,n,i){const o=xm(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=mb(),g=fb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const _=c.join("");_e(rn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=d.createWebChannel(_,p);let A=!1,D=!1;const V=new RC({Io:z=>{D?_e(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(A||(_e(rn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),A=!0),_e(rn,`RPC '${e}' stream ${o} sending:`,z),w.send(z))},To:()=>w.close()}),F=(z,Y,te)=>{z.listen(Y,(J=>{try{te(J)}catch(se){setTimeout((()=>{throw se}),0)}}))};return F(w,Ll.EventType.OPEN,(()=>{D||(_e(rn,`RPC '${e}' stream ${o} transport opened.`),V.yo())})),F(w,Ll.EventType.CLOSE,(()=>{D||(D=!0,_e(rn,`RPC '${e}' stream ${o} transport closed`),V.So())})),F(w,Ll.EventType.ERROR,(z=>{D||(D=!0,po(rn,`RPC '${e}' stream ${o} transport errored:`,z),V.So(new pe(ie.UNAVAILABLE,"The operation could not be completed")))})),F(w,Ll.EventType.MESSAGE,(z=>{var Y;if(!D){const te=z.data[0];et(!!te);const J=te,se=J.error||((Y=J[0])===null||Y===void 0?void 0:Y.error);if(se){_e(rn,`RPC '${e}' stream ${o} received error:`,se);const oe=se.status;let ce=(function(R){const j=At[R];if(j!==void 0)return zb(j)})(oe),I=se.message;ce===void 0&&(ce=ie.INTERNAL,I="Unknown error status: "+oe+" with message "+se.message),D=!0,V.So(new pe(ce,I)),w.close()}else _e(rn,`RPC '${e}' stream ${o} received:`,te),V.bo(te)}})),F(g,db.STAT_EVENT,(z=>{z.stat===Om.PROXY?_e(rn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Om.NOPROXY&&_e(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.wo()}),0),V}}function bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(r){return new PR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n,i=1e3,o=1.5,c=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=o,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&_e("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n,i,o,c,d,g,p){this.ui=e,this.Ho=i,this.Jo=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Jb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===n&&this.P_(i,o)}),(i=>{e((()=>{const o=new pe(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return _e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(_e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jC extends Zb{constructor(e,n,i,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=c}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=qR(this.serializer,e),i=(function(c){if(!("targetChange"in c))return je.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?je.min():d.readTime?Ns(d.readTime):je.min()})(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Fm(this.serializer),n.addTarget=(function(c,d){let g;const p=d.target;if(g=Um(p)?{documents:GR(c,p)}:{query:$R(c,p)._t},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=Fb(c,d.resumeToken);const y=zm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(je.min())>0){g.readTime=Th(c,d.snapshotVersion.toTimestamp());const y=zm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const i=YR(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Fm(this.serializer),n.removeTarget=e,this.a_(n)}}class IC extends Zb{constructor(e,n,i,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=HR(e.writeResults,e.commitTime),i=Ns(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Fm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>FR(this.serializer,i)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC extends class{}{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Mo(e,Bm(n,i),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(ie.UNKNOWN,c.toString())}))}Lo(e,n,i,o,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Lo(e,Bm(n,i),o,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pe(ie.UNKNOWN,d.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class MC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yr(n),this.D_=!1):_e("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o((d=>{i.enqueueAndForget((async()=>{ma(this)&&(_e("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const y=Ie(p);y.L_.add(4),await mc(y),y.q_.set("Unknown"),y.L_.delete(4),await Hh(y)})(this))}))})),this.q_=new MC(i,o)}}async function Hh(r){if(ma(r))for(const e of r.B_)await e(!0)}async function mc(r){for(const e of r.B_)await e(!1)}function ew(r,e){const n=Ie(r);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ig(n)?jg(n):Co(n).r_()&&Cg(n,e))}function Rg(r,e){const n=Ie(r),i=Co(n);n.N_.delete(e),i.r_()&&tw(n,e),n.N_.size===0&&(i.r_()?i.o_():ma(n)&&n.q_.set("Unknown"))}function Cg(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(r).A_(e)}function tw(r,e){r.Q_.xe(e),Co(r).R_(e)}function jg(r){r.Q_=new kR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Co(r).start(),r.q_.v_()}function Ig(r){return ma(r)&&!Co(r).n_()&&r.N_.size>0}function ma(r){return Ie(r).L_.size===0}function nw(r){r.Q_=void 0}async function kC(r){r.q_.set("Online")}async function LC(r){r.N_.forEach(((e,n)=>{Cg(r,e)}))}async function VC(r,e){nw(r),Ig(r)?(r.q_.M_(e),jg(r)):r.q_.set("Unknown")}async function UC(r,e,n){if(r.q_.set("Online"),e instanceof qb&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const g of c.targetIds)o.N_.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.N_.delete(g),o.Q_.removeTarget(g))})(r,e)}catch(i){_e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Sh(r,i)}else if(e instanceof lh?r.Q_.Ke(e):e instanceof Bb?r.Q_.He(e):r.Q_.We(e),!n.isEqual(je.min()))try{const i=await Wb(r.localStore);n.compareTo(i)>=0&&await(function(c,d){const g=c.Q_.rt(d);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=c.N_.get(y);_&&c.N_.set(y,_.withResumeToken(p.resumeToken,d))}})),g.targetMismatches.forEach(((p,y)=>{const _=c.N_.get(p);if(!_)return;c.N_.set(p,_.withResumeToken(Zt.EMPTY_BYTE_STRING,_.snapshotVersion)),tw(c,p);const w=new gi(_.target,p,y,_.sequenceNumber);Cg(c,w)})),c.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(i){_e("RemoteStore","Failed to raise snapshot:",i),await Sh(r,i)}}async function Sh(r,e,n){if(!hc(e))throw e;r.L_.add(1),await mc(r),r.q_.set("Offline"),n||(n=()=>Wb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{_e("RemoteStore","Retrying IndexedDB access"),await n(),r.L_.delete(1),await Hh(r)}))}function sw(r,e){return e().catch((n=>Sh(r,n,e)))}async function Gh(r){const e=Ie(r),n=wi(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;PC(e);)try{const o=await wC(e.localStore,i);if(o===null){e.O_.length===0&&n.o_();break}i=o.batchId,zC(e,o)}catch(o){await Sh(e,o)}rw(e)&&iw(e)}function PC(r){return ma(r)&&r.O_.length<10}function zC(r,e){r.O_.push(e);const n=wi(r);n.r_()&&n.V_&&n.m_(e.mutations)}function rw(r){return ma(r)&&!wi(r).n_()&&r.O_.length>0}function iw(r){wi(r).start()}async function BC(r){wi(r).p_()}async function qC(r){const e=wi(r);for(const n of r.O_)e.m_(n.mutations)}async function FC(r,e,n){const i=r.O_.shift(),o=wg.from(i,e,n);await sw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Gh(r)}async function HC(r,e){e&&wi(r).V_&&await(async function(i,o){if((function(d){return DR(d)&&d!==ie.ABORTED})(o.code)){const c=i.O_.shift();wi(i).s_(),await sw(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Gh(i)}})(r,e),rw(r)&&iw(r)}async function I_(r,e){const n=Ie(r);n.asyncQueue.verifyOperationInProgress(),_e("RemoteStore","RemoteStore received new credentials");const i=ma(n);n.L_.add(3),await mc(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Hh(n)}async function GC(r,e){const n=Ie(r);e?(n.L_.delete(2),await Hh(n)):e||(n.L_.add(2),await mc(n),n.q_.set("Unknown"))}function Co(r){return r.K_||(r.K_=(function(n,i,o){const c=Ie(n);return c.w_(),new jC(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Eo:kC.bind(null,r),Ro:LC.bind(null,r),mo:VC.bind(null,r),d_:UC.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),Ig(r)?jg(r):r.q_.set("Unknown")):(await r.K_.stop(),nw(r))}))),r.K_}function wi(r){return r.U_||(r.U_=(function(n,i,o){const c=Ie(n);return c.w_(),new IC(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:BC.bind(null,r),mo:HC.bind(null,r),f_:qC.bind(null,r),g_:FC.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await Gh(r)):(await r.U_.stop(),r.O_.length>0&&(_e("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const d=Date.now()+i,g=new Dg(e,n,d,o,c);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mg(r,e){if(yr("AsyncQueue",`${e}: ${r}`),hc(r))return new pe(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Te.comparator(n.key,i.key):(n,i)=>Te.comparator(n.key,i.key),this.keyedMap=Vl(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new mo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(){this.W_=new ht(Te.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,i)=>{e.push(i)})),e}}class bo{constructor(e,n,i,o,c,d,g,p,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new bo(e,n,mo.emptySet(n),d,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class KC{constructor(){this.queries=M_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const o=Ie(n),c=o.queries;o.queries=M_(),c.forEach(((d,g)=>{for(const p of g.j_)p.onError(i)}))})(this,new pe(ie.ABORTED,"Firestore shutting down"))}}function M_(){return new Ro((r=>Nb(r)),Uh)}async function aw(r,e){const n=Ie(r);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.H_()&&e.J_()&&(i=2):(c=new $C,i=e.J_()?0:1);try{switch(i){case 0:c.z_=await n.onListen(o,!0);break;case 1:c.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=Mg(d,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.j_.push(e),e.Z_(n.onlineState),c.z_&&e.X_(c.z_)&&Og(n)}async function ow(r,e){const n=Ie(r),i=e.query;let o=3;const c=n.queries.get(i);if(c){const d=c.j_.indexOf(e);d>=0&&(c.j_.splice(d,1),c.j_.length===0?o=e.J_()?0:1:!c.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function YC(r,e){const n=Ie(r);let i=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const g of d.j_)g.X_(o)&&(i=!0);d.z_=o}}i&&Og(n)}function QC(r,e,n){const i=Ie(r),o=i.queries.get(e);if(o)for(const c of o.j_)c.onError(n);i.queries.delete(e)}function Og(r){r.Y_.forEach((e=>{e.next()}))}var Gm,O_;(O_=Gm||(Gm={})).ea="default",O_.Cache="cache";class lw{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new bo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.key=e}}class uw{constructor(e){this.key=e}}class XC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=Rb(e),this.Ra=new mo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new D_,o=n?n.Ra:this.Ra;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const A=o.get(_),D=Ph(this.query,w)?w:null,V=!!A&&this.mutatedKeys.has(A.key),F=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let z=!1;A&&D?A.data.isEqual(D.data)?V!==F&&(i.track({type:3,doc:D}),z=!0):this.ga(A,D)||(i.track({type:2,doc:D}),z=!0,(p&&this.Aa(D,p)>0||y&&this.Aa(D,y)<0)&&(g=!0)):!A&&D?(i.track({type:0,doc:D}),z=!0):A&&!D&&(i.track({type:1,doc:A}),z=!0,(p||y)&&(g=!0)),z&&(D?(d=d.add(D),c=F?c.add(_):c.delete(_)):(d=d.delete(_),c=c.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),c=c.delete(_.key),i.track({type:1,doc:_})}return{Ra:d,fa:i,ns:g,mutatedKeys:c}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const d=e.fa.G_();d.sort(((_,w)=>(function(D,V){const F=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return F(D)-F(V)})(_.type,w.type)||this.Aa(_.doc,w.doc))),this.pa(i),o=o!=null&&o;const g=n&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,y=p!==this.Ea;return this.Ea=p,d.length!==0||y?{snapshot:new bo(this.query,e.Ra,c,d,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:g}:{wa:g}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new D_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const n=[];return e.forEach((i=>{this.da.has(i)||n.push(new uw(i))})),this.da.forEach((i=>{e.has(i)||n.push(new cw(i))})),n}ba(e){this.Ta=e.Ts,this.da=Be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return bo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class WC{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class JC{constructor(e){this.key=e,this.va=!1}}class ZC{constructor(e,n,i,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ca={},this.Fa=new Ro((g=>Nb(g)),Uh),this.Ma=new Map,this.xa=new Set,this.Oa=new ht(Te.comparator),this.Na=new Map,this.La=new Sg,this.Ba={},this.ka=new Map,this.qa=xo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ej(r,e,n=!0){const i=pw(r);let o;const c=i.Fa.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Da()):o=await hw(i,e,n,!0),o}async function tj(r,e){const n=pw(r);await hw(n,e,!0,!1)}async function hw(r,e,n,i){const o=await EC(r.localStore,Ss(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let g;return i&&(g=await nj(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&ew(r.remoteStore,o),g}async function nj(r,e,n,i,o){r.Ka=(w,A,D)=>(async function(F,z,Y,te){let J=z.view.ma(Y);J.ns&&(J=await R_(F.localStore,z.query,!1).then((({documents:I})=>z.view.ma(I,J))));const se=te&&te.targetChanges.get(z.targetId),oe=te&&te.targetMismatches.get(z.targetId)!=null,ce=z.view.applyChanges(J,F.isPrimaryClient,se,oe);return L_(F,z.targetId,ce.wa),ce.snapshot})(r,w,A,D);const c=await R_(r.localStore,e,!0),d=new XC(e,c.Ts),g=d.ma(c.documents),p=fc.createSynthesizedTargetChangeForCurrentChange(n,i&&r.onlineState!=="Offline",o),y=d.applyChanges(g,r.isPrimaryClient,p);L_(r,n,y.wa);const _=new WC(e,n,d);return r.Fa.set(e,_),r.Ma.has(n)?r.Ma.get(n).push(e):r.Ma.set(n,[e]),y.snapshot}async function sj(r,e,n){const i=Ie(r),o=i.Fa.get(e),c=i.Ma.get(o.targetId);if(c.length>1)return i.Ma.set(o.targetId,c.filter((d=>!Uh(d,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Hm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Rg(i.remoteStore,o.targetId),$m(i,o.targetId)})).catch(uc)):($m(i,o.targetId),await Hm(i.localStore,o.targetId,!0))}async function rj(r,e){const n=Ie(r),i=n.Fa.get(e),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Rg(n.remoteStore,i.targetId))}async function ij(r,e,n){const i=dj(r);try{const o=await(function(d,g){const p=Ie(d),y=jt.now(),_=g.reduce(((D,V)=>D.add(V.key)),Be());let w,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let V=vr(),F=Be();return p.cs.getEntries(D,_).next((z=>{V=z,V.forEach(((Y,te)=>{te.isValidDocument()||(F=F.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(D,V))).next((z=>{w=z;const Y=[];for(const te of g){const J=NR(te,w.get(te.key).overlayedDocument);J!=null&&Y.push(new fa(te.key,J,_b(J.value.mapValue),As.exists(!0)))}return p.mutationQueue.addMutationBatch(D,y,Y,g)})).next((z=>{A=z;const Y=z.applyToLocalDocumentSet(w,F);return p.documentOverlayCache.saveOverlays(D,z.batchId,Y)}))})).then((()=>({batchId:A.batchId,changes:jb(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,g,p){let y=d.Ba[d.currentUser.toKey()];y||(y=new ht(Qe)),y=y.insert(g,p),d.Ba[d.currentUser.toKey()]=y})(i,o.batchId,n),await gc(i,o.changes),await Gh(i.remoteStore)}catch(o){const c=Mg(o,"Failed to persist write");n.reject(c)}}async function dw(r,e){const n=Ie(r);try{const i=await xC(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Na.get(c);d&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.va=!0:o.modifiedDocuments.size>0?et(d.va):o.removedDocuments.size>0&&(et(d.va),d.va=!1))})),await gc(n,i,e)}catch(i){await uc(i)}}function k_(r,e,n){const i=Ie(r);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach(((c,d)=>{const g=d.view.Z_(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const p=Ie(d);p.onlineState=g;let y=!1;p.queries.forEach(((_,w)=>{for(const A of w.j_)A.Z_(g)&&(y=!0)})),y&&Og(p)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function aj(r,e,n){const i=Ie(r);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Na.get(e),c=o&&o.key;if(c){let d=new ht(Te.comparator);d=d.insert(c,on.newNoDocument(c,je.min()));const g=Be().add(c),p=new qh(je.min(),new Map,new ht(Qe),d,g);await dw(i,p),i.Oa=i.Oa.remove(c),i.Na.delete(e),kg(i)}else await Hm(i.localStore,e,!1).then((()=>$m(i,e,n))).catch(uc)}async function oj(r,e){const n=Ie(r),i=e.batch.batchId;try{const o=await _C(n.localStore,e);mw(n,i,null),fw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await gc(n,o)}catch(o){await uc(o)}}async function lj(r,e,n){const i=Ie(r);try{const o=await(function(d,g){const p=Ie(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,g).next((w=>(et(w!==null),_=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);mw(i,e,n),fw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await gc(i,o)}catch(o){await uc(o)}}function fw(r,e){(r.ka.get(e)||[]).forEach((n=>{n.resolve()})),r.ka.delete(e)}function mw(r,e,n){const i=Ie(r);let o=i.Ba[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function $m(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Ma.get(e))r.Fa.delete(i),n&&r.Ca.$a(i,n);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((i=>{r.La.containsKey(i)||gw(r,i)}))}function gw(r,e){r.xa.delete(e.path.canonicalString());const n=r.Oa.get(e);n!==null&&(Rg(r.remoteStore,n),r.Oa=r.Oa.remove(e),r.Na.delete(n),kg(r))}function L_(r,e,n){for(const i of n)i instanceof cw?(r.La.addReference(i.key,e),cj(r,i)):i instanceof uw?(_e("SyncEngine","Document no longer in limbo: "+i.key),r.La.removeReference(i.key,e),r.La.containsKey(i.key)||gw(r,i.key)):Re()}function cj(r,e){const n=e.key,i=n.path.canonicalString();r.Oa.get(n)||r.xa.has(i)||(_e("SyncEngine","New document in limbo: "+n),r.xa.add(i),kg(r))}function kg(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const n=new Te(lt.fromString(e)),i=r.qa.next();r.Na.set(i,new JC(n)),r.Oa=r.Oa.insert(n,i),ew(r.remoteStore,new gi(Ss(xg(n.path)),i,"TargetPurposeLimboResolution",mg.oe))}}async function gc(r,e,n){const i=Ie(r),o=[],c=[],d=[];i.Fa.isEmpty()||(i.Fa.forEach(((g,p)=>{d.push(i.Ka(p,e,n).then((y=>{var _;if((y||n)&&i.isPrimaryClient){const w=y?!y.fromCache:(_=n==null?void 0:n.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Ng.Wi(p.targetId,y);c.push(w)}})))})),await Promise.all(d),i.Ca.d_(o),await(async function(p,y){const _=Ie(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ae.forEach(y,(A=>ae.forEach(A.$i,(D=>_.persistence.referenceDelegate.addReference(w,A.targetId,D))).next((()=>ae.forEach(A.Ui,(D=>_.persistence.referenceDelegate.removeReference(w,A.targetId,D)))))))))}catch(w){if(!hc(w))throw w;_e("LocalStore","Failed to update sequence numbers: "+w)}for(const w of y){const A=w.targetId;if(!w.fromCache){const D=_.os.get(A),V=D.snapshotVersion,F=D.withLastLimboFreeSnapshotVersion(V);_.os=_.os.insert(A,F)}}})(i.localStore,c))}async function uj(r,e){const n=Ie(r);if(!n.currentUser.isEqual(e)){_e("SyncEngine","User change. New user:",e.toKey());const i=await Xb(n.localStore,e);n.currentUser=e,(function(c,d){c.ka.forEach((g=>{g.forEach((p=>{p.reject(new pe(ie.CANCELLED,d))}))})),c.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await gc(n,i.hs)}}function hj(r,e){const n=Ie(r),i=n.Na.get(e);if(i&&i.va)return Be().add(i.key);{let o=Be();const c=n.Ma.get(e);if(!c)return o;for(const d of c){const g=n.Fa.get(d);o=o.unionWith(g.view.Va)}return o}}function pw(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=dw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aj.bind(null,e),e.Ca.d_=YC.bind(null,e.eventManager),e.Ca.$a=QC.bind(null,e.eventManager),e}function dj(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lj.bind(null,e),e}class Ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return vC(this.persistence,new pC,e.initialUser,this.serializer)}Ga(e){return new fC(Ag.Zr,this.serializer)}Wa(e){return new SC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ah.provider={build:()=>new Ah};class Km{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>k_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uj.bind(null,this.syncEngine),await GC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KC})()}createDatastore(e){const n=Fh(e.databaseInfo.databaseId),i=(function(c){return new CC(c)})(e.databaseInfo);return(function(c,d,g,p){return new DC(c,d,g,p)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,c,d,g){return new OC(i,o,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>k_(this.syncEngine,n,0)),(function(){return j_.D()?new j_:new AC})())}createSyncEngine(e,n){return(function(o,c,d,g,p,y,_){const w=new ZC(o,c,d,g,p,y);return _&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Ie(o);_e("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await mc(c),c.k_.shutdown(),c.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Km.provider={build:()=>new Km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=pb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{_e("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(_e("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Mg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function wm(r,e){r.asyncQueue.verifyOperationInProgress(),_e("FirestoreClient","Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let i=n.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Xb(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function V_(r,e){r.asyncQueue.verifyOperationInProgress();const n=await mj(r);_e("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((i=>I_(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>I_(e.remoteStore,o))),r._onlineComponents=e}async function mj(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){_e("FirestoreClient","Using user provided OfflineComponentProvider");try{await wm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await wm(r,new Ah)}}else _e("FirestoreClient","Using default OfflineComponentProvider"),await wm(r,new Ah);return r._offlineComponents}async function vw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(_e("FirestoreClient","Using user provided OnlineComponentProvider"),await V_(r,r._uninitializedComponentsProvider._online)):(_e("FirestoreClient","Using default OnlineComponentProvider"),await V_(r,new Km))),r._onlineComponents}function gj(r){return vw(r).then((e=>e.syncEngine))}async function _w(r){const e=await vw(r),n=e.eventManager;return n.onListen=ej.bind(null,e.syncEngine),n.onUnlisten=sj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rj.bind(null,e.syncEngine),n}function pj(r,e,n={}){const i=new hr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const _=new yw({next:A=>{_.Za(),d.enqueueAndForget((()=>ow(c,w)));const D=A.docs.has(g);!D&&A.fromCache?y.reject(new pe(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&A.fromCache&&p&&p.source==="server"?y.reject(new pe(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new lw(xg(g.path),_,{includeMetadataChanges:!0,_a:!0});return aw(c,w)})(await _w(r),r.asyncQueue,e,n,i))),i.promise}function yj(r,e,n={}){const i=new hr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const _=new yw({next:A=>{_.Za(),d.enqueueAndForget((()=>ow(c,w))),A.fromCache&&p.source==="server"?y.reject(new pe(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new lw(g,_,{includeMetadataChanges:!0,_a:!0});return aw(c,w)})(await _w(r),r.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(r,e,n){if(!n)throw new pe(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function vj(r,e,n,i){if(e===!0&&i===!0)throw new pe(ie.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function P_(r){if(!Te.isDocumentKey(r))throw new pe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function z_(r){if(Te.isDocumentKey(r))throw new pe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $h(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Re()}function Ei(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new pe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$h(r);throw new pe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function _j(r,e){if(e<=0)throw new pe(ie.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kh{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B_(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new k2;switch(i.type){case"firstParty":return new P2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=U_.get(n);i&&(_e("ComponentProvider","Removing Datastore"),U_.delete(n),i.terminate())})(this),Promise.resolve()}}function xj(r,e,n,i={}){var o;const c=(r=Ei(r,Kh))._getSettings(),d=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),i.mockUserToken){let g,p;if(typeof i.mockUserToken=="string")g=i.mockUserToken,p=an.MOCK_USER;else{g=Tx(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new pe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new an(y)}r._authCredentials=new L2(new gb(g,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Sn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class vi extends Si{constructor(e,n,i){super(e,n,xg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Te(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function yn(r,e,...n){if(r=pn(r),bw("collection","path",e),r instanceof Kh){const i=lt.fromString(e,...n);return z_(i),new vi(r,null,i)}{if(!(r instanceof Sn||r instanceof vi))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(lt.fromString(e,...n));return z_(i),new vi(r.firestore,null,i)}}function Yh(r,e,...n){if(r=pn(r),arguments.length===1&&(e=pb.newId()),bw("doc","path",e),r instanceof Kh){const i=lt.fromString(e,...n);return P_(i),new Sn(r,null,new Te(i))}{if(!(r instanceof Sn||r instanceof vi))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(lt.fromString(e,...n));return P_(i),new Sn(r.firestore,r instanceof vi?r.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Jb(this,"async_queue_retry"),this.Vu=()=>{const i=bm();i&&_e("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=bm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new hr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!hc(e))throw e;_e("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),g})(i);throw yr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=Dg.createAndSchedule(this,e,n,i,(c=>this.yu(c)));return this.Tu.push(o),o}fu(){this.Eu&&Re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class pc extends Kh{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new q_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q_(e),this._firestoreClient=void 0,await e}}}function bj(r,e){const n=typeof r=="object"?r:ng(),i=typeof r=="string"?r:"(default)",o=Oh(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=bx("firestore");c&&xj(o,...c)}return o}function Lg(r){if(r._terminated)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||wj(r),r._firestoreClient}function wj(r){var e,n,i;const o=r._freezeSettings(),c=(function(g,p,y,_){return new J2(g,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,xw(_.experimentalLongPollingOptions),_.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new fj(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wo(Zt.fromBase64String(e))}catch(n){throw new pe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wo(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=/^__.*__$/;class Tj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,n,this.fieldTransforms):new dc(e,this.data,n,this.fieldTransforms)}}function ww(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Bg{constructor(e,n,i,o,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ww(this.Cu)&&Ej.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Sj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Fh(e)}Qu(e,n,i,o=!1){return new Bg({Cu:e,methodName:n,qu:i,path:Wt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qg(r){const e=r._freezeSettings(),n=Fh(r._databaseId);return new Sj(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Ew(r,e,n,i,o,c={}){const d=r.Qu(c.merge||c.mergeFields?2:0,e,n,o);Aw("Data must be an object, but it was:",d,i);const g=Tw(i,d);let p,y;if(c.merge)p=new rs(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const _=[];for(const w of c.mergeFields){const A=Nj(e,w,n);if(!d.contains(A))throw new pe(ie.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Cj(_,A)||_.push(A)}p=new rs(_),y=d.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=d.fieldTransforms;return new Tj(new Xn(g),p,y)}class Fg extends Ug{_toFieldTransform(e){return new ER(e.path,new Zl)}isEqual(e){return e instanceof Fg}}function Aj(r,e,n,i=!1){return Hg(n,r.Qu(i?4:3,e))}function Hg(r,e){if(Sw(r=pn(r)))return Aw("Unsupported field value:",e,r),Tw(r,e);if(r instanceof Ug)return(function(i,o){if(!ww(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const c=[];let d=0;for(const g of i){let p=Hg(g,o.Lu(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(r,e)}return(function(i,o){if((i=pn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xR(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=jt.fromDate(i);return{timestampValue:Th(o.serializer,c)}}if(i instanceof jt){const c=new jt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Th(o.serializer,c)}}if(i instanceof Pg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof wo)return{bytesValue:Fb(o.serializer,i._byteString)};if(i instanceof Sn){const c=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw o.Bu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Tg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof zg)return(function(d,g){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw g.Bu("VectorValues must only contain numeric values.");return bg(g.serializer,p)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${$h(i)}`)})(r,e)}function Tw(r,e){const n={};return yb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(r,((i,o)=>{const c=Hg(o,e.Mu(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function Sw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof jt||r instanceof Pg||r instanceof wo||r instanceof Sn||r instanceof Ug||r instanceof zg)}function Aw(r,e,n){if(!Sw(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const i=$h(n);throw i==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+i)}}function Nj(r,e,n){if((e=pn(e))instanceof Vg)return e._internalPath;if(typeof e=="string")return Nw(r,e);throw Nh("Field path arguments must be of type string or ",r,!1,void 0,n)}const Rj=new RegExp("[~\\*/\\[\\]]");function Nw(r,e,n){if(e.search(Rj)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Vg(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Nh(r,e,n,i,o){const c=i&&!i.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${i}`),d&&(p+=` in document ${o}`),p+=")"),new pe(ie.INVALID_ARGUMENT,g+r+p)}function Cj(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Qh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jj extends Rw{data(){return super.data()}}function Qh(r,e){return typeof e=="string"?Nw(r,e):e instanceof Vg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gg{}class $g extends Gg{}function ls(r,e,...n){let i=[];e instanceof Gg&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((p=>p instanceof Kg)).length,g=c.filter((p=>p instanceof Xh)).length;if(d>1||d>0&&g>0)throw new pe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Xh extends $g{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Xh(e,n,i)}_apply(e){const n=this._parse(e);return jw(e._query,n),new Si(e.firestore,e.converter,Pm(e._query,n))}_parse(e){const n=qg(e.firestore);return(function(c,d,g,p,y,_,w){let A;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){H_(w,_);const D=[];for(const V of w)D.push(F_(p,c,V));A={arrayValue:{values:D}}}else A=F_(p,c,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||H_(w,_),A=Aj(g,d,w,_==="in"||_==="not-in");return Nt.create(y,_,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wh(r,e,n){const i=e,o=Qh("where",r);return Xh._create(o,i,n)}class Kg extends Gg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:os.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const g=c.getFlattenedFilters();for(const p of g)jw(d,p),d=Pm(d,p)})(e._query,n),new Si(e.firestore,e.converter,Pm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yg extends $g{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yg(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jl(c,d)})(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new No(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Ms(r,e="asc"){const n=e,i=Qh("orderBy",r);return Yg._create(i,n)}class Qg extends $g{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Qg(e,n,i)}_apply(e){return new Si(e.firestore,e.converter,wh(e._query,this._limit,this._limitType))}}function Cw(r){return _j("limit",r),Qg._create("limit",r,"F")}function F_(r,e,n){if(typeof(n=pn(n))=="string"){if(n==="")throw new pe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ab(e)&&n.indexOf("/")!==-1)throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(lt.fromString(n));if(!Te.isDocumentKey(i))throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return h_(r,new Te(i))}if(n instanceof Sn)return h_(r,n._key);throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$h(n)}.`)}function H_(r,e){if(!Array.isArray(r)||r.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jw(r,e){const n=(function(o,c){for(const d of o)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Dj{convertValue(e,n="none"){switch(ua(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ao(e,((o,c)=>{i[o]=this.convertValue(c,n)})),i}convertVectorValue(e){var n,i,o;const c=(o=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>xt(d.doubleValue)));return new zg(c)}convertGeoPoint(e){return new Pg(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=pg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const n=bi(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=lt.fromString(e);et(Qb(i));const o=new Xl(i.get(1),i.get(3)),c=new Te(i.popFirst(5));return o.isEqual(n)||yr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(r,e,n){let i;return i=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dw extends Rw{constructor(e,n,i,o,c,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Qh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class ch extends Dw{data(e={}){return super.data(e)}}class Mj{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Pl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new ch(this._firestore,this._userDataWriter,i.key,i,new Pl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const p=new ch(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Pl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new ch(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Pl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),_=d.indexOf(g.doc.key)),{type:Oj(g.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Oj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(r){r=Ei(r,Sn);const e=Ei(r.firestore,pc);return pj(Lg(e),r._key).then((n=>Lj(e,r,n)))}class Ow extends Dj{constructor(e){super(),this.firestore=e}convertBytes(e){return new wo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}}function kn(r){r=Ei(r,Si);const e=Ei(r.firestore,pc),n=Lg(e),i=new Ow(e);return Ij(r._query),yj(n,r._query).then((o=>new Mj(e,i,r,o)))}function kj(r,e,n){r=Ei(r,Sn);const i=Ei(r.firestore,pc),o=Iw(r.converter,e,n);return Lw(i,[Ew(qg(i),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,As.none())])}function kw(r,e){const n=Ei(r.firestore,pc),i=Yh(r),o=Iw(r.converter,e);return Lw(n,[Ew(qg(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,As.exists(!1))]).then((()=>i))}function Lw(r,e){return(function(i,o){const c=new hr;return i.asyncQueue.enqueueAndForget((async()=>ij(await gj(i),o,c))),c.promise})(Lg(r),e)}function Lj(r,e,n){const i=n.docs.get(e._key),o=new Ow(r);return new Dw(r,o,e._key,i,new Pl(n.hasPendingWrites,n.fromCache),e.converter)}function Vw(){return new Fg("serverTimestamp")}(function(e,n=!0){(function(o){So=o})(da),aa(new _i("firestore",((i,{instanceIdentifier:o,options:c})=>{const d=i.getProvider("app").getImmediate(),g=new pc(new V2(i.getProvider("auth-internal")),new B2(i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new pe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(y.options.projectId,_)})(d,o),d);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),ws(a_,"4.7.3",e),ws(a_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="firebasestorage.googleapis.com",Vj="storageBucket",Uj=120*1e3,Pj=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Ds{constructor(e,n,i=0){super(Em(e),`Firebase Storage: ${n} (${Em(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Os.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Em(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Cs;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Cs||(Cs={}));function Em(r){return"storage/"+r}function zj(){const r="An unknown error occurred, please check the error payload for server response.";return new Os(Cs.UNKNOWN,r)}function Bj(){return new Os(Cs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qj(){return new Os(Cs.CANCELED,"User canceled the upload/download.")}function Fj(r){return new Os(Cs.INVALID_URL,"Invalid URL '"+r+"'.")}function Hj(r){return new Os(Cs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function G_(r){return new Os(Cs.INVALID_ARGUMENT,r)}function Pw(){return new Os(Cs.APP_DELETED,"The Firebase app was deleted.")}function Gj(r){return new Os(Cs.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=is.makeFromUrl(e,n)}catch{return new is(e,"")}if(i.path==="")return i;throw Hj(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function c(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const d="(/(.*))?$",g=new RegExp("^gs://"+o+d,"i"),p={bucket:1,path:3};function y(se){se.path_=decodeURIComponent(se.path)}const _="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",D=new RegExp(`^https?://${w}/${_}/b/${o}/o${A}`,"i"),V={bucket:1,path:3},F=n===Uw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,z="([^?#]*)",Y=new RegExp(`^https?://${F}/${o}/${z}`,"i"),J=[{regex:g,indices:p,postModify:c},{regex:D,indices:V,postModify:y},{regex:Y,indices:{bucket:1,path:2},postModify:y}];for(let se=0;se<J.length;se++){const oe=J[se],ce=oe.regex.exec(e);if(ce){const I=ce[oe.indices.bucket];let N=ce[oe.indices.path];N||(N=""),i=new is(I,N),oe.postModify(i);break}}if(i==null)throw Fj(e);return i}}class $j{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(r,e,n){let i=1,o=null,c=null,d=!1,g=0;function p(){return g===2}let y=!1;function _(...z){y||(y=!0,e.apply(null,z))}function w(z){o=setTimeout(()=>{o=null,r(D,p())},z)}function A(){c&&clearTimeout(c)}function D(z,...Y){if(y){A();return}if(z){A(),_.call(null,z,...Y);return}if(p()||d){A(),_.call(null,z,...Y);return}i<64&&(i*=2);let J;g===1?(g=2,J=0):J=(i+Math.random())*1e3,w(J)}let V=!1;function F(z){V||(V=!0,A(),!y&&(o!==null?(z||(g=2),clearTimeout(o),w(0)):z||(g=1)))}return w(0),c=setTimeout(()=>{d=!0,F(!0)},n),F}function Yj(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(r){return r!==void 0}function $_(r,e,n,i){if(i<e)throw G_(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>n)throw G_(`Invalid value for '${r}'. Expected ${n} or less.`)}function Xj(r){const e=encodeURIComponent;let n="?";for(const i in r)if(r.hasOwnProperty(i)){const o=e(i)+"="+e(r[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var Rh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Rh||(Rh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,n,i,o,c,d,g,p,y,_,w,A=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=g,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=_,this.connectionFactory_=w,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,V)=>{this.resolve_=D,this.reject_=V,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Ju(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=g=>{const p=g.loaded,y=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const g=c.getErrorCode()===Rh.NO_ERROR,p=c.getStatus();if(!g||Wj(p,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===Rh.ABORT;i(!1,new Ju(!1,null,_));return}const y=this.successCodes_.indexOf(p)!==-1;i(!0,new Ju(y,c))})},n=(i,o)=>{const c=this.resolve_,d=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(g,g.getResponse());Qj(p)?c(p):c()}catch(p){d(p)}else if(g!==null){const p=zj();p.serverResponse=g.getErrorText(),this.errorCallback_?d(this.errorCallback_(g,p)):d(p)}else if(o.canceled){const p=this.appDelete_?Pw():qj();d(p)}else{const p=Bj();d(p)}};this.canceled_?n(!1,new Ju(!1,null,!0)):this.backoffId_=Kj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Yj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ju{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function Zj(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function eI(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tI(r,e){e&&(r["X-Firebase-GMPID"]=e)}function nI(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function sI(r,e,n,i,o,c,d=!0){const g=Xj(r.urlParams),p=r.url+g,y=Object.assign({},r.headers);return tI(y,e),Zj(y,n),eI(y,c),nI(y,i),new Jj(p,r.method,y,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function iI(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this._service=e,n instanceof is?this._location=n:this._location=is.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ch(e,n)}get root(){const e=new is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iI(this._location.path)}get storage(){return this._service}get parent(){const e=rI(this._location.path);if(e===null)return null;const n=new is(this._location.bucket,e);return new Ch(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Gj(e)}}function K_(r,e){const n=e==null?void 0:e[Vj];return n==null?null:is.makeFromBucketSpec(n,r)}function aI(r,e,n,i={}){r.host=`${e}:${n}`,r._protocol="http";const{mockUserToken:o}=i;o&&(r._overrideAuthToken=typeof o=="string"?o:Tx(o,r.app.options.projectId))}class oI{constructor(e,n,i,o,c){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=c,this._bucket=null,this._host=Uw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Uj,this._maxUploadRetryTime=Pj,this._requests=new Set,o!=null?this._bucket=is.makeFromBucketSpec(o,this._host):this._bucket=K_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=is.makeFromBucketSpec(this._url,e):this._bucket=K_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ch(this,e)}_makeRequest(e,n,i,o,c=!0){if(this._deleted)return new $j(Pw());{const d=sI(e,this._appId,i,o,n,this._firebaseVersion,c);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const Y_="@firebase/storage",Q_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="storage";function lI(r=ng(),e){r=pn(r);const i=Oh(r,zw).getImmediate({identifier:e}),o=bx("storage");return o&&cI(i,...o),i}function cI(r,e,n,i={}){aI(r,e,n,i)}function uI(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new oI(n,i,o,e,da)}function hI(){aa(new _i(zw,uI,"PUBLIC").setMultipleInstances(!0)),ws(Y_,Q_,""),ws(Y_,Q_,"esm2017")}hI();let ci;try{window.FIREBASE_CONFIG?(ci=window.FIREBASE_CONFIG,console.log("Using window.FIREBASE_CONFIG")):window.parent&&window.parent!==window?(ci=window.parent.FIREBASE_CONFIG||window.parent.firebaseConfig,console.log("Using parent window config")):window.firebaseConfig&&(ci=window.firebaseConfig,console.log("Using window.firebaseConfig")),ci||(console.warn("No Firebase config found, using demo config"),ci={apiKey:"demo-api-key",authDomain:"demo-project.firebaseapp.com",projectId:"demo-project",storageBucket:"demo-project.appspot.com",messagingSenderId:"123456789",appId:"demo-app-id"})}catch(r){console.error("Error loading Firebase config:",r),ci={apiKey:"demo-api-key",authDomain:"demo-project.firebaseapp.com",projectId:"demo-project",storageBucket:"demo-project.appspot.com",messagingSenderId:"123456789",appId:"demo-app-id"}}const Xg=Nx(ci),_r=M2(Xg),Pt=bj(Xg);lI(Xg);console.log(" Firebase initialized with project:",ci.projectId);const Bw=()=>new Promise(r=>{const e=Jx(_r,n=>{e(),r(n)})}),qw=async()=>{const r=await Bw();if(!r)throw new Error("Authentication required");return r},dI=()=>{var r;return(r=_r.currentUser)==null?void 0:r.uid},zt={USERS:"soundwave_users",TRACKS:"soundwave_tracks",POSTS:"soundwave_posts",COMMENTS:"soundwave_comments",LABELS:"soundwave_labels",PLAYLISTS:"soundwave_playlists",MASTERCLASSES:"soundwave_masterclasses",TUTORIALS:"soundwave_tutorials",SAMPLE_PACKS:"soundwave_sample_packs",GLOBAL_EVENTS:"soundwave_global_events"},en=(r,e)=>{if(console.error(`Firestore ${e} error:`,r),r instanceof pe)switch(r.code){case"permission-denied":throw new Error("You do not have permission to perform this action");case"not-found":throw new Error("The requested item was not found");case"unavailable":throw new Error("Service temporarily unavailable. Please try again.");default:throw new Error(`${e} failed: ${r.message}`)}throw new Error(`${e} failed`)},Fw=async()=>{try{return(await kn(yn(Pt,zt.USERS))).docs.map(e=>({id:e.id,...e.data()}))}catch(r){return en(r,"Get users"),[]}},dr=async r=>{try{const e=await Mw(Yh(Pt,zt.USERS,r));return e.exists()?(console.log(" User retrieved from Firestore:",r),{id:e.id,...e.data()}):void 0}catch(e){console.error(" [getUserById] Error:",e);return}},Hw=async r=>{var n,i,o,c,d,g;console.log(" [createOrUpdateUser] Starting with data:",r);const e=r.id||dI();if(console.log(" [createOrUpdateUser] User ID:",e),!e){const p="No user ID available - user must be authenticated";throw console.error(" [createOrUpdateUser]",p),new Error(p)}if(!r.name||r.name.trim().length<2){const p=`Artist name is required (got: "${r.name}")`;throw console.error(" [createOrUpdateUser]",p),new Error(p)}if(!r.bio||r.bio.trim().length<10){const p=`Bio must be at least 10 characters (got: ${((n=r.bio)==null?void 0:n.length)||0} chars)`;throw console.error(" [createOrUpdateUser]",p),new Error(p)}if(!r.genre||r.genre.trim().length===0){const p="Genre is required";throw console.error(" [createOrUpdateUser]",p),new Error(p)}try{const p={id:e,name:r.name.trim(),bio:r.bio.trim(),genre:r.genre.trim(),location:((i=r.location)==null?void 0:i.trim())||"",avatarUrl:r.avatarUrl||"https://api.dicebear.com/7.x/avataaars/svg?seed="+e,spotifyUrl:((o=r.spotifyUrl)==null?void 0:o.trim())||"",soundcloudUrl:((c=r.soundcloudUrl)==null?void 0:c.trim())||"",instagramUrl:((d=r.instagramUrl)==null?void 0:d.trim())||"",twitterUrl:((g=r.twitterUrl)==null?void 0:g.trim())||"",followers:r.followers||0,following:r.following||0,isVerified:r.isVerified||!1,updatedAt:new Date().toISOString()};console.log(" [createOrUpdateUser] Checking if user exists..."),await dr(e)?console.log(" [createOrUpdateUser] Updating existing user"):(console.log(" [createOrUpdateUser] Creating new user"),p.createdAt=new Date().toISOString()),console.log(" [createOrUpdateUser] Writing to Firestore..."),await kj(Yh(Pt,zt.USERS,e),p,{merge:!0}),console.log(" [createOrUpdateUser] Write successful"),await new Promise(w=>setTimeout(w,500)),console.log(" [createOrUpdateUser] Verifying save...");const _=await dr(e);if(!_)throw new Error("Profile was saved but could not be retrieved. Please refresh the page.");return console.log(" [createOrUpdateUser] Success! Profile ready:",_.name),_}catch(p){throw console.error(" [createOrUpdateUser] Failed:",p),p.code==="permission-denied"?new Error("Permission denied. Please make sure Firebase rules are deployed."):p.code==="unavailable"?new Error("Cannot connect to database. Please check your internet connection."):new Error(`Failed to save profile: ${p.message}`)}},Jh=async()=>{try{const r=ls(yn(Pt,zt.TRACKS),Ms("createdAt","desc"));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return en(r,"Get tracks"),[]}},fI=async r=>{try{const e=ls(yn(Pt,zt.TRACKS),Wh("artistId","==",r),Ms("createdAt","desc"));return(await kn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return en(e,"Get tracks by artist"),[]}},Gw=async()=>{try{const r=ls(yn(Pt,zt.POSTS),Ms("createdAt","desc"),Cw(50));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return en(r,"Get posts"),[]}},mI=async r=>{try{const e=await qw(),n={...r,authorId:e.uid,createdAt:Vw(),likes:0,replyCount:0,replies:[]};return{id:(await kw(yn(Pt,zt.POSTS),n)).id,...r,authorId:e.uid,createdAt:new Date().toISOString(),likes:0,replyCount:0,replies:[]}}catch(e){throw en(e,"Create post"),e}},$w=mI,Ai=async(r,e,n)=>{try{const i=await qw(),o=await dr(i.uid);if(!o)throw new Error("User profile not found");const c={authorId:i.uid,authorName:o.name,authorAvatarUrl:o.avatarUrl||"",content:n,createdAt:new Date().toISOString()};return{id:(await kw(yn(Pt,zt.COMMENTS),{...c,parentType:r,parentId:e,createdAt:Vw()})).id,...c}}catch(i){throw en(i,"Add comment"),i}},gI=async()=>{try{return(await kn(yn(Pt,zt.LABELS))).docs.map(e=>({id:e.id,...e.data()}))}catch(r){return en(r,"Get labels"),[]}},pI=async r=>{try{const e=await Mw(Yh(Pt,zt.LABELS,r));return e.exists()?{id:e.id,...e.data()}:void 0}catch(e){en(e,"Get label");return}},yI=async r=>{try{const e=ls(yn(Pt,zt.TRACKS),Wh("labelId","==",r),Ms("createdAt","desc"));return(await kn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return en(e,"Get tracks by label"),[]}},vI=async r=>{try{const e=ls(yn(Pt,zt.USERS),Wh("labelId","==",r));return(await kn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return en(e,"Get artists by label"),[]}},_I=async r=>{try{const e=ls(yn(Pt,zt.POSTS),Wh("labelId","==",r),Ms("createdAt","desc"));return(await kn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return en(e,"Get posts by label"),[]}},xI=async r=>{try{return[]}catch(e){return en(e,"Get events by label"),[]}},yc=async(r,e)=>Ai("track",r,e.content),bI=async(r,e)=>Ai("label",r,e.content),wI=async(r,e)=>Ai("post",r,e.content),EI=async(r,e)=>Ai("masterclass",r,e.content),TI=async(r,e)=>Ai("post",r,e.content),SI=async(r,e)=>Ai("post",r,e.content),AI=async(r,e)=>Ai("post",r,e.content),NI=async(r,e)=>Ai("post",r,e.content),RI=async()=>(console.log("getLiveRooms: Not yet implemented"),[]),CI=async r=>(console.log("getConversations: Not yet implemented for user",r),[]),Kw=async()=>(console.log("getSampleChatMessages: Not yet implemented"),[]),jI=async r=>(console.log("getExternalReleasesByArtist: Not yet implemented"),[]),II=async r=>(console.log("getPremiumPacksByArtist: Not yet implemented"),[]),DI=async()=>{try{const r=ls(yn(Pt,zt.GLOBAL_EVENTS),Ms("createdAt","desc"),Cw(20));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return en(r,"Get global events"),[]}},MI=async()=>{try{const r=ls(yn(Pt,zt.MASTERCLASSES),Ms("createdAt","desc"));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return en(r,"Get masterclasses"),[]}},OI=async()=>{try{const r=ls(yn(Pt,zt.TUTORIALS),Ms("createdAt","desc"));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return en(r,"Get tutorials"),[]}},kI=async()=>{try{const r=ls(yn(Pt,zt.SAMPLE_PACKS),Ms("createdAt","desc"));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return en(r,"Get sample packs"),[]}},LI=async()=>{try{const r=ls(yn(Pt,zt.PLAYLISTS),Ms("createdAt","desc"));return(await kn(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return en(r,"Get playlists"),[]}},VI=({currentUser:r})=>{var d;Ih();const[e,n]=T.useState(!1),i=T.useRef(null);T.useEffect(()=>{const g=p=>{i.current&&!i.current.contains(p.target)&&n(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const o=async()=>{try{await wN(_r),window.location.href="/Sites/soundwave/index.html"}catch(g){console.error("Error signing out:",g)}},c={color:"white",backgroundColor:"#282828"};return u.jsx("header",{className:"bg-gray-800 sticky top-0 z-40 shadow-md",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsxs("div",{className:"flex items-center space-x-8",children:[u.jsxs(Ut,{to:"/",className:"flex items-center space-x-2 text-white",children:[u.jsx(fe,{name:"logo",className:"h-8 w-8 text-brand-accent"}),u.jsx("span",{className:"font-bold text-xl",children:"SoundWave"})]}),u.jsxs("nav",{className:"hidden md:flex space-x-2",children:[u.jsx(Yn,{to:"/",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Home"}),u.jsx(Yn,{to:"/library",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Library"}),u.jsx(Yn,{to:"/playlists",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Playlists"}),u.jsx(Yn,{to:"/labels",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Labels"}),u.jsx(Yn,{to:"/artist-hub",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Artist Hub"}),u.jsx(Yn,{to:"/live-streams",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Live"}),u.jsx(Yn,{to:"/community",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Community"}),u.jsx(Yn,{to:"/tutorials",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Tutorials"}),u.jsx(Yn,{to:"/masterclass",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Masterclass"}),u.jsx(Yn,{to:"/samples",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Samples"}),u.jsx(Yn,{to:"/upload",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:g})=>g?c:{},children:"Upload"})]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Search for tracks or artists...",className:"bg-gray-700 text-white placeholder-gray-400 border border-transparent focus:ring-2 focus:ring-brand-accent focus:border-transparent rounded-full py-2 px-4 w-64 transition-all"}),u.jsx(fe,{name:"search",className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]}),u.jsxs(Ut,{to:"/inbox",className:"relative text-gray-400 hover:text-white transition-colors",children:[u.jsx(fe,{name:"mail",className:"h-6 w-6"}),u.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:"3"})]}),u.jsxs("div",{className:"relative",ref:i,children:[u.jsxs("button",{onClick:()=>n(!e),className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[u.jsx("img",{className:"h-8 w-8 rounded-full object-cover border-2 border-transparent hover:border-brand-accent transition-colors",src:(r==null?void 0:r.avatarUrl)||"https://picsum.photos/id/1015/100/100",alt:`${(r==null?void 0:r.name)||"User"} Avatar`}),u.jsx("span",{className:"text-white font-medium hidden sm:block",children:(r==null?void 0:r.name)||"Guest"}),u.jsx(fe,{name:"chevron-down",className:`w-4 h-4 text-gray-400 transition-transform hidden sm:block ${e?"rotate-180":""}`})]}),e&&u.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-gray-800 rounded-lg shadow-xl border border-gray-700 py-2 z-50 animate-fadeIn",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-gray-700",children:[u.jsx("p",{className:"text-sm font-medium text-white",children:(r==null?void 0:r.name)||"Guest"}),u.jsx("p",{className:"text-xs text-gray-400 truncate",children:((d=_r.currentUser)==null?void 0:d.email)||""})]}),r&&u.jsxs(u.Fragment,{children:[u.jsxs(Ut,{to:`/profile/${r.id}`,onClick:()=>n(!1),className:"flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",children:[u.jsx(fe,{name:"user",className:"w-4 h-4 mr-3"}),"View Profile"]}),u.jsxs(Ut,{to:"/settings/profile",onClick:()=>n(!1),className:"flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",children:[u.jsx(fe,{name:"settings",className:"w-4 h-4 mr-3"}),"Edit Profile"]}),u.jsx("div",{className:"border-t border-gray-700 my-2"})]}),u.jsxs("button",{onClick:o,className:"flex items-center w-full px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300 transition-colors",children:[u.jsx(fe,{name:"logout",className:"w-4 h-4 mr-3"}),"Sign Out"]})]})]})]})]})})})},UI=()=>u.jsx("footer",{className:"bg-gray-800 border-t border-gray-700 mt-auto",children:u.jsx("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:u.jsxs("p",{className:"text-center text-sm text-gray-400",children:[" ",new Date().getFullYear()," SoundWave. All rights reserved. A crowd-sourced artist platform."]})})}),PI=()=>{const[r,e]=T.useState(null),[n,i]=T.useState(!1),[o,c]=T.useState(null),[d,g]=T.useState(!1),p=T.useCallback(w=>{(r==null?void 0:r.id)===w.id?i(A=>!A):(e(w),i(!0)),g(!1)},[r]),y=T.useCallback(w=>{(r==null?void 0:r.id)===w.id&&d?i(A=>!A):(e(w),i(!0),g(!0))},[r,d]),_=T.useCallback(()=>{r&&i(w=>(w&&g(!1),!w))},[r]);return{currentTrack:r,isPlaying:n,playTrack:p,togglePlayPause:_,onTrackEnd:o,setOnTrackEnd:c,isPreviewing:d,playPreview:y}},jo=T.createContext(null),zI=({children:r})=>{const e=PI();return u.jsx(jo.Provider,{value:e,children:r})},BI=()=>{const r=T.useContext(jo),e=T.useRef(null),[n,i]=T.useState(0),o=T.useRef(null);if(!r)return null;const{currentTrack:c,isPlaying:d,togglePlayPause:g,onTrackEnd:p,isPreviewing:y}=r;T.useEffect(()=>{const w=e.current;if(w)if(d){const A=w.play();A!==void 0&&A.catch(D=>{D.name!=="AbortError"&&console.error("Audio play failed:",D)})}else w.pause()},[d,c]),T.useEffect(()=>(o.current&&(clearTimeout(o.current),o.current=null),d&&y&&(o.current=window.setTimeout(()=>{d&&y&&g()},3e4)),()=>{o.current&&clearTimeout(o.current)}),[c,d,y,g]),T.useEffect(()=>{const w=e.current;if(!w)return;i(0);const A=()=>{w.duration&&isFinite(w.duration)&&i(w.currentTime/w.duration*100)},D=()=>{p?p():g()};return w.addEventListener("timeupdate",A),w.addEventListener("ended",D),()=>{w.removeEventListener("timeupdate",A),w.removeEventListener("ended",D)}},[c,g,p]);const _=w=>{const A=e.current;if(!A||!isFinite(A.duration))return;const D=Number(w.target.value),V=D/100*A.duration;isFinite(V)&&(A.currentTime=V,i(D))};return c?u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 h-24 z-50 flex items-center px-4 sm:px-6 lg:px-8",children:[u.jsx("audio",{ref:e,src:c.audioSrc}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:c.coverArtUrl,alt:c.title,className:"w-16 h-16 rounded-md object-cover"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h4",{className:"font-semibold text-white",children:c.title}),y&&u.jsx("span",{className:"text-xs font-bold bg-yellow-500 text-gray-900 px-2 py-0.5 rounded-full",children:"PREVIEW"})]}),u.jsx("p",{className:"text-sm text-gray-400",children:c.artistName})]})]}),u.jsxs("div",{className:"flex-grow flex items-center justify-center space-x-4 mx-8",children:[u.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white",children:u.jsx(fe,{name:"previous",className:"w-6 h-6"})}),u.jsx("button",{onClick:g,className:"bg-white rounded-full p-2 text-gray-900 hover:scale-105 transition-transform",children:u.jsx(fe,{name:d?"pause":"play",className:"w-8 h-8"})}),u.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white",children:u.jsx(fe,{name:"next",className:"w-6 h-6"})})]}),u.jsx("div",{className:"flex items-center space-x-2 w-1/3",children:u.jsx("input",{type:"range",min:"0",max:"100",value:n||0,onChange:_,className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer range-sm",style:{background:`linear-gradient(to right, #1DB954 ${n}%, #4B5563 ${n}%)`}})})]}):null},Zh=({track:r,onViewComments:e})=>{var _;const n=T.useContext(jo);if(!n)throw new Error("TrackCard must be used within an AudioProvider");const{playTrack:i,currentTrack:o,isPlaying:c}=n,d=(o==null?void 0:o.id)===r.id&&c,g=()=>{i(r)},p=()=>{switch(r.uploadType){case"For Sale":return`Buy for $${r.price.toFixed(2)}`;case"Free Download":return"Download";default:return null}},y=()=>{switch(r.category){case"Bootleg":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"Remix":return"bg-purple-500/20 text-purple-300 border-purple-500/30";default:return"bg-blue-500/20 text-blue-300 border-blue-500/30"}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:r.coverArtUrl,alt:`${r.title} cover art`,className:"w-full h-48 object-cover"}),u.jsx("button",{onClick:g,className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-label":`Play or pause ${r.title}`,children:u.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:u.jsx(fe,{name:d?"pause":"play",className:"h-8 w-8 text-white"})})}),u.jsx("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full border ${y()}`,children:r.category})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-white truncate",children:r.title}),u.jsxs("div",{className:"text-sm text-gray-400",children:[u.jsx(Ut,{to:`/profile/${r.artistId}`,className:"hover:text-white hover:underline",children:r.artistName}),r.labelId&&r.labelName&&u.jsxs("span",{className:"text-xs",children:[" on ",u.jsx(Ut,{to:`/labels/${r.labelId}`,className:"hover:text-white hover:underline font-semibold",children:r.labelName})]})]}),u.jsx("div",{className:"flex-grow mt-2",children:u.jsx("div",{className:"flex space-x-1",children:r.tags.slice(0,2).map(w=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:w},w))})}),u.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e&&u.jsxs("button",{onClick:()=>e(r),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors","aria-label":`View comments for ${r.title}`,children:[u.jsx(fe,{name:"comment",className:"w-4 h-4"}),u.jsx("span",{className:"text-xs font-semibold",children:((_=r.comments)==null?void 0:_.length)||0})]}),p()&&u.jsx("button",{className:"bg-transparent border border-brand-accent text-brand-accent px-3 py-1 rounded-full text-xs font-semibold hover:bg-brand-accent hover:text-white transition-colors",children:p()})]})]})]})},cn=()=>u.jsx("div",{className:"flex justify-center items-center p-8",children:u.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-brand-accent"})}),qI=({comment:r})=>{const e=c=>{const d=new Date(c),g=Math.floor((new Date().getTime()-d.getTime())/1e3);let p=g/31536e3;return p>1?Math.floor(p)+" years ago":(p=g/2592e3,p>1?Math.floor(p)+" months ago":(p=g/86400,p>1?Math.floor(p)+" days ago":(p=g/3600,p>1?Math.floor(p)+" hours ago":(p=g/60,p>1?Math.floor(p)+" minutes ago":"Just now"))))},n=c=>c.split(/(@\w+)/g).map((d,g)=>d.startsWith("@")?u.jsx("strong",{className:"text-brand-accent font-semibold cursor-pointer hover:underline",children:d},g):d),i=r.authorId?`/profile/${r.authorId}`:"#",o=r.authorAvatarUrl||`https://i.pravatar.cc/150?u=${r.authorName}`;return u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ut,{to:i,children:u.jsx("img",{src:o,alt:r.authorName,className:"w-10 h-10 rounded-full object-cover"})}),u.jsxs("div",{className:"flex-1 bg-gray-700/50 p-3 rounded-lg",children:[u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx(Ut,{to:i,className:"font-bold text-white text-sm hover:underline",children:r.authorName}),u.jsx("span",{className:"text-xs text-gray-500",children:e(r.createdAt)})]}),u.jsx("p",{className:"text-gray-300 text-sm mt-1",children:n(r.content)})]})]})},qe=({children:r,variant:e="primary",isLoading:n=!1,size:i="md",className:o,...c})=>{const d="rounded-full font-semibold transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",g={primary:"bg-brand-accent hover:bg-brand-accent-hover text-white focus:ring-brand-accent",secondary:"bg-gray-700 hover:bg-gray-600 text-white focus:ring-gray-500"},p={sm:"px-3 py-1.5 text-xs",md:"px-6 py-2"};return u.jsx("button",{className:[d,g[e],p[i],o].filter(Boolean).join(" "),disabled:n,...c,children:n?u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):r})},FI=({onAddComment:r,placeholder:e="Add a comment or tag someone with @"})=>{const[n,i]=T.useState(""),[o,c]=T.useState(!1),[d,g]=T.useState(!1),[p,y]=T.useState(""),_=async w=>{if(w.preventDefault(),!n.trim()||d&&!p.trim())return;c(!0);let A;d?A={authorName:`${p} (Guest)`,authorAvatarUrl:`https://i.pravatar.cc/150?u=${p}`,content:n}:A={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100",content:n};try{await r(A),i(""),y("")}catch(D){console.error("Failed to add comment:",D)}finally{c(!1)}};return u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700/50",children:u.jsxs("form",{onSubmit:_,className:"flex items-start gap-3",children:[u.jsx("img",{src:d?"https://i.pravatar.cc/150?u=guest":"https://picsum.photos/id/1015/100/100",alt:"Your avatar",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsx("textarea",{value:n,onChange:w=>i(w.target.value),placeholder:e,required:!0,rows:2,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400 text-sm"}),d&&u.jsx("div",{className:"flex gap-3",children:u.jsx("input",{type:"text",value:p,onChange:w=>y(w.target.value),required:!0,placeholder:"Your Name",className:"flex-1 bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-sm focus:ring-brand-accent focus:border-brand-accent"})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{id:"guest-checkbox",type:"checkbox",checked:d,onChange:w=>g(w.target.checked),className:"h-4 w-4 rounded border-gray-600 bg-gray-700 text-brand-accent focus:ring-brand-accent"}),u.jsx("label",{htmlFor:"guest-checkbox",className:"ml-2 text-xs text-gray-400",children:"Comment as guest"})]}),u.jsx(qe,{type:"submit",size:"sm",isLoading:o,children:"Post Comment"})]})]})]})})},ga=({comments:r,onAddComment:e,placeholder:n,startExpanded:i=!1})=>{const[o,c]=T.useState(i);return!o&&!i?u.jsxs("button",{onClick:()=>c(!0),className:"text-sm font-semibold text-gray-400 hover:text-white flex items-center gap-2",children:[u.jsx(fe,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:["View ",r.length," Comment",r.length!==1&&"s"]})]}):u.jsxs("div",{className:"w-full",children:[r.length>0&&u.jsx("div",{className:"space-y-4",children:r.map(d=>u.jsx(qI,{comment:d},d.id))}),u.jsx(FI,{onAddComment:e,placeholder:n})]})},Wg=({post:r})=>{const[e,n]=T.useState(r),[i,o]=T.useState(!1),c=p=>{const y=new Date(p),_=Math.floor((new Date().getTime()-y.getTime())/1e3);let w=_/31536e3;return w>1?Math.floor(w)+" years ago":(w=_/2592e3,w>1?Math.floor(w)+" months ago":(w=_/86400,w>1?Math.floor(w)+" days ago":(w=_/3600,w>1?Math.floor(w)+" hours ago":(w=_/60,w>1?Math.floor(w)+" minutes ago":Math.floor(_)+" seconds ago"))))},d=e.authorId.startsWith("label_")?`/labels/${e.authorId}`:`/profile/${e.authorId}`,g=async p=>{try{const y=await wI(e.id,p);n(_=>({..._,replies:[..._.replies||[],y],replyCount:(_.replies||[]).length+1}))}catch(y){console.error("Failed to add reply:",y)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl",children:[u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx(Ut,{to:d,children:u.jsx("img",{src:e.authorAvatarUrl,alt:e.authorName,className:"w-12 h-12 rounded-full object-cover"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:e.title}),u.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["Posted by ",u.jsx(Ut,{to:d,className:"font-medium hover:text-white hover:underline",children:e.authorName}),u.jsx("span",{className:"mx-2",children:""}),u.jsx("span",{children:c(e.createdAt)})]}),u.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:e.content})]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex items-center space-x-6 text-gray-400",children:[u.jsxs("button",{className:"flex items-center space-x-2 hover:text-brand-accent transition-colors",children:[u.jsx(fe,{name:"heart",className:"w-5 h-5"}),u.jsxs("span",{children:[e.likes," Likes"]})]}),u.jsxs("button",{onClick:()=>o(!i),className:"flex items-center space-x-2 hover:text-white transition-colors",children:[u.jsx(fe,{name:"comment",className:"w-5 h-5"}),u.jsxs("span",{children:[e.replyCount," Replies"]})]})]}),i&&u.jsx("div",{className:"mt-4",children:u.jsx(ga,{comments:e.replies||[],onAddComment:g,placeholder:"Write a reply..."})})]})},Yw=({onPostCreated:r})=>{const[e,n]=T.useState(!1),[i,o]=T.useState(""),[c,d]=T.useState(""),g=async p=>{if(p.preventDefault(),!i.trim()||!c.trim())return;n(!0);const y={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100"};try{const _=await $w({title:i,content:c,...y});r(_),o(""),d("")}catch(_){console.error("Failed to add post:",_)}finally{n(!1)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg h-full",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create a New Post"}),u.jsxs("form",{onSubmit:g,className:"space-y-4",children:[u.jsx("div",{children:u.jsx("input",{type:"text",placeholder:"Post Title",value:i,onChange:p=>o(p.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})}),u.jsx("div",{children:u.jsx("textarea",{placeholder:"What's on your mind?",value:c,onChange:p=>d(p.target.value),required:!0,rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})}),u.jsx("div",{className:"flex justify-end",children:u.jsx(qe,{type:"submit",isLoading:e,children:"Post"})})]})]})},HI=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(""),[o,c]=T.useState([]),[d,g]=T.useState(null),p=T.useRef(null);T.useEffect(()=>{(async()=>{if(_r.currentUser){const w=await dr(_r.currentUser.uid);w&&g(w)}})()},[]),T.useEffect(()=>{Fw().then(c)},[]),T.useEffect(()=>{if(o.length===0||!d)return;const _=Kw(),w=o.filter(D=>D.id!==d.id);w.length>0&&e([{id:`msg_${Date.now()-5e3}`,user:w[0],text:"Welcome to the live chat!",timestamp:new Date(Date.now()-5e3).toISOString()},{id:`msg_${Date.now()-2e3}`,user:w[1%w.length],text:"Anyone working on new tunes?",timestamp:new Date(Date.now()-2e3).toISOString()}]);const A=setInterval(()=>{const D=w[Math.floor(Math.random()*w.length)],V=_[Math.floor(Math.random()*_.length)],F={id:`msg_${Date.now()}`,user:D,text:V,timestamp:new Date().toISOString()};e(z=>[...z,F])},8e3);return()=>clearInterval(A)},[o]),T.useEffect(()=>{var _;(_=p.current)==null||_.scrollIntoView({behavior:"smooth"})},[r]);const y=()=>{if(n.trim()===""||!d)return;const _={id:`msg_${Date.now()}`,user:d,text:n,timestamp:new Date().toISOString()};e(w=>[...w,_]),i("")};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[500px]",children:[u.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[r.map(_=>u.jsxs("div",{className:`flex items-start gap-3 ${_.user.id===(d==null?void 0:d.id)?"flex-row-reverse":""}`,children:[u.jsx("img",{src:_.user.avatarUrl,alt:_.user.name,className:"w-10 h-10 rounded-full object-cover"}),u.jsxs("div",{className:`p-3 rounded-lg max-w-sm shadow ${_.user.id===(d==null?void 0:d.id)?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[u.jsx("p",{className:"font-bold text-sm mb-1",children:_.user.name}),u.jsx("p",{className:"text-sm",children:_.text})]})]},_.id)),u.jsx("div",{ref:p})]})}),u.jsx("div",{className:"p-4 bg-gray-700/50 border-t border-gray-700",children:u.jsxs("form",{onSubmit:y,className:"flex gap-3 items-center",children:[u.jsx("img",{src:(d==null?void 0:d.avatarUrl)||"https://api.dicebear.com/7.x/avataaars/svg?seed=default",alt:"Your avatar",className:"w-8 h-8 rounded-full"}),u.jsx("input",{type:"text",value:n,onChange:_=>i(_.target.value),placeholder:"Join the conversation...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-2 hover:bg-brand-accent-hover disabled:bg-gray-500 transition-colors",disabled:!n.trim(),children:u.jsx(fe,{name:"send",className:"w-5 h-5"})})]})})]})};var uh=(r=>(r.NEW_TRACK="NEW_TRACK",r.NEW_PHOTO="NEW_PHOTO",r.IRL_EVENT="IRL_EVENT",r))(uh||{}),Qt=(r=>(r.GEO="GEO",r.UNIVERSE="UNIVERSE",r.COUNTRY="COUNTRY",r))(Qt||{});const pa=({isOpen:r,onClose:e,title:n,comments:i,onAddComment:o})=>{const c=T.useRef(null);return T.useEffect(()=>{const d=g=>{g.key==="Escape"&&e()};return r&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow=""}},[r,e]),r?u.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm","aria-labelledby":"comment-modal-title",role:"dialog","aria-modal":"true",onClick:e,children:u.jsxs("div",{ref:c,className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl h-full max-h-[80vh] flex flex-col overflow-hidden",onClick:d=>d.stopPropagation(),children:[u.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-700 flex-shrink-0",children:[u.jsx("h2",{id:"comment-modal-title",className:"text-xl font-bold text-white truncate",children:n}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white p-2 rounded-full","aria-label":"Close comment modal",children:u.jsx(fe,{name:"x",className:"w-6 h-6"})})]}),u.jsx("main",{className:"flex-grow overflow-y-auto p-6",children:u.jsx(ga,{comments:i,onAddComment:o,startExpanded:!0})})]})}):null},Qw=r=>{switch(r){case uh.NEW_TRACK:return"music-note";case uh.NEW_PHOTO:return"camera";case uh.IRL_EVENT:return"map-pin";default:return"chat-bubble"}},X_=({event:r,onClick:e,onMouseEnter:n,onMouseLeave:i,className:o="event-ping",isDimmed:c,isHighlighted:d,size:g=32})=>{const p=g*.6;return u.jsx("div",{className:`${o} ${c?"dimmed":""}`,style:{transform:r.transform,animationDelay:r.animationDelay,width:`${g}px`,height:`${g}px`,marginLeft:`${-g/2}px`,marginTop:`${-g/2}px`},onMouseEnter:()=>n(r),onMouseLeave:i,onClick:()=>e(r),"aria-label":`Event: ${r.title}`,children:u.jsx("div",{className:`event-ping-icon ${d?"highlight":""}`,style:{animationDelay:r.animationDelay},children:u.jsx(fe,{name:Qw(r.type),className:"transition-all",style:{width:p,height:p}})})})},GI=({mode:r,setMode:e})=>{const n="flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium transition-colors",i="bg-brand-accent text-white",o="bg-gray-700 text-gray-300 hover:bg-gray-600",c=[{key:Qt.GEO,icon:"globe-alt",label:"Geo"},{key:Qt.UNIVERSE,icon:"aperture",label:"Universe"},{key:Qt.COUNTRY,icon:"map",label:"Countries"}];return u.jsx("div",{className:"flex space-x-2 p-1 bg-gray-900/50 rounded-full",children:c.map(({key:d,icon:g,label:p})=>u.jsxs("button",{onClick:()=>e(d),className:`${n} ${r===d?i:o}`,children:[u.jsx(fe,{name:g,className:"w-4 h-4"}),u.jsx("span",{children:p})]},d))})},$I=()=>{var Z;const[e,n]=T.useState([]),[i,o]=T.useState(!0),[c,d]=T.useState(Qt.GEO),[g,p]=T.useState(null),[y,_]=T.useState(null),[w,A]=T.useState(null),[D,V]=T.useState(1),[F,z]=T.useState({x:-20,y:30}),[Y,te]=T.useState({x:0,y:0,z:0}),[J,se]=T.useState(!1),oe=T.useRef({x:0,y:0}),[ce,I]=T.useState(null),N=["@Artist:Sub-Tropical","@Genre:Jungle","@Genre:LiquidFunk"],[R,j]=T.useState(null);T.useEffect(()=>{DI().then(H=>{n(H),o(!1)})},[]),T.useEffect(()=>{p(null),A(null),I(null),j(null),te({x:0,y:0,z:0}),V(1)},[c]);const L=T.useMemo(()=>{if(c!==Qt.UNIVERSE)return[];const H=new Map;e.forEach(ue=>{ue.groups.forEach(ge=>{const we=ge.split(":")[0];H.set(we,(H.get(we)||0)+1)})});const le=Array.from(H.keys());return le.map((ue,ge)=>{const we=ge/le.length*2*Math.PI,ve=Math.random()*Math.PI-Math.PI/2,Le=120+Math.random()*20,pt=Math.cos(we)*Math.cos(ve)*Le,It=Math.sin(we)*Math.cos(ve)*Le,cs=Math.sin(ve)*Le;return{name:ue,transform:`translateX(-50%) translateY(-50%) translateX(${pt}px) translateY(${cs}px) translateZ(${It}px) rotateY(${-we}rad) rotateX(${-ve}rad)`,position:{x:pt,y:cs,z:It},influence:H.get(ue)||1}})},[e,c]),k=T.useMemo(()=>{if(c!==Qt.COUNTRY)return[];const H=e.reduce((ue,ge)=>(ue[ge.country]=ue[ge.country]||[],ue[ge.country].push(ge),ue),{}),le={"United Kingdom":{top:"40%",left:"45%"},Germany:{top:"42%",left:"55%"},Jamaica:{top:"70%",left:"25%"},Japan:{top:"50%",left:"85%"}};return Object.entries(H).map(([ue,ge])=>({name:ue,count:ge.length,events:ge,position:le[ue]||{top:"50%",left:"50%"}}))},[e,c]),C=H=>{H.preventDefault();const le=.001;V(ue=>Math.max(.5,Math.min(3,ue-H.deltaY*le)))},Ae=H=>{se(!0),oe.current={x:H.clientX,y:H.clientY}},me=()=>se(!1),O=H=>{if(!J)return;const le=H.clientX-oe.current.x,ue=H.clientY-oe.current.y;oe.current={x:H.clientX,y:H.clientY},z(ge=>({y:ge.y+le*.2,x:Math.max(-90,Math.min(90,ge.x-ue*.2))}))},W=H=>{ce===H.name?(I(null),te({x:0,y:0,z:0})):(I(H.name),te({x:-H.position.x,y:-H.position.y,z:-H.position.z}))},de=async H=>{if(y)try{const le=await NI(y.id,H),ue={...y,comments:[...y.comments||[],le]};_(ue),n(ge=>ge.map(we=>we.id===ue.id?ue:we))}catch(le){console.error("Failed to add comment to event:",le)}},be=Array.from({length:12}).map((H,le)=>u.jsx("div",{className:"globe-slice",style:{transform:`rotateY(${180/12*le}deg)`}},le)),De=()=>{switch(c){case Qt.GEO:return"Global Activity";case Qt.UNIVERSE:return"Musical Universe";case Qt.COUNTRY:return"Community Hotspots";default:return"Activity Hub"}},U=()=>{switch(c){case Qt.GEO:return"Real-time user activity by location.";case Qt.UNIVERSE:return"Click a bubble to focus. Drag to orbit.";case Qt.COUNTRY:return"Scroll to zoom. Click a bubble to explore.";default:return"See what's happening now."}};return u.jsxs(u.Fragment,{children:[y&&u.jsx(pa,{isOpen:!!y,onClose:()=>_(null),title:`Comments for ${y.title}`,comments:y.comments||[],onAddComment:de}),u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[500px] p-4 text-center items-center justify-between relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-20 flex justify-between w-full items-start",children:[u.jsxs("div",{className:"text-left",children:[u.jsx("h4",{className:"font-bold text-white text-lg",children:De()}),u.jsx("p",{className:"text-sm text-gray-400 max-w-xs",children:U()})]}),u.jsx(GI,{mode:c,setMode:d})]}),u.jsx("div",{className:"flex-grow flex items-center justify-center w-full h-full relative",children:i?u.jsx(cn,{}):u.jsxs(u.Fragment,{children:[c===Qt.GEO&&u.jsx("div",{className:"globe-container",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"globe",children:[be,e.map(H=>u.jsx(X_,{event:H,onClick:_,onMouseEnter:p,onMouseLeave:()=>p(null)},H.id))]}),u.jsx("div",{className:"globe-shadow"})]})}),c===Qt.UNIVERSE&&u.jsx("div",{className:"universe-container",onMouseDown:Ae,onMouseUp:me,onMouseLeave:me,onMouseMove:O,onWheel:C,children:u.jsxs("div",{className:"universe-core",style:{transform:`
                                        rotateX(${F.x}deg) 
                                        rotateY(${F.y}deg) 
                                        translateX(${Y.x*D}px) 
                                        translateY(${Y.y*D}px) 
                                        translateZ(${Y.z*D}px) 
                                        scale(${D})
                                    `},children:[L.map(H=>{const le=40+H.influence*8,ue=Math.min(.1+H.influence*.05,.7);return u.jsx("div",{className:`universe-node ${ce===H.name?"focused":""} ${ce&&ce!==H.name?"dimmed":""}`,style:{transform:H.transform,fontSize:`${8+H.influence*1.5}px`,width:`${le}px`,height:`${le}px`,backgroundColor:`rgba(168, 85, 247, ${ue})`},onClick:()=>W(H),children:H.name},H.name)}),e.map(H=>{const le=ce?H.groups.some(ge=>ge.startsWith(ce)):!0,ue=24+H.influence*2;return u.jsx(X_,{event:H,size:ue,className:"universe-event-ping",isDimmed:ce!==null&&!le,isHighlighted:le,onClick:_,onMouseEnter:p,onMouseLeave:()=>p(null)},H.id)})]})}),c===Qt.COUNTRY&&u.jsx("div",{className:"country-view-container",onWheel:C,children:u.jsxs("div",{className:"country-view-wrapper",style:{transform:`scale(${D})`},children:[k.map(H=>{const ue=40+H.count*15,ge=R===H.name,we=R&&!ge;return u.jsx("div",{className:`country-bubble ${ge?"active":""} ${we?"dimmed":""}`,style:{top:H.position.top,left:H.position.left,width:`${ue}px`,height:`${ue}px`,fontSize:`${10+H.count}px`},onClick:()=>j(ve=>ve===H.name?null:H.name),onMouseEnter:()=>A(H),onMouseLeave:()=>A(null),children:H.name.split(" ").map(ve=>ve[0]).join("")},H.name)}),R&&((Z=k.find(H=>H.name===R))==null?void 0:Z.events.map((H,le,ue)=>{const ge=k.find(It=>It.name===R),we=le/ue.length*2*Math.PI,ve=(40+ge.count*15)*.7,Le=`calc(${ge.position.top} + ${Math.sin(we)*ve}px)`,pt=`calc(${ge.position.left} + ${Math.cos(we)*ve}px)`;return u.jsx("div",{className:"local-event-ping",style:{top:Le,left:pt},onMouseEnter:()=>p(H),onMouseLeave:()=>p(null),onClick:()=>_(H),children:u.jsx(fe,{name:Qw(H.type),className:"w-3 h-3 text-white"})},H.id)}))]})})]})}),u.jsxs("div",{className:"absolute bottom-4 left-4 right-4 z-10 flex items-end gap-4",children:[c===Qt.UNIVERSE&&u.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm p-3 rounded-lg flex-shrink-0",children:[u.jsx("h5",{className:"font-bold text-white text-sm mb-2 text-left",children:"My Bubbles"}),u.jsx("div",{className:"flex flex-col gap-1 items-start",children:N.map(H=>{const le=H.split(":")[0];return u.jsx("button",{onClick:()=>{const ue=L.find(ge=>ge.name===le);ue&&W(ue)},className:`text-xs text-left transition-colors w-full px-2 py-1 rounded ${ce===le?"bg-brand-accent text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:H},H)})}),ce&&u.jsx("button",{onClick:()=>{I(null),te({x:0,y:0,z:0})},className:"text-xs text-gray-400 hover:text-white mt-2 w-full text-center",children:"Reset View"})]}),u.jsx("div",{className:"event-info-box bg-gray-900/80 backdrop-blur-sm p-4 rounded-lg transition-all duration-300 flex-grow",children:g?u.jsxs("div",{className:"opacity-100 transition-opacity duration-300 text-left",children:[u.jsx("h5",{className:"font-bold text-white",children:g.title}),u.jsx("p",{className:"text-sm text-gray-300",children:g.locationName}),u.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["By ",g.authorName]}),u.jsxs(qe,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>_(g),children:[u.jsx(fe,{name:"comment",className:"w-4 h-4 mr-2"}),"View Comments"]})]}):w?u.jsxs("div",{className:"opacity-100 transition-opacity duration-300 text-left",children:[u.jsx("h5",{className:"font-bold text-white",children:w.name}),u.jsxs("p",{className:"text-sm text-gray-300",children:[w.count," active event",w.count>1?"s":""]})]}):u.jsx("div",{className:"opacity-70 transition-opacity duration-300",children:u.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Hover over an item for details."})})})]})]})]})},KI=()=>{const[r,e]=T.useState([]),[n,i]=T.useState([]),[o,c]=T.useState(!0),[d,g]=T.useState(null);T.useEffect(()=>{(async()=>{c(!0);const[w,A]=await Promise.all([Jh(),Gw()]);e(w),i(A),c(!1)})()},[]);const p=_=>{i(w=>[_,...w].slice(0,2))},y=async _=>{if(d)try{const w=await yc(d.id,_),A={...d,comments:[...d.comments||[],w]};g(A),e(D=>D.map(V=>V.id===A.id?A:V))}catch(w){console.error("Failed to add comment:",w)}};return o?u.jsx(cn,{}):u.jsxs("div",{children:[d&&u.jsx(pa,{isOpen:!!d,onClose:()=>g(null),title:`Comments for ${d.title}`,comments:d.comments||[],onAddComment:y}),u.jsxs("section",{id:"featured-tracks",children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Featured Tracks"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Discover new music from artists around the world."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:(r||[]).length>0?r.map(_=>u.jsx(Zh,{track:_,onViewComments:g},_.id)):u.jsx("div",{className:"col-span-full text-center py-12",children:u.jsx("p",{className:"text-gray-400 text-lg",children:"No tracks available yet. Check back soon!"})})})]}),u.jsxs("section",{id:"community-spotlight",className:"mt-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Community Spotlight"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Join the conversation or start your own."}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2 space-y-6",children:(n||[]).length>0?n.slice(0,2).map(_=>u.jsx(Wg,{post:_},_.id)):u.jsx("p",{className:"text-gray-400",children:"No community posts yet. Be the first!"})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsx(Yw,{onPostCreated:p})})]})]}),u.jsxs("section",{id:"activity-hub",className:"mt-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Activity Hub"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"See what's happening in the community right now."}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Live Chat"}),u.jsx(HI,{})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Globalizer"}),u.jsx($I,{})]})]})]})]})},YI={Spotify:{icon:"spotify",color:"text-green-500"},SoundCloud:{icon:"soundcloud",color:"text-orange-500"},YouTube:{icon:"youtube",color:"text-red-500"},Bandcamp:{icon:"bandcamp",color:"text-cyan-400"}},QI=({releases:r})=>{const e=(n,i)=>{console.log(`${n} button clicked for: ${i}`),alert(`Feature coming soon: ${n} for "${i}"`)};return u.jsx("div",{className:"space-y-4",children:r.map(n=>{const i=YI[n.platform],o=n.type==="Bootleg"?!0:!n.isPaid;return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4 transition-colors hover:bg-gray-700/50",children:[u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 ${i.color} hover:opacity-80 transition-opacity`,children:u.jsx(fe,{name:i.icon,className:"w-10 h-10"})}),u.jsxs("div",{className:"flex-grow",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"font-bold text-white hover:underline",children:n.title}),u.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full border ${o?"bg-green-500/20 text-green-300 border-green-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`,children:o?"Free":"Paid"})]}),n.type==="Remix"&&n.sourceArtist&&u.jsxs("p",{className:"text-sm text-gray-400",children:["Remix of a track by ",u.jsx("span",{className:"font-semibold text-gray-300",children:n.sourceArtist})]})]}),u.jsx("div",{className:"w-full sm:w-auto",children:n.type==="Remix"&&n.sourceSamples&&u.jsxs("div",{className:"mb-2 sm:mb-0",children:[u.jsx("p",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Source Samples:"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:n.sourceSamples.map((c,d)=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:c},d))})]})}),n.type==="Remix"&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 self-start sm:self-center mt-2 sm:mt-0",children:[u.jsxs("button",{onClick:()=>e("Tag Samples",n.title),className:"text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors",children:[u.jsx(fe,{name:"tag",className:"w-3 h-3"})," Tag Samples"]}),u.jsxs("button",{onClick:()=>e("Request Remix",n.title),className:"text-xs bg-purple-600/50 hover:bg-purple-600/80 text-purple-200 px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors",children:[u.jsx(fe,{name:"music-note",className:"w-3 h-3"})," Request Remix"]})]})]},n.id)})})},XI=({pack:r})=>u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-800/80 border border-brand-accent/30 rounded-lg shadow-2xl p-6 flex flex-col h-full transform transition-transform duration-300 hover:scale-105 hover:shadow-brand-accent/20",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx(fe,{name:"package",className:"w-10 h-10 text-brand-accent mb-2"}),u.jsx("h3",{className:"text-2xl font-bold text-white",children:r.title}),u.jsx("p",{className:"text-gray-400 mt-1",children:r.description})]}),u.jsx("ul",{className:"space-y-3 my-6",children:r.items.map((e,n)=>u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-gray-700 rounded-full p-2",children:u.jsx(fe,{name:e.icon,className:"w-4 h-4 text-brand-accent-hover"})}),u.jsx("span",{className:"text-gray-300",children:e.name})]},n))})]}),u.jsxs("div",{className:"mt-6 text-center",children:[u.jsxs("p",{className:"text-4xl font-bold text-white mb-4",children:["$",r.price.toFixed(2)," ",u.jsx("span",{className:"text-lg font-normal text-gray-400",children:r.currency})]}),u.jsx(qe,{className:"w-full",children:"Purchase Pack"})]})]}),WI=({collection:r})=>u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Your Collection (",r.length," tracks)"]}),u.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden max-h-[60vh] overflow-y-auto",children:u.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[u.jsx("thead",{className:"text-xs text-gray-300 uppercase bg-gray-700 sticky top-0 z-10",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 py-3",children:"#"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Title"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Artist"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Album"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Genre"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Key"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Time"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Plays"})]})}),u.jsx("tbody",{children:r.map((e,n)=>u.jsxs("tr",{className:"bg-gray-800 border-b border-gray-700 hover:bg-gray-700/50",children:[u.jsx("td",{className:"px-4 py-3",children:n+1}),u.jsx("th",{scope:"row",className:"px-4 py-3 font-medium text-white whitespace-nowrap",children:e.title}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.artist}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.album}),u.jsx("td",{className:"px-4 py-3",children:e.genre}),u.jsx("td",{className:"px-4 py-3",children:e.key}),u.jsxs("td",{className:"px-4 py-3",children:[e.totalTime,"s"]}),u.jsx("td",{className:"px-4 py-3",children:e.playCount})]},e.trackId||n))})]})})]}),JI=()=>{const{userId:r}=cx(),e=Ti(),[n,i]=T.useState(null),[o,c]=T.useState([]),[d,g]=T.useState([]),[p,y]=T.useState([]),[_,w]=T.useState(null),[A,D]=T.useState(!0),[V,F]=T.useState("tracks"),[z,Y]=T.useState(!1),[te,J]=T.useState(null),[se,oe]=T.useState(null);T.useEffect(()=>{const j=_r.onAuthStateChanged(L=>{oe((L==null?void 0:L.uid)||null)});return()=>j()},[]),T.useEffect(()=>{var j;(j=e.state)!=null&&j.collection&&(w(e.state.collection),F("collection"),window.history.replaceState({},document.title))},[e.state]),T.useEffect(()=>{(async()=>{if(!r)return;D(!0);const[L,k,C,Ae]=await Promise.all([dr(r),fI(r),jI(),II()]);i(L||null),c(k),g(C),y(Ae),D(!1)})()},[r]);const ce=()=>{Y(j=>!j)},I=async j=>{if(te)try{const L=await yc(te.id,j),k={...te,comments:[...te.comments||[],L]};J(k),c(C=>C.map(Ae=>Ae.id===k.id?k:Ae))}catch(L){console.error("Failed to add comment:",L)}},N=()=>{switch(V){case"tracks":return u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map(j=>u.jsx(Zh,{track:j,onViewComments:J},j.id))});case"releases":return u.jsx(QI,{releases:d});case"packs":return u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(j=>u.jsx(XI,{pack:j},j.id))});case"collection":return _?u.jsx(WI,{collection:_}):u.jsxs("div",{className:"text-center py-20 px-6 bg-gray-800 rounded-lg border-2 border-dashed border-gray-700",children:[u.jsx(fe,{name:"playlist",className:"w-16 h-16 mx-auto text-gray-500 mb-4"}),u.jsx("h3",{className:"text-2xl font-semibold text-white",children:"Your Music Collection is Empty"}),u.jsx("p",{className:"text-gray-400 mt-2 mb-6 max-w-md mx-auto",children:"Import your Rekordbox XML file to see all your tracks, organize them, and build playlists."}),u.jsx(Ut,{to:"/import-collection",children:u.jsxs(qe,{children:[u.jsx(fe,{name:"upload",className:"w-5 h-5 mr-2"}),"Import Your Collection"]})})]});default:return null}},R=({tab:j,label:L,count:k})=>u.jsxs("button",{onClick:()=>F(j),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors border-b-2 ${V===j?"text-white border-brand-accent bg-gray-700/50":"text-gray-400 border-transparent hover:text-white hover:border-gray-500"}`,children:[L,typeof k<"u"&&k>0&&u.jsx("span",{className:"text-xs bg-gray-600 rounded-full px-2 py-0.5 ml-1",children:k})]});return A?u.jsx(cn,{}):n?u.jsxs("div",{className:"text-white",children:[te&&u.jsx(pa,{isOpen:!!te,onClose:()=>J(null),title:`Comments for ${te.title}`,comments:te.comments||[],onAddComment:I}),u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 mb-8 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-8",children:[u.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-40 h-40 rounded-full object-cover border-4 border-gray-700 flex-shrink-0"}),u.jsxs("div",{className:"flex-grow w-full",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("h1",{className:"text-4xl font-bold",children:n.name}),n.isVerified&&u.jsx(fe,{name:"check-circle",className:"w-6 h-6 text-brand-accent",title:"Verified Artist"})]}),se===r?u.jsx(Ut,{to:"/settings/profile",children:u.jsxs(qe,{variant:"secondary",className:"w-full sm:w-auto flex-shrink-0",children:[u.jsx(fe,{name:"settings",className:"w-4 h-4 mr-2"}),"Edit Profile"]})}):u.jsx(qe,{onClick:ce,variant:z?"secondary":"primary",className:"w-full sm:w-auto flex-shrink-0",children:z?"Following":"Follow"})]}),u.jsx("p",{className:"text-gray-400 mt-2 max-w-xl",children:n.bio})]})]}),u.jsx("div",{className:"border-b border-gray-700 mb-6",children:u.jsxs("nav",{className:"-mb-px flex space-x-4",children:[u.jsx(R,{tab:"tracks",label:"All Tracks",count:o.length}),u.jsx(R,{tab:"releases",label:"External Releases",count:d.length}),u.jsx(R,{tab:"packs",label:"Premium Packs",count:p.length}),u.jsx(R,{tab:"collection",label:"My Collection",count:(_==null?void 0:_.length)||0})]})}),u.jsx("div",{children:N()})]}):u.jsx("div",{className:"text-center text-white",children:"User not found."})},Xw=()=>{const r=Ih(),[e,n]=T.useState(!0),[i,o]=T.useState(!1),[c,d]=T.useState(null),[g,p]=T.useState(""),[y,_]=T.useState(""),[w,A]=T.useState(""),[D,V]=T.useState(""),[F,z]=T.useState(""),[Y,te]=T.useState(""),[J,se]=T.useState(""),[oe,ce]=T.useState(""),[I,N]=T.useState(""),[R,j]=T.useState("");T.useEffect(()=>{(async()=>{const C=_r.currentUser;if(!C){r("/");return}try{const Ae=await dr(C.uid);Ae&&(d(Ae),A(Ae.name||""),V(Ae.bio||""),z(Ae.genre||""),te(Ae.location||""),se(Ae.spotifyUrl||""),ce(Ae.soundcloudUrl||""),N(Ae.instagramUrl||""),j(Ae.twitterUrl||""))}catch(Ae){console.error("Error loading profile:",Ae),p("Failed to load profile")}finally{n(!1)}})()},[r]);const L=async()=>{if(c){o(!0),p(""),_("");try{const k={id:c.id,name:w,bio:D,genre:F,location:Y,spotifyUrl:J||void 0,soundcloudUrl:oe||void 0,instagramUrl:I||void 0,twitterUrl:R||void 0};await Hw(k),_("Profile updated successfully!"),setTimeout(()=>r(`/profile/${c.id}`),1500)}catch(k){console.error("Error saving profile:",k),p(k.message||"Failed to save profile")}finally{o(!1)}}};return e?u.jsx(cn,{}):c?u.jsxs("div",{className:"max-w-4xl mx-auto text-white",children:[u.jsxs("div",{className:"mb-8",children:[u.jsxs("button",{onClick:()=>r(`/profile/${c.id}`),className:"flex items-center text-gray-400 hover:text-white transition-colors mb-4",children:[u.jsx(fe,{name:"arrow-left",className:"w-5 h-5 mr-2"}),"Back to Profile"]}),u.jsx("h1",{className:"text-4xl font-bold",children:"Edit Profile"}),u.jsx("p",{className:"text-gray-400 mt-2",children:"Update your SoundWave artist profile"})]}),g&&u.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500",children:g}),y&&u.jsx("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500 rounded-lg text-green-500",children:y}),u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Artist Name *"}),u.jsx("input",{type:"text",value:w,onChange:k=>A(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"Your artist name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio *"}),u.jsx("textarea",{value:D,onChange:k=>V(k.target.value),rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"Tell us about yourself and your music..."}),u.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[D.length,"/500 characters"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Primary Genre *"}),u.jsx("input",{type:"text",value:F,onChange:k=>z(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"e.g., Drum & Bass, House, Techno"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Location"}),u.jsx("input",{type:"text",value:Y,onChange:k=>te(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"e.g., Los Angeles, CA"})]}),u.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[u.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Social Links (Optional)"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Spotify"}),u.jsx("input",{type:"url",value:J,onChange:k=>se(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"https://open.spotify.com/artist/..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"SoundCloud"}),u.jsx("input",{type:"url",value:oe,onChange:k=>ce(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"https://soundcloud.com/..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Instagram"}),u.jsx("input",{type:"url",value:I,onChange:k=>N(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"https://instagram.com/..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Twitter/X"}),u.jsx("input",{type:"url",value:R,onChange:k=>j(k.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-brand-accent focus:border-transparent",placeholder:"https://twitter.com/..."})]})]})]}),u.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-700",children:[u.jsx(qe,{onClick:L,disabled:i||!w||!D||!F,className:"flex-1",children:i?"Saving...":"Save Changes"}),u.jsx(qe,{onClick:()=>r(`/profile/${c.id}`),variant:"secondary",children:"Cancel"})]})]})]}):u.jsx("div",{className:"text-center text-white py-20",children:u.jsx("p",{children:"Profile not found"})})},ZI=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0);T.useEffect(()=>{(async()=>{i(!0);const d=await Gw();e(d),i(!1)})()},[]);const o=c=>{e([c,...r])};return u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Community Hub"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Connect with fellow artists and fans. Share your thoughts, ask questions, and collaborate."}),u.jsx("div",{className:"mb-8",children:u.jsx(Yw,{onPostCreated:o})}),n?u.jsx(cn,{}):u.jsx("div",{className:"space-y-6",children:(r||[]).length>0?r.map(c=>u.jsx(Wg,{post:c},c.id)):u.jsx("div",{className:"text-center py-12",children:u.jsx("p",{className:"text-gray-400 text-lg",children:"No posts yet. Be the first to share something!"})})})]})},e4=()=>{const[r,e]=Qn.useState(!1),[n,i]=Qn.useState([]),[o,c]=Qn.useState(""),[d,g]=Qn.useState(null),p=Qn.useRef(null),y=()=>{var w;(w=p.current)==null||w.scrollIntoView({behavior:"smooth"})};Qn.useEffect(y,[n]),Qn.useEffect(()=>{(async()=>{const A=await Bw();A&&g({id:A.uid,name:A.displayName||"Anonymous",avatarUrl:A.photoURL||"https://api.dicebear.com/7.x/avataaars/svg?seed=default",bio:""})})()},[]),Qn.useEffect(()=>{i([{id:`msg_${Date.now()}`,user:{id:"system",name:"SoundWave",avatarUrl:"https://api.dicebear.com/7.x/shapes/svg?seed=soundwave"},text:"Welcome to the SoundWave global chat! Connect with artists, producers, and music lovers.",timestamp:new Date().toISOString()}])},[]);const _=async w=>{if(w.preventDefault(),!o.trim()||!d)return;const A={id:`msg_${Date.now()}`,user:{id:d.id,name:d.name,avatarUrl:d.avatarUrl},text:o,timestamp:new Date().toISOString()};i(D=>[...D,A]),c("")};return u.jsxs(u.Fragment,{children:[!r&&u.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-brand-accent hover:bg-brand-accent-hover text-white rounded-full p-4 shadow-lg z-50 transition-transform transform hover:scale-110","aria-label":"Open global chat",children:u.jsx(fe,{name:"chat-bubble",className:"w-8 h-8"})}),u.jsx("div",{className:`fixed bottom-0 right-0 h-full w-full sm:h-auto sm:w-96 bg-gray-800 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out ${r?"translate-x-0":"translate-x-full"}`,children:u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 border-b border-gray-600",children:[u.jsx("h3",{className:"font-bold text-white text-lg",children:"Global Chat"}),u.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white","aria-label":"Close global chat",children:u.jsx(fe,{name:"x",className:"w-6 h-6"})})]}),u.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[n.map(w=>u.jsxs("div",{className:`flex items-start gap-3 ${w.user.id===d.id?"flex-row-reverse":""}`,children:[u.jsx("img",{src:w.user.avatarUrl,alt:w.user.name,className:"w-8 h-8 rounded-full object-cover"}),u.jsxs("div",{className:`p-3 rounded-lg max-w-xs ${w.user.id===(d==null?void 0:d.id)?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[u.jsx("p",{className:"font-bold text-sm",children:w.user.name}),u.jsx("p",{className:"text-sm",children:w.text})]})]},w.id)),u.jsx("div",{ref:p})]})}),u.jsx("div",{className:"p-4 bg-gray-700 border-t border-gray-600",children:u.jsxs("form",{onSubmit:_,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:o,onChange:w=>c(w.target.value),placeholder:"Type a message...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-3 hover:bg-brand-accent-hover disabled:bg-gray-500",disabled:!o.trim(),children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z",clipRule:"evenodd"})})})]})})]})})]})},t4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0),[o,c]=T.useState(null);T.useEffect(()=>{(async()=>{i(!0);const p=await Jh();e(p),i(!1)})()},[]);const d=async g=>{if(o)try{const p=await yc(o.id,g),y={...o,comments:[...o.comments||[],p]};c(y),e(_=>_.map(w=>w.id===y.id?y:w))}catch(p){console.error("Failed to add comment:",p)}};return n?u.jsx(cn,{}):u.jsxs("div",{children:[o&&u.jsx(pa,{isOpen:!!o,onClose:()=>c(null),title:`Comments for ${o.title}`,comments:o.comments||[],onAddComment:d}),u.jsxs("section",{id:"global-library",children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Global Library"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Explore all tracks uploaded by the SoundWave community."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:r.map(g=>u.jsx(Zh,{track:g,onViewComments:c},g.id))})]})]})},n4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState([]),[o,c]=T.useState([]),[d,g]=T.useState(!0),[p,y]=T.useState(null),[_,w]=T.useState([]),[A,D]=T.useState(0),[V,F]=T.useState(""),[z,Y]=T.useState(!1),[te,J]=T.useState(null),se=T.useContext(jo);if(!se)throw new Error("PlaylistsPage must be used within an AudioProvider");const{playTrack:oe,currentTrack:ce,isPlaying:I,setOnTrackEnd:N}=se;T.useEffect(()=>{(async()=>{g(!0);const O=await Jh();e([]),c(O),i([]),g(!1)})()},[]);const R=Qn.useCallback(()=>{_.length!==0&&D(me=>{const O=(me+1)%_.length,W=_[O];return oe(W),j(W),O})},[_,oe]);T.useEffect(()=>(p&&N(()=>R),()=>{N(null)}),[p,N,R]);const j=me=>{Y(!0),F("");const O=[`This is fire! ${me.title} is bringing the heat!`,`Loving the vibes on ${me.title} by ${me.artistName}!`,`${me.artistName} never disappoints with tracks like ${me.title}!`,`Turn it up! ${me.title} is a certified banger!`,`Smooth sounds from ${me.artistName} - ${me.title} hits different!`],W=O[Math.floor(Math.random()*O.length)];F(W),Y(!1)},L=me=>{let O;me.artistId?O=o.filter(de=>de.artistId===me.artistId):O=o.filter(de=>de.tags.some(be=>me.tags.includes(be)));const W=O.sort(()=>.5-Math.random());w(W),y(me),D(0),W.length>0&&(oe(W[0]),j(W[0]))},k=()=>{y(null),w([])},C=async me=>{te&&console.log("Add comment to playlist:",me)},Ae=_[A];return d?u.jsx(cn,{}):p&&Ae?u.jsx(r4,{station:p,track:Ae,djCommentary:V,isGeneratingCommentary:z,isPlaying:I,onBack:k,onNext:R}):u.jsxs("div",{children:[te&&u.jsx(pa,{isOpen:!!te,onClose:()=>J(null),title:`Comments for ${te.title}`,comments:te.comments||[],onAddComment:C}),u.jsxs("section",{id:"my-playlists",className:"mb-16",children:[u.jsx("div",{className:"flex justify-between items-center mb-6",children:u.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Playlists"})}),n.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(me=>u.jsx(s4,{playlist:me,onViewComments:J},me.id))}):u.jsxs("div",{className:"text-center py-10 px-6 bg-gray-800 rounded-lg",children:[u.jsx(fe,{name:"playlist",className:"w-12 h-12 mx-auto text-gray-500 mb-4"}),u.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Playlists Yet"}),u.jsx("p",{className:"text-gray-400 mt-2",children:"You haven't created any playlists."})]})]}),u.jsxs("section",{id:"radio-stations",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Radio Stations"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Tune in to AI-powered radio stations based on genres, moods, and artists."}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(me=>u.jsxs("div",{className:"group relative rounded-lg overflow-hidden shadow-lg h-64",children:[u.jsx("img",{src:me.imageUrl,alt:me.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),u.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-end",children:[u.jsx("h3",{className:"text-2xl font-bold text-white",children:me.name}),u.jsx("p",{className:"text-gray-300 text-sm mb-4",children:me.description}),u.jsx("div",{className:"w-1/2",children:u.jsx(qe,{onClick:()=>L(me),children:"Tune In"})})]})]},me.id))})]})]})},s4=({playlist:r,onViewComments:e})=>{var n;return u.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg flex flex-col gap-4 transition-all duration-300 hover:bg-gray-700 hover:shadow-xl",children:[u.jsx("div",{className:"grid grid-cols-2 gap-1 w-full aspect-square rounded-md overflow-hidden bg-gray-900",children:r.tracks.slice(0,4).map(i=>u.jsx("img",{src:i.coverArtUrl,alt:"",className:"w-full h-full object-cover"},i.id))}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-white truncate",children:r.title}),u.jsxs("p",{className:"text-sm text-gray-400",children:[r.tracks.length," tracks"]}),u.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700 flex justify-between items-center",children:[u.jsxs("button",{onClick:()=>e(r),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors",children:[u.jsx(fe,{name:"comment",className:"w-4 h-4"}),u.jsx("span",{className:"text-xs font-semibold",children:((n=r.comments)==null?void 0:n.length)||0})]}),u.jsx(qe,{size:"sm",children:"Play"})]})]})]})},r4=({station:r,track:e,djCommentary:n,isGeneratingCommentary:i,isPlaying:o,onBack:c,onNext:d})=>u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-2xl",children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-400",children:"Now Playing on"}),u.jsx("h2",{className:"text-3xl font-bold text-white",children:r.name})]}),u.jsx(qe,{onClick:c,variant:"secondary",children:"Change Station"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[u.jsxs("div",{className:"relative w-full aspect-square rounded-lg overflow-hidden shadow-lg",children:[u.jsx("img",{src:e.coverArtUrl,alt:e.title,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center gap-1 opacity-40",children:Array.from({length:20}).map((g,p)=>u.jsx("div",{className:"audio-bar w-2 h-24 bg-white",style:{animationDelay:`${p*.1}s`,animationPlayState:o?"running":"paused"}},p))})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h3",{className:"text-4xl font-bold text-white",children:e.title}),u.jsx("p",{className:"text-xl text-gray-400 mb-6",children:e.artistName}),u.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm border border-gray-600 rounded-lg p-4 mt-6 relative",children:[u.jsx("div",{className:"absolute -top-3 left-8 w-6 h-6 bg-gray-700/50 border-t border-l border-gray-600 transform rotate-45",style:{clipPath:"polygon(0 0, 100% 0, 100% 100%)"}}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("img",{src:"https://i.pravatar.cc/150?u=dj_gemini",alt:"DJ Gemini",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-brand-accent",children:"SoundWave Radio"}),i?u.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}):u.jsxs("p",{className:"text-gray-300 italic",children:['"',n,'"']})]})]})]}),u.jsx("div",{className:"mt-8 flex items-center gap-4",children:u.jsxs(qe,{onClick:d,className:"w-full",children:[u.jsx(fe,{name:"next",className:"w-5 h-5 mr-2"}),"Next Track"]})})]})]})]})}),Ww=({room:r,onLeave:e})=>{const n=T.useRef(null),[i,o]=T.useState(null),[c,d]=T.useState(null),[g,p]=T.useState([]),[y,_]=T.useState(""),w=T.useRef(null),A={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};T.useEffect(()=>((async()=>{try{const F=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(F),n.current&&(n.current.srcObject=F)}catch(F){console.error("Error accessing media devices.",F),d("Could not access camera/microphone. Please check permissions.")}})(),()=>{i&&i.getTracks().forEach(F=>F.stop())}),[]),T.useEffect(()=>{const V=setInterval(()=>{const F=["This is fire!","Great stream!","Loving the vibes","Tune!"],z=F[Math.floor(Math.random()*F.length)],Y={id:`msg_${Date.now()}`,user:{id:`user_${Math.random()}`,name:"Viewer",avatarUrl:`https://i.pravatar.cc/150?u=${Math.random()}`},text:z,timestamp:new Date().toISOString()};p(te=>[...te,Y].slice(-10))},5e3+Math.random()*3e3);return()=>clearInterval(V)},[]),T.useEffect(()=>{var V;(V=w.current)==null||V.scrollIntoView({behavior:"smooth"})},[g]);const D=V=>{if(V.preventDefault(),!y.trim())return;const F={id:`msg_${Date.now()}`,user:A,text:y,timestamp:new Date().toISOString()};p(z=>[...z,F].slice(-10)),_("")};return u.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-90 z-50 flex flex-col items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-6xl h-full max-h-[90vh] flex flex-col md:flex-row overflow-hidden",onClick:V=>V.stopPropagation(),children:[u.jsxs("div",{className:"flex-grow bg-black relative flex items-center justify-center",children:[c?u.jsxs("div",{className:"text-center text-red-400 p-4",children:[u.jsx(fe,{name:"x",className:"w-12 h-12 mx-auto mb-2"}),u.jsx("p",{className:"font-semibold",children:"Stream Error"}),u.jsx("p",{children:c})]}):u.jsx("video",{ref:n,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute top-4 left-4 bg-black/50 p-2 rounded-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:r.host.avatarUrl,alt:r.host.name,className:"w-10 h-10 rounded-full"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white",children:r.name}),u.jsxs("p",{className:"text-sm text-gray-300",children:["Hosted by ",r.host.name]})]})]})}),u.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-md text-sm font-bold",children:[u.jsx(fe,{name:"rss",className:"w-4 h-4 animate-pulse"}),"LIVE"]}),u.jsxs("div",{className:"bg-black/50 text-white px-3 py-1 rounded-md text-sm",children:[r.viewers," watching"]})]})]}),u.jsxs("div",{className:"w-full md:w-80 lg:w-96 bg-gray-800 border-l border-gray-700 flex flex-col h-1/3 md:h-full",children:[u.jsx("div",{className:"p-4 border-b border-gray-700",children:u.jsx("h3",{className:"font-bold text-white",children:"Live Chat"})}),u.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[g.map(V=>u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("img",{src:V.user.avatarUrl,alt:V.user.name,className:"w-8 h-8 rounded-full"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-gray-300",children:V.user.name}),u.jsx("p",{className:"text-sm text-gray-400 bg-gray-700 px-3 py-1 rounded-lg",children:V.text})]})]},V.id)),u.jsx("div",{ref:w})]}),u.jsx("div",{className:"p-4 border-t border-gray-700",children:u.jsxs("form",{onSubmit:D,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:y,onChange:V=>_(V.target.value),placeholder:"Say something...",className:"flex-grow bg-gray-700 border-gray-600 rounded-full py-2 px-3 text-sm text-white focus:ring-brand-accent-hover focus:border-brand-accent-hover"}),u.jsx("button",{type:"submit",className:"bg-brand-accent p-2 rounded-full text-white hover:bg-brand-accent-hover",children:u.jsx(fe,{name:"send",className:"w-5 h-5"})})]})})]}),u.jsx(qe,{onClick:e,className:"absolute bottom-4 left-1/2 -translate-x-1/2",variant:"secondary",children:"Leave Stream"})]})})},W_=({track:r,onUpvote:e,onDownvote:n,onPreview:i,onViewComments:o,audioCtx:c,isNext:d=!1})=>{var A;if(!c)return null;const{currentTrack:g,isPlaying:p,isPreviewing:y}=c,_=(g==null?void 0:g.id)===r.id&&p&&y,w=r.isPremiere?"border-2 border-purple-500/50 shadow-lg shadow-purple-500/20":"";return u.jsxs("div",{className:`relative p-3 rounded-md flex items-center gap-4 transition-all ${d?"bg-gray-700/70":"bg-gray-700/40"} hover:bg-gray-600/50 ${w}`,children:[r.isPremiere&&u.jsxs("div",{className:"absolute -top-2.5 -right-2.5 bg-purple-600 text-white text-[10px] font-bold px-2 py-1 rounded-full flex items-center gap-1 transform rotate-[15deg] shadow-md z-10",children:[u.jsx(fe,{name:"crown",className:"w-3 h-3"}),"PREMIERE"]}),u.jsx("img",{src:r.coverArtUrl,alt:r.title,className:"w-12 h-12 rounded-md object-cover"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-semibold text-white",children:r.title}),u.jsx("p",{className:"text-sm text-gray-400",children:r.artistName})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>o(r),className:"p-3 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors flex items-center gap-1.5 text-xs","aria-label":`View comments for ${r.title}`,children:[u.jsx(fe,{name:"comment",className:"w-4 h-4"}),u.jsx("span",{children:((A=r.comments)==null?void 0:A.length)||0})]}),u.jsx("button",{onClick:()=>i(r),className:"p-3 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":`Preview ${r.title}`,children:u.jsx(fe,{name:_?"pause":"play",className:"w-5 h-5"})})]}),u.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[u.jsx("button",{onClick:()=>e(r.id),className:"p-2 bg-gray-600/50 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":"Upvote",children:u.jsx(fe,{name:"thumbs-up",className:"w-4 h-4"})}),u.jsx("span",{className:"font-bold text-white w-4 text-center",children:r.votes}),u.jsx("button",{onClick:()=>n(r.id),className:"p-2 bg-gray-600/50 rounded-full hover:bg-red-500 hover:text-white transition-colors","aria-label":"Downvote",children:u.jsx(fe,{name:"thumbs-down",className:"w-4 h-4"})})]})]})},i4=()=>{var me;const[r,e]=T.useState([]),[n,i]=T.useState([]),[o,c]=T.useState([]),[d,g]=T.useState([]),[p,y]=T.useState(!0),[_,w]=T.useState(null),[A,D]=T.useState(null),V=T.useContext(jo);if(!V)throw new Error("ArtistHubPage must be used within an AudioProvider");const{playTrack:F,currentTrack:z,isPlaying:Y,setOnTrackEnd:te,playPreview:J}=V,se=T.useMemo(()=>[...r].sort((O,W)=>W.votes-O.votes),[r]),oe=T.useMemo(()=>se.find(O=>O.id===(z==null?void 0:z.id))||se[0],[se,z]),ce=T.useMemo(()=>se.find(O=>O.id!==(oe==null?void 0:oe.id)),[se,oe]),I=T.useMemo(()=>se.filter(O=>O.id!==(oe==null?void 0:oe.id)&&O.id!==(ce==null?void 0:ce.id)),[se,oe,ce]),N=Qn.useCallback(()=>{ce&&F(ce)},[ce,F]);T.useEffect(()=>(te(()=>N),()=>te(null)),[te,N]),T.useEffect(()=>{(async()=>{y(!0);const[W,de]=await Promise.all([Jh(),LI()]);i([]),c(W),g(de);const be=W.slice(0,5).map((De,U)=>({...De,votes:Math.floor(Math.random()*5)+(5-U),addedBy:"DJ Gemini",isPremiere:!0}));e(be),y(!1),!z&&be.length>0&&F(be.sort((De,U)=>U.votes-De.votes)[0])})()},[]);const R=O=>{e(W=>W.map(de=>de.id===O?{...de,votes:de.votes+1}:de))},j=O=>{e(W=>W.map(be=>be.id===O?{...be,votes:be.votes-1}:be).filter(be=>be.id===(z==null?void 0:z.id)||be.votes>-3))},L=O=>{J(O)},k=()=>{if(o.length===0)return;const O=o.filter(W=>!r.some(de=>de.id===W.id));if(O.length>0){const de={...O[Math.floor(Math.random()*O.length)],votes:1,addedBy:"Sub-Tropical",isPremiere:!0};e(be=>[...be,de])}else alert("All tracks are already in the queue!")},C=()=>{w({id:"my_room",name:"Sub-Tropical's Studio Session",host:{id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""},viewers:1,isLive:!0})},Ae=async O=>{if(A)try{const W=await yc(A.id,O),de={...A,comments:[...A.comments||[],W]};D(de),e(be=>be.map(De=>De.id===de.id?de:De))}catch(W){console.error("Failed to add comment:",W)}};return p?u.jsx(cn,{}):_?u.jsx(Ww,{room:_,onLeave:()=>w(null)}):u.jsxs("div",{children:[A&&u.jsx(pa,{isOpen:!!A,onClose:()=>D(null),title:`Comments for ${A.title}`,comments:A.comments||[],onAddComment:Ae}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Artist Hub"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Collaborate on a live playlist and join live streams from artists."}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 bg-gray-800 rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Global Playlist"}),u.jsx(qe,{onClick:k,children:"Add Your Track"})]}),u.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2",children:[oe&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-brand-accent mb-2 uppercase tracking-wider",children:"Playing Now"}),u.jsxs("div",{className:`relative bg-gray-700/50 rounded-lg p-4 flex gap-4 items-center shadow-lg ${oe.isPremiere?"ring-2 ring-purple-500 shadow-purple-500/20":"ring-2 ring-brand-accent"}`,children:[oe.isPremiere&&u.jsxs("div",{className:"absolute -top-3 -right-3 bg-purple-600 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 transform rotate-[15deg] shadow-lg z-10",children:[u.jsx(fe,{name:"crown",className:"w-4 h-4"}),"PREMIERE"]}),u.jsx("img",{src:oe.coverArtUrl,alt:oe.title,className:"w-24 h-24 rounded-md object-cover"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("h4",{className:"text-2xl font-bold text-white",children:oe.title}),u.jsx("p",{className:"text-lg text-gray-300",children:oe.artistName}),u.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Added by ",oe.addedBy]}),u.jsxs(qe,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>D(oe),children:[u.jsx(fe,{name:"comment",className:"w-4 h-4 mr-2"}),((me=oe.comments)==null?void 0:me.length)||0," Comments"]})]}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("button",{onClick:()=>R(oe.id),className:"p-2 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":"Upvote",children:u.jsx(fe,{name:"thumbs-up",className:"w-5 h-5"})}),u.jsx("span",{className:"font-bold text-white text-xl",children:oe.votes}),u.jsx("button",{onClick:()=>j(oe.id),className:"p-2 bg-gray-600 rounded-full hover:bg-red-500 hover:text-white transition-colors","aria-label":"Downvote",children:u.jsx(fe,{name:"thumbs-down",className:"w-5 h-5"})})]})]})]}),ce&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-md font-semibold text-gray-400 mb-2 uppercase tracking-wider",children:"Playing Next"}),u.jsx(W_,{track:ce,onUpvote:R,onDownvote:j,onPreview:L,onViewComments:D,audioCtx:V,isNext:!0})]}),I.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-md font-semibold text-gray-400 mb-2 border-t border-gray-700 pt-4 uppercase tracking-wider",children:"Queue"}),u.jsx("div",{className:"space-y-3",children:I.map(O=>u.jsx(W_,{track:O,onUpvote:R,onDownvote:j,onPreview:L,onViewComments:D,audioCtx:V},O.id))})]})]})]}),u.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Live Rooms"}),u.jsxs(qe,{onClick:C,variant:"secondary",children:[u.jsx(fe,{name:"video-camera",className:"w-5 h-5 mr-2"}),"Go Live"]})]}),u.jsx("div",{className:"space-y-4",children:n.map(O=>u.jsxs("div",{className:"bg-gray-700 p-3 rounded-md flex items-center gap-4",children:[u.jsx("img",{src:O.host.avatarUrl,alt:O.host.name,className:"w-12 h-12 rounded-full object-cover"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-semibold text-white",children:O.name}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),u.jsxs("span",{children:[O.viewers," watching"]})]})]}),u.jsx(qe,{onClick:()=>w(O),children:"Join"})]},O.id))})]}),u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Community Playlists"}),u.jsx("div",{className:"space-y-4",children:d.map(O=>u.jsxs("div",{className:"bg-gray-700 p-3 rounded-md flex items-center gap-4 transition-colors hover:bg-gray-600/50",children:[u.jsx("div",{className:"grid grid-cols-2 gap-0.5 w-16 h-16 flex-shrink-0 rounded-md overflow-hidden bg-gray-900",children:O.tracks.slice(0,4).map(W=>u.jsx("img",{src:W.coverArtUrl,alt:"",className:"w-full h-full object-cover"},W.id))}),u.jsxs("div",{className:"flex-grow overflow-hidden",children:[u.jsx("p",{className:"font-semibold text-white truncate",children:O.title}),u.jsxs("p",{className:"text-sm text-gray-400",children:["by ",O.curator.name]})]}),u.jsx(qe,{onClick:()=>alert(`Now playing ${O.title}`),size:"sm",children:"Listen"})]},O.id))})]})]})]})]})},a4=({room:r,onJoin:e})=>u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative h-48 w-full bg-gray-900 flex items-center justify-center",children:[u.jsx("img",{src:r.host.avatarUrl,alt:r.host.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-700 transition-transform duration-300 group-hover:scale-110"}),u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-md text-xs font-bold shadow-md",children:[u.jsx(fe,{name:"rss",className:"w-3 h-3 animate-pulse"}),"LIVE"]}),u.jsxs("div",{className:"absolute bottom-3 left-3 bg-black/50 text-white px-3 py-1 rounded-md text-xs",children:[r.viewers," watching"]})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-white truncate",children:r.name}),u.jsxs("p",{className:"text-sm text-gray-400",children:["Hosted by ",r.host.name]}),u.jsx("div",{className:"flex-grow mt-4",children:u.jsx(qe,{onClick:()=>e(r),className:"w-full",children:"Join Stream"})})]})]}),o4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0),[o,c]=T.useState(null);return T.useEffect(()=>{(async()=>{i(!0);const g=await RI();e(g),i(!1)})()},[]),n?u.jsx(cn,{}):o?u.jsx(Ww,{room:o,onLeave:()=>c(null)}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Live Streams"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Join live sessions from artists around the world. Watch performances, get feedback, or learn new skills."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:r.map(d=>u.jsx(a4,{room:d,onJoin:c},d.id))})]})},l4=({tutorial:r})=>{var g;const[e,n]=T.useState(r),[i,o]=T.useState(!1),c=()=>{switch(e.difficulty){case"Beginner":return"bg-green-500/20 text-green-300 border-green-500/30";case"Intermediate":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"Advanced":return"bg-red-500/20 text-red-300 border-red-500/30"}},d=async p=>{try{const y=await AI(e.id,p);n(_=>({..._,comments:[..._.comments||[],y]}))}catch(y){console.error("Failed to add comment:",y)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:e.thumbnailUrl,alt:`${e.title} thumbnail`,className:"w-full h-40 object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:u.jsx(fe,{name:"play",className:"h-8 w-8 text-white"})})}),u.jsx("span",{className:"absolute bottom-2 right-2 text-xs font-semibold bg-gray-900/80 text-white px-2 py-1 rounded",children:e.duration}),u.jsx("span",{className:`absolute top-2 left-2 text-xs font-semibold px-2 py-1 rounded-full border ${c()}`,children:e.difficulty})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-md text-white truncate",children:e.title}),u.jsx(Ut,{to:`/profile/${e.instructor.id}`,className:"text-sm text-gray-400 hover:text-white hover:underline",children:e.instructor.name}),u.jsx("div",{className:"flex-grow mt-2",children:u.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(p=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:p},p))})}),u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:u.jsxs("button",{onClick:()=>o(!i),className:"w-full text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 py-1.5 rounded-md flex items-center justify-center gap-1.5 transition-colors",children:[u.jsx(fe,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:[((g=e.comments)==null?void 0:g.length)||0," Comments"]})]})})]}),i&&u.jsx("div",{className:"p-4 border-t border-gray-700",children:u.jsx(ga,{comments:e.comments||[],onAddComment:d})})]})},c4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0);return T.useEffect(()=>{(async()=>{i(!0);const c=await OI();e(c),i(!1)})()},[]),n?u.jsx(cn,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Tutorials"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Learn new skills and production techniques from talented artists in the community."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:r.map(o=>u.jsx(l4,{tutorial:o},o.id))})]})},u4=({masterclass:r})=>{const[e,n]=T.useState(r),i=async o=>{try{const c=await EI(e.id,o);n(d=>({...d,comments:[...d.comments||[],c]}))}catch(c){console.error("Failed to add comment:",c)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl transition-colors hover:bg-gray-700/50",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 p-8",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("img",{src:e.coverArtUrl,alt:e.title,className:"w-full md:w-64 h-auto rounded-lg object-cover shadow-lg"})}),u.jsxs("div",{className:"flex flex-col items-start text-center md:text-left",children:[u.jsx("h2",{className:"text-3xl font-bold text-white",children:e.title}),u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-gray-400",children:[u.jsx("img",{src:e.instructor.avatarUrl,alt:e.instructor.name,className:"w-6 h-6 rounded-full"}),u.jsxs("span",{children:["with ",e.instructor.name]})]}),u.jsx("p",{className:"text-gray-300 my-4 max-w-lg",children:e.description}),u.jsx("div",{className:"flex items-center gap-6 text-gray-300 text-sm mb-6",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(fe,{name:"book-open",className:"w-5 h-5 text-brand-accent"}),u.jsxs("span",{children:[e.durationHours," hours of content"]})]})}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(qe,{children:["Enroll for $",e.price.toFixed(2)]}),u.jsx(qe,{variant:"secondary",children:"Learn More"})]})]})]}),u.jsxs("div",{className:"p-8 border-t border-gray-700",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Community Discussion"}),u.jsx(ga,{comments:e.comments||[],onAddComment:i})]})]})},h4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0);return T.useEffect(()=>{(async()=>{i(!0);const c=await MI();e(c),i(!1)})()},[]),n?u.jsx(cn,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Masterclasses"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Take a deep dive with exclusive, in-depth courses from top-tier artists and producers."}),u.jsx("div",{className:"space-y-8",children:r.map(o=>u.jsx(u4,{masterclass:o},o.id))})]})},d4=({pack:r})=>{var g;const[e,n]=T.useState(r),[i,o]=T.useState(!1),c=e.price===0,d=async p=>{try{const y=await TI(e.id,p);n(_=>({..._,comments:[..._.comments||[],y]}))}catch(y){console.error("Failed to add comment:",y)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:e.coverArtUrl,alt:`${e.title} cover art`,className:"w-full h-48 object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:u.jsx(fe,{name:"play",className:"h-8 w-8 text-white"})})}),u.jsx("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full border ${c?"bg-green-500/20 text-green-300 border-green-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`,children:c?"Free":`$${e.price.toFixed(2)}`})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-white truncate",children:e.title}),u.jsxs(Ut,{to:`/profile/${e.creator.id}`,className:"text-sm text-gray-400 hover:text-white hover:underline",children:["by ",e.creator.name]}),u.jsx("div",{className:"flex-grow mt-2",children:u.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(p=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:p},p))})}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 space-y-3",children:[u.jsxs("button",{className:"w-full bg-brand-accent text-white px-4 py-2 rounded-full text-sm font-semibold hover:bg-brand-accent-hover transition-colors flex items-center justify-center gap-2",children:[u.jsx(fe,{name:"download",className:"w-4 h-4"}),u.jsx("span",{children:c?"Download":"Purchase"})]}),u.jsxs("button",{onClick:()=>o(!i),className:"w-full bg-gray-700 text-gray-300 px-4 py-2 rounded-full text-sm font-semibold hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",children:[u.jsx(fe,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:[((g=e.comments)==null?void 0:g.length)||0," Comments"]})]})]})]}),i&&u.jsx("div",{className:"p-4 border-t border-gray-700",children:u.jsx(ga,{comments:e.comments||[],onAddComment:d})})]})},f4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0);return T.useEffect(()=>{(async()=>{i(!0);const c=await kI();e(c),i(!1)})()},[]),n?u.jsx(cn,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sample Packs"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Find the perfect sound for your next track. High-quality, royalty-free samples from the community."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:r.map(o=>u.jsx(d4,{pack:o},o.id))})]})},m4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!1),[o,c]=T.useState(null),[d,g]=T.useState(null),p=Ih(),y=se=>{try{const ce=new DOMParser().parseFromString(se,"application/xml");if(ce.querySelector("parsererror"))throw new Error("Failed to parse XML file. Please ensure it's a valid Rekordbox XML.");const N=ce.querySelectorAll("COLLECTION > TRACK");if(N.length===0)throw new Error("No tracks found in the <COLLECTION> tag. Please check your XML file structure.");const R=Array.from(N).map(j=>({trackId:j.getAttribute("TrackID")||"",title:j.getAttribute("Name")||"N/A",artist:j.getAttribute("Artist")||"N/A",album:j.getAttribute("Album")||"N/A",genre:j.getAttribute("Genre")||"N/A",totalTime:j.getAttribute("TotalTime")||"N/A",dateAdded:j.getAttribute("DateAdded")||"N/A",comments:j.getAttribute("Comments")||"",playCount:j.getAttribute("PlayCount")||"0",key:j.getAttribute("Tonality")||"N/A"}));p("/profile/user_1",{state:{collection:R}})}catch(oe){c(oe.message||"An unknown error occurred during parsing."),e([])}finally{i(!1)}},_=T.useCallback(se=>{if(se.length===0)return;const oe=se[0];if(oe.type!=="text/xml"){c("Invalid file type. Please upload a Rekordbox XML file.");return}i(!0),c(null),e([]),g(oe.name);const ce=new FileReader;ce.onabort=()=>{c("File reading was aborted."),i(!1)},ce.onerror=()=>{c("File reading has failed."),i(!1)},ce.onload=()=>{const I=ce.result;y(I)},ce.readAsText(oe)},[]),[w,A]=T.useState(!1),D=Qn.useRef(null),V=se=>{se.preventDefault(),se.stopPropagation(),A(!0)},F=se=>{se.preventDefault(),se.stopPropagation(),A(!1)},z=se=>{se.preventDefault(),se.stopPropagation()},Y=se=>{se.preventDefault(),se.stopPropagation(),A(!1),se.dataTransfer.files&&se.dataTransfer.files.length>0&&(_(Array.from(se.dataTransfer.files)),se.dataTransfer.clearData())},te=se=>{se.target.files&&se.target.files.length>0&&_(Array.from(se.target.files))},J=()=>{var se;(se=D.current)==null||se.click()};return u.jsxs("div",{className:"max-w-7xl mx-auto text-white",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Import Rekordbox Collection"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Upload your Rekordbox XML file to view and manage your music library."}),u.jsxs("div",{role:"button",tabIndex:0,"aria-label":"Upload Rekordbox XML file",className:`bg-gray-800 p-8 rounded-lg shadow-lg border-2 border-dashed ${w?"border-brand-accent":"border-gray-600"} transition-colors duration-300 text-center cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-accent`,onDragEnter:V,onDragLeave:F,onDragOver:z,onDrop:Y,onClick:J,onKeyDown:se=>(se.key==="Enter"||se.key===" ")&&J(),children:[u.jsx("input",{ref:D,type:"file",accept:".xml,text/xml",onChange:te,className:"hidden"}),u.jsx(fe,{name:"upload",className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),u.jsx("h2",{className:"text-xl font-semibold",children:n?"Processing...":d?`File: ${d}`:"Drop your Rekordbox XML here or click to browse"}),u.jsx("p",{className:"text-gray-500 mt-1",children:"Export your collection from Rekordbox as an XML file."})]}),n&&u.jsx(cn,{}),o&&u.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative my-6",role:"alert",children:[u.jsx("strong",{className:"font-bold",children:"Error:"}),u.jsxs("span",{className:"block sm:inline",children:[" ",o]})]}),r.length>0&&!n&&u.jsxs("div",{className:"mt-8 text-center",children:[u.jsxs("h2",{className:"text-xl font-semibold text-green-400",children:["Successfully processed ",r.length," tracks."]}),u.jsx("p",{className:"text-gray-400",children:"Redirecting you to your profile..."})]})]})},g4=({label:r})=>u.jsxs(Ut,{to:`/labels/${r.id}`,className:"group block bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:scale-105",children:[u.jsxs("div",{className:"relative h-40",children:[u.jsx("img",{src:r.bannerUrl,alt:`${r.name} banner`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-800 via-gray-800/50 to-transparent"})]}),u.jsxs("div",{className:"p-4 -mt-16 relative flex items-center space-x-4",children:[u.jsx("img",{src:r.logoUrl,alt:`${r.name} logo`,className:"w-20 h-20 rounded-full object-cover border-4 border-gray-800 group-hover:border-gray-700 transition-colors"}),u.jsx("div",{children:u.jsx("h3",{className:"font-bold text-xl text-white",children:r.name})})]})]}),p4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(!0);return T.useEffect(()=>{(async()=>{i(!0);const c=await gI();e(c),i(!1)})()},[]),n?u.jsx(cn,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Record Labels"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Discover the labels shaping the sound of the community."}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:(r||[]).length>0?r.map(o=>u.jsx(g4,{label:o},o.id)):u.jsx("div",{className:"col-span-full text-center py-12",children:u.jsx("p",{className:"text-gray-400 text-lg",children:"No labels found. Check back later!"})})})]})},y4=({event:r})=>{const e=new Date(r.date),n=e.toLocaleString("default",{month:"short"}).toUpperCase(),i=e.getDate();return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 flex flex-col sm:flex-row items-start gap-6 transition-colors hover:bg-gray-700/50",children:[u.jsxs("div",{className:"flex-shrink-0 text-center bg-gray-700 rounded-md p-3 w-full sm:w-20",children:[u.jsx("p",{className:"text-sm font-bold text-brand-accent",children:n}),u.jsx("p",{className:"text-3xl font-bold text-white",children:i})]}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:r.title}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mt-1",children:[u.jsx(fe,{name:"map-pin",className:"w-4 h-4"}),u.jsx("span",{children:r.location})]}),u.jsx("p",{className:"text-gray-300 mt-2",children:r.description})]}),r.ticketUrl&&u.jsx("div",{className:"self-center sm:self-auto",children:u.jsx("a",{href:r.ticketUrl,target:"_blank",rel:"noopener noreferrer",children:u.jsx(qe,{children:"Buy Tickets"})})})]})},v4=({track:r,onViewComments:e})=>{var p;const n=T.useContext(jo);if(!n)throw new Error("FeaturedReleaseCard must be used within an AudioProvider");const{playTrack:i,currentTrack:o,isPlaying:c}=n,d=(o==null?void 0:o.id)===r.id&&c,g=()=>{i(r)};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col md:flex-row",children:[u.jsx("div",{className:"md:w-1/3 flex-shrink-0",children:u.jsx("img",{src:r.coverArtUrl,alt:r.title,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"p-8 flex flex-col justify-center",children:[u.jsx("h3",{className:"text-3xl lg:text-4xl font-bold text-white",children:r.title}),u.jsxs("p",{className:"text-xl text-gray-400 mt-1 mb-4",children:["by ",r.artistName]}),u.jsx("p",{className:"text-gray-300 max-w-prose mb-6",children:r.description}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(qe,{onClick:g,size:"md",children:[u.jsx(fe,{name:d?"pause":"play",className:"w-5 h-5 mr-2"}),d?"Pause":"Play"]}),u.jsx(qe,{variant:"secondary",children:"View Release"}),e&&u.jsxs("button",{onClick:()=>e(r),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[u.jsx(fe,{name:"comment",className:"w-5 h-5"}),u.jsx("span",{className:"font-semibold",children:((p=r.comments)==null?void 0:p.length)||0})]})]})]})]})},_4=({artist:r,tracks:e,onViewMore:n})=>u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col md:flex-row items-center p-6 gap-6",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("img",{src:r.avatarUrl,alt:r.name,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-700"})}),u.jsxs("div",{className:"flex-grow w-full",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-white",children:r.name}),u.jsx("p",{className:"text-gray-400 mt-1 max-w-md line-clamp-2",children:r.bio})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0 mt-2 sm:mt-0",children:[u.jsx(qe,{onClick:n,variant:"secondary",size:"sm",children:"View More"}),u.jsx(Ut,{to:`/profile/${r.id}`,children:u.jsx(qe,{variant:"secondary",size:"sm",children:"Profile"})})]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[u.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Latest on this label:"}),e.length>0?u.jsx("div",{className:"space-y-2",children:e.map(i=>u.jsxs("div",{className:"flex items-center justify-between bg-gray-700/50 p-2 rounded-md",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(fe,{name:"music-note",className:"w-4 h-4 text-brand-accent"}),u.jsx("span",{className:"text-white text-sm",children:i.title})]}),u.jsx("span",{className:"text-xs text-gray-400",children:i.category})]},i.id))}):u.jsx("p",{className:"text-sm text-gray-500",children:"No tracks found on this label."})]})]})]}),x4=({artist:r,onClose:e})=>{var n;return u.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:e,children:u.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col overflow-hidden relative",onClick:i=>i.stopPropagation(),children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-20 bg-gray-900/50 p-2 rounded-full",children:u.jsx(fe,{name:"x",className:"w-6 h-6"})}),u.jsxs("div",{className:"relative h-64 w-full flex-shrink-0",children:[u.jsx("img",{src:((n=r.gallery)==null?void 0:n[0])||r.avatarUrl,alt:`${r.name}`,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-800 to-transparent flex items-end p-8",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("img",{src:r.avatarUrl,alt:r.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-800"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-300",children:"In Conversation with"}),u.jsx("h1",{className:"text-4xl font-bold text-white",children:r.name})]})]})})]}),u.jsx("div",{className:"flex-grow overflow-y-auto p-8",children:u.jsxs("div",{className:"prose prose-invert prose-lg max-w-none",children:[u.jsx("p",{className:"lead text-xl text-gray-300",children:r.bio}),r.interview&&r.interview.length>0&&u.jsx("div",{className:"mt-12",children:r.interview.map((i,o)=>u.jsxs("div",{className:"mb-8",children:[u.jsx("h3",{className:"text-brand-accent font-semibold",children:i.question}),u.jsx("p",{children:i.answer})]},o))}),r.gallery&&r.gallery.length>1&&u.jsxs("div",{className:"mt-12",children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Gallery"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:r.gallery.map((i,o)=>u.jsx("img",{src:i,alt:`Artist gallery image ${o+1}`,className:"w-full h-40 object-cover rounded-lg shadow-md"},o))})]})]})})]})})},b4=({opportunity:r,labelId:e})=>{var y,_;const[n,i]=T.useState(r),[o,c]=T.useState(!1),g={Artist:{icon:"music-note",color:"text-blue-400"},Vocalist:{icon:"microphone",color:"text-purple-400"},Designer:{icon:"palette",color:"text-yellow-400"},Collaborator:{icon:"users",color:"text-green-400"}}[n.type]||{icon:"sparkles",color:"text-gray-400"},p=async w=>{try{const A=await SI(e,n.id,w);i(D=>({...D,comments:[...D.comments||[],A]}))}catch(A){console.error("Failed to add comment:",A)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 transition-colors hover:bg-gray-700/50",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[u.jsx("div",{className:"flex-shrink-0 bg-gray-700 p-4 rounded-full",children:u.jsx(fe,{name:g.icon,className:`w-8 h-8 ${g.color}`})}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("span",{className:`text-sm font-bold uppercase tracking-wider ${g.color}`,children:n.type}),u.jsx("h3",{className:"text-xl font-bold text-white mt-1",children:n.title}),u.jsx("p",{className:"text-gray-300 mt-2",children:n.description})]}),u.jsx("div",{className:"self-center sm:self-auto flex-shrink-0",children:u.jsx(qe,{onClick:()=>alert("Application form coming soon!"),children:"Apply Now"})})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[u.jsxs("button",{onClick:()=>c(w=>!w),className:"text-sm font-semibold text-gray-400 hover:text-white flex items-center gap-2",children:[u.jsx(fe,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:[o?"Hide":"View"," ",((y=n.comments)==null?void 0:y.length)||0," Comment",((_=n.comments)==null?void 0:_.length)!==1&&"s"]})]}),o&&u.jsx("div",{className:"mt-4",children:u.jsx(ga,{comments:n.comments||[],onAddComment:p})})]})]})},J_=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(""),[o,c]=T.useState([]),d=T.useRef(null),g={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};T.useEffect(()=>{Fw().then(c)},[]),T.useEffect(()=>{if(o.length===0)return;const y=Kw(),_=o.filter(A=>A.id!==g.id);_.length>0&&e([{id:`msg_label_${Date.now()}`,user:_[0],text:"This label is legendary!",timestamp:new Date(Date.now()-5e3).toISOString()}]);const w=setInterval(()=>{if(document.hidden)return;const A=_[Math.floor(Math.random()*_.length)],D=y[Math.floor(Math.random()*y.length)],V={id:`msg_label_${Date.now()}`,user:A,text:D,timestamp:new Date().toISOString()};e(F=>[...F,V].slice(-20))},1e4);return()=>clearInterval(w)},[o]),T.useEffect(()=>{var y;(y=d.current)==null||y.scrollIntoView({behavior:"smooth"})},[r]);const p=y=>{if(y.preventDefault(),!n.trim())return;const _={id:`msg_label_${Date.now()}`,user:g,text:n,timestamp:new Date().toISOString()};e(w=>[...w,_]),i("")};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[400px]",children:[u.jsx("h3",{className:"text-xl font-bold text-white p-4 border-b border-gray-700",children:"Community Chat"}),u.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[r.map(y=>u.jsxs("div",{className:`flex items-start gap-3 ${y.user.id===g.id?"flex-row-reverse":""}`,children:[u.jsx("img",{src:y.user.avatarUrl,alt:y.user.name,className:"w-8 h-8 rounded-full object-cover"}),u.jsxs("div",{className:`p-3 rounded-lg max-w-sm shadow ${y.user.id===g.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[u.jsx("p",{className:"font-bold text-sm mb-1",children:y.user.name}),u.jsx("p",{className:"text-sm",children:y.text})]})]},y.id)),u.jsx("div",{ref:d})]})}),u.jsx("div",{className:"p-4 bg-gray-700/50 border-t border-gray-700",children:u.jsxs("form",{onSubmit:p,className:"flex gap-3 items-center",children:[u.jsx("input",{type:"text",value:n,onChange:y=>i(y.target.value),placeholder:"Join the conversation...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-2 hover:bg-brand-accent-hover disabled:bg-gray-500 transition-colors",disabled:!n.trim(),children:u.jsx(fe,{name:"send",className:"w-5 h-5"})})]})})]})},w4=()=>{const[r,e]=T.useState(""),[n,i]=T.useState(!1),[o,c]=T.useState(!1),d=g=>{g.preventDefault(),r&&(i(!0),setTimeout(()=>{i(!1),c(!0)},1e3))};return o?u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 text-center",children:[u.jsx("div",{className:"bg-green-500/20 text-green-300 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:u.jsx(fe,{name:"thumbs-up",className:"w-8 h-8"})}),u.jsx("h3",{className:"text-xl font-bold text-white",children:"You're Subscribed!"}),u.jsx("p",{className:"text-gray-400 mt-2",children:"Thanks for joining our mailing list. Keep an eye on your inbox for exclusive content."})]}):u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Join the Mailing List"}),u.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"Get exclusive downloads, event news, and special offers directly in your inbox."}),u.jsxs("form",{onSubmit:d,className:"space-y-3",children:[u.jsx("input",{type:"email",value:r,onChange:g=>e(g.target.value),placeholder:"Enter your email",required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white"}),u.jsx(qe,{type:"submit",isLoading:n,className:"w-full",children:"Subscribe"})]})]})},E4=()=>{var Ae;const{labelId:r}=cx(),[e,n]=T.useState(null),[i,o]=T.useState([]),[c,d]=T.useState([]),[g,p]=T.useState([]),[y,_]=T.useState([]),[w,A]=T.useState(!0),[D,V]=T.useState("releases"),[F,z]=T.useState(!1),[Y,te]=T.useState(null),[J,se]=T.useState(null),[oe,ce]=T.useState(null);T.useEffect(()=>{(async()=>{if(r){A(!0);try{const[O,W,de,be,De]=await Promise.all([pI(r),yI(r),vI(r),_I(r),xI(r)]);n(O||null),o(W),d(de),p(be),_(De),O!=null&&O.theme&&te(O.theme)}catch(O){console.error("Failed to fetch label data:",O)}finally{A(!1)}}})()},[r]);const I=()=>{if(!e)return;z(!0);const me=[{bannerUrl:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=1200",primaryColor:"#8B5CF6",secondaryColor:"#EC4899"},{bannerUrl:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=1200",primaryColor:"#3B82F6",secondaryColor:"#10B981"},{bannerUrl:"https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1200",primaryColor:"#F59E0B",secondaryColor:"#EF4444"}],O=me[Math.floor(Math.random()*me.length)];te(O),z(!1)},N=async me=>{if(oe)try{const O=await yc(oe.id,me),W={...oe,comments:[...oe.comments||[],O]};ce(W),o(de=>de.map(be=>be.id===W.id?W:be))}catch(O){console.error("Failed to add comment to track:",O)}},R=async me=>{if(e)try{const O=await bI(e.id,me);n(W=>W?{...W,comments:[...W.comments||[],O]}:null)}catch(O){console.error("Failed to add comment to label:",O)}},j=e!=null&&e.featuredReleaseId?i.find(me=>me.id===e.featuredReleaseId):null,L=e!=null&&e.featuredReleaseId?i.filter(me=>me.id!==e.featuredReleaseId):i,k=()=>{var me;switch(D){case"releases":return u.jsxs("div",{children:[j&&u.jsxs("div",{className:"mb-12",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-wider",children:"Featured Release"}),u.jsx(v4,{track:j,onViewComments:ce})]}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-wider",children:"All Releases"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:L.map(O=>u.jsx(Zh,{track:O,onViewComments:ce},O.id))})]});case"artists":return u.jsx("div",{className:"space-y-8",children:c.map(O=>u.jsx(_4,{artist:O,tracks:i.filter(W=>W.artistId===O.id).slice(0,3),onViewMore:()=>se(O)},O.id))});case"about":return u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Our Story"}),u.jsx("p",{className:"text-gray-300 whitespace-pre-line leading-relaxed",children:e==null?void 0:e.bio})]}),u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Community Feedback"}),u.jsx(ga,{comments:(e==null?void 0:e.comments)||[],onAddComment:R})]}),(e==null?void 0:e.eventPhotos)&&e.eventPhotos.length>0&&u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Event Photos"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:e.eventPhotos.map((O,W)=>u.jsx("img",{src:O,alt:`Label event photo ${W+1}`,className:"w-full h-40 object-cover rounded-md shadow-lg"},W))})]})]}),u.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[u.jsx(w4,{}),(e==null?void 0:e.storeLinks)&&u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Stores"}),u.jsx("div",{className:"space-y-3",children:e.storeLinks.map(O=>u.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 p-4 rounded-lg flex items-center gap-4 hover:bg-gray-600 transition-colors",children:[u.jsx(fe,{name:O.icon,className:"w-6 h-6 text-brand-accent"}),u.jsx("span",{className:"font-bold text-white",children:O.name})]},O.name))})]})]})]});case"posts":return u.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:g.map(O=>u.jsx(Wg,{post:O},O.id))});case"events":return u.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:y.map(O=>u.jsx(y4,{event:O},O.id))});case"opportunities":return u.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:(me=e==null?void 0:e.opportunities)==null?void 0:me.map(O=>u.jsx(b4,{opportunity:O,labelId:e.id},O.id))});case"chat":return u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsx(J_,{})});default:return null}},C=({tab:me,label:O,count:W})=>u.jsxs("button",{onClick:()=>V(me),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors border-b-2 whitespace-nowrap ${D===me?"text-white border-brand-accent bg-gray-700/50":"text-gray-400 border-transparent hover:text-white hover:border-gray-500"}`,children:[O,typeof W<"u"&&W>0&&u.jsx("span",{className:"text-xs bg-gray-600 rounded-full px-2 py-0.5 ml-1",children:W})]});return w?u.jsx(cn,{}):e?u.jsxs("div",{children:[oe&&u.jsx(pa,{isOpen:!!oe,onClose:()=>ce(null),title:`Comments for ${oe.title}`,comments:oe.comments||[],onAddComment:N}),J&&u.jsx(x4,{artist:J,onClose:()=>se(null)}),u.jsxs("div",{className:"relative h-48 md:h-64 bg-gray-800 rounded-lg overflow-hidden mb-[-80px]",children:[u.jsx("img",{src:(Y==null?void 0:Y.bannerUrl)||e.bannerUrl,alt:`${e.name} banner`,className:"w-full h-full object-cover opacity-40 transition-all duration-500"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"})]}),u.jsx("div",{className:"relative px-8",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6",children:[u.jsx("img",{src:e.logoUrl,alt:`${e.name} logo`,className:"w-40 h-40 rounded-full object-cover border-4 border-gray-900 flex-shrink-0"}),u.jsx("div",{className:"flex-grow text-center md:text-left",children:u.jsx("h1",{className:"text-4xl font-bold text-white",children:e.name})}),u.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[u.jsx(qe,{onClick:()=>alert("Contact form coming soon!"),variant:"secondary",children:"Contact"}),u.jsx(qe,{onClick:I,variant:"secondary",children:"Change Theme"}),u.jsx(qe,{children:"Follow Label"})]})]})}),u.jsx("div",{className:"my-8 max-w-5xl mx-auto",children:u.jsx(J_,{})}),u.jsx("div",{className:"mt-8 border-b border-gray-700 mb-6",children:u.jsxs("nav",{className:"-mb-px flex space-x-4 overflow-x-auto",children:[u.jsx(C,{tab:"releases",label:"Releases",count:i.length}),u.jsx(C,{tab:"artists",label:"Artists",count:c.length}),u.jsx(C,{tab:"about",label:"About"}),u.jsx(C,{tab:"events",label:"Events",count:y.length}),u.jsx(C,{tab:"opportunities",label:"Opportunities",count:(Ae=e.opportunities)==null?void 0:Ae.length}),u.jsx(C,{tab:"chat",label:"Live Chat"}),u.jsx(C,{tab:"posts",label:"Posts",count:g.length})]})}),u.jsx("div",{children:k()})]}):u.jsx("div",{className:"text-center text-white",children:"Label not found."})},T4=({onPostCreated:r})=>{const[e,n]=T.useState(!1),[i,o]=T.useState(""),[c,d]=T.useState(""),[g,p]=T.useState("followers"),y=async _=>{if(_.preventDefault(),!i.trim()||!c.trim())return;n(!0);const w={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100"};try{const A=await $w({title:i,content:c,audience:g,...w});r(A),o(""),d(""),p("followers")}catch(A){console.error("Failed to add post:",A)}finally{n(!1)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-2xl h-full",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Make a Broadcast"}),u.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Create a post to share with your audience. This will appear in their community feed."}),u.jsxs("form",{onSubmit:y,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"broadcast-title",className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),u.jsx("input",{id:"broadcast-title",type:"text",placeholder:"e.g. New Track Out Sunday!",value:i,onChange:_=>o(_.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"broadcast-content",className:"block text-sm font-medium text-gray-400 mb-1",children:"Message"}),u.jsx("textarea",{id:"broadcast-content",placeholder:"Share some details with your fans...",value:c,onChange:_=>d(_.target.value),required:!0,rows:5,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"broadcast-audience",className:"block text-sm font-medium text-gray-400 mb-1",children:"Audience"}),u.jsxs("select",{id:"broadcast-audience",value:g,onChange:_=>p(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white",children:[u.jsx("option",{value:"followers",children:"All Followers"}),u.jsx("option",{value:"subscribers",children:"Paid Subscribers"}),u.jsx("option",{value:"public",children:"Public"})]})]}),u.jsx("div",{className:"flex justify-end pt-2",children:u.jsxs(qe,{type:"submit",isLoading:e,children:[u.jsx(fe,{name:"send",className:"w-4 h-4 mr-2"}),"Broadcast Post"]})})]})]})},S4=()=>{const[r,e]=T.useState([]),[n,i]=T.useState(null),[o,c]=T.useState(!0),[d,g]=T.useState(""),p=T.useRef(null),y="user_1";T.useEffect(()=>{(async()=>{c(!0);const F=await CI(y);e(F),F.length>0&&i(F[0]),c(!1)})()},[]),T.useEffect(()=>{var V;(V=p.current)==null||V.scrollIntoView({behavior:"smooth"})},[n,n==null?void 0:n.messages.length]);const _=V=>{if(V.preventDefault(),!d.trim()||!n)return;const F={id:`msg_${Date.now()}`,senderId:y,text:d,timestamp:new Date().toISOString()},z={...n,messages:[...n.messages,F]};i(z),e(Y=>Y.map(te=>te.id===z.id?z:te)),g("")},w=V=>{alert(`Broadcast sent to ${V.audience}! Title: ${V.title}`)},A=V=>{const F=new Date(V),z=Math.floor((new Date().getTime()-F.getTime())/1e3);if(z<60)return"Just now";let Y=z/31536e3;return Y>1?Math.floor(Y)+"y":(Y=z/2592e3,Y>1?Math.floor(Y)+"mo":(Y=z/86400,Y>1?Math.floor(Y)+"d":(Y=z/3600,Y>1?Math.floor(Y)+"h":(Y=z/60,Y>1?Math.floor(Y)+"m":"Just now"))))};if(o)return u.jsx(cn,{});const D=n==null?void 0:n.participants.find(V=>V.id!==y);return u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsxs("div",{className:"flex h-[calc(100vh-200px)] bg-gray-800 rounded-lg shadow-2xl overflow-hidden",children:[u.jsxs("aside",{className:"w-1/3 xl:w-1/4 bg-gray-800 border-r border-gray-700 flex flex-col",children:[u.jsx("div",{className:"p-4 border-b border-gray-700",children:u.jsx("h1",{className:"text-xl font-bold text-white",children:"Direct Messages"})}),u.jsx("div",{className:"flex-grow overflow-y-auto",children:r.map(V=>{const F=V.participants.find(te=>te.id!==y),z=V.messages[V.messages.length-1],Y=(n==null?void 0:n.id)===V.id;return u.jsxs("button",{onClick:()=>i(V),className:`w-full text-left p-4 flex items-center gap-4 transition-colors ${Y?"bg-gray-700":"hover:bg-gray-700/50"}`,children:[u.jsxs("div",{className:"relative flex-shrink-0",children:[u.jsx("img",{src:F.avatarUrl,alt:F.name,className:"w-12 h-12 rounded-full object-cover"}),V.unreadCount>0&&u.jsx("span",{className:"absolute top-0 right-0 block h-3 w-3 rounded-full bg-brand-accent ring-2 ring-gray-800"})]}),u.jsxs("div",{className:"flex-grow overflow-hidden",children:[u.jsxs("div",{className:"flex justify-between items-baseline",children:[u.jsx("h3",{className:`font-semibold truncate ${V.unreadCount>0?"text-white":"text-gray-300"}`,children:F.name}),u.jsx("p",{className:"text-xs text-gray-500",children:A(z.timestamp)})]}),u.jsxs("p",{className:`text-sm truncate ${V.unreadCount>0?"text-gray-300":"text-gray-400"}`,children:[z.senderId===y&&"You: ",z.text]})]})]},V.id)})})]}),u.jsx("main",{className:"flex-1 flex flex-col",children:!n||!D?u.jsx("div",{className:"flex-grow flex items-center justify-center text-gray-500",children:u.jsx("p",{children:"Select a conversation to start chatting."})}):u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"p-4 border-b border-gray-700 flex items-center gap-4 bg-gray-800 z-10",children:[u.jsx("img",{src:D.avatarUrl,alt:D.name,className:"w-10 h-10 rounded-full object-cover"}),u.jsx("h2",{className:"text-lg font-bold text-white",children:D.name})]}),u.jsx("div",{className:"flex-grow p-6 overflow-y-auto",children:u.jsxs("div",{className:"space-y-6",children:[n.messages.map(V=>u.jsxs("div",{className:`flex items-end gap-3 ${V.senderId===y?"flex-row-reverse":""}`,children:[V.senderId!==y&&u.jsx("img",{src:D.avatarUrl,alt:D.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),u.jsx("div",{className:`p-3 rounded-2xl max-w-lg shadow ${V.senderId===y?"bg-brand-accent text-white rounded-br-none":"bg-gray-700 text-gray-300 rounded-bl-none"}`,children:u.jsx("p",{className:"text-sm",children:V.text})})]},V.id)),u.jsx("div",{ref:p})]})}),u.jsx("footer",{className:"p-4 bg-gray-800 border-t border-gray-700",children:u.jsxs("form",{onSubmit:_,className:"flex items-center gap-3",children:[u.jsx("input",{type:"text",value:d,onChange:V=>g(V.target.value),placeholder:`Message ${D.name}...`,className:"flex-grow bg-gray-700 border-gray-600 rounded-full py-2 px-4 text-sm text-white focus:ring-brand-accent focus:border-brand-accent"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-3 hover:bg-brand-accent-hover disabled:bg-gray-600",disabled:!d.trim(),children:u.jsx(fe,{name:"send",className:"w-5 h-5"})})]})})]})})]})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsx(T4,{onPostCreated:w})})]})},A4=({onComplete:r,currentUserId:e,currentUserEmail:n})=>{const[i,o]=T.useState(1),[c,d]=T.useState(!1),[g,p]=T.useState(""),[y,_]=T.useState(""),[w,A]=T.useState(""),[D,V]=T.useState(""),[F,z]=T.useState(""),[Y,te]=T.useState(!1),[J,se]=T.useState(""),[oe,ce]=T.useState(null),[I,N]=T.useState(""),[R,j]=T.useState(["Electronic","Hip Hop","Pop","Rock","Jazz","Classical","R&B","Soul","Country","Reggae","Latin","Indie","Alternative","Metal","Punk","Folk","Blues","Funk","Disco","House","Techno","Trance","Dubstep","Drum & Bass","Trap","Lo-Fi","Ambient","Experimental","World","Gospel","K-Pop","J-Pop","Afrobeat","Dancehall","Garage","Grime","Hardstyle","Progressive","Psychedelic","Synthwave","Vaporwave","Chillwave"]),[L,k]=T.useState(""),[C,Ae]=T.useState(""),[me,O]=T.useState(""),[W,de]=T.useState(""),be=ve=>{var pt;const Le=(pt=ve.target.files)==null?void 0:pt[0];if(Le){ce(Le);const It=new FileReader;It.onloadend=()=>{N(It.result)},It.readAsDataURL(Le)}},De=ve=>{const Le=ve.target.value;Le==="custom"?(te(!0),V("")):(te(!1),V(Le),z(""))},U=()=>{if(F.trim().length>0){const ve=F.trim();R.includes(ve)||j([...R,ve].sort()),V(ve),z(""),te(!1)}},Z=async()=>{console.log(" Starting profile creation..."),d(!0),p("");try{console.log(" Profile data:",{artistName:y,bio:w.substring(0,50),genre:D,location:J,hasAvatar:!!oe});let ve=`https://api.dicebear.com/7.x/avataaars/svg?seed=${e}`;oe?(console.log(" Avatar upload temporarily disabled (Storage CORS pending)"),console.log(" Using unique generated avatar instead")):console.log(" Using unique generated avatar for user:",e);const Le={id:e,name:y,bio:w,genre:D,location:J,avatarUrl:ve,spotifyUrl:L||void 0,soundcloudUrl:C||void 0,instagramUrl:me||void 0,twitterUrl:W||void 0,followers:0,following:0,isVerified:!1};console.log(" Saving profile to Firestore...");const pt=await Hw(Le);console.log(" Profile created successfully:",pt.id),console.log(" Calling onComplete..."),r(pt)}catch(ve){console.error(" Error creating artist profile:",ve),p(ve.message||"Failed to create profile. Please try again.")}finally{d(!1),console.log(" Profile creation process complete")}},H=y.trim().length>=2,le=w.trim().length>=10&&D.trim().length>0,ue=w.trim().length,ge=10,we=ue>=ge;return u.jsx("div",{className:"fixed inset-0 bg-gray-900/95 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-8 text-center",children:[u.jsx(fe,{name:"music-note",className:"w-16 h-16 mx-auto mb-4 text-white"}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome to SoundWave!"}),u.jsx("p",{className:"text-white/90",children:"Let's create your artist profile"})]}),u.jsxs("div",{className:"flex justify-center items-center gap-4 p-6 border-b border-gray-700",children:[u.jsxs("div",{className:`flex items-center gap-2 ${i>=1?"text-purple-500":"text-gray-500"}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i>=1?"bg-purple-500 text-white":"bg-gray-700"}`,children:"1"}),u.jsx("span",{className:"font-medium hidden sm:inline",children:"Basic Info"})]}),u.jsx("div",{className:"w-12 h-0.5 bg-gray-700"}),u.jsxs("div",{className:`flex items-center gap-2 ${i>=2?"text-purple-500":"text-gray-500"}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i>=2?"bg-purple-500 text-white":"bg-gray-700"}`,children:"2"}),u.jsx("span",{className:"font-medium hidden sm:inline",children:"About You"})]}),u.jsx("div",{className:"w-12 h-0.5 bg-gray-700"}),u.jsxs("div",{className:`flex items-center gap-2 ${i>=3?"text-purple-500":"text-gray-500"}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i>=3?"bg-purple-500 text-white":"bg-gray-700"}`,children:"3"}),u.jsx("span",{className:"font-medium hidden sm:inline",children:"Social Links"})]})]}),u.jsxs("div",{className:"p-8",children:[g&&u.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500",children:g}),i===1&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Artist Name *"}),u.jsx("input",{type:"text",value:y,onChange:ve=>_(ve.target.value),placeholder:"Enter your artist name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",maxLength:50}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This is how you'll appear on SoundWave"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Picture"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-700 overflow-hidden flex items-center justify-center",children:I?u.jsx("img",{src:I,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx(fe,{name:"user",className:"w-12 h-12 text-gray-500"})}),u.jsxs("label",{className:"cursor-pointer",children:[u.jsx("div",{className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors",children:"Choose Image"}),u.jsx("input",{type:"file",accept:"image/*",onChange:be,className:"hidden"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location"}),u.jsx("input",{type:"text",value:J,onChange:ve=>se(ve.target.value),placeholder:"e.g., Los Angeles, CA",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),i===2&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio *"}),u.jsx("textarea",{value:w,onChange:ve=>A(ve.target.value),placeholder:"Tell us about your music and journey... (minimum 10 characters)",rows:5,className:`w-full px-4 py-3 bg-gray-700 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 resize-none ${w.length>0&&we?"border-green-500 focus:ring-green-500":w.length>0&&!we?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-purple-500"}`,maxLength:500}),u.jsxs("div",{className:"flex justify-between items-center mt-1",children:[u.jsx("p",{className:`text-xs ${we?"text-green-400":ue>0?"text-red-400":"text-gray-400"}`,children:we?" Bio looks good!":ue>0?` ${ge-ue} more characters needed`:"Minimum 10 characters required"}),u.jsxs("p",{className:"text-xs text-gray-400",children:[w.length,"/500 characters"]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Primary Genre *"}),u.jsxs("select",{value:Y?"custom":D,onChange:De,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[u.jsx("option",{value:"",children:"Select a genre"}),R.map(ve=>u.jsx("option",{value:ve,children:ve},ve)),u.jsx("option",{value:"custom",children:" Add Custom Genre"})]}),Y&&u.jsxs("div",{className:"mt-3 flex gap-2",children:[u.jsx("input",{type:"text",value:F,onChange:ve=>z(ve.target.value),onKeyPress:ve=>ve.key==="Enter"&&U(),placeholder:"Enter your genre (e.g., Future Bass)",className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",maxLength:30}),u.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Add"})]}),D&&!Y&&u.jsxs("p",{className:"text-xs text-green-400 mt-2",children:[" Selected: ",D]})]})]}),i===3&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("p",{className:"text-gray-400 text-sm",children:"Connect your social profiles (optional)"}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(fe,{name:"spotify",className:"w-4 h-4 inline mr-2"}),"Spotify"]}),u.jsx("input",{type:"url",value:L,onChange:ve=>k(ve.target.value),placeholder:"https://open.spotify.com/artist/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(fe,{name:"soundcloud",className:"w-4 h-4 inline mr-2"}),"SoundCloud"]}),u.jsx("input",{type:"url",value:C,onChange:ve=>Ae(ve.target.value),placeholder:"https://soundcloud.com/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(fe,{name:"instagram",className:"w-4 h-4 inline mr-2"}),"Instagram"]}),u.jsx("input",{type:"url",value:me,onChange:ve=>O(ve.target.value),placeholder:"https://instagram.com/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(fe,{name:"twitter",className:"w-4 h-4 inline mr-2"}),"Twitter/X"]}),u.jsx("input",{type:"url",value:W,onChange:ve=>de(ve.target.value),placeholder:"https://twitter.com/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]})]}),g&&u.jsx("div",{className:"mx-6 mb-4 p-4 bg-red-900/50 border border-red-500 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(fe,{name:"alert-circle",className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"text-red-200 font-medium",children:"Failed to create profile"}),u.jsx("p",{className:"text-red-300 text-sm mt-1",children:g})]}),u.jsxs("button",{onClick:()=>{p(""),Z()},className:"px-4 py-2 bg-red-700 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[u.jsx(fe,{name:"refresh",className:"w-4 h-4"}),"Retry"]})]})}),c&&u.jsxs("div",{className:"mx-6 mb-4 p-4 bg-blue-900/50 border border-blue-500 rounded-lg flex items-center gap-3",children:[u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-400"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-blue-200 font-medium",children:"Creating your profile..."}),u.jsx("p",{className:"text-blue-300 text-sm mt-1",children:"Saving to database, please wait..."})]})]}),u.jsxs("div",{className:"p-6 border-t border-gray-700 flex justify-between",children:[i>1&&u.jsx(qe,{onClick:()=>o(i-1),variant:"secondary",disabled:c,children:"Back"}),u.jsx("div",{className:"ml-auto",children:i<3?u.jsx(qe,{onClick:()=>o(i+1),disabled:i===1?!H:!le,children:"Next"}):u.jsxs(qe,{onClick:Z,disabled:c||!H||!le,className:"relative",children:[c&&u.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})}),u.jsx("span",{className:c?"ml-6":"",children:c?"Creating Profile...":"Complete Setup"})]})})]})]})})},N4=Xw;class R4 extends T.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error(" [ErrorBoundary] Caught error:",e,n)}render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-2xl w-full bg-gray-800 rounded-lg p-8 border border-red-500",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-red-400 mb-2",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-300",children:"The app encountered an unexpected error"})]}),this.state.error&&u.jsx("div",{className:"bg-gray-900 p-4 rounded-lg mb-4",children:u.jsx("p",{className:"text-red-300 font-mono text-sm",children:this.state.error.toString()})}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-medium transition-colors",children:"Reload Page"}),u.jsx("button",{onClick:()=>window.location.href="/Sites/soundwave/index.html",className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-medium transition-colors",children:"Go to Gateway"})]})]})}):this.props.children}}function C4(){console.log(" App component rendering...");const[r,e]=T.useState(null),[n,i]=T.useState(null),[o,c]=T.useState(!0),[d,g]=T.useState(!1);return T.useEffect(()=>{console.log(" Setting up auth listener...");try{const p=Jx(_r,async y=>{if(console.log(" Auth state changed:",y?"User logged in":"No user"),e(y),y)try{console.log(" Checking for SoundWave profile...");let _=await dr(y.uid),w=0;for(;!_&&w<3;)console.log(` Retry ${w+1}/3 for profile fetch...`),await new Promise(A=>setTimeout(A,1e3*(w+1))),_=await dr(y.uid),w++;_?(console.log(" SoundWave profile found:",_),i(_),g(!1)):(console.log(" No SoundWave profile - showing onboarding"),i(null),g(!0))}catch(_){console.error(" Error checking profile:",_),i(null),g(!0)}else i(null),g(!1);c(!1),console.log(" Loading complete")});return()=>{console.log(" Cleaning up auth listener"),p()}}catch(p){console.error(" Error setting up auth:",p),c(!1)}},[]),o?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:u.jsx("div",{className:"text-white text-xl",children:"Loading SoundWave..."})}):r&&d?u.jsx(A4,{currentUserId:r.uid,currentUserEmail:r.email||"",onComplete:async p=>{console.log(" Onboarding complete:",p);try{const y=await dr(r.uid);y?(console.log(" Profile verified in Firestore"),i(y),g(!1)):(console.error(" Profile not found after creation - retry onboarding"),alert("Profile creation failed. Please try again."))}catch(y){console.error(" Error verifying profile:",y),i(p),g(!1)}}}):r?u.jsx(YS,{children:u.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-900",children:[u.jsx(VI,{}),u.jsx("main",{className:"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8 mb-24",children:u.jsxs(SS,{children:[u.jsx(Yt,{path:"/",element:u.jsx(KI,{})}),u.jsx(Yt,{path:"/library",element:u.jsx(t4,{})}),u.jsx(Yt,{path:"/community",element:u.jsx(ZI,{})}),u.jsx(Yt,{path:"/playlists",element:u.jsx(n4,{})}),u.jsx(Yt,{path:"/labels",element:u.jsx(p4,{})}),u.jsx(Yt,{path:"/labels/:labelId",element:u.jsx(E4,{})}),u.jsx(Yt,{path:"/artist-hub",element:u.jsx(i4,{})}),u.jsx(Yt,{path:"/live-streams",element:u.jsx(o4,{})}),u.jsx(Yt,{path:"/tutorials",element:u.jsx(c4,{})}),u.jsx(Yt,{path:"/masterclass",element:u.jsx(h4,{})}),u.jsx(Yt,{path:"/samples",element:u.jsx(f4,{})}),u.jsx(Yt,{path:"/profile/:userId",element:u.jsx(JI,{})}),u.jsx(Yt,{path:"/settings/profile",element:u.jsx(N4,{})}),u.jsx(Yt,{path:"/upload",element:u.jsx(Xw,{})}),u.jsx(Yt,{path:"/import-collection",element:u.jsx(m4,{})}),u.jsx(Yt,{path:"/inbox",element:u.jsx(S4,{})})]})}),u.jsx(UI,{}),u.jsx(BI,{}),u.jsx(e4,{})]})}):u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Authentication Required"}),u.jsx("p",{className:"mb-6",children:"Please sign in through the portal to access SoundWave."}),u.jsx("button",{onClick:()=>window.location.href="/Sites/soundwave/index.html",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg",children:"Go to SoundWave Gateway"})]})})}const j4=()=>u.jsx(R4,{children:u.jsx(C4,{})});console.log(" SoundWave index.tsx loading...");const Jg=document.getElementById("root");console.log(" Root element:",Jg);if(!Jg)throw console.error(" Could not find root element!"),new Error("Could not find root element to mount to");console.log(" Root element found, creating React root...");const I4=kT.createRoot(Jg);console.log(" Rendering App...");I4.render(u.jsx(Qn.StrictMode,{children:u.jsx(zI,{children:u.jsx(j4,{})})}));console.log(" React render called");
