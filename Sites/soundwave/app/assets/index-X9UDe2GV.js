(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function tx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bm={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function XC(){if(Z0)return Jl;Z0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:t,type:i,key:u,ref:o!==void 0?o:null,props:a}}return Jl.Fragment=e,Jl.jsx=n,Jl.jsxs=n,Jl}var e_;function ZC(){return e_||(e_=1,bm.exports=XC()),bm.exports}var y=ZC(),Im={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function eb(){if(t_)return Ne;t_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function C(H){return H===null||typeof H!="object"?null:(H=S&&H[S]||H["@@iterator"],typeof H=="function"?H:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,U={};function z(H,se,W){this.props=H,this.context=se,this.refs=U,this.updater=W||M}z.prototype.isReactComponent={},z.prototype.setState=function(H,se){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,se,"setState")},z.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function $(){}$.prototype=z.prototype;function j(H,se,W){this.props=H,this.context=se,this.refs=U,this.updater=W||M}var Y=j.prototype=new $;Y.constructor=j,V(Y,z.prototype),Y.isPureReactComponent=!0;var ie=Array.isArray;function oe(){}var P={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(H,se,W){var de=W.ref;return{$$typeof:t,type:H,key:se,ref:de!==void 0?de:null,props:W}}function k(H,se){return R(H.type,se,H.props)}function B(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function q(H){var se={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(W){return se[W]})}var L=/\/+/g;function je(H,se){return typeof H=="object"&&H!==null&&H.key!=null?q(""+H.key):se.toString(36)}function ge(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(oe,oe):(H.status="pending",H.then(function(se){H.status==="pending"&&(H.status="fulfilled",H.value=se)},function(se){H.status==="pending"&&(H.status="rejected",H.reason=se)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function O(H,se,W,de,me){var ye=typeof H;(ye==="undefined"||ye==="boolean")&&(H=null);var be=!1;if(H===null)be=!0;else switch(ye){case"bigint":case"string":case"number":be=!0;break;case"object":switch(H.$$typeof){case t:case e:be=!0;break;case _:return be=H._init,O(be(H._payload),se,W,de,me)}}if(be)return me=me(H),be=de===""?"."+je(H,0):de,ie(me)?(W="",be!=null&&(W=be.replace(L,"$&/")+"/"),O(me,se,W,"",function(mn){return mn})):me!=null&&(B(me)&&(me=k(me,W+(me.key==null||H&&H.key===me.key?"":(""+me.key).replace(L,"$&/")+"/")+be)),se.push(me)),1;be=0;var tt=de===""?".":de+":";if(ie(H))for(var nt=0;nt<H.length;nt++)de=H[nt],ye=tt+je(de,nt),be+=O(de,se,W,ye,me);else if(nt=C(H),typeof nt=="function")for(H=nt.call(H),nt=0;!(de=H.next()).done;)de=de.value,ye=tt+je(de,nt++),be+=O(de,se,W,ye,me);else if(ye==="object"){if(typeof H.then=="function")return O(ge(H),se,W,de,me);throw se=String(H),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return be}function te(H,se,W){if(H==null)return H;var de=[],me=0;return O(H,de,"","",function(ye){return se.call(W,ye,me++)}),de}function fe(H){if(H._status===-1){var se=H._result;se=se(),se.then(function(W){(H._status===0||H._status===-1)&&(H._status=1,H._result=W)},function(W){(H._status===0||H._status===-1)&&(H._status=2,H._result=W)}),H._status===-1&&(H._status=0,H._result=se)}if(H._status===1)return H._result.default;throw H._result}var xe=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},ke={map:te,forEach:function(H,se,W){te(H,function(){se.apply(this,arguments)},W)},count:function(H){var se=0;return te(H,function(){se++}),se},toArray:function(H){return te(H,function(se){return se})||[]},only:function(H){if(!B(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ne.Activity=E,Ne.Children=ke,Ne.Component=z,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=j,Ne.StrictMode=i,Ne.Suspense=f,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(H){return P.H.useMemoCache(H)}},Ne.cache=function(H){return function(){return H.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(H,se,W){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var de=V({},H.props),me=H.key;if(se!=null)for(ye in se.key!==void 0&&(me=""+se.key),se)!N.call(se,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&se.ref===void 0||(de[ye]=se[ye]);var ye=arguments.length-2;if(ye===1)de.children=W;else if(1<ye){for(var be=Array(ye),tt=0;tt<ye;tt++)be[tt]=arguments[tt+2];de.children=be}return R(H.type,me,de)},Ne.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},Ne.createElement=function(H,se,W){var de,me={},ye=null;if(se!=null)for(de in se.key!==void 0&&(ye=""+se.key),se)N.call(se,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(me[de]=se[de]);var be=arguments.length-2;if(be===1)me.children=W;else if(1<be){for(var tt=Array(be),nt=0;nt<be;nt++)tt[nt]=arguments[nt+2];me.children=tt}if(H&&H.defaultProps)for(de in be=H.defaultProps,be)me[de]===void 0&&(me[de]=be[de]);return R(H,ye,me)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(H){return{$$typeof:d,render:H}},Ne.isValidElement=B,Ne.lazy=function(H){return{$$typeof:_,_payload:{_status:-1,_result:H},_init:fe}},Ne.memo=function(H,se){return{$$typeof:h,type:H,compare:se===void 0?null:se}},Ne.startTransition=function(H){var se=P.T,W={};P.T=W;try{var de=H(),me=P.S;me!==null&&me(W,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(oe,xe)}catch(ye){xe(ye)}finally{se!==null&&W.types!==null&&(se.types=W.types),P.T=se}},Ne.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Ne.use=function(H){return P.H.use(H)},Ne.useActionState=function(H,se,W){return P.H.useActionState(H,se,W)},Ne.useCallback=function(H,se){return P.H.useCallback(H,se)},Ne.useContext=function(H){return P.H.useContext(H)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(H,se){return P.H.useDeferredValue(H,se)},Ne.useEffect=function(H,se){return P.H.useEffect(H,se)},Ne.useEffectEvent=function(H){return P.H.useEffectEvent(H)},Ne.useId=function(){return P.H.useId()},Ne.useImperativeHandle=function(H,se,W){return P.H.useImperativeHandle(H,se,W)},Ne.useInsertionEffect=function(H,se){return P.H.useInsertionEffect(H,se)},Ne.useLayoutEffect=function(H,se){return P.H.useLayoutEffect(H,se)},Ne.useMemo=function(H,se){return P.H.useMemo(H,se)},Ne.useOptimistic=function(H,se){return P.H.useOptimistic(H,se)},Ne.useReducer=function(H,se,W){return P.H.useReducer(H,se,W)},Ne.useRef=function(H){return P.H.useRef(H)},Ne.useState=function(H){return P.H.useState(H)},Ne.useSyncExternalStore=function(H,se,W){return P.H.useSyncExternalStore(H,se,W)},Ne.useTransition=function(){return P.H.useTransition()},Ne.version="19.2.0",Ne}var n_;function Cp(){return n_||(n_=1,Im.exports=eb()),Im.exports}var D=Cp();const ui=tx(D);var Rm={exports:{}},Yl={},Nm={exports:{}},Mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function tb(){return i_||(i_=1,(function(t){function e(O,te){var fe=O.length;O.push(te);e:for(;0<fe;){var xe=fe-1>>>1,ke=O[xe];if(0<o(ke,te))O[xe]=te,O[fe]=ke,fe=xe;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var te=O[0],fe=O.pop();if(fe!==te){O[0]=fe;e:for(var xe=0,ke=O.length,H=ke>>>1;xe<H;){var se=2*(xe+1)-1,W=O[se],de=se+1,me=O[de];if(0>o(W,fe))de<ke&&0>o(me,W)?(O[xe]=me,O[de]=fe,xe=de):(O[xe]=W,O[se]=fe,xe=se);else if(de<ke&&0>o(me,fe))O[xe]=me,O[de]=fe,xe=de;else break e}}return te}function o(O,te){var fe=O.sortIndex-te.sortIndex;return fe!==0?fe:O.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var f=[],h=[],_=1,E=null,S=3,C=!1,M=!1,V=!1,U=!1,z=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function Y(O){for(var te=n(h);te!==null;){if(te.callback===null)i(h);else if(te.startTime<=O)i(h),te.sortIndex=te.expirationTime,e(f,te);else break;te=n(h)}}function ie(O){if(V=!1,Y(O),!M)if(n(f)!==null)M=!0,oe||(oe=!0,q());else{var te=n(h);te!==null&&ge(ie,te.startTime-O)}}var oe=!1,P=-1,N=5,R=-1;function k(){return U?!0:!(t.unstable_now()-R<N)}function B(){if(U=!1,oe){var O=t.unstable_now();R=O;var te=!0;try{e:{M=!1,V&&(V=!1,$(P),P=-1),C=!0;var fe=S;try{t:{for(Y(O),E=n(f);E!==null&&!(E.expirationTime>O&&k());){var xe=E.callback;if(typeof xe=="function"){E.callback=null,S=E.priorityLevel;var ke=xe(E.expirationTime<=O);if(O=t.unstable_now(),typeof ke=="function"){E.callback=ke,Y(O),te=!0;break t}E===n(f)&&i(f),Y(O)}else i(f);E=n(f)}if(E!==null)te=!0;else{var H=n(h);H!==null&&ge(ie,H.startTime-O),te=!1}}break e}finally{E=null,S=fe,C=!1}te=void 0}}finally{te?q():oe=!1}}}var q;if(typeof j=="function")q=function(){j(B)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,je=L.port2;L.port1.onmessage=B,q=function(){je.postMessage(null)}}else q=function(){z(B,0)};function ge(O,te){P=z(function(){O(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(O){switch(S){case 1:case 2:case 3:var te=3;break;default:te=S}var fe=S;S=te;try{return O()}finally{S=fe}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(O,te){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var fe=S;S=O;try{return te()}finally{S=fe}},t.unstable_scheduleCallback=function(O,te,fe){var xe=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?xe+fe:xe):fe=xe,O){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=fe+ke,O={id:_++,callback:te,priorityLevel:O,startTime:fe,expirationTime:ke,sortIndex:-1},fe>xe?(O.sortIndex=fe,e(h,O),n(f)===null&&O===n(h)&&(V?($(P),P=-1):V=!0,ge(ie,fe-xe))):(O.sortIndex=ke,e(f,O),M||C||(M=!0,oe||(oe=!0,q()))),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var te=S;return function(){var fe=S;S=te;try{return O.apply(this,arguments)}finally{S=fe}}}})(Mm)),Mm}var s_;function nb(){return s_||(s_=1,Nm.exports=tb()),Nm.exports}var Dm={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function ib(){if(r_)return rn;r_=1;var t=Cp();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(f,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:f,containerInfo:h,implementation:_}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,rn.createPortal=function(f,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,_)},rn.flushSync=function(f){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=h,i.p=_,i.d.f()}},rn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},rn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},rn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:C}):_==="script"&&i.d.X(f,{crossOrigin:E,integrity:S,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},rn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},rn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin);i.d.L(f,_,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},rn.preloadModule=function(f,h){if(typeof f=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},rn.requestFormReset=function(f){i.d.r(f)},rn.unstable_batchedUpdates=function(f,h){return f(h)},rn.useFormState=function(f,h,_){return u.H.useFormState(f,h,_)},rn.useFormStatus=function(){return u.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var o_;function sb(){if(o_)return Dm.exports;o_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Dm.exports=ib(),Dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function rb(){if(a_)return Yl;a_=1;var t=nb(),e=Cp(),n=sb();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var v=l.return;if(v===null)break;var T=v.alternate;if(T===null){if(c=v.return,c!==null){l=c;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===l)return f(v),s;if(T===c)return f(v),r;T=T.sibling}throw Error(i(188))}if(l.return!==c.return)l=v,c=T;else{for(var w=!1,b=v.child;b;){if(b===l){w=!0,l=v,c=T;break}if(b===c){w=!0,c=v,l=T;break}b=b.sibling}if(!w){for(b=T.child;b;){if(b===l){w=!0,l=T,c=v;break}if(b===c){w=!0,c=T,l=v;break}b=b.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function _(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=_(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),j=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=B&&s[B]||s["@@iterator"],typeof s=="function"?s:null)}var L=Symbol.for("react.client.reference");function je(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===L?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case V:return"Fragment";case z:return"Profiler";case U:return"StrictMode";case ie:return"Suspense";case oe:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case M:return"Portal";case j:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case Y:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case P:return r=s.displayName||null,r!==null?r:je(s.type)||"Memo";case N:r=s._payload,s=s._init;try{return je(s(r))}catch{}}return null}var ge=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},xe=[],ke=-1;function H(s){return{current:s}}function se(s){0>ke||(s.current=xe[ke],xe[ke]=null,ke--)}function W(s,r){ke++,xe[ke]=s.current,s.current=r}var de=H(null),me=H(null),ye=H(null),be=H(null);function tt(s,r){switch(W(ye,r),W(me,s),W(de,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?x0(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=x0(r),s=S0(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}se(de),W(de,s)}function nt(){se(de),se(me),se(ye)}function mn(s){s.memoizedState!==null&&W(be,s);var r=de.current,l=S0(r,s.type);r!==l&&(W(me,s),W(de,l))}function Sn(s){me.current===s&&(se(de),se(me)),be.current===s&&(se(be),Hl._currentValue=fe)}var mi,bo;function ni(s){if(mi===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);mi=r&&r[1]||"",bo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mi+s+bo}var Pr=!1;function Io(s,r){if(!s||Pr)return"";Pr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var Z=ee}Reflect.construct(s,[],le)}else{try{le.call()}catch(ee){Z=ee}s.call(le.prototype)}}else{try{throw Error()}catch(ee){Z=ee}(le=s())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&Z&&typeof ee.stack=="string")return[ee.stack,Z.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=c.DetermineComponentFrameRoot(),w=T[0],b=T[1];if(w&&b){var F=w.split(`
`),X=b.split(`
`);for(v=c=0;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;for(;v<X.length&&!X[v].includes("DetermineComponentFrameRoot");)v++;if(c===F.length||v===X.length)for(c=F.length-1,v=X.length-1;1<=c&&0<=v&&F[c]!==X[v];)v--;for(;1<=c&&0<=v;c--,v--)if(F[c]!==X[v]){if(c!==1||v!==1)do if(c--,v--,0>v||F[c]!==X[v]){var re=`
`+F[c].replace(" at new "," at ");return s.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",s.displayName)),re}while(1<=c&&0<=v);break}}}finally{Pr=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?ni(l):""}function wf(s,r){switch(s.tag){case 26:case 27:case 5:return ni(s.type);case 16:return ni("Lazy");case 13:return s.child!==r&&r!==null?ni("Suspense Fallback"):ni("Suspense");case 19:return ni("SuspenseList");case 0:case 15:return Io(s.type,!1);case 11:return Io(s.type.render,!1);case 1:return Io(s.type,!0);case 31:return ni("Activity");default:return""}}function Du(s){try{var r="",l=null;do r+=wf(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ro=Object.prototype.hasOwnProperty,kr=t.unstable_scheduleCallback,No=t.unstable_cancelCallback,Af=t.unstable_shouldYield,ja=t.unstable_requestPaint,zt=t.unstable_now,Pu=t.unstable_getCurrentPriorityLevel,kt=t.unstable_ImmediatePriority,Ot=t.unstable_UserBlockingPriority,Bi=t.unstable_NormalPriority,ku=t.unstable_LowPriority,Ja=t.unstable_IdlePriority,Cf=t.log,Ur=t.unstable_setDisableYieldValue,Is=null,nn=null;function qn(s){if(typeof Cf=="function"&&Ur(s),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(Is,s)}catch{}}var pn=Math.clz32?Math.clz32:Uu,bf=Math.log,Ya=Math.LN2;function Uu(s){return s>>>=0,s===0?32:31-(bf(s)/Ya|0)|0}var Lr=256,pi=262144,Rs=4194304;function ii(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Hn(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var v=0,T=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var b=c&134217727;return b!==0?(c=b&~T,c!==0?v=ii(c):(w&=b,w!==0?v=ii(w):l||(l=b&~s,l!==0&&(v=ii(l))))):(b=c&~T,b!==0?v=ii(b):w!==0?v=ii(w):l||(l=c&~s,l!==0&&(v=ii(l)))),v===0?0:r!==0&&r!==v&&(r&T)===0&&(T=v&-v,l=r&-r,T>=l||T===32&&(l&4194048)!==0)?r:v}function Ns(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Mo(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $a(){var s=Rs;return Rs<<=1,(Rs&62914560)===0&&(Rs=4194304),s}function qi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Ms(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function jt(s,r,l,c,v,T){var w=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var b=s.entanglements,F=s.expirationTimes,X=s.hiddenUpdates;for(l=w&~l;0<l;){var re=31-pn(l),le=1<<re;b[re]=0,F[re]=-1;var Z=X[re];if(Z!==null)for(X[re]=null,re=0;re<Z.length;re++){var ee=Z[re];ee!==null&&(ee.lane&=-536870913)}l&=~le}c!==0&&Ka(s,c,0),T!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=T&~(w&~r))}function Ka(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-pn(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Ds(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-pn(l),v=1<<c;v&r|s[c]&r&&(s[c]|=r),l&=~v}}function Ps(s,r){var l=r&-r;return l=(l&42)!==0?1:Wa(l),(l&(s.suspendedLanes|r))!==0?0:l}function Wa(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Qa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Hi(){var s=te.p;return s!==0?s:(s=window.event,s===void 0?32:J0(s.type))}function Lu(s,r){var l=te.p;try{return te.p=s,r()}finally{te.p=l}}var gi=Math.random().toString(36).slice(2),vt="__reactFiber$"+gi,Jt="__reactProps$"+gi,yi="__reactContainer$"+gi,ks="__reactEvents$"+gi,vi="__reactListeners$"+gi,Vu="__reactHandles$"+gi,Xa="__reactResources$"+gi,Gi="__reactMarker$"+gi;function Vr(s){delete s[vt],delete s[Jt],delete s[ks],delete s[vi],delete s[Vu]}function zi(s){var r=s[vt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[yi]||l[vt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=N0(s);s!==null;){if(l=s[vt])return l;s=N0(s)}return r}s=l,l=s.parentNode}return null}function ji(s){if(s=s[vt]||s[yi]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Or(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function si(s){var r=s[Xa];return r||(r=s[Xa]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function St(s){s[Gi]=!0}var Do=new Set,Us={};function gn(s,r){_i(s,r),_i(s+"Capture",r)}function _i(s,r){for(Us[s]=r,s=0;s<r.length;s++)Do.add(r[s])}var If=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Za={},el={};function Ou(s){return Ro.call(el,s)?!0:Ro.call(Za,s)?!1:If.test(s)?el[s]=!0:(Za[s]=!0,!1)}function Ls(s,r,l){if(Ou(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Vs(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Gn(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function yn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Fu(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Rf(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,T=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return v.call(this)},set:function(w){l=""+w,T.call(this,w)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Po(s){if(!s._valueTracker){var r=Fu(s)?"checked":"value";s._valueTracker=Rf(s,r,""+s[r])}}function tl(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Fu(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function ko(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ji=/[\n"\\]/g;function _t(s){return s.replace(Ji,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Os(s,r,l,c,v,T,w,b){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),r!=null?w==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+yn(r)):s.value!==""+yn(r)&&(s.value=""+yn(r)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),r!=null?Uo(s,w,yn(r)):l!=null?Uo(s,w,yn(l)):c!=null&&s.removeAttribute("value"),v==null&&T!=null&&(s.defaultChecked=!!T),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.name=""+yn(b):s.removeAttribute("name")}function Fr(s,r,l,c,v,T,w,b){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),r!=null||l!=null){if(!(T!=="submit"&&T!=="reset"||r!=null)){Po(s);return}l=l!=null?""+yn(l):"",r=r!=null?""+yn(r):l,b||r===s.value||(s.value=r),s.defaultValue=r}c=c??v,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=b?s.checked:!!c,s.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),Po(s)}function Uo(s,r,l){r==="number"&&ko(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Je(s,r,l,c){if(s=s.options,r){r={};for(var v=0;v<l.length;v++)r["$"+l[v]]=!0;for(l=0;l<s.length;l++)v=r.hasOwnProperty("$"+s[l].value),s[l].selected!==v&&(s[l].selected=v),v&&c&&(s[l].defaultSelected=!0)}else{for(l=""+yn(l),r=null,v=0;v<s.length;v++){if(s[v].value===l){s[v].selected=!0,c&&(s[v].defaultSelected=!0);return}r!==null||s[v].disabled||(r=s[v])}r!==null&&(r.selected=!0)}}function Br(s,r,l){if(r!=null&&(r=""+yn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+yn(l):""}function Fs(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(ge(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=yn(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Po(s)}function zn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Nf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Nf.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Bu(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var v in r)c=r[v],r.hasOwnProperty(v)&&l[v]!==c&&nl(s,v,c)}else for(var T in r)r.hasOwnProperty(T)&&nl(s,T,r[T])}function il(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Df=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ti(s){return Df.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ft(){}var Lo=null;function Vo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yi=null,Mn=null;function qu(s){var r=ji(s);if(r&&(s=r.stateNode)){var l=s[Jt]||null;e:switch(s=r.stateNode,r.type){case"input":if(Os(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+_t(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var v=c[Jt]||null;if(!v)throw Error(i(90));Os(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&tl(c)}break e;case"textarea":Br(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Je(s,!!l.multiple,r,!1)}}}var sl=!1;function Hu(s,r,l){if(sl)return s(r,l);sl=!0;try{var c=s(r);return c}finally{if(sl=!1,(Yi!==null||Mn!==null)&&(Oc(),Yi&&(r=Yi,s=Mn,Mn=Yi=null,qu(r),s)))for(r=0;r<s.length;r++)qu(s[r])}}function wn(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Jt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=!1;if(ri)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){rl=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{rl=!1}var Dn=null,Oo=null,xi=null;function Bs(){if(xi)return xi;var s,r=Oo,l=r.length,c,v="value"in Dn?Dn.value:Dn.textContent,T=v.length;for(s=0;s<l&&r[s]===v[s];s++);var w=l-s;for(c=1;c<=w&&r[l-c]===v[T-c];c++);return xi=v.slice(s,1<c?1-c:void 0)}function qr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function qs(){return!0}function dt(){return!1}function sn(s){function r(l,c,v,T,w){this._reactName=l,this._targetInst=v,this.type=c,this.nativeEvent=T,this.target=w,this.currentTarget=null;for(var b in s)s.hasOwnProperty(b)&&(l=s[b],this[b]=l?l(T):T[b]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?qs:dt,this.isPropagationStopped=dt,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),r}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hr=sn($i),Hs=E({},$i,{view:0,detail:0}),Gu=sn(Hs),Gs,Fo,vn,Gr=E({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vn&&(vn&&s.type==="mousemove"?(Gs=s.screenX-vn.screenX,Fo=s.screenY-vn.screenY):Fo=Gs=0,vn=s),Gs)},movementY:function(s){return"movementY"in s?s.movementY:Fo}}),zu=sn(Gr),zr=E({},Gr,{dataTransfer:0}),ju=sn(zr),ol=E({},Hs,{relatedTarget:0}),zs=sn(ol),Ju=E({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Bo=sn(Ju),Pf=E({},$i,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Yu=sn(Pf),jr=E({},$i,{data:0}),al=sn(jr),$u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ll={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ul={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ku(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=ul[s])?!!r[s]:!1}function js(){return Ku}var Wu=E({},Hs,{key:function(s){if(s.key){var r=$u[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=qr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ll[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(s){return s.type==="keypress"?qr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?qr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Qu=sn(Wu),Ki=E({},Gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=sn(Ki),Xu=E({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),Zu=sn(Xu),ec=E({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),qo=sn(ec),_n=E({},Gr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),tc=sn(_n),nc=E({},$i,{newState:0,oldState:0}),Js=sn(nc),p=[9,13,27,32],x=ri&&"CompositionEvent"in window,A=null;ri&&"documentMode"in document&&(A=document.documentMode);var I=ri&&"TextEvent"in window&&!A,K=ri&&(!x||A&&8<A&&11>=A),ne=" ",he=!1;function et(s,r){switch(s){case"keyup":return p.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Le=!1;function Bt(s,r){switch(s){case"compositionend":return bt(r);case"keypress":return r.which!==32?null:(he=!0,ne);case"textInput":return s=r.data,s===ne&&he?null:s;default:return null}}function qt(s,r){if(Le)return s==="compositionend"||!x&&et(s,r)?(s=Bs(),xi=Oo=Dn=null,Le=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return K&&r.locale!=="ko"?null:r.data;default:return null}}var Ys={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function An(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Ys[s.type]:r==="textarea"}function Jr(s,r,l,c){Yi?Mn?Mn.push(c):Mn=[c]:Yi=c,r=jc(r,"onChange"),0<r.length&&(l=new Hr("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var Wi=null,dl=null;function AA(s){g0(s,0)}function ic(s){var r=Or(s);if(tl(r))return s}function Ug(s,r){if(s==="change")return r}var Lg=!1;if(ri){var kf;if(ri){var Uf="oninput"in document;if(!Uf){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),Uf=typeof Vg.oninput=="function"}kf=Uf}else kf=!1;Lg=kf&&(!document.documentMode||9<document.documentMode)}function Og(){Wi&&(Wi.detachEvent("onpropertychange",Fg),dl=Wi=null)}function Fg(s){if(s.propertyName==="value"&&ic(dl)){var r=[];Jr(r,dl,s,Vo(s)),Hu(AA,r)}}function CA(s,r,l){s==="focusin"?(Og(),Wi=r,dl=l,Wi.attachEvent("onpropertychange",Fg)):s==="focusout"&&Og()}function bA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ic(dl)}function IA(s,r){if(s==="click")return ic(r)}function RA(s,r){if(s==="input"||s==="change")return ic(r)}function NA(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Pn=typeof Object.is=="function"?Object.is:NA;function fl(s,r){if(Pn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var v=l[c];if(!Ro.call(r,v)||!Pn(s[v],r[v]))return!1}return!0}function Bg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function qg(s,r){var l=Bg(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Bg(l)}}function Hg(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Hg(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Gg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=ko(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=ko(s.document)}return r}function Lf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var MA=ri&&"documentMode"in document&&11>=document.documentMode,Ho=null,Vf=null,hl=null,Of=!1;function zg(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Of||Ho==null||Ho!==ko(c)||(c=Ho,"selectionStart"in c&&Lf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),hl&&fl(hl,c)||(hl=c,c=jc(Vf,"onSelect"),0<c.length&&(r=new Hr("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Ho)))}function Yr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Go={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},Ff={},jg={};ri&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function $r(s){if(Ff[s])return Ff[s];if(!Go[s])return s;var r=Go[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in jg)return Ff[s]=r[l];return s}var Jg=$r("animationend"),Yg=$r("animationiteration"),$g=$r("animationstart"),DA=$r("transitionrun"),PA=$r("transitionstart"),kA=$r("transitioncancel"),Kg=$r("transitionend"),Wg=new Map,Bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bf.push("scrollEnd");function oi(s,r){Wg.set(s,r),gn(r,[s])}var sc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},jn=[],zo=0,qf=0;function rc(){for(var s=zo,r=qf=zo=0;r<s;){var l=jn[r];jn[r++]=null;var c=jn[r];jn[r++]=null;var v=jn[r];jn[r++]=null;var T=jn[r];if(jn[r++]=null,c!==null&&v!==null){var w=c.pending;w===null?v.next=v:(v.next=w.next,w.next=v),c.pending=v}T!==0&&Qg(l,v,T)}}function oc(s,r,l,c){jn[zo++]=s,jn[zo++]=r,jn[zo++]=l,jn[zo++]=c,qf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Hf(s,r,l,c){return oc(s,r,l,c),ac(s)}function Kr(s,r){return oc(s,null,null,r),ac(s)}function Qg(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var v=!1,T=s.return;T!==null;)T.childLanes|=l,c=T.alternate,c!==null&&(c.childLanes|=l),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(v=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,v&&r!==null&&(v=31-pn(l),s=T.hiddenUpdates,c=s[v],c===null?s[v]=[r]:c.push(r),r.lane=l|536870912),T):null}function ac(s){if(50<Ul)throw Ul=0,Qh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var jo={};function UA(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(s,r,l,c){return new UA(s,r,l,c)}function Gf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qi(s,r){var l=s.alternate;return l===null?(l=kn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Xg(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function lc(s,r,l,c,v,T){var w=0;if(c=s,typeof s=="function")Gf(s)&&(w=1);else if(typeof s=="string")w=BC(s,l,de.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=kn(31,l,r,v),s.elementType=R,s.lanes=T,s;case V:return Wr(l.children,v,T,r);case U:w=8,v|=24;break;case z:return s=kn(12,l,r,v|2),s.elementType=z,s.lanes=T,s;case ie:return s=kn(13,l,r,v),s.elementType=ie,s.lanes=T,s;case oe:return s=kn(19,l,r,v),s.elementType=oe,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:w=10;break e;case $:w=9;break e;case Y:w=11;break e;case P:w=14;break e;case N:w=16,c=null;break e}w=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=kn(w,l,r,v),r.elementType=s,r.type=c,r.lanes=T,r}function Wr(s,r,l,c){return s=kn(7,s,c,r),s.lanes=l,s}function zf(s,r,l){return s=kn(6,s,null,r),s.lanes=l,s}function Zg(s){var r=kn(18,null,null,0);return r.stateNode=s,r}function jf(s,r,l){return r=kn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var ey=new WeakMap;function Jn(s,r){if(typeof s=="object"&&s!==null){var l=ey.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Du(r)},ey.set(s,r),r)}return{value:s,source:r,stack:Du(r)}}var Jo=[],Yo=0,uc=null,ml=0,Yn=[],$n=0,$s=null,Si=1,wi="";function Xi(s,r){Jo[Yo++]=ml,Jo[Yo++]=uc,uc=s,ml=r}function ty(s,r,l){Yn[$n++]=Si,Yn[$n++]=wi,Yn[$n++]=$s,$s=s;var c=Si;s=wi;var v=32-pn(c)-1;c&=~(1<<v),l+=1;var T=32-pn(r)+v;if(30<T){var w=v-v%5;T=(c&(1<<w)-1).toString(32),c>>=w,v-=w,Si=1<<32-pn(r)+v|l<<v|c,wi=T+s}else Si=1<<T|l<<v|c,wi=s}function Jf(s){s.return!==null&&(Xi(s,1),ty(s,1,0))}function Yf(s){for(;s===uc;)uc=Jo[--Yo],Jo[Yo]=null,ml=Jo[--Yo],Jo[Yo]=null;for(;s===$s;)$s=Yn[--$n],Yn[$n]=null,wi=Yn[--$n],Yn[$n]=null,Si=Yn[--$n],Yn[$n]=null}function ny(s,r){Yn[$n++]=Si,Yn[$n++]=wi,Yn[$n++]=$s,Si=r.id,wi=r.overflow,$s=s}var Yt=null,ft=null,He=!1,Ks=null,Kn=!1,$f=Error(i(519));function Ws(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(Jn(r,s)),$f}function iy(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[vt]=s,r[Jt]=c,l){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(l=0;l<Vl.length;l++)Oe(Vl[l],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),Fr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Fs(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||T0(r.textContent,l)?(c.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),c.onScroll!=null&&Oe("scroll",r),c.onScrollEnd!=null&&Oe("scrollend",r),c.onClick!=null&&(r.onclick=Ft),r=!0):r=!1,r||Ws(s,!0)}function sy(s){for(Yt=s.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:Yt=Yt.return}}function $o(s){if(s!==Yt)return!1;if(!He)return sy(s),He=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||fm(s.type,s.memoizedProps)),l=!l),l&&ft&&Ws(s),sy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ft=R0(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ft=R0(s)}else r===27?(r=ft,cr(s.type)?(s=ym,ym=null,ft=s):ft=r):ft=Yt?Qn(s.stateNode.nextSibling):null;return!0}function Qr(){ft=Yt=null,He=!1}function Kf(){var s=Ks;return s!==null&&(Rn===null?Rn=s:Rn.push.apply(Rn,s),Ks=null),s}function pl(s){Ks===null?Ks=[s]:Ks.push(s)}var Wf=H(null),Xr=null,Zi=null;function Qs(s,r,l){W(Wf,r._currentValue),r._currentValue=l}function es(s){s._currentValue=Wf.current,se(Wf)}function Qf(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Xf(s,r,l,c){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var T=v.dependencies;if(T!==null){var w=v.child;T=T.firstContext;e:for(;T!==null;){var b=T;T=v;for(var F=0;F<r.length;F++)if(b.context===r[F]){T.lanes|=l,b=T.alternate,b!==null&&(b.lanes|=l),Qf(T.return,l,s),c||(w=null);break e}T=b.next}}else if(v.tag===18){if(w=v.return,w===null)throw Error(i(341));w.lanes|=l,T=w.alternate,T!==null&&(T.lanes|=l),Qf(w,l,s),w=null}else w=v.child;if(w!==null)w.return=v;else for(w=v;w!==null;){if(w===s){w=null;break}if(v=w.sibling,v!==null){v.return=w.return,w=v;break}w=w.return}v=w}}function Ko(s,r,l,c){s=null;for(var v=r,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var w=v.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var b=v.type;Pn(v.pendingProps.value,w.value)||(s!==null?s.push(b):s=[b])}}else if(v===be.current){if(w=v.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Hl):s=[Hl])}v=v.return}s!==null&&Xf(r,s,l,c),r.flags|=262144}function cc(s){for(s=s.firstContext;s!==null;){if(!Pn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Zr(s){Xr=s,Zi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $t(s){return ry(Xr,s)}function dc(s,r){return Xr===null&&Zr(s),ry(s,r)}function ry(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Zi===null){if(s===null)throw Error(i(308));Zi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Zi=Zi.next=r;return l}var LA=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},VA=t.unstable_scheduleCallback,OA=t.unstable_NormalPriority,It={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zf(){return{controller:new LA,data:new Map,refCount:0}}function gl(s){s.refCount--,s.refCount===0&&VA(OA,function(){s.controller.abort()})}var yl=null,eh=0,Wo=0,Qo=null;function FA(s,r){if(yl===null){var l=yl=[];eh=0,Wo=im(),Qo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return eh++,r.then(oy,oy),r}function oy(){if(--eh===0&&yl!==null){Qo!==null&&(Qo.status="fulfilled");var s=yl;yl=null,Wo=0,Qo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function BA(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var v=0;v<l.length;v++)(0,l[v])(r)},function(v){for(c.status="rejected",c.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),c}var ay=O.S;O.S=function(s,r){zv=zt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&FA(s,r),ay!==null&&ay(s,r)};var eo=H(null);function th(){var s=eo.current;return s!==null?s:ct.pooledCache}function fc(s,r){r===null?W(eo,eo.current):W(eo,r.pool)}function ly(){var s=th();return s===null?null:{parent:It._currentValue,pool:s}}var Xo=Error(i(460)),nh=Error(i(474)),hc=Error(i(542)),mc={then:function(){}};function uy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function cy(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Ft,Ft),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,fy(s),s;default:if(typeof r.status=="string")r.then(Ft,Ft);else{if(s=ct,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=c}},function(c){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,fy(s),s}throw no=r,Xo}}function to(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(no=l,Xo):l}}var no=null;function dy(){if(no===null)throw Error(i(459));var s=no;return no=null,s}function fy(s){if(s===Xo||s===hc)throw Error(i(483))}var Zo=null,vl=0;function pc(s){var r=vl;return vl+=1,Zo===null&&(Zo=[]),cy(Zo,s,r)}function _l(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function gc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function hy(s){function r(J,G){if(s){var Q=J.deletions;Q===null?(J.deletions=[G],J.flags|=16):Q.push(G)}}function l(J,G){if(!s)return null;for(;G!==null;)r(J,G),G=G.sibling;return null}function c(J){for(var G=new Map;J!==null;)J.key!==null?G.set(J.key,J):G.set(J.index,J),J=J.sibling;return G}function v(J,G){return J=Qi(J,G),J.index=0,J.sibling=null,J}function T(J,G,Q){return J.index=Q,s?(Q=J.alternate,Q!==null?(Q=Q.index,Q<G?(J.flags|=67108866,G):Q):(J.flags|=67108866,G)):(J.flags|=1048576,G)}function w(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function b(J,G,Q,ae){return G===null||G.tag!==6?(G=zf(Q,J.mode,ae),G.return=J,G):(G=v(G,Q),G.return=J,G)}function F(J,G,Q,ae){var Se=Q.type;return Se===V?re(J,G,Q.props.children,ae,Q.key):G!==null&&(G.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&to(Se)===G.type)?(G=v(G,Q.props),_l(G,Q),G.return=J,G):(G=lc(Q.type,Q.key,Q.props,null,J.mode,ae),_l(G,Q),G.return=J,G)}function X(J,G,Q,ae){return G===null||G.tag!==4||G.stateNode.containerInfo!==Q.containerInfo||G.stateNode.implementation!==Q.implementation?(G=jf(Q,J.mode,ae),G.return=J,G):(G=v(G,Q.children||[]),G.return=J,G)}function re(J,G,Q,ae,Se){return G===null||G.tag!==7?(G=Wr(Q,J.mode,ae,Se),G.return=J,G):(G=v(G,Q),G.return=J,G)}function le(J,G,Q){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=zf(""+G,J.mode,Q),G.return=J,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case C:return Q=lc(G.type,G.key,G.props,null,J.mode,Q),_l(Q,G),Q.return=J,Q;case M:return G=jf(G,J.mode,Q),G.return=J,G;case N:return G=to(G),le(J,G,Q)}if(ge(G)||q(G))return G=Wr(G,J.mode,Q,null),G.return=J,G;if(typeof G.then=="function")return le(J,pc(G),Q);if(G.$$typeof===j)return le(J,dc(J,G),Q);gc(J,G)}return null}function Z(J,G,Q,ae){var Se=G!==null?G.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Se!==null?null:b(J,G,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:return Q.key===Se?F(J,G,Q,ae):null;case M:return Q.key===Se?X(J,G,Q,ae):null;case N:return Q=to(Q),Z(J,G,Q,ae)}if(ge(Q)||q(Q))return Se!==null?null:re(J,G,Q,ae,null);if(typeof Q.then=="function")return Z(J,G,pc(Q),ae);if(Q.$$typeof===j)return Z(J,G,dc(J,Q),ae);gc(J,Q)}return null}function ee(J,G,Q,ae,Se){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return J=J.get(Q)||null,b(G,J,""+ae,Se);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case C:return J=J.get(ae.key===null?Q:ae.key)||null,F(G,J,ae,Se);case M:return J=J.get(ae.key===null?Q:ae.key)||null,X(G,J,ae,Se);case N:return ae=to(ae),ee(J,G,Q,ae,Se)}if(ge(ae)||q(ae))return J=J.get(Q)||null,re(G,J,ae,Se,null);if(typeof ae.then=="function")return ee(J,G,Q,pc(ae),Se);if(ae.$$typeof===j)return ee(J,G,Q,dc(G,ae),Se);gc(G,ae)}return null}function ve(J,G,Q,ae){for(var Se=null,Ye=null,Ee=G,Ue=G=0,Be=null;Ee!==null&&Ue<Q.length;Ue++){Ee.index>Ue?(Be=Ee,Ee=null):Be=Ee.sibling;var $e=Z(J,Ee,Q[Ue],ae);if($e===null){Ee===null&&(Ee=Be);break}s&&Ee&&$e.alternate===null&&r(J,Ee),G=T($e,G,Ue),Ye===null?Se=$e:Ye.sibling=$e,Ye=$e,Ee=Be}if(Ue===Q.length)return l(J,Ee),He&&Xi(J,Ue),Se;if(Ee===null){for(;Ue<Q.length;Ue++)Ee=le(J,Q[Ue],ae),Ee!==null&&(G=T(Ee,G,Ue),Ye===null?Se=Ee:Ye.sibling=Ee,Ye=Ee);return He&&Xi(J,Ue),Se}for(Ee=c(Ee);Ue<Q.length;Ue++)Be=ee(Ee,J,Ue,Q[Ue],ae),Be!==null&&(s&&Be.alternate!==null&&Ee.delete(Be.key===null?Ue:Be.key),G=T(Be,G,Ue),Ye===null?Se=Be:Ye.sibling=Be,Ye=Be);return s&&Ee.forEach(function(pr){return r(J,pr)}),He&&Xi(J,Ue),Se}function Ae(J,G,Q,ae){if(Q==null)throw Error(i(151));for(var Se=null,Ye=null,Ee=G,Ue=G=0,Be=null,$e=Q.next();Ee!==null&&!$e.done;Ue++,$e=Q.next()){Ee.index>Ue?(Be=Ee,Ee=null):Be=Ee.sibling;var pr=Z(J,Ee,$e.value,ae);if(pr===null){Ee===null&&(Ee=Be);break}s&&Ee&&pr.alternate===null&&r(J,Ee),G=T(pr,G,Ue),Ye===null?Se=pr:Ye.sibling=pr,Ye=pr,Ee=Be}if($e.done)return l(J,Ee),He&&Xi(J,Ue),Se;if(Ee===null){for(;!$e.done;Ue++,$e=Q.next())$e=le(J,$e.value,ae),$e!==null&&(G=T($e,G,Ue),Ye===null?Se=$e:Ye.sibling=$e,Ye=$e);return He&&Xi(J,Ue),Se}for(Ee=c(Ee);!$e.done;Ue++,$e=Q.next())$e=ee(Ee,J,Ue,$e.value,ae),$e!==null&&(s&&$e.alternate!==null&&Ee.delete($e.key===null?Ue:$e.key),G=T($e,G,Ue),Ye===null?Se=$e:Ye.sibling=$e,Ye=$e);return s&&Ee.forEach(function(QC){return r(J,QC)}),He&&Xi(J,Ue),Se}function lt(J,G,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===V&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:e:{for(var Se=Q.key;G!==null;){if(G.key===Se){if(Se=Q.type,Se===V){if(G.tag===7){l(J,G.sibling),ae=v(G,Q.props.children),ae.return=J,J=ae;break e}}else if(G.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&to(Se)===G.type){l(J,G.sibling),ae=v(G,Q.props),_l(ae,Q),ae.return=J,J=ae;break e}l(J,G);break}else r(J,G);G=G.sibling}Q.type===V?(ae=Wr(Q.props.children,J.mode,ae,Q.key),ae.return=J,J=ae):(ae=lc(Q.type,Q.key,Q.props,null,J.mode,ae),_l(ae,Q),ae.return=J,J=ae)}return w(J);case M:e:{for(Se=Q.key;G!==null;){if(G.key===Se)if(G.tag===4&&G.stateNode.containerInfo===Q.containerInfo&&G.stateNode.implementation===Q.implementation){l(J,G.sibling),ae=v(G,Q.children||[]),ae.return=J,J=ae;break e}else{l(J,G);break}else r(J,G);G=G.sibling}ae=jf(Q,J.mode,ae),ae.return=J,J=ae}return w(J);case N:return Q=to(Q),lt(J,G,Q,ae)}if(ge(Q))return ve(J,G,Q,ae);if(q(Q)){if(Se=q(Q),typeof Se!="function")throw Error(i(150));return Q=Se.call(Q),Ae(J,G,Q,ae)}if(typeof Q.then=="function")return lt(J,G,pc(Q),ae);if(Q.$$typeof===j)return lt(J,G,dc(J,Q),ae);gc(J,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,G!==null&&G.tag===6?(l(J,G.sibling),ae=v(G,Q),ae.return=J,J=ae):(l(J,G),ae=zf(Q,J.mode,ae),ae.return=J,J=ae),w(J)):l(J,G)}return function(J,G,Q,ae){try{vl=0;var Se=lt(J,G,Q,ae);return Zo=null,Se}catch(Ee){if(Ee===Xo||Ee===hc)throw Ee;var Ye=kn(29,Ee,null,J.mode);return Ye.lanes=ae,Ye.return=J,Ye}finally{}}}var io=hy(!0),my=hy(!1),Xs=!1;function ih(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Zs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function er(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var v=c.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),c.pending=r,r=ac(s),Qg(s,null,l),r}return oc(s,c,r,l),ac(s)}function Tl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ds(s,l)}}function rh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var v=null,T=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};T===null?v=T=w:T=T.next=w,l=l.next}while(l!==null);T===null?v=T=r:T=T.next=r}else v=T=r;l={baseState:c.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var oh=!1;function El(){if(oh){var s=Qo;if(s!==null)throw s}}function xl(s,r,l,c){oh=!1;var v=s.updateQueue;Xs=!1;var T=v.firstBaseUpdate,w=v.lastBaseUpdate,b=v.shared.pending;if(b!==null){v.shared.pending=null;var F=b,X=F.next;F.next=null,w===null?T=X:w.next=X,w=F;var re=s.alternate;re!==null&&(re=re.updateQueue,b=re.lastBaseUpdate,b!==w&&(b===null?re.firstBaseUpdate=X:b.next=X,re.lastBaseUpdate=F))}if(T!==null){var le=v.baseState;w=0,re=X=F=null,b=T;do{var Z=b.lane&-536870913,ee=Z!==b.lane;if(ee?(Fe&Z)===Z:(c&Z)===Z){Z!==0&&Z===Wo&&(oh=!0),re!==null&&(re=re.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ve=s,Ae=b;Z=r;var lt=l;switch(Ae.tag){case 1:if(ve=Ae.payload,typeof ve=="function"){le=ve.call(lt,le,Z);break e}le=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ae.payload,Z=typeof ve=="function"?ve.call(lt,le,Z):ve,Z==null)break e;le=E({},le,Z);break e;case 2:Xs=!0}}Z=b.callback,Z!==null&&(s.flags|=64,ee&&(s.flags|=8192),ee=v.callbacks,ee===null?v.callbacks=[Z]:ee.push(Z))}else ee={lane:Z,tag:b.tag,payload:b.payload,callback:b.callback,next:null},re===null?(X=re=ee,F=le):re=re.next=ee,w|=Z;if(b=b.next,b===null){if(b=v.shared.pending,b===null)break;ee=b,b=ee.next,ee.next=null,v.lastBaseUpdate=ee,v.shared.pending=null}}while(!0);re===null&&(F=le),v.baseState=F,v.firstBaseUpdate=X,v.lastBaseUpdate=re,T===null&&(v.shared.lanes=0),rr|=w,s.lanes=w,s.memoizedState=le}}function py(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function gy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)py(l[s],r)}var ea=H(null),yc=H(0);function yy(s,r){s=us,W(yc,s),W(ea,r),us=s|r.baseLanes}function ah(){W(yc,us),W(ea,ea.current)}function lh(){us=yc.current,se(ea),se(yc)}var Un=H(null),Wn=null;function tr(s){var r=s.alternate;W(wt,wt.current&1),W(Un,s),Wn===null&&(r===null||ea.current!==null||r.memoizedState!==null)&&(Wn=s)}function uh(s){W(wt,wt.current),W(Un,s),Wn===null&&(Wn=s)}function vy(s){s.tag===22?(W(wt,wt.current),W(Un,s),Wn===null&&(Wn=s)):nr()}function nr(){W(wt,wt.current),W(Un,Un.current)}function Ln(s){se(Un),Wn===s&&(Wn=null),se(wt)}var wt=H(0);function vc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||pm(l)||gm(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ts=0,Pe=null,ot=null,Rt=null,_c=!1,ta=!1,so=!1,Tc=0,Sl=0,na=null,qA=0;function Tt(){throw Error(i(321))}function ch(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Pn(s[l],r[l]))return!1;return!0}function dh(s,r,l,c,v,T){return ts=T,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,O.H=s===null||s.memoizedState===null?tv:Ch,so=!1,T=l(c,v),so=!1,ta&&(T=Ty(r,l,c,v)),_y(s),T}function _y(s){O.H=Cl;var r=ot!==null&&ot.next!==null;if(ts=0,Rt=ot=Pe=null,_c=!1,Sl=0,na=null,r)throw Error(i(300));s===null||Nt||(s=s.dependencies,s!==null&&cc(s)&&(Nt=!0))}function Ty(s,r,l,c){Pe=s;var v=0;do{if(ta&&(na=null),Sl=0,ta=!1,25<=v)throw Error(i(301));if(v+=1,Rt=ot=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}O.H=nv,T=r(l,c)}while(ta);return T}function HA(){var s=O.H,r=s.useState()[0];return r=typeof r.then=="function"?wl(r):r,s=s.useState()[0],(ot!==null?ot.memoizedState:null)!==s&&(Pe.flags|=1024),r}function fh(){var s=Tc!==0;return Tc=0,s}function hh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function mh(s){if(_c){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}_c=!1}ts=0,Rt=ot=Pe=null,ta=!1,Sl=Tc=0,na=null}function Tn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Pe.memoizedState=Rt=s:Rt=Rt.next=s,Rt}function At(){if(ot===null){var s=Pe.alternate;s=s!==null?s.memoizedState:null}else s=ot.next;var r=Rt===null?Pe.memoizedState:Rt.next;if(r!==null)Rt=r,ot=s;else{if(s===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));ot=s,s={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Rt===null?Pe.memoizedState=Rt=s:Rt=Rt.next=s}return Rt}function Ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(s){var r=Sl;return Sl+=1,na===null&&(na=[]),s=cy(na,s,r),r=Pe,(Rt===null?r.memoizedState:Rt.next)===null&&(r=r.alternate,O.H=r===null||r.memoizedState===null?tv:Ch),s}function xc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return wl(s);if(s.$$typeof===j)return $t(s)}throw Error(i(438,String(s)))}function ph(s){var r=null,l=Pe.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Ec(),Pe.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=k;return r.index++,l}function ns(s,r){return typeof r=="function"?r(s):r}function Sc(s){var r=At();return gh(r,ot,s)}function gh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var v=s.baseQueue,T=c.pending;if(T!==null){if(v!==null){var w=v.next;v.next=T.next,T.next=w}r.baseQueue=v=T,c.pending=null}if(T=s.baseState,v===null)s.memoizedState=T;else{r=v.next;var b=w=null,F=null,X=r,re=!1;do{var le=X.lane&-536870913;if(le!==X.lane?(Fe&le)===le:(ts&le)===le){var Z=X.revertLane;if(Z===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),le===Wo&&(re=!0);else if((ts&Z)===Z){X=X.next,Z===Wo&&(re=!0);continue}else le={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(b=F=le,w=T):F=F.next=le,Pe.lanes|=Z,rr|=Z;le=X.action,so&&l(T,le),T=X.hasEagerState?X.eagerState:l(T,le)}else Z={lane:le,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(b=F=Z,w=T):F=F.next=Z,Pe.lanes|=le,rr|=le;X=X.next}while(X!==null&&X!==r);if(F===null?w=T:F.next=b,!Pn(T,s.memoizedState)&&(Nt=!0,re&&(l=Qo,l!==null)))throw l;s.memoizedState=T,s.baseState=w,s.baseQueue=F,c.lastRenderedState=T}return v===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function yh(s){var r=At(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,v=l.pending,T=r.memoizedState;if(v!==null){l.pending=null;var w=v=v.next;do T=s(T,w.action),w=w.next;while(w!==v);Pn(T,r.memoizedState)||(Nt=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),l.lastRenderedState=T}return[T,c]}function Ey(s,r,l){var c=Pe,v=At(),T=He;if(T){if(l===void 0)throw Error(i(407));l=l()}else l=r();var w=!Pn((ot||v).memoizedState,l);if(w&&(v.memoizedState=l,Nt=!0),v=v.queue,Th(wy.bind(null,c,v,s),[s]),v.getSnapshot!==r||w||Rt!==null&&Rt.memoizedState.tag&1){if(c.flags|=2048,ia(9,{destroy:void 0},Sy.bind(null,c,v,l,r),null),ct===null)throw Error(i(349));T||(ts&127)!==0||xy(c,r,l)}return l}function xy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Pe.updateQueue,r===null?(r=Ec(),Pe.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function Sy(s,r,l,c){r.value=l,r.getSnapshot=c,Ay(r)&&Cy(s)}function wy(s,r,l){return l(function(){Ay(r)&&Cy(s)})}function Ay(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Pn(s,l)}catch{return!0}}function Cy(s){var r=Kr(s,2);r!==null&&Nn(r,s,2)}function vh(s){var r=Tn();if(typeof s=="function"){var l=s;if(s=l(),so){qn(!0);try{l()}finally{qn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:s},r}function by(s,r,l,c){return s.baseState=l,gh(s,ot,typeof c=="function"?c:ns)}function GA(s,r,l,c,v){if(Cc(s))throw Error(i(485));if(s=r.action,s!==null){var T={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){T.listeners.push(w)}};O.T!==null?l(!0):T.isTransition=!1,c(T),l=r.pending,l===null?(T.next=r.pending=T,Iy(r,T)):(T.next=l.next,r.pending=l.next=T)}}function Iy(s,r){var l=r.action,c=r.payload,v=s.state;if(r.isTransition){var T=O.T,w={};O.T=w;try{var b=l(v,c),F=O.S;F!==null&&F(w,b),Ry(s,r,b)}catch(X){_h(s,r,X)}finally{T!==null&&w.types!==null&&(T.types=w.types),O.T=T}}else try{T=l(v,c),Ry(s,r,T)}catch(X){_h(s,r,X)}}function Ry(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Ny(s,r,c)},function(c){return _h(s,r,c)}):Ny(s,r,l)}function Ny(s,r,l){r.status="fulfilled",r.value=l,My(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,Iy(s,l)))}function _h(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,My(r),r=r.next;while(r!==c)}s.action=null}function My(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Dy(s,r){return r}function Py(s,r){if(He){var l=ct.formState;if(l!==null){e:{var c=Pe;if(He){if(ft){t:{for(var v=ft,T=Kn;v.nodeType!==8;){if(!T){v=null;break t}if(v=Qn(v.nextSibling),v===null){v=null;break t}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){ft=Qn(v.nextSibling),c=v.data==="F!";break e}}Ws(c)}c=!1}c&&(r=l[0])}}return l=Tn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dy,lastRenderedState:r},l.queue=c,l=Xy.bind(null,Pe,c),c.dispatch=l,c=vh(!1),T=Ah.bind(null,Pe,!1,c.queue),c=Tn(),v={state:r,dispatch:null,action:s,pending:null},c.queue=v,l=GA.bind(null,Pe,v,T,l),v.dispatch=l,c.memoizedState=s,[r,l,!1]}function ky(s){var r=At();return Uy(r,ot,s)}function Uy(s,r,l){if(r=gh(s,r,Dy)[0],s=Sc(ns)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=wl(r)}catch(w){throw w===Xo?hc:w}else c=r;r=At();var v=r.queue,T=v.dispatch;return l!==r.memoizedState&&(Pe.flags|=2048,ia(9,{destroy:void 0},zA.bind(null,v,l),null)),[c,T,s]}function zA(s,r){s.action=r}function Ly(s){var r=At(),l=ot;if(l!==null)return Uy(r,l,s);At(),r=r.memoizedState,l=At();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function ia(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=Ec(),Pe.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function Vy(){return At().memoizedState}function wc(s,r,l,c){var v=Tn();Pe.flags|=s,v.memoizedState=ia(1|r,{destroy:void 0},l,c===void 0?null:c)}function Ac(s,r,l,c){var v=At();c=c===void 0?null:c;var T=v.memoizedState.inst;ot!==null&&c!==null&&ch(c,ot.memoizedState.deps)?v.memoizedState=ia(r,T,l,c):(Pe.flags|=s,v.memoizedState=ia(1|r,T,l,c))}function Oy(s,r){wc(8390656,8,s,r)}function Th(s,r){Ac(2048,8,s,r)}function jA(s){Pe.flags|=4;var r=Pe.updateQueue;if(r===null)r=Ec(),Pe.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function Fy(s){var r=At().memoizedState;return jA({ref:r,nextImpl:s}),function(){if((Xe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function By(s,r){return Ac(4,2,s,r)}function qy(s,r){return Ac(4,4,s,r)}function Hy(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Gy(s,r,l){l=l!=null?l.concat([s]):null,Ac(4,4,Hy.bind(null,r,s),l)}function Eh(){}function zy(s,r){var l=At();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&ch(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function jy(s,r){var l=At();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&ch(r,c[1]))return c[0];if(c=s(),so){qn(!0);try{s()}finally{qn(!1)}}return l.memoizedState=[c,r],c}function xh(s,r,l){return l===void 0||(ts&1073741824)!==0&&(Fe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=Jv(),Pe.lanes|=s,rr|=s,l)}function Jy(s,r,l,c){return Pn(l,r)?l:ea.current!==null?(s=xh(s,l,c),Pn(s,r)||(Nt=!0),s):(ts&42)===0||(ts&1073741824)!==0&&(Fe&261930)===0?(Nt=!0,s.memoizedState=l):(s=Jv(),Pe.lanes|=s,rr|=s,r)}function Yy(s,r,l,c,v){var T=te.p;te.p=T!==0&&8>T?T:8;var w=O.T,b={};O.T=b,Ah(s,!1,r,l);try{var F=v(),X=O.S;if(X!==null&&X(b,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var re=BA(F,c);Al(s,r,re,Fn(s))}else Al(s,r,c,Fn(s))}catch(le){Al(s,r,{then:function(){},status:"rejected",reason:le},Fn())}finally{te.p=T,w!==null&&b.types!==null&&(w.types=b.types),O.T=w}}function JA(){}function Sh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var v=$y(s).queue;Yy(s,v,r,fe,l===null?JA:function(){return Ky(s),l(c)})}function $y(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:fe},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Ky(s){var r=$y(s);r.next===null&&(r=s.alternate.memoizedState),Al(s,r.next.queue,{},Fn())}function wh(){return $t(Hl)}function Wy(){return At().memoizedState}function Qy(){return At().memoizedState}function YA(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Fn();s=Zs(l);var c=er(r,s,l);c!==null&&(Nn(c,r,l),Tl(c,r,l)),r={cache:Zf()},s.payload=r;return}r=r.return}}function $A(s,r,l){var c=Fn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Cc(s)?Zy(r,l):(l=Hf(s,r,l,c),l!==null&&(Nn(l,s,c),ev(l,r,c)))}function Xy(s,r,l){var c=Fn();Al(s,r,l,c)}function Al(s,r,l,c){var v={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Cc(s))Zy(r,v);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var w=r.lastRenderedState,b=T(w,l);if(v.hasEagerState=!0,v.eagerState=b,Pn(b,w))return oc(s,r,v,0),ct===null&&rc(),!1}catch{}finally{}if(l=Hf(s,r,v,c),l!==null)return Nn(l,s,c),ev(l,r,c),!0}return!1}function Ah(s,r,l,c){if(c={lane:2,revertLane:im(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Cc(s)){if(r)throw Error(i(479))}else r=Hf(s,l,c,2),r!==null&&Nn(r,s,2)}function Cc(s){var r=s.alternate;return s===Pe||r!==null&&r===Pe}function Zy(s,r){ta=_c=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function ev(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ds(s,l)}}var Cl={readContext:$t,use:xc,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};Cl.useEffectEvent=Tt;var tv={readContext:$t,use:xc,useCallback:function(s,r){return Tn().memoizedState=[s,r===void 0?null:r],s},useContext:$t,useEffect:Oy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,wc(4194308,4,Hy.bind(null,r,s),l)},useLayoutEffect:function(s,r){return wc(4194308,4,s,r)},useInsertionEffect:function(s,r){wc(4,2,s,r)},useMemo:function(s,r){var l=Tn();r=r===void 0?null:r;var c=s();if(so){qn(!0);try{s()}finally{qn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=Tn();if(l!==void 0){var v=l(r);if(so){qn(!0);try{l(r)}finally{qn(!1)}}}else v=r;return c.memoizedState=c.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},c.queue=s,s=s.dispatch=$A.bind(null,Pe,s),[c.memoizedState,s]},useRef:function(s){var r=Tn();return s={current:s},r.memoizedState=s},useState:function(s){s=vh(s);var r=s.queue,l=Xy.bind(null,Pe,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Eh,useDeferredValue:function(s,r){var l=Tn();return xh(l,s,r)},useTransition:function(){var s=vh(!1);return s=Yy.bind(null,Pe,s.queue,!0,!1),Tn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Pe,v=Tn();if(He){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ct===null)throw Error(i(349));(Fe&127)!==0||xy(c,r,l)}v.memoizedState=l;var T={value:l,getSnapshot:r};return v.queue=T,Oy(wy.bind(null,c,T,s),[s]),c.flags|=2048,ia(9,{destroy:void 0},Sy.bind(null,c,T,l,r),null),l},useId:function(){var s=Tn(),r=ct.identifierPrefix;if(He){var l=wi,c=Si;l=(c&~(1<<32-pn(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Tc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=qA++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:wh,useFormState:Py,useActionState:Py,useOptimistic:function(s){var r=Tn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Ah.bind(null,Pe,!0,l),l.dispatch=r,[s,r]},useMemoCache:ph,useCacheRefresh:function(){return Tn().memoizedState=YA.bind(null,Pe)},useEffectEvent:function(s){var r=Tn(),l={impl:s};return r.memoizedState=l,function(){if((Xe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Ch={readContext:$t,use:xc,useCallback:zy,useContext:$t,useEffect:Th,useImperativeHandle:Gy,useInsertionEffect:By,useLayoutEffect:qy,useMemo:jy,useReducer:Sc,useRef:Vy,useState:function(){return Sc(ns)},useDebugValue:Eh,useDeferredValue:function(s,r){var l=At();return Jy(l,ot.memoizedState,s,r)},useTransition:function(){var s=Sc(ns)[0],r=At().memoizedState;return[typeof s=="boolean"?s:wl(s),r]},useSyncExternalStore:Ey,useId:Wy,useHostTransitionStatus:wh,useFormState:ky,useActionState:ky,useOptimistic:function(s,r){var l=At();return by(l,ot,s,r)},useMemoCache:ph,useCacheRefresh:Qy};Ch.useEffectEvent=Fy;var nv={readContext:$t,use:xc,useCallback:zy,useContext:$t,useEffect:Th,useImperativeHandle:Gy,useInsertionEffect:By,useLayoutEffect:qy,useMemo:jy,useReducer:yh,useRef:Vy,useState:function(){return yh(ns)},useDebugValue:Eh,useDeferredValue:function(s,r){var l=At();return ot===null?xh(l,s,r):Jy(l,ot.memoizedState,s,r)},useTransition:function(){var s=yh(ns)[0],r=At().memoizedState;return[typeof s=="boolean"?s:wl(s),r]},useSyncExternalStore:Ey,useId:Wy,useHostTransitionStatus:wh,useFormState:Ly,useActionState:Ly,useOptimistic:function(s,r){var l=At();return ot!==null?by(l,ot,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:ph,useCacheRefresh:Qy};nv.useEffectEvent=Fy;function bh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:E({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Ih={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Fn(),v=Zs(c);v.payload=r,l!=null&&(v.callback=l),r=er(s,v,c),r!==null&&(Nn(r,s,c),Tl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Fn(),v=Zs(c);v.tag=1,v.payload=r,l!=null&&(v.callback=l),r=er(s,v,c),r!==null&&(Nn(r,s,c),Tl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Fn(),c=Zs(l);c.tag=2,r!=null&&(c.callback=r),r=er(s,c,l),r!==null&&(Nn(r,s,l),Tl(r,s,l))}};function iv(s,r,l,c,v,T,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,T,w):r.prototype&&r.prototype.isPureReactComponent?!fl(l,c)||!fl(v,T):!0}function sv(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Ih.enqueueReplaceState(r,r.state,null)}function ro(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=E({},l));for(var v in s)l[v]===void 0&&(l[v]=s[v])}return l}function rv(s){sc(s)}function ov(s){console.error(s)}function av(s){sc(s)}function bc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function lv(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Rh(s,r,l){return l=Zs(l),l.tag=3,l.payload={element:null},l.callback=function(){bc(s,r)},l}function uv(s){return s=Zs(s),s.tag=3,s}function cv(s,r,l,c){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var T=c.value;s.payload=function(){return v(T)},s.callback=function(){lv(r,l,c)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){lv(r,l,c),typeof v!="function"&&(or===null?or=new Set([this]):or.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function KA(s,r,l,c,v){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Ko(r,l,v,!0),l=Un.current,l!==null){switch(l.tag){case 31:case 13:return Wn===null?Fc():l.alternate===null&&Et===0&&(Et=3),l.flags&=-257,l.flags|=65536,l.lanes=v,c===mc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),em(s,c,v)),!1;case 22:return l.flags|=65536,c===mc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),em(s,c,v)),!1}throw Error(i(435,l.tag))}return em(s,c,v),Fc(),!1}if(He)return r=Un.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,c!==$f&&(s=Error(i(422),{cause:c}),pl(Jn(s,l)))):(c!==$f&&(r=Error(i(423),{cause:c}),pl(Jn(r,l))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,c=Jn(c,l),v=Rh(s.stateNode,c,v),rh(s,v),Et!==4&&(Et=2)),!1;var T=Error(i(520),{cause:c});if(T=Jn(T,l),kl===null?kl=[T]:kl.push(T),Et!==4&&(Et=2),r===null)return!0;c=Jn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=v&-v,l.lanes|=s,s=Rh(l.stateNode,c,s),rh(l,s),!1;case 1:if(r=l.type,T=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(or===null||!or.has(T))))return l.flags|=65536,v&=-v,l.lanes|=v,v=uv(v),cv(v,s,l,c),rh(l,v),!1}l=l.return}while(l!==null);return!1}var Nh=Error(i(461)),Nt=!1;function Kt(s,r,l,c){r.child=s===null?my(r,null,l,c):io(r,s.child,l,c)}function dv(s,r,l,c,v){l=l.render;var T=r.ref;if("ref"in c){var w={};for(var b in c)b!=="ref"&&(w[b]=c[b])}else w=c;return Zr(r),c=dh(s,r,l,w,T,v),b=fh(),s!==null&&!Nt?(hh(s,r,v),is(s,r,v)):(He&&b&&Jf(r),r.flags|=1,Kt(s,r,c,v),r.child)}function fv(s,r,l,c,v){if(s===null){var T=l.type;return typeof T=="function"&&!Gf(T)&&T.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=T,hv(s,r,T,c,v)):(s=lc(l.type,null,c,r,r.mode,v),s.ref=r.ref,s.return=r,r.child=s)}if(T=s.child,!Oh(s,v)){var w=T.memoizedProps;if(l=l.compare,l=l!==null?l:fl,l(w,c)&&s.ref===r.ref)return is(s,r,v)}return r.flags|=1,s=Qi(T,c),s.ref=r.ref,s.return=r,r.child=s}function hv(s,r,l,c,v){if(s!==null){var T=s.memoizedProps;if(fl(T,c)&&s.ref===r.ref)if(Nt=!1,r.pendingProps=c=T,Oh(s,v))(s.flags&131072)!==0&&(Nt=!0);else return r.lanes=s.lanes,is(s,r,v)}return Mh(s,r,l,c,v)}function mv(s,r,l,c){var v=c.children,T=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(T=T!==null?T.baseLanes|l:l,s!==null){for(c=r.child=s.child,v=0;c!==null;)v=v|c.lanes|c.childLanes,c=c.sibling;c=v&~T}else c=0,r.child=null;return pv(s,r,T,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&fc(r,T!==null?T.cachePool:null),T!==null?yy(r,T):ah(),vy(r);else return c=r.lanes=536870912,pv(s,r,T!==null?T.baseLanes|l:l,l,c)}else T!==null?(fc(r,T.cachePool),yy(r,T),nr(),r.memoizedState=null):(s!==null&&fc(r,null),ah(),nr());return Kt(s,r,v,l),r.child}function bl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function pv(s,r,l,c,v){var T=th();return T=T===null?null:{parent:It._currentValue,pool:T},r.memoizedState={baseLanes:l,cachePool:T},s!==null&&fc(r,null),ah(),vy(r),s!==null&&Ko(s,r,c,!0),r.childLanes=v,null}function Ic(s,r){return r=Nc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function gv(s,r,l){return io(r,s.child,null,l),s=Ic(r,r.pendingProps),s.flags|=2,Ln(r),r.memoizedState=null,s}function WA(s,r,l){var c=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(He){if(c.mode==="hidden")return s=Ic(r,c),r.lanes=536870912,bl(null,s);if(uh(r),(s=ft)?(s=I0(s,Kn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:$s!==null?{id:Si,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=Zg(s),l.return=r,r.child=l,Yt=r,ft=null)):s=null,s===null)throw Ws(r);return r.lanes=536870912,null}return Ic(r,c)}var T=s.memoizedState;if(T!==null){var w=T.dehydrated;if(uh(r),v)if(r.flags&256)r.flags&=-257,r=gv(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Nt||Ko(s,r,l,!1),v=(l&s.childLanes)!==0,Nt||v){if(c=ct,c!==null&&(w=Ps(c,l),w!==0&&w!==T.retryLane))throw T.retryLane=w,Kr(s,w),Nn(c,s,w),Nh;Fc(),r=gv(s,r,l)}else s=T.treeContext,ft=Qn(w.nextSibling),Yt=r,He=!0,Ks=null,Kn=!1,s!==null&&ny(r,s),r=Ic(r,c),r.flags|=4096;return r}return s=Qi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Rc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Mh(s,r,l,c,v){return Zr(r),l=dh(s,r,l,c,void 0,v),c=fh(),s!==null&&!Nt?(hh(s,r,v),is(s,r,v)):(He&&c&&Jf(r),r.flags|=1,Kt(s,r,l,v),r.child)}function yv(s,r,l,c,v,T){return Zr(r),r.updateQueue=null,l=Ty(r,c,l,v),_y(s),c=fh(),s!==null&&!Nt?(hh(s,r,T),is(s,r,T)):(He&&c&&Jf(r),r.flags|=1,Kt(s,r,l,T),r.child)}function vv(s,r,l,c,v){if(Zr(r),r.stateNode===null){var T=jo,w=l.contextType;typeof w=="object"&&w!==null&&(T=$t(w)),T=new l(c,T),r.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Ih,r.stateNode=T,T._reactInternals=r,T=r.stateNode,T.props=c,T.state=r.memoizedState,T.refs={},ih(r),w=l.contextType,T.context=typeof w=="object"&&w!==null?$t(w):jo,T.state=r.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(bh(r,l,w,c),T.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(w=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),w!==T.state&&Ih.enqueueReplaceState(T,T.state,null),xl(r,c,T,v),El(),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){T=r.stateNode;var b=r.memoizedProps,F=ro(l,b);T.props=F;var X=T.context,re=l.contextType;w=jo,typeof re=="object"&&re!==null&&(w=$t(re));var le=l.getDerivedStateFromProps;re=typeof le=="function"||typeof T.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,re||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(b||X!==w)&&sv(r,T,c,w),Xs=!1;var Z=r.memoizedState;T.state=Z,xl(r,c,T,v),El(),X=r.memoizedState,b||Z!==X||Xs?(typeof le=="function"&&(bh(r,l,le,c),X=r.memoizedState),(F=Xs||iv(r,l,F,c,Z,X,w))?(re||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=X),T.props=c,T.state=X,T.context=w,c=F):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{T=r.stateNode,sh(s,r),w=r.memoizedProps,re=ro(l,w),T.props=re,le=r.pendingProps,Z=T.context,X=l.contextType,F=jo,typeof X=="object"&&X!==null&&(F=$t(X)),b=l.getDerivedStateFromProps,(X=typeof b=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(w!==le||Z!==F)&&sv(r,T,c,F),Xs=!1,Z=r.memoizedState,T.state=Z,xl(r,c,T,v),El();var ee=r.memoizedState;w!==le||Z!==ee||Xs||s!==null&&s.dependencies!==null&&cc(s.dependencies)?(typeof b=="function"&&(bh(r,l,b,c),ee=r.memoizedState),(re=Xs||iv(r,l,re,c,Z,ee,F)||s!==null&&s.dependencies!==null&&cc(s.dependencies))?(X||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(c,ee,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(c,ee,F)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ee),T.props=c,T.state=ee,T.context=F,c=re):(typeof T.componentDidUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&Z===s.memoizedState||(r.flags|=1024),c=!1)}return T=c,Rc(s,r),c=(r.flags&128)!==0,T||c?(T=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:T.render(),r.flags|=1,s!==null&&c?(r.child=io(r,s.child,null,v),r.child=io(r,null,l,v)):Kt(s,r,l,v),r.memoizedState=T.state,s=r.child):s=is(s,r,v),s}function _v(s,r,l,c){return Qr(),r.flags|=256,Kt(s,r,l,c),r.child}var Dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ph(s){return{baseLanes:s,cachePool:ly()}}function kh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=On),s}function Tv(s,r,l){var c=r.pendingProps,v=!1,T=(r.flags&128)!==0,w;if((w=T)||(w=s!==null&&s.memoizedState===null?!1:(wt.current&2)!==0),w&&(v=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,s===null){if(He){if(v?tr(r):nr(),(s=ft)?(s=I0(s,Kn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:$s!==null?{id:Si,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=Zg(s),l.return=r,r.child=l,Yt=r,ft=null)):s=null,s===null)throw Ws(r);return gm(s)?r.lanes=32:r.lanes=536870912,null}var b=c.children;return c=c.fallback,v?(nr(),v=r.mode,b=Nc({mode:"hidden",children:b},v),c=Wr(c,v,l,null),b.return=r,c.return=r,b.sibling=c,r.child=b,c=r.child,c.memoizedState=Ph(l),c.childLanes=kh(s,w,l),r.memoizedState=Dh,bl(null,c)):(tr(r),Uh(r,b))}var F=s.memoizedState;if(F!==null&&(b=F.dehydrated,b!==null)){if(T)r.flags&256?(tr(r),r.flags&=-257,r=Lh(s,r,l)):r.memoizedState!==null?(nr(),r.child=s.child,r.flags|=128,r=null):(nr(),b=c.fallback,v=r.mode,c=Nc({mode:"visible",children:c.children},v),b=Wr(b,v,l,null),b.flags|=2,c.return=r,b.return=r,c.sibling=b,r.child=c,io(r,s.child,null,l),c=r.child,c.memoizedState=Ph(l),c.childLanes=kh(s,w,l),r.memoizedState=Dh,r=bl(null,c));else if(tr(r),gm(b)){if(w=b.nextSibling&&b.nextSibling.dataset,w)var X=w.dgst;w=X,c=Error(i(419)),c.stack="",c.digest=w,pl({value:c,source:null,stack:null}),r=Lh(s,r,l)}else if(Nt||Ko(s,r,l,!1),w=(l&s.childLanes)!==0,Nt||w){if(w=ct,w!==null&&(c=Ps(w,l),c!==0&&c!==F.retryLane))throw F.retryLane=c,Kr(s,c),Nn(w,s,c),Nh;pm(b)||Fc(),r=Lh(s,r,l)}else pm(b)?(r.flags|=192,r.child=s.child,r=null):(s=F.treeContext,ft=Qn(b.nextSibling),Yt=r,He=!0,Ks=null,Kn=!1,s!==null&&ny(r,s),r=Uh(r,c.children),r.flags|=4096);return r}return v?(nr(),b=c.fallback,v=r.mode,F=s.child,X=F.sibling,c=Qi(F,{mode:"hidden",children:c.children}),c.subtreeFlags=F.subtreeFlags&65011712,X!==null?b=Qi(X,b):(b=Wr(b,v,l,null),b.flags|=2),b.return=r,c.return=r,c.sibling=b,r.child=c,bl(null,c),c=r.child,b=s.child.memoizedState,b===null?b=Ph(l):(v=b.cachePool,v!==null?(F=It._currentValue,v=v.parent!==F?{parent:F,pool:F}:v):v=ly(),b={baseLanes:b.baseLanes|l,cachePool:v}),c.memoizedState=b,c.childLanes=kh(s,w,l),r.memoizedState=Dh,bl(s.child,c)):(tr(r),l=s.child,s=l.sibling,l=Qi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(w=r.deletions,w===null?(r.deletions=[s],r.flags|=16):w.push(s)),r.child=l,r.memoizedState=null,l)}function Uh(s,r){return r=Nc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Nc(s,r){return s=kn(22,s,null,r),s.lanes=0,s}function Lh(s,r,l){return io(r,s.child,null,l),s=Uh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Ev(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Qf(s.return,r,l)}function Vh(s,r,l,c,v,T){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:v,treeForkCount:T}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=l,w.tailMode=v,w.treeForkCount=T)}function xv(s,r,l){var c=r.pendingProps,v=c.revealOrder,T=c.tail;c=c.children;var w=wt.current,b=(w&2)!==0;if(b?(w=w&1|2,r.flags|=128):w&=1,W(wt,w),Kt(s,r,c,l),c=He?ml:0,!b&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ev(s,l,r);else if(s.tag===19)Ev(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(v){case"forwards":for(l=r.child,v=null;l!==null;)s=l.alternate,s!==null&&vc(s)===null&&(v=l),l=l.sibling;l=v,l===null?(v=r.child,r.child=null):(v=l.sibling,l.sibling=null),Vh(r,!1,v,l,T,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=r.child,r.child=null;v!==null;){if(s=v.alternate,s!==null&&vc(s)===null){r.child=v;break}s=v.sibling,v.sibling=l,l=v,v=s}Vh(r,!0,l,null,T,c);break;case"together":Vh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function is(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),rr|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Ko(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Qi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Qi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Oh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&cc(s)))}function QA(s,r,l){switch(r.tag){case 3:tt(r,r.stateNode.containerInfo),Qs(r,It,s.memoizedState.cache),Qr();break;case 27:case 5:mn(r);break;case 4:tt(r,r.stateNode.containerInfo);break;case 10:Qs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,uh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(tr(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Tv(s,r,l):(tr(r),s=is(s,r,l),s!==null?s.sibling:null);tr(r);break;case 19:var v=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Ko(s,r,l,!1),c=(l&r.childLanes)!==0),v){if(c)return xv(s,r,l);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),W(wt,wt.current),c)break;return null;case 22:return r.lanes=0,mv(s,r,l,r.pendingProps);case 24:Qs(r,It,s.memoizedState.cache)}return is(s,r,l)}function Sv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Nt=!0;else{if(!Oh(s,l)&&(r.flags&128)===0)return Nt=!1,QA(s,r,l);Nt=(s.flags&131072)!==0}else Nt=!1,He&&(r.flags&1048576)!==0&&ty(r,ml,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=to(r.elementType),r.type=s,typeof s=="function")Gf(s)?(c=ro(s,c),r.tag=1,r=vv(null,r,s,c,l)):(r.tag=0,r=Mh(null,r,s,c,l));else{if(s!=null){var v=s.$$typeof;if(v===Y){r.tag=11,r=dv(null,r,s,c,l);break e}else if(v===P){r.tag=14,r=fv(null,r,s,c,l);break e}}throw r=je(s)||s,Error(i(306,r,""))}}return r;case 0:return Mh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,v=ro(c,r.pendingProps),vv(s,r,c,v,l);case 3:e:{if(tt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var T=r.memoizedState;v=T.element,sh(s,r),xl(r,c,null,l);var w=r.memoizedState;if(c=w.cache,Qs(r,It,c),c!==T.cache&&Xf(r,[It],l,!0),El(),c=w.element,T.isDehydrated)if(T={element:c,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){r=_v(s,r,c,l);break e}else if(c!==v){v=Jn(Error(i(424)),r),pl(v),r=_v(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ft=Qn(s.firstChild),Yt=r,He=!0,Ks=null,Kn=!0,l=my(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Qr(),c===v){r=is(s,r,l);break e}Kt(s,r,c,l)}r=r.child}return r;case 26:return Rc(s,r),s===null?(l=k0(r.type,null,r.pendingProps,null))?r.memoizedState=l:He||(l=r.type,s=r.pendingProps,c=Jc(ye.current).createElement(l),c[vt]=r,c[Jt]=s,Wt(c,l,s),St(c),r.stateNode=c):r.memoizedState=k0(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return mn(r),s===null&&He&&(c=r.stateNode=M0(r.type,r.pendingProps,ye.current),Yt=r,Kn=!0,v=ft,cr(r.type)?(ym=v,ft=Qn(c.firstChild)):ft=v),Kt(s,r,r.pendingProps.children,l),Rc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&He&&((v=c=ft)&&(c=bC(c,r.type,r.pendingProps,Kn),c!==null?(r.stateNode=c,Yt=r,ft=Qn(c.firstChild),Kn=!1,v=!0):v=!1),v||Ws(r)),mn(r),v=r.type,T=r.pendingProps,w=s!==null?s.memoizedProps:null,c=T.children,fm(v,T)?c=null:w!==null&&fm(v,w)&&(r.flags|=32),r.memoizedState!==null&&(v=dh(s,r,HA,null,null,l),Hl._currentValue=v),Rc(s,r),Kt(s,r,c,l),r.child;case 6:return s===null&&He&&((s=l=ft)&&(l=IC(l,r.pendingProps,Kn),l!==null?(r.stateNode=l,Yt=r,ft=null,s=!0):s=!1),s||Ws(r)),null;case 13:return Tv(s,r,l);case 4:return tt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=io(r,null,c,l):Kt(s,r,c,l),r.child;case 11:return dv(s,r,r.type,r.pendingProps,l);case 7:return Kt(s,r,r.pendingProps,l),r.child;case 8:return Kt(s,r,r.pendingProps.children,l),r.child;case 12:return Kt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Qs(r,r.type,c.value),Kt(s,r,c.children,l),r.child;case 9:return v=r.type._context,c=r.pendingProps.children,Zr(r),v=$t(v),c=c(v),r.flags|=1,Kt(s,r,c,l),r.child;case 14:return fv(s,r,r.type,r.pendingProps,l);case 15:return hv(s,r,r.type,r.pendingProps,l);case 19:return xv(s,r,l);case 31:return WA(s,r,l);case 22:return mv(s,r,l,r.pendingProps);case 24:return Zr(r),c=$t(It),s===null?(v=th(),v===null&&(v=ct,T=Zf(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=l),v=T),r.memoizedState={parent:c,cache:v},ih(r),Qs(r,It,v)):((s.lanes&l)!==0&&(sh(s,r),xl(r,null,null,l),El()),v=s.memoizedState,T=r.memoizedState,v.parent!==c?(v={parent:c,cache:c},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),Qs(r,It,c)):(c=T.cache,Qs(r,It,c),c!==v.cache&&Xf(r,[It],l,!0))),Kt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ss(s){s.flags|=4}function Fh(s,r,l,c,v){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(v&335544128)===v)if(s.stateNode.complete)s.flags|=8192;else if(Wv())s.flags|=8192;else throw no=mc,nh}else s.flags&=-16777217}function wv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!F0(r))if(Wv())s.flags|=8192;else throw no=mc,nh}function Mc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?$a():536870912,s.lanes|=r,aa|=r)}function Il(s,r){if(!He)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ht(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var v=s.child;v!==null;)l|=v.lanes|v.childLanes,c|=v.subtreeFlags&65011712,c|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)l|=v.lanes|v.childLanes,c|=v.subtreeFlags,c|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function XA(s,r,l){var c=r.pendingProps;switch(Yf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(r),null;case 1:return ht(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),es(It),nt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&($o(r)?ss(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Kf())),ht(r),null;case 26:var v=r.type,T=r.memoizedState;return s===null?(ss(r),T!==null?(ht(r),wv(r,T)):(ht(r),Fh(r,v,null,c,l))):T?T!==s.memoizedState?(ss(r),ht(r),wv(r,T)):(ht(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&ss(r),ht(r),Fh(r,v,s,c,l)),null;case 27:if(Sn(r),l=ye.current,v=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ss(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ht(r),null}s=de.current,$o(r)?iy(r):(s=M0(v,c,l),r.stateNode=s,ss(r))}return ht(r),null;case 5:if(Sn(r),v=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ss(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ht(r),null}if(T=de.current,$o(r))iy(r);else{var w=Jc(ye.current);switch(T){case 1:T=w.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:T=w.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":T=w.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":T=w.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":T=w.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?T.multiple=!0:c.size&&(T.size=c.size);break;default:T=typeof c.is=="string"?w.createElement(v,{is:c.is}):w.createElement(v)}}T[vt]=r,T[Jt]=c;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)T.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=T;e:switch(Wt(T,v,c),v){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ss(r)}}return ht(r),Fh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&ss(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=ye.current,$o(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,v=Yt,v!==null)switch(v.tag){case 27:case 5:c=v.memoizedProps}s[vt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||T0(s.nodeValue,l)),s||Ws(r,!0)}else s=Jc(s).createTextNode(c),s[vt]=r,r.stateNode=s}return ht(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=$o(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[vt]=r}else Qr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ht(r),s=!1}else l=Kf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Ln(r),r):(Ln(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ht(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=$o(r),c!==null&&c.dehydrated!==null){if(s===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[vt]=r}else Qr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ht(r),v=!1}else v=Kf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Ln(r),r):(Ln(r),null)}return Ln(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,v=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(v=c.alternate.memoizedState.cachePool.pool),T=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(T=c.memoizedState.cachePool.pool),T!==v&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Mc(r,r.updateQueue),ht(r),null);case 4:return nt(),s===null&&am(r.stateNode.containerInfo),ht(r),null;case 10:return es(r.type),ht(r),null;case 19:if(se(wt),c=r.memoizedState,c===null)return ht(r),null;if(v=(r.flags&128)!==0,T=c.rendering,T===null)if(v)Il(c,!1);else{if(Et!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(T=vc(s),T!==null){for(r.flags|=128,Il(c,!1),s=T.updateQueue,r.updateQueue=s,Mc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)Xg(l,s),l=l.sibling;return W(wt,wt.current&1|2),He&&Xi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&zt()>Lc&&(r.flags|=128,v=!0,Il(c,!1),r.lanes=4194304)}else{if(!v)if(s=vc(T),s!==null){if(r.flags|=128,v=!0,s=s.updateQueue,r.updateQueue=s,Mc(r,s),Il(c,!0),c.tail===null&&c.tailMode==="hidden"&&!T.alternate&&!He)return ht(r),null}else 2*zt()-c.renderingStartTime>Lc&&l!==536870912&&(r.flags|=128,v=!0,Il(c,!1),r.lanes=4194304);c.isBackwards?(T.sibling=r.child,r.child=T):(s=c.last,s!==null?s.sibling=T:r.child=T,c.last=T)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=zt(),s.sibling=null,l=wt.current,W(wt,v?l&1|2:l&1),He&&Xi(r,c.treeForkCount),s):(ht(r),null);case 22:case 23:return Ln(r),lh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ht(r),r.subtreeFlags&6&&(r.flags|=8192)):ht(r),l=r.updateQueue,l!==null&&Mc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&se(eo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),es(It),ht(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function ZA(s,r){switch(Yf(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return es(It),nt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Sn(r),null;case 31:if(r.memoizedState!==null){if(Ln(r),r.alternate===null)throw Error(i(340));Qr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Ln(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Qr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return se(wt),null;case 4:return nt(),null;case 10:return es(r.type),null;case 22:case 23:return Ln(r),lh(),s!==null&&se(eo),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return es(It),null;case 25:return null;default:return null}}function Av(s,r){switch(Yf(r),r.tag){case 3:es(It),nt();break;case 26:case 27:case 5:Sn(r);break;case 4:nt();break;case 31:r.memoizedState!==null&&Ln(r);break;case 13:Ln(r);break;case 19:se(wt);break;case 10:es(r.type);break;case 22:case 23:Ln(r),lh(),s!==null&&se(eo);break;case 24:es(It)}}function Rl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var v=c.next;l=v;do{if((l.tag&s)===s){c=void 0;var T=l.create,w=l.inst;c=T(),w.destroy=c}l=l.next}while(l!==v)}}catch(b){st(r,r.return,b)}}function ir(s,r,l){try{var c=r.updateQueue,v=c!==null?c.lastEffect:null;if(v!==null){var T=v.next;c=T;do{if((c.tag&s)===s){var w=c.inst,b=w.destroy;if(b!==void 0){w.destroy=void 0,v=r;var F=l,X=b;try{X()}catch(re){st(v,F,re)}}}c=c.next}while(c!==T)}}catch(re){st(r,r.return,re)}}function Cv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{gy(r,l)}catch(c){st(s,s.return,c)}}}function bv(s,r,l){l.props=ro(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){st(s,r,c)}}function Nl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(v){st(s,r,v)}}function Ai(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(v){st(s,r,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){st(s,r,v)}else l.current=null}function Iv(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(v){st(s,s.return,v)}}function Bh(s,r,l){try{var c=s.stateNode;EC(c,s.type,l,r),c[Jt]=r}catch(v){st(s,s.return,v)}}function Rv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&cr(s.type)||s.tag===4}function qh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Rv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&cr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Hh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Ft));else if(c!==4&&(c===27&&cr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Hh(s,r,l),s=s.sibling;s!==null;)Hh(s,r,l),s=s.sibling}function Dc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&cr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Dc(s,r,l),s=s.sibling;s!==null;)Dc(s,r,l),s=s.sibling}function Nv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Wt(r,c,l),r[vt]=s,r[Jt]=l}catch(T){st(s,s.return,T)}}var rs=!1,Mt=!1,Gh=!1,Mv=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function eC(s,r){if(s=s.containerInfo,cm=Zc,s=Gg(s),Lf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var v=c.anchorOffset,T=c.focusNode;c=c.focusOffset;try{l.nodeType,T.nodeType}catch{l=null;break e}var w=0,b=-1,F=-1,X=0,re=0,le=s,Z=null;t:for(;;){for(var ee;le!==l||v!==0&&le.nodeType!==3||(b=w+v),le!==T||c!==0&&le.nodeType!==3||(F=w+c),le.nodeType===3&&(w+=le.nodeValue.length),(ee=le.firstChild)!==null;)Z=le,le=ee;for(;;){if(le===s)break t;if(Z===l&&++X===v&&(b=w),Z===T&&++re===c&&(F=w),(ee=le.nextSibling)!==null)break;le=Z,Z=le.parentNode}le=ee}l=b===-1||F===-1?null:{start:b,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(dm={focusedElem:s,selectionRange:l},Zc=!1,Ht=r;Ht!==null;)if(r=Ht,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Ht=s;else for(;Ht!==null;){switch(r=Ht,T=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)v=s[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,l=r,v=T.memoizedProps,T=T.memoizedState,c=l.stateNode;try{var ve=ro(l.type,v);s=c.getSnapshotBeforeUpdate(ve,T),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){st(l,l.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)mm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":mm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Ht=s;break}Ht=r.return}}function Dv(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:as(s,l),c&4&&Rl(5,l);break;case 1:if(as(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(w){st(l,l.return,w)}else{var v=ro(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(v,r,s.__reactInternalSnapshotBeforeUpdate)}catch(w){st(l,l.return,w)}}c&64&&Cv(l),c&512&&Nl(l,l.return);break;case 3:if(as(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{gy(s,r)}catch(w){st(l,l.return,w)}}break;case 27:r===null&&c&4&&Nv(l);case 26:case 5:as(s,l),r===null&&c&4&&Iv(l),c&512&&Nl(l,l.return);break;case 12:as(s,l);break;case 31:as(s,l),c&4&&Uv(s,l);break;case 13:as(s,l),c&4&&Lv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=uC.bind(null,l),RC(s,l))));break;case 22:if(c=l.memoizedState!==null||rs,!c){r=r!==null&&r.memoizedState!==null||Mt,v=rs;var T=Mt;rs=c,(Mt=r)&&!T?ls(s,l,(l.subtreeFlags&8772)!==0):as(s,l),rs=v,Mt=T}break;case 30:break;default:as(s,l)}}function Pv(s){var r=s.alternate;r!==null&&(s.alternate=null,Pv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Vr(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pt=null,Cn=!1;function os(s,r,l){for(l=l.child;l!==null;)kv(s,r,l),l=l.sibling}function kv(s,r,l){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Is,l)}catch{}switch(l.tag){case 26:Mt||Ai(l,r),os(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Mt||Ai(l,r);var c=pt,v=Cn;cr(l.type)&&(pt=l.stateNode,Cn=!1),os(s,r,l),Fl(l.stateNode),pt=c,Cn=v;break;case 5:Mt||Ai(l,r);case 6:if(c=pt,v=Cn,pt=null,os(s,r,l),pt=c,Cn=v,pt!==null)if(Cn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(T){st(l,r,T)}else try{pt.removeChild(l.stateNode)}catch(T){st(l,r,T)}break;case 18:pt!==null&&(Cn?(s=pt,C0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),pa(s)):C0(pt,l.stateNode));break;case 4:c=pt,v=Cn,pt=l.stateNode.containerInfo,Cn=!0,os(s,r,l),pt=c,Cn=v;break;case 0:case 11:case 14:case 15:ir(2,l,r),Mt||ir(4,l,r),os(s,r,l);break;case 1:Mt||(Ai(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&bv(l,r,c)),os(s,r,l);break;case 21:os(s,r,l);break;case 22:Mt=(c=Mt)||l.memoizedState!==null,os(s,r,l),Mt=c;break;default:os(s,r,l)}}function Uv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{pa(s)}catch(l){st(r,r.return,l)}}}function Lv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{pa(s)}catch(l){st(r,r.return,l)}}function tC(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Mv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Mv),r;default:throw Error(i(435,s.tag))}}function Pc(s,r){var l=tC(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var v=cC.bind(null,s,c);c.then(v,v)}})}function bn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var v=l[c],T=s,w=r,b=w;e:for(;b!==null;){switch(b.tag){case 27:if(cr(b.type)){pt=b.stateNode,Cn=!1;break e}break;case 5:pt=b.stateNode,Cn=!1;break e;case 3:case 4:pt=b.stateNode.containerInfo,Cn=!0;break e}b=b.return}if(pt===null)throw Error(i(160));kv(T,w,v),pt=null,Cn=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Vv(r,s),r=r.sibling}var ai=null;function Vv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:bn(r,s),In(s),c&4&&(ir(3,s,s.return),Rl(3,s),ir(5,s,s.return));break;case 1:bn(r,s),In(s),c&512&&(Mt||l===null||Ai(l,l.return)),c&64&&rs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var v=ai;if(bn(r,s),In(s),c&512&&(Mt||l===null||Ai(l,l.return)),c&4){var T=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,v=v.ownerDocument||v;t:switch(c){case"title":T=v.getElementsByTagName("title")[0],(!T||T[Gi]||T[vt]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(c),v.head.insertBefore(T,v.querySelector("head > title"))),Wt(T,c,l),T[vt]=s,St(T),c=T;break e;case"link":var w=V0("link","href",v).get(c+(l.href||""));if(w){for(var b=0;b<w.length;b++)if(T=w[b],T.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&T.getAttribute("rel")===(l.rel==null?null:l.rel)&&T.getAttribute("title")===(l.title==null?null:l.title)&&T.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(b,1);break t}}T=v.createElement(c),Wt(T,c,l),v.head.appendChild(T);break;case"meta":if(w=V0("meta","content",v).get(c+(l.content||""))){for(b=0;b<w.length;b++)if(T=w[b],T.getAttribute("content")===(l.content==null?null:""+l.content)&&T.getAttribute("name")===(l.name==null?null:l.name)&&T.getAttribute("property")===(l.property==null?null:l.property)&&T.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&T.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(b,1);break t}}T=v.createElement(c),Wt(T,c,l),v.head.appendChild(T);break;default:throw Error(i(468,c))}T[vt]=s,St(T),c=T}s.stateNode=c}else O0(v,s.type,s.stateNode);else s.stateNode=L0(v,c,s.memoizedProps);else T!==c?(T===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):T.count--,c===null?O0(v,s.type,s.stateNode):L0(v,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Bh(s,s.memoizedProps,l.memoizedProps)}break;case 27:bn(r,s),In(s),c&512&&(Mt||l===null||Ai(l,l.return)),l!==null&&c&4&&Bh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(bn(r,s),In(s),c&512&&(Mt||l===null||Ai(l,l.return)),s.flags&32){v=s.stateNode;try{zn(v,"")}catch(ve){st(s,s.return,ve)}}c&4&&s.stateNode!=null&&(v=s.memoizedProps,Bh(s,v,l!==null?l.memoizedProps:v)),c&1024&&(Gh=!0);break;case 6:if(bn(r,s),In(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ve){st(s,s.return,ve)}}break;case 3:if(Kc=null,v=ai,ai=Yc(r.containerInfo),bn(r,s),ai=v,In(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{pa(r.containerInfo)}catch(ve){st(s,s.return,ve)}Gh&&(Gh=!1,Ov(s));break;case 4:c=ai,ai=Yc(s.stateNode.containerInfo),bn(r,s),In(s),ai=c;break;case 12:bn(r,s),In(s);break;case 31:bn(r,s),In(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Pc(s,c)));break;case 13:bn(r,s),In(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Uc=zt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Pc(s,c)));break;case 22:v=s.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,X=rs,re=Mt;if(rs=X||v,Mt=re||F,bn(r,s),Mt=re,rs=X,In(s),c&8192)e:for(r=s.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(l===null||F||rs||Mt||oo(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){F=l=r;try{if(T=F.stateNode,v)w=T.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{b=F.stateNode;var le=F.memoizedProps.style,Z=le!=null&&le.hasOwnProperty("display")?le.display:null;b.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(ve){st(F,F.return,ve)}}}else if(r.tag===6){if(l===null){F=r;try{F.stateNode.nodeValue=v?"":F.memoizedProps}catch(ve){st(F,F.return,ve)}}}else if(r.tag===18){if(l===null){F=r;try{var ee=F.stateNode;v?b0(ee,!0):b0(F.stateNode,!1)}catch(ve){st(F,F.return,ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Pc(s,l))));break;case 19:bn(r,s),In(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Pc(s,c)));break;case 30:break;case 21:break;default:bn(r,s),In(s)}}function In(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(Rv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var v=l.stateNode,T=qh(s);Dc(s,T,v);break;case 5:var w=l.stateNode;l.flags&32&&(zn(w,""),l.flags&=-33);var b=qh(s);Dc(s,b,w);break;case 3:case 4:var F=l.stateNode.containerInfo,X=qh(s);Hh(s,X,F);break;default:throw Error(i(161))}}catch(re){st(s,s.return,re)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Ov(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Ov(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function as(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Dv(s,r.alternate,r),r=r.sibling}function oo(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:ir(4,r,r.return),oo(r);break;case 1:Ai(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&bv(r,r.return,l),oo(r);break;case 27:Fl(r.stateNode);case 26:case 5:Ai(r,r.return),oo(r);break;case 22:r.memoizedState===null&&oo(r);break;case 30:oo(r);break;default:oo(r)}s=s.sibling}}function ls(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,v=s,T=r,w=T.flags;switch(T.tag){case 0:case 11:case 15:ls(v,T,l),Rl(4,T);break;case 1:if(ls(v,T,l),c=T,v=c.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(X){st(c,c.return,X)}if(c=T,v=c.updateQueue,v!==null){var b=c.stateNode;try{var F=v.shared.hiddenCallbacks;if(F!==null)for(v.shared.hiddenCallbacks=null,v=0;v<F.length;v++)py(F[v],b)}catch(X){st(c,c.return,X)}}l&&w&64&&Cv(T),Nl(T,T.return);break;case 27:Nv(T);case 26:case 5:ls(v,T,l),l&&c===null&&w&4&&Iv(T),Nl(T,T.return);break;case 12:ls(v,T,l);break;case 31:ls(v,T,l),l&&w&4&&Uv(v,T);break;case 13:ls(v,T,l),l&&w&4&&Lv(v,T);break;case 22:T.memoizedState===null&&ls(v,T,l),Nl(T,T.return);break;case 30:break;default:ls(v,T,l)}r=r.sibling}}function zh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&gl(l))}function jh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&gl(s))}function li(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Fv(s,r,l,c),r=r.sibling}function Fv(s,r,l,c){var v=r.flags;switch(r.tag){case 0:case 11:case 15:li(s,r,l,c),v&2048&&Rl(9,r);break;case 1:li(s,r,l,c);break;case 3:li(s,r,l,c),v&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&gl(s)));break;case 12:if(v&2048){li(s,r,l,c),s=r.stateNode;try{var T=r.memoizedProps,w=T.id,b=T.onPostCommit;typeof b=="function"&&b(w,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(F){st(r,r.return,F)}}else li(s,r,l,c);break;case 31:li(s,r,l,c);break;case 13:li(s,r,l,c);break;case 23:break;case 22:T=r.stateNode,w=r.alternate,r.memoizedState!==null?T._visibility&2?li(s,r,l,c):Ml(s,r):T._visibility&2?li(s,r,l,c):(T._visibility|=2,sa(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),v&2048&&zh(w,r);break;case 24:li(s,r,l,c),v&2048&&jh(r.alternate,r);break;default:li(s,r,l,c)}}function sa(s,r,l,c,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var T=s,w=r,b=l,F=c,X=w.flags;switch(w.tag){case 0:case 11:case 15:sa(T,w,b,F,v),Rl(8,w);break;case 23:break;case 22:var re=w.stateNode;w.memoizedState!==null?re._visibility&2?sa(T,w,b,F,v):Ml(T,w):(re._visibility|=2,sa(T,w,b,F,v)),v&&X&2048&&zh(w.alternate,w);break;case 24:sa(T,w,b,F,v),v&&X&2048&&jh(w.alternate,w);break;default:sa(T,w,b,F,v)}r=r.sibling}}function Ml(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,v=c.flags;switch(c.tag){case 22:Ml(l,c),v&2048&&zh(c.alternate,c);break;case 24:Ml(l,c),v&2048&&jh(c.alternate,c);break;default:Ml(l,c)}r=r.sibling}}var Dl=8192;function ra(s,r,l){if(s.subtreeFlags&Dl)for(s=s.child;s!==null;)Bv(s,r,l),s=s.sibling}function Bv(s,r,l){switch(s.tag){case 26:ra(s,r,l),s.flags&Dl&&s.memoizedState!==null&&qC(l,ai,s.memoizedState,s.memoizedProps);break;case 5:ra(s,r,l);break;case 3:case 4:var c=ai;ai=Yc(s.stateNode.containerInfo),ra(s,r,l),ai=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Dl,Dl=16777216,ra(s,r,l),Dl=c):ra(s,r,l));break;default:ra(s,r,l)}}function qv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Pl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Ht=c,Gv(c,s)}qv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Hv(s),s=s.sibling}function Hv(s){switch(s.tag){case 0:case 11:case 15:Pl(s),s.flags&2048&&ir(9,s,s.return);break;case 3:Pl(s);break;case 12:Pl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,kc(s)):Pl(s);break;default:Pl(s)}}function kc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Ht=c,Gv(c,s)}qv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:ir(8,r,r.return),kc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,kc(r));break;default:kc(r)}s=s.sibling}}function Gv(s,r){for(;Ht!==null;){var l=Ht;switch(l.tag){case 0:case 11:case 15:ir(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:gl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Ht=c;else e:for(l=s;Ht!==null;){c=Ht;var v=c.sibling,T=c.return;if(Pv(c),c===l){Ht=null;break e}if(v!==null){v.return=T,Ht=v;break e}Ht=T}}}var nC={getCacheForType:function(s){var r=$t(It),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return $t(It).controller.signal}},iC=typeof WeakMap=="function"?WeakMap:Map,Xe=0,ct=null,Ve=null,Fe=0,it=0,Vn=null,sr=!1,oa=!1,Jh=!1,us=0,Et=0,rr=0,ao=0,Yh=0,On=0,aa=0,kl=null,Rn=null,$h=!1,Uc=0,zv=0,Lc=1/0,Vc=null,or=null,Ut=0,ar=null,la=null,cs=0,Kh=0,Wh=null,jv=null,Ul=0,Qh=null;function Fn(){return(Xe&2)!==0&&Fe!==0?Fe&-Fe:O.T!==null?im():Hi()}function Jv(){if(On===0)if((Fe&536870912)===0||He){var s=pi;pi<<=1,(pi&3932160)===0&&(pi=262144),On=s}else On=536870912;return s=Un.current,s!==null&&(s.flags|=32),On}function Nn(s,r,l){(s===ct&&(it===2||it===9)||s.cancelPendingCommit!==null)&&(ua(s,0),lr(s,Fe,On,!1)),Ms(s,l),((Xe&2)===0||s!==ct)&&(s===ct&&((Xe&2)===0&&(ao|=l),Et===4&&lr(s,Fe,On,!1)),Ci(s))}function Yv(s,r,l){if((Xe&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||Ns(s,r),v=c?oC(s,r):Zh(s,r,!0),T=c;do{if(v===0){oa&&!c&&lr(s,r,0,!1);break}else{if(l=s.current.alternate,T&&!sC(l)){v=Zh(s,r,!1),T=!1;continue}if(v===2){if(T=r,s.errorRecoveryDisabledLanes&T)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var b=s;v=kl;var F=b.current.memoizedState.isDehydrated;if(F&&(ua(b,w).flags|=256),w=Zh(b,w,!1),w!==2){if(Jh&&!F){b.errorRecoveryDisabledLanes|=T,ao|=T,v=4;break e}T=Rn,Rn=v,T!==null&&(Rn===null?Rn=T:Rn.push.apply(Rn,T))}v=w}if(T=!1,v!==2)continue}}if(v===1){ua(s,0),lr(s,r,0,!0);break}e:{switch(c=s,T=v,T){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:lr(c,r,On,!sr);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=Uc+300-zt(),10<v)){if(lr(c,r,On,!sr),Hn(c,0,!0)!==0)break e;cs=r,c.timeoutHandle=w0($v.bind(null,c,l,Rn,Vc,$h,r,On,ao,aa,sr,T,"Throttled",-0,0),v);break e}$v(c,l,Rn,Vc,$h,r,On,ao,aa,sr,T,null,-0,0)}}break}while(!0);Ci(s)}function $v(s,r,l,c,v,T,w,b,F,X,re,le,Z,ee){if(s.timeoutHandle=-1,le=r.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ft},Bv(r,T,le);var ve=(T&62914560)===T?Uc-zt():(T&4194048)===T?zv-zt():0;if(ve=HC(le,ve),ve!==null){cs=T,s.cancelPendingCommit=ve(n0.bind(null,s,r,T,l,c,v,w,b,F,re,le,null,Z,ee)),lr(s,T,w,!X);return}}n0(s,r,T,l,c,v,w,b,F)}function sC(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var v=l[c],T=v.getSnapshot;v=v.value;try{if(!Pn(T(),v))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function lr(s,r,l,c){r&=~Yh,r&=~ao,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var v=r;0<v;){var T=31-pn(v),w=1<<T;c[T]=-1,v&=~w}l!==0&&Ka(s,l,r)}function Oc(){return(Xe&6)===0?(Ll(0),!1):!0}function Xh(){if(Ve!==null){if(it===0)var s=Ve.return;else s=Ve,Zi=Xr=null,mh(s),Zo=null,vl=0,s=Ve;for(;s!==null;)Av(s.alternate,s),s=s.return;Ve=null}}function ua(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,wC(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),cs=0,Xh(),ct=s,Ve=l=Qi(s.current,null),Fe=r,it=0,Vn=null,sr=!1,oa=Ns(s,r),Jh=!1,aa=On=Yh=ao=rr=Et=0,Rn=kl=null,$h=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var v=31-pn(c),T=1<<v;r|=s[v],c&=~T}return us=r,rc(),l}function Kv(s,r){Pe=null,O.H=Cl,r===Xo||r===hc?(r=dy(),it=3):r===nh?(r=dy(),it=4):it=r===Nh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Vn=r,Ve===null&&(Et=1,bc(s,Jn(r,s.current)))}function Wv(){var s=Un.current;return s===null?!0:(Fe&4194048)===Fe?Wn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?s===Wn:!1}function Qv(){var s=O.H;return O.H=Cl,s===null?Cl:s}function Xv(){var s=O.A;return O.A=nC,s}function Fc(){Et=4,sr||(Fe&4194048)!==Fe&&Un.current!==null||(oa=!0),(rr&134217727)===0&&(ao&134217727)===0||ct===null||lr(ct,Fe,On,!1)}function Zh(s,r,l){var c=Xe;Xe|=2;var v=Qv(),T=Xv();(ct!==s||Fe!==r)&&(Vc=null,ua(s,r)),r=!1;var w=Et;e:do try{if(it!==0&&Ve!==null){var b=Ve,F=Vn;switch(it){case 8:Xh(),w=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(r=!0);var X=it;if(it=0,Vn=null,ca(s,b,F,X),l&&oa){w=0;break e}break;default:X=it,it=0,Vn=null,ca(s,b,F,X)}}rC(),w=Et;break}catch(re){Kv(s,re)}while(!0);return r&&s.shellSuspendCounter++,Zi=Xr=null,Xe=c,O.H=v,O.A=T,Ve===null&&(ct=null,Fe=0,rc()),w}function rC(){for(;Ve!==null;)Zv(Ve)}function oC(s,r){var l=Xe;Xe|=2;var c=Qv(),v=Xv();ct!==s||Fe!==r?(Vc=null,Lc=zt()+500,ua(s,r)):oa=Ns(s,r);e:do try{if(it!==0&&Ve!==null){r=Ve;var T=Vn;t:switch(it){case 1:it=0,Vn=null,ca(s,r,T,1);break;case 2:case 9:if(uy(T)){it=0,Vn=null,e0(r);break}r=function(){it!==2&&it!==9||ct!==s||(it=7),Ci(s)},T.then(r,r);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:uy(T)?(it=0,Vn=null,e0(r)):(it=0,Vn=null,ca(s,r,T,7));break;case 5:var w=null;switch(Ve.tag){case 26:w=Ve.memoizedState;case 5:case 27:var b=Ve;if(w?F0(w):b.stateNode.complete){it=0,Vn=null;var F=b.sibling;if(F!==null)Ve=F;else{var X=b.return;X!==null?(Ve=X,Bc(X)):Ve=null}break t}}it=0,Vn=null,ca(s,r,T,5);break;case 6:it=0,Vn=null,ca(s,r,T,6);break;case 8:Xh(),Et=6;break e;default:throw Error(i(462))}}aC();break}catch(re){Kv(s,re)}while(!0);return Zi=Xr=null,O.H=c,O.A=v,Xe=l,Ve!==null?0:(ct=null,Fe=0,rc(),Et)}function aC(){for(;Ve!==null&&!Af();)Zv(Ve)}function Zv(s){var r=Sv(s.alternate,s,us);s.memoizedProps=s.pendingProps,r===null?Bc(s):Ve=r}function e0(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=yv(l,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=yv(l,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:mh(r);default:Av(l,r),r=Ve=Xg(r,us),r=Sv(l,r,us)}s.memoizedProps=s.pendingProps,r===null?Bc(s):Ve=r}function ca(s,r,l,c){Zi=Xr=null,mh(r),Zo=null,vl=0;var v=r.return;try{if(KA(s,v,r,l,Fe)){Et=1,bc(s,Jn(l,s.current)),Ve=null;return}}catch(T){if(v!==null)throw Ve=v,T;Et=1,bc(s,Jn(l,s.current)),Ve=null;return}r.flags&32768?(He||c===1?s=!0:oa||(Fe&536870912)!==0?s=!1:(sr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Un.current,c!==null&&c.tag===13&&(c.flags|=16384))),t0(r,s)):Bc(r)}function Bc(s){var r=s;do{if((r.flags&32768)!==0){t0(r,sr);return}s=r.return;var l=XA(r.alternate,r,us);if(l!==null){Ve=l;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=s}while(r!==null);Et===0&&(Et=5)}function t0(s,r){do{var l=ZA(s.alternate,s);if(l!==null){l.flags&=32767,Ve=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ve=s;return}Ve=s=l}while(s!==null);Et=6,Ve=null}function n0(s,r,l,c,v,T,w,b,F){s.cancelPendingCommit=null;do qc();while(Ut!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(T=r.lanes|r.childLanes,T|=qf,jt(s,l,T,w,b,F),s===ct&&(Ve=ct=null,Fe=0),la=r,ar=s,cs=l,Kh=T,Wh=v,jv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,dC(Bi,function(){return a0(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,v=te.p,te.p=2,w=Xe,Xe|=4;try{eC(s,r,l)}finally{Xe=w,te.p=v,O.T=c}}Ut=1,i0(),s0(),r0()}}function i0(){if(Ut===1){Ut=0;var s=ar,r=la,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=O.T,O.T=null;var c=te.p;te.p=2;var v=Xe;Xe|=4;try{Vv(r,s);var T=dm,w=Gg(s.containerInfo),b=T.focusedElem,F=T.selectionRange;if(w!==b&&b&&b.ownerDocument&&Hg(b.ownerDocument.documentElement,b)){if(F!==null&&Lf(b)){var X=F.start,re=F.end;if(re===void 0&&(re=X),"selectionStart"in b)b.selectionStart=X,b.selectionEnd=Math.min(re,b.value.length);else{var le=b.ownerDocument||document,Z=le&&le.defaultView||window;if(Z.getSelection){var ee=Z.getSelection(),ve=b.textContent.length,Ae=Math.min(F.start,ve),lt=F.end===void 0?Ae:Math.min(F.end,ve);!ee.extend&&Ae>lt&&(w=lt,lt=Ae,Ae=w);var J=qg(b,Ae),G=qg(b,lt);if(J&&G&&(ee.rangeCount!==1||ee.anchorNode!==J.node||ee.anchorOffset!==J.offset||ee.focusNode!==G.node||ee.focusOffset!==G.offset)){var Q=le.createRange();Q.setStart(J.node,J.offset),ee.removeAllRanges(),Ae>lt?(ee.addRange(Q),ee.extend(G.node,G.offset)):(Q.setEnd(G.node,G.offset),ee.addRange(Q))}}}}for(le=[],ee=b;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<le.length;b++){var ae=le[b];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Zc=!!cm,dm=cm=null}finally{Xe=v,te.p=c,O.T=l}}s.current=r,Ut=2}}function s0(){if(Ut===2){Ut=0;var s=ar,r=la,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=O.T,O.T=null;var c=te.p;te.p=2;var v=Xe;Xe|=4;try{Dv(s,r.alternate,r)}finally{Xe=v,te.p=c,O.T=l}}Ut=3}}function r0(){if(Ut===4||Ut===3){Ut=0,ja();var s=ar,r=la,l=cs,c=jv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ut=5:(Ut=0,la=ar=null,o0(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(or=null),Qa(l),r=r.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Is,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=O.T,v=te.p,te.p=2,O.T=null;try{for(var T=s.onRecoverableError,w=0;w<c.length;w++){var b=c[w];T(b.value,{componentStack:b.stack})}}finally{O.T=r,te.p=v}}(cs&3)!==0&&qc(),Ci(s),v=s.pendingLanes,(l&261930)!==0&&(v&42)!==0?s===Qh?Ul++:(Ul=0,Qh=s):Ul=0,Ll(0)}}function o0(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,gl(r)))}function qc(){return i0(),s0(),r0(),a0()}function a0(){if(Ut!==5)return!1;var s=ar,r=Kh;Kh=0;var l=Qa(cs),c=O.T,v=te.p;try{te.p=32>l?32:l,O.T=null,l=Wh,Wh=null;var T=ar,w=cs;if(Ut=0,la=ar=null,cs=0,(Xe&6)!==0)throw Error(i(331));var b=Xe;if(Xe|=4,Hv(T.current),Fv(T,T.current,w,l),Xe=b,Ll(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Is,T)}catch{}return!0}finally{te.p=v,O.T=c,o0(s,r)}}function l0(s,r,l){r=Jn(l,r),r=Rh(s.stateNode,r,2),s=er(s,r,2),s!==null&&(Ms(s,2),Ci(s))}function st(s,r,l){if(s.tag===3)l0(s,s,l);else for(;r!==null;){if(r.tag===3){l0(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(or===null||!or.has(c))){s=Jn(l,s),l=uv(2),c=er(r,l,2),c!==null&&(cv(l,c,r,s),Ms(c,2),Ci(c));break}}r=r.return}}function em(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new iC;var v=new Set;c.set(r,v)}else v=c.get(r),v===void 0&&(v=new Set,c.set(r,v));v.has(l)||(Jh=!0,v.add(l),s=lC.bind(null,s,r,l),r.then(s,s))}function lC(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ct===s&&(Fe&l)===l&&(Et===4||Et===3&&(Fe&62914560)===Fe&&300>zt()-Uc?(Xe&2)===0&&ua(s,0):Yh|=l,aa===Fe&&(aa=0)),Ci(s)}function u0(s,r){r===0&&(r=$a()),s=Kr(s,r),s!==null&&(Ms(s,r),Ci(s))}function uC(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),u0(s,l)}function cC(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,v=s.memoizedState;v!==null&&(l=v.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),u0(s,l)}function dC(s,r){return kr(s,r)}var Hc=null,da=null,tm=!1,Gc=!1,nm=!1,ur=0;function Ci(s){s!==da&&s.next===null&&(da===null?Hc=da=s:da=da.next=s),Gc=!0,tm||(tm=!0,hC())}function Ll(s,r){if(!nm&&Gc){nm=!0;do for(var l=!1,c=Hc;c!==null;){if(s!==0){var v=c.pendingLanes;if(v===0)var T=0;else{var w=c.suspendedLanes,b=c.pingedLanes;T=(1<<31-pn(42|s)+1)-1,T&=v&~(w&~b),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(l=!0,h0(c,T))}else T=Fe,T=Hn(c,c===ct?T:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(T&3)===0||Ns(c,T)||(l=!0,h0(c,T));c=c.next}while(l);nm=!1}}function fC(){c0()}function c0(){Gc=tm=!1;var s=0;ur!==0&&SC()&&(s=ur);for(var r=zt(),l=null,c=Hc;c!==null;){var v=c.next,T=d0(c,r);T===0?(c.next=null,l===null?Hc=v:l.next=v,v===null&&(da=l)):(l=c,(s!==0||(T&3)!==0)&&(Gc=!0)),c=v}Ut!==0&&Ut!==5||Ll(s),ur!==0&&(ur=0)}function d0(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,v=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var w=31-pn(T),b=1<<w,F=v[w];F===-1?((b&l)===0||(b&c)!==0)&&(v[w]=Mo(b,r)):F<=r&&(s.expiredLanes|=b),T&=~b}if(r=ct,l=Fe,l=Hn(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(it===2||it===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&No(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Ns(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&No(c),Qa(l)){case 2:case 8:l=Ot;break;case 32:l=Bi;break;case 268435456:l=Ja;break;default:l=Bi}return c=f0.bind(null,s),l=kr(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&No(c),s.callbackPriority=2,s.callbackNode=null,2}function f0(s,r){if(Ut!==0&&Ut!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(qc()&&s.callbackNode!==l)return null;var c=Fe;return c=Hn(s,s===ct?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Yv(s,c,r),d0(s,zt()),s.callbackNode!=null&&s.callbackNode===l?f0.bind(null,s):null)}function h0(s,r){if(qc())return null;Yv(s,r,!0)}function hC(){AC(function(){(Xe&6)!==0?kr(kt,fC):c0()})}function im(){if(ur===0){var s=Wo;s===0&&(s=Lr,Lr<<=1,(Lr&261888)===0&&(Lr=256)),ur=s}return ur}function m0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ti(""+s)}function p0(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function mC(s,r,l,c,v){if(r==="submit"&&l&&l.stateNode===v){var T=m0((v[Jt]||null).action),w=c.submitter;w&&(r=(r=w[Jt]||null)?m0(r.formAction):w.getAttribute("formAction"),r!==null&&(T=r,w=null));var b=new Hr("action","action",null,c,v);s.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ur!==0){var F=w?p0(v,w):new FormData(v);Sh(l,{pending:!0,data:F,method:v.method,action:T},null,F)}}else typeof T=="function"&&(b.preventDefault(),F=w?p0(v,w):new FormData(v),Sh(l,{pending:!0,data:F,method:v.method,action:T},T,F))},currentTarget:v}]})}}for(var sm=0;sm<Bf.length;sm++){var rm=Bf[sm],pC=rm.toLowerCase(),gC=rm[0].toUpperCase()+rm.slice(1);oi(pC,"on"+gC)}oi(Jg,"onAnimationEnd"),oi(Yg,"onAnimationIteration"),oi($g,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(DA,"onTransitionRun"),oi(PA,"onTransitionStart"),oi(kA,"onTransitionCancel"),oi(Kg,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function g0(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],v=c.event;c=c.listeners;e:{var T=void 0;if(r)for(var w=c.length-1;0<=w;w--){var b=c[w],F=b.instance,X=b.currentTarget;if(b=b.listener,F!==T&&v.isPropagationStopped())break e;T=b,v.currentTarget=X;try{T(v)}catch(re){sc(re)}v.currentTarget=null,T=F}else for(w=0;w<c.length;w++){if(b=c[w],F=b.instance,X=b.currentTarget,b=b.listener,F!==T&&v.isPropagationStopped())break e;T=b,v.currentTarget=X;try{T(v)}catch(re){sc(re)}v.currentTarget=null,T=F}}}}function Oe(s,r){var l=r[ks];l===void 0&&(l=r[ks]=new Set);var c=s+"__bubble";l.has(c)||(y0(r,s,2,!1),l.add(c))}function om(s,r,l){var c=0;r&&(c|=4),y0(l,s,c,r)}var zc="_reactListening"+Math.random().toString(36).slice(2);function am(s){if(!s[zc]){s[zc]=!0,Do.forEach(function(l){l!=="selectionchange"&&(yC.has(l)||om(l,!1,s),om(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[zc]||(r[zc]=!0,om("selectionchange",!1,r))}}function y0(s,r,l,c){switch(J0(r)){case 2:var v=jC;break;case 8:v=JC;break;default:v=xm}l=v.bind(null,r,l,s),v=void 0,!rl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),c?v!==void 0?s.addEventListener(r,l,{capture:!0,passive:v}):s.addEventListener(r,l,!0):v!==void 0?s.addEventListener(r,l,{passive:v}):s.addEventListener(r,l,!1)}function lm(s,r,l,c,v){var T=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var b=c.stateNode.containerInfo;if(b===v)break;if(w===4)for(w=c.return;w!==null;){var F=w.tag;if((F===3||F===4)&&w.stateNode.containerInfo===v)return;w=w.return}for(;b!==null;){if(w=zi(b),w===null)return;if(F=w.tag,F===5||F===6||F===26||F===27){c=T=w;continue e}b=b.parentNode}}c=c.return}Hu(function(){var X=T,re=Vo(l),le=[];e:{var Z=Wg.get(s);if(Z!==void 0){var ee=Hr,ve=s;switch(s){case"keypress":if(qr(l)===0)break e;case"keydown":case"keyup":ee=Qu;break;case"focusin":ve="focus",ee=zs;break;case"focusout":ve="blur",ee=zs;break;case"beforeblur":case"afterblur":ee=zs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=zu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Zu;break;case Jg:case Yg:case $g:ee=Bo;break;case Kg:ee=qo;break;case"scroll":case"scrollend":ee=Gu;break;case"wheel":ee=tc;break;case"copy":case"cut":case"paste":ee=Yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=cl;break;case"toggle":case"beforetoggle":ee=Js}var Ae=(r&4)!==0,lt=!Ae&&(s==="scroll"||s==="scrollend"),J=Ae?Z!==null?Z+"Capture":null:Z;Ae=[];for(var G=X,Q;G!==null;){var ae=G;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||J===null||(ae=wn(G,J),ae!=null&&Ae.push(Ol(G,ae,Q))),lt)break;G=G.return}0<Ae.length&&(Z=new ee(Z,ve,null,l,re),le.push({event:Z,listeners:Ae}))}}if((r&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",ee=s==="mouseout"||s==="pointerout",Z&&l!==Lo&&(ve=l.relatedTarget||l.fromElement)&&(zi(ve)||ve[yi]))break e;if((ee||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,ee?(ve=l.relatedTarget||l.toElement,ee=X,ve=ve?zi(ve):null,ve!==null&&(lt=a(ve),Ae=ve.tag,ve!==lt||Ae!==5&&Ae!==27&&Ae!==6)&&(ve=null)):(ee=null,ve=X),ee!==ve)){if(Ae=zu,ae="onMouseLeave",J="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=cl,ae="onPointerLeave",J="onPointerEnter",G="pointer"),lt=ee==null?Z:Or(ee),Q=ve==null?Z:Or(ve),Z=new Ae(ae,G+"leave",ee,l,re),Z.target=lt,Z.relatedTarget=Q,ae=null,zi(re)===X&&(Ae=new Ae(J,G+"enter",ve,l,re),Ae.target=Q,Ae.relatedTarget=lt,ae=Ae),lt=ae,ee&&ve)t:{for(Ae=vC,J=ee,G=ve,Q=0,ae=J;ae;ae=Ae(ae))Q++;ae=0;for(var Se=G;Se;Se=Ae(Se))ae++;for(;0<Q-ae;)J=Ae(J),Q--;for(;0<ae-Q;)G=Ae(G),ae--;for(;Q--;){if(J===G||G!==null&&J===G.alternate){Ae=J;break t}J=Ae(J),G=Ae(G)}Ae=null}else Ae=null;ee!==null&&v0(le,Z,ee,Ae,!1),ve!==null&&lt!==null&&v0(le,lt,ve,Ae,!0)}}e:{if(Z=X?Or(X):window,ee=Z.nodeName&&Z.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Z.type==="file")var Ye=Ug;else if(An(Z))if(Lg)Ye=RA;else{Ye=bA;var Ee=CA}else ee=Z.nodeName,!ee||ee.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&il(X.elementType)&&(Ye=Ug):Ye=IA;if(Ye&&(Ye=Ye(s,X))){Jr(le,Ye,l,re);break e}Ee&&Ee(s,Z,X),s==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&Uo(Z,"number",Z.value)}switch(Ee=X?Or(X):window,s){case"focusin":(An(Ee)||Ee.contentEditable==="true")&&(Ho=Ee,Vf=X,hl=null);break;case"focusout":hl=Vf=Ho=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,zg(le,l,re);break;case"selectionchange":if(MA)break;case"keydown":case"keyup":zg(le,l,re)}var Ue;if(x)e:{switch(s){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Le?et(s,l)&&(Be="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Be="onCompositionStart");Be&&(K&&l.locale!=="ko"&&(Le||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Le&&(Ue=Bs()):(Dn=re,Oo="value"in Dn?Dn.value:Dn.textContent,Le=!0)),Ee=jc(X,Be),0<Ee.length&&(Be=new al(Be,s,null,l,re),le.push({event:Be,listeners:Ee}),Ue?Be.data=Ue:(Ue=bt(l),Ue!==null&&(Be.data=Ue)))),(Ue=I?Bt(s,l):qt(s,l))&&(Be=jc(X,"onBeforeInput"),0<Be.length&&(Ee=new al("onBeforeInput","beforeinput",null,l,re),le.push({event:Ee,listeners:Be}),Ee.data=Ue)),mC(le,s,X,l,re)}g0(le,r)})}function Ol(s,r,l){return{instance:s,listener:r,currentTarget:l}}function jc(s,r){for(var l=r+"Capture",c=[];s!==null;){var v=s,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=wn(s,l),v!=null&&c.unshift(Ol(s,v,T)),v=wn(s,r),v!=null&&c.push(Ol(s,v,T))),s.tag===3)return c;s=s.return}return[]}function vC(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function v0(s,r,l,c,v){for(var T=r._reactName,w=[];l!==null&&l!==c;){var b=l,F=b.alternate,X=b.stateNode;if(b=b.tag,F!==null&&F===c)break;b!==5&&b!==26&&b!==27||X===null||(F=X,v?(X=wn(l,T),X!=null&&w.unshift(Ol(l,X,F))):v||(X=wn(l,T),X!=null&&w.push(Ol(l,X,F)))),l=l.return}w.length!==0&&s.push({event:r,listeners:w})}var _C=/\r\n?/g,TC=/\u0000|\uFFFD/g;function _0(s){return(typeof s=="string"?s:""+s).replace(_C,`
`).replace(TC,"")}function T0(s,r){return r=_0(r),_0(s)===r}function at(s,r,l,c,v,T){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||zn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&zn(s,""+c);break;case"className":Vs(s,"class",c);break;case"tabIndex":Vs(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Vs(s,l,c);break;case"style":Bu(s,c,T);break;case"data":if(r!=="object"){Vs(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ti(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(l==="formAction"?(r!=="input"&&at(s,r,"name",v.name,v,null),at(s,r,"formEncType",v.formEncType,v,null),at(s,r,"formMethod",v.formMethod,v,null),at(s,r,"formTarget",v.formTarget,v,null)):(at(s,r,"encType",v.encType,v,null),at(s,r,"method",v.method,v,null),at(s,r,"target",v.target,v,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ti(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Ft);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Ti(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Oe("beforetoggle",s),Oe("toggle",s),Ls(s,"popover",c);break;case"xlinkActuate":Gn(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Gn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Gn(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Gn(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Gn(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Gn(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Gn(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Gn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Gn(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ls(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Mf.get(l)||l,Ls(s,l,c))}}function um(s,r,l,c,v,T){switch(l){case"style":Bu(s,c,T);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?zn(s,c):(typeof c=="number"||typeof c=="bigint")&&zn(s,""+c);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Us.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),r=l.slice(2,v?l.length-7:void 0),T=s[Jt]||null,T=T!=null?T[l]:null,typeof T=="function"&&s.removeEventListener(r,T,v),typeof c=="function")){typeof T!="function"&&T!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,v);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Ls(s,l,c)}}}function Wt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",s),Oe("load",s);var c=!1,v=!1,T;for(T in l)if(l.hasOwnProperty(T)){var w=l[T];if(w!=null)switch(T){case"src":c=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(s,r,T,w,l,null)}}v&&at(s,r,"srcSet",l.srcSet,l,null),c&&at(s,r,"src",l.src,l,null);return;case"input":Oe("invalid",s);var b=T=w=v=null,F=null,X=null;for(c in l)if(l.hasOwnProperty(c)){var re=l[c];if(re!=null)switch(c){case"name":v=re;break;case"type":w=re;break;case"checked":F=re;break;case"defaultChecked":X=re;break;case"value":T=re;break;case"defaultValue":b=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,r));break;default:at(s,r,c,re,l,null)}}Fr(s,T,b,F,X,w,v,!1);return;case"select":Oe("invalid",s),c=w=T=null;for(v in l)if(l.hasOwnProperty(v)&&(b=l[v],b!=null))switch(v){case"value":T=b;break;case"defaultValue":w=b;break;case"multiple":c=b;default:at(s,r,v,b,l,null)}r=T,l=w,s.multiple=!!c,r!=null?Je(s,!!c,r,!1):l!=null&&Je(s,!!c,l,!0);return;case"textarea":Oe("invalid",s),T=v=c=null;for(w in l)if(l.hasOwnProperty(w)&&(b=l[w],b!=null))switch(w){case"value":c=b;break;case"defaultValue":v=b;break;case"children":T=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:at(s,r,w,b,l,null)}Fs(s,c,v,T);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(c=l[F],c!=null))switch(F){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:at(s,r,F,c,l,null)}return;case"dialog":Oe("beforetoggle",s),Oe("toggle",s),Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":Oe("load",s);break;case"video":case"audio":for(c=0;c<Vl.length;c++)Oe(Vl[c],s);break;case"image":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"embed":case"source":case"link":Oe("error",s),Oe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(c=l[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(s,r,X,c,l,null)}return;default:if(il(r)){for(re in l)l.hasOwnProperty(re)&&(c=l[re],c!==void 0&&um(s,r,re,c,l,void 0));return}}for(b in l)l.hasOwnProperty(b)&&(c=l[b],c!=null&&at(s,r,b,c,l,null))}function EC(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,w=null,b=null,F=null,X=null,re=null;for(ee in l){var le=l[ee];if(l.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":F=le;default:c.hasOwnProperty(ee)||at(s,r,ee,null,c,le)}}for(var Z in c){var ee=c[Z];if(le=l[Z],c.hasOwnProperty(Z)&&(ee!=null||le!=null))switch(Z){case"type":T=ee;break;case"name":v=ee;break;case"checked":X=ee;break;case"defaultChecked":re=ee;break;case"value":w=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,r));break;default:ee!==le&&at(s,r,Z,ee,c,le)}}Os(s,w,b,F,X,re,T,v);return;case"select":ee=w=b=Z=null;for(T in l)if(F=l[T],l.hasOwnProperty(T)&&F!=null)switch(T){case"value":break;case"multiple":ee=F;default:c.hasOwnProperty(T)||at(s,r,T,null,c,F)}for(v in c)if(T=c[v],F=l[v],c.hasOwnProperty(v)&&(T!=null||F!=null))switch(v){case"value":Z=T;break;case"defaultValue":b=T;break;case"multiple":w=T;default:T!==F&&at(s,r,v,T,c,F)}r=b,l=w,c=ee,Z!=null?Je(s,!!l,Z,!1):!!c!=!!l&&(r!=null?Je(s,!!l,r,!0):Je(s,!!l,l?[]:"",!1));return;case"textarea":ee=Z=null;for(b in l)if(v=l[b],l.hasOwnProperty(b)&&v!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:at(s,r,b,null,c,v)}for(w in c)if(v=c[w],T=l[w],c.hasOwnProperty(w)&&(v!=null||T!=null))switch(w){case"value":Z=v;break;case"defaultValue":ee=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==T&&at(s,r,w,v,c,T)}Br(s,Z,ee);return;case"option":for(var ve in l)if(Z=l[ve],l.hasOwnProperty(ve)&&Z!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":s.selected=!1;break;default:at(s,r,ve,null,c,Z)}for(F in c)if(Z=c[F],ee=l[F],c.hasOwnProperty(F)&&Z!==ee&&(Z!=null||ee!=null))switch(F){case"selected":s.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:at(s,r,F,Z,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in l)Z=l[Ae],l.hasOwnProperty(Ae)&&Z!=null&&!c.hasOwnProperty(Ae)&&at(s,r,Ae,null,c,Z);for(X in c)if(Z=c[X],ee=l[X],c.hasOwnProperty(X)&&Z!==ee&&(Z!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:at(s,r,X,Z,c,ee)}return;default:if(il(r)){for(var lt in l)Z=l[lt],l.hasOwnProperty(lt)&&Z!==void 0&&!c.hasOwnProperty(lt)&&um(s,r,lt,void 0,c,Z);for(re in c)Z=c[re],ee=l[re],!c.hasOwnProperty(re)||Z===ee||Z===void 0&&ee===void 0||um(s,r,re,Z,c,ee);return}}for(var J in l)Z=l[J],l.hasOwnProperty(J)&&Z!=null&&!c.hasOwnProperty(J)&&at(s,r,J,null,c,Z);for(le in c)Z=c[le],ee=l[le],!c.hasOwnProperty(le)||Z===ee||Z==null&&ee==null||at(s,r,le,Z,c,ee)}function E0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xC(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var v=l[c],T=v.transferSize,w=v.initiatorType,b=v.duration;if(T&&b&&E0(w)){for(w=0,b=v.responseEnd,c+=1;c<l.length;c++){var F=l[c],X=F.startTime;if(X>b)break;var re=F.transferSize,le=F.initiatorType;re&&E0(le)&&(F=F.responseEnd,w+=re*(F<b?1:(b-X)/(F-X)))}if(--c,r+=8*(T+w)/(v.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var cm=null,dm=null;function Jc(s){return s.nodeType===9?s:s.ownerDocument}function x0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S0(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function fm(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var hm=null;function SC(){var s=window.event;return s&&s.type==="popstate"?s===hm?!1:(hm=s,!0):(hm=null,!1)}var w0=typeof setTimeout=="function"?setTimeout:void 0,wC=typeof clearTimeout=="function"?clearTimeout:void 0,A0=typeof Promise=="function"?Promise:void 0,AC=typeof queueMicrotask=="function"?queueMicrotask:typeof A0<"u"?function(s){return A0.resolve(null).then(s).catch(CC)}:w0;function CC(s){setTimeout(function(){throw s})}function cr(s){return s==="head"}function C0(s,r){var l=r,c=0;do{var v=l.nextSibling;if(s.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(v),pa(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Fl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Fl(l);for(var T=l.firstChild;T;){var w=T.nextSibling,b=T.nodeName;T[Gi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=w}}else l==="body"&&Fl(s.ownerDocument.body);l=v}while(l);pa(r)}function b0(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function mm(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":mm(l),Vr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function bC(s,r,l,c){for(;s.nodeType===1;){var v=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Gi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=Qn(s.nextSibling),s===null)break}return null}function IC(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Qn(s.nextSibling),s===null))return null;return s}function I0(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Qn(s.nextSibling),s===null))return null;return s}function pm(s){return s.data==="$?"||s.data==="$~"}function gm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function RC(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Qn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var ym=null;function R0(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Qn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function N0(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function M0(s,r,l){switch(r=Jc(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Fl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Vr(s)}var Xn=new Map,D0=new Set;function Yc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ds=te.d;te.d={f:NC,r:MC,D:DC,C:PC,L:kC,m:UC,X:VC,S:LC,M:OC};function NC(){var s=ds.f(),r=Oc();return s||r}function MC(s){var r=ji(s);r!==null&&r.tag===5&&r.type==="form"?Ky(r):ds.r(s)}var fa=typeof document>"u"?null:document;function P0(s,r,l){var c=fa;if(c&&typeof r=="string"&&r){var v=_t(r);v='link[rel="'+s+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),D0.has(v)||(D0.add(v),s={rel:s,crossOrigin:l,href:r},c.querySelector(v)===null&&(r=c.createElement("link"),Wt(r,"link",s),St(r),c.head.appendChild(r)))}}function DC(s){ds.D(s),P0("dns-prefetch",s,null)}function PC(s,r){ds.C(s,r),P0("preconnect",s,r)}function kC(s,r,l){ds.L(s,r,l);var c=fa;if(c&&s&&r){var v='link[rel="preload"][as="'+_t(r)+'"]';r==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+_t(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+_t(l.imageSizes)+'"]')):v+='[href="'+_t(s)+'"]';var T=v;switch(r){case"style":T=ha(s);break;case"script":T=ma(s)}Xn.has(T)||(s=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Xn.set(T,s),c.querySelector(v)!==null||r==="style"&&c.querySelector(Bl(T))||r==="script"&&c.querySelector(ql(T))||(r=c.createElement("link"),Wt(r,"link",s),St(r),c.head.appendChild(r)))}}function UC(s,r){ds.m(s,r);var l=fa;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+_t(c)+'"][href="'+_t(s)+'"]',T=v;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=ma(s)}if(!Xn.has(T)&&(s=E({rel:"modulepreload",href:s},r),Xn.set(T,s),l.querySelector(v)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ql(T)))return}c=l.createElement("link"),Wt(c,"link",s),St(c),l.head.appendChild(c)}}}function LC(s,r,l){ds.S(s,r,l);var c=fa;if(c&&s){var v=si(c).hoistableStyles,T=ha(s);r=r||"default";var w=v.get(T);if(!w){var b={loading:0,preload:null};if(w=c.querySelector(Bl(T)))b.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Xn.get(T))&&vm(s,l);var F=w=c.createElement("link");St(F),Wt(F,"link",s),F._p=new Promise(function(X,re){F.onload=X,F.onerror=re}),F.addEventListener("load",function(){b.loading|=1}),F.addEventListener("error",function(){b.loading|=2}),b.loading|=4,$c(w,r,c)}w={type:"stylesheet",instance:w,count:1,state:b},v.set(T,w)}}}function VC(s,r){ds.X(s,r);var l=fa;if(l&&s){var c=si(l).hoistableScripts,v=ma(s),T=c.get(v);T||(T=l.querySelector(ql(v)),T||(s=E({src:s,async:!0},r),(r=Xn.get(v))&&_m(s,r),T=l.createElement("script"),St(T),Wt(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},c.set(v,T))}}function OC(s,r){ds.M(s,r);var l=fa;if(l&&s){var c=si(l).hoistableScripts,v=ma(s),T=c.get(v);T||(T=l.querySelector(ql(v)),T||(s=E({src:s,async:!0,type:"module"},r),(r=Xn.get(v))&&_m(s,r),T=l.createElement("script"),St(T),Wt(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},c.set(v,T))}}function k0(s,r,l,c){var v=(v=ye.current)?Yc(v):null;if(!v)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ha(l.href),l=si(v).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=ha(l.href);var T=si(v).hoistableStyles,w=T.get(s);if(w||(v=v.ownerDocument||v,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,w),(T=v.querySelector(Bl(s)))&&!T._p&&(w.instance=T,w.state.loading=5),Xn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Xn.set(s,l),T||FC(v,s,l,w.state))),r&&c===null)throw Error(i(528,""));return w}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ma(l),l=si(v).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ha(s){return'href="'+_t(s)+'"'}function Bl(s){return'link[rel="stylesheet"]['+s+"]"}function U0(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function FC(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Wt(r,"link",l),St(r),s.head.appendChild(r))}function ma(s){return'[src="'+_t(s)+'"]'}function ql(s){return"script[async]"+s}function L0(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+_t(l.href)+'"]');if(c)return r.instance=c,St(c),c;var v=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),St(c),Wt(c,"style",v),$c(c,l.precedence,s),r.instance=c;case"stylesheet":v=ha(l.href);var T=s.querySelector(Bl(v));if(T)return r.state.loading|=4,r.instance=T,St(T),T;c=U0(l),(v=Xn.get(v))&&vm(c,v),T=(s.ownerDocument||s).createElement("link"),St(T);var w=T;return w._p=new Promise(function(b,F){w.onload=b,w.onerror=F}),Wt(T,"link",c),r.state.loading|=4,$c(T,l.precedence,s),r.instance=T;case"script":return T=ma(l.src),(v=s.querySelector(ql(T)))?(r.instance=v,St(v),v):(c=l,(v=Xn.get(T))&&(c=E({},l),_m(c,v)),s=s.ownerDocument||s,v=s.createElement("script"),St(v),Wt(v,"link",c),s.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,$c(c,l.precedence,s));return r.instance}function $c(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=c.length?c[c.length-1]:null,T=v,w=0;w<c.length;w++){var b=c[w];if(b.dataset.precedence===r)T=b;else if(T!==v)break}T?T.parentNode.insertBefore(s,T.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function vm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function _m(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Kc=null;function V0(s,r,l){if(Kc===null){var c=new Map,v=Kc=new Map;v.set(l,c)}else v=Kc,c=v.get(l),c||(c=new Map,v.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),v=0;v<l.length;v++){var T=l[v];if(!(T[Gi]||T[vt]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var w=T.getAttribute(r)||"";w=s+w;var b=c.get(w);b?b.push(T):c.set(w,[T])}}return c}function O0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function BC(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function F0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function qC(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=ha(c.href),T=r.querySelector(Bl(v));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Wc.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=T,St(T);return}T=r.ownerDocument||r,c=U0(c),(v=Xn.get(v))&&vm(c,v),T=T.createElement("link"),St(T);var w=T;w._p=new Promise(function(b,F){w.onload=b,w.onerror=F}),Wt(T,"link",c),l.instance=T}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Wc.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Tm=0;function HC(s,r){return s.stylesheets&&s.count===0&&Xc(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&Xc(s,s.stylesheets),s.unsuspend){var T=s.unsuspend;s.unsuspend=null,T()}},6e4+r);0<s.imgBytes&&Tm===0&&(Tm=62500*xC());var v=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Xc(s,s.stylesheets),s.unsuspend)){var T=s.unsuspend;s.unsuspend=null,T()}},(s.imgBytes>Tm?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(v)}}:null}function Wc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Qc=null;function Xc(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Qc=new Map,r.forEach(GC,s),Qc=null,Wc.call(s))}function GC(s,r){if(!(r.state.loading&4)){var l=Qc.get(s);if(l)var c=l.get(null);else{l=new Map,Qc.set(s,l);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var w=v[T];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),c=w)}c&&l.set(null,c)}v=r.instance,w=v.getAttribute("data-precedence"),T=l.get(w)||c,T===c&&l.set(null,v),l.set(w,v),this.count++,c=Wc.bind(this),v.addEventListener("load",c),v.addEventListener("error",c),T?T.parentNode.insertBefore(v,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),r.state.loading|=4}}var Hl={$$typeof:j,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function zC(s,r,l,c,v,T,w,b,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=c,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function B0(s,r,l,c,v,T,w,b,F,X,re,le){return s=new zC(s,r,l,w,F,X,re,le,b),r=1,T===!0&&(r|=24),T=kn(3,null,null,r),s.current=T,T.stateNode=s,r=Zf(),r.refCount++,s.pooledCache=r,r.refCount++,T.memoizedState={element:c,isDehydrated:l,cache:r},ih(T),s}function q0(s){return s?(s=jo,s):jo}function H0(s,r,l,c,v,T){v=q0(v),c.context===null?c.context=v:c.pendingContext=v,c=Zs(r),c.payload={element:l},T=T===void 0?null:T,T!==null&&(c.callback=T),l=er(s,c,r),l!==null&&(Nn(l,s,r),Tl(l,s,r))}function G0(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Em(s,r){G0(s,r),(s=s.alternate)&&G0(s,r)}function z0(s){if(s.tag===13||s.tag===31){var r=Kr(s,67108864);r!==null&&Nn(r,s,67108864),Em(s,67108864)}}function j0(s){if(s.tag===13||s.tag===31){var r=Fn();r=Wa(r);var l=Kr(s,r);l!==null&&Nn(l,s,r),Em(s,r)}}var Zc=!0;function jC(s,r,l,c){var v=O.T;O.T=null;var T=te.p;try{te.p=2,xm(s,r,l,c)}finally{te.p=T,O.T=v}}function JC(s,r,l,c){var v=O.T;O.T=null;var T=te.p;try{te.p=8,xm(s,r,l,c)}finally{te.p=T,O.T=v}}function xm(s,r,l,c){if(Zc){var v=Sm(c);if(v===null)lm(s,r,c,ed,l),Y0(s,c);else if($C(v,s,r,l,c))c.stopPropagation();else if(Y0(s,c),r&4&&-1<YC.indexOf(s)){for(;v!==null;){var T=ji(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var w=ii(T.pendingLanes);if(w!==0){var b=T;for(b.pendingLanes|=2,b.entangledLanes|=2;w;){var F=1<<31-pn(w);b.entanglements[1]|=F,w&=~F}Ci(T),(Xe&6)===0&&(Lc=zt()+500,Ll(0))}}break;case 31:case 13:b=Kr(T,2),b!==null&&Nn(b,T,2),Oc(),Em(T,2)}if(T=Sm(c),T===null&&lm(s,r,c,ed,l),T===v)break;v=T}v!==null&&c.stopPropagation()}else lm(s,r,c,null,l)}}function Sm(s){return s=Vo(s),wm(s)}var ed=null;function wm(s){if(ed=null,s=zi(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return ed=s,null}function J0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pu()){case kt:return 2;case Ot:return 8;case Bi:case ku:return 32;case Ja:return 268435456;default:return 32}default:return 32}}var Am=!1,dr=null,fr=null,hr=null,Gl=new Map,zl=new Map,mr=[],YC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Y0(s,r){switch(s){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Gl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(r.pointerId)}}function jl(s,r,l,c,v,T){return s===null||s.nativeEvent!==T?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:T,targetContainers:[v]},r!==null&&(r=ji(r),r!==null&&z0(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),s)}function $C(s,r,l,c,v){switch(r){case"focusin":return dr=jl(dr,s,r,l,c,v),!0;case"dragenter":return fr=jl(fr,s,r,l,c,v),!0;case"mouseover":return hr=jl(hr,s,r,l,c,v),!0;case"pointerover":var T=v.pointerId;return Gl.set(T,jl(Gl.get(T)||null,s,r,l,c,v)),!0;case"gotpointercapture":return T=v.pointerId,zl.set(T,jl(zl.get(T)||null,s,r,l,c,v)),!0}return!1}function $0(s){var r=zi(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Lu(s.priority,function(){j0(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,Lu(s.priority,function(){j0(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function td(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Sm(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Lo=c,l.target.dispatchEvent(c),Lo=null}else return r=ji(l),r!==null&&z0(r),s.blockedOn=l,!1;r.shift()}return!0}function K0(s,r,l){td(s)&&l.delete(r)}function KC(){Am=!1,dr!==null&&td(dr)&&(dr=null),fr!==null&&td(fr)&&(fr=null),hr!==null&&td(hr)&&(hr=null),Gl.forEach(K0),zl.forEach(K0)}function nd(s,r){s.blockedOn===r&&(s.blockedOn=null,Am||(Am=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,KC)))}var id=null;function W0(s){id!==s&&(id=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){id===s&&(id=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],v=s[r+2];if(typeof c!="function"){if(wm(c||l)===null)continue;break}var T=ji(l);T!==null&&(s.splice(r,3),r-=3,Sh(T,{pending:!0,data:v,method:l.method,action:c},c,v))}}))}function pa(s){function r(F){return nd(F,s)}dr!==null&&nd(dr,s),fr!==null&&nd(fr,s),hr!==null&&nd(hr,s),Gl.forEach(r),zl.forEach(r);for(var l=0;l<mr.length;l++){var c=mr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<mr.length&&(l=mr[0],l.blockedOn===null);)$0(l),l.blockedOn===null&&mr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var v=l[c],T=l[c+1],w=v[Jt]||null;if(typeof T=="function")w||W0(l);else if(w){var b=null;if(T&&T.hasAttribute("formAction")){if(v=T,w=T[Jt]||null)b=w.formAction;else if(wm(v)!==null)continue}else b=w.action;typeof b=="function"?l[c+1]=b:(l.splice(c,3),c-=3),W0(l)}}}function Q0(){function s(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(w){return v=w})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,v=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function Cm(s){this._internalRoot=s}sd.prototype.render=Cm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Fn();H0(l,c,s,r,null,null)},sd.prototype.unmount=Cm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;H0(s.current,2,null,s,null,null),Oc(),r[yi]=null}};function sd(s){this._internalRoot=s}sd.prototype.unstable_scheduleHydration=function(s){if(s){var r=Hi();s={blockedOn:null,target:s,priority:r};for(var l=0;l<mr.length&&r!==0&&r<mr[l].priority;l++);mr.splice(l,0,s),l===0&&$0(s)}};var X0=e.version;if(X0!=="19.2.0")throw Error(i(527,X0,"19.2.0"));te.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var WC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{Is=rd.inject(WC),nn=rd}catch{}}return Yl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",v=rv,T=ov,w=av;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=B0(s,1,!1,null,null,l,c,null,v,T,w,Q0),s[yi]=r.current,am(s),new Cm(r)},Yl.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,v="",T=rv,w=ov,b=av,F=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(b=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),r=B0(s,1,!0,r,l??null,c,v,F,T,w,b,Q0),r.context=q0(null),l=r.current,c=Fn(),c=Wa(c),v=Zs(c),v.callback=null,er(l,v,c),l=c,r.current.lanes=l,Ms(r,l),Ci(r),s[yi]=r.current,am(s),new sd(r)},Yl.version="19.2.0",Yl}var l_;function ob(){if(l_)return Rm.exports;l_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rm.exports=rb(),Rm.exports}var ab=ob();const lb=tx(ab);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var u_="popstate";function ub(t={}){function e(o,a){let{pathname:u="/",search:d="",hash:f=""}=_o(o.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Ym("",{pathname:u,search:d,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){let u=o.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let f=o.location.href,h=f.indexOf("#");d=h===-1?f:f.slice(0,h)}return d+"#"+(typeof a=="string"?a:ou(a))}function i(o,a){fi(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return db(e,n,i,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cb(){return Math.random().toString(36).substring(2,10)}function c_(t,e){return{usr:t.state,key:t.key,idx:e}}function Ym(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?_o(e):e,state:n,key:e&&e.key||i||cb()}}function ou({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function _o(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function db(t,e,n,i={}){let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d="POP",f=null,h=_();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function _(){return(u.state||{idx:null}).idx}function E(){d="POP";let U=_(),z=U==null?null:U-h;h=U,f&&f({action:d,location:V.location,delta:z})}function S(U,z){d="PUSH";let $=Ym(V.location,U,z);n&&n($,U),h=_()+1;let j=c_($,h),Y=V.createHref($);try{u.pushState(j,"",Y)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(Y)}a&&f&&f({action:d,location:V.location,delta:1})}function C(U,z){d="REPLACE";let $=Ym(V.location,U,z);n&&n($,U),h=_();let j=c_($,h),Y=V.createHref($);u.replaceState(j,"",Y),a&&f&&f({action:d,location:V.location,delta:0})}function M(U){return fb(U)}let V={get action(){return d},get location(){return t(o,u)},listen(U){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(u_,E),f=U,()=>{o.removeEventListener(u_,E),f=null}},createHref(U){return e(o,U)},createURL:M,encodeLocation(U){let z=M(U);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:S,replace:C,go(U){return u.go(U)}};return V}function fb(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:ou(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function nx(t,e,n="/"){return hb(t,e,n,!1)}function hb(t,e,n,i){let o=typeof e=="string"?_o(e):e,a=vs(o.pathname||"/",n);if(a==null)return null;let u=ix(t);mb(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let h=Ab(a);d=Sb(u[f],h,i)}return d}function ix(t,e=[],n=[],i="",o=!1){let a=(u,d,f=o,h)=>{let _={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&f)return;gt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let E=gs([i,_.relativePath]),S=n.concat(_);u.children&&u.children.length>0&&(gt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),ix(u.children,e,S,E,f)),!(u.path==null&&!u.index)&&e.push({path:E,score:Eb(E,u.index),routesMeta:S})};return t.forEach((u,d)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))a(u,d);else for(let h of sx(u.path))a(u,d,!0,h)}),e}function sx(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=sx(i.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...u),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function mb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xb(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var pb=/^:[\w-]+$/,gb=3,yb=2,vb=1,_b=10,Tb=-2,d_=t=>t==="*";function Eb(t,e){let n=t.split("/"),i=n.length;return n.some(d_)&&(i+=Tb),e&&(i+=yb),n.filter(o=>!d_(o)).reduce((o,a)=>o+(pb.test(a)?gb:a===""?vb:_b),i)}function xb(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function Sb(t,e,n=!1){let{routesMeta:i}=t,o={},a="/",u=[];for(let d=0;d<i.length;++d){let f=i[d],h=d===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=Ad({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},_),S=f.route;if(!E&&h&&n&&!i[i.length-1].route.index&&(E=Ad({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),u.push({params:o,pathname:gs([a,E.pathname]),pathnameBase:Rb(gs([a,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(a=gs([a,E.pathnameBase]))}return u}function Ad(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=wb(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((h,{paramName:_,isOptional:E},S)=>{if(_==="*"){let M=d[S]||"";u=a.slice(0,a.length-M.length).replace(/(.)\/+$/,"$1")}const C=d[S];return E&&!C?h[_]=void 0:h[_]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:u,pattern:t}}function wb(t,e=!1,n=!0){fi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(i.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function Ab(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Cb(t,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?_o(t):t;return{pathname:n?n.startsWith("/")?n:bb(n,e):e,search:Nb(i),hash:Mb(o)}}function bb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Pm(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ib(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rx(t){let e=Ib(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function ox(t,e,n,i=!1){let o;typeof t=="string"?o=_o(t):(o={...t},gt(!o.pathname||!o.pathname.includes("?"),Pm("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Pm("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Pm("#","search","hash",o)));let a=t===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=n;else{let E=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}d=E>=0?e[E]:"/"}let f=Cb(o,d),h=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||_)&&(f.pathname+="/"),f}var gs=t=>t.join("/").replace(/\/\/+/g,"/"),Rb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Nb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Mb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Db(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ax=["POST","PUT","PATCH","DELETE"];new Set(ax);var Pb=["GET",...ax];new Set(Pb);var La=D.createContext(null);La.displayName="DataRouter";var $d=D.createContext(null);$d.displayName="DataRouterState";D.createContext(!1);var lx=D.createContext({isTransitioning:!1});lx.displayName="ViewTransition";var kb=D.createContext(new Map);kb.displayName="Fetchers";var Ub=D.createContext(null);Ub.displayName="Await";var Li=D.createContext(null);Li.displayName="Navigation";var vu=D.createContext(null);vu.displayName="Location";var Vi=D.createContext({outlet:null,matches:[],isDataRoute:!1});Vi.displayName="Route";var bp=D.createContext(null);bp.displayName="RouteError";function Lb(t,{relative:e}={}){gt(_u(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(Li),{hash:o,pathname:a,search:u}=Tu(t,{relative:e}),d=a;return n!=="/"&&(d=a==="/"?n:gs([n,a])),i.createHref({pathname:d,search:u,hash:o})}function _u(){return D.useContext(vu)!=null}function Mr(){return gt(_u(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(vu).location}var ux="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cx(t){D.useContext(Li).static||D.useLayoutEffect(t)}function dx(){let{isDataRoute:t}=D.useContext(Vi);return t?Kb():Vb()}function Vb(){gt(_u(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(La),{basename:e,navigator:n}=D.useContext(Li),{matches:i}=D.useContext(Vi),{pathname:o}=Mr(),a=JSON.stringify(rx(i)),u=D.useRef(!1);return cx(()=>{u.current=!0}),D.useCallback((f,h={})=>{if(fi(u.current,ux),!u.current)return;if(typeof f=="number"){n.go(f);return}let _=ox(f,JSON.parse(a),o,h.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:gs([e,_.pathname])),(h.replace?n.replace:n.push)(_,h.state,h)},[e,n,a,o,t])}D.createContext(null);function fx(){let{matches:t}=D.useContext(Vi),e=t[t.length-1];return e?e.params:{}}function Tu(t,{relative:e}={}){let{matches:n}=D.useContext(Vi),{pathname:i}=Mr(),o=JSON.stringify(rx(n));return D.useMemo(()=>ox(t,JSON.parse(o),i,e==="path"),[t,o,i,e])}function Ob(t,e){return hx(t,e)}function hx(t,e,n,i,o){var $;gt(_u(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=D.useContext(Li),{matches:u}=D.useContext(Vi),d=u[u.length-1],f=d?d.params:{},h=d?d.pathname:"/",_=d?d.pathnameBase:"/",E=d&&d.route;{let j=E&&E.path||"";mx(h,!E||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let S=Mr(),C;if(e){let j=typeof e=="string"?_o(e):e;gt(_==="/"||(($=j.pathname)==null?void 0:$.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${j.pathname}" was given in the \`location\` prop.`),C=j}else C=S;let M=C.pathname||"/",V=M;if(_!=="/"){let j=_.replace(/^\//,"").split("/");V="/"+M.replace(/^\//,"").split("/").slice(j.length).join("/")}let U=nx(t,{pathname:V});fi(E||U!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),fi(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=Gb(U&&U.map(j=>Object.assign({},j,{params:Object.assign({},f,j.params),pathname:gs([_,a.encodeLocation?a.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?_:gs([_,a.encodeLocation?a.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),u,n,i,o);return e&&z?D.createElement(vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},z):z}function Fb(){let t=$b(),e=Db(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:a},"ErrorBoundary")," or"," ",D.createElement("code",{style:a},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:o},n):null,u)}var Bb=D.createElement(Fb,null),qb=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(Vi.Provider,{value:this.props.routeContext},D.createElement(bp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Hb({routeContext:t,match:e,children:n}){let i=D.useContext(La);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Vi.Provider,{value:t},n)}function Gb(t,e=[],n=null,i=null,o=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=n==null?void 0:n.errors;if(u!=null){let h=a.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);gt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let d=!1,f=-1;if(n)for(let h=0;h<a.length;h++){let _=a[h];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(f=h),_.route.id){let{loaderData:E,errors:S}=n,C=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!S||S[_.route.id]===void 0);if(_.route.lazy||C){d=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((h,_,E)=>{let S,C=!1,M=null,V=null;n&&(S=u&&_.route.id?u[_.route.id]:void 0,M=_.route.errorElement||Bb,d&&(f<0&&E===0?(mx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,V=null):f===E&&(C=!0,V=_.route.hydrateFallbackElement||null)));let U=e.concat(a.slice(0,E+1)),z=()=>{let $;return S?$=M:C?$=V:_.route.Component?$=D.createElement(_.route.Component,null):_.route.element?$=_.route.element:$=h,D.createElement(Hb,{match:_,routeContext:{outlet:h,matches:U,isDataRoute:n!=null},children:$})};return n&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?D.createElement(qb,{location:n.location,revalidation:n.revalidation,component:M,error:S,children:z(),routeContext:{outlet:null,matches:U,isDataRoute:!0},unstable_onError:i}):z()},null)}function Ip(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zb(t){let e=D.useContext(La);return gt(e,Ip(t)),e}function jb(t){let e=D.useContext($d);return gt(e,Ip(t)),e}function Jb(t){let e=D.useContext(Vi);return gt(e,Ip(t)),e}function Rp(t){let e=Jb(t),n=e.matches[e.matches.length-1];return gt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Yb(){return Rp("useRouteId")}function $b(){var i;let t=D.useContext(bp),e=jb("useRouteError"),n=Rp("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function Kb(){let{router:t}=zb("useNavigate"),e=Rp("useNavigate"),n=D.useRef(!1);return cx(()=>{n.current=!0}),D.useCallback(async(o,a={})=>{fi(n.current,ux),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...a}))},[t,e])}var f_={};function mx(t,e,n){!e&&!f_[t]&&(f_[t]=!0,fi(!1,n))}D.memo(Wb);function Wb({routes:t,future:e,state:n,unstable_onError:i}){return hx(t,void 0,n,i,e)}function an(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Qb({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:a=!1}){gt(!_u(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:u,navigator:o,static:a,future:{}}),[u,o,a]);typeof n=="string"&&(n=_o(n));let{pathname:f="/",search:h="",hash:_="",state:E=null,key:S="default"}=n,C=D.useMemo(()=>{let M=vs(f,u);return M==null?null:{location:{pathname:M,search:h,hash:_,state:E,key:S},navigationType:i}},[u,f,h,_,E,S,i]);return fi(C!=null,`<Router basename="${u}"> is not able to match the URL "${f}${h}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:D.createElement(Li.Provider,{value:d},D.createElement(vu.Provider,{children:e,value:C}))}function Xb({children:t,location:e}){return Ob($m(t),e)}function $m(t,e=[]){let n=[];return D.Children.forEach(t,(i,o)=>{if(!D.isValidElement(i))return;let a=[...e,o];if(i.type===D.Fragment){n.push.apply(n,$m(i.props.children,a));return}gt(i.type===an,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=$m(i.props.children,a)),n.push(u)}),n}var hd="get",md="application/x-www-form-urlencoded";function Kd(t){return t!=null&&typeof t.tagName=="string"}function Zb(t){return Kd(t)&&t.tagName.toLowerCase()==="button"}function eI(t){return Kd(t)&&t.tagName.toLowerCase()==="form"}function tI(t){return Kd(t)&&t.tagName.toLowerCase()==="input"}function nI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iI(t,e){return t.button===0&&(!e||e==="_self")&&!nI(t)}var od=null;function sI(){if(od===null)try{new FormData(document.createElement("form"),0),od=!1}catch{od=!0}return od}var rI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function km(t){return t!=null&&!rI.has(t)?(fi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${md}"`),null):t}function oI(t,e){let n,i,o,a,u;if(eI(t)){let d=t.getAttribute("action");i=d?vs(d,e):null,n=t.getAttribute("method")||hd,o=km(t.getAttribute("enctype"))||md,a=new FormData(t)}else if(Zb(t)||tI(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(i=f?vs(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||hd,o=km(t.getAttribute("formenctype"))||km(d.getAttribute("enctype"))||md,a=new FormData(d,t),!sI()){let{name:h,type:_,value:E}=t;if(_==="image"){let S=h?`${h}.`:"";a.append(`${S}x`,"0"),a.append(`${S}y`,"0")}else h&&a.append(h,E)}}else{if(Kd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hd,i=null,o=md,u=t}return a&&o==="text/plain"&&(u=a,a=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Np(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function aI(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&vs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function lI(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function cI(t,e,n){let i=await Promise.all(t.map(async o=>{let a=e.routes[o.route.id];if(a){let u=await lI(a,n);return u.links?u.links():[]}return[]}));return mI(i.flat(1).filter(uI).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function h_(t,e,n,i,o,a){let u=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,d=(f,h)=>{var _;return n[h].pathname!==f.pathname||((_=n[h].route.path)==null?void 0:_.endsWith("*"))&&n[h].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,h)=>u(f,h)||d(f,h)):a==="data"?e.filter((f,h)=>{var E;let _=i.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(u(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let S=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function dI(t,e,{includeHydrateFallback:n}={}){return fI(t.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function fI(t){return[...new Set(t)]}function hI(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function mI(t,e){let n=new Set;return new Set(e),t.reduce((i,o)=>{let a=JSON.stringify(hI(o));return n.has(a)||(n.add(a),i.push({key:a,link:o})),i},[])}function px(){let t=D.useContext(La);return Np(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function pI(){let t=D.useContext($d);return Np(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Mp=D.createContext(void 0);Mp.displayName="FrameworkContext";function gx(){let t=D.useContext(Mp);return Np(t,"You must render this element inside a <HydratedRouter> element"),t}function gI(t,e){let n=D.useContext(Mp),[i,o]=D.useState(!1),[a,u]=D.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:_,onTouchStart:E}=e,S=D.useRef(null);D.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let V=z=>{z.forEach($=>{u($.isIntersecting)})},U=new IntersectionObserver(V,{threshold:.5});return S.current&&U.observe(S.current),()=>{U.disconnect()}}},[t]),D.useEffect(()=>{if(i){let V=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(V)}}},[i]);let C=()=>{o(!0)},M=()=>{o(!1),u(!1)};return n?t!=="intent"?[a,S,{}]:[a,S,{onFocus:$l(d,C),onBlur:$l(f,M),onMouseEnter:$l(h,C),onMouseLeave:$l(_,M),onTouchStart:$l(E,C)}]:[!1,S,{}]}function $l(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function yI({page:t,...e}){let{router:n}=px(),i=D.useMemo(()=>nx(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D.createElement(_I,{page:t,matches:i,...e}):null}function vI(t){let{manifest:e,routeModules:n}=gx(),[i,o]=D.useState([]);return D.useEffect(()=>{let a=!1;return cI(t,e,n).then(u=>{a||o(u)}),()=>{a=!0}},[t,e,n]),i}function _I({page:t,matches:e,...n}){let i=Mr(),{manifest:o,routeModules:a}=gx(),{basename:u}=px(),{loaderData:d,matches:f}=pI(),h=D.useMemo(()=>h_(t,e,f,o,i,"data"),[t,e,f,o,i]),_=D.useMemo(()=>h_(t,e,f,o,i,"assets"),[t,e,f,o,i]),E=D.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let M=new Set,V=!1;if(e.forEach(z=>{var j;let $=o.routes[z.route.id];!$||!$.hasLoader||(!h.some(Y=>Y.route.id===z.route.id)&&z.route.id in d&&((j=a[z.route.id])!=null&&j.shouldRevalidate)||$.hasClientLoader?V=!0:M.add(z.route.id))}),M.size===0)return[];let U=aI(t,u,"data");return V&&M.size>0&&U.searchParams.set("_routes",e.filter(z=>M.has(z.route.id)).map(z=>z.route.id).join(",")),[U.pathname+U.search]},[u,d,i,o,h,e,t,a]),S=D.useMemo(()=>dI(_,o),[_,o]),C=vI(_);return D.createElement(D.Fragment,null,E.map(M=>D.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),S.map(M=>D.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),C.map(({key:M,link:V})=>D.createElement("link",{key:M,nonce:n.nonce,...V})))}function TI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var yx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yx&&(window.__reactRouterVersion="7.9.5")}catch{}function EI({basename:t,children:e,window:n}){let i=D.useRef();i.current==null&&(i.current=ub({window:n,v5Compat:!0}));let o=i.current,[a,u]=D.useState({action:o.action,location:o.location}),d=D.useCallback(f=>{D.startTransition(()=>u(f))},[u]);return D.useLayoutEffect(()=>o.listen(d),[o,d]),D.createElement(Qb,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o})}var vx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fn=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:a,replace:u,state:d,target:f,to:h,preventScrollReset:_,viewTransition:E,...S},C){let{basename:M}=D.useContext(Li),V=typeof h=="string"&&vx.test(h),U,z=!1;if(typeof h=="string"&&V&&(U=h,yx))try{let R=new URL(window.location.href),k=h.startsWith("//")?new URL(R.protocol+h):new URL(h),B=vs(k.pathname,M);k.origin===R.origin&&B!=null?h=B+k.search+k.hash:z=!0}catch{fi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=Lb(h,{relative:o}),[j,Y,ie]=gI(i,S),oe=wI(h,{replace:u,state:d,target:f,preventScrollReset:_,relative:o,viewTransition:E});function P(R){e&&e(R),R.defaultPrevented||oe(R)}let N=D.createElement("a",{...S,...ie,href:U||$,onClick:z||a?e:P,ref:TI(C,Y),target:f,"data-discover":!V&&n==="render"?"true":void 0});return j&&!V?D.createElement(D.Fragment,null,N,D.createElement(yI,{page:$})):N});fn.displayName="Link";var Zn=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:a,to:u,viewTransition:d,children:f,...h},_){let E=Tu(u,{relative:h.relative}),S=Mr(),C=D.useContext($d),{navigator:M,basename:V}=D.useContext(Li),U=C!=null&&RI(E)&&d===!0,z=M.encodeLocation?M.encodeLocation(E).pathname:E.pathname,$=S.pathname,j=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||($=$.toLowerCase(),j=j?j.toLowerCase():null,z=z.toLowerCase()),j&&V&&(j=vs(j,V)||j);const Y=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ie=$===z||!o&&$.startsWith(z)&&$.charAt(Y)==="/",oe=j!=null&&(j===z||!o&&j.startsWith(z)&&j.charAt(z.length)==="/"),P={isActive:ie,isPending:oe,isTransitioning:U},N=ie?e:void 0,R;typeof i=="function"?R=i(P):R=[i,ie?"active":null,oe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(P):a;return D.createElement(fn,{...h,"aria-current":N,className:R,ref:_,style:k,to:u,viewTransition:d},typeof f=="function"?f(P):f)});Zn.displayName="NavLink";var xI=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:a,method:u=hd,action:d,onSubmit:f,relative:h,preventScrollReset:_,viewTransition:E,...S},C)=>{let M=bI(),V=II(d,{relative:h}),U=u.toLowerCase()==="get"?"get":"post",z=typeof d=="string"&&vx.test(d),$=j=>{if(f&&f(j),j.defaultPrevented)return;j.preventDefault();let Y=j.nativeEvent.submitter,ie=(Y==null?void 0:Y.getAttribute("formmethod"))||u;M(Y||j.currentTarget,{fetcherKey:e,method:ie,navigate:n,replace:o,state:a,relative:h,preventScrollReset:_,viewTransition:E})};return D.createElement("form",{ref:C,method:U,action:V,onSubmit:i?f:$,...S,"data-discover":!z&&t==="render"?"true":void 0})});xI.displayName="Form";function SI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _x(t){let e=D.useContext(La);return gt(e,SI(t)),e}function wI(t,{target:e,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:u}={}){let d=dx(),f=Mr(),h=Tu(t,{relative:a});return D.useCallback(_=>{if(iI(_,e)){_.preventDefault();let E=n!==void 0?n:ou(f)===ou(h);d(t,{replace:E,state:i,preventScrollReset:o,relative:a,viewTransition:u})}},[f,d,h,n,i,e,t,o,a,u])}var AI=0,CI=()=>`__${String(++AI)}__`;function bI(){let{router:t}=_x("useSubmit"),{basename:e}=D.useContext(Li),n=Yb();return D.useCallback(async(i,o={})=>{let{action:a,method:u,encType:d,formData:f,body:h}=oI(i,e);if(o.navigate===!1){let _=o.fetcherKey||CI();await t.fetch(_,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:h,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await t.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:h,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function II(t,{relative:e}={}){let{basename:n}=D.useContext(Li),i=D.useContext(Vi);gt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...Tu(t||".",{relative:e})},u=Mr();if(t==null){a.search=u.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(_=>_==="")){d.delete("index"),f.filter(E=>E).forEach(E=>d.append("index",E));let _=d.toString();a.search=_?`?${_}`:""}}return(!t||t===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:gs([n,a.pathname])),ou(a)}function RI(t,{relative:e}={}){let n=D.useContext(lx);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=_x("useViewTransitionState"),o=Tu(t,{relative:e});if(!n.isTransitioning)return!1;let a=vs(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=vs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Ad(o.pathname,u)!=null||Ad(o.pathname,a)!=null}const NI={play:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3l14 9-14 9V3z"}),pause:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 4h4v16H6zM14 4h4v16h-4z"}),logo:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 6l12-3"}),search:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}),previous:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"}),next:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}),upload:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"}),heart:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"}),comment:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}),"chat-bubble":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V7a2 2 0 012-2h4M9 14h6"}),x:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}),send:y.jsx("path",{d:"M22 2L11 13M22 2L15 22l-4-9-9-4 20-6z"}),camera:y.jsxs(y.Fragment,{children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"music-note":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z"}),"map-pin":y.jsxs(y.Fragment,{children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"globe-alt":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9M3 12a9 9 0 019-9"}),aperture:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m-2.122 2.122a5 5 0 01-7.072 0m-2.121-2.121a5 5 0 010-7.072m2.121-2.121a5 5 0 017.072 0"}),map:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13v-6m0 6l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 9m-6-2l6-3m0 0l6 3"}),radio:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 4.938A8.001 8.001 0 0112 4a8 8 0 017.069 4.938M15 12a3 3 0 11-6 0 3 3 0 016 0zm-3 8.062A8.001 8.001 0 0112 20a8 8 0 01-7.069-4.938M4.938 15A8.001 8.001 0 014 12a8 8 0 014.938-7.069"}),spotify:y.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20zm0 17.5a7.5 7.5 0 110-15 7.5 7.5 0 010 15zm-4.3-7.2a.7.7 0 00-1 .2.7.7 0 00.1 1l3.5 2a.7.7 0 001-.2.7.7 0 00-.2-1l-3.4-2zm.3-2.5a.7.7 0 00-1 .2.7.7 0 00.2 1l5.8 3.3a.7.7 0 001-.2.7.7 0 00-.2-1l-5.8-3.3zm.2-2.6a.7.7 0 00-1 .3.7.7 0 00.3 1l6.7 3.8a.7.7 0 001-.3.7.7 0 00-.3-1l-6.7-3.8z"}),soundcloud:y.jsx("path",{d:"M7 12a1 1 0 00-1-1H3a1 1 0 100 2h3a1 1 0 001-1zm14-1h-3a1 1 0 100 2h3a1 1 0 100-2zm-5-3a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm14 2c0-3.9-3.1-7-7-7s-7 3.1-7 7v1h14v-1z"}),youtube:y.jsx("path",{d:"M21.582 6.186A2.5 2.5 0 0020 4.5H4a2.5 2.5 0 00-2.5 2.5v10A2.5 2.5 0 004 19.5h16a2.5 2.5 0 002.5-2.5v-10a2.5 2.5 0 00-.918-1.814zM9.5 15.5v-7l7 3.5-7 3.5z"}),bandcamp:y.jsx("path",{d:"M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2l4 4 4-4v8H8v-8z"}),package:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4-8-4m16 0v10l-8 4-8-4V7"}),tshirt:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 4h6l2 2v2H7V6l2-2zm0 0V3a1 1 0 011-1h4a1 1 0 011 1v1m-6 0v12h6V4m-6 0H3v4l3 1 1-1h1M15 4h6v4l-3 1-1-1h-1"}),crown:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l3-3 4 4 4-4 3 3V5H5v10z"}),playlist:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"}),tag:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"}),"thumbs-up":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 9V5a3 3 0 00-3-3l-4 9v11h11.28a2 2 0 002-1.7l1.38-9a2 2 0 00-2-2.3H14z"}),"thumbs-down":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 15v4a3 3 0 003 3l4-9V5H5.72a2 2 0 00-2 1.7l-1.38 9a2 2 0 002 2.3h4.28z"}),"video-camera":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}),rss:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 11a9 9 0 019 9M4 4a16 16 0 0116 16M4 4v0"}),"book-open":y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 1V6a4 4 0 00-4-4H5a4 4 0 00-4 4v12a4 4 0 004 4h14a4 4 0 004-4v-3m-4-1l-4-4 4-4"}),download:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"}),plus:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"}),mail:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}),microphone:y.jsxs(y.Fragment,{children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 10v2a7 7 0 01-14 0v-2"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 19v3"})]}),palette:y.jsxs(y.Fragment,{children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1v2m0 18v2m9-9h-2m-2-6.364L15.364 7M4.636 17.364L7 15m12.364 0L17 15M4.636 4.636L7 7"})]}),users:y.jsx(y.Fragment,{children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.134-1.276-.38-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.134-1.276.38-1.857m0 0a5.002 5.002 0 019.24 0M12 15a4 4 0 100-8 4 4 0 000 8z"})}),sparkles:y.jsx(y.Fragment,{children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M17 3v4M19 5h-4M14 17v4M16 19h-4M7.5 10.5L9 9m-1.5 3l-1.5 1.5M16.5 10.5L15 9m1.5 3l1.5 1.5"})})},_e=({name:t,className:e="h-6 w-6",style:n})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",style:n,children:NI[t]}),MI=()=>{const t={color:"white",backgroundColor:"#282828"};return y.jsx("header",{className:"bg-gray-800 sticky top-0 z-40 shadow-md",children:y.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsxs("div",{className:"flex items-center space-x-8",children:[y.jsxs(fn,{to:"/",className:"flex items-center space-x-2 text-white",children:[y.jsx(_e,{name:"logo",className:"h-8 w-8 text-brand-accent"}),y.jsx("span",{className:"font-bold text-xl",children:"SoundWave"})]}),y.jsxs("nav",{className:"hidden md:flex space-x-2",children:[y.jsx(Zn,{to:"/",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Home"}),y.jsx(Zn,{to:"/library",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Library"}),y.jsx(Zn,{to:"/playlists",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Playlists"}),y.jsx(Zn,{to:"/labels",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Labels"}),y.jsx(Zn,{to:"/artist-hub",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Artist Hub"}),y.jsx(Zn,{to:"/live-streams",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Live"}),y.jsx(Zn,{to:"/community",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Community"}),y.jsx(Zn,{to:"/tutorials",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Tutorials"}),y.jsx(Zn,{to:"/masterclass",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Masterclass"}),y.jsx(Zn,{to:"/samples",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Samples"}),y.jsx(Zn,{to:"/upload",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?t:{},children:"Upload"})]})]}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",placeholder:"Search for tracks or artists...",className:"bg-gray-700 text-white placeholder-gray-400 border border-transparent focus:ring-2 focus:ring-brand-accent focus:border-transparent rounded-full py-2 px-4 w-64 transition-all"}),y.jsx(_e,{name:"search",className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]}),y.jsxs(fn,{to:"/inbox",className:"relative text-gray-400 hover:text-white transition-colors",children:[y.jsx(_e,{name:"mail",className:"h-6 w-6"}),y.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:"3"})]}),y.jsxs(fn,{to:"/profile/user_1",className:"flex items-center space-x-2",children:[y.jsx("img",{className:"h-8 w-8 rounded-full object-cover",src:"https://picsum.photos/id/1015/100/100",alt:"User Avatar"}),y.jsx("span",{className:"text-white font-medium hidden sm:block",children:"Sub-Tropical"})]})]})]})})})},DI=()=>y.jsx("footer",{className:"bg-gray-800 border-t border-gray-700 mt-auto",children:y.jsx("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:y.jsxs("p",{className:"text-center text-sm text-gray-400",children:[" ",new Date().getFullYear()," SoundWave. All rights reserved. A React & Gemini Showcase."]})})}),PI=()=>{const[t,e]=D.useState(null),[n,i]=D.useState(!1),[o,a]=D.useState(null),[u,d]=D.useState(!1),f=D.useCallback(E=>{(t==null?void 0:t.id)===E.id?i(S=>!S):(e(E),i(!0)),d(!1)},[t]),h=D.useCallback(E=>{(t==null?void 0:t.id)===E.id&&u?i(S=>!S):(e(E),i(!0),d(!0))},[t,u]),_=D.useCallback(()=>{t&&i(E=>(E&&d(!1),!E))},[t]);return{currentTrack:t,isPlaying:n,playTrack:f,togglePlayPause:_,onTrackEnd:o,setOnTrackEnd:a,isPreviewing:u,playPreview:h}},Va=D.createContext(null),kI=({children:t})=>{const e=PI();return y.jsx(Va.Provider,{value:e,children:t})},UI=()=>{const t=D.useContext(Va),e=D.useRef(null),[n,i]=D.useState(0),o=D.useRef(null);if(!t)return null;const{currentTrack:a,isPlaying:u,togglePlayPause:d,onTrackEnd:f,isPreviewing:h}=t;D.useEffect(()=>{const E=e.current;if(E)if(u){const S=E.play();S!==void 0&&S.catch(C=>{C.name!=="AbortError"&&console.error("Audio play failed:",C)})}else E.pause()},[u,a]),D.useEffect(()=>(o.current&&(clearTimeout(o.current),o.current=null),u&&h&&(o.current=window.setTimeout(()=>{u&&h&&d()},3e4)),()=>{o.current&&clearTimeout(o.current)}),[a,u,h,d]),D.useEffect(()=>{const E=e.current;if(!E)return;i(0);const S=()=>{E.duration&&isFinite(E.duration)&&i(E.currentTime/E.duration*100)},C=()=>{f?f():d()};return E.addEventListener("timeupdate",S),E.addEventListener("ended",C),()=>{E.removeEventListener("timeupdate",S),E.removeEventListener("ended",C)}},[a,d,f]);const _=E=>{const S=e.current;if(!S||!isFinite(S.duration))return;const C=Number(E.target.value),M=C/100*S.duration;isFinite(M)&&(S.currentTime=M,i(C))};return a?y.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 h-24 z-50 flex items-center px-4 sm:px-6 lg:px-8",children:[y.jsx("audio",{ref:e,src:a.audioSrc}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("img",{src:a.coverArtUrl,alt:a.title,className:"w-16 h-16 rounded-md object-cover"}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h4",{className:"font-semibold text-white",children:a.title}),h&&y.jsx("span",{className:"text-xs font-bold bg-yellow-500 text-gray-900 px-2 py-0.5 rounded-full",children:"PREVIEW"})]}),y.jsx("p",{className:"text-sm text-gray-400",children:a.artistName})]})]}),y.jsxs("div",{className:"flex-grow flex items-center justify-center space-x-4 mx-8",children:[y.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white",children:y.jsx(_e,{name:"previous",className:"w-6 h-6"})}),y.jsx("button",{onClick:d,className:"bg-white rounded-full p-2 text-gray-900 hover:scale-105 transition-transform",children:y.jsx(_e,{name:u?"pause":"play",className:"w-8 h-8"})}),y.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white",children:y.jsx(_e,{name:"next",className:"w-6 h-6"})})]}),y.jsx("div",{className:"flex items-center space-x-2 w-1/3",children:y.jsx("input",{type:"range",min:"0",max:"100",value:n||0,onChange:_,className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer range-sm",style:{background:`linear-gradient(to right, #1DB954 ${n}%, #4B5563 ${n}%)`}})})]}):null},Wd=({track:t,onViewComments:e})=>{var _;const n=D.useContext(Va);if(!n)throw new Error("TrackCard must be used within an AudioProvider");const{playTrack:i,currentTrack:o,isPlaying:a}=n,u=(o==null?void 0:o.id)===t.id&&a,d=()=>{i(t)},f=()=>{switch(t.uploadType){case"For Sale":return`Buy for $${t.price.toFixed(2)}`;case"Free Download":return"Download";default:return null}},h=()=>{switch(t.category){case"Bootleg":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"Remix":return"bg-purple-500/20 text-purple-300 border-purple-500/30";default:return"bg-blue-500/20 text-blue-300 border-blue-500/30"}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:t.coverArtUrl,alt:`${t.title} cover art`,className:"w-full h-48 object-cover"}),y.jsx("button",{onClick:d,className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-label":`Play or pause ${t.title}`,children:y.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:y.jsx(_e,{name:u?"pause":"play",className:"h-8 w-8 text-white"})})}),y.jsx("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full border ${h()}`,children:t.category})]}),y.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[y.jsx("h3",{className:"font-bold text-lg text-white truncate",children:t.title}),y.jsxs("div",{className:"text-sm text-gray-400",children:[y.jsx(fn,{to:`/profile/${t.artistId}`,className:"hover:text-white hover:underline",children:t.artistName}),t.labelId&&t.labelName&&y.jsxs("span",{className:"text-xs",children:[" on ",y.jsx(fn,{to:`/labels/${t.labelId}`,className:"hover:text-white hover:underline font-semibold",children:t.labelName})]})]}),y.jsx("div",{className:"flex-grow mt-2",children:y.jsx("div",{className:"flex space-x-1",children:t.tags.slice(0,2).map(E=>y.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:E},E))})}),y.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e&&y.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors","aria-label":`View comments for ${t.title}`,children:[y.jsx(_e,{name:"comment",className:"w-4 h-4"}),y.jsx("span",{className:"text-xs font-semibold",children:((_=t.comments)==null?void 0:_.length)||0})]}),f()&&y.jsx("button",{className:"bg-transparent border border-brand-accent text-brand-accent px-3 py-1 rounded-full text-xs font-semibold hover:bg-brand-accent hover:text-white transition-colors",children:f()})]})]})]})},xn=()=>y.jsx("div",{className:"flex justify-center items-center p-8",children:y.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-brand-accent"})}),LI=({comment:t})=>{const e=a=>{const u=new Date(a),d=Math.floor((new Date().getTime()-u.getTime())/1e3);let f=d/31536e3;return f>1?Math.floor(f)+" years ago":(f=d/2592e3,f>1?Math.floor(f)+" months ago":(f=d/86400,f>1?Math.floor(f)+" days ago":(f=d/3600,f>1?Math.floor(f)+" hours ago":(f=d/60,f>1?Math.floor(f)+" minutes ago":"Just now"))))},n=a=>a.split(/(@\w+)/g).map((u,d)=>u.startsWith("@")?y.jsx("strong",{className:"text-brand-accent font-semibold cursor-pointer hover:underline",children:u},d):u),i=t.authorId?`/profile/${t.authorId}`:"#",o=t.authorAvatarUrl||`https://i.pravatar.cc/150?u=${t.authorName}`;return y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(fn,{to:i,children:y.jsx("img",{src:o,alt:t.authorName,className:"w-10 h-10 rounded-full object-cover"})}),y.jsxs("div",{className:"flex-1 bg-gray-700/50 p-3 rounded-lg",children:[y.jsxs("div",{className:"flex items-baseline gap-2",children:[y.jsx(fn,{to:i,className:"font-bold text-white text-sm hover:underline",children:t.authorName}),y.jsx("span",{className:"text-xs text-gray-500",children:e(t.createdAt)})]}),y.jsx("p",{className:"text-gray-300 text-sm mt-1",children:n(t.content)})]})]})},We=({children:t,variant:e="primary",isLoading:n=!1,size:i="md",className:o,...a})=>{const u="rounded-full font-semibold transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",d={primary:"bg-brand-accent hover:bg-brand-accent-hover text-white focus:ring-brand-accent",secondary:"bg-gray-700 hover:bg-gray-600 text-white focus:ring-gray-500"},f={sm:"px-3 py-1.5 text-xs",md:"px-6 py-2"};return y.jsx("button",{className:[u,d[e],f[i],o].filter(Boolean).join(" "),disabled:n,...a,children:n?y.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):t})},VI=({onAddComment:t,placeholder:e="Add a comment or tag someone with @"})=>{const[n,i]=D.useState(""),[o,a]=D.useState(!1),[u,d]=D.useState(!1),[f,h]=D.useState(""),_=async E=>{if(E.preventDefault(),!n.trim()||u&&!f.trim())return;a(!0);let S;u?S={authorName:`${f} (Guest)`,authorAvatarUrl:`https://i.pravatar.cc/150?u=${f}`,content:n}:S={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100",content:n};try{await t(S),i(""),h("")}catch(C){console.error("Failed to add comment:",C)}finally{a(!1)}};return y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700/50",children:y.jsxs("form",{onSubmit:_,className:"flex items-start gap-3",children:[y.jsx("img",{src:u?"https://i.pravatar.cc/150?u=guest":"https://picsum.photos/id/1015/100/100",alt:"Your avatar",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),y.jsxs("div",{className:"flex-1 space-y-3",children:[y.jsx("textarea",{value:n,onChange:E=>i(E.target.value),placeholder:e,required:!0,rows:2,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400 text-sm"}),u&&y.jsx("div",{className:"flex gap-3",children:y.jsx("input",{type:"text",value:f,onChange:E=>h(E.target.value),required:!0,placeholder:"Your Name",className:"flex-1 bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-sm focus:ring-brand-accent focus:border-brand-accent"})}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{id:"guest-checkbox",type:"checkbox",checked:u,onChange:E=>d(E.target.checked),className:"h-4 w-4 rounded border-gray-600 bg-gray-700 text-brand-accent focus:ring-brand-accent"}),y.jsx("label",{htmlFor:"guest-checkbox",className:"ml-2 text-xs text-gray-400",children:"Comment as guest"})]}),y.jsx(We,{type:"submit",size:"sm",isLoading:o,children:"Post Comment"})]})]})]})})},To=({comments:t,onAddComment:e,placeholder:n,startExpanded:i=!1})=>{const[o,a]=D.useState(i);return!o&&!i?y.jsxs("button",{onClick:()=>a(!0),className:"text-sm font-semibold text-gray-400 hover:text-white flex items-center gap-2",children:[y.jsx(_e,{name:"comment",className:"w-4 h-4"}),y.jsxs("span",{children:["View ",t.length," Comment",t.length!==1&&"s"]})]}):y.jsxs("div",{className:"w-full",children:[t.length>0&&y.jsx("div",{className:"space-y-4",children:t.map(u=>y.jsx(LI,{comment:u},u.id))}),y.jsx(VI,{onAddComment:e,placeholder:n})]})};var bi=(t=>(t.FREE="Free Download",t.SALE="For Sale",t.PREVIEW="Preview Only",t))(bi||{}),fs=(t=>(t.NEW_TRACK="NEW_TRACK",t.NEW_PHOTO="NEW_PHOTO",t.IRL_EVENT="IRL_EVENT",t))(fs||{}),Qt=(t=>(t.GEO="GEO",t.UNIVERSE="UNIVERSE",t.COUNTRY="COUNTRY",t))(Qt||{});const ut=[{id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:"Weaving deep, rolling basslines with atmospheric pads and intricate breaks. Welcome to the concrete jungle.",interview:[{question:"What's the story behind your name?",answer:"It's all about the fusion. The 'Sub' is for the deep bass frequencies I love, and 'Tropical' represents the atmospheric, jungle-like vibes I try to create. It's that contrast between urban and natural environments."},{question:"Who are your biggest influences?",answer:"Definitely the old-school legends like Goldie, Photek, and Dillinja for their breakbeat science. But also film composers like Hans Zimmer for their sense of scale and atmosphere. I try to bring that cinematic feel to a 170bpm tempo."},{question:"What's your go-to piece of studio gear?",answer:"It has to be my analog synth, the Moog Sub 37. You just can't replicate that warmth and weight with software. Every bassline I write starts there. It's the heart of my sound."}],gallery:["https://picsum.photos/id/1011/800/600","https://picsum.photos/id/1012/800/600","https://picsum.photos/id/1013/800/600"]},{id:"user_2",name:"Re-Flex",avatarUrl:"https://picsum.photos/id/1016/200/200",bio:"Heavy-hitting D&B with a focus on deep sub frequencies and technical rhythm patterns. For the heads.",interview:[{question:"Describe your sound in three words.",answer:"Deep, dark, and rolling."}],gallery:["https://picsum.photos/id/201/800/600","https://picsum.photos/id/202/800/600"]},{id:"user_3",name:"Lioness Vibe",avatarUrl:"https://picsum.photos/id/1025/200/200",bio:"Fusing classic reggae and dub culture with the energy of 170bpm jungle. Positive vibrations.",interview:[{question:"What's the message behind your music?",answer:"It's all about unity and positive energy. Taking the soundsystem culture I grew up with and bringing it to the jungle world. It's about respecting the roots."}],gallery:["https://picsum.photos/id/301/800/600","https://picsum.photos/id/302/800/600"]}],Pt=[{id:"c1",authorId:"user_2",authorName:"Re-Flex",authorAvatarUrl:ut[1].avatarUrl,content:"Heavy roller this one!",createdAt:new Date(Date.now()-1e3*60*60*3).toISOString()},{id:"c2",authorId:"user_3",authorName:"Lioness Vibe",authorAvatarUrl:ut[2].avatarUrl,content:"Pure vibes. The atmosphere is incredible.",createdAt:new Date(Date.now()-1e3*60*30).toISOString()}],Tx={label_1:[{id:"opp_1",title:"Seeking Vocalist for Deep Liquid Track",type:"Vocalist",description:"We have a deep, atmospheric liquid track in the works and are looking for a vocalist with a soulful, ethereal style to collaborate with. Please submit demos.",comments:[{id:"c1-opp",authorId:"user_2",authorName:"Re-Flex",authorAvatarUrl:ut[1].avatarUrl,content:"Sounds interesting. Sent you a DM with a link to a vocalist I worked with before.",createdAt:new Date(Date.now()-1e3*60*60*3).toISOString()},{id:"c2-opp",authorId:"user_3",authorName:"Lioness Vibe",authorAvatarUrl:ut[2].avatarUrl,content:"This sounds like a vibe for sure. Good luck finding someone!",createdAt:new Date(Date.now()-1e3*60*30).toISOString()}]},{id:"opp_2",title:"Graphic Designer for Album Art",type:"Designer",description:"We need a talented graphic designer to create the cover art and promotional materials for an upcoming EP. We are looking for a minimalist, abstract style.",comments:[{id:"c3-opp",authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:ut[0].avatarUrl,content:"My friend @PixelPusher does amazing work in this style, they should apply!",createdAt:new Date(Date.now()-1e3*60*60*24*2).toISOString()}]}]},Qd=[{id:"label_1",name:"Deep Grooves",logoUrl:"https://picsum.photos/id/237/200/200",bannerUrl:"https://picsum.photos/id/1018/1200/400",bio:"Focused on the deeper, more atmospheric side of drum and bass. We push sounds that are both hypnotic and heavy, for the true heads who appreciate the art of the roller. Our mission is to champion producers who craft immersive soundscapes and push the boundaries of rhythm and bass.",artistIds:["user_1","user_2"],storeLinks:[{name:"Bandcamp",url:"#",icon:"bandcamp"},{name:"Merch Store",url:"#",icon:"package"}],featuredReleaseId:"track_2",galleryImageUrls:["https://picsum.photos/id/10/800/600","https://picsum.photos/id/22/800/600","https://picsum.photos/id/30/800/600"],opportunities:Tx.label_1,eventPhotos:["https://picsum.photos/id/1040/800/600","https://picsum.photos/id/1041/800/600","https://picsum.photos/id/1042/800/600"],theme:{bannerUrl:"https://picsum.photos/id/1018/1200/400",accentColor:"#1DB954"},comments:[Pt[0]]},{id:"label_2",name:"Jungle Massive Recordings",logoUrl:"https://picsum.photos/id/238/200/200",bannerUrl:"https://picsum.photos/id/1019/1200/400",bio:"Bringing the original jungle sound back to the forefront. Raw breakbeats, reggae samples, and chest-rattling basslines are our signature. We honor the roots while pushing the sound into the future.",artistIds:["user_3"],storeLinks:[{name:"Bandcamp",url:"#",icon:"bandcamp"}],featuredReleaseId:"track_3",theme:{bannerUrl:"https://picsum.photos/id/1019/1200/400",accentColor:"#F59E0B"}}],OI={label_1:[{id:"le_1",title:"Deep Grooves Label Night",date:"2024-11-15",location:"Fabric, London",description:"Join us for a night of deep rollers with the full Deep Grooves roster.",ticketUrl:"#"},{id:"le_2",title:"Re-Flex Album Launch",date:"2024-12-05",location:"Watergate, Berlin",description:"Celebrating the launch of the new album from Re-Flex."}],label_2:[{id:"le_3",title:"Jungle Massive Soundclash",date:"2024-11-22",location:"The Black Swan, Bristol",description:"A night of classic jungle and dubplates, featuring Lioness Vibe and special guests.",ticketUrl:"#"}]},ln=[{id:"track_1",title:"Concrete Jungle",artistId:"user_1",artistName:"Sub-Tropical",audioSrc:"https://storage.googleapis.com/jweb-app-media/track_1.mp3",coverArtUrl:"https://picsum.photos/id/145/400/400",price:1.29,currency:"USD",uploadType:bi.SALE,description:"A deep, rolling drum & bass track with lush atmospheric pads and a heavy, off-beat sub bass. Takes you on a journey through the urban wilderness.",tags:["Drum & Bass","Jungle","Liquid"],category:"Official Release",labelId:"label_1",labelName:"Deep Grooves",comments:[...Pt]},{id:"track_2",title:"Deepwater Horizon (Remix)",artistId:"user_2",artistName:"Re-Flex",audioSrc:"https://storage.googleapis.com/jweb-app-media/track_2.mp3",coverArtUrl:"https://picsum.photos/id/211/400/400",price:0,currency:"USD",uploadType:bi.FREE,description:"Minimalist, tech-driven D&B. A hypnotic roller with a sub-bass that you feel more than you hear. Intricate percussion and subtle textures create a deep, meditative groove perfect for the late-night hours.",tags:["Deep D&B","Techstep","Rolling"],category:"Remix",sourceSamples:['"Think" break by Lyn Collins',"808 Sub Bass Patch"],labelId:"label_1",labelName:"Deep Grooves",comments:[Pt[1]]},{id:"track_3",title:"Babylon Fall",artistId:"user_3",artistName:"Lioness Vibe",audioSrc:"https://storage.googleapis.com/jweb-app-media/track_3.mp3",coverArtUrl:"https://picsum.photos/id/310/400/400",price:0,currency:"USD",uploadType:bi.PREVIEW,description:"Classic reggae vocal samples chopped over a thunderous amen break and a chest-rattling bassline. Pure dubwise jungle pressure, guaranteed to shake the foundations.",tags:["Reggae","Jungle","Dubwise"],category:"Official Release",labelId:"label_2",labelName:"Jungle Massive Recordings",comments:[]},{id:"track_4",title:"Amazon Flow",artistId:"user_1",artistName:"Sub-Tropical",audioSrc:"https://storage.googleapis.com/jweb-app-media/track_4.mp3",coverArtUrl:"https://picsum.photos/id/431/400/400",price:.99,currency:"USD",uploadType:bi.SALE,description:"A liquid funk anthem. Smooth, melodic, and uplifting with a clean, rolling beat and warm bass. Perfect for a sunset session.",tags:["Liquid Funk","Atmospheric","D&B"],category:"Official Release",labelId:"label_1",labelName:"Deep Grooves",comments:[Pt[0],Pt[1]]},{id:"track_5",title:"Kingston Skank (Bootleg)",artistId:"user_1",artistName:"Sub-Tropical",audioSrc:"https://storage.googleapis.com/jweb-app-media/track_5.mp3",coverArtUrl:"https://picsum.photos/id/454/400/400",price:0,currency:"USD",uploadType:bi.FREE,description:"Off-beat reggae guitars and horn stabs ride a high-energy 175bpm jungle rhythm track. This is an unofficial bootleg, for promotional use only.",tags:["Jungle","Reggae","Bootleg"],category:"Bootleg",comments:[Pt[0]]}],Xd=[{id:"post_1",title:"Favorite classic Amen break edits?",content:"The Amen break is the foundation! What are some of your favorite, most creative or influential edits of the Amen? Looking for inspiration for my next junglist track. Links appreciated!",authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100",createdAt:new Date(Date.now()-1e3*60*60*2).toISOString(),likes:25,replyCount:2,replies:[Pt[0],Pt[1]]},{id:"post_label_1",title:"New Release: Sub-Tropical - Concrete Jungle",content:"Our latest release from the one and only Sub-Tropical is out now on all major platforms! A deep, rolling journey into the concrete jungle. Grab it now on our Bandcamp.",authorId:"label_1",authorName:"Deep Grooves",authorAvatarUrl:"https://picsum.photos/id/237/100/100",createdAt:new Date(Date.now()-1e3*60*60*8).toISOString(),likes:52,replyCount:1,replies:[Pt[0]]},{id:"post_2",title:"Best VSTs for creating deep, rolling sub-bass?",content:"I'm trying to get that really deep, clean, rolling sub that you can feel in your chest. Using Serum right now but wondering what else is out there. Any tips on synthesis or processing chains?",authorId:"user_2",authorName:"Re-Flex",authorAvatarUrl:"https://picsum.photos/id/1016/100/100",createdAt:new Date(Date.now()-1e3*60*60*24).toISOString(),likes:41,replyCount:0,replies:[]},{id:"post_3",title:"Who are your favorite reggae/dub artists to sample?",content:'Looking for some fresh (or classic) material to sample for my next jungle tune. Who are your go-to artists for vocal snippets, horn stabs, or basslines? Thinking King Tubby, Lee "Scratch" Perry, etc.',authorId:"user_3",authorName:"Lioness Vibe",authorAvatarUrl:"https://picsum.photos/id/1025/100/100",createdAt:new Date(Date.now()-1e3*60*60*72).toISOString(),likes:68,replyCount:1,replies:[Pt[1]]}],FI=[{id:"conv_1",participants:[ut[0],ut[1]],unreadCount:2,messages:[{id:"msg_1",senderId:"user_2",text:'Yo, that "Concrete Jungle" track is heavy! Serious roller.',timestamp:new Date(Date.now()-1e3*60*60*5).toISOString()},{id:"msg_2",senderId:"user_1",text:"Thanks man, appreciate that! Your latest remix is sounding huge too.",timestamp:new Date(Date.now()-1e3*60*60*4).toISOString()},{id:"msg_3",senderId:"user_2",text:"We should collab on something soon.",timestamp:new Date(Date.now()-1e3*60*30).toISOString()},{id:"msg_4",senderId:"user_2",text:"Got a new sub bass technique I want to try out.",timestamp:new Date(Date.now()-1e3*60*29).toISOString()}]},{id:"conv_2",participants:[ut[0],ut[2]],unreadCount:1,messages:[{id:"msg_5",senderId:"user_3",text:"Big up on the jungle vibes recently! Keeping the sound alive.",timestamp:new Date(Date.now()-1e3*60*60*26).toISOString()},{id:"msg_6",senderId:"user_1",text:"Respect! Your dub influences are a massive inspiration.",timestamp:new Date(Date.now()-1e3*60*60*25).toISOString()},{id:"msg_7",senderId:"user_3",text:"I've got some rare reggae vocals if you ever need some for a track.",timestamp:new Date(Date.now()-1e3*60*15).toISOString()}]},{id:"conv_3",participants:[ut[0],{id:"label_1",name:"Deep Grooves",avatarUrl:"https://picsum.photos/id/237/200/200",bio:""}],unreadCount:0,messages:[{id:"msg_8",senderId:"label_1",text:'Hey, just checking in. The promo for "Concrete Jungle" is going great. DJs are loving it.',timestamp:new Date(Date.now()-1e3*60*60*72).toISOString()},{id:"msg_9",senderId:"user_1",text:"Awesome news! Thanks for the update.",timestamp:new Date(Date.now()-1e3*60*60*71).toISOString()}]}],BI={user_1:[{id:"ext_1",platform:"Spotify",title:"Concrete Jungle EP",url:"#",isPaid:!0,type:"Official"},{id:"ext_2",platform:"SoundCloud",title:"Summer Breeze (Bootleg)",url:"#",isPaid:!1,type:"Bootleg"},{id:"ext_3",platform:"YouTube",title:"Amazon Flow (Official Video)",url:"#",isPaid:!1,type:"Official"},{id:"ext_4",platform:"Bandcamp",title:"Goldie - Terminator (Sub-Tropical Remix)",url:"#",isPaid:!0,type:"Remix",sourceArtist:"Goldie",sourceSamples:['"Terminator" vocal snippet',"Reese Bassline"]}],user_2:[],user_3:[]},qI={user_1:[{id:"pack_1",title:"Concrete Jungle - Supporter Pack",price:25,currency:"USD",description:"The ultimate collection for supporters. Get the official release, exclusive merchandise, and a host of unreleased content.",items:[{name:'Official "Concrete Jungle" Release',icon:"music-note"},{name:"Exclusive T-Shirt Merchandise",icon:"tshirt"},{name:"Unreleased VIP & Bootlegs",icon:"crown"},{name:"SoundWave Masterclass Access",icon:"camera"},{name:"Public Playlist Curation",icon:"playlist"}]}],user_2:[],user_3:[]},HI=["This new 'Concrete Jungle' track is fire! ","Anyone got tips for sidechaining reverb?","Just dropped a new liquid funk tune, check it out on my profile!","What's your favorite synth for pads?","The bassline on 'Deepwater Horizon' is so clean.","Looking for collaborators for a jungle project.","That amen break is classic.","Lioness Vibe's new track is a banger.","Struggling with writer's block today.","Anyone else using Ableton Live?","The kicks in 'Babylon Fall' are hitting hard.","How do you process your drums for that punchy sound?"],Ex=[{id:"ge_1",type:fs.NEW_TRACK,title:'New Track: "Amazon Flow"',description:"A liquid funk anthem just dropped!",authorName:"Sub-Tropical",transform:"rotateY(250deg) rotateX(30deg) translateZ(100px)",animationDelay:"0s",locationName:"London, UK",country:"United Kingdom",groups:["@Genre:LiquidFunk","@Artist:Sub-Tropical","@ReleasedMusic"],influence:8,comments:[Pt[0]]},{id:"ge_2",type:fs.IRL_EVENT,title:"Live Show: Berlin",description:"Catch Re-Flex live at Berghain next month.",authorName:"Re-Flex",transform:"rotateY(350deg) rotateX(45deg) translateZ(100px)",animationDelay:"0.4s",locationName:"Berlin, Germany",country:"Germany",groups:["@Events:LiveSet","@Artist:Re-Flex","@TicketSales"],influence:9,comments:[]},{id:"ge_3",type:fs.NEW_PHOTO,title:"New Studio Pic",description:"Lioness Vibe shared a photo of her new studio setup.",authorName:"Lioness Vibe",transform:"rotateY(220deg) rotateX(-15deg) translateZ(100px)",animationDelay:"0.2s",locationName:"Kingston, Jamaica",country:"Jamaica",groups:["@Artist:Lioness Vibe","@SocialMediaHub"],influence:6,comments:[Pt[1]]},{id:"ge_4",type:fs.NEW_TRACK,title:'New Track: "Kingston Skank"',description:"High-energy jungle rhythms from Jamaica.",authorName:"Lioness Vibe",transform:"rotateY(10deg) rotateX(10deg) translateZ(100px)",animationDelay:"0.6s",locationName:"Kingston, Jamaica",country:"Jamaica",groups:["@Genre:Jungle","@Artist:Lioness Vibe","@ReleasedMusic"],influence:7,comments:[]},{id:"ge_5",type:fs.NEW_PHOTO,title:"Tokyo Street Art",description:"Inspiration hunting in Shibuya.",authorName:"Sub-Tropical",transform:"rotateY(80deg) rotateX(35deg) translateZ(100px)",animationDelay:"0.8s",locationName:"Tokyo, Japan",country:"Japan",groups:["@Mood:Inspiration","@Artist:Sub-Tropical","@SocialMediaHub"],influence:5,comments:[]}],GI=[{id:"station_1",name:"Jungle Pressure Radio",description:"The heaviest breaks and the deepest basslines. Strictly for the heads.",tags:["Jungle","Bootleg","Dubwise"],imageUrl:"https://picsum.photos/id/10/600/600"},{id:"station_2",name:"Liquid Funk Flow",description:"Smooth, soulful, and atmospheric drum & bass for the late night drive.",tags:["Liquid","Liquid Funk","Atmospheric"],imageUrl:"https://picsum.photos/id/22/600/600"},{id:"station_3",name:"Sub-Tropical FM",description:"A curated selection of tracks from the artist Sub-Tropical.",tags:[],artistId:"user_1",imageUrl:"https://picsum.photos/id/1015/600/600"}],zI=[{id:"room_global",name:"SoundWave Global Room",host:{id:"dj_gemini",name:"DJ Gemini",avatarUrl:"https://i.pravatar.cc/150?u=dj_gemini",bio:""},viewers:142,isLive:!0},{id:"room_2",name:"Dubplate Feedback Session",host:ut[1],viewers:38,isLive:!0},{id:"room_3",name:"Reggae Roots & Culture",host:ut[2],viewers:76,isLive:!0}],xx=[{id:"cp_1",title:"Late Night Rollers",curator:ut[1],tracks:[ln[1],ln[3],ln[0],ln[4]],comments:[Pt[0]]},{id:"cp_2",title:"Jungle Massive Selection",curator:ut[2],tracks:[ln[2],ln[4],ln[0]],comments:[Pt[1]]},{id:"cp_3",title:"Atmospheric Vibes",curator:ut[0],tracks:[ln[0],ln[3]],comments:[]},{id:"cp_4",title:"My D&B Favorites",curator:ut[0],tracks:[ln[0],ln[1],ln[4]]}],Sx=[{id:"tut_1",title:"Anatomy of a Jungle Breakbeat",instructor:ut[0],thumbnailUrl:"https://picsum.photos/id/501/400/225",duration:"12:45",difficulty:"Intermediate",tags:["Breakbeats","Jungle","Drums"],comments:[Pt[0]]},{id:"tut_2",title:"Crafting Deep Sub-Bass",instructor:ut[1],thumbnailUrl:"https://picsum.photos/id/502/400/225",duration:"08:15",difficulty:"Beginner",tags:["Bass","Sound Design","Mixing"],comments:[Pt[1]]},{id:"tut_3",title:"Dub Siren & FX Techniques",instructor:ut[2],thumbnailUrl:"https://picsum.photos/id/503/400/225",duration:"15:30",difficulty:"Intermediate",tags:["FX","Dub","Sound Design"]},{id:"tut_4",title:"Arranging a Liquid Funk Track",instructor:ut[0],thumbnailUrl:"https://picsum.photos/id/504/400/225",duration:"22:05",difficulty:"Advanced",tags:["Arrangement","Liquid Funk","Workflow"],comments:[]}],wx=[{id:"mc_1",title:"The Art of the Rolling Bassline",instructor:ut[1],coverArtUrl:"https://picsum.photos/id/601/600/400",description:"A comprehensive 4-hour course on the theory, sound design, and mixing techniques behind hypnotic, rolling D&B basslines.",price:79.99,currency:"USD",durationHours:4,comments:[Pt[0],Pt[1]]},{id:"mc_2",title:"Modern Jungle Production Workflow",instructor:ut[0],coverArtUrl:"https://picsum.photos/id/602/600/400",description:"From sampling and chopping breaks to modern processing and arrangement, this 6-hour masterclass covers everything you need to know to create authentic jungle tracks with a modern edge.",price:99.99,currency:"USD",durationHours:6,comments:[]}],Ax=[{id:"sp_1",title:"Sub-Tropical DnB Essentials",creator:ut[0],coverArtUrl:"https://picsum.photos/id/701/400/400",price:29.99,currency:"USD",tags:["D&B","Jungle","Atmospheric"],contains:["25 Bass Loops","50 Drum Breaks","30 Pad Samples"],comments:[Pt[0]]},{id:"sp_2",title:"Re-Flex Techstep Drums",creator:ut[1],coverArtUrl:"https://picsum.photos/id/702/400/400",price:19.99,currency:"USD",tags:["Techstep","Drums","Minimal"],contains:["100 Drum One-Shots","20 Percussion Loops"],comments:[Pt[1]]},{id:"sp_3",title:"Lioness Vibe Dub Vocals Vol. 1",creator:ut[2],coverArtUrl:"https://picsum.photos/id/703/400/400",price:0,currency:"USD",tags:["Vocals","Dub","Reggae"],contains:["15 Vocal Phrases","10 FX One-Shots"],comments:[]}],Ze=t=>new Promise(e=>setTimeout(e,t)),Cx=async()=>(await Ze(50),ut),jI=async t=>(await Ze(50),ut.find(e=>e.id===t)),Zd=async()=>(await Ze(50),ln),JI=async t=>(await Ze(50),ln.filter(e=>e.artistId===t)),YI=async t=>(await Ze(50),ln.filter(e=>e.labelId===t)),bx=async()=>(await Ze(50),Xd.sort((t,e)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())),$I=async t=>(await Ze(50),Xd.filter(e=>e.authorId===t).sort((e,n)=>new Date(n.createdAt).getTime()-new Date(e.createdAt).getTime())),Ix=()=>HI,KI=async()=>(await Ze(100),Ex),WI=async t=>(await Ze(50),BI[t]||[]),QI=async t=>(await Ze(50),qI[t]||[]),XI=async()=>(await Ze(50),GI),Rx=async()=>(await Ze(50),zI),Nx=async()=>(await Ze(50),xx),ZI=async()=>(await Ze(50),Sx),eR=async()=>(await Ze(50),wx),tR=async()=>(await Ze(50),Ax),nR=async()=>(await Ze(50),Qd),iR=async t=>(await Ze(50),Qd.find(e=>e.id===t)),sR=async t=>{await Ze(50);const e=Qd.find(n=>n.id===t);return e?ut.filter(n=>e.artistIds.includes(n.id)):[]},rR=async t=>(await Ze(50),OI[t]||[]),oR=async t=>(await Ze(50),FI),Mx=async t=>{await Ze(300);const e={id:`post_${Date.now()}`,...t,createdAt:new Date().toISOString(),likes:0,replyCount:0,replies:[]};return Xd.unshift(e),e},As=t=>({id:`c_${Date.now()}_${Math.random()}`,createdAt:new Date().toISOString(),...t}),Eu=async(t,e)=>{await Ze(200);const n=ln.find(o=>o.id===t);if(!n)throw new Error("Track not found");const i=As(e);return n.comments||(n.comments=[]),n.comments.push(i),i},aR=async(t,e)=>{await Ze(200);const n=Xd.find(o=>o.id===t);if(!n)throw new Error("Post not found");const i=As(e);return n.replies||(n.replies=[]),n.replies.push(i),n.replyCount=n.replies.length,i},lR=async(t,e)=>{await Ze(200);const n=wx.find(o=>o.id===t);if(!n)throw new Error("Masterclass not found");const i=As(e);return n.comments||(n.comments=[]),n.comments.push(i),i},uR=async(t,e)=>{await Ze(200);const n=Ax.find(o=>o.id===t);if(!n)throw new Error("Sample pack not found");const i=As(e);return n.comments||(n.comments=[]),n.comments.push(i),i},cR=async(t,e)=>{await Ze(200);const n=Sx.find(o=>o.id===t);if(!n)throw new Error("Tutorial not found");const i=As(e);return n.comments||(n.comments=[]),n.comments.push(i),i},dR=async(t,e)=>{await Ze(200);const n=Ex.find(o=>o.id===t);if(!n)throw new Error("Global event not found");const i=As(e);return n.comments||(n.comments=[]),n.comments.push(i),i},fR=async(t,e)=>{await Ze(200);const n=xx.find(o=>o.id===t);if(!n)throw new Error("Playlist not found");const i=As(e);return n.comments||(n.comments=[]),n.comments.push(i),i},hR=async(t,e)=>{await Ze(200);const n=Qd.find(o=>o.id===t);if(!n)throw new Error("Label not found");const i=As(e);return n.comments||(n.comments=[]),n.comments.push(i),i},mR=async(t,e,n)=>{await Ze(200);const i=Tx[t];if(!i)throw new Error("Label opportunities not found");const o=i.find(u=>u.id===e);if(!o)throw new Error("Opportunity not found");const a=As(n);return o.comments||(o.comments=[]),o.comments.push(a),a},Dp=({post:t})=>{const[e,n]=D.useState(t),[i,o]=D.useState(!1),a=f=>{const h=new Date(f),_=Math.floor((new Date().getTime()-h.getTime())/1e3);let E=_/31536e3;return E>1?Math.floor(E)+" years ago":(E=_/2592e3,E>1?Math.floor(E)+" months ago":(E=_/86400,E>1?Math.floor(E)+" days ago":(E=_/3600,E>1?Math.floor(E)+" hours ago":(E=_/60,E>1?Math.floor(E)+" minutes ago":Math.floor(_)+" seconds ago"))))},u=e.authorId.startsWith("label_")?`/labels/${e.authorId}`:`/profile/${e.authorId}`,d=async f=>{try{const h=await aR(e.id,f);n(_=>({..._,replies:[..._.replies||[],h],replyCount:(_.replies||[]).length+1}))}catch(h){console.error("Failed to add reply:",h)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl",children:[y.jsxs("div",{className:"flex items-start space-x-4",children:[y.jsx(fn,{to:u,children:y.jsx("img",{src:e.authorAvatarUrl,alt:e.authorName,className:"w-12 h-12 rounded-full object-cover"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:e.title}),y.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["Posted by ",y.jsx(fn,{to:u,className:"font-medium hover:text-white hover:underline",children:e.authorName}),y.jsx("span",{className:"mx-2",children:""}),y.jsx("span",{children:a(e.createdAt)})]}),y.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:e.content})]})]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex items-center space-x-6 text-gray-400",children:[y.jsxs("button",{className:"flex items-center space-x-2 hover:text-brand-accent transition-colors",children:[y.jsx(_e,{name:"heart",className:"w-5 h-5"}),y.jsxs("span",{children:[e.likes," Likes"]})]}),y.jsxs("button",{onClick:()=>o(!i),className:"flex items-center space-x-2 hover:text-white transition-colors",children:[y.jsx(_e,{name:"comment",className:"w-5 h-5"}),y.jsxs("span",{children:[e.replyCount," Replies"]})]})]}),i&&y.jsx("div",{className:"mt-4",children:y.jsx(To,{comments:e.replies||[],onAddComment:d,placeholder:"Write a reply..."})})]})},Dx=({onPostCreated:t})=>{const[e,n]=D.useState(!1),[i,o]=D.useState(""),[a,u]=D.useState(""),d=async f=>{if(f.preventDefault(),!i.trim()||!a.trim())return;n(!0);const h={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100"};try{const _=await Mx({title:i,content:a,...h});t(_),o(""),u("")}catch(_){console.error("Failed to add post:",_)}finally{n(!1)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg h-full",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create a New Post"}),y.jsxs("form",{onSubmit:d,className:"space-y-4",children:[y.jsx("div",{children:y.jsx("input",{type:"text",placeholder:"Post Title",value:i,onChange:f=>o(f.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})}),y.jsx("div",{children:y.jsx("textarea",{placeholder:"What's on your mind?",value:a,onChange:f=>u(f.target.value),required:!0,rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})}),y.jsx("div",{className:"flex justify-end",children:y.jsx(We,{type:"submit",isLoading:e,children:"Post"})})]})]})},pR=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(""),[o,a]=D.useState([]),u=D.useRef(null),d={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};D.useEffect(()=>{Cx().then(a)},[]),D.useEffect(()=>{if(o.length===0)return;const h=Ix(),_=o.filter(S=>S.id!==d.id);_.length>0&&e([{id:`msg_${Date.now()-5e3}`,user:_[0],text:"Welcome to the live chat!",timestamp:new Date(Date.now()-5e3).toISOString()},{id:`msg_${Date.now()-2e3}`,user:_[1%_.length],text:"Anyone working on new tunes?",timestamp:new Date(Date.now()-2e3).toISOString()}]);const E=setInterval(()=>{const S=_[Math.floor(Math.random()*_.length)],C=h[Math.floor(Math.random()*h.length)],M={id:`msg_${Date.now()}`,user:S,text:C,timestamp:new Date().toISOString()};e(V=>[...V,M])},8e3);return()=>clearInterval(E)},[o]),D.useEffect(()=>{var h;(h=u.current)==null||h.scrollIntoView({behavior:"smooth"})},[t]);const f=h=>{if(h.preventDefault(),!n.trim())return;const _={id:`msg_${Date.now()}`,user:d,text:n,timestamp:new Date().toISOString()};e(E=>[...E,_]),i("")};return y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[500px]",children:[y.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:y.jsxs("div",{className:"space-y-4",children:[t.map(h=>y.jsxs("div",{className:`flex items-start gap-3 ${h.user.id===d.id?"flex-row-reverse":""}`,children:[y.jsx("img",{src:h.user.avatarUrl,alt:h.user.name,className:"w-10 h-10 rounded-full object-cover"}),y.jsxs("div",{className:`p-3 rounded-lg max-w-sm shadow ${h.user.id===d.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[y.jsx("p",{className:"font-bold text-sm mb-1",children:h.user.name}),y.jsx("p",{className:"text-sm",children:h.text})]})]},h.id)),y.jsx("div",{ref:u})]})}),y.jsx("div",{className:"p-4 bg-gray-700/50 border-t border-gray-700",children:y.jsxs("form",{onSubmit:f,className:"flex gap-3 items-center",children:[y.jsx("img",{src:d.avatarUrl,alt:"Your avatar",className:"w-8 h-8 rounded-full"}),y.jsx("input",{type:"text",value:n,onChange:h=>i(h.target.value),placeholder:"Join the conversation...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),y.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-2 hover:bg-brand-accent-hover disabled:bg-gray-500 transition-colors",disabled:!n.trim(),children:y.jsx(_e,{name:"send",className:"w-5 h-5"})})]})})]})},Eo=({isOpen:t,onClose:e,title:n,comments:i,onAddComment:o})=>{const a=D.useRef(null);return D.useEffect(()=>{const u=d=>{d.key==="Escape"&&e()};return t&&(document.addEventListener("keydown",u),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",u),document.body.style.overflow=""}},[t,e]),t?y.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm","aria-labelledby":"comment-modal-title",role:"dialog","aria-modal":"true",onClick:e,children:y.jsxs("div",{ref:a,className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl h-full max-h-[80vh] flex flex-col overflow-hidden",onClick:u=>u.stopPropagation(),children:[y.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-700 flex-shrink-0",children:[y.jsx("h2",{id:"comment-modal-title",className:"text-xl font-bold text-white truncate",children:n}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white p-2 rounded-full","aria-label":"Close comment modal",children:y.jsx(_e,{name:"x",className:"w-6 h-6"})})]}),y.jsx("main",{className:"flex-grow overflow-y-auto p-6",children:y.jsx(To,{comments:i,onAddComment:o,startExpanded:!0})})]})}):null},Px=t=>{switch(t){case fs.NEW_TRACK:return"music-note";case fs.NEW_PHOTO:return"camera";case fs.IRL_EVENT:return"map-pin";default:return"chat-bubble"}},m_=({event:t,onClick:e,onMouseEnter:n,onMouseLeave:i,className:o="event-ping",isDimmed:a,isHighlighted:u,size:d=32})=>{const f=d*.6;return y.jsx("div",{className:`${o} ${a?"dimmed":""}`,style:{transform:t.transform,animationDelay:t.animationDelay,width:`${d}px`,height:`${d}px`,marginLeft:`${-d/2}px`,marginTop:`${-d/2}px`},onMouseEnter:()=>n(t),onMouseLeave:i,onClick:()=>e(t),"aria-label":`Event: ${t.title}`,children:y.jsx("div",{className:`event-ping-icon ${u?"highlight":""}`,style:{animationDelay:t.animationDelay},children:y.jsx(_e,{name:Px(t.type),className:"transition-all",style:{width:f,height:f}})})})},gR=({mode:t,setMode:e})=>{const n="flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium transition-colors",i="bg-brand-accent text-white",o="bg-gray-700 text-gray-300 hover:bg-gray-600",a=[{key:Qt.GEO,icon:"globe-alt",label:"Geo"},{key:Qt.UNIVERSE,icon:"aperture",label:"Universe"},{key:Qt.COUNTRY,icon:"map",label:"Countries"}];return y.jsx("div",{className:"flex space-x-2 p-1 bg-gray-900/50 rounded-full",children:a.map(({key:u,icon:d,label:f})=>y.jsxs("button",{onClick:()=>e(u),className:`${n} ${t===u?i:o}`,children:[y.jsx(_e,{name:d,className:"w-4 h-4"}),y.jsx("span",{children:f})]},u))})},yR=()=>{var se;const[e,n]=D.useState([]),[i,o]=D.useState(!0),[a,u]=D.useState(Qt.GEO),[d,f]=D.useState(null),[h,_]=D.useState(null),[E,S]=D.useState(null),[C,M]=D.useState(1),[V,U]=D.useState({x:-20,y:30}),[z,$]=D.useState({x:0,y:0,z:0}),[j,Y]=D.useState(!1),ie=D.useRef({x:0,y:0}),[oe,P]=D.useState(null),N=["@Artist:Sub-Tropical","@Genre:Jungle","@Genre:LiquidFunk"],[R,k]=D.useState(null);D.useEffect(()=>{KI().then(W=>{n(W),o(!1)})},[]),D.useEffect(()=>{f(null),S(null),P(null),k(null),$({x:0,y:0,z:0}),M(1)},[a]);const B=D.useMemo(()=>{if(a!==Qt.UNIVERSE)return[];const W=new Map;e.forEach(me=>{me.groups.forEach(ye=>{const be=ye.split(":")[0];W.set(be,(W.get(be)||0)+1)})});const de=Array.from(W.keys());return de.map((me,ye)=>{const be=ye/de.length*2*Math.PI,tt=Math.random()*Math.PI-Math.PI/2,nt=120+Math.random()*20,mn=Math.cos(be)*Math.cos(tt)*nt,Sn=Math.sin(be)*Math.cos(tt)*nt,mi=Math.sin(tt)*nt;return{name:me,transform:`translateX(-50%) translateY(-50%) translateX(${mn}px) translateY(${mi}px) translateZ(${Sn}px) rotateY(${-be}rad) rotateX(${-tt}rad)`,position:{x:mn,y:mi,z:Sn},influence:W.get(me)||1}})},[e,a]),q=D.useMemo(()=>{if(a!==Qt.COUNTRY)return[];const W=e.reduce((me,ye)=>(me[ye.country]=me[ye.country]||[],me[ye.country].push(ye),me),{}),de={"United Kingdom":{top:"40%",left:"45%"},Germany:{top:"42%",left:"55%"},Jamaica:{top:"70%",left:"25%"},Japan:{top:"50%",left:"85%"}};return Object.entries(W).map(([me,ye])=>({name:me,count:ye.length,events:ye,position:de[me]||{top:"50%",left:"50%"}}))},[e,a]),L=W=>{W.preventDefault();const de=.001;M(me=>Math.max(.5,Math.min(3,me-W.deltaY*de)))},je=W=>{Y(!0),ie.current={x:W.clientX,y:W.clientY}},ge=()=>Y(!1),O=W=>{if(!j)return;const de=W.clientX-ie.current.x,me=W.clientY-ie.current.y;ie.current={x:W.clientX,y:W.clientY},U(ye=>({y:ye.y+de*.2,x:Math.max(-90,Math.min(90,ye.x-me*.2))}))},te=W=>{oe===W.name?(P(null),$({x:0,y:0,z:0})):(P(W.name),$({x:-W.position.x,y:-W.position.y,z:-W.position.z}))},fe=async W=>{if(h)try{const de=await dR(h.id,W),me={...h,comments:[...h.comments||[],de]};_(me),n(ye=>ye.map(be=>be.id===me.id?me:be))}catch(de){console.error("Failed to add comment to event:",de)}},xe=Array.from({length:12}).map((W,de)=>y.jsx("div",{className:"globe-slice",style:{transform:`rotateY(${180/12*de}deg)`}},de)),ke=()=>{switch(a){case Qt.GEO:return"Global Activity";case Qt.UNIVERSE:return"Musical Universe";case Qt.COUNTRY:return"Community Hotspots";default:return"Activity Hub"}},H=()=>{switch(a){case Qt.GEO:return"Real-time user activity by location.";case Qt.UNIVERSE:return"Click a bubble to focus. Drag to orbit.";case Qt.COUNTRY:return"Scroll to zoom. Click a bubble to explore.";default:return"See what's happening now."}};return y.jsxs(y.Fragment,{children:[h&&y.jsx(Eo,{isOpen:!!h,onClose:()=>_(null),title:`Comments for ${h.title}`,comments:h.comments||[],onAddComment:fe}),y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[500px] p-4 text-center items-center justify-between relative overflow-hidden",children:[y.jsxs("div",{className:"relative z-20 flex justify-between w-full items-start",children:[y.jsxs("div",{className:"text-left",children:[y.jsx("h4",{className:"font-bold text-white text-lg",children:ke()}),y.jsx("p",{className:"text-sm text-gray-400 max-w-xs",children:H()})]}),y.jsx(gR,{mode:a,setMode:u})]}),y.jsx("div",{className:"flex-grow flex items-center justify-center w-full h-full relative",children:i?y.jsx(xn,{}):y.jsxs(y.Fragment,{children:[a===Qt.GEO&&y.jsx("div",{className:"globe-container",children:y.jsxs("div",{className:"relative",children:[y.jsxs("div",{className:"globe",children:[xe,e.map(W=>y.jsx(m_,{event:W,onClick:_,onMouseEnter:f,onMouseLeave:()=>f(null)},W.id))]}),y.jsx("div",{className:"globe-shadow"})]})}),a===Qt.UNIVERSE&&y.jsx("div",{className:"universe-container",onMouseDown:je,onMouseUp:ge,onMouseLeave:ge,onMouseMove:O,onWheel:L,children:y.jsxs("div",{className:"universe-core",style:{transform:`
                                        rotateX(${V.x}deg) 
                                        rotateY(${V.y}deg) 
                                        translateX(${z.x*C}px) 
                                        translateY(${z.y*C}px) 
                                        translateZ(${z.z*C}px) 
                                        scale(${C})
                                    `},children:[B.map(W=>{const de=40+W.influence*8,me=Math.min(.1+W.influence*.05,.7);return y.jsx("div",{className:`universe-node ${oe===W.name?"focused":""} ${oe&&oe!==W.name?"dimmed":""}`,style:{transform:W.transform,fontSize:`${8+W.influence*1.5}px`,width:`${de}px`,height:`${de}px`,backgroundColor:`rgba(168, 85, 247, ${me})`},onClick:()=>te(W),children:W.name},W.name)}),e.map(W=>{const de=oe?W.groups.some(ye=>ye.startsWith(oe)):!0,me=24+W.influence*2;return y.jsx(m_,{event:W,size:me,className:"universe-event-ping",isDimmed:oe!==null&&!de,isHighlighted:de,onClick:_,onMouseEnter:f,onMouseLeave:()=>f(null)},W.id)})]})}),a===Qt.COUNTRY&&y.jsx("div",{className:"country-view-container",onWheel:L,children:y.jsxs("div",{className:"country-view-wrapper",style:{transform:`scale(${C})`},children:[q.map(W=>{const me=40+W.count*15,ye=R===W.name,be=R&&!ye;return y.jsx("div",{className:`country-bubble ${ye?"active":""} ${be?"dimmed":""}`,style:{top:W.position.top,left:W.position.left,width:`${me}px`,height:`${me}px`,fontSize:`${10+W.count}px`},onClick:()=>k(tt=>tt===W.name?null:W.name),onMouseEnter:()=>S(W),onMouseLeave:()=>S(null),children:W.name.split(" ").map(tt=>tt[0]).join("")},W.name)}),R&&((se=q.find(W=>W.name===R))==null?void 0:se.events.map((W,de,me)=>{const ye=q.find(Sn=>Sn.name===R),be=de/me.length*2*Math.PI,tt=(40+ye.count*15)*.7,nt=`calc(${ye.position.top} + ${Math.sin(be)*tt}px)`,mn=`calc(${ye.position.left} + ${Math.cos(be)*tt}px)`;return y.jsx("div",{className:"local-event-ping",style:{top:nt,left:mn},onMouseEnter:()=>f(W),onMouseLeave:()=>f(null),onClick:()=>_(W),children:y.jsx(_e,{name:Px(W.type),className:"w-3 h-3 text-white"})},W.id)}))]})})]})}),y.jsxs("div",{className:"absolute bottom-4 left-4 right-4 z-10 flex items-end gap-4",children:[a===Qt.UNIVERSE&&y.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm p-3 rounded-lg flex-shrink-0",children:[y.jsx("h5",{className:"font-bold text-white text-sm mb-2 text-left",children:"My Bubbles"}),y.jsx("div",{className:"flex flex-col gap-1 items-start",children:N.map(W=>{const de=W.split(":")[0];return y.jsx("button",{onClick:()=>{const me=B.find(ye=>ye.name===de);me&&te(me)},className:`text-xs text-left transition-colors w-full px-2 py-1 rounded ${oe===de?"bg-brand-accent text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:W},W)})}),oe&&y.jsx("button",{onClick:()=>{P(null),$({x:0,y:0,z:0})},className:"text-xs text-gray-400 hover:text-white mt-2 w-full text-center",children:"Reset View"})]}),y.jsx("div",{className:"event-info-box bg-gray-900/80 backdrop-blur-sm p-4 rounded-lg transition-all duration-300 flex-grow",children:d?y.jsxs("div",{className:"opacity-100 transition-opacity duration-300 text-left",children:[y.jsx("h5",{className:"font-bold text-white",children:d.title}),y.jsx("p",{className:"text-sm text-gray-300",children:d.locationName}),y.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["By ",d.authorName]}),y.jsxs(We,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>_(d),children:[y.jsx(_e,{name:"comment",className:"w-4 h-4 mr-2"}),"View Comments"]})]}):E?y.jsxs("div",{className:"opacity-100 transition-opacity duration-300 text-left",children:[y.jsx("h5",{className:"font-bold text-white",children:E.name}),y.jsxs("p",{className:"text-sm text-gray-300",children:[E.count," active event",E.count>1?"s":""]})]}):y.jsx("div",{className:"opacity-70 transition-opacity duration-300",children:y.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Hover over an item for details."})})})]})]})]})},vR=()=>{const[t,e]=D.useState([]),[n,i]=D.useState([]),[o,a]=D.useState(!0),[u,d]=D.useState(null);D.useEffect(()=>{(async()=>{a(!0);const[E,S]=await Promise.all([Zd(),bx()]);e(E),i(S),a(!1)})()},[]);const f=_=>{i(E=>[_,...E].slice(0,2))},h=async _=>{if(u)try{const E=await Eu(u.id,_),S={...u,comments:[...u.comments||[],E]};d(S),e(C=>C.map(M=>M.id===S.id?S:M))}catch(E){console.error("Failed to add comment:",E)}};return o?y.jsx(xn,{}):y.jsxs("div",{children:[u&&y.jsx(Eo,{isOpen:!!u,onClose:()=>d(null),title:`Comments for ${u.title}`,comments:u.comments||[],onAddComment:h}),y.jsxs("section",{id:"featured-tracks",children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Featured Tracks"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Discover new music from artists around the world."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:t.map(_=>y.jsx(Wd,{track:_,onViewComments:d},_.id))})]}),y.jsxs("section",{id:"community-spotlight",className:"mt-16",children:[y.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Community Spotlight"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Join the conversation or start your own."}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[y.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.slice(0,2).map(_=>y.jsx(Dp,{post:_},_.id)),n.length===0&&y.jsx("p",{className:"text-gray-400",children:"No community posts yet. Be the first!"})]}),y.jsx("div",{className:"lg:col-span-1",children:y.jsx(Dx,{onPostCreated:f})})]})]}),y.jsxs("section",{id:"activity-hub",className:"mt-16",children:[y.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Activity Hub"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"See what's happening in the community right now."}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Live Chat"}),y.jsx(pR,{})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Globalizer"}),y.jsx(yR,{})]})]})]})]})},_R={Spotify:{icon:"spotify",color:"text-green-500"},SoundCloud:{icon:"soundcloud",color:"text-orange-500"},YouTube:{icon:"youtube",color:"text-red-500"},Bandcamp:{icon:"bandcamp",color:"text-cyan-400"}},TR=({releases:t})=>{const e=(n,i)=>{console.log(`${n} button clicked for: ${i}`),alert(`Feature coming soon: ${n} for "${i}"`)};return y.jsx("div",{className:"space-y-4",children:t.map(n=>{const i=_R[n.platform],o=n.type==="Bootleg"?!0:!n.isPaid;return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4 transition-colors hover:bg-gray-700/50",children:[y.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 ${i.color} hover:opacity-80 transition-opacity`,children:y.jsx(_e,{name:i.icon,className:"w-10 h-10"})}),y.jsxs("div",{className:"flex-grow",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"font-bold text-white hover:underline",children:n.title}),y.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full border ${o?"bg-green-500/20 text-green-300 border-green-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`,children:o?"Free":"Paid"})]}),n.type==="Remix"&&n.sourceArtist&&y.jsxs("p",{className:"text-sm text-gray-400",children:["Remix of a track by ",y.jsx("span",{className:"font-semibold text-gray-300",children:n.sourceArtist})]})]}),y.jsx("div",{className:"w-full sm:w-auto",children:n.type==="Remix"&&n.sourceSamples&&y.jsxs("div",{className:"mb-2 sm:mb-0",children:[y.jsx("p",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Source Samples:"}),y.jsx("div",{className:"flex flex-wrap gap-1",children:n.sourceSamples.map((a,u)=>y.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:a},u))})]})}),n.type==="Remix"&&y.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 self-start sm:self-center mt-2 sm:mt-0",children:[y.jsxs("button",{onClick:()=>e("Tag Samples",n.title),className:"text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors",children:[y.jsx(_e,{name:"tag",className:"w-3 h-3"})," Tag Samples"]}),y.jsxs("button",{onClick:()=>e("Request Remix",n.title),className:"text-xs bg-purple-600/50 hover:bg-purple-600/80 text-purple-200 px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors",children:[y.jsx(_e,{name:"music-note",className:"w-3 h-3"})," Request Remix"]})]})]},n.id)})})},ER=({pack:t})=>y.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-800/80 border border-brand-accent/30 rounded-lg shadow-2xl p-6 flex flex-col h-full transform transition-transform duration-300 hover:scale-105 hover:shadow-brand-accent/20",children:[y.jsxs("div",{className:"flex-grow",children:[y.jsxs("div",{className:"mb-4",children:[y.jsx(_e,{name:"package",className:"w-10 h-10 text-brand-accent mb-2"}),y.jsx("h3",{className:"text-2xl font-bold text-white",children:t.title}),y.jsx("p",{className:"text-gray-400 mt-1",children:t.description})]}),y.jsx("ul",{className:"space-y-3 my-6",children:t.items.map((e,n)=>y.jsxs("li",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"bg-gray-700 rounded-full p-2",children:y.jsx(_e,{name:e.icon,className:"w-4 h-4 text-brand-accent-hover"})}),y.jsx("span",{className:"text-gray-300",children:e.name})]},n))})]}),y.jsxs("div",{className:"mt-6 text-center",children:[y.jsxs("p",{className:"text-4xl font-bold text-white mb-4",children:["$",t.price.toFixed(2)," ",y.jsx("span",{className:"text-lg font-normal text-gray-400",children:t.currency})]}),y.jsx(We,{className:"w-full",children:"Purchase Pack"})]})]}),xR=({collection:t})=>y.jsxs("div",{children:[y.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Your Collection (",t.length," tracks)"]}),y.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden max-h-[60vh] overflow-y-auto",children:y.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[y.jsx("thead",{className:"text-xs text-gray-300 uppercase bg-gray-700 sticky top-0 z-10",children:y.jsxs("tr",{children:[y.jsx("th",{scope:"col",className:"px-4 py-3",children:"#"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Title"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Artist"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Album"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Genre"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Key"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Time"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"Plays"})]})}),y.jsx("tbody",{children:t.map((e,n)=>y.jsxs("tr",{className:"bg-gray-800 border-b border-gray-700 hover:bg-gray-700/50",children:[y.jsx("td",{className:"px-4 py-3",children:n+1}),y.jsx("th",{scope:"row",className:"px-4 py-3 font-medium text-white whitespace-nowrap",children:e.title}),y.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.artist}),y.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.album}),y.jsx("td",{className:"px-4 py-3",children:e.genre}),y.jsx("td",{className:"px-4 py-3",children:e.key}),y.jsxs("td",{className:"px-4 py-3",children:[e.totalTime,"s"]}),y.jsx("td",{className:"px-4 py-3",children:e.playCount})]},e.trackId||n))})]})})]}),SR=()=>{const{userId:t}=fx(),e=Mr(),[n,i]=D.useState(null),[o,a]=D.useState([]),[u,d]=D.useState([]),[f,h]=D.useState([]),[_,E]=D.useState(null),[S,C]=D.useState(!0),[M,V]=D.useState("tracks"),[U,z]=D.useState(!1),[$,j]=D.useState(null);D.useEffect(()=>{var N;(N=e.state)!=null&&N.collection&&(E(e.state.collection),V("collection"),window.history.replaceState({},document.title))},[e.state]),D.useEffect(()=>{(async()=>{if(!t)return;C(!0);const[R,k,B,q]=await Promise.all([jI(t),JI(t),WI(t),QI(t)]);i(R||null),a(k),d(B),h(q),C(!1)})()},[t]);const Y=()=>{z(N=>!N)},ie=async N=>{if($)try{const R=await Eu($.id,N),k={...$,comments:[...$.comments||[],R]};j(k),a(B=>B.map(q=>q.id===k.id?k:q))}catch(R){console.error("Failed to add comment:",R)}},oe=()=>{switch(M){case"tracks":return y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map(N=>y.jsx(Wd,{track:N,onViewComments:j},N.id))});case"releases":return y.jsx(TR,{releases:u});case"packs":return y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(N=>y.jsx(ER,{pack:N},N.id))});case"collection":return _?y.jsx(xR,{collection:_}):y.jsxs("div",{className:"text-center py-20 px-6 bg-gray-800 rounded-lg border-2 border-dashed border-gray-700",children:[y.jsx(_e,{name:"playlist",className:"w-16 h-16 mx-auto text-gray-500 mb-4"}),y.jsx("h3",{className:"text-2xl font-semibold text-white",children:"Your Music Collection is Empty"}),y.jsx("p",{className:"text-gray-400 mt-2 mb-6 max-w-md mx-auto",children:"Import your Rekordbox XML file to see all your tracks, organize them, and build playlists."}),y.jsx(fn,{to:"/import-collection",children:y.jsxs(We,{children:[y.jsx(_e,{name:"upload",className:"w-5 h-5 mr-2"}),"Import Your Collection"]})})]});default:return null}},P=({tab:N,label:R,count:k})=>y.jsxs("button",{onClick:()=>V(N),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors border-b-2 ${M===N?"text-white border-brand-accent bg-gray-700/50":"text-gray-400 border-transparent hover:text-white hover:border-gray-500"}`,children:[R,typeof k<"u"&&k>0&&y.jsx("span",{className:"text-xs bg-gray-600 rounded-full px-2 py-0.5 ml-1",children:k})]});return S?y.jsx(xn,{}):n?y.jsxs("div",{className:"text-white",children:[$&&y.jsx(Eo,{isOpen:!!$,onClose:()=>j(null),title:`Comments for ${$.title}`,comments:$.comments||[],onAddComment:ie}),y.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 mb-8 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-8",children:[y.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-40 h-40 rounded-full object-cover border-4 border-gray-700 flex-shrink-0"}),y.jsxs("div",{className:"flex-grow w-full",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[y.jsx("h1",{className:"text-4xl font-bold",children:n.name}),y.jsx(We,{onClick:Y,variant:U?"secondary":"primary",className:"w-full sm:w-auto flex-shrink-0",children:U?"Following":"Follow"})]}),y.jsx("p",{className:"text-gray-400 mt-2 max-w-xl",children:n.bio})]})]}),y.jsx("div",{className:"border-b border-gray-700 mb-6",children:y.jsxs("nav",{className:"-mb-px flex space-x-4",children:[y.jsx(P,{tab:"tracks",label:"All Tracks",count:o.length}),y.jsx(P,{tab:"releases",label:"External Releases",count:u.length}),y.jsx(P,{tab:"packs",label:"Premium Packs",count:f.length}),y.jsx(P,{tab:"collection",label:"My Collection",count:(_==null?void 0:_.length)||0})]})}),y.jsx("div",{children:oe()})]}):y.jsx("div",{className:"text-center text-white",children:"User not found."})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wR,AR;function CR(){return{geminiUrl:wR,vertexUrl:AR}}function bR(t,e,n,i){var o,a;if(!(t!=null&&t.baseUrl)){const u=CR();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cs{}function pe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const f=t[d];if(Array.isArray(n))for(let h=0;h<f.length;h++){const _=f[h];g(_,e.slice(a+1),n[h])}else for(const h of f)g(h,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const f=t[d];g(f[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(d=>m(d,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function IR(t,e){for(const[n,i]of Object.entries(e)){const o=n.split("."),a=i.split("."),u=new Set;let d=-1;for(let f=0;f<o.length;f++)if(o[f]==="*"){d=f;break}if(d!==-1&&a.length>d)for(let f=d;f<a.length;f++){const h=a[f];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Km(t,o,a,0,u)}}function Km(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const f of d[u])Km(f,e,n,i+1,o)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),f={};for(const h of d)f[h]=u[h];for(const[h,_]of Object.entries(f)){const E=[];for(const S of n.slice(i))S==="*"?E.push(h):E.push(S);g(u,E,_)}for(const h of d)delete u[h]}}else{const u=t;a in u&&Km(u[a],e,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RR(t){const e={},n=m(t,["operationName"]);n!=null&&g(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function NR(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],DR(u)),e}function MR(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response"]);return u!=null&&g(e,["response"],PR(u)),e}function DR(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>kR(u))),g(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function PR(t){const e={},n=m(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>UR(u))),g(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function kR(t){const e={},n=m(t,["video"]);return n!=null&&g(e,["video"],qR(n)),e}function UR(t){const e={},n=m(t,["_self"]);return n!=null&&g(e,["video"],HR(n)),e}function LR(t){const e={},n=m(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function VR(t){const e={},n=m(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function OR(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response"]);return u!=null&&g(e,["response"],FR(u)),e}function FR(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&g(e,["parent"],i);const o=m(t,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function kx(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response"]);return u!=null&&g(e,["response"],BR(u)),e}function BR(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&g(e,["parent"],i);const o=m(t,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function qR(t){const e={},n=m(t,["uri"]);n!=null&&g(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Pp(i));const o=m(t,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function HR(t){const e={},n=m(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Pp(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var p_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(p_||(p_={}));var g_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(g_||(g_={}));var y_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(y_||(y_={}));var Er;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Er||(Er={}));var v_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(v_||(v_={}));var __;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(__||(__={}));var T_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(T_||(T_={}));var E_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(E_||(E_={}));var x_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(x_||(x_={}));var S_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(S_||(S_={}));var w_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(w_||(w_={}));var A_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(A_||(A_={}));var C_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(C_||(C_={}));var b_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(b_||(b_={}));var I_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(I_||(I_={}));var R_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(R_||(R_={}));var N_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(N_||(N_={}));var M_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(M_||(M_={}));var Cd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Cd||(Cd={}));var D_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(D_||(D_={}));var P_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(P_||(P_={}));var k_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(k_||(k_={}));var Wm;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Wm||(Wm={}));var U_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(U_||(U_={}));var L_;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(L_||(L_={}));var V_;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(V_||(V_={}));var O_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(O_||(O_={}));var F_;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(F_||(F_={}));var B_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(B_||(B_={}));var q_;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(q_||(q_={}));var H_;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(H_||(H_={}));var G_;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(G_||(G_={}));var z_;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(z_||(z_={}));var j_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(j_||(j_={}));var J_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(J_||(J_={}));var Y_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Y_||(Y_={}));var $_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})($_||($_={}));var K_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(K_||(K_={}));var W_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(W_||(W_={}));var Q_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Q_||(Q_={}));var X_;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(X_||(X_={}));var Z_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Z_||(Z_={}));var eT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(eT||(eT={}));var tT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(tT||(tT={}));var nT;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(nT||(nT={}));var iT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(iT||(iT={}));var sT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(sT||(sT={}));var rT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(rT||(rT={}));var oT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(oT||(oT={}));var aT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(aT||(aT={}));var lT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(lT||(lT={}));var uT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(uT||(uT={}));var _a;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(_a||(_a={}));class Qm{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Kl{get text(){var e,n,i,o,a,u,d,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const E=[];for(const S of(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[C,M]of Object.entries(S))C!=="text"&&C!=="thought"&&(M!==null||M!==void 0)&&E.push(C);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,h+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,n,i,o,a,u,d,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const E of(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[S,C]of Object.entries(E))S!=="inlineData"&&(C!==null||C!==void 0)&&_.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,o,a,u,d,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,o,a,u,d,f,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,o,a,u,d,f,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class cT{}class dT{}class GR{}class zR{}class jR{}class JR{}class fT{}class hT{}class mT{}class YR{}class bd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new bd;let o;const a=e;return n?o=MR(a):o=NR(a),Object.assign(i,o),i}}class pT{}class gT{}class yT{}class $R{}class KR{}class WR{}class kp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new kp,a=OR(e);return Object.assign(i,a),i}}class QR{}class XR{}class ZR{}class vT{}class eN{get text(){var e,n,i;let o="",a=!1;const u=[];for(const d of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(d))f!=="text"&&f!=="thought"&&h!==null&&u.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,n,i;let o="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(u))d!=="inlineData"&&f!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class tN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Up{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Up,a=kx(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Ux(t,e){const n=Qe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Lx(t){return Array.isArray(t)?t.map(e=>Id(e)):[Id(t)]}function Id(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Vx(t){const e=Id(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ox(t){const e=Id(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _T(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Fx(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>_T(e)):[_T(t)]}function Xm(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function TT(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ET(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dn(t){if(t==null)throw new Error("ContentUnion is required");return Xm(t)?t:{role:"user",parts:Fx(t)}}function Lp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=dn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=dn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>dn(n)):[dn(e)]}function ei(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(TT(t)||ET(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(t)]}const e=[],n=[],i=Xm(t[0]);for(const o of t){const a=Xm(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(TT(o)||ET(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:Fx(n)}),e}function nN(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Er).includes(n[0].toUpperCase())?n[0].toUpperCase():Er.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Er).includes(i.toUpperCase())?i.toUpperCase():Er.TYPE_UNSPECIFIED})}}function Ea(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&nN(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Er).includes(d.toUpperCase())?d.toUpperCase():Er.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Ea(d);else if(i.includes(u)){const f=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}f.push(Ea(h))}e[u]=f}else if(o.includes(u)){const f={};for(const[h,_]of Object.entries(d))f[h]=Ea(_);e[u]=f}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Vp(t){return Ea(t)}function Op(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Fp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Oa(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ea(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ea(e.response));return t}function Fa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function iN(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function bs(t,e){if(typeof e!="string")throw new Error("name must be a string");return iN(t,e,"cachedContents")}function Bx(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Dr(t){return Pp(t)}function sN(t){return t!=null&&typeof t=="object"&&"name"in t}function rN(t){return t!=null&&typeof t=="object"&&"video"in t}function oN(t){return t!=null&&typeof t=="object"&&"uri"in t}function qx(t){var e;let n;if(sN(t)&&(n=t.name),!(oN(t)&&(n=t.uri,n===void 0))&&!(rN(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Hx(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Gx(t){for(const e of["models","tunedModels","publisherModels"])if(aN(t,e))return t[e];return[]}function aN(t,e){return t!==null&&typeof t=="object"&&e in t}function lN(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function uN(t,e={}){const n=[],i=new Set;for(const o of t){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=lN(o,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function zx(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function cN(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function jx(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const f=u.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ba(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Jx(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dN(t){const e={},n=m(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>HN(u))),g(e,["inlinedResponses"],a)}const o=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function fN(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const o=m(t,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function hN(t){const e={},n=m(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const o=m(t,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function pd(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const o=m(t,["metadata","state"]);o!=null&&g(e,["state"],Jx(o));const a=m(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=m(t,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const d=m(t,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const f=m(t,["metadata","model"]);f!=null&&g(e,["model"],f);const h=m(t,["metadata","output"]);return h!=null&&g(e,["dest"],dN(jx(h))),e}function Zm(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["displayName"]);i!=null&&g(e,["displayName"],i);const o=m(t,["state"]);o!=null&&g(e,["state"],Jx(o));const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["createTime"]);u!=null&&g(e,["createTime"],u);const d=m(t,["startTime"]);d!=null&&g(e,["startTime"],d);const f=m(t,["endTime"]);f!=null&&g(e,["endTime"],f);const h=m(t,["updateTime"]);h!=null&&g(e,["updateTime"],h);const _=m(t,["model"]);_!=null&&g(e,["model"],_);const E=m(t,["inputConfig"]);E!=null&&g(e,["src"],mN(E));const S=m(t,["outputConfig"]);S!=null&&g(e,["dest"],fN(jx(S)));const C=m(t,["completionStats"]);return C!=null&&g(e,["completionStats"],C),e}function mN(t){const e={},n=m(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const o=m(t,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function pN(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&g(n,["fileName"],i);const o=m(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>qN(t,u))),g(n,["requests","requests"],a)}return n}function gN(t){const e={},n=m(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const o=m(t,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function yN(t){const e={},n=m(t,["data"]);if(n!=null&&g(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function vN(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function _N(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function TN(t){const e={},n=m(t,["content"]);n!=null&&g(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],EN(i));const o=m(t,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=m(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=m(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=m(t,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const f=m(t,["index"]);f!=null&&g(e,["index"],f);const h=m(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const _=m(t,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(C=>C)),g(e,["safetyRatings"],S)}const E=m(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function EN(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function Yx(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>KN(a))),g(e,["parts"],o)}const i=m(t,["role"]);return i!=null&&g(e,["role"],i),e}function xN(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function SN(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=m(t,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],hN(cN(o))),n}function xT(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["src"]);o!=null&&g(n,["batch","inputConfig"],pN(t,zx(t,o)));const a=m(e,["config"]);return a!=null&&xN(a,n),n}function wN(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["model"],Qe(t,i));const o=m(e,["src"]);o!=null&&g(n,["inputConfig"],gN(zx(t,o)));const a=m(e,["config"]);return a!=null&&SN(a,n),n}function AN(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function CN(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["src"]);o!=null&&g(n,["batch","inputConfig"],PN(t,o));const a=m(e,["config"]);return a!=null&&AN(a,n),n}function bN(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function IN(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function RN(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&g(e,["name"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);return a!=null&&g(e,["error"],a),e}function NN(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&g(e,["name"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);return a!=null&&g(e,["error"],a),e}function MN(t,e){const n={},i=m(e,["contents"]);if(i!=null){let a=Lp(t,i);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["requests[]","request","content"],a)}const o=m(e,["config"]);return o!=null&&(g(n,["_self"],DN(o,n)),IR(n,{"requests[].*":"requests[].request.*"})),n}function DN(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=m(t,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=m(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function PN(t,e){const n={},i=m(e,["fileName"]);i!=null&&g(n,["file_name"],i);const o=m(e,["inlinedRequests"]);return o!=null&&g(n,["requests"],MN(t,o)),n}function kN(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function UN(t,e,n){const i={},o=m(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],Yx(dn(o)));const a=m(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=m(e,["topP"]);u!=null&&g(i,["topP"],u);const d=m(e,["topK"]);d!=null&&g(i,["topK"],d);const f=m(e,["candidateCount"]);f!=null&&g(i,["candidateCount"],f);const h=m(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const _=m(e,["stopSequences"]);_!=null&&g(i,["stopSequences"],_);const E=m(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=m(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const C=m(e,["presencePenalty"]);C!=null&&g(i,["presencePenalty"],C);const M=m(e,["frequencyPenalty"]);M!=null&&g(i,["frequencyPenalty"],M);const V=m(e,["seed"]);V!=null&&g(i,["seed"],V);const U=m(e,["responseMimeType"]);U!=null&&g(i,["responseMimeType"],U);const z=m(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],Vp(z));const $=m(e,["responseJsonSchema"]);if($!=null&&g(i,["responseJsonSchema"],$),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=m(e,["safetySettings"]);if(n!==void 0&&j!=null){let q=j;Array.isArray(q)&&(q=q.map(L=>WN(L))),g(n,["safetySettings"],q)}const Y=m(e,["tools"]);if(n!==void 0&&Y!=null){let q=Fa(Y);Array.isArray(q)&&(q=q.map(L=>QN(Oa(L)))),g(n,["tools"],q)}const ie=m(e,["toolConfig"]);if(n!==void 0&&ie!=null&&g(n,["toolConfig"],ie),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=m(e,["cachedContent"]);n!==void 0&&oe!=null&&g(n,["cachedContent"],bs(t,oe));const P=m(e,["responseModalities"]);P!=null&&g(i,["responseModalities"],P);const N=m(e,["mediaResolution"]);N!=null&&g(i,["mediaResolution"],N);const R=m(e,["speechConfig"]);if(R!=null&&g(i,["speechConfig"],Op(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=m(e,["thinkingConfig"]);k!=null&&g(i,["thinkingConfig"],k);const B=m(e,["imageConfig"]);return B!=null&&g(i,["imageConfig"],B),i}function LN(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>TN(h))),g(e,["candidates"],f)}const o=m(t,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=m(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=m(t,["responseId"]);u!=null&&g(e,["responseId"],u);const d=m(t,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function VN(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function ON(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],Ba(t,i)),n}function FN(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function BN(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function qN(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["request","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let d=ei(o);Array.isArray(d)&&(d=d.map(f=>Yx(f))),g(n,["request","contents"],d)}const a=m(e,["metadata"]);a!=null&&g(n,["metadata"],a);const u=m(e,["config"]);return u!=null&&g(n,["request","generationConfig"],UN(t,u,m(n,["request"],{}))),n}function HN(t){const e={},n=m(t,["response"]);n!=null&&g(e,["response"],LN(n));const i=m(t,["error"]);return i!=null&&g(e,["error"],i),e}function GN(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function zN(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const a=m(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function jN(t){const e={},n=m(t,["config"]);return n!=null&&GN(n,e),e}function JN(t){const e={},n=m(t,["config"]);return n!=null&&zN(n,e),e}function YN(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>pd(u))),g(e,["batchJobs"],a)}return e}function $N(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Zm(u))),g(e,["batchJobs"],a)}return e}function KN(t){const e={},n=m(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=m(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=m(t,["fileData"]);a!=null&&g(e,["fileData"],kN(a));const u=m(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&g(e,["inlineData"],yN(d));const f=m(t,["text"]);f!=null&&g(e,["text"],f);const h=m(t,["thought"]);h!=null&&g(e,["thought"],h);const _=m(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=m(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function WN(t){const e={},n=m(t,["category"]);if(n!=null&&g(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function QN(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["functionDeclarations"],_)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=m(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=m(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=m(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],FN(d));const f=m(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],BN(f));const h=m(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _s;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(_s||(_s={}));class xo{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XN extends Cs{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new xo(_s.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=xT(this.apiClient,e),i=n._url,o=pe("{model}:batchGenerateContent",i),d=n.batch.inputConfig.requests,f=d.requests,h=[];for(const _ of f){const E=Object.assign({},_);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const C=E.request;C.systemInstruction=S,E.request=C}h.push(E)}return d.requests=h,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=wN(this.apiClient,e);return d=pe("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Zm(_))}else{const h=xT(this.apiClient,e);return d=pe("{model}:batchGenerateContent",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>pd(_))}}async createEmbeddingsInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=CN(this.apiClient,e);return a=pe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>pd(f))}}async get(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=ON(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Zm(_))}else{const h=VN(this.apiClient,e);return d=pe("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>pd(_))}}async cancel(e){var n,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const f=_N(this.apiClient,e);u=pe("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=vN(this.apiClient,e);u=pe("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=JN(e);return d=pe("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=$N(_),S=new vT;return Object.assign(S,E),S})}else{const h=jN(e);return d=pe("batches",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=YN(_),S=new vT;return Object.assign(S,E),S})}}async delete(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=IN(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>NN(_))}else{const h=bN(this.apiClient,e);return d=pe("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>RN(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZN(t){const e={},n=m(t,["data"]);if(n!=null&&g(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function ST(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>T1(a))),g(e,["parts"],o)}const i=m(t,["role"]);return i!=null&&g(e,["role"],i),e}function e1(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=m(t,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=m(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=m(t,["contents"]);if(e!==void 0&&u!=null){let _=ei(u);Array.isArray(_)&&(_=_.map(E=>ST(E))),g(e,["contents"],_)}const d=m(t,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],ST(dn(d)));const f=m(t,["tools"]);if(e!==void 0&&f!=null){let _=f;Array.isArray(_)&&(_=_.map(E=>E1(E))),g(e,["tools"],_)}const h=m(t,["toolConfig"]);if(e!==void 0&&h!=null&&g(e,["toolConfig"],h),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function t1(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=m(t,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=m(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=m(t,["contents"]);if(e!==void 0&&u!=null){let E=ei(u);Array.isArray(E)&&(E=E.map(S=>S)),g(e,["contents"],E)}const d=m(t,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],dn(d));const f=m(t,["tools"]);if(e!==void 0&&f!=null){let E=f;Array.isArray(E)&&(E=E.map(S=>x1(S))),g(e,["tools"],E)}const h=m(t,["toolConfig"]);e!==void 0&&h!=null&&g(e,["toolConfig"],h);const _=m(t,["kmsKeyName"]);return e!==void 0&&_!=null&&g(e,["encryption_spec","kmsKeyName"],_),n}function n1(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["model"],Ux(t,i));const o=m(e,["config"]);return o!=null&&e1(o,n),n}function i1(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["model"],Ux(t,i));const o=m(e,["config"]);return o!=null&&t1(o,n),n}function s1(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function r1(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function o1(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function a1(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function l1(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function u1(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&g(e,["description"],n);const i=m(t,["name"]);i!=null&&g(e,["name"],i);const o=m(t,["parameters"]);o!=null&&g(e,["parameters"],o);const a=m(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=m(t,["response"]);u!=null&&g(e,["response"],u);const d=m(t,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function c1(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function d1(t,e){const n={},i=m(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function f1(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function h1(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function m1(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function p1(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function g1(t){const e={},n=m(t,["config"]);return n!=null&&m1(n,e),e}function y1(t){const e={},n=m(t,["config"]);return n!=null&&p1(n,e),e}function v1(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function _1(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function T1(t){const e={},n=m(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=m(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=m(t,["fileData"]);a!=null&&g(e,["fileData"],l1(a));const u=m(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&g(e,["inlineData"],ZN(d));const f=m(t,["text"]);f!=null&&g(e,["text"],f);const h=m(t,["thought"]);h!=null&&g(e,["thought"],h);const _=m(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=m(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function E1(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["functionDeclarations"],_)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=m(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=m(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=m(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],f1(d));const f=m(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],h1(f));const h=m(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function x1(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>u1(S))),g(e,["functionDeclarations"],E)}const i=m(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=m(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=m(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=m(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=m(t,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=m(t,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const h=m(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const _=m(t,["urlContext"]);return _!=null&&g(e,["urlContext"],_),e}function S1(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=m(t,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),n}function w1(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=m(t,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),n}function A1(t,e){const n={},i=m(e,["name"]);i!=null&&g(n,["_url","name"],bs(t,i));const o=m(e,["config"]);return o!=null&&S1(o,n),n}function C1(t,e){const n={},i=m(e,["name"]);i!=null&&g(n,["_url","name"],bs(t,i));const o=m(e,["config"]);return o!=null&&w1(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b1 extends Cs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xo(_s.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=i1(this.apiClient,e);return d=pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=n1(this.apiClient,e);return d=pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=d1(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=c1(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=r1(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=a1(_),S=new gT;return Object.assign(S,E),S})}else{const h=s1(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=o1(_),S=new gT;return Object.assign(S,E),S})}}async update(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=C1(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=A1(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=y1(e);return d=pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=_1(_),S=new yT;return Object.assign(S,E),S})}else{const h=g1(e);return d=pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=v1(_),S=new yT;return Object.assign(S,E),S})}}}function wT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(t){return this instanceof mt?(this.v=t,this):new mt(t)}function xa(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(C){return function(M){return Promise.resolve(M).then(C,E)}}function d(C,M){i[C]&&(o[C]=function(V){return new Promise(function(U,z){a.push([C,V,U,z])>1||f(C,V)})},M&&(o[C]=M(o[C])))}function f(C,M){try{h(i[C](M))}catch(V){S(a[0][3],V)}}function h(C){C.value instanceof mt?Promise.resolve(C.value.v).then(_,E):S(a[0][2],C)}function _(C){f("next",C)}function E(C){f("throw",C)}function S(C,M){C(M),a.shift(),a.length&&f(a[0][0],a[0][1])}}function eu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof wT=="function"?wT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(d,f){u=t[a](u),o(d,f,u.done,u.value)})}}function o(a,u,d,f){Promise.resolve(f).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I1(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:$x(n)}function $x(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function R1(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function AT(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let a=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),a&&!$x(t[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class N1{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new M1(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class M1{constructor(e,n,i,o={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),R1(a)}async sendMessage(e){var n;await this.sendPromise;const i=dn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,d;const f=await o,h=(u=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=f.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];_!=null&&(S=(d=_.slice(E))!==null&&d!==void 0?d:[]);const C=h?[h]:[];this.recordHistory(i,C,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=dn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?AT(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return xa(this,arguments,function*(){var u,d,f,h;const _=[];try{for(var E=!0,S=eu(e),C;C=yield mt(S.next()),u=C.done,!u;E=!0){h=C.value,E=!1;const M=h;if(I1(M)){const V=(o=(i=M.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;V!==void 0&&_.push(V)}yield yield mt(M)}}catch(M){d={error:M}}finally{try{!E&&!u&&(f=S.return)&&(yield mt(f.call(S)))}finally{if(d)throw d.error}}this.recordHistory(n,_)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(a=>a.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...AT(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ef extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ef.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D1(t){const e={},n=m(t,["file"]);return n!=null&&g(e,["file"],n),e}function P1(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function k1(t){const e={},n=m(t,["name"]);return n!=null&&g(e,["_url","file"],qx(n)),e}function U1(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function L1(t){const e={},n=m(t,["name"]);return n!=null&&g(e,["_url","file"],qx(n)),e}function V1(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function O1(t){const e={},n=m(t,["config"]);return n!=null&&V1(n,e),e}function F1(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B1 extends Cs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xo(_s.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=O1(e);return a=pe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>{const h=F1(f),_=new QR;return Object.assign(_,h),_})}}async createInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=D1(e);return a=pe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=P1(f),_=new XR;return Object.assign(_,h),_})}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=L1(e);return a=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=k1(e);return a=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>{const h=U1(f),_=new ZR;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gd(t){const e={},n=m(t,["data"]);if(n!=null&&g(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function q1(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>nM(a))),g(e,["parts"],o)}const i=m(t,["role"]);return i!=null&&g(e,["role"],i),e}function H1(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function G1(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&g(e,["description"],n);const i=m(t,["name"]);i!=null&&g(e,["name"],i);const o=m(t,["parameters"]);o!=null&&g(e,["parameters"],o);const a=m(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=m(t,["response"]);u!=null&&g(e,["response"],u);const d=m(t,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function z1(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=m(t,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=m(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=m(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=m(t,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const f=m(t,["logprobs"]);f!=null&&g(e,["logprobs"],f);const h=m(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const _=m(t,["mediaResolution"]);_!=null&&g(e,["mediaResolution"],_);const E=m(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const S=m(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const C=m(t,["responseMimeType"]);C!=null&&g(e,["responseMimeType"],C);const M=m(t,["responseModalities"]);M!=null&&g(e,["responseModalities"],M);const V=m(t,["responseSchema"]);V!=null&&g(e,["responseSchema"],V);const U=m(t,["routingConfig"]);U!=null&&g(e,["routingConfig"],U);const z=m(t,["seed"]);z!=null&&g(e,["seed"],z);const $=m(t,["speechConfig"]);$!=null&&g(e,["speechConfig"],Kx($));const j=m(t,["stopSequences"]);j!=null&&g(e,["stopSequences"],j);const Y=m(t,["temperature"]);Y!=null&&g(e,["temperature"],Y);const ie=m(t,["thinkingConfig"]);ie!=null&&g(e,["thinkingConfig"],ie);const oe=m(t,["topK"]);oe!=null&&g(e,["topK"],oe);const P=m(t,["topP"]);if(P!=null&&g(e,["topP"],P),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function j1(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function J1(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function Y1(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=m(t,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=m(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=m(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=m(t,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const h=m(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const _=m(t,["seed"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","seed"],_);const E=m(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Fp(E));const S=m(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const C=m(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=m(t,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],q1(dn(M)));const V=m(t,["tools"]);if(e!==void 0&&V!=null){let oe=Fa(V);Array.isArray(oe)&&(oe=oe.map(P=>sM(Oa(P)))),g(e,["setup","tools"],oe)}const U=m(t,["sessionResumption"]);e!==void 0&&U!=null&&g(e,["setup","sessionResumption"],iM(U));const z=m(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const $=m(t,["outputAudioTranscription"]);e!==void 0&&$!=null&&g(e,["setup","outputAudioTranscription"],$);const j=m(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&g(e,["setup","realtimeInputConfig"],j);const Y=m(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ie=m(t,["proactivity"]);return e!==void 0&&ie!=null&&g(e,["setup","proactivity"],ie),n}function $1(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],z1(i));const o=m(t,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=m(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=m(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=m(t,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const h=m(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const _=m(t,["seed"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","seed"],_);const E=m(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Kx(Fp(E)));const S=m(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const C=m(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=m(t,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],dn(M));const V=m(t,["tools"]);if(e!==void 0&&V!=null){let oe=Fa(V);Array.isArray(oe)&&(oe=oe.map(P=>rM(Oa(P)))),g(e,["setup","tools"],oe)}const U=m(t,["sessionResumption"]);e!==void 0&&U!=null&&g(e,["setup","sessionResumption"],U);const z=m(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const $=m(t,["outputAudioTranscription"]);e!==void 0&&$!=null&&g(e,["setup","outputAudioTranscription"],$);const j=m(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&g(e,["setup","realtimeInputConfig"],j);const Y=m(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ie=m(t,["proactivity"]);return e!==void 0&&ie!=null&&g(e,["setup","proactivity"],ie),n}function K1(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["setup","model"],Qe(t,i));const o=m(e,["config"]);return o!=null&&g(n,["config"],Y1(o,n)),n}function W1(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["setup","model"],Qe(t,i));const o=m(e,["config"]);return o!=null&&g(n,["config"],$1(o,n)),n}function Q1(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function X1(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["weightedPrompts"],i)}return e}function Z1(t){const e={},n=m(t,["media"]);if(n!=null){let h=Lx(n);Array.isArray(h)&&(h=h.map(_=>gd(_))),g(e,["mediaChunks"],h)}const i=m(t,["audio"]);i!=null&&g(e,["audio"],gd(Ox(i)));const o=m(t,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=m(t,["video"]);a!=null&&g(e,["video"],gd(Vx(a)));const u=m(t,["text"]);u!=null&&g(e,["text"],u);const d=m(t,["activityStart"]);d!=null&&g(e,["activityStart"],d);const f=m(t,["activityEnd"]);return f!=null&&g(e,["activityEnd"],f),e}function eM(t){const e={},n=m(t,["media"]);if(n!=null){let h=Lx(n);Array.isArray(h)&&(h=h.map(_=>_)),g(e,["mediaChunks"],h)}const i=m(t,["audio"]);i!=null&&g(e,["audio"],Ox(i));const o=m(t,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=m(t,["video"]);a!=null&&g(e,["video"],Vx(a));const u=m(t,["text"]);u!=null&&g(e,["text"],u);const d=m(t,["activityStart"]);d!=null&&g(e,["activityStart"],d);const f=m(t,["activityEnd"]);return f!=null&&g(e,["activityEnd"],f),e}function tM(t){const e={},n=m(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&g(e,["serverContent"],i);const o=m(t,["toolCall"]);o!=null&&g(e,["toolCall"],o);const a=m(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=m(t,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],oM(u));const d=m(t,["goAway"]);d!=null&&g(e,["goAway"],d);const f=m(t,["sessionResumptionUpdate"]);return f!=null&&g(e,["sessionResumptionUpdate"],f),e}function nM(t){const e={},n=m(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=m(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=m(t,["fileData"]);a!=null&&g(e,["fileData"],H1(a));const u=m(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&g(e,["inlineData"],gd(d));const f=m(t,["text"]);f!=null&&g(e,["text"],f);const h=m(t,["thought"]);h!=null&&g(e,["thought"],h);const _=m(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=m(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function iM(t){const e={},n=m(t,["handle"]);if(n!=null&&g(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Kx(t){const e={},n=m(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function sM(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["functionDeclarations"],_)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=m(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=m(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=m(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],j1(d));const f=m(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],J1(f));const h=m(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function rM(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>G1(S))),g(e,["functionDeclarations"],E)}const i=m(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=m(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=m(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=m(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=m(t,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=m(t,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const h=m(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const _=m(t,["urlContext"]);return _!=null&&g(e,["urlContext"],_),e}function oM(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const o=m(t,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const a=m(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=m(t,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const d=m(t,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const f=m(t,["promptTokensDetails"]);if(f!=null){let C=f;Array.isArray(C)&&(C=C.map(M=>M)),g(e,["promptTokensDetails"],C)}const h=m(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(M=>M)),g(e,["cacheTokensDetails"],C)}const _=m(t,["candidatesTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(M=>M)),g(e,["responseTokensDetails"],C)}const E=m(t,["toolUsePromptTokensDetails"]);if(E!=null){let C=E;Array.isArray(C)&&(C=C.map(M=>M)),g(e,["toolUsePromptTokensDetails"],C)}const S=m(t,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aM(t){const e={},n=m(t,["data"]);if(n!=null&&g(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function lM(t){const e={},n=m(t,["content"]);n!=null&&g(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],uM(i));const o=m(t,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=m(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=m(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=m(t,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const f=m(t,["index"]);f!=null&&g(e,["index"],f);const h=m(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const _=m(t,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(C=>C)),g(e,["safetyRatings"],S)}const E=m(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function uM(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function cM(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let a=ei(o);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["contents"],a)}return n}function dM(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["tokensInfo"],o)}return e}function fM(t){const e={},n=m(t,["values"]);n!=null&&g(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&g(e,["statistics"],hM(i)),e}function hM(t){const e={},n=m(t,["truncated"]);n!=null&&g(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function tf(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>vD(a))),g(e,["parts"],o)}const i=m(t,["role"]);return i!=null&&g(e,["role"],i),e}function mM(t){const e={},n=m(t,["controlType"]);n!=null&&g(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function pM(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gM(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],dn(i));const o=m(t,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>eS(d))),g(e,["tools"],u)}const a=m(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],rD(a)),n}function yM(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let u=ei(o);Array.isArray(u)&&(u=u.map(d=>tf(d))),g(n,["contents"],u)}const a=m(e,["config"]);return a!=null&&pM(a),n}function vM(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let u=ei(o);Array.isArray(u)&&(u=u.map(d=>d)),g(n,["contents"],u)}const a=m(e,["config"]);return a!=null&&gM(a,n),n}function _M(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const o=m(t,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function TM(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function EM(t,e){const n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Qe(t,i)),n}function xM(t,e){const n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Qe(t,i)),n}function SM(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function wM(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function AM(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=m(t,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=m(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=m(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=m(t,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const f=m(t,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const h=m(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const _=m(t,["personGeneration"]);e!==void 0&&_!=null&&g(e,["parameters","personGeneration"],_);const E=m(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=m(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const C=m(t,["language"]);e!==void 0&&C!=null&&g(e,["parameters","language"],C);const M=m(t,["outputMimeType"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","mimeType"],M);const V=m(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","compressionQuality"],V);const U=m(t,["addWatermark"]);e!==void 0&&U!=null&&g(e,["parameters","addWatermark"],U);const z=m(t,["labels"]);e!==void 0&&z!=null&&g(e,["labels"],z);const $=m(t,["editMode"]);e!==void 0&&$!=null&&g(e,["parameters","editMode"],$);const j=m(t,["baseSteps"]);return e!==void 0&&j!=null&&g(e,["parameters","editConfig","baseSteps"],j),n}function CM(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=m(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>wD(f))),g(n,["instances[0]","referenceImages"],d)}const u=m(e,["config"]);return u!=null&&AM(u,n),n}function bM(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>nf(a))),g(e,["generatedImages"],o)}return e}function IM(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=m(t,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=m(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function RM(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const o=m(t,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const a=m(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=m(t,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const d=m(t,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),n}function NM(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let d=Lp(t,o);Array.isArray(d)&&(d=d.map(f=>f)),g(n,["requests[]","content"],d)}const a=m(e,["config"]);a!=null&&IM(a,n);const u=m(e,["model"]);return u!==void 0&&g(n,["requests[]","model"],Qe(t,u)),n}function MM(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let u=Lp(t,o);Array.isArray(u)&&(u=u.map(d=>d)),g(n,["instances[]","content"],u)}const a=m(e,["config"]);return a!=null&&RM(a,n),n}function DM(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const o=m(t,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function PM(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>fM(u))),g(e,["embeddings"],a)}const o=m(t,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function kM(t){const e={},n=m(t,["endpoint"]);n!=null&&g(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function UM(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function LM(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&g(e,["description"],n);const i=m(t,["name"]);i!=null&&g(e,["name"],i);const o=m(t,["parameters"]);o!=null&&g(e,["parameters"],o);const a=m(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=m(t,["response"]);u!=null&&g(e,["response"],u);const d=m(t,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function VM(t,e,n){const i={},o=m(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],tf(dn(o)));const a=m(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=m(e,["topP"]);u!=null&&g(i,["topP"],u);const d=m(e,["topK"]);d!=null&&g(i,["topK"],d);const f=m(e,["candidateCount"]);f!=null&&g(i,["candidateCount"],f);const h=m(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const _=m(e,["stopSequences"]);_!=null&&g(i,["stopSequences"],_);const E=m(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=m(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const C=m(e,["presencePenalty"]);C!=null&&g(i,["presencePenalty"],C);const M=m(e,["frequencyPenalty"]);M!=null&&g(i,["frequencyPenalty"],M);const V=m(e,["seed"]);V!=null&&g(i,["seed"],V);const U=m(e,["responseMimeType"]);U!=null&&g(i,["responseMimeType"],U);const z=m(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],Vp(z));const $=m(e,["responseJsonSchema"]);if($!=null&&g(i,["responseJsonSchema"],$),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=m(e,["safetySettings"]);if(n!==void 0&&j!=null){let q=j;Array.isArray(q)&&(q=q.map(L=>AD(L))),g(n,["safetySettings"],q)}const Y=m(e,["tools"]);if(n!==void 0&&Y!=null){let q=Fa(Y);Array.isArray(q)&&(q=q.map(L=>MD(Oa(L)))),g(n,["tools"],q)}const ie=m(e,["toolConfig"]);if(n!==void 0&&ie!=null&&g(n,["toolConfig"],ie),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=m(e,["cachedContent"]);n!==void 0&&oe!=null&&g(n,["cachedContent"],bs(t,oe));const P=m(e,["responseModalities"]);P!=null&&g(i,["responseModalities"],P);const N=m(e,["mediaResolution"]);N!=null&&g(i,["mediaResolution"],N);const R=m(e,["speechConfig"]);if(R!=null&&g(i,["speechConfig"],Op(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=m(e,["thinkingConfig"]);k!=null&&g(i,["thinkingConfig"],k);const B=m(e,["imageConfig"]);return B!=null&&g(i,["imageConfig"],B),i}function OM(t,e,n){const i={},o=m(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],dn(o));const a=m(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=m(e,["topP"]);u!=null&&g(i,["topP"],u);const d=m(e,["topK"]);d!=null&&g(i,["topK"],d);const f=m(e,["candidateCount"]);f!=null&&g(i,["candidateCount"],f);const h=m(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const _=m(e,["stopSequences"]);_!=null&&g(i,["stopSequences"],_);const E=m(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=m(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const C=m(e,["presencePenalty"]);C!=null&&g(i,["presencePenalty"],C);const M=m(e,["frequencyPenalty"]);M!=null&&g(i,["frequencyPenalty"],M);const V=m(e,["seed"]);V!=null&&g(i,["seed"],V);const U=m(e,["responseMimeType"]);U!=null&&g(i,["responseMimeType"],U);const z=m(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],Vp(z));const $=m(e,["responseJsonSchema"]);$!=null&&g(i,["responseJsonSchema"],$);const j=m(e,["routingConfig"]);j!=null&&g(i,["routingConfig"],j);const Y=m(e,["modelSelectionConfig"]);Y!=null&&g(i,["modelConfig"],Y);const ie=m(e,["safetySettings"]);if(n!==void 0&&ie!=null){let O=ie;Array.isArray(O)&&(O=O.map(te=>te)),g(n,["safetySettings"],O)}const oe=m(e,["tools"]);if(n!==void 0&&oe!=null){let O=Fa(oe);Array.isArray(O)&&(O=O.map(te=>eS(Oa(te)))),g(n,["tools"],O)}const P=m(e,["toolConfig"]);n!==void 0&&P!=null&&g(n,["toolConfig"],P);const N=m(e,["labels"]);n!==void 0&&N!=null&&g(n,["labels"],N);const R=m(e,["cachedContent"]);n!==void 0&&R!=null&&g(n,["cachedContent"],bs(t,R));const k=m(e,["responseModalities"]);k!=null&&g(i,["responseModalities"],k);const B=m(e,["mediaResolution"]);B!=null&&g(i,["mediaResolution"],B);const q=m(e,["speechConfig"]);q!=null&&g(i,["speechConfig"],Zx(Op(q)));const L=m(e,["audioTimestamp"]);L!=null&&g(i,["audioTimestamp"],L);const je=m(e,["thinkingConfig"]);je!=null&&g(i,["thinkingConfig"],je);const ge=m(e,["imageConfig"]);return ge!=null&&g(i,["imageConfig"],ge),i}function CT(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let u=ei(o);Array.isArray(u)&&(u=u.map(d=>tf(d))),g(n,["contents"],u)}const a=m(e,["config"]);return a!=null&&g(n,["generationConfig"],VM(t,a,n)),n}function bT(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["contents"]);if(o!=null){let u=ei(o);Array.isArray(u)&&(u=u.map(d=>d)),g(n,["contents"],u)}const a=m(e,["config"]);return a!=null&&g(n,["generationConfig"],OM(t,a,n)),n}function IT(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>lM(h))),g(e,["candidates"],f)}const o=m(t,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=m(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=m(t,["responseId"]);u!=null&&g(e,["responseId"],u);const d=m(t,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function RT(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),g(e,["candidates"],h)}const o=m(t,["createTime"]);o!=null&&g(e,["createTime"],o);const a=m(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=m(t,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const d=m(t,["responseId"]);d!=null&&g(e,["responseId"],d);const f=m(t,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function FM(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const a=m(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=m(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const f=m(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&g(e,["parameters","includeSafetyAttributes"],f);const h=m(t,["includeRaiReason"]);e!==void 0&&h!=null&&g(e,["parameters","includeRaiReason"],h);const _=m(t,["language"]);e!==void 0&&_!=null&&g(e,["parameters","language"],_);const E=m(t,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const S=m(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=m(t,["imageSize"]);if(e!==void 0&&C!=null&&g(e,["parameters","sampleImageSize"],C),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function BM(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=m(t,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=m(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=m(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=m(t,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const f=m(t,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const h=m(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const _=m(t,["personGeneration"]);e!==void 0&&_!=null&&g(e,["parameters","personGeneration"],_);const E=m(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=m(t,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const C=m(t,["language"]);e!==void 0&&C!=null&&g(e,["parameters","language"],C);const M=m(t,["outputMimeType"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","mimeType"],M);const V=m(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","compressionQuality"],V);const U=m(t,["addWatermark"]);e!==void 0&&U!=null&&g(e,["parameters","addWatermark"],U);const z=m(t,["labels"]);e!==void 0&&z!=null&&g(e,["labels"],z);const $=m(t,["imageSize"]);e!==void 0&&$!=null&&g(e,["parameters","sampleImageSize"],$);const j=m(t,["enhancePrompt"]);return e!==void 0&&j!=null&&g(e,["parameters","enhancePrompt"],j),n}function qM(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=m(e,["config"]);return a!=null&&FM(a,n),n}function HM(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=m(e,["config"]);return a!=null&&BM(a,n),n}function GM(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>tD(u))),g(e,["generatedImages"],a)}const o=m(t,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],Qx(o)),e}function zM(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>nf(u))),g(e,["generatedImages"],a)}const o=m(t,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],Xx(o)),e}function jM(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=m(t,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=m(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=m(t,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const d=m(t,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=m(t,["negativePrompt"]);e!==void 0&&f!=null&&g(e,["parameters","negativePrompt"],f);const h=m(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=m(t,["lastFrame"]);e!==void 0&&_!=null&&g(e,["instances[0]","lastFrame"],sf(_));const E=m(t,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(C=>zD(C))),g(e,["instances[0]","referenceImages"],S)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function JM(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const a=m(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=m(t,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const d=m(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const f=m(t,["aspectRatio"]);e!==void 0&&f!=null&&g(e,["parameters","aspectRatio"],f);const h=m(t,["resolution"]);e!==void 0&&h!=null&&g(e,["parameters","resolution"],h);const _=m(t,["personGeneration"]);e!==void 0&&_!=null&&g(e,["parameters","personGeneration"],_);const E=m(t,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const S=m(t,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const C=m(t,["enhancePrompt"]);e!==void 0&&C!=null&&g(e,["parameters","enhancePrompt"],C);const M=m(t,["generateAudio"]);e!==void 0&&M!=null&&g(e,["parameters","generateAudio"],M);const V=m(t,["lastFrame"]);e!==void 0&&V!=null&&g(e,["instances[0]","lastFrame"],hi(V));const U=m(t,["referenceImages"]);if(e!==void 0&&U!=null){let j=U;Array.isArray(j)&&(j=j.map(Y=>jD(Y))),g(e,["instances[0]","referenceImages"],j)}const z=m(t,["mask"]);e!==void 0&&z!=null&&g(e,["instances[0]","mask"],GD(z));const $=m(t,["compressionQuality"]);return e!==void 0&&$!=null&&g(e,["parameters","compressionQuality"],$),n}function YM(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],QM(u)),e}function $M(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response"]);return u!=null&&g(e,["response"],XM(u)),e}function KM(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=m(e,["image"]);a!=null&&g(n,["instances[0]","image"],sf(a));const u=m(e,["video"]);u!=null&&g(n,["instances[0]","video"],tS(u));const d=m(e,["source"]);d!=null&&ZM(d,n);const f=m(e,["config"]);return f!=null&&jM(f,n),n}function WM(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["prompt"]);o!=null&&g(n,["instances[0]","prompt"],o);const a=m(e,["image"]);a!=null&&g(n,["instances[0]","image"],hi(a));const u=m(e,["video"]);u!=null&&g(n,["instances[0]","video"],nS(u));const d=m(e,["source"]);d!=null&&eD(d,n);const f=m(e,["config"]);return f!=null&&JM(f,n),n}function QM(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>iD(u))),g(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function XM(t){const e={},n=m(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>sD(u))),g(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function ZM(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=m(t,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],sf(o));const a=m(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],tS(a)),n}function eD(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=m(t,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],hi(o));const a=m(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],nS(a)),n}function tD(t){const e={},n=m(t,["_self"]);n!=null&&g(e,["image"],cD(n));const i=m(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=m(t,["_self"]);return o!=null&&g(e,["safetyAttributes"],Qx(o)),e}function nf(t){const e={},n=m(t,["_self"]);n!=null&&g(e,["image"],Wx(n));const i=m(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=m(t,["_self"]);o!=null&&g(e,["safetyAttributes"],Xx(o));const a=m(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function nD(t){const e={},n=m(t,["_self"]);n!=null&&g(e,["mask"],Wx(n));const i=m(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["labels"],o)}return e}function iD(t){const e={},n=m(t,["video"]);return n!=null&&g(e,["video"],qD(n)),e}function sD(t){const e={},n=m(t,["_self"]);return n!=null&&g(e,["video"],HD(n)),e}function rD(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=m(t,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=m(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=m(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=m(t,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const f=m(t,["logprobs"]);f!=null&&g(e,["logprobs"],f);const h=m(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const _=m(t,["mediaResolution"]);_!=null&&g(e,["mediaResolution"],_);const E=m(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const S=m(t,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const C=m(t,["responseMimeType"]);C!=null&&g(e,["responseMimeType"],C);const M=m(t,["responseModalities"]);M!=null&&g(e,["responseModalities"],M);const V=m(t,["responseSchema"]);V!=null&&g(e,["responseSchema"],V);const U=m(t,["routingConfig"]);U!=null&&g(e,["routingConfig"],U);const z=m(t,["seed"]);z!=null&&g(e,["seed"],z);const $=m(t,["speechConfig"]);$!=null&&g(e,["speechConfig"],Zx($));const j=m(t,["stopSequences"]);j!=null&&g(e,["stopSequences"],j);const Y=m(t,["temperature"]);Y!=null&&g(e,["temperature"],Y);const ie=m(t,["thinkingConfig"]);ie!=null&&g(e,["thinkingConfig"],ie);const oe=m(t,["topK"]);oe!=null&&g(e,["topK"],oe);const P=m(t,["topP"]);if(P!=null&&g(e,["topP"],P),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function oD(t,e){const n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Qe(t,i)),n}function aD(t,e){const n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Qe(t,i)),n}function lD(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function uD(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function cD(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],Dr(n));const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Wx(t){const e={},n=m(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],Dr(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function sf(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],Dr(n));const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function hi(t){const e={},n=m(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Dr(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function dD(t,e,n){const i={},o=m(e,["pageSize"]);n!==void 0&&o!=null&&g(n,["_query","pageSize"],o);const a=m(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=m(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const d=m(e,["queryBase"]);return n!==void 0&&d!=null&&g(n,["_url","models_url"],Hx(t,d)),i}function fD(t,e,n){const i={},o=m(e,["pageSize"]);n!==void 0&&o!=null&&g(n,["_query","pageSize"],o);const a=m(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=m(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const d=m(e,["queryBase"]);return n!==void 0&&d!=null&&g(n,["_url","models_url"],Hx(t,d)),i}function hD(t,e){const n={},i=m(e,["config"]);return i!=null&&dD(t,i,n),n}function mD(t,e){const n={},i=m(e,["config"]);return i!=null&&fD(t,i,n),n}function pD(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["_self"]);if(o!=null){let a=Gx(o);Array.isArray(a)&&(a=a.map(u=>ep(u))),g(e,["models"],a)}return e}function gD(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["_self"]);if(o!=null){let a=Gx(o);Array.isArray(a)&&(a=a.map(u=>tp(u))),g(e,["models"],a)}return e}function yD(t){const e={},n=m(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const o=m(t,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function ep(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["displayName"]);i!=null&&g(e,["displayName"],i);const o=m(t,["description"]);o!=null&&g(e,["description"],o);const a=m(t,["version"]);a!=null&&g(e,["version"],a);const u=m(t,["_self"]);u!=null&&g(e,["tunedModelInfo"],DD(u));const d=m(t,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const f=m(t,["outputTokenLimit"]);f!=null&&g(e,["outputTokenLimit"],f);const h=m(t,["supportedGenerationMethods"]);return h!=null&&g(e,["supportedActions"],h),e}function tp(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["displayName"]);i!=null&&g(e,["displayName"],i);const o=m(t,["description"]);o!=null&&g(e,["description"],o);const a=m(t,["versionId"]);a!=null&&g(e,["version"],a);const u=m(t,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>kM(S))),g(e,["endpoints"],E)}const d=m(t,["labels"]);d!=null&&g(e,["labels"],d);const f=m(t,["_self"]);f!=null&&g(e,["tunedModelInfo"],PD(f));const h=m(t,["defaultCheckpointId"]);h!=null&&g(e,["defaultCheckpointId"],h);const _=m(t,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(S=>S)),g(e,["checkpoints"],E)}return e}function vD(t){const e={},n=m(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=m(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=m(t,["fileData"]);a!=null&&g(e,["fileData"],UM(a));const u=m(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&g(e,["inlineData"],aM(d));const f=m(t,["text"]);f!=null&&g(e,["text"],f);const h=m(t,["thought"]);h!=null&&g(e,["thought"],h);const _=m(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=m(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function _D(t){const e={},n=m(t,["productImage"]);return n!=null&&g(e,["image"],hi(n)),e}function TD(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=m(t,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const a=m(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=m(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=m(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const f=m(t,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const h=m(t,["addWatermark"]);e!==void 0&&h!=null&&g(e,["parameters","addWatermark"],h);const _=m(t,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const E=m(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const S=m(t,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const C=m(t,["labels"]);return e!==void 0&&C!=null&&g(e,["labels"],C),n}function ED(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["source"]);o!=null&&SD(o,n);const a=m(e,["config"]);return a!=null&&TD(a,n),n}function xD(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>nf(o))),g(e,["generatedImages"],i)}return e}function SD(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=m(t,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],hi(o));const a=m(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>_D(d))),g(e,["instances[0]","productImages"],u)}return n}function wD(t){const e={},n=m(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],hi(n));const i=m(t,["referenceId"]);i!=null&&g(e,["referenceId"],i);const o=m(t,["referenceType"]);o!=null&&g(e,["referenceType"],o);const a=m(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],yD(a));const u=m(t,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],mM(u));const d=m(t,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const f=m(t,["subjectImageConfig"]);return f!=null&&g(e,["subjectImageConfig"],f),e}function Qx(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=m(t,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function Xx(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=m(t,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function AD(t){const e={},n=m(t,["category"]);if(n!=null&&g(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function CD(t){const e={},n=m(t,["image"]);return n!=null&&g(e,["image"],hi(n)),e}function bD(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const o=m(t,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const a=m(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=m(t,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const d=m(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const f=m(t,["labels"]);return e!==void 0&&f!=null&&g(e,["labels"],f),n}function ID(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["source"]);o!=null&&ND(o,n);const a=m(e,["config"]);return a!=null&&bD(a,n),n}function RD(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>nD(o))),g(e,["generatedMasks"],i)}return e}function ND(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=m(t,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],hi(o));const a=m(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],CD(a)),n}function Zx(t){const e={},n=m(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function MD(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["functionDeclarations"],_)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=m(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=m(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=m(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],lD(d));const f=m(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],uD(f));const h=m(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function eS(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>LM(S))),g(e,["functionDeclarations"],E)}const i=m(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=m(t,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=m(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=m(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=m(t,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=m(t,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const h=m(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const _=m(t,["urlContext"]);return _!=null&&g(e,["urlContext"],_),e}function DD(t){const e={},n=m(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&g(e,["createTime"],i);const o=m(t,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function PD(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&g(e,["createTime"],i);const o=m(t,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function kD(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=m(t,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=m(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function UD(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=m(t,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=m(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function LD(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","name"],Qe(t,i));const o=m(e,["config"]);return o!=null&&kD(o,n),n}function VD(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["config"]);return o!=null&&UD(o,n),n}function OD(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=m(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const a=m(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=m(t,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const d=m(t,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const f=m(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","compressionQuality"],f);const h=m(t,["enhanceInputImage"]);e!==void 0&&h!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=m(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=m(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=m(t,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const C=m(t,["mode"]);return e!==void 0&&C!=null&&g(e,["parameters","mode"],C),n}function FD(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Qe(t,i));const o=m(e,["image"]);o!=null&&g(n,["instances[0]","image"],hi(o));const a=m(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=m(e,["config"]);return u!=null&&OD(u,n),n}function BD(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>nf(a))),g(e,["generatedImages"],o)}return e}function qD(t){const e={},n=m(t,["uri"]);n!=null&&g(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Dr(i));const o=m(t,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function HD(t){const e={},n=m(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Dr(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function GD(t){const e={},n=m(t,["image"]);n!=null&&g(e,["_self"],hi(n));const i=m(t,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function zD(t){const e={},n=m(t,["image"]);n!=null&&g(e,["image"],sf(n));const i=m(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function jD(t){const e={},n=m(t,["image"]);n!=null&&g(e,["image"],hi(n));const i=m(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function tS(t){const e={},n=m(t,["uri"]);n!=null&&g(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&g(e,["encodedVideo"],Dr(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function nS(t){const e={},n=m(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Dr(i));const o=m(t,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JD="Content-Type",YD="X-Server-Timeout",$D="User-Agent",np="x-goog-api-client",KD="1.29.0",WD=`google-genai-sdk/${KD}`,QD="v1beta1",XD="v1beta",NT=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ZD{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:QD,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:XD,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(n))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>a.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&e2(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await MT(o),new Qm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await MT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return xa(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:f}=yield mt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(f,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),C=S.status,M=S.code,V=`got status: ${C}. ${JSON.stringify(E)}`;if(M>=400&&M<600)throw new ef({message:V,status:M})}}catch(E){if(E.name==="ApiError")throw E}u+=h;let _=u.match(NT);for(;_;){const E=_[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield mt(new Qm(S)),u=u.slice(_[0].length),_=u.match(NT)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=WD+" "+this.clientOptions.userAgentExtra;return e[$D]=n,e[np]=n,e[JD]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(YD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const f={file:o},h=this.getFileName(e),_=pe("upload/v1beta/files",f._url),E=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,f,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var o;const a=this.clientOptions.uploader,u=await a.stat(n),d=String(u.size),f=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const S=await this.fetchUploadUrl(h,d,f,_,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,a,u){var d;let f={};u?f=u:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:f});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function MT(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new ef({message:o,status:n}):new Error(o)}}function e2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f)){const h=u[f],_=d[f];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[f]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[f]=h)}return d}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t2="mcp_used/unknown";let n2=!1;function iS(t){for(const e of t)if(i2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return n2}function sS(t){var e;const n=(e=t[np])!==null&&e!==void 0?e:"";t[np]=(n+` ${t2}`).trimStart()}function i2(t){return t!==null&&typeof t=="object"&&t instanceof Bp}function s2(t,e=100){return xa(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield mt(t.listTools({cursor:i}));for(const u of a.tools)yield yield mt(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class Bp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Bp(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,f=(n=void 0,eu(s2(_))),h;h=await f.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const E=o;u.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=_}}catch(E){n={error:E}}finally{try{!d&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),uN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function r2(t,e,n){const i=new tN;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}class o2{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=u2(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(j=>{h=j}),E=e.callbacks,S=function(){h({})},C=this.apiClient,M={onopen:S,onmessage:j=>{r2(C,E.onmessage,j)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(j){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(j){}},V=this.webSocketFactory.create(f,l2(u),M);V.connect(),await _;const $={setup:{model:Qe(this.apiClient,e.model)}};return V.send(JSON.stringify($)),new a2(V,this.apiClient)}}class a2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=X1(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Q1(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(_a.PLAY)}pause(){this.sendPlaybackControl(_a.PAUSE)}stop(){this.sendPlaybackControl(_a.STOP)}resetContext(){this.sendPlaybackControl(_a.RESET_CONTEXT)}close(){this.conn.close()}}function l2(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function u2(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function d2(t,e,n){const i=new eN;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const a=JSON.parse(o);if(t.isVertexAI()){const u=tM(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class f2{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new o2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&iS(e.config.tools)&&sS(E);const S=g2(E);if(this.apiClient.isVertexAI())_=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const R=this.apiClient.getApiKey();let k="BidiGenerateContent",B="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",B="access_token"),_=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${k}?${B}=${R}`}let C=()=>{};const M=new Promise(R=>{C=R}),V=e.callbacks,U=function(){var R;(R=V==null?void 0:V.onopen)===null||R===void 0||R.call(V),C({})},z=this.apiClient,$={onopen:U,onmessage:R=>{d2(z,V.onmessage,R)},onerror:(n=V==null?void 0:V.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=V==null?void 0:V.onclose)!==null&&i!==void 0?i:function(R){}},j=this.webSocketFactory.create(_,p2(S),$);j.connect(),await M;let Y=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Y.startsWith("publishers/")){const R=this.apiClient.getProject(),k=this.apiClient.getLocation();Y=`projects/${R}/locations/${k}/`+Y}let ie={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Cd.AUDIO]}:e.config.responseModalities=[Cd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const oe=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],P=[];for(const R of oe)if(this.isCallableTool(R)){const k=R;P.push(await k.tool())}else P.push(R);P.length>0&&(e.config.tools=P);const N={model:Y,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ie=W1(this.apiClient,N):ie=K1(this.apiClient,N),delete ie.config,j.send(JSON.stringify(ie)),new m2(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const h2={turnComplete:!0};class m2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ei(n.turns),e.isVertexAI()||(i=i.map(o=>tf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(c2)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},h2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:eM(e)}:n={realtimeInput:Z1(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function p2(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function g2(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DT=10;function PT(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Sa(u)){o=!0;break}if(!o)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Sa(t){return"callTool"in t&&typeof t.callTool=="function"}function y2(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Sa(o)))!==null&&i!==void 0?i:!1}function kT(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(Sa(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(o)}),n}function UT(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v2 extends Cs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,a,u,d;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!y2(n)||PT(n.config))return await this.generateContentInternal(f);const h=kT(n);if(h.length>0){const V=h.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let _,E;const S=ei(f.contents),C=(a=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:DT;let M=0;for(;M<C&&(_=await this.generateContentInternal(f),!(!_.functionCalls||_.functionCalls.length===0));){const V=_.candidates[0].content,U=[];for(const z of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Sa(z)){const j=await z.callTool(_.functionCalls);U.push(...j)}M++,E={role:"user",parts:U},f.contents=ei(f.contents),f.contents.push(V),f.contents.push(E),UT(f.config)&&(S.push(V),S.push(E))}return UT(f.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),PT(n.config)){const o=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(o)}const i=kT(n);if(i.length>0){const o=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=f==null?void 0:f.safetyAttributes:u.push(f);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new xo(_s.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,a,u,d,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((f=(d=n.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async f=>Sa(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&iS(e.config.tools)){const f=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),sS(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var n,i,o;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Sa(u)){const d=u,f=await d.tool();for(const h of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var n,i,o;const a=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:DT;let u=!1,d=0;const f=await this.initAfcToolsMap(e);return(function(h,_,E){var S,C;return xa(this,arguments,function*(){for(var M,V,U,z;d<a;){u&&(d++,u=!1);const ie=yield mt(h.processParamsMaybeAddMcpUsage(E)),oe=yield mt(h.generateContentStreamInternal(ie)),P=[],N=[];try{for(var $=!0,j=(V=void 0,eu(oe)),Y;Y=yield mt(j.next()),M=Y.done,!M;$=!0){z=Y.value,$=!1;const R=z;if(yield yield mt(R),R.candidates&&(!((S=R.candidates[0])===null||S===void 0)&&S.content)){N.push(R.candidates[0].content);for(const k of(C=R.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(d<a&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(k.functionCall.name)){const B=yield mt(_.get(k.functionCall.name).callTool([k.functionCall]));P.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(R){V={error:R}}finally{try{!$&&!M&&(U=j.return)&&(yield mt(U.call(j)))}finally{if(V)throw V.error}}if(P.length>0){u=!0;const R=new Kl;R.candidates=[{content:{role:"user",parts:P}}],yield yield mt(R);const k=[];k.push(...N),k.push({role:"user",parts:P});const B=ei(E.contents).concat(k);E.contents=B}else break}})})(this,f,e)}async generateContentInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=bT(this.apiClient,e);return d=pe("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=RT(_),S=new Kl;return Object.assign(S,E),S})}else{const h=CT(this.apiClient,e);return d=pe("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=IT(_),S=new Kl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=bT(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return xa(this,arguments,function*(){var S,C,M,V;try{for(var U=!0,z=eu(E),$;$=yield mt(z.next()),S=$.done,!S;U=!0){V=$.value,U=!1;const j=V,Y=RT(yield mt(j.json()));Y.sdkHttpResponse={headers:j.headers};const ie=new Kl;Object.assign(ie,Y),yield yield mt(ie)}}catch(j){C={error:j}}finally{try{!U&&!S&&(M=z.return)&&(yield mt(M.call(z)))}finally{if(C)throw C.error}}})})}else{const h=CT(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return xa(this,arguments,function*(){var S,C,M,V;try{for(var U=!0,z=eu(E),$;$=yield mt(z.next()),S=$.done,!S;U=!0){V=$.value,U=!1;const j=V,Y=IT(yield mt(j.json()));Y.sdkHttpResponse={headers:j.headers};const ie=new Kl;Object.assign(ie,Y),yield yield mt(ie)}}catch(j){C={error:j}}finally{try{!U&&!S&&(M=z.return)&&(yield mt(M.call(z)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=MM(this.apiClient,e);return d=pe("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=PM(_),S=new cT;return Object.assign(S,E),S})}else{const h=NM(this.apiClient,e);return d=pe("{model}:batchEmbedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=DM(_),S=new cT;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=HM(this.apiClient,e);return d=pe("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=zM(_),S=new dT;return Object.assign(S,E),S})}else{const h=qM(this.apiClient,e);return d=pe("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=GM(_),S=new dT;return Object.assign(S,E),S})}}async editImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=CM(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>{const h=bM(f),_=new GR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=FD(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>{const h=BD(f),_=new zR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=ED(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=xD(f),_=new jR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=ID(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=RD(f),_=new JR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=aD(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>tp(_))}else{const h=oD(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>ep(_))}}async listInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=mD(this.apiClient,e);return d=pe("{models_url}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=gD(_),S=new fT;return Object.assign(S,E),S})}else{const h=hD(this.apiClient,e);return d=pe("{models_url}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=pD(_),S=new fT;return Object.assign(S,E),S})}}async update(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=VD(this.apiClient,e);return d=pe("{model}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>tp(_))}else{const h=LD(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>ep(_))}}async delete(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=xM(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=wM(_),S=new hT;return Object.assign(S,E),S})}else{const h=EM(this.apiClient,e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=SM(_),S=new hT;return Object.assign(S,E),S})}}async countTokens(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=vM(this.apiClient,e);return d=pe("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=TM(_),S=new mT;return Object.assign(S,E),S})}else{const h=yM(this.apiClient,e);return d=pe("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=_M(_),S=new mT;return Object.assign(S,E),S})}}async computeTokens(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=cM(this.apiClient,e);return a=pe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>{const h=dM(f),_=new YR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=WM(this.apiClient,e);return d=pe("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const E=$M(_),S=new bd;return Object.assign(S,E),S})}else{const h=KM(this.apiClient,e);return d=pe("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const E=YM(_),S=new bd;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _2 extends Cs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=VR(e);return d=pe("{operationName}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=LR(e);return d=pe("{operationName}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=RR(e);return a=pe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T2(t){const e={},n=m(t,["data"]);if(n!=null&&g(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function E2(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>R2(a))),g(e,["parts"],o)}const i=m(t,["role"]);return i!=null&&g(e,["role"],i),e}function x2(t,e,n){const i={},o=m(e,["expireTime"]);n!==void 0&&o!=null&&g(n,["expireTime"],o);const a=m(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const u=m(e,["uses"]);n!==void 0&&u!=null&&g(n,["uses"],u);const d=m(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&g(n,["bidiGenerateContentSetup"],I2(t,d));const f=m(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&g(n,["fieldMask"],f),i}function S2(t,e){const n={},i=m(e,["config"]);return i!=null&&g(n,["config"],x2(t,i,n)),n}function w2(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function A2(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function C2(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function b2(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=m(t,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=m(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=m(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=m(t,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const h=m(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const _=m(t,["seed"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","seed"],_);const E=m(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Fp(E));const S=m(t,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const C=m(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=m(t,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],E2(dn(M)));const V=m(t,["tools"]);if(e!==void 0&&V!=null){let oe=Fa(V);Array.isArray(oe)&&(oe=oe.map(P=>M2(Oa(P)))),g(e,["setup","tools"],oe)}const U=m(t,["sessionResumption"]);e!==void 0&&U!=null&&g(e,["setup","sessionResumption"],N2(U));const z=m(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const $=m(t,["outputAudioTranscription"]);e!==void 0&&$!=null&&g(e,["setup","outputAudioTranscription"],$);const j=m(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&g(e,["setup","realtimeInputConfig"],j);const Y=m(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ie=m(t,["proactivity"]);return e!==void 0&&ie!=null&&g(e,["setup","proactivity"],ie),n}function I2(t,e){const n={},i=m(e,["model"]);i!=null&&g(n,["setup","model"],Qe(t,i));const o=m(e,["config"]);return o!=null&&g(n,["config"],b2(o,n)),n}function R2(t){const e={},n=m(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=m(t,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=m(t,["fileData"]);a!=null&&g(e,["fileData"],w2(a));const u=m(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&g(e,["inlineData"],T2(d));const f=m(t,["text"]);f!=null&&g(e,["text"],f);const h=m(t,["thought"]);h!=null&&g(e,["thought"],h);const _=m(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=m(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function N2(t){const e={},n=m(t,["handle"]);if(n!=null&&g(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function M2(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["functionDeclarations"],_)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=m(t,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=m(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=m(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],A2(d));const f=m(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],C2(f));const h=m(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${n}.${a}`);e.push(...o)}else e.push(n)}return e.join(",")}function P2(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const a=D2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const f=[];a&&f.push(a),d.length>0&&f.push(...d),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class k2 extends Cs{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=S2(this.apiClient,e);a=pe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=P2(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U2(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function L2(t){const e={},n=m(t,["config"]);return n!=null&&U2(n,e),e}function V2(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function O2(t){const e={},n=m(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&V2(i,e),e}function F2(t){const e={},n=m(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function B2(t,e){const n={},i=m(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const o=m(t,["chunkingConfig"]);return e!==void 0&&o!=null&&g(e,["chunkingConfig"],o),n}function q2(t){const e={},n=m(t,["name"]);n!=null&&g(e,["name"],n);const i=m(t,["metadata"]);i!=null&&g(e,["metadata"],i);const o=m(t,["done"]);o!=null&&g(e,["done"],o);const a=m(t,["error"]);a!=null&&g(e,["error"],a);const u=m(t,["response"]);return u!=null&&g(e,["response"],G2(u)),e}function H2(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=m(t,["fileName"]);i!=null&&g(e,["fileName"],i);const o=m(t,["config"]);return o!=null&&B2(o,e),e}function G2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&g(e,["parent"],i);const o=m(t,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function z2(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function j2(t){const e={},n=m(t,["config"]);return n!=null&&z2(n,e),e}function J2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function Y2(t,e){const n={},i=m(t,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const o=m(t,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const a=m(t,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>f)),g(e,["customMetadata"],d)}const u=m(t,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),n}function $2(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=m(t,["config"]);return i!=null&&Y2(i,e),e}function K2(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W2(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function Q2(t){const e={},n=m(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&W2(i,e),e}function X2(t){const e={},n=m(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function Z2(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),n}function eP(t){const e={},n=m(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=m(t,["config"]);return i!=null&&Z2(i,e),e}function tP(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=m(t,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nP extends Cs{constructor(e){super(),this.apiClient=e,this.list=async n=>new xo(_s.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=X2(e);return a=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Q2(e);o=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=eP(e);return a=pe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=tP(f),_=new $R;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iP extends Cs{constructor(e,n=new nP(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new xo(_s.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=L2(e);return a=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=F2(e);return a=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=O2(e);o=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=j2(e);return a=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=J2(f),_=new KR;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$2(e);return a=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=K2(f),_=new WR;return Object.assign(_,h),_})}}async importFile(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=H2(e);return a=pe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=q2(f),_=new kp;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sP(t,e){const n={},i=m(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function rP(t,e){const n={},i=m(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function oP(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=m(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=m(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=m(t,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=m(t,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const f=m(t,["learningRate"]);if(e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","learningRate"],f),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function aP(t,e,n){const i={};let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const C=m(t,["validationDataset"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec"],LT(C))}else if(o==="PREFERENCE_TUNING"){const C=m(t,["validationDataset"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec"],LT(C))}const a=m(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=m(t,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=m(t,["epochCount"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(d==="PREFERENCE_TUNING"){const C=m(t,["epochCount"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=m(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(f==="PREFERENCE_TUNING"){const C=m(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=m(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=m(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=m(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let _=m(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const C=m(t,["adapterSize"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(_==="PREFERENCE_TUNING"){const C=m(t,["adapterSize"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=m(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=m(t,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function lP(t,e){const n={},i=m(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const o=m(t,["preTunedModel"]);o!=null&&g(n,["preTunedModel"],o);const a=m(t,["trainingDataset"]);a!=null&&_P(a);const u=m(t,["config"]);return u!=null&&oP(u,n),n}function uP(t,e){const n={},i=m(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const o=m(t,["preTunedModel"]);o!=null&&g(n,["preTunedModel"],o);const a=m(t,["trainingDataset"]);a!=null&&TP(a,n,e);const u=m(t,["config"]);return u!=null&&aP(u,n,e),n}function cP(t,e){const n={},i=m(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function dP(t,e){const n={},i=m(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function fP(t,e,n){const i={},o=m(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=m(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=m(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function hP(t,e,n){const i={},o=m(t,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=m(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=m(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function mP(t,e){const n={},i=m(t,["config"]);return i!=null&&fP(i,n),n}function pP(t,e){const n={},i=m(t,["config"]);return i!=null&&hP(i,n),n}function gP(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=m(t,["nextPageToken"]);o!=null&&g(n,["nextPageToken"],o);const a=m(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>rS(d))),g(n,["tuningJobs"],u)}return n}function yP(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=m(t,["nextPageToken"]);o!=null&&g(n,["nextPageToken"],o);const a=m(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>ip(d))),g(n,["tuningJobs"],u)}return n}function vP(t,e){const n={},i=m(t,["name"]);i!=null&&g(n,["model"],i);const o=m(t,["name"]);return o!=null&&g(n,["endpoint"],o),n}function _P(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(n,["examples","examples"],o)}return n}function TP(t,e,n){const i={};let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=m(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=m(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=m(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=m(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=m(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function rS(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=m(t,["name"]);o!=null&&g(n,["name"],o);const a=m(t,["state"]);a!=null&&g(n,["state"],Bx(a));const u=m(t,["createTime"]);u!=null&&g(n,["createTime"],u);const d=m(t,["tuningTask","startTime"]);d!=null&&g(n,["startTime"],d);const f=m(t,["tuningTask","completeTime"]);f!=null&&g(n,["endTime"],f);const h=m(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const _=m(t,["description"]);_!=null&&g(n,["description"],_);const E=m(t,["baseModel"]);E!=null&&g(n,["baseModel"],E);const S=m(t,["_self"]);return S!=null&&g(n,["tunedModel"],vP(S)),n}function ip(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=m(t,["name"]);o!=null&&g(n,["name"],o);const a=m(t,["state"]);a!=null&&g(n,["state"],Bx(a));const u=m(t,["createTime"]);u!=null&&g(n,["createTime"],u);const d=m(t,["startTime"]);d!=null&&g(n,["startTime"],d);const f=m(t,["endTime"]);f!=null&&g(n,["endTime"],f);const h=m(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const _=m(t,["error"]);_!=null&&g(n,["error"],_);const E=m(t,["description"]);E!=null&&g(n,["description"],E);const S=m(t,["baseModel"]);S!=null&&g(n,["baseModel"],S);const C=m(t,["tunedModel"]);C!=null&&g(n,["tunedModel"],C);const M=m(t,["preTunedModel"]);M!=null&&g(n,["preTunedModel"],M);const V=m(t,["supervisedTuningSpec"]);V!=null&&g(n,["supervisedTuningSpec"],V);const U=m(t,["preferenceOptimizationSpec"]);U!=null&&g(n,["preferenceOptimizationSpec"],U);const z=m(t,["tuningDataStats"]);z!=null&&g(n,["tuningDataStats"],z);const $=m(t,["encryptionSpec"]);$!=null&&g(n,["encryptionSpec"],$);const j=m(t,["partnerModelTuningSpec"]);j!=null&&g(n,["partnerModelTuningSpec"],j);const Y=m(t,["customBaseModel"]);Y!=null&&g(n,["customBaseModel"],Y);const ie=m(t,["experiment"]);ie!=null&&g(n,["experiment"],ie);const oe=m(t,["labels"]);oe!=null&&g(n,["labels"],oe);const P=m(t,["outputUri"]);P!=null&&g(n,["outputUri"],P);const N=m(t,["pipelineJob"]);N!=null&&g(n,["pipelineJob"],N);const R=m(t,["serviceAccount"]);R!=null&&g(n,["serviceAccount"],R);const k=m(t,["tunedModelDisplayName"]);k!=null&&g(n,["tunedModelDisplayName"],k);const B=m(t,["veoTuningSpec"]);return B!=null&&g(n,["veoTuningSpec"],B),n}function EP(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const o=m(t,["name"]);o!=null&&g(n,["name"],o);const a=m(t,["metadata"]);a!=null&&g(n,["metadata"],a);const u=m(t,["done"]);u!=null&&g(n,["done"],u);const d=m(t,["error"]);return d!=null&&g(n,["error"],d),n}function LT(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const o=m(t,["vertexDatasetResource"]);return o!=null&&g(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xP extends Cs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new xo(_s.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Wm.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=dP(e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>ip(_))}else{const h=cP(e);return d=pe("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>rS(_))}}async listInternal(e){var n,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=pP(e);return d=pe("tuningJobs",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=yP(_),S=new pT;return Object.assign(S,E),S})}else{const h=mP(e);return d=pe("tunedModels",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=gP(_),S=new pT;return Object.assign(S,E),S})}}async cancel(e){var n,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const f=rP(e);u=pe("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=sP(e);u=pe("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=uP(e,e);return a=pe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>ip(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lP(e);return a=pe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),o.then(f=>EP(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const wP=1024*1024*8,AP=3,CP=1e3,bP=2,Rd="x-goog-upload-status";async function IP(t,e,n){var i;const o=await oS(t,e,n),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Rd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function RP(t,e,n){var i;const o=await oS(t,e,n),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Rd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=kx(a),d=new Up;return Object.assign(d,u),d}async function oS(t,e,n){var i,o;let a=0,u=0,d=new Qm(new Response),f="upload";for(a=t.size;u<a;){const h=Math.min(wP,a-u),_=t.slice(u,u+h);u+h>=a&&(f+=", finalize");let E=0,S=CP;for(;E<AP&&(d=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Rd]));)E++,await MP(S),S=S*bP;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Rd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function NP(t){return{size:t.size,type:t.type}}function MP(t){return new Promise(e=>setTimeout(e,t))}class DP{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IP(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RP(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PP{create(e,n,i){return new kP(e,n,i)}}class kP{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VT="x-goog-api-key";class UP{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(VT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(VT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LP="gl-node/";class VP{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=bR(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new UP(this.apiKey);this.apiClient=new ZD({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:LP+"web",uploader:new DP,downloader:new SP}),this.models=new v2(this.apiClient),this.live=new f2(this.apiClient,o,new PP),this.batches=new XN(this.apiClient),this.chats=new N1(this.models,this.apiClient),this.caches=new b1(this.apiClient),this.files=new B1(this.apiClient),this.operations=new _2(this.apiClient),this.authTokens=new k2(this.apiClient),this.tunings=new xP(this.apiClient),this.fileSearchStores=new iP(this.apiClient)}}const OP=void 0;console.error("Gemini API key not found. Please set the API_KEY environment variable.");new VP({apiKey:OP});const FP=async t=>"AI features are currently unavailable.",BP=async t=>"Sorry, I'm currently unable to chat.",qP=async(t,e)=>"Welcome back to SoundWave radio...",HP=async(t,e)=>{console.log(`Simulating AI theme generation for ${t}`),await new Promise(i=>setTimeout(i,1500));const n=[{bannerUrl:"https://picsum.photos/id/1043/1200/400",accentColor:"#3B82F6"},{bannerUrl:"https://picsum.photos/id/1050/1200/400",accentColor:"#EF4444"},{bannerUrl:"https://picsum.photos/id/1060/1200/400",accentColor:"#A855F7"}];return n[Math.floor(Math.random()*n.length)]},GP=()=>{const[t,e]=D.useState(""),[n,i]=D.useState(""),[o,a]=D.useState(bi.PREVIEW),[u,d]=D.useState(.99),[f,h]=D.useState(""),[_,E]=D.useState(""),[S,C]=D.useState(!1),[M,V]=D.useState(!1),[U,z]=D.useState(!1),$=async()=>{if(_){C(!0);try{const Y=await FP(_);i(Y)}catch(Y){console.error("Failed to generate description:",Y)}finally{C(!1)}}},j=Y=>{Y.preventDefault(),V(!0),setTimeout(()=>{V(!1),z(!0),console.log({title:t,description:n,uploadType:o,price:o==="For Sale"?u:0,tags:f.split(",")}),setTimeout(()=>z(!1),3e3)},1500)};return y.jsxs("div",{className:"max-w-4xl mx-auto text-white",children:[y.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Upload Your Track"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Share your music with the world. Fill out the details below."}),U&&y.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-300 px-4 py-3 rounded-lg relative mb-6",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Success!"}),y.jsx("span",{className:"block sm:inline",children:" Your track has been uploaded."})]}),y.jsxs("form",{onSubmit:j,className:"space-y-8",children:[y.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-lg",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"col-span-1",children:[y.jsx("label",{htmlFor:"track-title",className:"block text-sm font-medium text-gray-400 mb-2",children:"Track Title"}),y.jsx("input",{type:"text",id:"track-title",value:t,onChange:Y=>e(Y.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"})]}),y.jsxs("div",{className:"col-span-1",children:[y.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-400 mb-2",children:"Tags (comma-separated)"}),y.jsx("input",{type:"text",id:"tags",value:f,onChange:Y=>h(Y.target.value),placeholder:"e.g. lofi, chill, electronic",className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"})]})]}),y.jsxs("div",{className:"mt-6",children:[y.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-400 mb-2",children:"Description"}),y.jsx("textarea",{id:"description",value:n,onChange:Y=>i(Y.target.value),rows:4,required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"}),y.jsxs("div",{className:"mt-4 p-4 bg-gray-700/50 rounded-lg",children:[y.jsx("label",{htmlFor:"ai-prompt",className:"block text-sm font-medium text-gray-400 mb-2",children:"Need help with the description? Give the AI some keywords."}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("input",{type:"text",id:"ai-prompt",value:_,onChange:Y=>E(Y.target.value),placeholder:"e.g. epic, cinematic, synthwave",className:"flex-grow bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"}),y.jsx(We,{type:"button",onClick:$,isLoading:S,variant:"secondary",children:"Generate"})]})]})]}),y.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Upload Type"}),y.jsxs("select",{value:o,onChange:Y=>a(Y.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition",children:[y.jsx("option",{value:bi.PREVIEW,children:"Preview Only"}),y.jsx("option",{value:bi.FREE,children:"Free Download"}),y.jsx("option",{value:bi.SALE,children:"For Sale"})]})]}),o==="For Sale"&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-400 mb-2",children:"Price (USD)"}),y.jsx("input",{type:"number",id:"price",value:u,onChange:Y=>d(Number(Y.target.value)),min:"0.50",step:"0.01",className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"})]})]})]}),y.jsx("div",{className:"flex justify-end",children:y.jsxs(We,{type:"submit",isLoading:M,children:[y.jsx(_e,{name:"upload",className:"w-5 h-5 mr-2"}),"Upload Track"]})})]})]})},zP=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0);D.useEffect(()=>{(async()=>{i(!0);const u=await bx();e(u),i(!1)})()},[]);const o=a=>{e([a,...t])};return y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Community Hub"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Connect with fellow artists and fans. Share your thoughts, ask questions, and collaborate."}),y.jsx("div",{className:"mb-8",children:y.jsx(Dx,{onPostCreated:o})}),n?y.jsx(xn,{}):y.jsx("div",{className:"space-y-6",children:t.map(a=>y.jsx(Dp,{post:a},a.id))})]})},jP=()=>{const[t,e]=ui.useState(!1),[n,i]=ui.useState([]),[o,a]=ui.useState(""),[u,d]=ui.useState(!1),f=ui.useRef(null),h={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200"},_=()=>{var S;(S=f.current)==null||S.scrollIntoView({behavior:"smooth"})};ui.useEffect(_,[n]),ui.useEffect(()=>{i([{id:`msg_${Date.now()}`,user:{id:"dj_gemini",name:"DJ Gemini",avatarUrl:"https://i.pravatar.cc/150?u=dj_gemini"},text:"Welcome to the SoundWave global chat! Feel free to talk about music, production, or just say hi.",timestamp:new Date().toISOString()}])},[]);const E=async S=>{if(S.preventDefault(),!o.trim())return;const C={id:`msg_${Date.now()}`,user:{id:h.id,name:h.name,avatarUrl:h.avatarUrl},text:o,timestamp:new Date().toISOString()};i(M=>[...M,C]),a(""),d(!0),setTimeout(async()=>{const M=await BP(),V={id:`msg_${Date.now()+1}`,user:{id:"dj_gemini",name:"DJ Gemini",avatarUrl:"https://i.pravatar.cc/150?u=dj_gemini"},text:M,timestamp:new Date().toISOString()};i(U=>[...U,V]),d(!1)},1e3+Math.random()*1e3)};return y.jsxs(y.Fragment,{children:[!t&&y.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-brand-accent hover:bg-brand-accent-hover text-white rounded-full p-4 shadow-lg z-50 transition-transform transform hover:scale-110","aria-label":"Open global chat",children:y.jsx(_e,{name:"chat-bubble",className:"w-8 h-8"})}),y.jsx("div",{className:`fixed bottom-0 right-0 h-full w-full sm:h-auto sm:w-96 bg-gray-800 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"translate-x-full"}`,children:y.jsxs("div",{className:"flex flex-col h-full",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 border-b border-gray-600",children:[y.jsx("h3",{className:"font-bold text-white text-lg",children:"Global Chat"}),y.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white","aria-label":"Close global chat",children:y.jsx(_e,{name:"x",className:"w-6 h-6"})})]}),y.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:y.jsxs("div",{className:"space-y-4",children:[n.map(S=>y.jsxs("div",{className:`flex items-start gap-3 ${S.user.id===h.id?"flex-row-reverse":""}`,children:[y.jsx("img",{src:S.user.avatarUrl,alt:S.user.name,className:"w-8 h-8 rounded-full object-cover"}),y.jsxs("div",{className:`p-3 rounded-lg max-w-xs ${S.user.id===h.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[y.jsx("p",{className:"font-bold text-sm",children:S.user.name}),y.jsx("p",{className:"text-sm",children:S.text})]})]},S.id)),u&&y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("img",{src:"https://i.pravatar.cc/150?u=dj_gemini",alt:"DJ Gemini",className:"w-8 h-8 rounded-full object-cover"}),y.jsx("div",{className:"p-3 rounded-lg max-w-xs bg-gray-700 text-gray-400",children:y.jsx("p",{className:"text-sm italic",children:"DJ Gemini is typing..."})})]}),y.jsx("div",{ref:f})]})}),y.jsx("div",{className:"p-4 bg-gray-700 border-t border-gray-600",children:y.jsxs("form",{onSubmit:E,className:"flex gap-2",children:[y.jsx("input",{type:"text",value:o,onChange:S=>a(S.target.value),placeholder:"Type a message...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400",disabled:u}),y.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-3 hover:bg-brand-accent-hover disabled:bg-gray-500",disabled:u||!o.trim(),children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z",clipRule:"evenodd"})})})]})})]})})]})},JP=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0),[o,a]=D.useState(null);D.useEffect(()=>{(async()=>{i(!0);const f=await Zd();e(f),i(!1)})()},[]);const u=async d=>{if(o)try{const f=await Eu(o.id,d),h={...o,comments:[...o.comments||[],f]};a(h),e(_=>_.map(E=>E.id===h.id?h:E))}catch(f){console.error("Failed to add comment:",f)}};return n?y.jsx(xn,{}):y.jsxs("div",{children:[o&&y.jsx(Eo,{isOpen:!!o,onClose:()=>a(null),title:`Comments for ${o.title}`,comments:o.comments||[],onAddComment:u}),y.jsxs("section",{id:"global-library",children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Global Library"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Explore all tracks uploaded by the SoundWave community."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:t.map(d=>y.jsx(Wd,{track:d,onViewComments:a},d.id))})]})]})},YP=()=>{const[t,e]=D.useState([]),[n,i]=D.useState([]),[o,a]=D.useState([]),[u,d]=D.useState(!0),[f,h]=D.useState(null),[_,E]=D.useState([]),[S,C]=D.useState(0),[M,V]=D.useState(""),[U,z]=D.useState(!1),[$,j]=D.useState(null),Y=D.useContext(Va);if(!Y)throw new Error("PlaylistsPage must be used within an AudioProvider");const{playTrack:ie,currentTrack:oe,isPlaying:P,setOnTrackEnd:N}=Y;D.useEffect(()=>{(async()=>{d(!0);const[O,te,fe]=await Promise.all([XI(),Zd(),Nx()]);e(O),a(te),i(fe.filter(xe=>xe.curator.id==="user_1")),d(!1)})()},[]);const R=ui.useCallback(()=>{_.length!==0&&C(ge=>{const O=(ge+1)%_.length,te=_[O];return ie(te),k(te),O})},[_,ie]);D.useEffect(()=>(f&&N(()=>R),()=>{N(null)}),[f,N,R]);const k=async ge=>{z(!0),V("");const O=await qP(ge.title,ge.artistName);V(O),z(!1)},B=ge=>{let O;ge.artistId?O=o.filter(fe=>fe.artistId===ge.artistId):O=o.filter(fe=>fe.tags.some(xe=>ge.tags.includes(xe)));const te=O.sort(()=>.5-Math.random());E(te),h(ge),C(0),te.length>0&&(ie(te[0]),k(te[0]))},q=()=>{h(null),E([])},L=async ge=>{if($)try{const O=await fR($.id,ge),te={...$,comments:[...$.comments||[],O]};j(te),i(fe=>fe.map(xe=>xe.id===te.id?te:xe))}catch(O){console.error("Failed to add comment to playlist:",O)}},je=_[S];return u?y.jsx(xn,{}):f&&je?y.jsx(KP,{station:f,track:je,djCommentary:M,isGeneratingCommentary:U,isPlaying:P,onBack:q,onNext:R}):y.jsxs("div",{children:[$&&y.jsx(Eo,{isOpen:!!$,onClose:()=>j(null),title:`Comments for ${$.title}`,comments:$.comments||[],onAddComment:L}),y.jsxs("section",{id:"my-playlists",className:"mb-16",children:[y.jsx("div",{className:"flex justify-between items-center mb-6",children:y.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Playlists"})}),n.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(ge=>y.jsx($P,{playlist:ge,onViewComments:j},ge.id))}):y.jsxs("div",{className:"text-center py-10 px-6 bg-gray-800 rounded-lg",children:[y.jsx(_e,{name:"playlist",className:"w-12 h-12 mx-auto text-gray-500 mb-4"}),y.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Playlists Yet"}),y.jsx("p",{className:"text-gray-400 mt-2",children:"You haven't created any playlists."})]})]}),y.jsxs("section",{id:"radio-stations",children:[y.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Radio Stations"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Tune in to AI-powered radio stations based on genres, moods, and artists."}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(ge=>y.jsxs("div",{className:"group relative rounded-lg overflow-hidden shadow-lg h-64",children:[y.jsx("img",{src:ge.imageUrl,alt:ge.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),y.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-end",children:[y.jsx("h3",{className:"text-2xl font-bold text-white",children:ge.name}),y.jsx("p",{className:"text-gray-300 text-sm mb-4",children:ge.description}),y.jsx("div",{className:"w-1/2",children:y.jsx(We,{onClick:()=>B(ge),children:"Tune In"})})]})]},ge.id))})]})]})},$P=({playlist:t,onViewComments:e})=>{var n;return y.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg flex flex-col gap-4 transition-all duration-300 hover:bg-gray-700 hover:shadow-xl",children:[y.jsx("div",{className:"grid grid-cols-2 gap-1 w-full aspect-square rounded-md overflow-hidden bg-gray-900",children:t.tracks.slice(0,4).map(i=>y.jsx("img",{src:i.coverArtUrl,alt:"",className:"w-full h-full object-cover"},i.id))}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-white truncate",children:t.title}),y.jsxs("p",{className:"text-sm text-gray-400",children:[t.tracks.length," tracks"]}),y.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700 flex justify-between items-center",children:[y.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors",children:[y.jsx(_e,{name:"comment",className:"w-4 h-4"}),y.jsx("span",{className:"text-xs font-semibold",children:((n=t.comments)==null?void 0:n.length)||0})]}),y.jsx(We,{size:"sm",children:"Play"})]})]})]})},KP=({station:t,track:e,djCommentary:n,isGeneratingCommentary:i,isPlaying:o,onBack:a,onNext:u})=>y.jsx("div",{className:"max-w-4xl mx-auto",children:y.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-2xl",children:[y.jsxs("div",{className:"flex justify-between items-start mb-6",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-400",children:"Now Playing on"}),y.jsx("h2",{className:"text-3xl font-bold text-white",children:t.name})]}),y.jsx(We,{onClick:a,variant:"secondary",children:"Change Station"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[y.jsxs("div",{className:"relative w-full aspect-square rounded-lg overflow-hidden shadow-lg",children:[y.jsx("img",{src:e.coverArtUrl,alt:e.title,className:"w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center gap-1 opacity-40",children:Array.from({length:20}).map((d,f)=>y.jsx("div",{className:"audio-bar w-2 h-24 bg-white",style:{animationDelay:`${f*.1}s`,animationPlayState:o?"running":"paused"}},f))})]}),y.jsxs("div",{className:"flex flex-col",children:[y.jsx("h3",{className:"text-4xl font-bold text-white",children:e.title}),y.jsx("p",{className:"text-xl text-gray-400 mb-6",children:e.artistName}),y.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm border border-gray-600 rounded-lg p-4 mt-6 relative",children:[y.jsx("div",{className:"absolute -top-3 left-8 w-6 h-6 bg-gray-700/50 border-t border-l border-gray-600 transform rotate-45",style:{clipPath:"polygon(0 0, 100% 0, 100% 100%)"}}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("img",{src:"https://i.pravatar.cc/150?u=dj_gemini",alt:"DJ Gemini",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-bold text-brand-accent",children:"DJ Gemini"}),i?y.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}):y.jsxs("p",{className:"text-gray-300 italic",children:['"',n,'"']})]})]})]}),y.jsx("div",{className:"mt-8 flex items-center gap-4",children:y.jsxs(We,{onClick:u,className:"w-full",children:[y.jsx(_e,{name:"next",className:"w-5 h-5 mr-2"}),"Next Track"]})})]})]})]})}),aS=({room:t,onLeave:e})=>{const n=D.useRef(null),[i,o]=D.useState(null),[a,u]=D.useState(null),[d,f]=D.useState([]),[h,_]=D.useState(""),E=D.useRef(null),S={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};D.useEffect(()=>((async()=>{try{const V=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(V),n.current&&(n.current.srcObject=V)}catch(V){console.error("Error accessing media devices.",V),u("Could not access camera/microphone. Please check permissions.")}})(),()=>{i&&i.getTracks().forEach(V=>V.stop())}),[]),D.useEffect(()=>{const M=setInterval(()=>{const V=["This is fire!","Great stream!","Loving the vibes","Tune!"],U=V[Math.floor(Math.random()*V.length)],z={id:`msg_${Date.now()}`,user:{id:`user_${Math.random()}`,name:"Viewer",avatarUrl:`https://i.pravatar.cc/150?u=${Math.random()}`},text:U,timestamp:new Date().toISOString()};f($=>[...$,z].slice(-10))},5e3+Math.random()*3e3);return()=>clearInterval(M)},[]),D.useEffect(()=>{var M;(M=E.current)==null||M.scrollIntoView({behavior:"smooth"})},[d]);const C=M=>{if(M.preventDefault(),!h.trim())return;const V={id:`msg_${Date.now()}`,user:S,text:h,timestamp:new Date().toISOString()};f(U=>[...U,V].slice(-10)),_("")};return y.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-90 z-50 flex flex-col items-center justify-center p-4",onClick:e,children:y.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-6xl h-full max-h-[90vh] flex flex-col md:flex-row overflow-hidden",onClick:M=>M.stopPropagation(),children:[y.jsxs("div",{className:"flex-grow bg-black relative flex items-center justify-center",children:[a?y.jsxs("div",{className:"text-center text-red-400 p-4",children:[y.jsx(_e,{name:"x",className:"w-12 h-12 mx-auto mb-2"}),y.jsx("p",{className:"font-semibold",children:"Stream Error"}),y.jsx("p",{children:a})]}):y.jsx("video",{ref:n,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),y.jsx("div",{className:"absolute top-4 left-4 bg-black/50 p-2 rounded-lg",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("img",{src:t.host.avatarUrl,alt:t.host.name,className:"w-10 h-10 rounded-full"}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-white",children:t.name}),y.jsxs("p",{className:"text-sm text-gray-300",children:["Hosted by ",t.host.name]})]})]})}),y.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-4",children:[y.jsxs("div",{className:"flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-md text-sm font-bold",children:[y.jsx(_e,{name:"rss",className:"w-4 h-4 animate-pulse"}),"LIVE"]}),y.jsxs("div",{className:"bg-black/50 text-white px-3 py-1 rounded-md text-sm",children:[t.viewers," watching"]})]})]}),y.jsxs("div",{className:"w-full md:w-80 lg:w-96 bg-gray-800 border-l border-gray-700 flex flex-col h-1/3 md:h-full",children:[y.jsx("div",{className:"p-4 border-b border-gray-700",children:y.jsx("h3",{className:"font-bold text-white",children:"Live Chat"})}),y.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[d.map(M=>y.jsxs("div",{className:"flex items-start gap-2",children:[y.jsx("img",{src:M.user.avatarUrl,alt:M.user.name,className:"w-8 h-8 rounded-full"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-semibold text-gray-300",children:M.user.name}),y.jsx("p",{className:"text-sm text-gray-400 bg-gray-700 px-3 py-1 rounded-lg",children:M.text})]})]},M.id)),y.jsx("div",{ref:E})]}),y.jsx("div",{className:"p-4 border-t border-gray-700",children:y.jsxs("form",{onSubmit:C,className:"flex gap-2",children:[y.jsx("input",{type:"text",value:h,onChange:M=>_(M.target.value),placeholder:"Say something...",className:"flex-grow bg-gray-700 border-gray-600 rounded-full py-2 px-3 text-sm text-white focus:ring-brand-accent-hover focus:border-brand-accent-hover"}),y.jsx("button",{type:"submit",className:"bg-brand-accent p-2 rounded-full text-white hover:bg-brand-accent-hover",children:y.jsx(_e,{name:"send",className:"w-5 h-5"})})]})})]}),y.jsx(We,{onClick:e,className:"absolute bottom-4 left-1/2 -translate-x-1/2",variant:"secondary",children:"Leave Stream"})]})})},OT=({track:t,onUpvote:e,onDownvote:n,onPreview:i,onViewComments:o,audioCtx:a,isNext:u=!1})=>{var S;if(!a)return null;const{currentTrack:d,isPlaying:f,isPreviewing:h}=a,_=(d==null?void 0:d.id)===t.id&&f&&h,E=t.isPremiere?"border-2 border-purple-500/50 shadow-lg shadow-purple-500/20":"";return y.jsxs("div",{className:`relative p-3 rounded-md flex items-center gap-4 transition-all ${u?"bg-gray-700/70":"bg-gray-700/40"} hover:bg-gray-600/50 ${E}`,children:[t.isPremiere&&y.jsxs("div",{className:"absolute -top-2.5 -right-2.5 bg-purple-600 text-white text-[10px] font-bold px-2 py-1 rounded-full flex items-center gap-1 transform rotate-[15deg] shadow-md z-10",children:[y.jsx(_e,{name:"crown",className:"w-3 h-3"}),"PREMIERE"]}),y.jsx("img",{src:t.coverArtUrl,alt:t.title,className:"w-12 h-12 rounded-md object-cover"}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("p",{className:"font-semibold text-white",children:t.title}),y.jsx("p",{className:"text-sm text-gray-400",children:t.artistName})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{onClick:()=>o(t),className:"p-3 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors flex items-center gap-1.5 text-xs","aria-label":`View comments for ${t.title}`,children:[y.jsx(_e,{name:"comment",className:"w-4 h-4"}),y.jsx("span",{children:((S=t.comments)==null?void 0:S.length)||0})]}),y.jsx("button",{onClick:()=>i(t),className:"p-3 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":`Preview ${t.title}`,children:y.jsx(_e,{name:_?"pause":"play",className:"w-5 h-5"})})]}),y.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[y.jsx("button",{onClick:()=>e(t.id),className:"p-2 bg-gray-600/50 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":"Upvote",children:y.jsx(_e,{name:"thumbs-up",className:"w-4 h-4"})}),y.jsx("span",{className:"font-bold text-white w-4 text-center",children:t.votes}),y.jsx("button",{onClick:()=>n(t.id),className:"p-2 bg-gray-600/50 rounded-full hover:bg-red-500 hover:text-white transition-colors","aria-label":"Downvote",children:y.jsx(_e,{name:"thumbs-down",className:"w-4 h-4"})})]})]})},WP=()=>{var ge;const[t,e]=D.useState([]),[n,i]=D.useState([]),[o,a]=D.useState([]),[u,d]=D.useState([]),[f,h]=D.useState(!0),[_,E]=D.useState(null),[S,C]=D.useState(null),M=D.useContext(Va);if(!M)throw new Error("ArtistHubPage must be used within an AudioProvider");const{playTrack:V,currentTrack:U,isPlaying:z,setOnTrackEnd:$,playPreview:j}=M,Y=D.useMemo(()=>[...t].sort((O,te)=>te.votes-O.votes),[t]),ie=D.useMemo(()=>Y.find(O=>O.id===(U==null?void 0:U.id))||Y[0],[Y,U]),oe=D.useMemo(()=>Y.find(O=>O.id!==(ie==null?void 0:ie.id)),[Y,ie]),P=D.useMemo(()=>Y.filter(O=>O.id!==(ie==null?void 0:ie.id)&&O.id!==(oe==null?void 0:oe.id)),[Y,ie,oe]),N=ui.useCallback(()=>{oe&&V(oe)},[oe,V]);D.useEffect(()=>($(()=>N),()=>$(null)),[$,N]),D.useEffect(()=>{(async()=>{h(!0);const[te,fe,xe]=await Promise.all([Rx(),Zd(),Nx()]);i(te),a(fe),d(xe);const ke=fe.slice(0,5).map((H,se)=>({...H,votes:Math.floor(Math.random()*5)+(5-se),addedBy:"DJ Gemini",isPremiere:!0}));e(ke),h(!1),!U&&ke.length>0&&V(ke.sort((H,se)=>se.votes-H.votes)[0])})()},[]);const R=O=>{e(te=>te.map(fe=>fe.id===O?{...fe,votes:fe.votes+1}:fe))},k=O=>{e(te=>te.map(xe=>xe.id===O?{...xe,votes:xe.votes-1}:xe).filter(xe=>xe.id===(U==null?void 0:U.id)||xe.votes>-3))},B=O=>{j(O)},q=()=>{if(o.length===0)return;const O=o.filter(te=>!t.some(fe=>fe.id===te.id));if(O.length>0){const fe={...O[Math.floor(Math.random()*O.length)],votes:1,addedBy:"Sub-Tropical",isPremiere:!0};e(xe=>[...xe,fe])}else alert("All tracks are already in the queue!")},L=()=>{E({id:"my_room",name:"Sub-Tropical's Studio Session",host:{id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""},viewers:1,isLive:!0})},je=async O=>{if(S)try{const te=await Eu(S.id,O),fe={...S,comments:[...S.comments||[],te]};C(fe),e(xe=>xe.map(ke=>ke.id===fe.id?fe:ke))}catch(te){console.error("Failed to add comment:",te)}};return f?y.jsx(xn,{}):_?y.jsx(aS,{room:_,onLeave:()=>E(null)}):y.jsxs("div",{children:[S&&y.jsx(Eo,{isOpen:!!S,onClose:()=>C(null),title:`Comments for ${S.title}`,comments:S.comments||[],onAddComment:je}),y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Artist Hub"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Collaborate on a live playlist and join live streams from artists."}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[y.jsxs("div",{className:"lg:col-span-2 bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Global Playlist"}),y.jsx(We,{onClick:q,children:"Add Your Track"})]}),y.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2",children:[ie&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-brand-accent mb-2 uppercase tracking-wider",children:"Playing Now"}),y.jsxs("div",{className:`relative bg-gray-700/50 rounded-lg p-4 flex gap-4 items-center shadow-lg ${ie.isPremiere?"ring-2 ring-purple-500 shadow-purple-500/20":"ring-2 ring-brand-accent"}`,children:[ie.isPremiere&&y.jsxs("div",{className:"absolute -top-3 -right-3 bg-purple-600 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 transform rotate-[15deg] shadow-lg z-10",children:[y.jsx(_e,{name:"crown",className:"w-4 h-4"}),"PREMIERE"]}),y.jsx("img",{src:ie.coverArtUrl,alt:ie.title,className:"w-24 h-24 rounded-md object-cover"}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("h4",{className:"text-2xl font-bold text-white",children:ie.title}),y.jsx("p",{className:"text-lg text-gray-300",children:ie.artistName}),y.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Added by ",ie.addedBy]}),y.jsxs(We,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>C(ie),children:[y.jsx(_e,{name:"comment",className:"w-4 h-4 mr-2"}),((ge=ie.comments)==null?void 0:ge.length)||0," Comments"]})]}),y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx("button",{onClick:()=>R(ie.id),className:"p-2 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":"Upvote",children:y.jsx(_e,{name:"thumbs-up",className:"w-5 h-5"})}),y.jsx("span",{className:"font-bold text-white text-xl",children:ie.votes}),y.jsx("button",{onClick:()=>k(ie.id),className:"p-2 bg-gray-600 rounded-full hover:bg-red-500 hover:text-white transition-colors","aria-label":"Downvote",children:y.jsx(_e,{name:"thumbs-down",className:"w-5 h-5"})})]})]})]}),oe&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-md font-semibold text-gray-400 mb-2 uppercase tracking-wider",children:"Playing Next"}),y.jsx(OT,{track:oe,onUpvote:R,onDownvote:k,onPreview:B,onViewComments:C,audioCtx:M,isNext:!0})]}),P.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-md font-semibold text-gray-400 mb-2 border-t border-gray-700 pt-4 uppercase tracking-wider",children:"Queue"}),y.jsx("div",{className:"space-y-3",children:P.map(O=>y.jsx(OT,{track:O,onUpvote:R,onDownvote:k,onPreview:B,onViewComments:C,audioCtx:M},O.id))})]})]})]}),y.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Live Rooms"}),y.jsxs(We,{onClick:L,variant:"secondary",children:[y.jsx(_e,{name:"video-camera",className:"w-5 h-5 mr-2"}),"Go Live"]})]}),y.jsx("div",{className:"space-y-4",children:n.map(O=>y.jsxs("div",{className:"bg-gray-700 p-3 rounded-md flex items-center gap-4",children:[y.jsx("img",{src:O.host.avatarUrl,alt:O.host.name,className:"w-12 h-12 rounded-full object-cover"}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("p",{className:"font-semibold text-white",children:O.name}),y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[y.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),y.jsxs("span",{children:[O.viewers," watching"]})]})]}),y.jsx(We,{onClick:()=>E(O),children:"Join"})]},O.id))})]}),y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Community Playlists"}),y.jsx("div",{className:"space-y-4",children:u.map(O=>y.jsxs("div",{className:"bg-gray-700 p-3 rounded-md flex items-center gap-4 transition-colors hover:bg-gray-600/50",children:[y.jsx("div",{className:"grid grid-cols-2 gap-0.5 w-16 h-16 flex-shrink-0 rounded-md overflow-hidden bg-gray-900",children:O.tracks.slice(0,4).map(te=>y.jsx("img",{src:te.coverArtUrl,alt:"",className:"w-full h-full object-cover"},te.id))}),y.jsxs("div",{className:"flex-grow overflow-hidden",children:[y.jsx("p",{className:"font-semibold text-white truncate",children:O.title}),y.jsxs("p",{className:"text-sm text-gray-400",children:["by ",O.curator.name]})]}),y.jsx(We,{onClick:()=>alert(`Now playing ${O.title}`),size:"sm",children:"Listen"})]},O.id))})]})]})]})]})},QP=({room:t,onJoin:e})=>y.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[y.jsxs("div",{className:"relative h-48 w-full bg-gray-900 flex items-center justify-center",children:[y.jsx("img",{src:t.host.avatarUrl,alt:t.host.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-700 transition-transform duration-300 group-hover:scale-110"}),y.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-md text-xs font-bold shadow-md",children:[y.jsx(_e,{name:"rss",className:"w-3 h-3 animate-pulse"}),"LIVE"]}),y.jsxs("div",{className:"absolute bottom-3 left-3 bg-black/50 text-white px-3 py-1 rounded-md text-xs",children:[t.viewers," watching"]})]}),y.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[y.jsx("h3",{className:"font-bold text-lg text-white truncate",children:t.name}),y.jsxs("p",{className:"text-sm text-gray-400",children:["Hosted by ",t.host.name]}),y.jsx("div",{className:"flex-grow mt-4",children:y.jsx(We,{onClick:()=>e(t),className:"w-full",children:"Join Stream"})})]})]}),XP=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0),[o,a]=D.useState(null);return D.useEffect(()=>{(async()=>{i(!0);const d=await Rx();e(d),i(!1)})()},[]),n?y.jsx(xn,{}):o?y.jsx(aS,{room:o,onLeave:()=>a(null)}):y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Live Streams"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Join live sessions from artists around the world. Watch performances, get feedback, or learn new skills."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(u=>y.jsx(QP,{room:u,onJoin:a},u.id))})]})},ZP=({tutorial:t})=>{var d;const[e,n]=D.useState(t),[i,o]=D.useState(!1),a=()=>{switch(e.difficulty){case"Beginner":return"bg-green-500/20 text-green-300 border-green-500/30";case"Intermediate":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"Advanced":return"bg-red-500/20 text-red-300 border-red-500/30"}},u=async f=>{try{const h=await cR(e.id,f);n(_=>({..._,comments:[..._.comments||[],h]}))}catch(h){console.error("Failed to add comment:",h)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:e.thumbnailUrl,alt:`${e.title} thumbnail`,className:"w-full h-40 object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:y.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:y.jsx(_e,{name:"play",className:"h-8 w-8 text-white"})})}),y.jsx("span",{className:"absolute bottom-2 right-2 text-xs font-semibold bg-gray-900/80 text-white px-2 py-1 rounded",children:e.duration}),y.jsx("span",{className:`absolute top-2 left-2 text-xs font-semibold px-2 py-1 rounded-full border ${a()}`,children:e.difficulty})]}),y.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[y.jsx("h3",{className:"font-bold text-md text-white truncate",children:e.title}),y.jsx(fn,{to:`/profile/${e.instructor.id}`,className:"text-sm text-gray-400 hover:text-white hover:underline",children:e.instructor.name}),y.jsx("div",{className:"flex-grow mt-2",children:y.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(f=>y.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:f},f))})}),y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:y.jsxs("button",{onClick:()=>o(!i),className:"w-full text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 py-1.5 rounded-md flex items-center justify-center gap-1.5 transition-colors",children:[y.jsx(_e,{name:"comment",className:"w-4 h-4"}),y.jsxs("span",{children:[((d=e.comments)==null?void 0:d.length)||0," Comments"]})]})})]}),i&&y.jsx("div",{className:"p-4 border-t border-gray-700",children:y.jsx(To,{comments:e.comments||[],onAddComment:u})})]})},ek=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0);return D.useEffect(()=>{(async()=>{i(!0);const a=await ZI();e(a),i(!1)})()},[]),n?y.jsx(xn,{}):y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Tutorials"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Learn new skills and production techniques from talented artists in the community."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(o=>y.jsx(ZP,{tutorial:o},o.id))})]})},tk=({masterclass:t})=>{const[e,n]=D.useState(t),i=async o=>{try{const a=await lR(e.id,o);n(u=>({...u,comments:[...u.comments||[],a]}))}catch(a){console.error("Failed to add comment:",a)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl transition-colors hover:bg-gray-700/50",children:[y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 p-8",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("img",{src:e.coverArtUrl,alt:e.title,className:"w-full md:w-64 h-auto rounded-lg object-cover shadow-lg"})}),y.jsxs("div",{className:"flex flex-col items-start text-center md:text-left",children:[y.jsx("h2",{className:"text-3xl font-bold text-white",children:e.title}),y.jsxs("div",{className:"flex items-center gap-2 mt-2 text-gray-400",children:[y.jsx("img",{src:e.instructor.avatarUrl,alt:e.instructor.name,className:"w-6 h-6 rounded-full"}),y.jsxs("span",{children:["with ",e.instructor.name]})]}),y.jsx("p",{className:"text-gray-300 my-4 max-w-lg",children:e.description}),y.jsx("div",{className:"flex items-center gap-6 text-gray-300 text-sm mb-6",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(_e,{name:"book-open",className:"w-5 h-5 text-brand-accent"}),y.jsxs("span",{children:[e.durationHours," hours of content"]})]})}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs(We,{children:["Enroll for $",e.price.toFixed(2)]}),y.jsx(We,{variant:"secondary",children:"Learn More"})]})]})]}),y.jsxs("div",{className:"p-8 border-t border-gray-700",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Community Discussion"}),y.jsx(To,{comments:e.comments||[],onAddComment:i})]})]})},nk=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0);return D.useEffect(()=>{(async()=>{i(!0);const a=await eR();e(a),i(!1)})()},[]),n?y.jsx(xn,{}):y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Masterclasses"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Take a deep dive with exclusive, in-depth courses from top-tier artists and producers."}),y.jsx("div",{className:"space-y-8",children:t.map(o=>y.jsx(tk,{masterclass:o},o.id))})]})},ik=({pack:t})=>{var d;const[e,n]=D.useState(t),[i,o]=D.useState(!1),a=e.price===0,u=async f=>{try{const h=await uR(e.id,f);n(_=>({..._,comments:[..._.comments||[],h]}))}catch(h){console.error("Failed to add comment:",h)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:e.coverArtUrl,alt:`${e.title} cover art`,className:"w-full h-48 object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:y.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:y.jsx(_e,{name:"play",className:"h-8 w-8 text-white"})})}),y.jsx("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full border ${a?"bg-green-500/20 text-green-300 border-green-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`,children:a?"Free":`$${e.price.toFixed(2)}`})]}),y.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[y.jsx("h3",{className:"font-bold text-lg text-white truncate",children:e.title}),y.jsxs(fn,{to:`/profile/${e.creator.id}`,className:"text-sm text-gray-400 hover:text-white hover:underline",children:["by ",e.creator.name]}),y.jsx("div",{className:"flex-grow mt-2",children:y.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(f=>y.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:f},f))})}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 space-y-3",children:[y.jsxs("button",{className:"w-full bg-brand-accent text-white px-4 py-2 rounded-full text-sm font-semibold hover:bg-brand-accent-hover transition-colors flex items-center justify-center gap-2",children:[y.jsx(_e,{name:"download",className:"w-4 h-4"}),y.jsx("span",{children:a?"Download":"Purchase"})]}),y.jsxs("button",{onClick:()=>o(!i),className:"w-full bg-gray-700 text-gray-300 px-4 py-2 rounded-full text-sm font-semibold hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",children:[y.jsx(_e,{name:"comment",className:"w-4 h-4"}),y.jsxs("span",{children:[((d=e.comments)==null?void 0:d.length)||0," Comments"]})]})]})]}),i&&y.jsx("div",{className:"p-4 border-t border-gray-700",children:y.jsx(To,{comments:e.comments||[],onAddComment:u})})]})},sk=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0);return D.useEffect(()=>{(async()=>{i(!0);const a=await tR();e(a),i(!1)})()},[]),n?y.jsx(xn,{}):y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sample Packs"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Find the perfect sound for your next track. High-quality, royalty-free samples from the community."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:t.map(o=>y.jsx(ik,{pack:o},o.id))})]})},rk=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!1),[o,a]=D.useState(null),[u,d]=D.useState(null),f=dx(),h=Y=>{try{const oe=new DOMParser().parseFromString(Y,"application/xml");if(oe.querySelector("parsererror"))throw new Error("Failed to parse XML file. Please ensure it's a valid Rekordbox XML.");const N=oe.querySelectorAll("COLLECTION > TRACK");if(N.length===0)throw new Error("No tracks found in the <COLLECTION> tag. Please check your XML file structure.");const R=Array.from(N).map(k=>({trackId:k.getAttribute("TrackID")||"",title:k.getAttribute("Name")||"N/A",artist:k.getAttribute("Artist")||"N/A",album:k.getAttribute("Album")||"N/A",genre:k.getAttribute("Genre")||"N/A",totalTime:k.getAttribute("TotalTime")||"N/A",dateAdded:k.getAttribute("DateAdded")||"N/A",comments:k.getAttribute("Comments")||"",playCount:k.getAttribute("PlayCount")||"0",key:k.getAttribute("Tonality")||"N/A"}));f("/profile/user_1",{state:{collection:R}})}catch(ie){a(ie.message||"An unknown error occurred during parsing."),e([])}finally{i(!1)}},_=D.useCallback(Y=>{if(Y.length===0)return;const ie=Y[0];if(ie.type!=="text/xml"){a("Invalid file type. Please upload a Rekordbox XML file.");return}i(!0),a(null),e([]),d(ie.name);const oe=new FileReader;oe.onabort=()=>{a("File reading was aborted."),i(!1)},oe.onerror=()=>{a("File reading has failed."),i(!1)},oe.onload=()=>{const P=oe.result;h(P)},oe.readAsText(ie)},[]),[E,S]=D.useState(!1),C=ui.useRef(null),M=Y=>{Y.preventDefault(),Y.stopPropagation(),S(!0)},V=Y=>{Y.preventDefault(),Y.stopPropagation(),S(!1)},U=Y=>{Y.preventDefault(),Y.stopPropagation()},z=Y=>{Y.preventDefault(),Y.stopPropagation(),S(!1),Y.dataTransfer.files&&Y.dataTransfer.files.length>0&&(_(Array.from(Y.dataTransfer.files)),Y.dataTransfer.clearData())},$=Y=>{Y.target.files&&Y.target.files.length>0&&_(Array.from(Y.target.files))},j=()=>{var Y;(Y=C.current)==null||Y.click()};return y.jsxs("div",{className:"max-w-7xl mx-auto text-white",children:[y.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Import Rekordbox Collection"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Upload your Rekordbox XML file to view and manage your music library."}),y.jsxs("div",{role:"button",tabIndex:0,"aria-label":"Upload Rekordbox XML file",className:`bg-gray-800 p-8 rounded-lg shadow-lg border-2 border-dashed ${E?"border-brand-accent":"border-gray-600"} transition-colors duration-300 text-center cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-accent`,onDragEnter:M,onDragLeave:V,onDragOver:U,onDrop:z,onClick:j,onKeyDown:Y=>(Y.key==="Enter"||Y.key===" ")&&j(),children:[y.jsx("input",{ref:C,type:"file",accept:".xml,text/xml",onChange:$,className:"hidden"}),y.jsx(_e,{name:"upload",className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),y.jsx("h2",{className:"text-xl font-semibold",children:n?"Processing...":u?`File: ${u}`:"Drop your Rekordbox XML here or click to browse"}),y.jsx("p",{className:"text-gray-500 mt-1",children:"Export your collection from Rekordbox as an XML file."})]}),n&&y.jsx(xn,{}),o&&y.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative my-6",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Error:"}),y.jsxs("span",{className:"block sm:inline",children:[" ",o]})]}),t.length>0&&!n&&y.jsxs("div",{className:"mt-8 text-center",children:[y.jsxs("h2",{className:"text-xl font-semibold text-green-400",children:["Successfully processed ",t.length," tracks."]}),y.jsx("p",{className:"text-gray-400",children:"Redirecting you to your profile..."})]})]})},ok=({label:t})=>y.jsxs(fn,{to:`/labels/${t.id}`,className:"group block bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:scale-105",children:[y.jsxs("div",{className:"relative h-40",children:[y.jsx("img",{src:t.bannerUrl,alt:`${t.name} banner`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-800 via-gray-800/50 to-transparent"})]}),y.jsxs("div",{className:"p-4 -mt-16 relative flex items-center space-x-4",children:[y.jsx("img",{src:t.logoUrl,alt:`${t.name} logo`,className:"w-20 h-20 rounded-full object-cover border-4 border-gray-800 group-hover:border-gray-700 transition-colors"}),y.jsx("div",{children:y.jsx("h3",{className:"font-bold text-xl text-white",children:t.name})})]})]}),ak=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(!0);return D.useEffect(()=>{(async()=>{i(!0);const a=await nR();e(a),i(!1)})()},[]),n?y.jsx(xn,{}):y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Record Labels"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Discover the labels shaping the sound of the community."}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(o=>y.jsx(ok,{label:o},o.id))})]})},lk=({event:t})=>{const e=new Date(t.date),n=e.toLocaleString("default",{month:"short"}).toUpperCase(),i=e.getDate();return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 flex flex-col sm:flex-row items-start gap-6 transition-colors hover:bg-gray-700/50",children:[y.jsxs("div",{className:"flex-shrink-0 text-center bg-gray-700 rounded-md p-3 w-full sm:w-20",children:[y.jsx("p",{className:"text-sm font-bold text-brand-accent",children:n}),y.jsx("p",{className:"text-3xl font-bold text-white",children:i})]}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:t.title}),y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mt-1",children:[y.jsx(_e,{name:"map-pin",className:"w-4 h-4"}),y.jsx("span",{children:t.location})]}),y.jsx("p",{className:"text-gray-300 mt-2",children:t.description})]}),t.ticketUrl&&y.jsx("div",{className:"self-center sm:self-auto",children:y.jsx("a",{href:t.ticketUrl,target:"_blank",rel:"noopener noreferrer",children:y.jsx(We,{children:"Buy Tickets"})})})]})},uk=({track:t,onViewComments:e})=>{var f;const n=D.useContext(Va);if(!n)throw new Error("FeaturedReleaseCard must be used within an AudioProvider");const{playTrack:i,currentTrack:o,isPlaying:a}=n,u=(o==null?void 0:o.id)===t.id&&a,d=()=>{i(t)};return y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col md:flex-row",children:[y.jsx("div",{className:"md:w-1/3 flex-shrink-0",children:y.jsx("img",{src:t.coverArtUrl,alt:t.title,className:"w-full h-full object-cover"})}),y.jsxs("div",{className:"p-8 flex flex-col justify-center",children:[y.jsx("h3",{className:"text-3xl lg:text-4xl font-bold text-white",children:t.title}),y.jsxs("p",{className:"text-xl text-gray-400 mt-1 mb-4",children:["by ",t.artistName]}),y.jsx("p",{className:"text-gray-300 max-w-prose mb-6",children:t.description}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs(We,{onClick:d,size:"md",children:[y.jsx(_e,{name:u?"pause":"play",className:"w-5 h-5 mr-2"}),u?"Pause":"Play"]}),y.jsx(We,{variant:"secondary",children:"View Release"}),e&&y.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[y.jsx(_e,{name:"comment",className:"w-5 h-5"}),y.jsx("span",{className:"font-semibold",children:((f=t.comments)==null?void 0:f.length)||0})]})]})]})]})},ck=({artist:t,tracks:e,onViewMore:n})=>y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col md:flex-row items-center p-6 gap-6",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-700"})}),y.jsxs("div",{className:"flex-grow w-full",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-2",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-2xl font-bold text-white",children:t.name}),y.jsx("p",{className:"text-gray-400 mt-1 max-w-md line-clamp-2",children:t.bio})]}),y.jsxs("div",{className:"flex gap-2 flex-shrink-0 mt-2 sm:mt-0",children:[y.jsx(We,{onClick:n,variant:"secondary",size:"sm",children:"View More"}),y.jsx(fn,{to:`/profile/${t.id}`,children:y.jsx(We,{variant:"secondary",size:"sm",children:"Profile"})})]})]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[y.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Latest on this label:"}),e.length>0?y.jsx("div",{className:"space-y-2",children:e.map(i=>y.jsxs("div",{className:"flex items-center justify-between bg-gray-700/50 p-2 rounded-md",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(_e,{name:"music-note",className:"w-4 h-4 text-brand-accent"}),y.jsx("span",{className:"text-white text-sm",children:i.title})]}),y.jsx("span",{className:"text-xs text-gray-400",children:i.category})]},i.id))}):y.jsx("p",{className:"text-sm text-gray-500",children:"No tracks found on this label."})]})]})]}),dk=({artist:t,onClose:e})=>{var n;return y.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:e,children:y.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col overflow-hidden relative",onClick:i=>i.stopPropagation(),children:[y.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-20 bg-gray-900/50 p-2 rounded-full",children:y.jsx(_e,{name:"x",className:"w-6 h-6"})}),y.jsxs("div",{className:"relative h-64 w-full flex-shrink-0",children:[y.jsx("img",{src:((n=t.gallery)==null?void 0:n[0])||t.avatarUrl,alt:`${t.name}`,className:"w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-800 to-transparent flex items-end p-8",children:y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-800"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-300",children:"In Conversation with"}),y.jsx("h1",{className:"text-4xl font-bold text-white",children:t.name})]})]})})]}),y.jsx("div",{className:"flex-grow overflow-y-auto p-8",children:y.jsxs("div",{className:"prose prose-invert prose-lg max-w-none",children:[y.jsx("p",{className:"lead text-xl text-gray-300",children:t.bio}),t.interview&&t.interview.length>0&&y.jsx("div",{className:"mt-12",children:t.interview.map((i,o)=>y.jsxs("div",{className:"mb-8",children:[y.jsx("h3",{className:"text-brand-accent font-semibold",children:i.question}),y.jsx("p",{children:i.answer})]},o))}),t.gallery&&t.gallery.length>1&&y.jsxs("div",{className:"mt-12",children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Gallery"}),y.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:t.gallery.map((i,o)=>y.jsx("img",{src:i,alt:`Artist gallery image ${o+1}`,className:"w-full h-40 object-cover rounded-lg shadow-md"},o))})]})]})})]})})},fk=({opportunity:t,labelId:e})=>{var h,_;const[n,i]=D.useState(t),[o,a]=D.useState(!1),d={Artist:{icon:"music-note",color:"text-blue-400"},Vocalist:{icon:"microphone",color:"text-purple-400"},Designer:{icon:"palette",color:"text-yellow-400"},Collaborator:{icon:"users",color:"text-green-400"}}[n.type]||{icon:"sparkles",color:"text-gray-400"},f=async E=>{try{const S=await mR(e,n.id,E);i(C=>({...C,comments:[...C.comments||[],S]}))}catch(S){console.error("Failed to add comment:",S)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 transition-colors hover:bg-gray-700/50",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[y.jsx("div",{className:"flex-shrink-0 bg-gray-700 p-4 rounded-full",children:y.jsx(_e,{name:d.icon,className:`w-8 h-8 ${d.color}`})}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("span",{className:`text-sm font-bold uppercase tracking-wider ${d.color}`,children:n.type}),y.jsx("h3",{className:"text-xl font-bold text-white mt-1",children:n.title}),y.jsx("p",{className:"text-gray-300 mt-2",children:n.description})]}),y.jsx("div",{className:"self-center sm:self-auto flex-shrink-0",children:y.jsx(We,{onClick:()=>alert("Application form coming soon!"),children:"Apply Now"})})]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[y.jsxs("button",{onClick:()=>a(E=>!E),className:"text-sm font-semibold text-gray-400 hover:text-white flex items-center gap-2",children:[y.jsx(_e,{name:"comment",className:"w-4 h-4"}),y.jsxs("span",{children:[o?"Hide":"View"," ",((h=n.comments)==null?void 0:h.length)||0," Comment",((_=n.comments)==null?void 0:_.length)!==1&&"s"]})]}),o&&y.jsx("div",{className:"mt-4",children:y.jsx(To,{comments:n.comments||[],onAddComment:f})})]})]})},FT=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(""),[o,a]=D.useState([]),u=D.useRef(null),d={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};D.useEffect(()=>{Cx().then(a)},[]),D.useEffect(()=>{if(o.length===0)return;const h=Ix(),_=o.filter(S=>S.id!==d.id);_.length>0&&e([{id:`msg_label_${Date.now()}`,user:_[0],text:"This label is legendary!",timestamp:new Date(Date.now()-5e3).toISOString()}]);const E=setInterval(()=>{if(document.hidden)return;const S=_[Math.floor(Math.random()*_.length)],C=h[Math.floor(Math.random()*h.length)],M={id:`msg_label_${Date.now()}`,user:S,text:C,timestamp:new Date().toISOString()};e(V=>[...V,M].slice(-20))},1e4);return()=>clearInterval(E)},[o]),D.useEffect(()=>{var h;(h=u.current)==null||h.scrollIntoView({behavior:"smooth"})},[t]);const f=h=>{if(h.preventDefault(),!n.trim())return;const _={id:`msg_label_${Date.now()}`,user:d,text:n,timestamp:new Date().toISOString()};e(E=>[...E,_]),i("")};return y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[400px]",children:[y.jsx("h3",{className:"text-xl font-bold text-white p-4 border-b border-gray-700",children:"Community Chat"}),y.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:y.jsxs("div",{className:"space-y-4",children:[t.map(h=>y.jsxs("div",{className:`flex items-start gap-3 ${h.user.id===d.id?"flex-row-reverse":""}`,children:[y.jsx("img",{src:h.user.avatarUrl,alt:h.user.name,className:"w-8 h-8 rounded-full object-cover"}),y.jsxs("div",{className:`p-3 rounded-lg max-w-sm shadow ${h.user.id===d.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[y.jsx("p",{className:"font-bold text-sm mb-1",children:h.user.name}),y.jsx("p",{className:"text-sm",children:h.text})]})]},h.id)),y.jsx("div",{ref:u})]})}),y.jsx("div",{className:"p-4 bg-gray-700/50 border-t border-gray-700",children:y.jsxs("form",{onSubmit:f,className:"flex gap-3 items-center",children:[y.jsx("input",{type:"text",value:n,onChange:h=>i(h.target.value),placeholder:"Join the conversation...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),y.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-2 hover:bg-brand-accent-hover disabled:bg-gray-500 transition-colors",disabled:!n.trim(),children:y.jsx(_e,{name:"send",className:"w-5 h-5"})})]})})]})},hk=()=>{const[t,e]=D.useState(""),[n,i]=D.useState(!1),[o,a]=D.useState(!1),u=d=>{d.preventDefault(),t&&(i(!0),setTimeout(()=>{i(!1),a(!0)},1e3))};return o?y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 text-center",children:[y.jsx("div",{className:"bg-green-500/20 text-green-300 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:y.jsx(_e,{name:"thumbs-up",className:"w-8 h-8"})}),y.jsx("h3",{className:"text-xl font-bold text-white",children:"You're Subscribed!"}),y.jsx("p",{className:"text-gray-400 mt-2",children:"Thanks for joining our mailing list. Keep an eye on your inbox for exclusive content."})]}):y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Join the Mailing List"}),y.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"Get exclusive downloads, event news, and special offers directly in your inbox."}),y.jsxs("form",{onSubmit:u,className:"space-y-3",children:[y.jsx("input",{type:"email",value:t,onChange:d=>e(d.target.value),placeholder:"Enter your email",required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white"}),y.jsx(We,{type:"submit",isLoading:n,className:"w-full",children:"Subscribe"})]})]})},mk=()=>{var je;const{labelId:t}=fx(),[e,n]=D.useState(null),[i,o]=D.useState([]),[a,u]=D.useState([]),[d,f]=D.useState([]),[h,_]=D.useState([]),[E,S]=D.useState(!0),[C,M]=D.useState("releases"),[V,U]=D.useState(!1),[z,$]=D.useState(null),[j,Y]=D.useState(null),[ie,oe]=D.useState(null);D.useEffect(()=>{(async()=>{if(t){S(!0);try{const[O,te,fe,xe,ke]=await Promise.all([iR(t),YI(t),sR(t),$I(t),rR(t)]);n(O||null),o(te),u(fe),f(xe),_(ke),O!=null&&O.theme&&$(O.theme)}catch(O){console.error("Failed to fetch label data:",O)}finally{S(!1)}}})()},[t]);const P=async()=>{if(e){U(!0);try{const ge=await HP(e.name,e.bio);$(ge)}catch(ge){console.error("AI theme generation failed:",ge),alert("Sorry, we couldn't generate a new theme right now.")}finally{U(!1)}}},N=async ge=>{if(ie)try{const O=await Eu(ie.id,ge),te={...ie,comments:[...ie.comments||[],O]};oe(te),o(fe=>fe.map(xe=>xe.id===te.id?te:xe))}catch(O){console.error("Failed to add comment to track:",O)}},R=async ge=>{if(e)try{const O=await hR(e.id,ge);n(te=>te?{...te,comments:[...te.comments||[],O]}:null)}catch(O){console.error("Failed to add comment to label:",O)}},k=e!=null&&e.featuredReleaseId?i.find(ge=>ge.id===e.featuredReleaseId):null,B=e!=null&&e.featuredReleaseId?i.filter(ge=>ge.id!==e.featuredReleaseId):i,q=()=>{var ge;switch(C){case"releases":return y.jsxs("div",{children:[k&&y.jsxs("div",{className:"mb-12",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-wider",children:"Featured Release"}),y.jsx(uk,{track:k,onViewComments:oe})]}),y.jsx("h2",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-wider",children:"All Releases"}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:B.map(O=>y.jsx(Wd,{track:O,onViewComments:oe},O.id))})]});case"artists":return y.jsx("div",{className:"space-y-8",children:a.map(O=>y.jsx(ck,{artist:O,tracks:i.filter(te=>te.artistId===O.id).slice(0,3),onViewMore:()=>Y(O)},O.id))});case"about":return y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[y.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[y.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Our Story"}),y.jsx("p",{className:"text-gray-300 whitespace-pre-line leading-relaxed",children:e==null?void 0:e.bio})]}),y.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Community Feedback"}),y.jsx(To,{comments:(e==null?void 0:e.comments)||[],onAddComment:R})]}),(e==null?void 0:e.eventPhotos)&&e.eventPhotos.length>0&&y.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Event Photos"}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:e.eventPhotos.map((O,te)=>y.jsx("img",{src:O,alt:`Label event photo ${te+1}`,className:"w-full h-40 object-cover rounded-md shadow-lg"},te))})]})]}),y.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[y.jsx(hk,{}),(e==null?void 0:e.storeLinks)&&y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Stores"}),y.jsx("div",{className:"space-y-3",children:e.storeLinks.map(O=>y.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 p-4 rounded-lg flex items-center gap-4 hover:bg-gray-600 transition-colors",children:[y.jsx(_e,{name:O.icon,className:"w-6 h-6 text-brand-accent"}),y.jsx("span",{className:"font-bold text-white",children:O.name})]},O.name))})]})]})]});case"posts":return y.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:d.map(O=>y.jsx(Dp,{post:O},O.id))});case"events":return y.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:h.map(O=>y.jsx(lk,{event:O},O.id))});case"opportunities":return y.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:(ge=e==null?void 0:e.opportunities)==null?void 0:ge.map(O=>y.jsx(fk,{opportunity:O,labelId:e.id},O.id))});case"chat":return y.jsx("div",{className:"max-w-4xl mx-auto",children:y.jsx(FT,{})});default:return null}},L=({tab:ge,label:O,count:te})=>y.jsxs("button",{onClick:()=>M(ge),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors border-b-2 whitespace-nowrap ${C===ge?"text-white border-brand-accent bg-gray-700/50":"text-gray-400 border-transparent hover:text-white hover:border-gray-500"}`,children:[O,typeof te<"u"&&te>0&&y.jsx("span",{className:"text-xs bg-gray-600 rounded-full px-2 py-0.5 ml-1",children:te})]});return E?y.jsx(xn,{}):e?y.jsxs("div",{children:[ie&&y.jsx(Eo,{isOpen:!!ie,onClose:()=>oe(null),title:`Comments for ${ie.title}`,comments:ie.comments||[],onAddComment:N}),j&&y.jsx(dk,{artist:j,onClose:()=>Y(null)}),y.jsxs("div",{className:"relative h-48 md:h-64 bg-gray-800 rounded-lg overflow-hidden mb-[-80px]",children:[y.jsx("img",{src:(z==null?void 0:z.bannerUrl)||e.bannerUrl,alt:`${e.name} banner`,className:"w-full h-full object-cover opacity-40 transition-all duration-500"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"})]}),y.jsx("div",{className:"relative px-8",children:y.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6",children:[y.jsx("img",{src:e.logoUrl,alt:`${e.name} logo`,className:"w-40 h-40 rounded-full object-cover border-4 border-gray-900 flex-shrink-0"}),y.jsx("div",{className:"flex-grow text-center md:text-left",children:y.jsx("h1",{className:"text-4xl font-bold text-white",children:e.name})}),y.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[y.jsx(We,{onClick:()=>alert("Contact form coming soon!"),variant:"secondary",children:"Contact"}),y.jsx(We,{onClick:P,isLoading:V,variant:"secondary",children:"Generate Theme"}),y.jsx(We,{children:"Follow Label"})]})]})}),y.jsx("div",{className:"my-8 max-w-5xl mx-auto",children:y.jsx(FT,{})}),y.jsx("div",{className:"mt-8 border-b border-gray-700 mb-6",children:y.jsxs("nav",{className:"-mb-px flex space-x-4 overflow-x-auto",children:[y.jsx(L,{tab:"releases",label:"Releases",count:i.length}),y.jsx(L,{tab:"artists",label:"Artists",count:a.length}),y.jsx(L,{tab:"about",label:"About"}),y.jsx(L,{tab:"events",label:"Events",count:h.length}),y.jsx(L,{tab:"opportunities",label:"Opportunities",count:(je=e.opportunities)==null?void 0:je.length}),y.jsx(L,{tab:"chat",label:"Live Chat"}),y.jsx(L,{tab:"posts",label:"Posts",count:d.length})]})}),y.jsx("div",{children:q()})]}):y.jsx("div",{className:"text-center text-white",children:"Label not found."})},pk=({onPostCreated:t})=>{const[e,n]=D.useState(!1),[i,o]=D.useState(""),[a,u]=D.useState(""),[d,f]=D.useState("followers"),h=async _=>{if(_.preventDefault(),!i.trim()||!a.trim())return;n(!0);const E={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100"};try{const S=await Mx({title:i,content:a,audience:d,...E});t(S),o(""),u(""),f("followers")}catch(S){console.error("Failed to add post:",S)}finally{n(!1)}};return y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-2xl h-full",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Make a Broadcast"}),y.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Create a post to share with your audience. This will appear in their community feed."}),y.jsxs("form",{onSubmit:h,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"broadcast-title",className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),y.jsx("input",{id:"broadcast-title",type:"text",placeholder:"e.g. New Track Out Sunday!",value:i,onChange:_=>o(_.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"broadcast-content",className:"block text-sm font-medium text-gray-400 mb-1",children:"Message"}),y.jsx("textarea",{id:"broadcast-content",placeholder:"Share some details with your fans...",value:a,onChange:_=>u(_.target.value),required:!0,rows:5,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"broadcast-audience",className:"block text-sm font-medium text-gray-400 mb-1",children:"Audience"}),y.jsxs("select",{id:"broadcast-audience",value:d,onChange:_=>f(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white",children:[y.jsx("option",{value:"followers",children:"All Followers"}),y.jsx("option",{value:"subscribers",children:"Paid Subscribers"}),y.jsx("option",{value:"public",children:"Public"})]})]}),y.jsx("div",{className:"flex justify-end pt-2",children:y.jsxs(We,{type:"submit",isLoading:e,children:[y.jsx(_e,{name:"send",className:"w-4 h-4 mr-2"}),"Broadcast Post"]})})]})]})},gk=()=>{const[t,e]=D.useState([]),[n,i]=D.useState(null),[o,a]=D.useState(!0),[u,d]=D.useState(""),f=D.useRef(null),h="user_1";D.useEffect(()=>{(async()=>{a(!0);const V=await oR();e(V),V.length>0&&i(V[0]),a(!1)})()},[]),D.useEffect(()=>{var M;(M=f.current)==null||M.scrollIntoView({behavior:"smooth"})},[n,n==null?void 0:n.messages.length]);const _=M=>{if(M.preventDefault(),!u.trim()||!n)return;const V={id:`msg_${Date.now()}`,senderId:h,text:u,timestamp:new Date().toISOString()},U={...n,messages:[...n.messages,V]};i(U),e(z=>z.map($=>$.id===U.id?U:$)),d("")},E=M=>{alert(`Broadcast sent to ${M.audience}! Title: ${M.title}`)},S=M=>{const V=new Date(M),U=Math.floor((new Date().getTime()-V.getTime())/1e3);if(U<60)return"Just now";let z=U/31536e3;return z>1?Math.floor(z)+"y":(z=U/2592e3,z>1?Math.floor(z)+"mo":(z=U/86400,z>1?Math.floor(z)+"d":(z=U/3600,z>1?Math.floor(z)+"h":(z=U/60,z>1?Math.floor(z)+"m":"Just now"))))};if(o)return y.jsx(xn,{});const C=n==null?void 0:n.participants.find(M=>M.id!==h);return y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[y.jsx("div",{className:"lg:col-span-2",children:y.jsxs("div",{className:"flex h-[calc(100vh-200px)] bg-gray-800 rounded-lg shadow-2xl overflow-hidden",children:[y.jsxs("aside",{className:"w-1/3 xl:w-1/4 bg-gray-800 border-r border-gray-700 flex flex-col",children:[y.jsx("div",{className:"p-4 border-b border-gray-700",children:y.jsx("h1",{className:"text-xl font-bold text-white",children:"Direct Messages"})}),y.jsx("div",{className:"flex-grow overflow-y-auto",children:t.map(M=>{const V=M.participants.find($=>$.id!==h),U=M.messages[M.messages.length-1],z=(n==null?void 0:n.id)===M.id;return y.jsxs("button",{onClick:()=>i(M),className:`w-full text-left p-4 flex items-center gap-4 transition-colors ${z?"bg-gray-700":"hover:bg-gray-700/50"}`,children:[y.jsxs("div",{className:"relative flex-shrink-0",children:[y.jsx("img",{src:V.avatarUrl,alt:V.name,className:"w-12 h-12 rounded-full object-cover"}),M.unreadCount>0&&y.jsx("span",{className:"absolute top-0 right-0 block h-3 w-3 rounded-full bg-brand-accent ring-2 ring-gray-800"})]}),y.jsxs("div",{className:"flex-grow overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-baseline",children:[y.jsx("h3",{className:`font-semibold truncate ${M.unreadCount>0?"text-white":"text-gray-300"}`,children:V.name}),y.jsx("p",{className:"text-xs text-gray-500",children:S(U.timestamp)})]}),y.jsxs("p",{className:`text-sm truncate ${M.unreadCount>0?"text-gray-300":"text-gray-400"}`,children:[U.senderId===h&&"You: ",U.text]})]})]},M.id)})})]}),y.jsx("main",{className:"flex-1 flex flex-col",children:!n||!C?y.jsx("div",{className:"flex-grow flex items-center justify-center text-gray-500",children:y.jsx("p",{children:"Select a conversation to start chatting."})}):y.jsxs(y.Fragment,{children:[y.jsxs("header",{className:"p-4 border-b border-gray-700 flex items-center gap-4 bg-gray-800 z-10",children:[y.jsx("img",{src:C.avatarUrl,alt:C.name,className:"w-10 h-10 rounded-full object-cover"}),y.jsx("h2",{className:"text-lg font-bold text-white",children:C.name})]}),y.jsx("div",{className:"flex-grow p-6 overflow-y-auto",children:y.jsxs("div",{className:"space-y-6",children:[n.messages.map(M=>y.jsxs("div",{className:`flex items-end gap-3 ${M.senderId===h?"flex-row-reverse":""}`,children:[M.senderId!==h&&y.jsx("img",{src:C.avatarUrl,alt:C.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),y.jsx("div",{className:`p-3 rounded-2xl max-w-lg shadow ${M.senderId===h?"bg-brand-accent text-white rounded-br-none":"bg-gray-700 text-gray-300 rounded-bl-none"}`,children:y.jsx("p",{className:"text-sm",children:M.text})})]},M.id)),y.jsx("div",{ref:f})]})}),y.jsx("footer",{className:"p-4 bg-gray-800 border-t border-gray-700",children:y.jsxs("form",{onSubmit:_,className:"flex items-center gap-3",children:[y.jsx("input",{type:"text",value:u,onChange:M=>d(M.target.value),placeholder:`Message ${C.name}...`,className:"flex-grow bg-gray-700 border-gray-600 rounded-full py-2 px-4 text-sm text-white focus:ring-brand-accent focus:border-brand-accent"}),y.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-3 hover:bg-brand-accent-hover disabled:bg-gray-600",disabled:!u.trim(),children:y.jsx(_e,{name:"send",className:"w-5 h-5"})})]})})]})})]})}),y.jsx("div",{className:"lg:col-span-1",children:y.jsx(pk,{onPostCreated:E})})]})};var BT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},yk=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],u=t[n++],d=t[n++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},uS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const a=t[o],u=o+1<t.length,d=u?t[o+1]:0,f=o+2<t.length,h=f?t[o+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|h>>6,C=h&63;f||(C=64,u||(S=64)),i.push(n[_],n[E],n[S],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],d=o<t.length?n[t.charAt(o)]:0;++o;const h=o<t.length?n[t.charAt(o)]:64;++o;const E=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||d==null||h==null||E==null)throw new vk;const S=a<<2|d>>4;if(i.push(S),h!==64){const C=d<<4&240|h>>2;if(i.push(C),E!==64){const M=h<<6&192|E;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _k=function(t){const e=lS(t);return uS.encodeByteArray(e,!0)},Nd=function(t){return _k(t).replace(/\./g,"")},cS=function(t){try{return uS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=()=>Tk().__FIREBASE_DEFAULTS__,xk=()=>{if(typeof process>"u"||typeof BT>"u")return;const t=BT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Sk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cS(t[1]);return e&&JSON.parse(e)},rf=()=>{try{return Ek()||xk()||Sk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dS=t=>{var e,n;return(n=(e=rf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fS=t=>{const e=dS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},hS=()=>{var t;return(t=rf())===null||t===void 0?void 0:t.config},mS=t=>{var e;return(e=rf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Nd(JSON.stringify(n)),Nd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ak(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function Ck(){var t;const e=(t=rf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ik(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Rk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nk(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Mk(){return!Ck()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dk(){try{return typeof indexedDB=="object"}catch{return!1}}function Pk(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="FirebaseError";class Oi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=kk,Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?Uk(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Oi(o,d,i)}}function Uk(t,e){return t.replace(Lk,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Lk=/\{\$([^}]+)}/g;function Vk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Md(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const a=t[o],u=e[o];if(qT(a)&&qT(u)){if(!Md(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function qT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ok(t,e){const n=new Fk(t,e);return n.subscribe.bind(n)}class Fk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Bk(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Um),o.error===void 0&&(o.error=Um),o.complete===void 0&&(o.complete=Um);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t){return t&&t._delegate?t._delegate:t}class br{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new wk;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gk(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Hk(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Hk(t){return t===lo?void 0:t}function Gk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const jk={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},Jk=Ge.INFO,Yk={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},$k=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=Yk[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qp{constructor(e){this.name=e,this._logLevel=Jk,this._logHandler=$k,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const Kk=(t,e)=>e.some(n=>t instanceof n);let HT,GT;function Wk(){return HT||(HT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qk(){return GT||(GT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gS=new WeakMap,sp=new WeakMap,yS=new WeakMap,Lm=new WeakMap,Hp=new WeakMap;function Xk(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(wr(t.result)),o()},u=()=>{i(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&gS.set(n,t)}).catch(()=>{}),Hp.set(e,t),e}function Zk(t){if(sp.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),o()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});sp.set(t,e)}let rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eU(t){rp=t(rp)}function tU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Vm(this),e,...n);return yS.set(i,e.sort?e.sort():[e]),wr(i)}:Qk().includes(t)?function(...e){return t.apply(Vm(this),e),wr(gS.get(this))}:function(...e){return wr(t.apply(Vm(this),e))}}function nU(t){return typeof t=="function"?tU(t):(t instanceof IDBTransaction&&Zk(t),Kk(t,Wk())?new Proxy(t,rp):t)}function wr(t){if(t instanceof IDBRequest)return Xk(t);if(Lm.has(t))return Lm.get(t);const e=nU(t);return e!==t&&(Lm.set(t,e),Hp.set(e,t)),e}const Vm=t=>Hp.get(t);function iU(t,e,{blocked:n,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(t,e),d=wr(u);return i&&u.addEventListener("upgradeneeded",f=>{i(wr(u.result),f.oldVersion,f.newVersion,wr(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const sU=["get","getKey","getAll","getAllKeys","count"],rU=["put","add","delete","clear"],Om=new Map;function zT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Om.get(e))return Om.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=rU.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||sU.includes(n)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let h=f.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),o&&f.done]))[0]};return Om.set(e,a),a}eU(t=>({...t,get:(e,n,i)=>zT(e,n)||t.get(e,n,i),has:(e,n)=>!!zT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aU(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function aU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const op="@firebase/app",jT="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new qp("@firebase/app"),lU="@firebase/app-compat",uU="@firebase/analytics-compat",cU="@firebase/analytics",dU="@firebase/app-check-compat",fU="@firebase/app-check",hU="@firebase/auth",mU="@firebase/auth-compat",pU="@firebase/database",gU="@firebase/data-connect",yU="@firebase/database-compat",vU="@firebase/functions",_U="@firebase/functions-compat",TU="@firebase/installations",EU="@firebase/installations-compat",xU="@firebase/messaging",SU="@firebase/messaging-compat",wU="@firebase/performance",AU="@firebase/performance-compat",CU="@firebase/remote-config",bU="@firebase/remote-config-compat",IU="@firebase/storage",RU="@firebase/storage-compat",NU="@firebase/firestore",MU="@firebase/vertexai-preview",DU="@firebase/firestore-compat",PU="firebase",kU="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="[DEFAULT]",UU={[op]:"fire-core",[lU]:"fire-core-compat",[cU]:"fire-analytics",[uU]:"fire-analytics-compat",[fU]:"fire-app-check",[dU]:"fire-app-check-compat",[hU]:"fire-auth",[mU]:"fire-auth-compat",[pU]:"fire-rtdb",[gU]:"fire-data-connect",[yU]:"fire-rtdb-compat",[vU]:"fire-fn",[_U]:"fire-fn-compat",[TU]:"fire-iid",[EU]:"fire-iid-compat",[xU]:"fire-fcm",[SU]:"fire-fcm-compat",[wU]:"fire-perf",[AU]:"fire-perf-compat",[CU]:"fire-rc",[bU]:"fire-rc-compat",[IU]:"fire-gcs",[RU]:"fire-gcs-compat",[NU]:"fire-fst",[DU]:"fire-fst-compat",[MU]:"fire-vertex","fire-js":"fire-js",[PU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new Map,LU=new Map,lp=new Map;function JT(t,e){try{t.container.addComponent(e)}catch(n){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mo(t){const e=t.name;if(lp.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;lp.set(e,t);for(const n of Dd.values())JT(n,t);for(const n of LU.values())JT(n,t);return!0}function of(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new xu("app","Firebase",VU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=kU;function vS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ap,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Ar.create("bad-app-name",{appName:String(o)});if(n||(n=hS()),!n)throw Ar.create("no-options");const a=Dd.get(o);if(a){if(Md(n,a.options)&&Md(i,a.config))return a;throw Ar.create("duplicate-app",{appName:o})}const u=new zk(o);for(const f of lp.values())u.addComponent(f);const d=new OU(n,i,u);return Dd.set(o,d),d}function Gp(t=ap){const e=Dd.get(t);if(!e&&t===ap&&hS())return vS();if(!e)throw Ar.create("no-app",{appName:t});return e}function Ii(t,e,n){var i;let o=(i=UU[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(d.join(" "));return}mo(new br(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="firebase-heartbeat-database",BU=1,au="firebase-heartbeat-store";let Fm=null;function _S(){return Fm||(Fm=iU(FU,BU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(au)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),Fm}async function qU(t){try{const n=(await _S()).transaction(au),i=await n.objectStore(au).get(TS(t));return await n.done,i}catch(e){if(e instanceof Oi)Ts.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ts.warn(n.message)}}}async function YT(t,e){try{const i=(await _S()).transaction(au,"readwrite");await i.objectStore(au).put(e,TS(t)),await i.done}catch(n){if(n instanceof Oi)Ts.warn(n.message);else{const i=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ts.warn(i.message)}}}function TS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=1024,GU=720*60*60*1e3;class zU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JU(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=$T();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=GU}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ts.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$T(),{heartbeatsToSend:i,unsentEntries:o}=jU(this._heartbeatsCache.heartbeats),a=Nd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ts.warn(n),""}}}function $T(){return new Date().toISOString().substring(0,10)}function jU(t,e=HU){const n=[];let i=t.slice();for(const o of t){const a=n.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),KT(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),KT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class JU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dk()?Pk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return YT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return YT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function KT(t){return Nd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(t){mo(new br("platform-logger",e=>new oU(e),"PRIVATE")),mo(new br("heartbeat",e=>new zU(e),"PRIVATE")),Ii(op,jT,t),Ii(op,jT,"esm2017"),Ii("fire-js","")}YU("");var $U="firebase",KU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii($U,KU,"app");function zp(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function ES(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WU=ES,xS=new xu("auth","Firebase",ES());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new qp("@firebase/auth");function QU(t,...e){Pd.logLevel<=Ge.WARN&&Pd.warn(`Auth (${So}): ${t}`,...e)}function yd(t,...e){Pd.logLevel<=Ge.ERROR&&Pd.error(`Auth (${So}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t,...e){throw jp(t,...e)}function Ri(t,...e){return jp(t,...e)}function SS(t,e,n){const i=Object.assign(Object.assign({},WU()),{[e]:n});return new xu("auth","Firebase",i).create(e,{appName:t.name})}function fo(t){return SS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return xS.create(t,...e)}function Ie(t,e,...n){if(!t)throw jp(e,...n)}function hs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yd(e),new Error(e)}function xs(t,e){t||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XU(){return WT()==="http:"||WT()==="https:"}function WT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XU()||Ik()||"connection"in navigator)?navigator.onLine:!0}function eL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.shortDelay=e,this.longDelay=n,xs(n>e,"Short delay should be less than long delay!"),this.isMobile=Ak()||Rk()}get(){return ZU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e){xs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=new wu(3e4,6e4);function Yp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qa(t,e,n,i,o={}){return AS(t,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Su(Object.assign({key:t.config.apiKey},u)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:f},a);return bk()||(h.referrerPolicy="no-referrer"),wS.fetch()(CS(t,t.config.apiHost,n,d),h)})}async function AS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},tL),e);try{const o=new sL(t),a=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw ad(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,h]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ad(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw ad(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw ad(t,"user-disabled",u);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw SS(t,_,h);Es(t,_)}}catch(o){if(o instanceof Oi)throw o;Es(t,"network-request-failed",{message:String(o)})}}async function iL(t,e,n,i,o={}){const a=await qa(t,e,n,i,o);return"mfaPendingCredential"in a&&Es(t,"multi-factor-auth-required",{_serverResponse:a}),a}function CS(t,e,n,i){const o=`${e}${n}?${i}`;return t.config.emulator?Jp(t.config,o):`${t.config.apiScheme}://${o}`}class sL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ri(this.auth,"network-request-failed")),nL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ad(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ri(t,e,i);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e){return qa(t,"POST","/v1/accounts:delete",e)}async function bS(t,e){return qa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oL(t,e=!1){const n=En(t),i=await n.getIdToken(e),o=$p(i);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:tu(Bm(o.auth_time)),issuedAtTime:tu(Bm(o.iat)),expirationTime:tu(Bm(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Bm(t){return Number(t)*1e3}function $p(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return yd("JWT malformed, contained fewer than 3 sections"),null;try{const o=cS(n);return o?JSON.parse(o):(yd("Failed to decode base64 JWT payload"),null)}catch(o){return yd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function QT(t){const e=$p(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Oi&&aL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function aL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tu(this.lastLoginAt),this.creationTime=tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(t){var e;const n=t.auth,i=await t.getIdToken(),o=await lu(t,bS(n,{idToken:i}));Ie(o==null?void 0:o.users.length,n,"internal-error");const a=o.users[0];t._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?IS(a.providerUserInfo):[],d=cL(t.providerData,u),f=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),_=f?h:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new cp(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(t,E)}async function uL(t){const e=En(t);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cL(t,e){return[...t.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function IS(t){return t.map(e=>{var{providerId:n}=e,i=zp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dL(t,e){const n=await AS(t,{},async()=>{const i=Su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=t.config,u=CS(t,o,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",wS.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fL(t,e){return qa(t,"POST","/v2/accounts:revokeToken",Yp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=QT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:a}=await dL(e,n);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:a}=n,u=new wa;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ms{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,a=zp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new cp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await lu(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oL(this,e)}reload(){return uL(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ms(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await kd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(fo(this.auth));const e=await this.getIdToken();return await lu(this,rL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,a,u,d,f,h,_;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,S=(o=n.email)!==null&&o!==void 0?o:void 0,C=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,M=(u=n.photoURL)!==null&&u!==void 0?u:void 0,V=(d=n.tenantId)!==null&&d!==void 0?d:void 0,U=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,z=(h=n.createdAt)!==null&&h!==void 0?h:void 0,$=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:j,emailVerified:Y,isAnonymous:ie,providerData:oe,stsTokenManager:P}=n;Ie(j&&P,e,"internal-error");const N=wa.fromJSON(this.name,P);Ie(typeof j=="string",e,"internal-error"),gr(E,e.name),gr(S,e.name),Ie(typeof Y=="boolean",e,"internal-error"),Ie(typeof ie=="boolean",e,"internal-error"),gr(C,e.name),gr(M,e.name),gr(V,e.name),gr(U,e.name),gr(z,e.name),gr($,e.name);const R=new ms({uid:j,auth:e,email:S,emailVerified:Y,displayName:E,isAnonymous:ie,photoURL:M,phoneNumber:C,tenantId:V,stsTokenManager:N,createdAt:z,lastLoginAt:$});return oe&&Array.isArray(oe)&&(R.providerData=oe.map(k=>Object.assign({},k))),U&&(R._redirectEventId=U),R}static async _fromIdTokenResponse(e,n,i=!1){const o=new wa;o.updateFromServerResponse(n);const a=new ms({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await kd(a),a}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?IS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new wa;d.updateFromIdToken(i);const f=new ms({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new cp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=new Map;function ps(t){xs(t instanceof Function,"Expected a class definition");let e=XT.get(t);return e?(xs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RS.type="NONE";const ZT=RS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t,e,n){return`firebase:${t}:${e}:${n}`}class Aa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=vd(this.userKey,o.apiKey,a),this.fullPersistenceKey=vd("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ms._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Aa(ps(ZT),e,i);const o=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||ps(ZT);const u=vd(i,e.config.apiKey,e.name);let d=null;for(const h of n)try{const _=await h._get(u);if(_){const E=ms._fromJSON(e,_);h!==a&&(d=E),a=h;break}}catch{}const f=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Aa(a,e,i):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new Aa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(US(e))return"Blackberry";if(LS(e))return"Webos";if(MS(e))return"Safari";if((e.includes("chrome/")||DS(e))&&!e.includes("edge/"))return"Chrome";if(kS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function NS(t=hn()){return/firefox\//i.test(t)}function MS(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DS(t=hn()){return/crios\//i.test(t)}function PS(t=hn()){return/iemobile/i.test(t)}function kS(t=hn()){return/android/i.test(t)}function US(t=hn()){return/blackberry/i.test(t)}function LS(t=hn()){return/webos/i.test(t)}function Kp(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hL(t=hn()){var e;return Kp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mL(){return Nk()&&document.documentMode===10}function VS(t=hn()){return Kp(t)||kS(t)||LS(t)||US(t)||/windows phone/i.test(t)||PS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t,e=[]){let n;switch(t){case"Browser":n=eE(hn());break;case"Worker":n=`${eE(hn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${So}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(t,e={}){return qa(t,"GET","/v2/passwordPolicy",Yp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=6;class vL{constructor(e){var n,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:yL,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tE(this),this.idTokenSubscription=new tE(this),this.beforeStateQueue=new pL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Aa.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bS(this,{idToken:e}),i=await ms._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=o==null?void 0:o._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(fo(this));const n=e?En(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(fo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(fo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gL(this),n=new vL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await fL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ps(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await Aa.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,o);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Wp(t){return En(t)}class tE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ok(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TL(t){Qp=t}function EL(t){return Qp.loadJS(t)}function xL(){return Qp.gapiScript}function SL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t,e){const n=of(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),a=n.getOptions();if(Md(a,e??{}))return o;Es(o,"already-initialized")}return n.initialize({options:e})}function AL(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ps);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function FS(t,e,n){const i=Wp(t);Ie(i._canInitEmulator,i,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!!(n!=null&&n.disableWarnings),a=BS(e),{host:u,port:d}=CL(e),f=d===null?"":`:${d}`;i.config.emulator={url:`${a}//${u}${f}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||bL()}function BS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CL(t){const e=BS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:nE(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:nE(u)}}}function nE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,n){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(t,e){return iL(t,"POST","/v1/accounts:signInWithIdp",Yp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="http://localhost";class po extends qS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Es("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,a=zp(n,["providerId","signInMethod"]);if(!i||!o)return null;const u=new po(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Ca(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ca(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ca(e,n)}buildRequest(){const e={requestUri:IL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Su(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends HS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Au{constructor(){super("facebook.com")}static credential(e){return po._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return po._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return vr.credential(n,i)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Au{constructor(){super("github.com")}static credential(e){return po._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Au{constructor(){super("twitter.com")}static credential(e,n){return po._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Tr.credential(n,i)}catch{return null}}}Tr.TWITTER_SIGN_IN_METHOD="twitter.com";Tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const a=await ms._fromIdTokenResponse(e,i,o),u=iE(i);return new Ia({user:a,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=iE(i);return new Ia({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function iE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends Oi{constructor(e,n,i,o){var a;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ud.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Ud(e,n,i,o)}}function GS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ud._fromErrorAndOperation(t,a,e,i):a})}async function RL(t,e,n=!1){const i=await lu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ia._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(t,e,n=!1){const{auth:i}=t;if(xr(i.app))return Promise.reject(fo(i));const o="reauthenticate";try{const a=await lu(t,GS(i,o,e,t),n);Ie(a.idToken,i,"internal-error");const u=$p(a.idToken);Ie(u,i,"internal-error");const{sub:d}=u;return Ie(t.uid===d,i,"user-mismatch"),Ia._forOperation(t,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Es(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML(t,e,n=!1){if(xr(t.app))return Promise.reject(fo(t));const i="signIn",o=await GS(t,i,e),a=await Ia._fromIdTokenResponse(t,i,o);return n||await t._updateCurrentUser(a.user),a}function DL(t,e,n,i){return En(t).onIdTokenChanged(e,n,i)}function PL(t,e,n){return En(t).beforeAuthStateChanged(e,n)}function zS(t,e,n,i){return En(t).onAuthStateChanged(e,n,i)}const Ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=1e3,UL=10;class JS extends jS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);mL()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,UL):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},kL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}JS.type="LOCAL";const LL=JS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS extends jS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YS.type="SESSION";const $S=YS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new af(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:a}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(n.origin,a)),f=await VL(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const h=Xp("",20);o.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(){return window}function FL(t){Ni().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}async function BL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function HL(){return KS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="firebaseLocalStorageDb",GL=1,Vd="firebaseLocalStorage",QS="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lf(t,e){return t.transaction([Vd],e?"readwrite":"readonly").objectStore(Vd)}function zL(){const t=indexedDB.deleteDatabase(WS);return new Cu(t).toPromise()}function dp(){const t=indexedDB.open(WS,GL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Vd,{keyPath:QS})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Vd)?e(i):(i.close(),await zL(),e(await dp()))})})}async function sE(t,e,n){const i=lf(t,!0).put({[QS]:e,value:n});return new Cu(i).toPromise()}async function jL(t,e){const n=lf(t,!1).get(e),i=await new Cu(n).toPromise();return i===void 0?null:i.value}function rE(t,e){const n=lf(t,!0).delete(e);return new Cu(n).toPromise()}const JL=800,YL=3;class XS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>YL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(HL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await BL(),!this.activeServiceWorker)return;this.sender=new OL(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dp();return await sE(e,Ld,"1"),await rE(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>sE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>jL(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=lf(o,!1).getAll();return new Cu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XS.type="LOCAL";const $L=XS;new wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(t,e){return e?ps(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp extends qS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WL(t){return ML(t.auth,new Zp(t),t.bypassAuthState)}function QL(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),NL(n,new Zp(t),t.bypassAuthState)}async function XL(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),RL(n,new Zp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WL;case"linkViaPopup":case"linkViaRedirect":return XL;case"reauthViaPopup":case"reauthViaRedirect":return QL;default:Es(this.auth,"internal-error")}}resolve(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new wu(2e3,1e4);class Ta extends ZS{constructor(e,n,i,o,a){super(e,n,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const e=Xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZL.get())};e()}}Ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="pendingRedirect",_d=new Map;class tV extends ZS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=_d.get(this.auth._key());if(!e){try{const i=await nV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nV(t,e){const n=rV(e),i=sV(t);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function iV(t,e){_d.set(t._key(),e)}function sV(t){return ps(t._redirectPersistence)}function rV(t){return vd(eV,t.config.apiKey,t.name)}async function oV(t,e,n=!1){if(xr(t.app))return Promise.reject(fo(t));const i=Wp(t),o=KL(i,e),u=await new tV(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=600*1e3;class lV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!ew(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ri(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aV&&this.cachedEventUids.clear(),this.cachedEventUids.has(oE(e))}saveEventToCache(e){this.cachedEventUids.add(oE(e)),this.lastProcessedEventTime=Date.now()}}function oE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ew({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ew(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(t,e={}){return qa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fV=/^https?/;async function hV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cV(t);for(const n of e)try{if(mV(n))return}catch{}Es(t,"unauthorized-domain")}function mV(t){const e=up(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!fV.test(n))return!1;if(dV.test(t))return i===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=new wu(3e4,6e4);function aE(){const t=Ni().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gV(t){return new Promise((e,n)=>{var i,o,a;function u(){aE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aE(),n(Ri(t,"network-request-failed"))},timeout:pV.get()})}if(!((o=(i=Ni().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Ni().gapi)===null||a===void 0)&&a.load)u();else{const d=SL("iframefcb");return Ni()[d]=()=>{gapi.load?u():n(Ri(t,"network-request-failed"))},EL(`${xL()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw Td=null,e})}let Td=null;function yV(t){return Td=Td||gV(t),Td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=new wu(5e3,15e3),_V="__/auth/iframe",TV="emulator/auth/iframe",EV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SV(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Jp(e,TV):`https://${t.config.authDomain}/${_V}`,i={apiKey:e.apiKey,appName:t.name,v:So},o=xV.get(t.config.apiHost);o&&(i.eid=o);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Su(i).slice(1)}`}async function wV(t){const e=await yV(t),n=Ni().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:SV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EV,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Ri(t,"network-request-failed"),d=Ni().setTimeout(()=>{a(u)},vV.get());function f(){Ni().clearTimeout(d),o(i)}i.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CV=500,bV=600,IV="_blank",RV="http://localhost";class lE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NV(t,e,n,i=CV,o=bV){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},AV),{width:i.toString(),height:o.toString(),top:a,left:u}),h=hn().toLowerCase();n&&(d=DS(h)?IV:n),NS(h)&&(e=e||RV,f.scrollbars="yes");const _=Object.entries(f).reduce((S,[C,M])=>`${S}${C}=${M},`,"");if(hL(h)&&d!=="_self")return MV(e||"",d),new lE(null);const E=window.open(e||"",d,_);Ie(E,t,"popup-blocked");try{E.focus()}catch{}return new lE(E)}function MV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="__/auth/handler",PV="emulator/auth/handler",kV=encodeURIComponent("fac");async function uE(t,e,n,i,o,a){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:So,eventId:o};if(e instanceof HS){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",Vk(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Au){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await t._getAppCheckToken(),h=f?`#${kV}=${encodeURIComponent(f)}`:"";return`${UV(t)}?${Su(d).slice(1)}${h}`}function UV({config:t}){return t.emulator?Jp(t,PV):`https://${t.authDomain}/${DV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="webStorageSupport";class LV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$S,this._completeRedirectFn=oV,this._overrideRedirectResult=iV}async _openPopup(e,n,i,o){var a;xs((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await uE(e,n,i,up(),o);return NV(e,u,Xp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const a=await uE(e,n,i,up(),o);return FL(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:a}=this.eventManagers[n];return o?Promise.resolve(o):(xs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await wV(e),i=new lV(e);return n.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qm,{type:qm},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[qm];u!==void 0&&n(!!u),Es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VS()||MS()||Kp()}}const VV=LV;var cE="@firebase/auth",dE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BV(t){mo(new br("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OS(t)},h=new _L(i,o,a,f);return AL(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),mo(new br("auth-internal",e=>{const n=Wp(e.getProvider("auth").getImmediate());return(i=>new OV(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(cE,dE,FV(t)),Ii(cE,dE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=300,HV=mS("authIdTokenMaxAge")||qV;let fE=null;const GV=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>HV)return;const o=n==null?void 0:n.token;fE!==o&&(fE=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function zV(t=Gp()){const e=of(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wL(t,{popupRedirectResolver:VV,persistence:[$L,LL,$S]}),i=mS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=GV(a.toString());PL(n,u,()=>u(n.currentUser)),DL(n,d=>u(d))}}const o=dS("auth");return o&&FS(n,`http://${o}`),n}function jV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TL({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=o=>{const a=Ri("internal-error");a.customData=o,n(a)},i.type="text/javascript",i.charset="UTF-8",jV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BV("Browser");var hE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ho,tw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,N){function R(){}R.prototype=N.prototype,P.D=N.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(k,B,q){for(var L=Array(arguments.length-2),je=2;je<arguments.length;je++)L[je-2]=arguments[je];return N.prototype[B].apply(k,L)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,N,R){R||(R=0);var k=Array(16);if(typeof N=="string")for(var B=0;16>B;++B)k[B]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(B=0;16>B;++B)k[B]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=P.g[0],R=P.g[1],B=P.g[2];var q=P.g[3],L=N+(q^R&(B^q))+k[0]+3614090360&4294967295;N=R+(L<<7&4294967295|L>>>25),L=q+(B^N&(R^B))+k[1]+3905402710&4294967295,q=N+(L<<12&4294967295|L>>>20),L=B+(R^q&(N^R))+k[2]+606105819&4294967295,B=q+(L<<17&4294967295|L>>>15),L=R+(N^B&(q^N))+k[3]+3250441966&4294967295,R=B+(L<<22&4294967295|L>>>10),L=N+(q^R&(B^q))+k[4]+4118548399&4294967295,N=R+(L<<7&4294967295|L>>>25),L=q+(B^N&(R^B))+k[5]+1200080426&4294967295,q=N+(L<<12&4294967295|L>>>20),L=B+(R^q&(N^R))+k[6]+2821735955&4294967295,B=q+(L<<17&4294967295|L>>>15),L=R+(N^B&(q^N))+k[7]+4249261313&4294967295,R=B+(L<<22&4294967295|L>>>10),L=N+(q^R&(B^q))+k[8]+1770035416&4294967295,N=R+(L<<7&4294967295|L>>>25),L=q+(B^N&(R^B))+k[9]+2336552879&4294967295,q=N+(L<<12&4294967295|L>>>20),L=B+(R^q&(N^R))+k[10]+4294925233&4294967295,B=q+(L<<17&4294967295|L>>>15),L=R+(N^B&(q^N))+k[11]+2304563134&4294967295,R=B+(L<<22&4294967295|L>>>10),L=N+(q^R&(B^q))+k[12]+1804603682&4294967295,N=R+(L<<7&4294967295|L>>>25),L=q+(B^N&(R^B))+k[13]+4254626195&4294967295,q=N+(L<<12&4294967295|L>>>20),L=B+(R^q&(N^R))+k[14]+2792965006&4294967295,B=q+(L<<17&4294967295|L>>>15),L=R+(N^B&(q^N))+k[15]+1236535329&4294967295,R=B+(L<<22&4294967295|L>>>10),L=N+(B^q&(R^B))+k[1]+4129170786&4294967295,N=R+(L<<5&4294967295|L>>>27),L=q+(R^B&(N^R))+k[6]+3225465664&4294967295,q=N+(L<<9&4294967295|L>>>23),L=B+(N^R&(q^N))+k[11]+643717713&4294967295,B=q+(L<<14&4294967295|L>>>18),L=R+(q^N&(B^q))+k[0]+3921069994&4294967295,R=B+(L<<20&4294967295|L>>>12),L=N+(B^q&(R^B))+k[5]+3593408605&4294967295,N=R+(L<<5&4294967295|L>>>27),L=q+(R^B&(N^R))+k[10]+38016083&4294967295,q=N+(L<<9&4294967295|L>>>23),L=B+(N^R&(q^N))+k[15]+3634488961&4294967295,B=q+(L<<14&4294967295|L>>>18),L=R+(q^N&(B^q))+k[4]+3889429448&4294967295,R=B+(L<<20&4294967295|L>>>12),L=N+(B^q&(R^B))+k[9]+568446438&4294967295,N=R+(L<<5&4294967295|L>>>27),L=q+(R^B&(N^R))+k[14]+3275163606&4294967295,q=N+(L<<9&4294967295|L>>>23),L=B+(N^R&(q^N))+k[3]+4107603335&4294967295,B=q+(L<<14&4294967295|L>>>18),L=R+(q^N&(B^q))+k[8]+1163531501&4294967295,R=B+(L<<20&4294967295|L>>>12),L=N+(B^q&(R^B))+k[13]+2850285829&4294967295,N=R+(L<<5&4294967295|L>>>27),L=q+(R^B&(N^R))+k[2]+4243563512&4294967295,q=N+(L<<9&4294967295|L>>>23),L=B+(N^R&(q^N))+k[7]+1735328473&4294967295,B=q+(L<<14&4294967295|L>>>18),L=R+(q^N&(B^q))+k[12]+2368359562&4294967295,R=B+(L<<20&4294967295|L>>>12),L=N+(R^B^q)+k[5]+4294588738&4294967295,N=R+(L<<4&4294967295|L>>>28),L=q+(N^R^B)+k[8]+2272392833&4294967295,q=N+(L<<11&4294967295|L>>>21),L=B+(q^N^R)+k[11]+1839030562&4294967295,B=q+(L<<16&4294967295|L>>>16),L=R+(B^q^N)+k[14]+4259657740&4294967295,R=B+(L<<23&4294967295|L>>>9),L=N+(R^B^q)+k[1]+2763975236&4294967295,N=R+(L<<4&4294967295|L>>>28),L=q+(N^R^B)+k[4]+1272893353&4294967295,q=N+(L<<11&4294967295|L>>>21),L=B+(q^N^R)+k[7]+4139469664&4294967295,B=q+(L<<16&4294967295|L>>>16),L=R+(B^q^N)+k[10]+3200236656&4294967295,R=B+(L<<23&4294967295|L>>>9),L=N+(R^B^q)+k[13]+681279174&4294967295,N=R+(L<<4&4294967295|L>>>28),L=q+(N^R^B)+k[0]+3936430074&4294967295,q=N+(L<<11&4294967295|L>>>21),L=B+(q^N^R)+k[3]+3572445317&4294967295,B=q+(L<<16&4294967295|L>>>16),L=R+(B^q^N)+k[6]+76029189&4294967295,R=B+(L<<23&4294967295|L>>>9),L=N+(R^B^q)+k[9]+3654602809&4294967295,N=R+(L<<4&4294967295|L>>>28),L=q+(N^R^B)+k[12]+3873151461&4294967295,q=N+(L<<11&4294967295|L>>>21),L=B+(q^N^R)+k[15]+530742520&4294967295,B=q+(L<<16&4294967295|L>>>16),L=R+(B^q^N)+k[2]+3299628645&4294967295,R=B+(L<<23&4294967295|L>>>9),L=N+(B^(R|~q))+k[0]+4096336452&4294967295,N=R+(L<<6&4294967295|L>>>26),L=q+(R^(N|~B))+k[7]+1126891415&4294967295,q=N+(L<<10&4294967295|L>>>22),L=B+(N^(q|~R))+k[14]+2878612391&4294967295,B=q+(L<<15&4294967295|L>>>17),L=R+(q^(B|~N))+k[5]+4237533241&4294967295,R=B+(L<<21&4294967295|L>>>11),L=N+(B^(R|~q))+k[12]+1700485571&4294967295,N=R+(L<<6&4294967295|L>>>26),L=q+(R^(N|~B))+k[3]+2399980690&4294967295,q=N+(L<<10&4294967295|L>>>22),L=B+(N^(q|~R))+k[10]+4293915773&4294967295,B=q+(L<<15&4294967295|L>>>17),L=R+(q^(B|~N))+k[1]+2240044497&4294967295,R=B+(L<<21&4294967295|L>>>11),L=N+(B^(R|~q))+k[8]+1873313359&4294967295,N=R+(L<<6&4294967295|L>>>26),L=q+(R^(N|~B))+k[15]+4264355552&4294967295,q=N+(L<<10&4294967295|L>>>22),L=B+(N^(q|~R))+k[6]+2734768916&4294967295,B=q+(L<<15&4294967295|L>>>17),L=R+(q^(B|~N))+k[13]+1309151649&4294967295,R=B+(L<<21&4294967295|L>>>11),L=N+(B^(R|~q))+k[4]+4149444226&4294967295,N=R+(L<<6&4294967295|L>>>26),L=q+(R^(N|~B))+k[11]+3174756917&4294967295,q=N+(L<<10&4294967295|L>>>22),L=B+(N^(q|~R))+k[2]+718787259&4294967295,B=q+(L<<15&4294967295|L>>>17),L=R+(q^(B|~N))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+N&4294967295,P.g[1]=P.g[1]+(B+(L<<21&4294967295|L>>>11))&4294967295,P.g[2]=P.g[2]+B&4294967295,P.g[3]=P.g[3]+q&4294967295}i.prototype.u=function(P,N){N===void 0&&(N=P.length);for(var R=N-this.blockSize,k=this.B,B=this.h,q=0;q<N;){if(B==0)for(;q<=R;)o(this,P,q),q+=this.blockSize;if(typeof P=="string"){for(;q<N;)if(k[B++]=P.charCodeAt(q++),B==this.blockSize){o(this,k),B=0;break}}else for(;q<N;)if(k[B++]=P[q++],B==this.blockSize){o(this,k),B=0;break}}this.h=B,this.o+=N},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var N=1;N<P.length-8;++N)P[N]=0;var R=8*this.o;for(N=P.length-8;N<P.length;++N)P[N]=R&255,R/=256;for(this.u(P),P=Array(16),N=R=0;4>N;++N)for(var k=0;32>k;k+=8)P[R++]=this.g[N]>>>k&255;return P};function a(P,N){var R=d;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=N(P)}function u(P,N){this.h=N;for(var R=[],k=!0,B=P.length-1;0<=B;B--){var q=P[B]|0;k&&q==N||(R[B]=q,k=!1)}this.g=R}var d={};function f(P){return-128<=P&&128>P?a(P,function(N){return new u([N|0],0>N?-1:0)}):new u([P|0],0>P?-1:0)}function h(P){if(isNaN(P)||!isFinite(P))return E;if(0>P)return U(h(-P));for(var N=[],R=1,k=0;P>=R;k++)N[k]=P/R|0,R*=4294967296;return new u(N,0)}function _(P,N){if(P.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P.charAt(0)=="-")return U(_(P.substring(1),N));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(N,8)),k=E,B=0;B<P.length;B+=8){var q=Math.min(8,P.length-B),L=parseInt(P.substring(B,B+q),N);8>q?(q=h(Math.pow(N,q)),k=k.j(q).add(h(L))):(k=k.j(R),k=k.add(h(L)))}return k}var E=f(0),S=f(1),C=f(16777216);t=u.prototype,t.m=function(){if(V(this))return-U(this).m();for(var P=0,N=1,R=0;R<this.g.length;R++){var k=this.i(R);P+=(0<=k?k:4294967296+k)*N,N*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M(this))return"0";if(V(this))return"-"+U(this).toString(P);for(var N=h(Math.pow(P,6)),R=this,k="";;){var B=Y(R,N).g;R=z(R,B.j(N));var q=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=B,M(R))return q+k;for(;6>q.length;)q="0"+q;k=q+k}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function M(P){if(P.h!=0)return!1;for(var N=0;N<P.g.length;N++)if(P.g[N]!=0)return!1;return!0}function V(P){return P.h==-1}t.l=function(P){return P=z(this,P),V(P)?-1:M(P)?0:1};function U(P){for(var N=P.g.length,R=[],k=0;k<N;k++)R[k]=~P.g[k];return new u(R,~P.h).add(S)}t.abs=function(){return V(this)?U(this):this},t.add=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],k=0,B=0;B<=N;B++){var q=k+(this.i(B)&65535)+(P.i(B)&65535),L=(q>>>16)+(this.i(B)>>>16)+(P.i(B)>>>16);k=L>>>16,q&=65535,L&=65535,R[B]=L<<16|q}return new u(R,R[R.length-1]&-2147483648?-1:0)};function z(P,N){return P.add(U(N))}t.j=function(P){if(M(this)||M(P))return E;if(V(this))return V(P)?U(this).j(U(P)):U(U(this).j(P));if(V(P))return U(this.j(U(P)));if(0>this.l(C)&&0>P.l(C))return h(this.m()*P.m());for(var N=this.g.length+P.g.length,R=[],k=0;k<2*N;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var B=0;B<P.g.length;B++){var q=this.i(k)>>>16,L=this.i(k)&65535,je=P.i(B)>>>16,ge=P.i(B)&65535;R[2*k+2*B]+=L*ge,$(R,2*k+2*B),R[2*k+2*B+1]+=q*ge,$(R,2*k+2*B+1),R[2*k+2*B+1]+=L*je,$(R,2*k+2*B+1),R[2*k+2*B+2]+=q*je,$(R,2*k+2*B+2)}for(k=0;k<N;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=N;k<2*N;k++)R[k]=0;return new u(R,0)};function $(P,N){for(;(P[N]&65535)!=P[N];)P[N+1]+=P[N]>>>16,P[N]&=65535,N++}function j(P,N){this.g=P,this.h=N}function Y(P,N){if(M(N))throw Error("division by zero");if(M(P))return new j(E,E);if(V(P))return N=Y(U(P),N),new j(U(N.g),U(N.h));if(V(N))return N=Y(P,U(N)),new j(U(N.g),N.h);if(30<P.g.length){if(V(P)||V(N))throw Error("slowDivide_ only works with positive integers.");for(var R=S,k=N;0>=k.l(P);)R=ie(R),k=ie(k);var B=oe(R,1),q=oe(k,1);for(k=oe(k,2),R=oe(R,2);!M(k);){var L=q.add(k);0>=L.l(P)&&(B=B.add(R),q=L),k=oe(k,1),R=oe(R,1)}return N=z(P,B.j(N)),new j(B,N)}for(B=E;0<=P.l(N);){for(R=Math.max(1,Math.floor(P.m()/N.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),q=h(R),L=q.j(N);V(L)||0<L.l(P);)R-=k,q=h(R),L=q.j(N);M(q)&&(q=S),B=B.add(q),P=z(P,L)}return new j(B,P)}t.A=function(P){return Y(this,P).h},t.and=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],k=0;k<N;k++)R[k]=this.i(k)&P.i(k);return new u(R,this.h&P.h)},t.or=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],k=0;k<N;k++)R[k]=this.i(k)|P.i(k);return new u(R,this.h|P.h)},t.xor=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],k=0;k<N;k++)R[k]=this.i(k)^P.i(k);return new u(R,this.h^P.h)};function ie(P){for(var N=P.g.length+1,R=[],k=0;k<N;k++)R[k]=P.i(k)<<1|P.i(k-1)>>>31;return new u(R,P.h)}function oe(P,N){var R=N>>5;N%=32;for(var k=P.g.length-R,B=[],q=0;q<k;q++)B[q]=0<N?P.i(q+R)>>>N|P.i(q+R+1)<<32-N:P.i(q+R);return new u(B,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,ho=u}).apply(typeof hE<"u"?hE:typeof self<"u"?self:typeof window<"u"?window:{});var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nw,Ql,iw,Ed,fp,sw,rw,ow;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,x,A){return p==Array.prototype||p==Object.prototype||(p[x]=A.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof ld=="object"&&ld];for(var x=0;x<p.length;++x){var A=p[x];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function o(p,x){if(x)e:{var A=i;p=p.split(".");for(var I=0;I<p.length-1;I++){var K=p[I];if(!(K in A))break e;A=A[K]}p=p[p.length-1],I=A[p],x=x(I),x!=I&&x!=null&&e(A,p,{configurable:!0,writable:!0,value:x})}}function a(p,x){p instanceof String&&(p+="");var A=0,I=!1,K={next:function(){if(!I&&A<p.length){var ne=A++;return{value:x(ne,p[ne]),done:!1}}return I=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}o("Array.prototype.values",function(p){return p||function(){return a(this,function(x,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(p){var x=typeof p;return x=x!="object"?x:p?Array.isArray(p)?"array":x:"null",x=="array"||x=="object"&&typeof p.length=="number"}function h(p){var x=typeof p;return x=="object"&&p!=null||x=="function"}function _(p,x,A){return p.call.apply(p.bind,arguments)}function E(p,x,A){if(!p)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,I),p.apply(x,K)}}return function(){return p.apply(x,arguments)}}function S(p,x,A){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function C(p,x){var A=Array.prototype.slice.call(arguments,1);return function(){var I=A.slice();return I.push.apply(I,arguments),p.apply(this,I)}}function M(p,x){function A(){}A.prototype=x.prototype,p.aa=x.prototype,p.prototype=new A,p.prototype.constructor=p,p.Qb=function(I,K,ne){for(var he=Array(arguments.length-2),et=2;et<arguments.length;et++)he[et-2]=arguments[et];return x.prototype[K].apply(I,he)}}function V(p){const x=p.length;if(0<x){const A=Array(x);for(let I=0;I<x;I++)A[I]=p[I];return A}return[]}function U(p,x){for(let A=1;A<arguments.length;A++){const I=arguments[A];if(f(I)){const K=p.length||0,ne=I.length||0;p.length=K+ne;for(let he=0;he<ne;he++)p[K+he]=I[he]}else p.push(I)}}class z{constructor(x,A){this.i=x,this.j=A,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function $(p){return/^[\s\xa0]*$/.test(p)}function j(){var p=d.navigator;return p&&(p=p.userAgent)?p:""}function Y(p){return Y[" "](p),p}Y[" "]=function(){};var ie=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function oe(p,x,A){for(const I in p)x.call(A,p[I],I,p)}function P(p,x){for(const A in p)x.call(void 0,p[A],A,p)}function N(p){const x={};for(const A in p)x[A]=p[A];return x}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(p,x){let A,I;for(let K=1;K<arguments.length;K++){I=arguments[K];for(A in I)p[A]=I[A];for(let ne=0;ne<R.length;ne++)A=R[ne],Object.prototype.hasOwnProperty.call(I,A)&&(p[A]=I[A])}}function B(p){var x=1;p=p.split(":");const A=[];for(;0<x&&p.length;)A.push(p.shift()),x--;return p.length&&A.push(p.join(":")),A}function q(p){d.setTimeout(()=>{throw p},0)}function L(){var p=xe;let x=null;return p.g&&(x=p.g,p.g=p.g.next,p.g||(p.h=null),x.next=null),x}class je{constructor(){this.h=this.g=null}add(x,A){const I=ge.get();I.set(x,A),this.h?this.h.next=I:this.g=I,this.h=I}}var ge=new z(()=>new O,p=>p.reset());class O{constructor(){this.next=this.g=this.h=null}set(x,A){this.h=x,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let te,fe=!1,xe=new je,ke=()=>{const p=d.Promise.resolve(void 0);te=()=>{p.then(H)}};var H=()=>{for(var p;p=L();){try{p.h.call(p.g)}catch(A){q(A)}var x=ge;x.j(p),100>x.h&&(x.h++,p.next=x.g,x.g=p)}fe=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(p,x){this.type=p,this.g=this.target=x,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var p=!1,x=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const A=()=>{};d.addEventListener("test",A,x),d.removeEventListener("test",A,x)}catch{}return p})();function me(p,x){if(W.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var A=this.type=p.type,I=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=x,x=p.relatedTarget){if(ie){e:{try{Y(x.nodeName);var K=!0;break e}catch{}K=!1}K||(x=null)}}else A=="mouseover"?x=p.fromElement:A=="mouseout"&&(x=p.toElement);this.relatedTarget=x,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ye[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&me.aa.h.call(this)}}M(me,W);var ye={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),tt=0;function nt(p,x,A,I,K){this.listener=p,this.proxy=null,this.src=x,this.type=A,this.capture=!!I,this.ha=K,this.key=++tt,this.da=this.fa=!1}function mn(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Sn(p){this.src=p,this.g={},this.h=0}Sn.prototype.add=function(p,x,A,I,K){var ne=p.toString();p=this.g[ne],p||(p=this.g[ne]=[],this.h++);var he=bo(p,x,I,K);return-1<he?(x=p[he],A||(x.fa=!1)):(x=new nt(x,this.src,ne,!!I,K),x.fa=A,p.push(x)),x};function mi(p,x){var A=x.type;if(A in p.g){var I=p.g[A],K=Array.prototype.indexOf.call(I,x,void 0),ne;(ne=0<=K)&&Array.prototype.splice.call(I,K,1),ne&&(mn(x),p.g[A].length==0&&(delete p.g[A],p.h--))}}function bo(p,x,A,I){for(var K=0;K<p.length;++K){var ne=p[K];if(!ne.da&&ne.listener==x&&ne.capture==!!A&&ne.ha==I)return K}return-1}var ni="closure_lm_"+(1e6*Math.random()|0),Pr={};function Io(p,x,A,I,K){if(Array.isArray(x)){for(var ne=0;ne<x.length;ne++)Io(p,x[ne],A,I,K);return null}return A=Pu(A),p&&p[be]?p.K(x,A,h(I)?!!I.capture:!1,K):wf(p,x,A,!1,I,K)}function wf(p,x,A,I,K,ne){if(!x)throw Error("Invalid event type");var he=h(K)?!!K.capture:!!K,et=ja(p);if(et||(p[ni]=et=new Sn(p)),A=et.add(x,A,I,he,ne),A.proxy)return A;if(I=Du(),A.proxy=I,I.src=p,I.listener=A,p.addEventListener)de||(K=he),K===void 0&&(K=!1),p.addEventListener(x.toString(),I,K);else if(p.attachEvent)p.attachEvent(No(x.toString()),I);else if(p.addListener&&p.removeListener)p.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Du(){function p(A){return x.call(p.src,p.listener,A)}const x=Af;return p}function Ro(p,x,A,I,K){if(Array.isArray(x))for(var ne=0;ne<x.length;ne++)Ro(p,x[ne],A,I,K);else I=h(I)?!!I.capture:!!I,A=Pu(A),p&&p[be]?(p=p.i,x=String(x).toString(),x in p.g&&(ne=p.g[x],A=bo(ne,A,I,K),-1<A&&(mn(ne[A]),Array.prototype.splice.call(ne,A,1),ne.length==0&&(delete p.g[x],p.h--)))):p&&(p=ja(p))&&(x=p.g[x.toString()],p=-1,x&&(p=bo(x,A,I,K)),(A=-1<p?x[p]:null)&&kr(A))}function kr(p){if(typeof p!="number"&&p&&!p.da){var x=p.src;if(x&&x[be])mi(x.i,p);else{var A=p.type,I=p.proxy;x.removeEventListener?x.removeEventListener(A,I,p.capture):x.detachEvent?x.detachEvent(No(A),I):x.addListener&&x.removeListener&&x.removeListener(I),(A=ja(x))?(mi(A,p),A.h==0&&(A.src=null,x[ni]=null)):mn(p)}}}function No(p){return p in Pr?Pr[p]:Pr[p]="on"+p}function Af(p,x){if(p.da)p=!0;else{x=new me(x,this);var A=p.listener,I=p.ha||p.src;p.fa&&kr(p),p=A.call(I,x)}return p}function ja(p){return p=p[ni],p instanceof Sn?p:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pu(p){return typeof p=="function"?p:(p[zt]||(p[zt]=function(x){return p.handleEvent(x)}),p[zt])}function kt(){se.call(this),this.i=new Sn(this),this.M=this,this.F=null}M(kt,se),kt.prototype[be]=!0,kt.prototype.removeEventListener=function(p,x,A,I){Ro(this,p,x,A,I)};function Ot(p,x){var A,I=p.F;if(I)for(A=[];I;I=I.F)A.push(I);if(p=p.M,I=x.type||x,typeof x=="string")x=new W(x,p);else if(x instanceof W)x.target=x.target||p;else{var K=x;x=new W(I,p),k(x,K)}if(K=!0,A)for(var ne=A.length-1;0<=ne;ne--){var he=x.g=A[ne];K=Bi(he,I,!0,x)&&K}if(he=x.g=p,K=Bi(he,I,!0,x)&&K,K=Bi(he,I,!1,x)&&K,A)for(ne=0;ne<A.length;ne++)he=x.g=A[ne],K=Bi(he,I,!1,x)&&K}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var p=this.i,x;for(x in p.g){for(var A=p.g[x],I=0;I<A.length;I++)mn(A[I]);delete p.g[x],p.h--}}this.F=null},kt.prototype.K=function(p,x,A,I){return this.i.add(String(p),x,!1,A,I)},kt.prototype.L=function(p,x,A,I){return this.i.add(String(p),x,!0,A,I)};function Bi(p,x,A,I){if(x=p.i.g[String(x)],!x)return!0;x=x.concat();for(var K=!0,ne=0;ne<x.length;++ne){var he=x[ne];if(he&&!he.da&&he.capture==A){var et=he.listener,bt=he.ha||he.src;he.fa&&mi(p.i,he),K=et.call(bt,I)!==!1&&K}}return K&&!I.defaultPrevented}function ku(p,x,A){if(typeof p=="function")A&&(p=S(p,A));else if(p&&typeof p.handleEvent=="function")p=S(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:d.setTimeout(p,x||0)}function Ja(p){p.g=ku(()=>{p.g=null,p.i&&(p.i=!1,Ja(p))},p.l);const x=p.h;p.h=null,p.m.apply(null,x)}class Cf extends se{constructor(x,A){super(),this.m=x,this.l=A,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Ja(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(p){se.call(this),this.h=p,this.g={}}M(Ur,se);var Is=[];function nn(p){oe(p.g,function(x,A){this.g.hasOwnProperty(A)&&kr(x)},p),p.g={}}Ur.prototype.N=function(){Ur.aa.N.call(this),nn(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=d.JSON.stringify,pn=d.JSON.parse,bf=class{stringify(p){return d.JSON.stringify(p,void 0)}parse(p){return d.JSON.parse(p,void 0)}};function Ya(){}Ya.prototype.h=null;function Uu(p){return p.h||(p.h=p.i())}function Lr(){}var pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rs(){W.call(this,"d")}M(Rs,W);function ii(){W.call(this,"c")}M(ii,W);var Hn={},Ns=null;function Mo(){return Ns=Ns||new kt}Hn.La="serverreachability";function $a(p){W.call(this,Hn.La,p)}M($a,W);function qi(p){const x=Mo();Ot(x,new $a(x))}Hn.STAT_EVENT="statevent";function Ms(p,x){W.call(this,Hn.STAT_EVENT,p),this.stat=x}M(Ms,W);function jt(p){const x=Mo();Ot(x,new Ms(x,p))}Hn.Ma="timingevent";function Ka(p,x){W.call(this,Hn.Ma,p),this.size=x}M(Ka,W);function Ds(p,x){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){p()},x)}function Ps(){this.g=!0}Ps.prototype.xa=function(){this.g=!1};function Wa(p,x,A,I,K,ne){p.info(function(){if(p.g)if(ne)for(var he="",et=ne.split("&"),bt=0;bt<et.length;bt++){var Le=et[bt].split("=");if(1<Le.length){var Bt=Le[0];Le=Le[1];var qt=Bt.split("_");he=2<=qt.length&&qt[1]=="type"?he+(Bt+"="+Le+"&"):he+(Bt+"=redacted&")}}else he=null;else he=ne;return"XMLHTTP REQ ("+I+") [attempt "+K+"]: "+x+`
`+A+`
`+he})}function Qa(p,x,A,I,K,ne,he){p.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+K+"]: "+x+`
`+A+`
`+ne+" "+he})}function Hi(p,x,A,I){p.info(function(){return"XMLHTTP TEXT ("+x+"): "+gi(p,A)+(I?" "+I:"")})}function Lu(p,x){p.info(function(){return"TIMEOUT: "+x})}Ps.prototype.info=function(){};function gi(p,x){if(!p.g)return x;if(!x)return null;try{var A=JSON.parse(x);if(A){for(p=0;p<A.length;p++)if(Array.isArray(A[p])){var I=A[p];if(!(2>I.length)){var K=I[1];if(Array.isArray(K)&&!(1>K.length)){var ne=K[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var he=1;he<K.length;he++)K[he]=""}}}}return qn(A)}catch{return x}}var vt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yi;function ks(){}M(ks,Ya),ks.prototype.g=function(){return new XMLHttpRequest},ks.prototype.i=function(){return{}},yi=new ks;function vi(p,x,A,I){this.j=p,this.i=x,this.l=A,this.R=I||1,this.U=new Ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vu}function Vu(){this.i=null,this.g="",this.h=!1}var Xa={},Gi={};function Vr(p,x,A){p.L=1,p.v=Br(_t(x)),p.m=A,p.P=!0,zi(p,null)}function zi(p,x){p.F=Date.now(),si(p),p.A=_t(p.v);var A=p.A,I=p.R;Array.isArray(I)||(I=[String(I)]),Yi(A.i,"t",I),p.C=0,A=p.j.J,p.h=new Vu,p.g=Zu(p.j,A?x:null,!p.m),0<p.O&&(p.M=new Cf(S(p.Y,p,p.g),p.O)),x=p.U,A=p.g,I=p.ca;var K="readystatechange";Array.isArray(K)||(K&&(Is[0]=K.toString()),K=Is);for(var ne=0;ne<K.length;ne++){var he=Io(A,K[ne],I||x.handleEvent,!1,x.h||x);if(!he)break;x.g[he.key]=he}x=p.H?N(p.H):{},p.m?(p.u||(p.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,x)):(p.u="GET",p.g.ea(p.A,p.u,null,x)),qi(),Wa(p.i,p.u,p.A,p.l,p.R,p.m)}vi.prototype.ca=function(p){p=p.target;const x=this.M;x&&vn(p)==3?x.j():this.Y(p)},vi.prototype.Y=function(p){try{if(p==this.g)e:{const qt=vn(this.g);var x=this.g.Ba();const Ys=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Gr(this.g)))){this.J||qt!=4||x==7||(x==8||0>=Ys?qi(3):qi(2)),Do(this);var A=this.g.Z();this.X=A;t:if(ji(this)){var I=Gr(this.g);p="";var K=I.length,ne=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Us(this);var he="";break t}this.h.i=new d.TextDecoder}for(x=0;x<K;x++)this.h.h=!0,p+=this.h.i.decode(I[x],{stream:!(ne&&x==K-1)});I.length=0,this.h.g+=p,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=A==200,Qa(this.i,this.u,this.A,this.l,this.R,qt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var et,bt=this.g;if((et=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(et)){var Le=et;break t}}Le=null}if(A=Le)Hi(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_i(this,A);else{this.o=!1,this.s=3,jt(12),gn(this),Us(this);break e}}if(this.P){A=!0;let An;for(;!this.J&&this.C<he.length;)if(An=Or(this,he),An==Gi){qt==4&&(this.s=4,jt(14),A=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Xa){this.s=4,jt(15),Hi(this.i,this.l,he,"[Invalid Chunk]"),A=!1;break}else Hi(this.i,this.l,An,null),_i(this,An);if(ji(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||he.length!=0||this.h.h||(this.s=1,jt(16),A=!1),this.o=this.o&&A,!A)Hi(this.i,this.l,he,"[Invalid Chunked Response]"),gn(this),Us(this);else if(0<he.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),ul(Bt),Bt.M=!0,jt(11))}}else Hi(this.i,this.l,he,null),_i(this,he);qt==4&&gn(this),this.o&&!this.J&&(qt==4?Wu(this.j,this):(this.o=!1,si(this)))}else zu(this.g),A==400&&0<he.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),gn(this),Us(this)}}}catch{}finally{}};function ji(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Or(p,x){var A=p.C,I=x.indexOf(`
`,A);return I==-1?Gi:(A=Number(x.substring(A,I)),isNaN(A)?Xa:(I+=1,I+A>x.length?Gi:(x=x.slice(I,I+A),p.C=I+A,x)))}vi.prototype.cancel=function(){this.J=!0,gn(this)};function si(p){p.S=Date.now()+p.I,St(p,p.I)}function St(p,x){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Ds(S(p.ba,p),x)}function Do(p){p.B&&(d.clearTimeout(p.B),p.B=null)}vi.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(Lu(this.i,this.A),this.L!=2&&(qi(),jt(17)),gn(this),this.s=2,Us(this)):St(this,this.S-p)};function Us(p){p.j.G==0||p.J||Wu(p.j,p)}function gn(p){Do(p);var x=p.M;x&&typeof x.ma=="function"&&x.ma(),p.M=null,nn(p.U),p.g&&(x=p.g,p.g=null,x.abort(),x.ma())}function _i(p,x){try{var A=p.j;if(A.G!=0&&(A.g==p||Ls(A.h,p))){if(!p.K&&Ls(A.h,p)&&A.G==3){try{var I=A.Da.g.parse(x)}catch{I=null}if(Array.isArray(I)&&I.length==3){var K=I;if(K[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<p.F)js(A),zs(A);else break e;ll(A),jt(18)}}else A.za=K[1],0<A.za-A.T&&37500>K[2]&&A.F&&A.v==0&&!A.C&&(A.C=Ds(S(A.Za,A),6e3));if(1>=Ou(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Ki(A,11)}else if((p.K||A.g==p)&&js(A),!$(x))for(K=A.Da.g.parse(x),x=0;x<K.length;x++){let Le=K[x];if(A.T=Le[0],Le=Le[1],A.G==2)if(Le[0]=="c"){A.K=Le[1],A.ia=Le[2];const Bt=Le[3];Bt!=null&&(A.la=Bt,A.j.info("VER="+A.la));const qt=Le[4];qt!=null&&(A.Aa=qt,A.j.info("SVER="+A.Aa));const Ys=Le[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(I=1.5*Ys,A.L=I,A.j.info("backChannelRequestTimeoutMs_="+I)),I=A;const An=p.g;if(An){const Jr=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var ne=I.h;ne.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Vs(ne,ne.h),ne.h=null))}if(I.D){const Wi=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Wi&&(I.ya=Wi,Je(I.I,I.D,Wi))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-p.F,A.j.info("Handshake RTT: "+A.R+"ms")),I=A;var he=p;if(I.qa=Xu(I,I.J?I.ia:null,I.W),he.K){Gn(I.h,he);var et=he,bt=I.L;bt&&(et.I=bt),et.B&&(Do(et),si(et)),I.g=he}else $u(I);0<A.i.length&&Bo(A)}else Le[0]!="stop"&&Le[0]!="close"||Ki(A,7);else A.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Ki(A,7):ol(A):Le[0]!="noop"&&A.l&&A.l.ta(Le),A.v=0)}}qi(4)}catch{}}var If=class{constructor(p,x){this.g=p,this.map=x}};function Za(p){this.l=p||10,d.PerformanceNavigationTiming?(p=d.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function el(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Ou(p){return p.h?1:p.g?p.g.size:0}function Ls(p,x){return p.h?p.h==x:p.g?p.g.has(x):!1}function Vs(p,x){p.g?p.g.add(x):p.h=x}function Gn(p,x){p.h&&p.h==x?p.h=null:p.g&&p.g.has(x)&&p.g.delete(x)}Za.prototype.cancel=function(){if(this.i=yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function yn(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let x=p.i;for(const A of p.g.values())x=x.concat(A.D);return x}return V(p.i)}function Fu(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(f(p)){for(var x=[],A=p.length,I=0;I<A;I++)x.push(p[I]);return x}x=[],A=0;for(I in p)x[A++]=p[I];return x}function Rf(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(f(p)||typeof p=="string"){var x=[];p=p.length;for(var A=0;A<p;A++)x.push(A);return x}x=[],A=0;for(const I in p)x[A++]=I;return x}}}function Po(p,x){if(p.forEach&&typeof p.forEach=="function")p.forEach(x,void 0);else if(f(p)||typeof p=="string")Array.prototype.forEach.call(p,x,void 0);else for(var A=Rf(p),I=Fu(p),K=I.length,ne=0;ne<K;ne++)x.call(void 0,I[ne],A&&A[ne],p)}var tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ko(p,x){if(p){p=p.split("&");for(var A=0;A<p.length;A++){var I=p[A].indexOf("="),K=null;if(0<=I){var ne=p[A].substring(0,I);K=p[A].substring(I+1)}else ne=p[A];x(ne,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Ji(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ji){this.h=p.h,Os(this,p.j),this.o=p.o,this.g=p.g,Fr(this,p.s),this.l=p.l;var x=p.i,A=new Ti;A.i=x.i,x.g&&(A.g=new Map(x.g),A.h=x.h),Uo(this,A),this.m=p.m}else p&&(x=String(p).match(tl))?(this.h=!1,Os(this,x[1]||"",!0),this.o=Fs(x[2]||""),this.g=Fs(x[3]||"",!0),Fr(this,x[4]),this.l=Fs(x[5]||"",!0),Uo(this,x[6]||"",!0),this.m=Fs(x[7]||"")):(this.h=!1,this.i=new Ti(null,this.h))}Ji.prototype.toString=function(){var p=[],x=this.j;x&&p.push(zn(x,nl,!0),":");var A=this.g;return(A||x=="file")&&(p.push("//"),(x=this.o)&&p.push(zn(x,nl,!0),"@"),p.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&p.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&p.push("/"),p.push(zn(A,A.charAt(0)=="/"?il:Bu,!0))),(A=this.i.toString())&&p.push("?",A),(A=this.m)&&p.push("#",zn(A,Df)),p.join("")};function _t(p){return new Ji(p)}function Os(p,x,A){p.j=A?Fs(x,!0):x,p.j&&(p.j=p.j.replace(/:$/,""))}function Fr(p,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);p.s=x}else p.s=null}function Uo(p,x,A){x instanceof Ti?(p.i=x,qu(p.i,p.h)):(A||(x=zn(x,Mf)),p.i=new Ti(x,p.h))}function Je(p,x,A){p.i.set(x,A)}function Br(p){return Je(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Fs(p,x){return p?x?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function zn(p,x,A){return typeof p=="string"?(p=encodeURI(p).replace(x,Nf),A&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Nf(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var nl=/[#\/\?@]/g,Bu=/[#\?:]/g,il=/[#\?]/g,Mf=/[#\?@]/g,Df=/#/g;function Ti(p,x){this.h=this.g=null,this.i=p||null,this.j=!!x}function Ft(p){p.g||(p.g=new Map,p.h=0,p.i&&ko(p.i,function(x,A){p.add(decodeURIComponent(x.replace(/\+/g," ")),A)}))}t=Ti.prototype,t.add=function(p,x){Ft(this),this.i=null,p=Mn(this,p);var A=this.g.get(p);return A||this.g.set(p,A=[]),A.push(x),this.h+=1,this};function Lo(p,x){Ft(p),x=Mn(p,x),p.g.has(x)&&(p.i=null,p.h-=p.g.get(x).length,p.g.delete(x))}function Vo(p,x){return Ft(p),x=Mn(p,x),p.g.has(x)}t.forEach=function(p,x){Ft(this),this.g.forEach(function(A,I){A.forEach(function(K){p.call(x,K,I,this)},this)},this)},t.na=function(){Ft(this);const p=Array.from(this.g.values()),x=Array.from(this.g.keys()),A=[];for(let I=0;I<x.length;I++){const K=p[I];for(let ne=0;ne<K.length;ne++)A.push(x[I])}return A},t.V=function(p){Ft(this);let x=[];if(typeof p=="string")Vo(this,p)&&(x=x.concat(this.g.get(Mn(this,p))));else{p=Array.from(this.g.values());for(let A=0;A<p.length;A++)x=x.concat(p[A])}return x},t.set=function(p,x){return Ft(this),this.i=null,p=Mn(this,p),Vo(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[x]),this.h+=1,this},t.get=function(p,x){return p?(p=this.V(p),0<p.length?String(p[0]):x):x};function Yi(p,x,A){Lo(p,x),0<A.length&&(p.i=null,p.g.set(Mn(p,x),V(A)),p.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],x=Array.from(this.g.keys());for(var A=0;A<x.length;A++){var I=x[A];const ne=encodeURIComponent(String(I)),he=this.V(I);for(I=0;I<he.length;I++){var K=ne;he[I]!==""&&(K+="="+encodeURIComponent(String(he[I]))),p.push(K)}}return this.i=p.join("&")};function Mn(p,x){return x=String(x),p.j&&(x=x.toLowerCase()),x}function qu(p,x){x&&!p.j&&(Ft(p),p.i=null,p.g.forEach(function(A,I){var K=I.toLowerCase();I!=K&&(Lo(this,I),Yi(this,K,A))},p)),p.j=x}function sl(p,x){const A=new Ps;if(d.Image){const I=new Image;I.onload=C(wn,A,"TestLoadImage: loaded",!0,x,I),I.onerror=C(wn,A,"TestLoadImage: error",!1,x,I),I.onabort=C(wn,A,"TestLoadImage: abort",!1,x,I),I.ontimeout=C(wn,A,"TestLoadImage: timeout",!1,x,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=p}else x(!1)}function Hu(p,x){const A=new Ps,I=new AbortController,K=setTimeout(()=>{I.abort(),wn(A,"TestPingServer: timeout",!1,x)},1e4);fetch(p,{signal:I.signal}).then(ne=>{clearTimeout(K),ne.ok?wn(A,"TestPingServer: ok",!0,x):wn(A,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(K),wn(A,"TestPingServer: error",!1,x)})}function wn(p,x,A,I,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),I(A)}catch{}}function ri(){this.g=new bf}function rl(p,x,A){const I=A||"";try{Po(p,function(K,ne){let he=K;h(K)&&(he=qn(K)),x.push(I+ne+"="+encodeURIComponent(he))})}catch(K){throw x.push(I+"type="+encodeURIComponent("_badmap")),K}}function Ei(p){this.l=p.Ub||null,this.j=p.eb||!1}M(Ei,Ya),Ei.prototype.g=function(){return new Dn(this.l,this.j)},Ei.prototype.i=(function(p){return function(){return p}})({});function Dn(p,x){kt.call(this),this.D=p,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Dn,kt),t=Dn.prototype,t.open=function(p,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=x,this.readyState=1,Bs(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(x.body=p),(this.D||d).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xi(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Bs(this)),this.g&&(this.readyState=3,Bs(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oo(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Oo(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var x=p.value?p.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!p.done}))&&(this.response=this.responseText+=x)}p.done?xi(this):Bs(this),this.readyState==3&&Oo(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,xi(this))},t.Qa=function(p){this.g&&(this.response=p,xi(this))},t.ga=function(){this.g&&xi(this)};function xi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Bs(p)}t.setRequestHeader=function(p,x){this.u.append(p,x)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],x=this.h.entries();for(var A=x.next();!A.done;)A=A.value,p.push(A[0]+": "+A[1]),A=x.next();return p.join(`\r
`)};function Bs(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Dn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function qr(p){let x="";return oe(p,function(A,I){x+=I,x+=":",x+=A,x+=`\r
`}),x}function qs(p,x,A){e:{for(I in A){var I=!1;break e}I=!0}I||(A=qr(A),typeof p=="string"?A!=null&&encodeURIComponent(String(A)):Je(p,x,A))}function dt(p){kt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(dt,kt);var sn=/^https?$/i,$i=["POST","PUT"];t=dt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,x,A,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);x=x?x.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yi.g(),this.v=this.o?Uu(this.o):Uu(yi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(x,String(p),!0),this.B=!1}catch(ne){Hr(this,ne);return}if(p=A||"",A=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var K in I)A.set(K,I[K]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ne of I.keys())A.set(ne,I.get(ne));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(A.keys()).find(ne=>ne.toLowerCase()=="content-type"),K=d.FormData&&p instanceof d.FormData,!(0<=Array.prototype.indexOf.call($i,x,void 0))||I||K||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,he]of A)this.g.setRequestHeader(ne,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fo(this),this.u=!0,this.g.send(p),this.u=!1}catch(ne){Hr(this,ne)}};function Hr(p,x){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=x,p.m=5,Hs(p),Gs(p)}function Hs(p){p.A||(p.A=!0,Ot(p,"complete"),Ot(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ot(this,"complete"),Ot(this,"abort"),Gs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gs(this,!0)),dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gu(this):this.bb())},t.bb=function(){Gu(this)};function Gu(p){if(p.h&&typeof u<"u"&&(!p.v[1]||vn(p)!=4||p.Z()!=2)){if(p.u&&vn(p)==4)ku(p.Ea,0,p);else if(Ot(p,"readystatechange"),vn(p)==4){p.h=!1;try{const he=p.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var A;if(!(A=x)){var I;if(I=he===0){var K=String(p.D).match(tl)[1]||null;!K&&d.self&&d.self.location&&(K=d.self.location.protocol.slice(0,-1)),I=!sn.test(K?K.toLowerCase():"")}A=I}if(A)Ot(p,"complete"),Ot(p,"success");else{p.m=6;try{var ne=2<vn(p)?p.g.statusText:""}catch{ne=""}p.l=ne+" ["+p.Z()+"]",Hs(p)}}finally{Gs(p)}}}}function Gs(p,x){if(p.g){Fo(p);const A=p.g,I=p.v[0]?()=>{}:null;p.g=null,p.v=null,x||Ot(p,"ready");try{A.onreadystatechange=I}catch{}}}function Fo(p){p.I&&(d.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function vn(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var x=this.g.responseText;return p&&x.indexOf(p)==0&&(x=x.substring(p.length)),pn(x)}};function Gr(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function zu(p){const x={};p=(p.g&&2<=vn(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<p.length;I++){if($(p[I]))continue;var A=B(p[I]);const K=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ne=x[K]||[];x[K]=ne,ne.push(A)}P(x,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zr(p,x,A){return A&&A.internalChannelParams&&A.internalChannelParams[p]||x}function ju(p){this.Aa=0,this.i=[],this.j=new Ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zr("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zr("baseRetryDelayMs",5e3,p),this.cb=zr("retryDelaySeedMs",1e4,p),this.Wa=zr("forwardChannelMaxRetries",2,p),this.wa=zr("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Za(p&&p.concurrentRequestLimit),this.Da=new ri,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ju.prototype,t.la=8,t.G=1,t.connect=function(p,x,A,I){jt(0),this.W=p,this.H=x||{},A&&I!==void 0&&(this.H.OSID=A,this.H.OAID=I),this.F=this.X,this.I=Xu(this,null,this.W),Bo(this)};function ol(p){if(Ju(p),p.G==3){var x=p.U++,A=_t(p.I);if(Je(A,"SID",p.K),Je(A,"RID",x),Je(A,"TYPE","terminate"),jr(p,A),x=new vi(p,p.j,x),x.L=2,x.v=Br(_t(A)),A=!1,d.navigator&&d.navigator.sendBeacon)try{A=d.navigator.sendBeacon(x.v.toString(),"")}catch{}!A&&d.Image&&(new Image().src=x.v,A=!0),A||(x.g=Zu(x.j,null),x.g.ea(x.v)),x.F=Date.now(),si(x)}cl(p)}function zs(p){p.g&&(ul(p),p.g.cancel(),p.g=null)}function Ju(p){zs(p),p.u&&(d.clearTimeout(p.u),p.u=null),js(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&d.clearTimeout(p.s),p.s=null)}function Bo(p){if(!el(p.h)&&!p.s){p.s=!0;var x=p.Ga;te||ke(),fe||(te(),fe=!0),xe.add(x,p),p.B=0}}function Pf(p,x){return Ou(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=x.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Ds(S(p.Ga,p,x),Qu(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const K=new vi(this,this.j,p);let ne=this.o;if(this.S&&(ne?(ne=N(ne),k(ne,this.S)):ne=this.S),this.m!==null||this.O||(K.H=ne,ne=null),this.P)e:{for(var x=0,A=0;A<this.i.length;A++){t:{var I=this.i[A];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(x+=I,4096<x){x=A;break e}if(x===4096||A===this.i.length-1){x=A+1;break e}}x=1e3}else x=1e3;x=al(this,K,x),A=_t(this.I),Je(A,"RID",p),Je(A,"CVER",22),this.D&&Je(A,"X-HTTP-Session-Id",this.D),jr(this,A),ne&&(this.O?x="headers="+encodeURIComponent(String(qr(ne)))+"&"+x:this.m&&qs(A,this.m,ne)),Vs(this.h,K),this.Ua&&Je(A,"TYPE","init"),this.P?(Je(A,"$req",x),Je(A,"SID","null"),K.T=!0,Vr(K,A,null)):Vr(K,A,x),this.G=2}}else this.G==3&&(p?Yu(this,p):this.i.length==0||el(this.h)||Yu(this))};function Yu(p,x){var A;x?A=x.l:A=p.U++;const I=_t(p.I);Je(I,"SID",p.K),Je(I,"RID",A),Je(I,"AID",p.T),jr(p,I),p.m&&p.o&&qs(I,p.m,p.o),A=new vi(p,p.j,A,p.B+1),p.m===null&&(A.H=p.o),x&&(p.i=x.D.concat(p.i)),x=al(p,A,1e3),A.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Vs(p.h,A),Vr(A,I,x)}function jr(p,x){p.H&&oe(p.H,function(A,I){Je(x,I,A)}),p.l&&Po({},function(A,I){Je(x,I,A)})}function al(p,x,A){A=Math.min(p.i.length,A);var I=p.l?S(p.l.Na,p.l,p):null;e:{var K=p.i;let ne=-1;for(;;){const he=["count="+A];ne==-1?0<A?(ne=K[0].g,he.push("ofs="+ne)):ne=0:he.push("ofs="+ne);let et=!0;for(let bt=0;bt<A;bt++){let Le=K[bt].g;const Bt=K[bt].map;if(Le-=ne,0>Le)ne=Math.max(0,K[bt].g-100),et=!1;else try{rl(Bt,he,"req"+Le+"_")}catch{I&&I(Bt)}}if(et){I=he.join("&");break e}}}return p=p.i.splice(0,A),x.D=p,I}function $u(p){if(!p.g&&!p.u){p.Y=1;var x=p.Fa;te||ke(),fe||(te(),fe=!0),xe.add(x,p),p.v=0}}function ll(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Ds(S(p.Fa,p),Qu(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,Ku(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Ds(S(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),zs(this),Ku(this))};function ul(p){p.A!=null&&(d.clearTimeout(p.A),p.A=null)}function Ku(p){p.g=new vi(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var x=_t(p.qa);Je(x,"RID","rpc"),Je(x,"SID",p.K),Je(x,"AID",p.T),Je(x,"CI",p.F?"0":"1"),!p.F&&p.ja&&Je(x,"TO",p.ja),Je(x,"TYPE","xmlhttp"),jr(p,x),p.m&&p.o&&qs(x,p.m,p.o),p.L&&(p.g.I=p.L);var A=p.g;p=p.ia,A.L=1,A.v=Br(_t(x)),A.m=null,A.P=!0,zi(A,p)}t.Za=function(){this.C!=null&&(this.C=null,zs(this),ll(this),jt(19))};function js(p){p.C!=null&&(d.clearTimeout(p.C),p.C=null)}function Wu(p,x){var A=null;if(p.g==x){js(p),ul(p),p.g=null;var I=2}else if(Ls(p.h,x))A=x.D,Gn(p.h,x),I=1;else return;if(p.G!=0){if(x.o)if(I==1){A=x.m?x.m.length:0,x=Date.now()-x.F;var K=p.B;I=Mo(),Ot(I,new Ka(I,A)),Bo(p)}else $u(p);else if(K=x.s,K==3||K==0&&0<x.X||!(I==1&&Pf(p,x)||I==2&&ll(p)))switch(A&&0<A.length&&(x=p.h,x.i=x.i.concat(A)),K){case 1:Ki(p,5);break;case 4:Ki(p,10);break;case 3:Ki(p,6);break;default:Ki(p,2)}}}function Qu(p,x){let A=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(A*=2),A*x}function Ki(p,x){if(p.j.info("Error code "+x),x==2){var A=S(p.fb,p),I=p.Xa;const K=!I;I=new Ji(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Os(I,"https"),Br(I),K?sl(I.toString(),A):Hu(I.toString(),A)}else jt(2);p.G=0,p.l&&p.l.sa(x),cl(p),Ju(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function cl(p){if(p.G=0,p.ka=[],p.l){const x=yn(p.h);(x.length!=0||p.i.length!=0)&&(U(p.ka,x),U(p.ka,p.i),p.h.i.length=0,V(p.i),p.i.length=0),p.l.ra()}}function Xu(p,x,A){var I=A instanceof Ji?_t(A):new Ji(A);if(I.g!="")x&&(I.g=x+"."+I.g),Fr(I,I.s);else{var K=d.location;I=K.protocol,x=x?x+"."+K.hostname:K.hostname,K=+K.port;var ne=new Ji(null);I&&Os(ne,I),x&&(ne.g=x),K&&Fr(ne,K),A&&(ne.l=A),I=ne}return A=p.D,x=p.ya,A&&x&&Je(I,A,x),Je(I,"VER",p.la),jr(p,I),I}function Zu(p,x,A){if(x&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=p.Ca&&!p.pa?new dt(new Ei({eb:A})):new dt(p.pa),x.Ha(p.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ec(){}t=ec.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qo(){}qo.prototype.g=function(p,x){return new _n(p,x)};function _n(p,x){kt.call(this),this.g=new ju(x),this.l=p,this.h=x&&x.messageUrlParams||null,p=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(p?p["X-WebChannel-Content-Type"]=x.messageContentType:p={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(p?p["X-WebChannel-Client-Profile"]=x.va:p={"X-WebChannel-Client-Profile":x.va}),this.g.S=p,(p=x&&x.Sb)&&!$(p)&&(this.g.m=p),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!$(x)&&(this.g.D=x,p=this.h,p!==null&&x in p&&(p=this.h,x in p&&delete p[x])),this.j=new Js(this)}M(_n,kt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){ol(this.g)},_n.prototype.o=function(p){var x=this.g;if(typeof p=="string"){var A={};A.__data__=p,p=A}else this.u&&(A={},A.__data__=qn(p),p=A);x.i.push(new If(x.Ya++,p)),x.G==3&&Bo(x)},_n.prototype.N=function(){this.g.l=null,delete this.j,ol(this.g),delete this.g,_n.aa.N.call(this)};function tc(p){Rs.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var x=p.__sm__;if(x){e:{for(const A in x){p=A;break e}p=void 0}(this.i=p)&&(p=this.i,x=x!==null&&p in x?x[p]:void 0),this.data=x}else this.data=p}M(tc,Rs);function nc(){ii.call(this),this.status=1}M(nc,ii);function Js(p){this.g=p}M(Js,ec),Js.prototype.ua=function(){Ot(this.g,"a")},Js.prototype.ta=function(p){Ot(this.g,new tc(p))},Js.prototype.sa=function(p){Ot(this.g,new nc)},Js.prototype.ra=function(){Ot(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,ow=function(){return new qo},rw=function(){return Mo()},sw=Hn,fp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vt.NO_ERROR=0,vt.TIMEOUT=8,vt.HTTP_ERROR=6,Ed=vt,Jt.COMPLETE="complete",iw=Jt,Lr.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",kt.prototype.listen=kt.prototype.K,Ql=Lr,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,nw=dt}).apply(typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{});const mE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new qp("@firebase/firestore");function Wl(){return go.logLevel}function Te(t,...e){if(go.logLevel<=Ge.DEBUG){const n=e.map(eg);go.debug(`Firestore (${Ha}): ${t}`,...n)}}function Ss(t,...e){if(go.logLevel<=Ge.ERROR){const n=e.map(eg);go.error(`Firestore (${Ha}): ${t}`,...n)}}function Ra(t,...e){if(go.logLevel<=Ge.WARN){const n=e.map(eg);go.warn(`Firestore (${Ha}): ${t}`,...n)}}function eg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t="Unexpected state"){const e=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: `+t;throw Ss(e),new Error(e)}function rt(t,e){t||Re()}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class YV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $V{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0);let i=this.i;const o=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let a=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Cr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},d=f=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Cr)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(rt(typeof i.accessToken=="string"),new aw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string"),new un(e)}}class KV{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class WV{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new KV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class QV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){rt(this.o===void 0);const i=a=>{a.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,Te("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(rt(typeof n.token=="string"),this.R=n.token,new QV(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=ZV(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<n&&(i+=e.charAt(o[a]%e.length))}return i}}function Ke(t,e){return t<e?-1:t>e?1:0}function Na(t,e,n){return t.length===e.length&&t.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Vt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Vt(0,0))}static max(){return new Me(new Vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n,i){n===void 0?n=0:n>e.length&&Re(),i===void 0?i=e.length-n:i>e.length-n&&Re(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return uu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof uu?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const a=e.get(o),u=n.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xt extends uu{construct(e,n,i){return new xt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new xt(n)}static emptyPath(){return new xt([])}}const e4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends uu{construct(e,n,i){return new Zt(e,n,i)}static isValidIdentifier(e){return e4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Zt(["__name__"])}static fromServerFormat(e){const n=[];let i="",o=0;const a=()=>{if(i.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(n)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(xt.fromString(e))}static fromName(e){return new Ce(xt.fromString(e).popFirst(5))}static empty(){return new Ce(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new xt(e.slice()))}}function t4(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=Me.fromTimestamp(i===1e9?new Vt(n+1,0):new Vt(n,i));return new Ir(o,Ce.empty(),e)}function n4(t){return new Ir(t.readTime,t.key,-1)}class Ir{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ir(Me.min(),Ce.empty(),-1)}static max(){return new Ir(Me.max(),Ce.empty(),-1)}}function i4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==s4)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,i)=>{n(e)}))}static reject(e){return new ue(((n,i)=>{i(e)}))}static waitFor(e){return new ue(((n,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&n()}),(f=>i(f)))})),u=!0,a===o&&n()}))}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next((o=>o?ue.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,a)=>{i.push(n.call(this,o,a))})),this.waitFor(i)}static mapArray(e,n){return new ue(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const h=f;n(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,n){return new ue(((i,o)=>{const a=()=>{e()===!0?n().next((()=>{a()}),o):i()};a()}))}}function o4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Iu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tg.oe=-1;function uf(t){return t==null}function Od(t){return t===0&&1/t==-1/0}function a4(t){return typeof t=="number"&&Number.isInteger(t)&&!Od(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ud(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ud(this.root,e,this.comparator,!1)}getReverseIterator(){return new ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ud(this.root,e,this.comparator,!0)}}class ud{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,i,o,a){this.key=e,this.value=n,this.color=i??Xt.RED,this.left=o??Xt.EMPTY,this.right=a??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,a){return new Xt(e??this.key,n??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,n,i),null):a===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,n,i,o,a){return this}insert(e,n,i){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gE(this.data.getIterator())}getIteratorFrom(e){return new gE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new en(this.comparator);return n.data=e,n}}class gE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new ci([])}unionWith(e){let n=new en(Zt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ci(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new cw("Invalid base64 string: "+a):a}})(e);return new tn(n)}static fromUint8Array(e){const n=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const l4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t){if(rt(!!t),typeof t=="string"){let e=0;const n=l4.exec(t);if(rt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yo(t){return typeof t=="string"?tn.fromBase64String(t):tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ig(t){const e=t.mapValue.fields.__previous_value__;return ng(e)?ig(e):e}function cu(t){const e=Rr(t.mapValue.fields.__local_write_time__.timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,i,o,a,u,d,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=h}}class du{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new du("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd={mapValue:{}};function vo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ng(t)?4:d4(t)?9007199254740991:c4(t)?10:11:Re()}function Pi(t,e){if(t===e)return!0;const n=vo(t);if(n!==vo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cu(t).isEqual(cu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Rr(o.timestampValue),d=Rr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,a){return yo(o.bytesValue).isEqual(yo(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,a){return Ct(o.geoPointValue.latitude)===Ct(a.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(a.geoPointValue.longitude)})(t,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Ct(o.integerValue)===Ct(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Ct(o.doubleValue),d=Ct(a.doubleValue);return u===d?Od(u)===Od(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return Na(t.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(pE(u)!==pE(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Pi(u[f],d[f])))return!1;return!0})(t,e);default:return Re()}}function fu(t,e){return(t.values||[]).find((n=>Pi(n,e)))!==void 0}function Ma(t,e){if(t===e)return 0;const n=vo(t),i=vo(e);if(n!==i)return Ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Ct(a.integerValue||a.doubleValue),f=Ct(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(t,e);case 3:return yE(t.timestampValue,e.timestampValue);case 4:return yE(cu(t),cu(e));case 5:return Ke(t.stringValue,e.stringValue);case 6:return(function(a,u){const d=yo(a),f=yo(u);return d.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let h=0;h<d.length&&h<f.length;h++){const _=Ke(d[h],f[h]);if(_!==0)return _}return Ke(d.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Ke(Ct(a.latitude),Ct(u.latitude));return d!==0?d:Ke(Ct(a.longitude),Ct(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return vE(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,h,_;const E=a.fields||{},S=u.fields||{},C=(d=E.value)===null||d===void 0?void 0:d.arrayValue,M=(f=S.value)===null||f===void 0?void 0:f.arrayValue,V=Ke(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((_=M==null?void 0:M.values)===null||_===void 0?void 0:_.length)||0);return V!==0?V:vE(C,M)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===cd.mapValue&&u===cd.mapValue)return 0;if(a===cd.mapValue)return 1;if(u===cd.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),h=u.fields||{},_=Object.keys(h);f.sort(),_.sort();for(let E=0;E<f.length&&E<_.length;++E){const S=Ke(f[E],_[E]);if(S!==0)return S;const C=Ma(d[f[E]],h[_[E]]);if(C!==0)return C}return Ke(f.length,_.length)})(t.mapValue,e.mapValue);default:throw Re()}}function yE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=Rr(t),i=Rr(e),o=Ke(n.seconds,i.seconds);return o!==0?o:Ke(n.nanos,i.nanos)}function vE(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const a=Ma(n[o],i[o]);if(a)return a}return Ke(n.length,i.length)}function Da(t){return hp(t)}function hp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Rr(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return yo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ce.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",o=!0;for(const a of n.values||[])o?o=!1:i+=",",i+=hp(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${hp(n.fields[u])}`;return o+"}"})(t.mapValue):Re()}function mp(t){return!!t&&"integerValue"in t}function sg(t){return!!t&&"arrayValue"in t}function _E(t){return!!t&&"nullValue"in t}function TE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xd(t){return!!t&&"mapValue"in t}function c4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function nu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wo(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=nu(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function d4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!xd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(n)}setAll(e){let n=Zt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,i,o),i={},o=[],n=d.popLast()}u?i[d.lastSegment()]=nu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,o)}delete(e){const n=this.field(e.popLast());xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];xd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){wo(n,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Bn(nu(this.value))}}function dw(t){const e=[];return wo(t.fields,((n,i)=>{const o=new Zt([n]);if(xd(i)){const a=dw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,i,o,a,u,d){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new cn(e,0,Me.min(),Me.min(),Me.min(),Bn.empty(),0)}static newFoundDocument(e,n,i,o){return new cn(e,1,n,Me.min(),i,o,0)}static newNoDocument(e,n){return new cn(e,2,n,Me.min(),Me.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Me.min(),Me.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.position=e,this.inclusive=n}}function EE(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const a=e[o],u=t.position[o];if(a.field.isKeyField()?i=Ce.comparator(Ce.fromName(u.referenceValue),n.key):i=Ma(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function xE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n="asc"){this.field=e,this.dir=n}}function f4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{}class Lt extends fw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new m4(e,n,i):n==="array-contains"?new y4(e,i):n==="in"?new v4(e,i):n==="not-in"?new _4(e,i):n==="array-contains-any"?new T4(e,i):new Lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new p4(e,i):new g4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ma(n,this.value)):n!==null&&vo(this.value)===vo(n)&&this.matchesComparison(Ma(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends fw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ki(e,n)}matches(e){return hw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function hw(t){return t.op==="and"}function mw(t){return h4(t)&&hw(t)}function h4(t){for(const e of t.filters)if(e instanceof ki)return!1;return!0}function pp(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+Da(t.value);if(mw(t))return t.filters.map((e=>pp(e))).join(",");{const e=t.filters.map((n=>pp(n))).join(",");return`${t.op}(${e})`}}function pw(t,e){return t instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&Pi(i.value,o.value)})(t,e):t instanceof ki?(function(i,o){return o instanceof ki&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&pw(u,o.filters[d])),!0):!1})(t,e):void Re()}function gw(t){return t instanceof Lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Da(n.value)}`})(t):t instanceof ki?(function(n){return n.op.toString()+" {"+n.getFilters().map(gw).join(" ,")+"}"})(t):"Filter"}class m4 extends Lt{constructor(e,n,i){super(e,n,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class p4 extends Lt{constructor(e,n){super(e,"in",n),this.keys=yw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class g4 extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=yw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function yw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Ce.fromName(i.referenceValue)))}class y4 extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sg(n)&&fu(n.arrayValue,this.value)}}class v4 extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fu(this.value.arrayValue,n)}}class _4 extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!fu(this.value.arrayValue,n)}}class T4 extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>fu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function SE(t,e=null,n=[],i=[],o=null,a=null,u=null){return new E4(t,e,n,i,o,a,u)}function rg(t){const e=De(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>pp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),uf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Da(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Da(i))).join(",")),e.ue=n}return e.ue}function og(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!f4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xE(t.startAt,e.startAt)&&xE(t.endAt,e.endAt)}function gp(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n=null,i=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function x4(t,e,n,i,o,a,u,d){return new cf(t,e,n,i,o,a,u,d)}function ag(t){return new cf(t)}function wE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function S4(t){return t.collectionGroup!==null}function iu(t){const e=De(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new en(Zt.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Bd(a,i))})),n.has(Zt.keyField().canonicalString())||e.ce.push(new Bd(Zt.keyField(),i))}return e.ce}function Mi(t){const e=De(t);return e.le||(e.le=w4(e,iu(t))),e.le}function w4(t,e){if(t.limitType==="F")return SE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Bd(o.field,a)}));const n=t.endAt?new Fd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Fd(t.startAt.position,t.startAt.inclusive):null;return SE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function yp(t,e,n){return new cf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function df(t,e){return og(Mi(t),Mi(e))&&t.limitType===e.limitType}function vw(t){return`${rg(Mi(t))}|lt:${t.limitType}`}function ga(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>gw(o))).join(", ")}]`),uf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Da(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Da(o))).join(",")),`Target(${i})`})(Mi(t))}; limitType=${t.limitType})`}function ff(t,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ce.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,o){for(const a of iu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(t,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,f){const h=EE(u,d,f);return u.inclusive?h<=0:h<0})(i.startAt,iu(i),o)||i.endAt&&!(function(u,d,f){const h=EE(u,d,f);return u.inclusive?h>=0:h>0})(i.endAt,iu(i),o))})(t,e)}function A4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _w(t){return(e,n)=>{let i=!1;for(const o of iu(t)){const a=C4(o,e,n);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function C4(t,e,n){const i=t.field.isKeyField()?Ce.comparator(e.key,n.key):(function(a,u,d){const f=u.data.field(a),h=d.data.field(a);return f!==null&&h!==null?Ma(f,h):Re()})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,((n,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return uw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new yt(Ce.comparator);function ws(){return b4}const Tw=new yt(Ce.comparator);function Xl(...t){let e=Tw;for(const n of t)e=e.insert(n.key,n);return e}function Ew(t){let e=Tw;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function co(){return su()}function xw(){return su()}function su(){return new Ga((t=>t.toString()),((t,e)=>t.isEqual(e)))}const I4=new yt(Ce.comparator),R4=new en(Ce.comparator);function qe(...t){let e=R4;for(const n of t)e=e.add(n);return e}const N4=new en(Ke);function M4(){return N4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Od(e)?"-0":e}}function Sw(t){return{integerValue:""+t}}function D4(t,e){return a4(e)?Sw(e):lg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this._=void 0}}function P4(t,e,n){return t instanceof hu?(function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&ng(a)&&(a=ig(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(n,e):t instanceof mu?Aw(t,e):t instanceof pu?Cw(t,e):(function(o,a){const u=ww(o,a),d=AE(u)+AE(o.Pe);return mp(u)&&mp(o.Pe)?Sw(d):lg(o.serializer,d)})(t,e)}function k4(t,e,n){return t instanceof mu?Aw(t,e):t instanceof pu?Cw(t,e):n}function ww(t,e){return t instanceof qd?(function(i){return mp(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class hu extends hf{}class mu extends hf{constructor(e){super(),this.elements=e}}function Aw(t,e){const n=bw(e);for(const i of t.elements)n.some((o=>Pi(o,i)))||n.push(i);return{arrayValue:{values:n}}}class pu extends hf{constructor(e){super(),this.elements=e}}function Cw(t,e){let n=bw(e);for(const i of t.elements)n=n.filter((o=>!Pi(o,i)));return{arrayValue:{values:n}}}class qd extends hf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function AE(t){return Ct(t.integerValue||t.doubleValue)}function bw(t){return sg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n){this.field=e,this.transform=n}}function L4(t,e){return t.field.isEqual(e.field)&&(function(i,o){return i instanceof mu&&o instanceof mu||i instanceof pu&&o instanceof pu?Na(i.elements,o.elements,Pi):i instanceof qd&&o instanceof qd?Pi(i.Pe,o.Pe):i instanceof hu&&o instanceof hu})(t.transform,e.transform)}class V4{constructor(e,n){this.version=e,this.transformResults=n}}class ys{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ys}static exists(e){return new ys(void 0,e)}static updateTime(e){return new ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mf{}function Iw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nw(t.key,ys.none()):new pf(t.key,t.data,ys.none());{const n=t.data,i=Bn.empty();let o=new en(Zt.comparator);for(let a of e.fields)if(!o.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Ao(t.key,i,new ci(o.toArray()),ys.none())}}function O4(t,e,n){t instanceof pf?(function(o,a,u){const d=o.value.clone(),f=bE(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Ao?(function(o,a,u){if(!Sd(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=bE(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(Rw(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function ru(t,e,n,i){return t instanceof pf?(function(a,u,d,f){if(!Sd(a.precondition,u))return d;const h=a.value.clone(),_=IE(a.fieldTransforms,f,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof Ao?(function(a,u,d,f){if(!Sd(a.precondition,u))return d;const h=IE(a.fieldTransforms,f,u),_=u.data;return _.setAll(Rw(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,u,d){return Sd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function F4(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),a=ww(i.transform,o||null);a!=null&&(n===null&&(n=Bn.empty()),n.set(i.field,a))}return n||null}function CE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Na(i,o,((a,u)=>L4(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pf extends mf{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ao extends mf{constructor(e,n,i,o,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Rw(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function bE(t,e,n){const i=new Map;rt(t.length===n.length);for(let o=0;o<n.length;o++){const a=t[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,k4(u,d,n[o]))}return i}function IE(t,e,n){const i=new Map;for(const o of t){const a=o.transform,u=n.data.field(o.field);i.set(o.field,P4(a,u,e))}return i}class Nw extends mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class B4 extends mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&O4(a,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ru(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ru(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=xw();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=n.has(o.key)?null:d;const f=Iw(u,d);f!==null&&i.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Me.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,((n,i)=>CE(n,i)))&&Na(this.baseMutations,e.baseMutations,((n,i)=>CE(n,i)))}}class ug{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){rt(e.mutations.length===i.length);let o=(function(){return I4})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new ug(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,ze;function z4(t){switch(t){default:return Re();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function Mw(t){if(t===void 0)return Ss("GRPC error has no .code"),ce.UNKNOWN;switch(t){case Dt.OK:return ce.OK;case Dt.CANCELLED:return ce.CANCELLED;case Dt.UNKNOWN:return ce.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return ce.INTERNAL;case Dt.UNAVAILABLE:return ce.UNAVAILABLE;case Dt.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Dt.NOT_FOUND:return ce.NOT_FOUND;case Dt.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Dt.ABORTED:return ce.ABORTED;case Dt.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Dt.DATA_LOSS:return ce.DATA_LOSS;default:return Re()}}(ze=Dt||(Dt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new ho([4294967295,4294967295],0);function RE(t){const e=j4().encode(t),n=new tw;return n.update(e),new Uint8Array(n.digest())}function NE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ho([n,i],0),new ho([o,a],0)]}class cg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Zl(`Invalid padding: ${n}`);if(i<0)throw new Zl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ho.fromNumber(this.Ie)}Ee(e,n,i){let o=e.add(n.multiply(ho.fromNumber(i)));return o.compare(J4)===1&&(o=new ho([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=RE(e),[i,o]=NE(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);if(!this.de(u))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new cg(a,o,n);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const n=RE(e),[i,o]=NE(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,i,o,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new gf(Me.min(),o,new yt(Ke),ws(),qe())}}class Ru{constructor(e,n,i,o,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ru(i,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,i,o){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=o}}class Dw{constructor(e,n){this.targetId=e,this.me=n}}class Pw{constructor(e,n,i=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class ME{constructor(){this.fe=0,this.ge=PE(),this.pe=tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=qe(),n=qe(),i=qe();return this.ge.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Re()}})),new Ru(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=PE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Y4{constructor(e){this.Le=e,this.Be=new Map,this.ke=ws(),this.qe=DE(),this.Qe=new yt(Ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Re()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((i,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,i=e.me.count,o=this.Je(n);if(o){const a=o.target;if(gp(a))if(i===0){const u=new Ce(a.path);this.Ue(n,u,cn.newNoDocument(u,Me.min()))}else rt(i===1);else{const u=this.Ye(n);if(u!==i){const d=this.Ze(e),f=d?this.Xe(d,e,u):1;if(f!==0){this.je(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=n;let u,d;try{u=yo(i).toUint8Array()}catch(f){if(f instanceof cw)return Ra("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new cg(u,o,a)}catch(f){return Ra(f instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Ie===0?null:d}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach((a=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(n,a,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((a,u)=>{const d=this.Je(u);if(d){if(a.current&&gp(d.target)){const f=new Ce(d.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,cn.newNoDocument(f,e))}a.be&&(n.set(u,a.ve()),a.Ce())}}));let i=qe();this.qe.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const h=this.Je(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const o=new gf(e,n,this.Qe,this.ke,i);return this.ke=ws(),this.qe=DE(),this.Qe=new yt(Ke),o}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ME,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new en(Ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ME),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function DE(){return new yt(Ce.comparator)}function PE(){return new yt(Ce.comparator)}const $4={asc:"ASCENDING",desc:"DESCENDING"},K4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W4={and:"AND",or:"OR"};class Q4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vp(t,e){return t.useProto3Json||uf(e)?e:{value:e}}function Hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function X4(t,e){return Hd(t,e.toTimestamp())}function Di(t){return rt(!!t),Me.fromTimestamp((function(n){const i=Rr(n);return new Vt(i.seconds,i.nanos)})(t))}function dg(t,e){return _p(t,e).canonicalString()}function _p(t,e){const n=(function(o){return new xt(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Uw(t){const e=xt.fromString(t);return rt(Bw(e)),e}function Tp(t,e){return dg(t.databaseId,e.path)}function Hm(t,e){const n=Uw(e);if(n.get(1)!==t.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(Vw(n))}function Lw(t,e){return dg(t.databaseId,e)}function Z4(t){const e=Uw(t);return e.length===4?xt.emptyPath():Vw(e)}function Ep(t){return new xt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vw(t){return rt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function kE(t,e,n){return{name:Tp(t,e),fields:n.value.mapValue.fields}}function e3(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(rt(_===void 0||typeof _=="string"),tn.fromBase64String(_||"")):(rt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),tn.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?ce.UNKNOWN:Mw(h.code);return new we(_,h.message||"")})(u);n=new Pw(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Hm(t,i.document.name),a=Di(i.document.updateTime),u=i.document.createTime?Di(i.document.createTime):Me.min(),d=new Bn({mapValue:{fields:i.document.fields}}),f=cn.newFoundDocument(o,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];n=new wd(h,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Hm(t,i.document),a=i.readTime?Di(i.readTime):Me.min(),u=cn.newNoDocument(o,a),d=i.removedTargetIds||[];n=new wd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Hm(t,i.document),a=i.removedTargetIds||[];n=new wd([],a,o,null)}else{if(!("filter"in e))return Re();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new G4(o,a),d=i.targetId;n=new Dw(d,u)}}return n}function t3(t,e){let n;if(e instanceof pf)n={update:kE(t,e.key,e.value)};else if(e instanceof Nw)n={delete:Tp(t,e.key)};else if(e instanceof Ao)n={update:kE(t,e.key,e.data),updateMask:c3(e.fieldMask)};else{if(!(e instanceof B4))return Re();n={verify:Tp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof hu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof mu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof pu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof qd)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw Re()})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:X4(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re()})(t,e.precondition)),n}function n3(t,e){return t&&t.length>0?(rt(e!==void 0),t.map((n=>(function(o,a){let u=o.updateTime?Di(o.updateTime):Di(a);return u.isEqual(Me.min())&&(u=Di(a)),new V4(u,o.transformResults||[])})(n,e)))):[]}function i3(t,e){return{documents:[Lw(t,e.path)]}}function s3(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Lw(t,o);const a=(function(h){if(h.length!==0)return Fw(ki.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(S){return{field:ya(S.field),direction:a3(S.dir)}})(_)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=vp(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:n,parent:o}}function r3(t){let e=Z4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){rt(i===1);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];n.where&&(a=(function(E){const S=Ow(E);return S instanceof ki&&mw(S)?S.getFilters():[S]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((S=>(function(M){return new Bd(va(M.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(S)))})(n.orderBy));let d=null;n.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,uf(S)?null:S})(n.limit));let f=null;n.startAt&&(f=(function(E){const S=!!E.before,C=E.values||[];return new Fd(C,S)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const S=!E.before,C=E.values||[];return new Fd(C,S)})(n.endAt)),x4(e,o,u,a,d,"F",f,h)}function o3(t,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ow(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=va(n.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=va(n.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=va(n.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=va(n.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Re()}})(t):t.fieldFilter!==void 0?(function(n){return Lt.create(va(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ki.create(n.compositeFilter.filters.map((i=>Ow(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}})(n.compositeFilter.op))})(t):Re()}function a3(t){return $4[t]}function l3(t){return K4[t]}function u3(t){return W4[t]}function ya(t){return{fieldPath:t.canonicalString()}}function va(t){return Zt.fromServerFormat(t.fieldPath)}function Fw(t){return t instanceof Lt?(function(n){if(n.op==="=="){if(TE(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NAN"}};if(_E(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(TE(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NAN"}};if(_E(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(n.field),op:l3(n.op),value:n.value}}})(t):t instanceof ki?(function(n){const i=n.getFilters().map((o=>Fw(o)));return i.length===1?i[0]:{compositeFilter:{op:u3(n.op),filters:i}}})(t):Re()}function c3(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Bw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,i,o,a=Me.min(),u=Me.min(),d=tn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.ct=e}}function f3(t){const e=r3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.un=new m3}addToCollectionParentIndex(e,n){return this.un.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Ir.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class m3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new en(xt.comparator),a=!o.has(i);return this.index[n]=o.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new en(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Pa(0)}static kn(){return new Pa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(){this.changes=new Ga((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&ru(i.mutation,o,ci.empty(),Vt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,qe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=qe()){const o=co();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((a=>{let u=Xl();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=co();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,qe())))}populateOverlays(e,n,i){const o=[];return i.forEach((a=>{n.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,i,o){let a=ws();const u=su(),d=(function(){return su()})();return n.forEach(((f,h)=>{const _=i.get(h.key);o.has(h.key)&&(_===void 0||_.mutation instanceof Ao)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),ru(_.mutation,h,_.mutation.getFieldMask(),Vt.now())):u.set(h.key,ci.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,_)=>u.set(h,_))),n.forEach(((h,_)=>{var E;return d.set(h,new g3(_,(E=u.get(h))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,n){const i=su();let o=new yt(((u,d)=>u-d)),a=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((f=>{const h=n.get(f);if(h===null)return;let _=i.get(f)||ci.empty();_=d.applyToLocalView(h,_),i.set(f,_);const E=(o.get(d.batchId)||qe()).add(f);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),h=f.key,_=f.value,E=xw();_.forEach((S=>{if(!a.has(S)){const C=Iw(n.get(S),i.get(S));C!==null&&E.set(S,C),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ue.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(u){return Ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):S4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-a.size):ue.resolve(co());let d=-1,f=a;return u.next((h=>ue.forEach(h,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?ue.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{f=f.insert(_,S)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,qe()))).next((_=>({batchId:d,changes:Ew(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next((i=>{let o=Xl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const a=n.collectionGroup;let u=Xl();return this.indexManager.getCollectionParents(e,a).next((d=>ue.forEach(d,(f=>{const h=(function(E,S){return new cf(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((_=>{_.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,o)))).next((u=>{a.forEach(((f,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,cn.newInvalidDocument(_)))}));let d=Xl();return u.forEach(((f,h)=>{const _=a.get(f);_!==void 0&&ru(_.mutation,h,ci.empty(),Vt.now()),ff(n,h)&&(d=d.insert(f,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ue.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Di(o.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:f3(o.bundledQuery),readTime:Di(o.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this.overlays=new yt(Ce.comparator),this.Ir=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=co();return ue.forEach(n,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,a)=>{this.ht(e,n,a)})),ue.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const o=co(),a=n.length+1,u=new Ce(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let a=new yt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=co(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=co(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=o)););return ue.resolve(d)}ht(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new H4(n,i));let a=this.Ir.get(n);a===void 0&&(a=qe(),this.Ir.set(n,a)),this.Ir.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(){this.Tr=new en(Gt.Er),this.dr=new en(Gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Gt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Vr(new Gt(e,n))}mr(e,n){e.forEach((i=>this.removeReference(i,n)))}gr(e){const n=new Ce(new xt([])),i=new Gt(n,e),o=new Gt(n,e+1),a=[];return this.dr.forEachInRange([i,o],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ce(new xt([])),i=new Gt(n,e),o=new Gt(n,e+1);let a=qe();return this.dr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new Gt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Gt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ce.comparator(e.key,n.key)||Ke(e.wr,n.wr)}static Ar(e,n){return Ke(e.wr,n.wr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new en(Gt.Er)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new q4(a,n,i,o);this.mutationQueue.push(u);for(const d of o)this.br=this.br.add(new Gt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,n){return ue.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.vr(i),a=o<0?0:o;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Gt(n,0),o=new Gt(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([i,o],(u=>{const d=this.Dr(u.wr);a.push(d)})),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new en(Ke);return n.forEach((o=>{const a=new Gt(o,0),u=new Gt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(d=>{i=i.add(d.wr)}))})),ue.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let a=i;Ce.isDocumentKey(a)||(a=a.child(""));const u=new Gt(new Ce(a),0);let d=new en(Ke);return this.br.forEachWhile((f=>{const h=f.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(f.wr)),!0)}),u),ue.resolve(this.Cr(d))}Cr(e){const n=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){rt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ue.forEach(n.mutations,(o=>{const a=new Gt(o.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,n){const i=new Gt(n,0),o=this.br.firstAfterOrEqual(i);return ue.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.Mr=e,this.docs=(function(){return new yt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),a=o?o.size:0,u=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let i=ws();return n.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():cn.newInvalidDocument(o))})),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let a=ws();const u=n.path,d=new Ce(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:h,value:{document:_}}=f.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||i4(n4(_),i)<=0||(o.has(_.key)||ff(n,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,i,o){Re()}Or(e,n){return ue.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new S3(this)}getSize(e){return ue.resolve(this.size)}}class S3 extends p3{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),ue.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e){this.persistence=e,this.Nr=new Ga((n=>rg(n)),og),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fg,this.targetCount=0,this.kr=Pa.Bn()}forEachTarget(e,n){return this.Nr.forEach(((i,o)=>n(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),ue.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Pa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Kn(n),ue.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let o=0;const a=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ue.waitFor(a).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,a=[];return o&&n.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tg(0),this.Kr=!1,this.Kr=!0,this.$r=new T3,this.referenceDelegate=e(this),this.Ur=new w3(this),this.indexManager=new h3,this.remoteDocumentCache=(function(o){return new x3(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new d3(n),this.Gr=new v3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new E3(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){Te("MemoryPersistence","Starting transaction:",e);const o=new C3(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((a=>this.referenceDelegate.jr(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Hr(e,n){return ue.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,n))))}}class C3 extends r4{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Jr=new fg,this.Yr=null}static Zr(e){return new hg(e)}get Xr(){if(this.Yr)return this.Yr;throw Re()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((a=>this.Xr.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Xr,(i=>{const o=Ce.fromPath(i);return this.ei(e,o).next((a=>{a||n.removeEntry(o,Me.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return ue.or([()=>ue.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(e,n){let i=qe(),o=qe();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new mg(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Mk()?8:o4(hn())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,o){const a={result:null};return this.Yi(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,n,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new b3;return this.Xi(e,n,u).next((d=>{if(a.result=d,this.zi)return this.es(e,n,u,d.size)}))})).next((()=>a.result))}es(e,n,i,o){return i.documentReadCount<this.ji?(Wl()<=Ge.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ue.resolve()):(Wl()<=Ge.DEBUG&&Te("QueryEngine","Query:",ga(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Wl()<=Ge.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(n))):ue.resolve())}Yi(e,n){if(wE(n))return ue.resolve(null);let i=Mi(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=yp(n,null,"F"),i=Mi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=qe(...a);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((f=>{const h=this.ts(n,d);return this.ns(n,h,u,f.readTime)?this.Yi(e,yp(n,null,"F")):this.rs(e,h,n,f)}))))})))))}Zi(e,n,i,o){return wE(n)||o.isEqual(Me.min())?ue.resolve(null):this.Ji.getDocuments(e,i).next((a=>{const u=this.ts(n,a);return this.ns(n,u,i,o)?ue.resolve(null):(Wl()<=Ge.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ga(n)),this.rs(e,u,n,t4(o,-1)).next((d=>d)))}))}ts(e,n){let i=new en(_w(e));return n.forEach(((o,a)=>{ff(e,a)&&(i=i.add(a))})),i}ns(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,n,i){return Wl()<=Ge.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",ga(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ir.min(),i)}rs(e,n,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n,i,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new yt(Ke),this._s=new Ga((a=>rg(a)),og),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new y3(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function N3(t,e,n,i){return new R3(t,e,n,i)}async function qw(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,n.ls(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let f=qe();for(const h of o){u.push(h.batchId);for(const _ of h.mutations)f=f.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)f=f.add(_.key)}return n.localDocuments.getDocuments(i,f).next((h=>({hs:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function M3(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(d,f,h,_){const E=h.batch,S=E.keys();let C=ue.resolve();return S.forEach((M=>{C=C.next((()=>_.getEntry(f,M))).next((V=>{const U=h.docVersions.get(M);rt(U!==null),V.version.compareTo(U)<0&&(E.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),_.addEntry(V)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(f,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let f=qe();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(f=f.add(d.batch.mutations[h].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function Hw(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function D3(t,e){const n=De(t),i=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const d=[];e.targetChanges.forEach(((_,E)=>{const S=o.get(E);if(!S)return;d.push(n.Ur.removeMatchingKeys(a,_.removedDocuments,E).next((()=>n.Ur.addMatchingKeys(a,_.addedDocuments,E))));let C=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(tn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),o=o.insert(E,C),(function(V,U,z){return V.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(S,C,_)&&d.push(n.Ur.updateTargetData(a,C))}));let f=ws(),h=qe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(P3(a,u,e.documentUpdates).next((_=>{f=_.Ps,h=_.Is}))),!i.isEqual(Me.min())){const _=n.Ur.getLastRemoteSnapshotVersion(a).next((E=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return ue.waitFor(d).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(n.os=o,a)))}function P3(t,e,n){let i=qe(),o=qe();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let u=ws();return n.forEach(((d,f)=>{const h=a.get(d);f.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(Me.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):Te("LocalStore","Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",f.version)})),{Ps:u,Is:o}}))}function k3(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function U3(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Ur.getTargetData(i,e).next((a=>a?(o=a,ue.resolve(o)):n.Ur.allocateTargetId(i).next((u=>(o=new Sr(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i}))}async function xp(t,e,n){const i=De(t),o=i.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Iu(u))throw u;Te("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function UE(t,e,n){const i=De(t);let o=Me.min(),a=qe();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,h,_){const E=De(f),S=E._s.get(_);return S!==void 0?ue.resolve(E.os.get(S)):E.Ur.getTargetData(h,_)})(i,u,Mi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>i.ss.getDocumentsMatchingQuery(u,e,n?o:Me.min(),n?a:qe()))).next((d=>(L3(i,A4(e),d),{documents:d,Ts:a})))))}function L3(t,e,n){let i=t.us.get(e)||Me.min();n.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.us.set(e,i)}class LE{constructor(){this.activeTargetIds=M4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V3{constructor(){this.so=new LE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new LE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd=null;function Gm(){return dd===null?dd=(function(){return 268435456+Math.round(2147483648*Math.random())})():dd++,"0x"+dd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class q3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(n,i,o,a,u){const d=Gm(),f=this.xo(n,i.toUriEncodedString());Te("RestConnection",`Sending RPC '${n}' ${d}:`,f,o);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,u),this.No(n,f,h,o).then((_=>(Te("RestConnection",`Received RPC '${n}' ${d}: `,_),_)),(_=>{throw Ra("RestConnection",`RPC '${n}' ${d} failed with error: `,_,"url: ",f,"request:",o),_}))}Lo(n,i,o,a,u,d){return this.Mo(n,i,o,a,u)}Oo(n,i,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ha})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((a,u)=>n[u]=a)),o&&o.headers.forEach(((a,u)=>n[u]=a))}xo(n,i){const o=F3[n];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,o){const a=Gm();return new Promise(((u,d)=>{const f=new nw;f.setWithCredentials(!0),f.listenOnce(iw.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ed.NO_ERROR:const _=f.getResponseJson();Te(on,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case Ed.TIMEOUT:Te(on,`RPC '${e}' ${a} timed out`),d(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Ed.HTTP_ERROR:const E=f.getStatus();if(Te(on,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const C=S==null?void 0:S.error;if(C&&C.status&&C.message){const M=(function(U){const z=U.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(z)>=0?z:ce.UNKNOWN})(C.status);d(new we(M,C.message))}else d(new we(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new we(ce.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{Te(on,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(o);Te(on,`RPC '${e}' ${a} sending request:`,o),f.send(n,"POST",h,i,15)}))}Bo(e,n,i){const o=Gm(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ow(),d=rw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const _=a.join("");Te(on,`Creating RPC '${e}' stream ${o}: ${_}`,f);const E=u.createWebChannel(_,f);let S=!1,C=!1;const M=new B3({Io:U=>{C?Te(on,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(Te(on,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),Te(on,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},To:()=>E.close()}),V=(U,z,$)=>{U.listen(z,(j=>{try{$(j)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return V(E,Ql.EventType.OPEN,(()=>{C||(Te(on,`RPC '${e}' stream ${o} transport opened.`),M.yo())})),V(E,Ql.EventType.CLOSE,(()=>{C||(C=!0,Te(on,`RPC '${e}' stream ${o} transport closed`),M.So())})),V(E,Ql.EventType.ERROR,(U=>{C||(C=!0,Ra(on,`RPC '${e}' stream ${o} transport errored:`,U),M.So(new we(ce.UNAVAILABLE,"The operation could not be completed")))})),V(E,Ql.EventType.MESSAGE,(U=>{var z;if(!C){const $=U.data[0];rt(!!$);const j=$,Y=j.error||((z=j[0])===null||z===void 0?void 0:z.error);if(Y){Te(on,`RPC '${e}' stream ${o} received error:`,Y);const ie=Y.status;let oe=(function(R){const k=Dt[R];if(k!==void 0)return Mw(k)})(ie),P=Y.message;oe===void 0&&(oe=ce.INTERNAL,P="Unknown error status: "+ie+" with message "+Y.message),C=!0,M.So(new we(oe,P)),E.close()}else Te(on,`RPC '${e}' stream ${o} received:`,$),M.bo($)}})),V(d,sw.STAT_EVENT,(U=>{U.stat===fp.PROXY?Te(on,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===fp.NOPROXY&&Te(on,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{M.wo()}),0),M}}function zm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t){return new Q4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n,i=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n,i,o,a,u,d,f){this.ui=e,this.Ho=i,this.Jo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Ss(n.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===n&&this.P_(i,o)}),(i=>{e((()=>{const o=new we(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(Te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class H3 extends zw{constructor(e,n,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=e3(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Me.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Me.min():u.readTime?Di(u.readTime):Me.min()})(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Ep(this.serializer),n.addTarget=(function(a,u){let d;const f=u.target;if(d=gp(f)?{documents:i3(a,f)}:{query:s3(a,f)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=kw(a,u.resumeToken);const h=vp(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Me.min())>0){d.readTime=Hd(a,u.snapshotVersion.toTimestamp());const h=vp(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=o3(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Ep(this.serializer),n.removeTarget=e,this.a_(n)}}class G3 extends zw{constructor(e,n,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return rt(!!e.streamToken),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=n3(e.writeResults,e.commitTime),i=Di(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Ep(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>t3(this.serializer,i)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3 extends class{}{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,_p(n,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new we(ce.UNKNOWN,a.toString())}))}Lo(e,n,i,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,_p(n,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(ce.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class j3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ss(n),this.D_=!1):Te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n,i,o,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{i.enqueueAndForget((async()=>{Co(this)&&(Te("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const h=De(f);h.L_.add(4),await Nu(h),h.q_.set("Unknown"),h.L_.delete(4),await vf(h)})(this))}))})),this.q_=new j3(i,o)}}async function vf(t){if(Co(t))for(const e of t.B_)await e(!0)}async function Nu(t){for(const e of t.B_)await e(!1)}function jw(t,e){const n=De(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vg(n)?yg(n):za(n).r_()&&gg(n,e))}function pg(t,e){const n=De(t),i=za(n);n.N_.delete(e),i.r_()&&Jw(n,e),n.N_.size===0&&(i.r_()?i.o_():Co(n)&&n.q_.set("Unknown"))}function gg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}za(t).A_(e)}function Jw(t,e){t.Q_.xe(e),za(t).R_(e)}function yg(t){t.Q_=new Y4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),za(t).start(),t.q_.v_()}function vg(t){return Co(t)&&!za(t).n_()&&t.N_.size>0}function Co(t){return De(t).L_.size===0}function Yw(t){t.Q_=void 0}async function Y3(t){t.q_.set("Online")}async function $3(t){t.N_.forEach(((e,n)=>{gg(t,e)}))}async function K3(t,e){Yw(t),vg(t)?(t.q_.M_(e),yg(t)):t.q_.set("Unknown")}async function W3(t,e,n){if(t.q_.set("Online"),e instanceof Pw&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.N_.delete(d),o.Q_.removeTarget(d))})(t,e)}catch(i){Te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gd(t,i)}else if(e instanceof wd?t.Q_.Ke(e):e instanceof Dw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Me.min()))try{const i=await Hw(t.localStore);n.compareTo(i)>=0&&await(function(a,u){const d=a.Q_.rt(u);return d.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.N_.get(h);_&&a.N_.set(h,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,h)=>{const _=a.N_.get(f);if(!_)return;a.N_.set(f,_.withResumeToken(tn.EMPTY_BYTE_STRING,_.snapshotVersion)),Jw(a,f);const E=new Sr(_.target,f,h,_.sequenceNumber);gg(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(i){Te("RemoteStore","Failed to raise snapshot:",i),await Gd(t,i)}}async function Gd(t,e,n){if(!Iu(e))throw e;t.L_.add(1),await Nu(t),t.q_.set("Offline"),n||(n=()=>Hw(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vf(t)}))}function $w(t,e){return e().catch((n=>Gd(t,n,e)))}async function _f(t){const e=De(t),n=Nr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Q3(e);)try{const o=await k3(e.localStore,i);if(o===null){e.O_.length===0&&n.o_();break}i=o.batchId,X3(e,o)}catch(o){await Gd(e,o)}Kw(e)&&Ww(e)}function Q3(t){return Co(t)&&t.O_.length<10}function X3(t,e){t.O_.push(e);const n=Nr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Kw(t){return Co(t)&&!Nr(t).n_()&&t.O_.length>0}function Ww(t){Nr(t).start()}async function Z3(t){Nr(t).p_()}async function eO(t){const e=Nr(t);for(const n of t.O_)e.m_(n.mutations)}async function tO(t,e,n){const i=t.O_.shift(),o=ug.from(i,e,n);await $w(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await _f(t)}async function nO(t,e){e&&Nr(t).V_&&await(async function(i,o){if((function(u){return z4(u)&&u!==ce.ABORTED})(o.code)){const a=i.O_.shift();Nr(i).s_(),await $w(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await _f(i)}})(t,e),Kw(t)&&Ww(t)}async function OE(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),Te("RemoteStore","RemoteStore received new credentials");const i=Co(n);n.L_.add(3),await Nu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vf(n)}async function iO(t,e){const n=De(t);e?(n.L_.delete(2),await vf(n)):e||(n.L_.add(2),await Nu(n),n.q_.set("Unknown"))}function za(t){return t.K_||(t.K_=(function(n,i,o){const a=De(n);return a.w_(),new H3(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Eo:Y3.bind(null,t),Ro:$3.bind(null,t),mo:K3.bind(null,t),d_:W3.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),vg(t)?yg(t):t.q_.set("Unknown")):(await t.K_.stop(),Yw(t))}))),t.K_}function Nr(t){return t.U_||(t.U_=(function(n,i,o){const a=De(n);return a.w_(),new G3(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Z3.bind(null,t),mo:nO.bind(null,t),f_:eO.bind(null,t),g_:tO.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await _f(t)):(await t.U_.stop(),t.O_.length>0&&(Te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,i,o,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,a){const u=Date.now()+i,d=new _g(e,n,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(t,e){if(Ss("AsyncQueue",`${e}: ${t}`),Iu(t))return new we(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ce.comparator(n.key,i.key):(n,i)=>Ce.comparator(n.key,i.key),this.keyedMap=Xl(),this.sortedSet=new yt(this.comparator)}static emptySet(e){return new ba(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ba;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.W_=new yt(Ce.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,i)=>{e.push(i)})),e}}class ka{constructor(e,n,i,o,a,u,d,f,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,o,a){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new ka(e,n,ba.emptySet(n),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class rO{constructor(){this.queries=BE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const o=De(n),a=o.queries;o.queries=BE(),a.forEach(((u,d)=>{for(const f of d.j_)f.onError(i)}))})(this,new we(ce.ABORTED,"Firestore shutting down"))}}function BE(){return new Ga((t=>vw(t)),df)}async function oO(t,e){const n=De(t);let i=3;const o=e.query;let a=n.queries.get(o);a?!a.H_()&&e.J_()&&(i=2):(a=new sO,i=e.J_()?0:1);try{switch(i){case 0:a.z_=await n.onListen(o,!0);break;case 1:a.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const d=Tg(u,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(d)}n.queries.set(o,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Eg(n)}async function aO(t,e){const n=De(t),i=e.query;let o=3;const a=n.queries.get(i);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function lO(t,e){const n=De(t);let i=!1;for(const o of e){const a=o.query,u=n.queries.get(a);if(u){for(const d of u.j_)d.X_(o)&&(i=!0);u.z_=o}}i&&Eg(n)}function uO(t,e,n){const i=De(t),o=i.queries.get(e);if(o)for(const a of o.j_)a.onError(n);i.queries.delete(e)}function Eg(t){t.Y_.forEach((e=>{e.next()}))}var Sp,qE;(qE=Sp||(Sp={})).ea="default",qE.Cache="cache";class cO{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ka(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.key=e}}class Xw{constructor(e){this.key=e}}class dO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=qe(),this.mutatedKeys=qe(),this.Aa=_w(e),this.Ra=new ba(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new FE,o=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const S=o.get(_),C=ff(this.query,E)?E:null,M=!!S&&this.mutatedKeys.has(S.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let U=!1;S&&C?S.data.isEqual(C.data)?M!==V&&(i.track({type:3,doc:C}),U=!0):this.ga(S,C)||(i.track({type:2,doc:C}),U=!0,(f&&this.Aa(C,f)>0||h&&this.Aa(C,h)<0)&&(d=!0)):!S&&C?(i.track({type:0,doc:C}),U=!0):S&&!C&&(i.track({type:1,doc:S}),U=!0,(f||h)&&(d=!0)),U&&(C?(u=u.add(C),a=V?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{Ra:u,fa:i,ns:d,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,E)=>(function(C,M){const V=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return V(C)-V(M)})(_.type,E.type)||this.Aa(_.doc,E.doc))),this.pa(i),o=o!=null&&o;const d=n&&!o?this.ya():[],f=this.da.size===0&&this.current&&!o?1:0,h=f!==this.Ea;return this.Ea=f,u.length!==0||h?{snapshot:new ka(this.query,e.Ra,a,u,e.mutatedKeys,f===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new FE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=qe(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const n=[];return e.forEach((i=>{this.da.has(i)||n.push(new Xw(i))})),this.da.forEach((i=>{e.has(i)||n.push(new Qw(i))})),n}ba(e){this.Ta=e.Ts,this.da=qe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ka.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class hO{constructor(e){this.key=e,this.va=!1}}class mO{constructor(e,n,i,o,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Ga((d=>vw(d)),df),this.Ma=new Map,this.xa=new Set,this.Oa=new yt(Ce.comparator),this.Na=new Map,this.La=new fg,this.Ba={},this.ka=new Map,this.qa=Pa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pO(t,e,n=!0){const i=sA(t);let o;const a=i.Fa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await Zw(i,e,n,!0),o}async function gO(t,e){const n=sA(t);await Zw(n,e,!0,!1)}async function Zw(t,e,n,i){const o=await U3(t.localStore,Mi(e)),a=o.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let d;return i&&(d=await yO(t,e,a,u==="current",o.resumeToken)),t.isPrimaryClient&&n&&jw(t.remoteStore,o),d}async function yO(t,e,n,i,o){t.Ka=(E,S,C)=>(async function(V,U,z,$){let j=U.view.ma(z);j.ns&&(j=await UE(V.localStore,U.query,!1).then((({documents:P})=>U.view.ma(P,j))));const Y=$&&$.targetChanges.get(U.targetId),ie=$&&$.targetMismatches.get(U.targetId)!=null,oe=U.view.applyChanges(j,V.isPrimaryClient,Y,ie);return GE(V,U.targetId,oe.wa),oe.snapshot})(t,E,S,C);const a=await UE(t.localStore,e,!0),u=new dO(e,a.Ts),d=u.ma(a.documents),f=Ru.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),h=u.applyChanges(d,t.isPrimaryClient,f);GE(t,n,h.wa);const _=new fO(e,n,u);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function vO(t,e,n){const i=De(t),o=i.Fa.get(e),a=i.Ma.get(o.targetId);if(a.length>1)return i.Ma.set(o.targetId,a.filter((u=>!df(u,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await xp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&pg(i.remoteStore,o.targetId),wp(i,o.targetId)})).catch(bu)):(wp(i,o.targetId),await xp(i.localStore,o.targetId,!0))}async function _O(t,e){const n=De(t),i=n.Fa.get(e),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),pg(n.remoteStore,i.targetId))}async function TO(t,e,n){const i=bO(t);try{const o=await(function(u,d){const f=De(u),h=Vt.now(),_=d.reduce(((C,M)=>C.add(M.key)),qe());let E,S;return f.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let M=ws(),V=qe();return f.cs.getEntries(C,_).next((U=>{M=U,M.forEach(((z,$)=>{$.isValidDocument()||(V=V.add(z))}))})).next((()=>f.localDocuments.getOverlayedDocuments(C,M))).next((U=>{E=U;const z=[];for(const $ of d){const j=F4($,E.get($.key).overlayedDocument);j!=null&&z.push(new Ao($.key,j,dw(j.value.mapValue),ys.exists(!0)))}return f.mutationQueue.addMutationBatch(C,h,z,d)})).next((U=>{S=U;const z=U.applyToLocalDocumentSet(E,V);return f.documentOverlayCache.saveOverlays(C,U.batchId,z)}))})).then((()=>({batchId:S.batchId,changes:Ew(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,f){let h=u.Ba[u.currentUser.toKey()];h||(h=new yt(Ke)),h=h.insert(d,f),u.Ba[u.currentUser.toKey()]=h})(i,o.batchId,n),await Mu(i,o.changes),await _f(i.remoteStore)}catch(o){const a=Tg(o,"Failed to persist write");n.reject(a)}}async function eA(t,e){const n=De(t);try{const i=await D3(n.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=n.Na.get(a);u&&(rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?rt(u.va):o.removedDocuments.size>0&&(rt(u.va),u.va=!1))})),await Mu(n,i,e)}catch(i){await bu(i)}}function HE(t,e,n){const i=De(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach(((a,u)=>{const d=u.view.Z_(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const f=De(u);f.onlineState=d;let h=!1;f.queries.forEach(((_,E)=>{for(const S of E.j_)S.Z_(d)&&(h=!0)})),h&&Eg(f)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function EO(t,e,n){const i=De(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Na.get(e),a=o&&o.key;if(a){let u=new yt(Ce.comparator);u=u.insert(a,cn.newNoDocument(a,Me.min()));const d=qe().add(a),f=new gf(Me.min(),new Map,new yt(Ke),u,d);await eA(i,f),i.Oa=i.Oa.remove(a),i.Na.delete(e),xg(i)}else await xp(i.localStore,e,!1).then((()=>wp(i,e,n))).catch(bu)}async function xO(t,e){const n=De(t),i=e.batch.batchId;try{const o=await M3(n.localStore,e);nA(n,i,null),tA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Mu(n,o)}catch(o){await bu(o)}}async function SO(t,e,n){const i=De(t);try{const o=await(function(u,d){const f=De(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return f.mutationQueue.lookupMutationBatch(h,d).next((E=>(rt(E!==null),_=E.keys(),f.mutationQueue.removeMutationBatch(h,E)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>f.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);nA(i,e,n),tA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Mu(i,o)}catch(o){await bu(o)}}function tA(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function nA(t,e,n){const i=De(t);let o=i.Ba[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(n?a.reject(n):a.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function wp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((i=>{t.La.containsKey(i)||iA(t,i)}))}function iA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(pg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xg(t))}function GE(t,e,n){for(const i of n)i instanceof Qw?(t.La.addReference(i.key,e),wO(t,i)):i instanceof Xw?(Te("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||iA(t,i.key)):Re()}function wO(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(Te("SyncEngine","New document in limbo: "+n),t.xa.add(i),xg(t))}function xg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ce(xt.fromString(e)),i=t.qa.next();t.Na.set(i,new hO(n)),t.Oa=t.Oa.insert(n,i),jw(t.remoteStore,new Sr(Mi(ag(n.path)),i,"TargetPurposeLimboResolution",tg.oe))}}async function Mu(t,e,n){const i=De(t),o=[],a=[],u=[];i.Fa.isEmpty()||(i.Fa.forEach(((d,f)=>{u.push(i.Ka(f,e,n).then((h=>{var _;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(_=n==null?void 0:n.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(h){o.push(h);const E=mg.Wi(f.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Ca.d_(o),await(async function(f,h){const _=De(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(h,(S=>ue.forEach(S.$i,(C=>_.persistence.referenceDelegate.addReference(E,S.targetId,C))).next((()=>ue.forEach(S.Ui,(C=>_.persistence.referenceDelegate.removeReference(E,S.targetId,C)))))))))}catch(E){if(!Iu(E))throw E;Te("LocalStore","Failed to update sequence numbers: "+E)}for(const E of h){const S=E.targetId;if(!E.fromCache){const C=_.os.get(S),M=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(M);_.os=_.os.insert(S,V)}}})(i.localStore,a))}async function AO(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){Te("SyncEngine","User change. New user:",e.toKey());const i=await qw(n.localStore,e);n.currentUser=e,(function(a,u){a.ka.forEach((d=>{d.forEach((f=>{f.reject(new we(ce.CANCELLED,u))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Mu(n,i.hs)}}function CO(t,e){const n=De(t),i=n.Na.get(e);if(i&&i.va)return qe().add(i.key);{let o=qe();const a=n.Ma.get(e);if(!a)return o;for(const u of a){const d=n.Fa.get(u);o=o.unionWith(d.view.Va)}return o}}function sA(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EO.bind(null,e),e.Ca.d_=lO.bind(null,e.eventManager),e.Ca.$a=uO.bind(null,e.eventManager),e}function bO(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SO.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return N3(this.persistence,new I3,e.initialUser,this.serializer)}Ga(e){return new A3(hg.Zr,this.serializer)}Wa(e){return new V3}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class Ap{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>HE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=AO.bind(null,this.syncEngine),await iO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rO})()}createDatastore(e){const n=yf(e.databaseInfo.databaseId),i=(function(a){return new q3(a)})(e.databaseInfo);return(function(a,u,d,f){return new z3(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,a,u,d){return new J3(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>HE(this.syncEngine,n,0)),(function(){return VE.D()?new VE:new O3})())}createSyncEngine(e,n){return(function(o,a,u,d,f,h,_){const E=new mO(o,a,u,d,f,h);return _&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const a=De(o);Te("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Nu(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n,i,o,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=lw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{Te("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(Te("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Tg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function jm(t,e){t.asyncQueue.verifyOperationInProgress(),Te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async o=>{i.isEqual(o)||(await qw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function zE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await NO(t);Te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>OE(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,o)=>OE(e.remoteStore,o))),t._onlineComponents=e}async function NO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te("FirestoreClient","Using user provided OfflineComponentProvider");try{await jm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ce.FAILED_PRECONDITION||o.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Ra("Error using user provided cache. Falling back to memory cache: "+n),await jm(t,new zd)}}else Te("FirestoreClient","Using default OfflineComponentProvider"),await jm(t,new zd);return t._offlineComponents}async function rA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te("FirestoreClient","Using user provided OnlineComponentProvider"),await zE(t,t._uninitializedComponentsProvider._online)):(Te("FirestoreClient","Using default OnlineComponentProvider"),await zE(t,new Ap))),t._onlineComponents}function MO(t){return rA(t).then((e=>e.syncEngine))}async function DO(t){const e=await rA(t),n=e.eventManager;return n.onListen=pO.bind(null,e.syncEngine),n.onUnlisten=vO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_O.bind(null,e.syncEngine),n}function PO(t,e,n={}){const i=new Cr;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,h){const _=new IO({next:S=>{_.Za(),u.enqueueAndForget((()=>aO(a,E)));const C=S.docs.has(d);!C&&S.fromCache?h.reject(new we(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&S.fromCache&&f&&f.source==="server"?h.reject(new we(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),E=new cO(ag(d.path),_,{includeMetadataChanges:!0,_a:!0});return oO(a,E)})(await DO(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t,e,n){if(!n)throw new we(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UO(t,e,n,i){if(e===!0&&i===!0)throw new we(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function JE(t){if(!Ce.isDocumentKey(t))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re()}function gu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sg(t);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wg{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YE(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new JV;switch(i.type){case"firstParty":return new WV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=jE.get(n);i&&(Te("ComponentProvider","Removing Datastore"),jE.delete(n),i.terminate())})(this),Promise.resolve()}}function aA(t,e,n,i={}){var o;const a=(t=gu(t,wg))._getSettings(),u=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),i.mockUserToken){let d,f;if(typeof i.mockUserToken=="string")d=i.mockUserToken,f=un.MOCK_USER;else{d=pS(i.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new un(h)}t._authCredentials=new YV(new aw(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ag(this.firestore,e,this._query)}}class ti{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ti(this.firestore,e,this._key)}}class yu extends Ag{constructor(e,n,i){super(e,n,ag(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ti(this.firestore,null,new Ce(e))}withConverter(e){return new yu(this.firestore,e,this._path)}}function lA(t,e,...n){if(t=En(t),arguments.length===1&&(e=lw.newId()),kO("doc","path",e),t instanceof wg){const i=xt.fromString(e,...n);return JE(i),new ti(t,null,new Ce(i))}{if(!(t instanceof ti||t instanceof yu))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(xt.fromString(e,...n));return JE(i),new ti(t.firestore,t instanceof yu?t.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gw(this,"async_queue_retry"),this.Vu=()=>{const i=zm();i&&Te("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=zm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=zm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new Cr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Iu(e))throw e;Te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(i);throw Ss("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=_g.createAndSchedule(this,e,n,i,(a=>this.yu(a)));return this.Tu.push(o),o}fu(){this.Eu&&Re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Cg extends wg{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new $E,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}}function LO(t,e){const n=typeof t=="object"?t:Gp(),i=typeof t=="string"?t:"(default)",o=of(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=fS("firestore");a&&aA(o,...a)}return o}function uA(t){if(t._terminated)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VO(t),t._firestoreClient}function VO(t){var e,n,i;const o=t._freezeSettings(),a=(function(d,f,h,_){return new u4(d,f,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,oA(_.experimentalLongPollingOptions),_.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new RO(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ua(tn.fromBase64String(e))}catch(n){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ua(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=/^__.*__$/;class cA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ao(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Rg{constructor(e,n,i,o,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(dA(this.Cu)&&OO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class FO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||yf(e)}Qu(e,n,i,o=!1){return new Rg({Cu:e,methodName:n,qu:i,path:Zt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function BO(t){const e=t._freezeSettings(),n=yf(t._databaseId);return new FO(t._databaseId,!!e.ignoreUndefinedProperties,n)}class xf extends Ef{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xf}}class Ng extends Ef{_toFieldTransform(e){return new U4(e.path,new hu)}isEqual(e){return e instanceof Ng}}function qO(t,e,n,i){const o=t.Qu(1,e,n);hA("Data must be an object, but it was:",o,i);const a=[],u=Bn.empty();wo(i,((f,h)=>{const _=Mg(e,f,n);h=En(h);const E=o.Nu(_);if(h instanceof xf)a.push(_);else{const S=Sf(h,E);S!=null&&(a.push(_),u.set(_,S))}}));const d=new ci(a);return new cA(u,d,o.fieldTransforms)}function HO(t,e,n,i,o,a){const u=t.Qu(1,e,n),d=[KE(e,i,n)],f=[o];if(a.length%2!=0)throw new we(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(KE(e,a[S])),f.push(a[S+1]);const h=[],_=Bn.empty();for(let S=d.length-1;S>=0;--S)if(!jO(h,d[S])){const C=d[S];let M=f[S];M=En(M);const V=u.Nu(C);if(M instanceof xf)h.push(C);else{const U=Sf(M,V);U!=null&&(h.push(C),_.set(C,U))}}const E=new ci(h);return new cA(_,E,u.fieldTransforms)}function Sf(t,e){if(fA(t=En(t)))return hA("Unsupported field value:",e,t),GO(t,e);if(t instanceof Ef)return(function(i,o){if(!dA(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let f=Sf(d,o.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(t,e)}return(function(i,o){if((i=En(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return D4(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Vt.fromDate(i);return{timestampValue:Hd(o.serializer,a)}}if(i instanceof Vt){const a=new Vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hd(o.serializer,a)}}if(i instanceof bg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ua)return{bytesValue:kw(o.serializer,i._byteString)};if(i instanceof ti){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:dg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ig)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw d.Bu("VectorValues must only contain numeric values.");return lg(d.serializer,f)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${Sg(i)}`)})(t,e)}function GO(t,e){const n={};return uw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(t,((i,o)=>{const a=Sf(o,e.Mu(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function fA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vt||t instanceof bg||t instanceof Ua||t instanceof ti||t instanceof Ef||t instanceof Ig)}function hA(t,e,n){if(!fA(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const i=Sg(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function KE(t,e,n){if((e=En(e))instanceof Tf)return e._internalPath;if(typeof e=="string")return Mg(t,e);throw jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const zO=new RegExp("[~\\*/\\[\\]]");function Mg(t,e,n){if(e.search(zO)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tf(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jd(t,e,n,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${i}`),u&&(f+=` in document ${o}`),f+=")"),new we(ce.INVALID_ARGUMENT,d+t+f)}function jO(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,i,o,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JO extends mA{data(){return super.data()}}function pA(t,e){return typeof e=="string"?Mg(t,e):e instanceof Tf?e._internalPath:e._delegate._internalPath}class YO{convertValue(e,n="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return wo(e,((o,a)=>{i[o]=this.convertValue(a,n)})),i}convertVectorValue(e){var n,i,o;const a=(o=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>Ct(u.doubleValue)));return new Ig(a)}convertGeoPoint(e){return new bg(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ig(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=xt.fromString(e);rt(Bw(i));const o=new du(i.get(1),i.get(3)),a=new Ce(i.popFirst(5));return o.isEqual(n)||Ss(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gA extends mA{constructor(e,n,i,o,a,u){super(e,n,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new KO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(pA("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class KO extends gA{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t){t=gu(t,ti);const e=gu(t.firestore,Cg);return PO(uA(e),t._key).then((n=>e6(e,t,n)))}class QO extends YO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ua(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ti(this.firestore,null,n)}}function XO(t,e,n,...i){t=gu(t,ti);const o=gu(t.firestore,Cg),a=BO(o);let u;return u=typeof(e=En(e))=="string"||e instanceof Tf?HO(a,"updateDoc",t._key,e,n,i):qO(a,"updateDoc",t._key,e),ZO(o,[u.toMutation(t._key,ys.exists(!0))])}function ZO(t,e){return(function(i,o){const a=new Cr;return i.asyncQueue.enqueueAndForget((async()=>TO(await MO(i),o,a))),a.promise})(uA(t),e)}function e6(t,e,n){const i=n.docs.get(e._key),o=new QO(t);return new gA(t,o,e._key,i,new $O(n.hasPendingWrites,n.fromCache),e.converter)}function t6(){return new Ng("serverTimestamp")}(function(e,n=!0){(function(o){Ha=o})(So),mo(new br("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Cg(new $V(i.getProvider("auth-internal")),new XV(i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(h.options.projectId,_)})(u,o),u);return a=Object.assign({useFetchStreams:n},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Ii(mE,"4.7.3",e),Ii(mE,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="firebasestorage.googleapis.com",n6="storageBucket",i6=120*1e3,s6=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Oi{constructor(e,n,i=0){super(Jm(e),`Firebase Storage: ${n} (${Jm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ui;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ui||(Ui={}));function Jm(t){return"storage/"+t}function r6(){const t="An unknown error occurred, please check the error payload for server response.";return new Fi(Ui.UNKNOWN,t)}function o6(){return new Fi(Ui.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function a6(){return new Fi(Ui.CANCELED,"User canceled the upload/download.")}function l6(t){return new Fi(Ui.INVALID_URL,"Invalid URL '"+t+"'.")}function u6(t){return new Fi(Ui.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function WE(t){return new Fi(Ui.INVALID_ARGUMENT,t)}function vA(){return new Fi(Ui.APP_DELETED,"The Firebase app was deleted.")}function c6(t){return new Fi(Ui.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=di.makeFromUrl(e,n)}catch{return new di(e,"")}if(i.path==="")return i;throw u6(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),f={bucket:1,path:3};function h(Y){Y.path_=decodeURIComponent(Y.path)}const _="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",C=new RegExp(`^https?://${E}/${_}/b/${o}/o${S}`,"i"),M={bucket:1,path:3},V=n===yA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",z=new RegExp(`^https?://${V}/${o}/${U}`,"i"),j=[{regex:d,indices:f,postModify:a},{regex:C,indices:M,postModify:h},{regex:z,indices:{bucket:1,path:2},postModify:h}];for(let Y=0;Y<j.length;Y++){const ie=j[Y],oe=ie.regex.exec(e);if(oe){const P=oe[ie.indices.bucket];let N=oe[ie.indices.path];N||(N=""),i=new di(P,N),ie.postModify(i);break}}if(i==null)throw l6(e);return i}}class d6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(t,e,n){let i=1,o=null,a=null,u=!1,d=0;function f(){return d===2}let h=!1;function _(...U){h||(h=!0,e.apply(null,U))}function E(U){o=setTimeout(()=>{o=null,t(C,f())},U)}function S(){a&&clearTimeout(a)}function C(U,...z){if(h){S();return}if(U){S(),_.call(null,U,...z);return}if(f()||u){S(),_.call(null,U,...z);return}i<64&&(i*=2);let j;d===1?(d=2,j=0):j=(i+Math.random())*1e3,E(j)}let M=!1;function V(U){M||(M=!0,S(),!h&&(o!==null?(U||(d=2),clearTimeout(o),E(0)):U||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,V(!0)},n),V}function h6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(t){return t!==void 0}function QE(t,e,n,i){if(i<e)throw WE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw WE(`Invalid value for '${t}'. Expected ${n} or less.`)}function p6(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const o=e(i)+"="+e(t[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var Jd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Jd||(Jd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(t,e){const n=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n,i,o,a,u,d,f,h,_,E,S=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=_,this.connectionFactory_=E,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,M)=>{this.resolve_=C,this.reject_=M,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new fd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Jd.NO_ERROR,f=a.getStatus();if(!d||g6(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Jd.ABORT;i(!1,new fd(!1,null,_));return}const h=this.successCodes_.indexOf(f)!==-1;i(!0,new fd(h,a))})},n=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());m6(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=r6();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(o.canceled){const f=this.appDelete_?vA():a6();u(f)}else{const f=o6();u(f)}};this.canceled_?n(!1,new fd(!1,null,!0)):this.backoffId_=f6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&h6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function v6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function _6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function T6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function E6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function x6(t,e,n,i,o,a,u=!0){const d=p6(t.urlParams),f=t.url+d,h=Object.assign({},t.headers);return T6(h,e),v6(h,n),_6(h,a),E6(h,i),new y6(f,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function w6(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this._service=e,n instanceof di?this._location=n:this._location=di.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Yd(e,n)}get root(){const e=new di(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return w6(this._location.path)}get storage(){return this._service}get parent(){const e=S6(this._location.path);if(e===null)return null;const n=new di(this._location.bucket,e);return new Yd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw c6(e)}}function XE(t,e){const n=e==null?void 0:e[n6];return n==null?null:di.makeFromBucketSpec(n,t)}function A6(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:pS(o,t.app.options.projectId))}class C6{constructor(e,n,i,o,a){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=yA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i6,this._maxUploadRetryTime=s6,this._requests=new Set,o!=null?this._bucket=di.makeFromBucketSpec(o,this._host):this._bucket=XE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=di.makeFromBucketSpec(this._url,e):this._bucket=XE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){QE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){QE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yd(this,e)}_makeRequest(e,n,i,o,a=!0){if(this._deleted)return new d6(vA());{const u=x6(e,this._appId,i,o,n,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const ZE="@firebase/storage",ex="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="storage";function b6(t=Gp(),e){t=En(t);const i=of(t,_A).getImmediate({identifier:e}),o=fS("storage");return o&&TA(i,...o),i}function TA(t,e,n,i={}){A6(t,e,n,i)}function I6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new C6(n,i,o,e,So)}function R6(){mo(new br(_A,I6,"PUBLIC").setMultipleInstances(!0)),Ii(ZE,ex,""),Ii(ZE,ex,"esm2017")}R6();let uo;try{window.parent&&window.parent!==window&&(uo=window.parent.firebaseConfig),!uo&&window.firebaseConfig&&(uo=window.firebaseConfig),uo||(uo={apiKey:"demo-api-key",authDomain:"demo-project.firebaseapp.com",projectId:"demo-project",storageBucket:"demo-project.appspot.com",messagingSenderId:"123456789",appId:"demo-app-id"})}catch(t){console.error("Error loading Firebase config:",t),uo={apiKey:"demo-api-key",authDomain:"demo-project.firebaseapp.com",projectId:"demo-project",storageBucket:"demo-project.appspot.com",messagingSenderId:"123456789",appId:"demo-app-id"}}const Dg=vS(uo),Pg=zV(Dg),kg=LO(Dg),N6=b6(Dg);if(window.location.hostname==="localhost")try{FS(Pg,"http://localhost:9099",{disableWarnings:!0}),aA(kg,"localhost",8080),TA(N6,"localhost",9199)}catch{console.log("Firebase emulators not available, using production")}const M6=()=>new Promise(t=>{const e=zS(Pg,n=>{e(),t(n)})}),EA=async()=>{const t=await M6();if(!t)throw new Error("Authentication required");return t},xA={USERS:"soundwave_users",TRACKS:"soundwave_tracks",POSTS:"soundwave_posts",COMMENTS:"soundwave_comments",LABELS:"soundwave_labels",PLAYLISTS:"soundwave_playlists",MASTERCLASSES:"soundwave_masterclasses",TUTORIALS:"soundwave_tutorials",SAMPLE_PACKS:"soundwave_sample_packs",GLOBAL_EVENTS:"soundwave_global_events"},SA=(t,e)=>{if(console.error(`Firestore ${e} error:`,t),t instanceof we)switch(t.code){case"permission-denied":throw new Error("You do not have permission to perform this action");case"not-found":throw new Error("The requested item was not found");case"unavailable":throw new Error("Service temporarily unavailable. Please try again.");default:throw new Error(`${e} failed: ${t.message}`)}throw new Error(`${e} failed`)},D6=async t=>{try{const e=await WO(lA(kg,xA.USERS,t));return e.exists()?{id:e.id,...e.data()}:void 0}catch(e){SA(e,"Get user");return}},P6=async t=>{try{const n=(await EA()).uid,i={...t,id:n,updatedAt:t6()};return await XO(lA(kg,xA.USERS,n),i),i}catch(e){throw SA(e,"Create/update user"),e}},k6=async()=>{var t;try{const e=await EA();if(!await D6(e.uid)){const i={name:e.displayName||((t=e.email)==null?void 0:t.split("@")[0])||"SoundWave User",bio:"New to SoundWave",avatarUrl:e.photoURL||"",interview:[],gallery:[]};await P6(i)}}catch(e){console.error("Error initializing SoundWave user:",e)}};function U6(){const[t,e]=D.useState(null),[n,i]=D.useState(!0);return D.useEffect(()=>{const o=zS(Pg,async a=>{if(e(a),a)try{await k6()}catch(u){console.error("Error initializing SoundWave user:",u)}i(!1)});return()=>o()},[]),n?y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:y.jsx("div",{className:"text-white text-xl",children:"Loading SoundWave..."})}):t?y.jsx(EI,{children:y.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-900",children:[y.jsx(MI,{}),y.jsx("main",{className:"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8 mb-24",children:y.jsxs(Xb,{children:[y.jsx(an,{path:"/",element:y.jsx(vR,{})}),y.jsx(an,{path:"/library",element:y.jsx(JP,{})}),y.jsx(an,{path:"/community",element:y.jsx(zP,{})}),y.jsx(an,{path:"/playlists",element:y.jsx(YP,{})}),y.jsx(an,{path:"/labels",element:y.jsx(ak,{})}),y.jsx(an,{path:"/labels/:labelId",element:y.jsx(mk,{})}),y.jsx(an,{path:"/artist-hub",element:y.jsx(WP,{})}),y.jsx(an,{path:"/live-streams",element:y.jsx(XP,{})}),y.jsx(an,{path:"/tutorials",element:y.jsx(ek,{})}),y.jsx(an,{path:"/masterclass",element:y.jsx(nk,{})}),y.jsx(an,{path:"/samples",element:y.jsx(sk,{})}),y.jsx(an,{path:"/profile/:userId",element:y.jsx(SR,{})}),y.jsx(an,{path:"/upload",element:y.jsx(GP,{})}),y.jsx(an,{path:"/import-collection",element:y.jsx(rk,{})}),y.jsx(an,{path:"/inbox",element:y.jsx(gk,{})})]})}),y.jsx(DI,{}),y.jsx(UI,{}),y.jsx(jP,{})]})}):y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:y.jsxs("div",{className:"text-center text-white",children:[y.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Authentication Required"}),y.jsx("p",{className:"mb-6",children:"Please return to the portal to sign in."}),y.jsx("button",{onClick:()=>window.location.href="../index.html",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg",children:"Go to Portal"})]})})}const wA=document.getElementById("root");if(!wA)throw new Error("Could not find root element to mount to");const L6=lb.createRoot(wA);L6.render(y.jsx(ui.StrictMode,{children:y.jsx(kI,{children:y.jsx(U6,{})})}));
