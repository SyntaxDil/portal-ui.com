(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function fx(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var lm={exports:{}},kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function tS(){if(Iv)return kl;Iv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:s,type:i,key:d,ref:o!==void 0?o:null,props:c}}return kl.Fragment=e,kl.jsx=n,kl.jsxs=n,kl}var Dv;function nS(){return Dv||(Dv=1,lm.exports=tS()),lm.exports}var u=nS(),cm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function sS(){if(Mv)return Ne;Mv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),A=Symbol.iterator;function D(L){return L===null||typeof L!="object"?null:(L=A&&L[A]||L["@@iterator"],typeof L=="function"?L:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,P={};function Q(L,ee,H){this.props=L,this.context=ee,this.refs=P,this.updater=H||k}Q.prototype.isReactComponent={},Q.prototype.setState=function(L,ee){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ee,"setState")},Q.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function te(){}te.prototype=Q.prototype;function J(L,ee,H){this.props=L,this.context=ee,this.refs=P,this.updater=H||k}var se=J.prototype=new te;se.constructor=J,q(se,Q.prototype),se.isPureReactComponent=!0;var ce=Array.isArray;function ue(){}var C={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(L,ee,H){var le=H.ref;return{$$typeof:s,type:L,key:ee,ref:le!==void 0?le:null,props:H}}function I(L,ee){return R(L.type,ee,L.props)}function V(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function z(L){var ee={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(H){return ee[H]})}var j=/\/+/g;function Ye(L,ee){return typeof L=="object"&&L!==null&&L.key!=null?z(""+L.key):ee.toString(36)}function me(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(ue,ue):(L.status="pending",L.then(function(ee){L.status==="pending"&&(L.status="fulfilled",L.value=ee)},function(ee){L.status==="pending"&&(L.status="rejected",L.reason=ee)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function O(L,ee,H,le,re){var fe=typeof L;(fe==="undefined"||fe==="boolean")&&(L=null);var be=!1;if(L===null)be=!0;else switch(fe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(L.$$typeof){case s:case e:be=!0;break;case x:return be=L._init,O(be(L._payload),ee,H,le,re)}}if(be)return re=re(L),be=le===""?"."+Ye(L,0):le,ce(re)?(H="",be!=null&&(H=be.replace(j,"$&/")+"/"),O(re,ee,H,"",function(un){return un})):re!=null&&(V(re)&&(re=I(re,H+(re.key==null||L&&L.key===re.key?"":(""+re.key).replace(j,"$&/")+"/")+be)),ee.push(re)),1;be=0;var Fe=le===""?".":le+":";if(ce(L))for(var We=0;We<L.length;We++)le=L[We],fe=Fe+Ye(le,We),be+=O(le,ee,H,fe,re);else if(We=D(L),typeof We=="function")for(L=We.call(L),We=0;!(le=L.next()).done;)le=le.value,fe=Fe+Ye(le,We++),be+=O(le,ee,H,fe,re);else if(fe==="object"){if(typeof L.then=="function")return O(me(L),ee,H,le,re);throw ee=String(L),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return be}function W(L,ee,H){if(L==null)return L;var le=[],re=0;return O(L,le,"","",function(fe){return ee.call(H,fe,re++)}),le}function de(L){if(L._status===-1){var ee=L._result;ee=ee(),ee.then(function(H){(L._status===0||L._status===-1)&&(L._status=1,L._result=H)},function(H){(L._status===0||L._status===-1)&&(L._status=2,L._result=H)}),L._status===-1&&(L._status=0,L._result=ee)}if(L._status===1)return L._result.default;throw L._result}var xe=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},je={map:W,forEach:function(L,ee,H){W(L,function(){ee.apply(this,arguments)},H)},count:function(L){var ee=0;return W(L,function(){ee++}),ee},toArray:function(L){return W(L,function(ee){return ee})||[]},only:function(L){if(!V(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ne.Activity=w,Ne.Children=je,Ne.Component=Q,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=J,Ne.StrictMode=i,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(L){return C.H.useMemoCache(L)}},Ne.cache=function(L){return function(){return L.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(L,ee,H){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var le=q({},L.props),re=L.key;if(ee!=null)for(fe in ee.key!==void 0&&(re=""+ee.key),ee)!N.call(ee,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&ee.ref===void 0||(le[fe]=ee[fe]);var fe=arguments.length-2;if(fe===1)le.children=H;else if(1<fe){for(var be=Array(fe),Fe=0;Fe<fe;Fe++)be[Fe]=arguments[Fe+2];le.children=be}return R(L.type,re,le)},Ne.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:c,_context:L},L},Ne.createElement=function(L,ee,H){var le,re={},fe=null;if(ee!=null)for(le in ee.key!==void 0&&(fe=""+ee.key),ee)N.call(ee,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(re[le]=ee[le]);var be=arguments.length-2;if(be===1)re.children=H;else if(1<be){for(var Fe=Array(be),We=0;We<be;We++)Fe[We]=arguments[We+2];re.children=Fe}if(L&&L.defaultProps)for(le in be=L.defaultProps,be)re[le]===void 0&&(re[le]=be[le]);return R(L,fe,re)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(L){return{$$typeof:p,render:L}},Ne.isValidElement=V,Ne.lazy=function(L){return{$$typeof:x,_payload:{_status:-1,_result:L},_init:de}},Ne.memo=function(L,ee){return{$$typeof:y,type:L,compare:ee===void 0?null:ee}},Ne.startTransition=function(L){var ee=C.T,H={};C.T=H;try{var le=L(),re=C.S;re!==null&&re(H,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ue,xe)}catch(fe){xe(fe)}finally{ee!==null&&H.types!==null&&(ee.types=H.types),C.T=ee}},Ne.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ne.use=function(L){return C.H.use(L)},Ne.useActionState=function(L,ee,H){return C.H.useActionState(L,ee,H)},Ne.useCallback=function(L,ee){return C.H.useCallback(L,ee)},Ne.useContext=function(L){return C.H.useContext(L)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(L,ee){return C.H.useDeferredValue(L,ee)},Ne.useEffect=function(L,ee){return C.H.useEffect(L,ee)},Ne.useEffectEvent=function(L){return C.H.useEffectEvent(L)},Ne.useId=function(){return C.H.useId()},Ne.useImperativeHandle=function(L,ee,H){return C.H.useImperativeHandle(L,ee,H)},Ne.useInsertionEffect=function(L,ee){return C.H.useInsertionEffect(L,ee)},Ne.useLayoutEffect=function(L,ee){return C.H.useLayoutEffect(L,ee)},Ne.useMemo=function(L,ee){return C.H.useMemo(L,ee)},Ne.useOptimistic=function(L,ee){return C.H.useOptimistic(L,ee)},Ne.useReducer=function(L,ee,H){return C.H.useReducer(L,ee,H)},Ne.useRef=function(L){return C.H.useRef(L)},Ne.useState=function(L){return C.H.useState(L)},Ne.useSyncExternalStore=function(L,ee,H){return C.H.useSyncExternalStore(L,ee,H)},Ne.useTransition=function(){return C.H.useTransition()},Ne.version="19.2.0",Ne}var Ov;function ep(){return Ov||(Ov=1,cm.exports=sS()),cm.exports}var S=ep();const Zn=fx(S);var um={exports:{}},Ll={},hm={exports:{}},dm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function rS(){return kv||(kv=1,(function(s){function e(O,W){var de=O.length;O.push(W);e:for(;0<de;){var xe=de-1>>>1,je=O[xe];if(0<o(je,W))O[xe]=W,O[de]=je,de=xe;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],de=O.pop();if(de!==W){O[0]=de;e:for(var xe=0,je=O.length,L=je>>>1;xe<L;){var ee=2*(xe+1)-1,H=O[ee],le=ee+1,re=O[le];if(0>o(H,de))le<je&&0>o(re,H)?(O[xe]=re,O[le]=de,xe=le):(O[xe]=H,O[ee]=de,xe=ee);else if(le<je&&0>o(re,de))O[xe]=re,O[le]=de,xe=le;else break e}}return W}function o(O,W){var de=O.sortIndex-W.sortIndex;return de!==0?de:O.id-W.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],x=1,w=null,A=3,D=!1,k=!1,q=!1,P=!1,Q=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function se(O){for(var W=n(y);W!==null;){if(W.callback===null)i(y);else if(W.startTime<=O)i(y),W.sortIndex=W.expirationTime,e(g,W);else break;W=n(y)}}function ce(O){if(q=!1,se(O),!k)if(n(g)!==null)k=!0,ue||(ue=!0,z());else{var W=n(y);W!==null&&me(ce,W.startTime-O)}}var ue=!1,C=-1,N=5,R=-1;function I(){return P?!0:!(s.unstable_now()-R<N)}function V(){if(P=!1,ue){var O=s.unstable_now();R=O;var W=!0;try{e:{k=!1,q&&(q=!1,te(C),C=-1),D=!0;var de=A;try{t:{for(se(O),w=n(g);w!==null&&!(w.expirationTime>O&&I());){var xe=w.callback;if(typeof xe=="function"){w.callback=null,A=w.priorityLevel;var je=xe(w.expirationTime<=O);if(O=s.unstable_now(),typeof je=="function"){w.callback=je,se(O),W=!0;break t}w===n(g)&&i(g),se(O)}else i(g);w=n(g)}if(w!==null)W=!0;else{var L=n(y);L!==null&&me(ce,L.startTime-O),W=!1}}break e}finally{w=null,A=de,D=!1}W=void 0}}finally{W?z():ue=!1}}}var z;if(typeof J=="function")z=function(){J(V)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Ye=j.port2;j.port1.onmessage=V,z=function(){Ye.postMessage(null)}}else z=function(){Q(V,0)};function me(O,W){C=Q(function(){O(s.unstable_now())},W)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(O){O.callback=null},s.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(O){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var de=A;A=W;try{return O()}finally{A=de}},s.unstable_requestPaint=function(){P=!0},s.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var de=A;A=O;try{return W()}finally{A=de}},s.unstable_scheduleCallback=function(O,W,de){var xe=s.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?xe+de:xe):de=xe,O){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=de+je,O={id:x++,callback:W,priorityLevel:O,startTime:de,expirationTime:je,sortIndex:-1},de>xe?(O.sortIndex=de,e(y,O),n(g)===null&&O===n(y)&&(q?(te(C),C=-1):q=!0,me(ce,de-xe))):(O.sortIndex=je,e(g,O),k||D||(k=!0,ue||(ue=!0,z()))),O},s.unstable_shouldYield=I,s.unstable_wrapCallback=function(O){var W=A;return function(){var de=A;A=W;try{return O.apply(this,arguments)}finally{A=de}}}})(dm)),dm}var Lv;function iS(){return Lv||(Lv=1,hm.exports=rS()),hm.exports}var fm={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function aS(){if(Vv)return nn;Vv=1;var s=ep();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:y,implementation:x}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,nn.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,x)},nn.flushSync=function(g){var y=d.T,x=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=y,i.p=x,i.d.f()}},nn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},nn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},nn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,w=p(x,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:A,fetchPriority:D}):x==="script"&&i.d.X(g,{crossOrigin:w,integrity:A,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},nn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},nn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,w=p(x,y.crossOrigin);i.d.L(g,x,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},nn.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},nn.requestFormReset=function(g){i.d.r(g)},nn.unstable_batchedUpdates=function(g,y){return g(y)},nn.useFormState=function(g,y,x){return d.H.useFormState(g,y,x)},nn.useFormStatus=function(){return d.H.useHostTransitionStatus()},nn.version="19.2.0",nn}var Uv;function oS(){if(Uv)return fm.exports;Uv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),fm.exports=aS(),fm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function lS(){if(Pv)return Ll;Pv=1;var s=iS(),e=ep(),n=oS();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),t;if(m===l)return g(f),r;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=m;else{for(var _=!1,E=f.child;E;){if(E===a){_=!0,a=f,l=m;break}if(E===l){_=!0,l=f,a=m;break}E=E.sibling}if(!_){for(E=m.child;E;){if(E===a){_=!0,a=m,l=f;break}if(E===l){_=!0,l=m,a=f;break}E=E.sibling}if(!_)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function x(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=x(t),r!==null)return r;t=t.sibling}return null}var w=Object.assign,A=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),J=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function Ye(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case Q:return"Profiler";case P:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case J:return t.displayName||"Context";case te:return(t._context.displayName||"Context")+".Consumer";case se:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return r=t.displayName||null,r!==null?r:Ye(t.type)||"Memo";case N:r=t._payload,t=t._init;try{return Ye(t(r))}catch{}}return null}var me=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},xe=[],je=-1;function L(t){return{current:t}}function ee(t){0>je||(t.current=xe[je],xe[je]=null,je--)}function H(t,r){je++,xe[je]=t.current,t.current=r}var le=L(null),re=L(null),fe=L(null),be=L(null);function Fe(t,r){switch(H(fe,r),H(re,t),H(le,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?ev(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=ev(r),t=tv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ee(le),H(le,t)}function We(){ee(le),ee(re),ee(fe)}function un(t){t.memoizedState!==null&&H(be,t);var r=le.current,a=tv(r,t.type);r!==a&&(H(re,t),H(le,a))}function xn(t){re.current===t&&(ee(le),ee(re)),be.current===t&&(ee(be),Il._currentValue=de)}var ds,xa;function ts(t){if(ds===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ds=r&&r[1]||"",xa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ds+t+xa}var Ni=!1;function ba(t,r){if(!t||Ni)return"";Ni=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Y){var K=Y}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(Y){K=Y}t.call(ie.prototype)}}else{try{throw Error()}catch(Y){K=Y}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Y){if(Y&&K&&typeof Y.stack=="string")return[Y.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],E=m[1];if(_&&E){var M=_.split(`
`),$=E.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===$.length)for(l=M.length-1,f=$.length-1;1<=l&&0<=f&&M[l]!==$[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==$[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==$[f]){var Z=`
`+M[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=f);break}}}finally{Ni=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ts(a):""}function rd(t,r){switch(t.tag){case 26:case 27:case 5:return ts(t.type);case 16:return ts("Lazy");case 13:return t.child!==r&&r!==null?ts("Suspense Fallback"):ts("Suspense");case 19:return ts("SuspenseList");case 0:case 15:return ba(t.type,!1);case 11:return ba(t.type.render,!1);case 1:return ba(t.type,!0);case 31:return ts("Activity");default:return""}}function Tc(t){try{var r="",a=null;do r+=rd(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var wa=Object.prototype.hasOwnProperty,Ri=s.unstable_scheduleCallback,Ea=s.unstable_cancelCallback,id=s.unstable_shouldYield,Oo=s.unstable_requestPaint,zt=s.unstable_now,Sc=s.unstable_getCurrentPriorityLevel,Ct=s.unstable_ImmediatePriority,Mt=s.unstable_UserBlockingPriority,Vs=s.unstable_NormalPriority,Ac=s.unstable_LowPriority,ko=s.unstable_IdlePriority,ad=s.log,Ci=s.unstable_setDisableYieldValue,xr=null,en=null;function zn(t){if(typeof ad=="function"&&Ci(t),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(xr,t)}catch{}}var hn=Math.clz32?Math.clz32:Nc,od=Math.log,Lo=Math.LN2;function Nc(t){return t>>>=0,t===0?32:31-(od(t)/Lo|0)|0}var ji=256,fs=262144,br=4194304;function ns(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Bn(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?f=ns(l):(_&=E,_!==0?f=ns(_):a||(a=E&~t,a!==0&&(f=ns(a))))):(E=l&~m,E!==0?f=ns(E):_!==0?f=ns(_):a||(a=l&~t,a!==0&&(f=ns(a)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:f}function wr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ta(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vo(){var t=br;return br<<=1,(br&62914560)===0&&(br=4194304),t}function Us(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Er(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Bt(t,r,a,l,f,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,M=t.expirationTimes,$=t.hiddenUpdates;for(a=_&~a;0<a;){var Z=31-hn(a),ie=1<<Z;E[Z]=0,M[Z]=-1;var K=$[Z];if(K!==null)for($[Z]=null,Z=0;Z<K.length;Z++){var Y=K[Z];Y!==null&&(Y.lane&=-536870913)}a&=~ie}l!==0&&Uo(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~r))}function Uo(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-hn(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Tr(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-hn(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function Sr(t,r){var a=r&-r;return a=(a&42)!==0?1:Po(a),(a&(t.suspendedLanes|r))!==0?0:a}function Po(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function zo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ps(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:Tv(t.type))}function Rc(t,r){var a=W.p;try{return W.p=t,r()}finally{W.p=a}}var ms=Math.random().toString(36).slice(2),dt="__reactFiber$"+ms,qt="__reactProps$"+ms,ps="__reactContainer$"+ms,Ar="__reactEvents$"+ms,gs="__reactListeners$"+ms,Cc="__reactHandles$"+ms,Bo="__reactResources$"+ms,zs="__reactMarker$"+ms;function Ii(t){delete t[dt],delete t[qt],delete t[Ar],delete t[gs],delete t[Cc]}function Bs(t){var r=t[dt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[ps]||a[dt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=lv(t);t!==null;){if(a=t[dt])return a;t=lv(t)}return r}t=a,a=t.parentNode}return null}function qs(t){if(t=t[dt]||t[ps]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Di(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function ss(t){var r=t[Bo];return r||(r=t[Bo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function vt(t){t[zs]=!0}var Sa=new Set,Nr={};function dn(t,r){ys(t,r),ys(t+"Capture",r)}function ys(t,r){for(Nr[t]=r,t=0;t<r.length;t++)Sa.add(r[t])}var ld=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qo={},Fo={};function jc(t){return wa.call(Fo,t)?!0:wa.call(qo,t)?!1:ld.test(t)?Fo[t]=!0:(qo[t]=!0,!1)}function Rr(t,r,a){if(jc(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Cr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function qn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function fn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ic(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function cd(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Aa(t){if(!t._valueTracker){var r=Ic(t)?"checked":"value";t._valueTracker=cd(t,r,""+t[r])}}function Ho(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Ic(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Na(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Fs=/[\n"\\]/g;function ft(t){return t.replace(Fs,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function jr(t,r,a,l,f,m,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+fn(r)):t.value!==""+fn(r)&&(t.value=""+fn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?Ra(t,_,fn(r)):a!=null?Ra(t,_,fn(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+fn(E):t.removeAttribute("name")}function Mi(t,r,a,l,f,m,_,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Aa(t);return}a=a!=null?""+fn(a):"",r=r!=null?""+fn(r):a,E||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Aa(t)}function Ra(t,r,a){r==="number"&&Na(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function He(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+fn(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Oi(t,r,a){if(r!=null&&(r=""+fn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+fn(a):""}function Ir(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(me(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=fn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Aa(t)}function Fn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var ud=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Go(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||ud.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Dc(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&Go(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&Go(t,m,r[m])}function $o(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vs(t){return dd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ot(){}var Ca=null;function ja(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hs=null,Cn=null;function Mc(t){var r=qs(t);if(r&&(t=r.stateNode)){var a=t[qt]||null;e:switch(t=r.stateNode,r.type){case"input":if(jr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ft(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[qt]||null;if(!f)throw Error(i(90));jr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Ho(l)}break e;case"textarea":Oi(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&He(t,!!a.multiple,r,!1)}}}var Ko=!1;function Oc(t,r,a){if(Ko)return t(r,a);Ko=!0;try{var l=t(r);return l}finally{if(Ko=!1,(Hs!==null||Cn!==null)&&(ju(),Hs&&(r=Hs,t=Cn,Cn=Hs=null,Mc(r),t)))for(r=0;r<t.length;r++)Mc(t[r])}}function bn(t,r){var a=t.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yo=!1;if(rs)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{Yo=!1}var jn=null,Ia=null,xs=null;function Dr(){if(xs)return xs;var t,r=Ia,a=r.length,l,f="value"in jn?jn.value:jn.textContent,m=f.length;for(t=0;t<a&&r[t]===f[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===f[m-l];l++);return xs=f.slice(t,1<l?1-l:void 0)}function ki(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Mr(){return!0}function it(){return!1}function tn(t){function r(a,l,f,m,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Mr:it,this.isPropagationStopped=it,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),r}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=tn(Gs),Or=w({},Gs,{view:0,detail:0}),kc=tn(Or),kr,Da,mn,Vi=w({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mn&&(mn&&t.type==="mousemove"?(kr=t.screenX-mn.screenX,Da=t.screenY-mn.screenY):Da=kr=0,mn=t),kr)},movementY:function(t){return"movementY"in t?t.movementY:Da}}),Lc=tn(Vi),Ui=w({},Vi,{dataTransfer:0}),Vc=tn(Ui),Qo=w({},Or,{relatedTarget:0}),Lr=tn(Qo),Uc=w({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ma=tn(Uc),fd=w({},Gs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pc=tn(fd),Pi=w({},Gs,{data:0}),Xo=tn(Pi),zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bc(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Jo[t])?!!r[t]:!1}function Vr(){return Bc}var qc=w({},Or,{key:function(t){if(t.key){var r=zc[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ki(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(t){return t.type==="keypress"?ki(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ki(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fc=tn(qc),$s=w({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zo=tn($s),Hc=w({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),Gc=tn(Hc),$c=w({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oa=tn($c),pn=w({},Vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Kc=tn(pn),Yc=w({},Gs,{newState:0,oldState:0}),Ur=tn(Yc),h=[9,13,27,32],v=rs&&"CompositionEvent"in window,b=null;rs&&"documentMode"in document&&(b=document.documentMode);var T=rs&&"TextEvent"in window&&!b,F=rs&&(!v||b&&8<b&&11>=b),X=" ",he=!1;function Xe(t,r){switch(t){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Me=!1;function kt(t,r){switch(t){case"compositionend":return wt(r);case"keypress":return r.which!==32?null:(he=!0,X);case"textInput":return t=r.data,t===X&&he?null:t;default:return null}}function Lt(t,r){if(Me)return t==="compositionend"||!v&&Xe(t,r)?(t=Dr(),xs=Ia=jn=null,Me=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return F&&r.locale!=="ko"?null:r.data;default:return null}}var Pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wn(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Pr[t.type]:r==="textarea"}function zi(t,r,a,l){Hs?Cn?Cn.push(l):Cn=[l]:Hs=l,r=Vu(r,"onChange"),0<r.length&&(a=new Li("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Ks=null,el=null;function RE(t){Y0(t,0)}function Qc(t){var r=Di(t);if(Ho(r))return t}function fg(t,r){if(t==="change")return r}var mg=!1;if(rs){var md;if(rs){var pd="oninput"in document;if(!pd){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),pd=typeof pg.oninput=="function"}md=pd}else md=!1;mg=md&&(!document.documentMode||9<document.documentMode)}function gg(){Ks&&(Ks.detachEvent("onpropertychange",yg),el=Ks=null)}function yg(t){if(t.propertyName==="value"&&Qc(el)){var r=[];zi(r,el,t,ja(t)),Oc(RE,r)}}function CE(t,r,a){t==="focusin"?(gg(),Ks=r,el=a,Ks.attachEvent("onpropertychange",yg)):t==="focusout"&&gg()}function jE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qc(el)}function IE(t,r){if(t==="click")return Qc(r)}function DE(t,r){if(t==="input"||t==="change")return Qc(r)}function ME(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var In=typeof Object.is=="function"?Object.is:ME;function tl(t,r){if(In(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!wa.call(r,f)||!In(t[f],r[f]))return!1}return!0}function vg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _g(t,r){var a=vg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vg(a)}}function xg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?xg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function bg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Na(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Na(t.document)}return r}function gd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var OE=rs&&"documentMode"in document&&11>=document.documentMode,ka=null,yd=null,nl=null,vd=!1;function wg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vd||ka==null||ka!==Na(l)||(l=ka,"selectionStart"in l&&gd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),nl&&tl(nl,l)||(nl=l,l=Vu(yd,"onSelect"),0<l.length&&(r=new Li("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=ka)))}function Bi(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var La={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionrun:Bi("Transition","TransitionRun"),transitionstart:Bi("Transition","TransitionStart"),transitioncancel:Bi("Transition","TransitionCancel"),transitionend:Bi("Transition","TransitionEnd")},_d={},Eg={};rs&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function qi(t){if(_d[t])return _d[t];if(!La[t])return t;var r=La[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Eg)return _d[t]=r[a];return t}var Tg=qi("animationend"),Sg=qi("animationiteration"),Ag=qi("animationstart"),kE=qi("transitionrun"),LE=qi("transitionstart"),VE=qi("transitioncancel"),Ng=qi("transitionend"),Rg=new Map,xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xd.push("scrollEnd");function is(t,r){Rg.set(t,r),dn(r,[t])}var Xc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Hn=[],Va=0,bd=0;function Wc(){for(var t=Va,r=bd=Va=0;r<t;){var a=Hn[r];Hn[r++]=null;var l=Hn[r];Hn[r++]=null;var f=Hn[r];Hn[r++]=null;var m=Hn[r];if(Hn[r++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}m!==0&&Cg(a,f,m)}}function Jc(t,r,a,l){Hn[Va++]=t,Hn[Va++]=r,Hn[Va++]=a,Hn[Va++]=l,bd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function wd(t,r,a,l){return Jc(t,r,a,l),Zc(t)}function Fi(t,r){return Jc(t,null,null,r),Zc(t)}function Cg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-hn(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),m):null}function Zc(t){if(50<Tl)throw Tl=0,Df=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ua={};function UE(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,r,a,l){return new UE(t,r,a,l)}function Ed(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ys(t,r){var a=t.alternate;return a===null?(a=Dn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function jg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function eu(t,r,a,l,f,m){var _=0;if(l=t,typeof t=="function")Ed(t)&&(_=1);else if(typeof t=="string")_=FT(t,a,le.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Dn(31,a,r,f),t.elementType=R,t.lanes=m,t;case q:return Hi(a.children,f,m,r);case P:_=8,f|=24;break;case Q:return t=Dn(12,a,r,f|2),t.elementType=Q,t.lanes=m,t;case ce:return t=Dn(13,a,r,f),t.elementType=ce,t.lanes=m,t;case ue:return t=Dn(19,a,r,f),t.elementType=ue,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:_=10;break e;case te:_=9;break e;case se:_=11;break e;case C:_=14;break e;case N:_=16,l=null;break e}_=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=Dn(_,a,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function Hi(t,r,a,l){return t=Dn(7,t,l,r),t.lanes=a,t}function Td(t,r,a){return t=Dn(6,t,null,r),t.lanes=a,t}function Ig(t){var r=Dn(18,null,null,0);return r.stateNode=t,r}function Sd(t,r,a){return r=Dn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Dg=new WeakMap;function Gn(t,r){if(typeof t=="object"&&t!==null){var a=Dg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Tc(r)},Dg.set(t,r),r)}return{value:t,source:r,stack:Tc(r)}}var Pa=[],za=0,tu=null,sl=0,$n=[],Kn=0,zr=null,bs=1,ws="";function Qs(t,r){Pa[za++]=sl,Pa[za++]=tu,tu=t,sl=r}function Mg(t,r,a){$n[Kn++]=bs,$n[Kn++]=ws,$n[Kn++]=zr,zr=t;var l=bs;t=ws;var f=32-hn(l)-1;l&=~(1<<f),a+=1;var m=32-hn(r)+f;if(30<m){var _=f-f%5;m=(l&(1<<_)-1).toString(32),l>>=_,f-=_,bs=1<<32-hn(r)+f|a<<f|l,ws=m+t}else bs=1<<m|a<<f|l,ws=t}function Ad(t){t.return!==null&&(Qs(t,1),Mg(t,1,0))}function Nd(t){for(;t===tu;)tu=Pa[--za],Pa[za]=null,sl=Pa[--za],Pa[za]=null;for(;t===zr;)zr=$n[--Kn],$n[Kn]=null,ws=$n[--Kn],$n[Kn]=null,bs=$n[--Kn],$n[Kn]=null}function Og(t,r){$n[Kn++]=bs,$n[Kn++]=ws,$n[Kn++]=zr,bs=r.id,ws=r.overflow,zr=t}var Ft=null,at=null,Pe=!1,Br=null,Yn=!1,Rd=Error(i(519));function qr(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rl(Gn(r,t)),Rd}function kg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[dt]=t,r[qt]=l,a){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(a=0;a<Al.length;a++)ke(Al[a],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ke("invalid",r),Mi(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ke("invalid",r);break;case"textarea":ke("invalid",r),Ir(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||J0(r.textContent,a)?(l.popover!=null&&(ke("beforetoggle",r),ke("toggle",r)),l.onScroll!=null&&ke("scroll",r),l.onScrollEnd!=null&&ke("scrollend",r),l.onClick!=null&&(r.onclick=Ot),r=!0):r=!1,r||qr(t,!0)}function Lg(t){for(Ft=t.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:Ft=Ft.return}}function Ba(t){if(t!==Ft)return!1;if(!Pe)return Lg(t),Pe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Kf(t.type,t.memoizedProps)),a=!a),a&&at&&qr(t),Lg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));at=ov(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));at=ov(t)}else r===27?(r=at,ni(t.type)?(t=Jf,Jf=null,at=t):at=r):at=Ft?Xn(t.stateNode.nextSibling):null;return!0}function Gi(){at=Ft=null,Pe=!1}function Cd(){var t=Br;return t!==null&&(An===null?An=t:An.push.apply(An,t),Br=null),t}function rl(t){Br===null?Br=[t]:Br.push(t)}var jd=L(null),$i=null,Xs=null;function Fr(t,r,a){H(jd,r._currentValue),r._currentValue=a}function Ws(t){t._currentValue=jd.current,ee(jd)}function Id(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Dd(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var M=0;M<r.length;M++)if(E.context===r[M]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),Id(m.return,a,t),l||(_=null);break e}m=E.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Id(_,a,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function qa(t,r,a,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var E=f.type;In(f.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(f===be.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Il):t=[Il])}f=f.return}t!==null&&Dd(r,t,a,l),r.flags|=262144}function nu(t){for(t=t.firstContext;t!==null;){if(!In(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ki(t){$i=t,Xs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ht(t){return Vg($i,t)}function su(t,r){return $i===null&&Ki(t),Vg(t,r)}function Vg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Xs===null){if(t===null)throw Error(i(308));Xs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Xs=Xs.next=r;return a}var PE=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},zE=s.unstable_scheduleCallback,BE=s.unstable_NormalPriority,Et={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Md(){return{controller:new PE,data:new Map,refCount:0}}function il(t){t.refCount--,t.refCount===0&&zE(BE,function(){t.controller.abort()})}var al=null,Od=0,Fa=0,Ha=null;function qE(t,r){if(al===null){var a=al=[];Od=0,Fa=Uf(),Ha={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Od++,r.then(Ug,Ug),r}function Ug(){if(--Od===0&&al!==null){Ha!==null&&(Ha.status="fulfilled");var t=al;al=null,Fa=0,Ha=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function FE(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Pg=O.S;O.S=function(t,r){w0=zt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&qE(t,r),Pg!==null&&Pg(t,r)};var Yi=L(null);function kd(){var t=Yi.current;return t!==null?t:rt.pooledCache}function ru(t,r){r===null?H(Yi,Yi.current):H(Yi,r.pool)}function zg(){var t=kd();return t===null?null:{parent:Et._currentValue,pool:t}}var Ga=Error(i(460)),Ld=Error(i(474)),iu=Error(i(542)),au={then:function(){}};function Bg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function qg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Ot,Ot),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Hg(t),t;default:if(typeof r.status=="string")r.then(Ot,Ot);else{if(t=rt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Hg(t),t}throw Xi=r,Ga}}function Qi(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Xi=a,Ga):a}}var Xi=null;function Fg(){if(Xi===null)throw Error(i(459));var t=Xi;return Xi=null,t}function Hg(t){if(t===Ga||t===iu)throw Error(i(483))}var $a=null,ol=0;function ou(t){var r=ol;return ol+=1,$a===null&&($a=[]),qg($a,t,r)}function ll(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function lu(t,r){throw r.$$typeof===A?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Gg(t){function r(B,U){if(t){var G=B.deletions;G===null?(B.deletions=[U],B.flags|=16):G.push(U)}}function a(B,U){if(!t)return null;for(;U!==null;)r(B,U),U=U.sibling;return null}function l(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function f(B,U){return B=Ys(B,U),B.index=0,B.sibling=null,B}function m(B,U,G){return B.index=G,t?(G=B.alternate,G!==null?(G=G.index,G<U?(B.flags|=67108866,U):G):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function _(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function E(B,U,G,ne){return U===null||U.tag!==6?(U=Td(G,B.mode,ne),U.return=B,U):(U=f(U,G),U.return=B,U)}function M(B,U,G,ne){var we=G.type;return we===q?Z(B,U,G.props.children,ne,G.key):U!==null&&(U.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&Qi(we)===U.type)?(U=f(U,G.props),ll(U,G),U.return=B,U):(U=eu(G.type,G.key,G.props,null,B.mode,ne),ll(U,G),U.return=B,U)}function $(B,U,G,ne){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=Sd(G,B.mode,ne),U.return=B,U):(U=f(U,G.children||[]),U.return=B,U)}function Z(B,U,G,ne,we){return U===null||U.tag!==7?(U=Hi(G,B.mode,ne,we),U.return=B,U):(U=f(U,G),U.return=B,U)}function ie(B,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Td(""+U,B.mode,G),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return G=eu(U.type,U.key,U.props,null,B.mode,G),ll(G,U),G.return=B,G;case k:return U=Sd(U,B.mode,G),U.return=B,U;case N:return U=Qi(U),ie(B,U,G)}if(me(U)||z(U))return U=Hi(U,B.mode,G,null),U.return=B,U;if(typeof U.then=="function")return ie(B,ou(U),G);if(U.$$typeof===J)return ie(B,su(B,U),G);lu(B,U)}return null}function K(B,U,G,ne){var we=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return we!==null?null:E(B,U,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case D:return G.key===we?M(B,U,G,ne):null;case k:return G.key===we?$(B,U,G,ne):null;case N:return G=Qi(G),K(B,U,G,ne)}if(me(G)||z(G))return we!==null?null:Z(B,U,G,ne,null);if(typeof G.then=="function")return K(B,U,ou(G),ne);if(G.$$typeof===J)return K(B,U,su(B,G),ne);lu(B,G)}return null}function Y(B,U,G,ne,we){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(G)||null,E(U,B,""+ne,we);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case D:return B=B.get(ne.key===null?G:ne.key)||null,M(U,B,ne,we);case k:return B=B.get(ne.key===null?G:ne.key)||null,$(U,B,ne,we);case N:return ne=Qi(ne),Y(B,U,G,ne,we)}if(me(ne)||z(ne))return B=B.get(G)||null,Z(U,B,ne,we,null);if(typeof ne.then=="function")return Y(B,U,G,ou(ne),we);if(ne.$$typeof===J)return Y(B,U,G,su(U,ne),we);lu(U,ne)}return null}function ye(B,U,G,ne){for(var we=null,Ge=null,_e=U,De=U=0,Ve=null;_e!==null&&De<G.length;De++){_e.index>De?(Ve=_e,_e=null):Ve=_e.sibling;var $e=K(B,_e,G[De],ne);if($e===null){_e===null&&(_e=Ve);break}t&&_e&&$e.alternate===null&&r(B,_e),U=m($e,U,De),Ge===null?we=$e:Ge.sibling=$e,Ge=$e,_e=Ve}if(De===G.length)return a(B,_e),Pe&&Qs(B,De),we;if(_e===null){for(;De<G.length;De++)_e=ie(B,G[De],ne),_e!==null&&(U=m(_e,U,De),Ge===null?we=_e:Ge.sibling=_e,Ge=_e);return Pe&&Qs(B,De),we}for(_e=l(_e);De<G.length;De++)Ve=Y(_e,B,De,G[De],ne),Ve!==null&&(t&&Ve.alternate!==null&&_e.delete(Ve.key===null?De:Ve.key),U=m(Ve,U,De),Ge===null?we=Ve:Ge.sibling=Ve,Ge=Ve);return t&&_e.forEach(function(oi){return r(B,oi)}),Pe&&Qs(B,De),we}function Te(B,U,G,ne){if(G==null)throw Error(i(151));for(var we=null,Ge=null,_e=U,De=U=0,Ve=null,$e=G.next();_e!==null&&!$e.done;De++,$e=G.next()){_e.index>De?(Ve=_e,_e=null):Ve=_e.sibling;var oi=K(B,_e,$e.value,ne);if(oi===null){_e===null&&(_e=Ve);break}t&&_e&&oi.alternate===null&&r(B,_e),U=m(oi,U,De),Ge===null?we=oi:Ge.sibling=oi,Ge=oi,_e=Ve}if($e.done)return a(B,_e),Pe&&Qs(B,De),we;if(_e===null){for(;!$e.done;De++,$e=G.next())$e=ie(B,$e.value,ne),$e!==null&&(U=m($e,U,De),Ge===null?we=$e:Ge.sibling=$e,Ge=$e);return Pe&&Qs(B,De),we}for(_e=l(_e);!$e.done;De++,$e=G.next())$e=Y(_e,B,De,$e.value,ne),$e!==null&&(t&&$e.alternate!==null&&_e.delete($e.key===null?De:$e.key),U=m($e,U,De),Ge===null?we=$e:Ge.sibling=$e,Ge=$e);return t&&_e.forEach(function(eS){return r(B,eS)}),Pe&&Qs(B,De),we}function st(B,U,G,ne){if(typeof G=="object"&&G!==null&&G.type===q&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case D:e:{for(var we=G.key;U!==null;){if(U.key===we){if(we=G.type,we===q){if(U.tag===7){a(B,U.sibling),ne=f(U,G.props.children),ne.return=B,B=ne;break e}}else if(U.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&Qi(we)===U.type){a(B,U.sibling),ne=f(U,G.props),ll(ne,G),ne.return=B,B=ne;break e}a(B,U);break}else r(B,U);U=U.sibling}G.type===q?(ne=Hi(G.props.children,B.mode,ne,G.key),ne.return=B,B=ne):(ne=eu(G.type,G.key,G.props,null,B.mode,ne),ll(ne,G),ne.return=B,B=ne)}return _(B);case k:e:{for(we=G.key;U!==null;){if(U.key===we)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){a(B,U.sibling),ne=f(U,G.children||[]),ne.return=B,B=ne;break e}else{a(B,U);break}else r(B,U);U=U.sibling}ne=Sd(G,B.mode,ne),ne.return=B,B=ne}return _(B);case N:return G=Qi(G),st(B,U,G,ne)}if(me(G))return ye(B,U,G,ne);if(z(G)){if(we=z(G),typeof we!="function")throw Error(i(150));return G=we.call(G),Te(B,U,G,ne)}if(typeof G.then=="function")return st(B,U,ou(G),ne);if(G.$$typeof===J)return st(B,U,su(B,G),ne);lu(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(a(B,U.sibling),ne=f(U,G),ne.return=B,B=ne):(a(B,U),ne=Td(G,B.mode,ne),ne.return=B,B=ne),_(B)):a(B,U)}return function(B,U,G,ne){try{ol=0;var we=st(B,U,G,ne);return $a=null,we}catch(_e){if(_e===Ga||_e===iu)throw _e;var Ge=Dn(29,_e,null,B.mode);return Ge.lanes=ne,Ge.return=B,Ge}finally{}}}var Wi=Gg(!0),$g=Gg(!1),Hr=!1;function Vd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ud(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Gr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function $r(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Zc(t),Cg(t,null,a),r}return Jc(t,l,r,a),Zc(t)}function cl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Tr(t,a)}}function Pd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?f=m=r:m=m.next=r}else f=m=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var zd=!1;function ul(){if(zd){var t=Ha;if(t!==null)throw t}}function hl(t,r,a,l){zd=!1;var f=t.updateQueue;Hr=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var M=E,$=M.next;M.next=null,_===null?m=$:_.next=$,_=M;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,E=Z.lastBaseUpdate,E!==_&&(E===null?Z.firstBaseUpdate=$:E.next=$,Z.lastBaseUpdate=M))}if(m!==null){var ie=f.baseState;_=0,Z=$=M=null,E=m;do{var K=E.lane&-536870913,Y=K!==E.lane;if(Y?(Le&K)===K:(l&K)===K){K!==0&&K===Fa&&(zd=!0),Z!==null&&(Z=Z.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ye=t,Te=E;K=r;var st=a;switch(Te.tag){case 1:if(ye=Te.payload,typeof ye=="function"){ie=ye.call(st,ie,K);break e}ie=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Te.payload,K=typeof ye=="function"?ye.call(st,ie,K):ye,K==null)break e;ie=w({},ie,K);break e;case 2:Hr=!0}}K=E.callback,K!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[K]:Y.push(K))}else Y={lane:K,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Z===null?($=Z=Y,M=ie):Z=Z.next=Y,_|=K;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;Y=E,E=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);Z===null&&(M=ie),f.baseState=M,f.firstBaseUpdate=$,f.lastBaseUpdate=Z,m===null&&(f.shared.lanes=0),Wr|=_,t.lanes=_,t.memoizedState=ie}}function Kg(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Yg(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Kg(a[t],r)}var Ka=L(null),cu=L(0);function Qg(t,r){t=ar,H(cu,t),H(Ka,r),ar=t|r.baseLanes}function Bd(){H(cu,ar),H(Ka,Ka.current)}function qd(){ar=cu.current,ee(Ka),ee(cu)}var Mn=L(null),Qn=null;function Kr(t){var r=t.alternate;H(_t,_t.current&1),H(Mn,t),Qn===null&&(r===null||Ka.current!==null||r.memoizedState!==null)&&(Qn=t)}function Fd(t){H(_t,_t.current),H(Mn,t),Qn===null&&(Qn=t)}function Xg(t){t.tag===22?(H(_t,_t.current),H(Mn,t),Qn===null&&(Qn=t)):Yr()}function Yr(){H(_t,_t.current),H(Mn,Mn.current)}function On(t){ee(Mn),Qn===t&&(Qn=null),ee(_t)}var _t=L(0);function uu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Xf(a)||Wf(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Js=0,Ie=null,tt=null,Tt=null,hu=!1,Ya=!1,Ji=!1,du=0,dl=0,Qa=null,HE=0;function mt(){throw Error(i(321))}function Hd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!In(t[a],r[a]))return!1;return!0}function Gd(t,r,a,l,f,m){return Js=m,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,O.H=t===null||t.memoizedState===null?My:of,Ji=!1,m=a(l,f),Ji=!1,Ya&&(m=Jg(r,a,l,f)),Wg(t),m}function Wg(t){O.H=pl;var r=tt!==null&&tt.next!==null;if(Js=0,Tt=tt=Ie=null,hu=!1,dl=0,Qa=null,r)throw Error(i(300));t===null||St||(t=t.dependencies,t!==null&&nu(t)&&(St=!0))}function Jg(t,r,a,l){Ie=t;var f=0;do{if(Ya&&(Qa=null),dl=0,Ya=!1,25<=f)throw Error(i(301));if(f+=1,Tt=tt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}O.H=Oy,m=r(a,l)}while(Ya);return m}function GE(){var t=O.H,r=t.useState()[0];return r=typeof r.then=="function"?fl(r):r,t=t.useState()[0],(tt!==null?tt.memoizedState:null)!==t&&(Ie.flags|=1024),r}function $d(){var t=du!==0;return du=0,t}function Kd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Yd(t){if(hu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}hu=!1}Js=0,Tt=tt=Ie=null,Ya=!1,dl=du=0,Qa=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ie.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function xt(){if(tt===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var r=Tt===null?Ie.memoizedState:Tt.next;if(r!==null)Tt=r,tt=t;else{if(t===null)throw Ie.alternate===null?Error(i(467)):Error(i(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Tt===null?Ie.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fl(t){var r=dl;return dl+=1,Qa===null&&(Qa=[]),t=qg(Qa,t,r),r=Ie,(Tt===null?r.memoizedState:Tt.next)===null&&(r=r.alternate,O.H=r===null||r.memoizedState===null?My:of),t}function mu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return fl(t);if(t.$$typeof===J)return Ht(t)}throw Error(i(438,String(t)))}function Qd(t){var r=null,a=Ie.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=fu(),Ie.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=I;return r.index++,a}function Zs(t,r){return typeof r=="function"?r(t):r}function pu(t){var r=xt();return Xd(r,tt,t)}function Xd(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var E=_=null,M=null,$=r,Z=!1;do{var ie=$.lane&-536870913;if(ie!==$.lane?(Le&ie)===ie:(Js&ie)===ie){var K=$.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ie===Fa&&(Z=!0);else if((Js&K)===K){$=$.next,K===Fa&&(Z=!0);continue}else ie={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(E=M=ie,_=m):M=M.next=ie,Ie.lanes|=K,Wr|=K;ie=$.action,Ji&&a(m,ie),m=$.hasEagerState?$.eagerState:a(m,ie)}else K={lane:ie,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(E=M=K,_=m):M=M.next=K,Ie.lanes|=ie,Wr|=ie;$=$.next}while($!==null&&$!==r);if(M===null?_=m:M.next=E,!In(m,t.memoizedState)&&(St=!0,Z&&(a=Ha,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=M,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Wd(t){var r=xt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=r.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do m=t(m,_.action),_=_.next;while(_!==f);In(m,r.memoizedState)||(St=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function Zg(t,r,a){var l=Ie,f=xt(),m=Pe;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=r();var _=!In((tt||f).memoizedState,a);if(_&&(f.memoizedState=a,St=!0),f=f.queue,ef(ny.bind(null,l,f,t),[t]),f.getSnapshot!==r||_||Tt!==null&&Tt.memoizedState.tag&1){if(l.flags|=2048,Xa(9,{destroy:void 0},ty.bind(null,l,f,a,r),null),rt===null)throw Error(i(349));m||(Js&127)!==0||ey(l,r,a)}return a}function ey(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ie.updateQueue,r===null?(r=fu(),Ie.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function ty(t,r,a,l){r.value=a,r.getSnapshot=l,sy(r)&&ry(t)}function ny(t,r,a){return a(function(){sy(r)&&ry(t)})}function sy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!In(t,a)}catch{return!0}}function ry(t){var r=Fi(t,2);r!==null&&Nn(r,t,2)}function Jd(t){var r=gn();if(typeof t=="function"){var a=t;if(t=a(),Ji){zn(!0);try{a()}finally{zn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:t},r}function iy(t,r,a,l){return t.baseState=a,Xd(t,tt,typeof l=="function"?l:Zs)}function $E(t,r,a,l,f){if(vu(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};O.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,ay(r,m)):(m.next=a.next,r.pending=a.next=m)}}function ay(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=O.T,_={};O.T=_;try{var E=a(f,l),M=O.S;M!==null&&M(_,E),oy(t,r,E)}catch($){Zd(t,r,$)}finally{m!==null&&_.types!==null&&(m.types=_.types),O.T=m}}else try{m=a(f,l),oy(t,r,m)}catch($){Zd(t,r,$)}}function oy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ly(t,r,l)},function(l){return Zd(t,r,l)}):ly(t,r,a)}function ly(t,r,a){r.status="fulfilled",r.value=a,cy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,ay(t,a)))}function Zd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,cy(r),r=r.next;while(r!==l)}t.action=null}function cy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function uy(t,r){return r}function hy(t,r){if(Pe){var a=rt.formState;if(a!==null){e:{var l=Ie;if(Pe){if(at){t:{for(var f=at,m=Yn;f.nodeType!==8;){if(!m){f=null;break t}if(f=Xn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){at=Xn(f.nextSibling),l=f.data==="F!";break e}}qr(l)}l=!1}l&&(r=a[0])}}return a=gn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:r},a.queue=l,a=jy.bind(null,Ie,l),l.dispatch=a,l=Jd(!1),m=af.bind(null,Ie,!1,l.queue),l=gn(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=$E.bind(null,Ie,f,m,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function dy(t){var r=xt();return fy(r,tt,t)}function fy(t,r,a){if(r=Xd(t,r,uy)[0],t=pu(Zs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=fl(r)}catch(_){throw _===Ga?iu:_}else l=r;r=xt();var f=r.queue,m=f.dispatch;return a!==r.memoizedState&&(Ie.flags|=2048,Xa(9,{destroy:void 0},KE.bind(null,f,a),null)),[l,m,t]}function KE(t,r){t.action=r}function my(t){var r=xt(),a=tt;if(a!==null)return fy(r,a,t);xt(),r=r.memoizedState,a=xt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Xa(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ie.updateQueue,r===null&&(r=fu(),Ie.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function py(){return xt().memoizedState}function gu(t,r,a,l){var f=gn();Ie.flags|=t,f.memoizedState=Xa(1|r,{destroy:void 0},a,l===void 0?null:l)}function yu(t,r,a,l){var f=xt();l=l===void 0?null:l;var m=f.memoizedState.inst;tt!==null&&l!==null&&Hd(l,tt.memoizedState.deps)?f.memoizedState=Xa(r,m,a,l):(Ie.flags|=t,f.memoizedState=Xa(1|r,m,a,l))}function gy(t,r){gu(8390656,8,t,r)}function ef(t,r){yu(2048,8,t,r)}function YE(t){Ie.flags|=4;var r=Ie.updateQueue;if(r===null)r=fu(),Ie.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function yy(t){var r=xt().memoizedState;return YE({ref:r,nextImpl:t}),function(){if((Qe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function vy(t,r){return yu(4,2,t,r)}function _y(t,r){return yu(4,4,t,r)}function xy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function by(t,r,a){a=a!=null?a.concat([t]):null,yu(4,4,xy.bind(null,r,t),a)}function tf(){}function wy(t,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Hd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Ey(t,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Hd(r,l[1]))return l[0];if(l=t(),Ji){zn(!0);try{t()}finally{zn(!1)}}return a.memoizedState=[l,r],l}function nf(t,r,a){return a===void 0||(Js&1073741824)!==0&&(Le&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=T0(),Ie.lanes|=t,Wr|=t,a)}function Ty(t,r,a,l){return In(a,r)?a:Ka.current!==null?(t=nf(t,a,l),In(t,r)||(St=!0),t):(Js&42)===0||(Js&1073741824)!==0&&(Le&261930)===0?(St=!0,t.memoizedState=a):(t=T0(),Ie.lanes|=t,Wr|=t,r)}function Sy(t,r,a,l,f){var m=W.p;W.p=m!==0&&8>m?m:8;var _=O.T,E={};O.T=E,af(t,!1,r,a);try{var M=f(),$=O.S;if($!==null&&$(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Z=FE(M,l);ml(t,r,Z,Vn(t))}else ml(t,r,l,Vn(t))}catch(ie){ml(t,r,{then:function(){},status:"rejected",reason:ie},Vn())}finally{W.p=m,_!==null&&E.types!==null&&(_.types=E.types),O.T=_}}function QE(){}function sf(t,r,a,l){if(t.tag!==5)throw Error(i(476));var f=Ay(t).queue;Sy(t,f,r,de,a===null?QE:function(){return Ny(t),a(l)})}function Ay(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:de},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ny(t){var r=Ay(t);r.next===null&&(r=t.alternate.memoizedState),ml(t,r.next.queue,{},Vn())}function rf(){return Ht(Il)}function Ry(){return xt().memoizedState}function Cy(){return xt().memoizedState}function XE(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Vn();t=Gr(a);var l=$r(r,t,a);l!==null&&(Nn(l,r,a),cl(l,r,a)),r={cache:Md()},t.payload=r;return}r=r.return}}function WE(t,r,a){var l=Vn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},vu(t)?Iy(r,a):(a=wd(t,r,a,l),a!==null&&(Nn(a,t,l),Dy(a,r,l)))}function jy(t,r,a){var l=Vn();ml(t,r,a,l)}function ml(t,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(vu(t))Iy(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,E=m(_,a);if(f.hasEagerState=!0,f.eagerState=E,In(E,_))return Jc(t,r,f,0),rt===null&&Wc(),!1}catch{}finally{}if(a=wd(t,r,f,l),a!==null)return Nn(a,t,l),Dy(a,r,l),!0}return!1}function af(t,r,a,l){if(l={lane:2,revertLane:Uf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},vu(t)){if(r)throw Error(i(479))}else r=wd(t,a,l,2),r!==null&&Nn(r,t,2)}function vu(t){var r=t.alternate;return t===Ie||r!==null&&r===Ie}function Iy(t,r){Ya=hu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Dy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Tr(t,a)}}var pl={readContext:Ht,use:mu,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};pl.useEffectEvent=mt;var My={readContext:Ht,use:mu,useCallback:function(t,r){return gn().memoizedState=[t,r===void 0?null:r],t},useContext:Ht,useEffect:gy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,gu(4194308,4,xy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return gu(4194308,4,t,r)},useInsertionEffect:function(t,r){gu(4,2,t,r)},useMemo:function(t,r){var a=gn();r=r===void 0?null:r;var l=t();if(Ji){zn(!0);try{t()}finally{zn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=gn();if(a!==void 0){var f=a(r);if(Ji){zn(!0);try{a(r)}finally{zn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=WE.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var r=gn();return t={current:t},r.memoizedState=t},useState:function(t){t=Jd(t);var r=t.queue,a=jy.bind(null,Ie,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:tf,useDeferredValue:function(t,r){var a=gn();return nf(a,t,r)},useTransition:function(){var t=Jd(!1);return t=Sy.bind(null,Ie,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ie,f=gn();if(Pe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),rt===null)throw Error(i(349));(Le&127)!==0||ey(l,r,a)}f.memoizedState=a;var m={value:a,getSnapshot:r};return f.queue=m,gy(ny.bind(null,l,m,t),[t]),l.flags|=2048,Xa(9,{destroy:void 0},ty.bind(null,l,m,a,r),null),a},useId:function(){var t=gn(),r=rt.identifierPrefix;if(Pe){var a=ws,l=bs;a=(l&~(1<<32-hn(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=du++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=HE++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:rf,useFormState:hy,useActionState:hy,useOptimistic:function(t){var r=gn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=af.bind(null,Ie,!0,a),a.dispatch=r,[t,r]},useMemoCache:Qd,useCacheRefresh:function(){return gn().memoizedState=XE.bind(null,Ie)},useEffectEvent:function(t){var r=gn(),a={impl:t};return r.memoizedState=a,function(){if((Qe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},of={readContext:Ht,use:mu,useCallback:wy,useContext:Ht,useEffect:ef,useImperativeHandle:by,useInsertionEffect:vy,useLayoutEffect:_y,useMemo:Ey,useReducer:pu,useRef:py,useState:function(){return pu(Zs)},useDebugValue:tf,useDeferredValue:function(t,r){var a=xt();return Ty(a,tt.memoizedState,t,r)},useTransition:function(){var t=pu(Zs)[0],r=xt().memoizedState;return[typeof t=="boolean"?t:fl(t),r]},useSyncExternalStore:Zg,useId:Ry,useHostTransitionStatus:rf,useFormState:dy,useActionState:dy,useOptimistic:function(t,r){var a=xt();return iy(a,tt,t,r)},useMemoCache:Qd,useCacheRefresh:Cy};of.useEffectEvent=yy;var Oy={readContext:Ht,use:mu,useCallback:wy,useContext:Ht,useEffect:ef,useImperativeHandle:by,useInsertionEffect:vy,useLayoutEffect:_y,useMemo:Ey,useReducer:Wd,useRef:py,useState:function(){return Wd(Zs)},useDebugValue:tf,useDeferredValue:function(t,r){var a=xt();return tt===null?nf(a,t,r):Ty(a,tt.memoizedState,t,r)},useTransition:function(){var t=Wd(Zs)[0],r=xt().memoizedState;return[typeof t=="boolean"?t:fl(t),r]},useSyncExternalStore:Zg,useId:Ry,useHostTransitionStatus:rf,useFormState:my,useActionState:my,useOptimistic:function(t,r){var a=xt();return tt!==null?iy(a,tt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Qd,useCacheRefresh:Cy};Oy.useEffectEvent=yy;function lf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:w({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var cf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Vn(),f=Gr(l);f.payload=r,a!=null&&(f.callback=a),r=$r(t,f,l),r!==null&&(Nn(r,t,l),cl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Vn(),f=Gr(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=$r(t,f,l),r!==null&&(Nn(r,t,l),cl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Vn(),l=Gr(a);l.tag=2,r!=null&&(l.callback=r),r=$r(t,l,a),r!==null&&(Nn(r,t,a),cl(r,t,a))}};function ky(t,r,a,l,f,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):r.prototype&&r.prototype.isPureReactComponent?!tl(a,l)||!tl(f,m):!0}function Ly(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&cf.enqueueReplaceState(r,r.state,null)}function Zi(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=w({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Vy(t){Xc(t)}function Uy(t){console.error(t)}function Py(t){Xc(t)}function _u(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function zy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function uf(t,r,a){return a=Gr(a),a.tag=3,a.payload={element:null},a.callback=function(){_u(t,r)},a}function By(t){return t=Gr(t),t.tag=3,t}function qy(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){zy(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){zy(r,a,l),typeof f!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function JE(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&qa(r,a,f,!0),a=Mn.current,a!==null){switch(a.tag){case 31:case 13:return Qn===null?Iu():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===au?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),kf(t,l,f)),!1;case 22:return a.flags|=65536,l===au?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),kf(t,l,f)),!1}throw Error(i(435,a.tag))}return kf(t,l,f),Iu(),!1}if(Pe)return r=Mn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Rd&&(t=Error(i(422),{cause:l}),rl(Gn(t,a)))):(l!==Rd&&(r=Error(i(423),{cause:l}),rl(Gn(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Gn(l,a),f=uf(t.stateNode,l,f),Pd(t,f),pt!==4&&(pt=2)),!1;var m=Error(i(520),{cause:l});if(m=Gn(m,a),El===null?El=[m]:El.push(m),pt!==4&&(pt=2),r===null)return!0;l=Gn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=uf(a.stateNode,l,t),Pd(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Jr===null||!Jr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=By(f),qy(f,t,a,l),Pd(a,f),!1}a=a.return}while(a!==null);return!1}var hf=Error(i(461)),St=!1;function Gt(t,r,a,l){r.child=t===null?$g(r,null,a,l):Wi(r,t.child,a,l)}function Fy(t,r,a,l,f){a=a.render;var m=r.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return Ki(r),l=Gd(t,r,a,_,m,f),E=$d(),t!==null&&!St?(Kd(t,r,f),er(t,r,f)):(Pe&&E&&Ad(r),r.flags|=1,Gt(t,r,l,f),r.child)}function Hy(t,r,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!Ed(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,Gy(t,r,m,l,f)):(t=eu(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!_f(t,f)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:tl,a(_,l)&&t.ref===r.ref)return er(t,r,f)}return r.flags|=1,t=Ys(m,l),t.ref=r.ref,t.return=r,r.child=t}function Gy(t,r,a,l,f){if(t!==null){var m=t.memoizedProps;if(tl(m,l)&&t.ref===r.ref)if(St=!1,r.pendingProps=l=m,_f(t,f))(t.flags&131072)!==0&&(St=!0);else return r.lanes=t.lanes,er(t,r,f)}return df(t,r,a,l,f)}function $y(t,r,a,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,r.child=null;return Ky(t,r,m,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&ru(r,m!==null?m.cachePool:null),m!==null?Qg(r,m):Bd(),Xg(r);else return l=r.lanes=536870912,Ky(t,r,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(ru(r,m.cachePool),Qg(r,m),Yr(),r.memoizedState=null):(t!==null&&ru(r,null),Bd(),Yr());return Gt(t,r,f,a),r.child}function gl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ky(t,r,a,l,f){var m=kd();return m=m===null?null:{parent:Et._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},t!==null&&ru(r,null),Bd(),Xg(r),t!==null&&qa(t,r,l,!0),r.childLanes=f,null}function xu(t,r){return r=wu({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Yy(t,r,a){return Wi(r,t.child,null,a),t=xu(r,r.pendingProps),t.flags|=2,On(r),r.memoizedState=null,t}function ZE(t,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Pe){if(l.mode==="hidden")return t=xu(r,l),r.lanes=536870912,gl(null,t);if(Fd(r),(t=at)?(t=av(t,Yn),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:zr!==null?{id:bs,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},a=Ig(t),a.return=r,r.child=a,Ft=r,at=null)):t=null,t===null)throw qr(r);return r.lanes=536870912,null}return xu(r,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(Fd(r),f)if(r.flags&256)r.flags&=-257,r=Yy(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(St||qa(t,r,a,!1),f=(a&t.childLanes)!==0,St||f){if(l=rt,l!==null&&(_=Sr(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,Fi(t,_),Nn(l,t,_),hf;Iu(),r=Yy(t,r,a)}else t=m.treeContext,at=Xn(_.nextSibling),Ft=r,Pe=!0,Br=null,Yn=!1,t!==null&&Og(r,t),r=xu(r,l),r.flags|=4096;return r}return t=Ys(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function bu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function df(t,r,a,l,f){return Ki(r),a=Gd(t,r,a,l,void 0,f),l=$d(),t!==null&&!St?(Kd(t,r,f),er(t,r,f)):(Pe&&l&&Ad(r),r.flags|=1,Gt(t,r,a,f),r.child)}function Qy(t,r,a,l,f,m){return Ki(r),r.updateQueue=null,a=Jg(r,l,a,f),Wg(t),l=$d(),t!==null&&!St?(Kd(t,r,m),er(t,r,m)):(Pe&&l&&Ad(r),r.flags|=1,Gt(t,r,a,m),r.child)}function Xy(t,r,a,l,f){if(Ki(r),r.stateNode===null){var m=Ua,_=a.contextType;typeof _=="object"&&_!==null&&(m=Ht(_)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=cf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},Vd(r),_=a.contextType,m.context=typeof _=="object"&&_!==null?Ht(_):Ua,m.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(lf(r,a,_,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&cf.enqueueReplaceState(m,m.state,null),hl(r,l,m,f),ul(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var E=r.memoizedProps,M=Zi(a,E);m.props=M;var $=m.context,Z=a.contextType;_=Ua,typeof Z=="object"&&Z!==null&&(_=Ht(Z));var ie=a.getDerivedStateFromProps;Z=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||$!==_)&&Ly(r,m,l,_),Hr=!1;var K=r.memoizedState;m.state=K,hl(r,l,m,f),ul(),$=r.memoizedState,E||K!==$||Hr?(typeof ie=="function"&&(lf(r,a,ie,l),$=r.memoizedState),(M=Hr||ky(r,a,M,l,K,$,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=$),m.props=l,m.state=$,m.context=_,l=M):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Ud(t,r),_=r.memoizedProps,Z=Zi(a,_),m.props=Z,ie=r.pendingProps,K=m.context,$=a.contextType,M=Ua,typeof $=="object"&&$!==null&&(M=Ht($)),E=a.getDerivedStateFromProps,($=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ie||K!==M)&&Ly(r,m,l,M),Hr=!1,K=r.memoizedState,m.state=K,hl(r,l,m,f),ul();var Y=r.memoizedState;_!==ie||K!==Y||Hr||t!==null&&t.dependencies!==null&&nu(t.dependencies)?(typeof E=="function"&&(lf(r,a,E,l),Y=r.memoizedState),(Z=Hr||ky(r,a,Z,l,K,Y,M)||t!==null&&t.dependencies!==null&&nu(t.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Y,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Y,M)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Y),m.props=l,m.state=Y,m.context=M,l=Z):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,bu(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=Wi(r,t.child,null,f),r.child=Wi(r,null,a,f)):Gt(t,r,a,f),r.memoizedState=m.state,t=r.child):t=er(t,r,f),t}function Wy(t,r,a,l){return Gi(),r.flags|=256,Gt(t,r,a,l),r.child}var ff={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(t){return{baseLanes:t,cachePool:zg()}}function pf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Ln),t}function Jy(t,r,a){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(_t.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(Pe){if(f?Kr(r):Yr(),(t=at)?(t=av(t,Yn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:zr!==null?{id:bs,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},a=Ig(t),a.return=r,r.child=a,Ft=r,at=null)):t=null,t===null)throw qr(r);return Wf(t)?r.lanes=32:r.lanes=536870912,null}var E=l.children;return l=l.fallback,f?(Yr(),f=r.mode,E=wu({mode:"hidden",children:E},f),l=Hi(l,f,a,null),E.return=r,l.return=r,E.sibling=l,r.child=E,l=r.child,l.memoizedState=mf(a),l.childLanes=pf(t,_,a),r.memoizedState=ff,gl(null,l)):(Kr(r),gf(r,E))}var M=t.memoizedState;if(M!==null&&(E=M.dehydrated,E!==null)){if(m)r.flags&256?(Kr(r),r.flags&=-257,r=yf(t,r,a)):r.memoizedState!==null?(Yr(),r.child=t.child,r.flags|=128,r=null):(Yr(),E=l.fallback,f=r.mode,l=wu({mode:"visible",children:l.children},f),E=Hi(E,f,a,null),E.flags|=2,l.return=r,E.return=r,l.sibling=E,r.child=l,Wi(r,t.child,null,a),l=r.child,l.memoizedState=mf(a),l.childLanes=pf(t,_,a),r.memoizedState=ff,r=gl(null,l));else if(Kr(r),Wf(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var $=_.dgst;_=$,l=Error(i(419)),l.stack="",l.digest=_,rl({value:l,source:null,stack:null}),r=yf(t,r,a)}else if(St||qa(t,r,a,!1),_=(a&t.childLanes)!==0,St||_){if(_=rt,_!==null&&(l=Sr(_,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Fi(t,l),Nn(_,t,l),hf;Xf(E)||Iu(),r=yf(t,r,a)}else Xf(E)?(r.flags|=192,r.child=t.child,r=null):(t=M.treeContext,at=Xn(E.nextSibling),Ft=r,Pe=!0,Br=null,Yn=!1,t!==null&&Og(r,t),r=gf(r,l.children),r.flags|=4096);return r}return f?(Yr(),E=l.fallback,f=r.mode,M=t.child,$=M.sibling,l=Ys(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,$!==null?E=Ys($,E):(E=Hi(E,f,a,null),E.flags|=2),E.return=r,l.return=r,l.sibling=E,r.child=l,gl(null,l),l=r.child,E=t.child.memoizedState,E===null?E=mf(a):(f=E.cachePool,f!==null?(M=Et._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=zg(),E={baseLanes:E.baseLanes|a,cachePool:f}),l.memoizedState=E,l.childLanes=pf(t,_,a),r.memoizedState=ff,gl(t.child,l)):(Kr(r),a=t.child,t=a.sibling,a=Ys(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function gf(t,r){return r=wu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function wu(t,r){return t=Dn(22,t,null,r),t.lanes=0,t}function yf(t,r,a){return Wi(r,t.child,null,a),t=gf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Zy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Id(t.return,r,a)}function vf(t,r,a,l,f,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=m)}function e0(t,r,a){var l=r.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var _=_t.current,E=(_&2)!==0;if(E?(_=_&1|2,r.flags|=128):_&=1,H(_t,_),Gt(t,r,l,a),l=Pe?sl:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zy(t,a,r);else if(t.tag===19)Zy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&uu(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),vf(r,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&uu(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}vf(r,!0,a,null,m,l);break;case"together":vf(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function er(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Wr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(qa(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=Ys(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ys(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function _f(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&nu(t)))}function eT(t,r,a){switch(r.tag){case 3:Fe(r,r.stateNode.containerInfo),Fr(r,Et,t.memoizedState.cache),Gi();break;case 27:case 5:un(r);break;case 4:Fe(r,r.stateNode.containerInfo);break;case 10:Fr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Fd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Kr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Jy(t,r,a):(Kr(r),t=er(t,r,a),t!==null?t.sibling:null);Kr(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(qa(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return e0(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),H(_t,_t.current),l)break;return null;case 22:return r.lanes=0,$y(t,r,a,r.pendingProps);case 24:Fr(r,Et,t.memoizedState.cache)}return er(t,r,a)}function t0(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)St=!0;else{if(!_f(t,a)&&(r.flags&128)===0)return St=!1,eT(t,r,a);St=(t.flags&131072)!==0}else St=!1,Pe&&(r.flags&1048576)!==0&&Mg(r,sl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Qi(r.elementType),r.type=t,typeof t=="function")Ed(t)?(l=Zi(t,l),r.tag=1,r=Xy(null,r,t,l,a)):(r.tag=0,r=df(null,r,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===se){r.tag=11,r=Fy(null,r,t,l,a);break e}else if(f===C){r.tag=14,r=Hy(null,r,t,l,a);break e}}throw r=Ye(t)||t,Error(i(306,r,""))}}return r;case 0:return df(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=Zi(l,r.pendingProps),Xy(t,r,l,f,a);case 3:e:{if(Fe(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,Ud(t,r),hl(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Fr(r,Et,l),l!==m.cache&&Dd(r,[Et],a,!0),ul(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Wy(t,r,l,a);break e}else if(l!==f){f=Gn(Error(i(424)),r),rl(f),r=Wy(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(at=Xn(t.firstChild),Ft=r,Pe=!0,Br=null,Yn=!0,a=$g(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gi(),l===f){r=er(t,r,a);break e}Gt(t,r,l,a)}r=r.child}return r;case 26:return bu(t,r),t===null?(a=dv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Pe||(a=r.type,t=r.pendingProps,l=Uu(fe.current).createElement(a),l[dt]=r,l[qt]=t,$t(l,a,t),vt(l),r.stateNode=l):r.memoizedState=dv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return un(r),t===null&&Pe&&(l=r.stateNode=cv(r.type,r.pendingProps,fe.current),Ft=r,Yn=!0,f=at,ni(r.type)?(Jf=f,at=Xn(l.firstChild)):at=f),Gt(t,r,r.pendingProps.children,a),bu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Pe&&((f=l=at)&&(l=jT(l,r.type,r.pendingProps,Yn),l!==null?(r.stateNode=l,Ft=r,at=Xn(l.firstChild),Yn=!1,f=!0):f=!1),f||qr(r)),un(r),f=r.type,m=r.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Kf(f,m)?l=null:_!==null&&Kf(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=Gd(t,r,GE,null,null,a),Il._currentValue=f),bu(t,r),Gt(t,r,l,a),r.child;case 6:return t===null&&Pe&&((t=a=at)&&(a=IT(a,r.pendingProps,Yn),a!==null?(r.stateNode=a,Ft=r,at=null,t=!0):t=!1),t||qr(r)),null;case 13:return Jy(t,r,a);case 4:return Fe(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Wi(r,null,l,a):Gt(t,r,l,a),r.child;case 11:return Fy(t,r,r.type,r.pendingProps,a);case 7:return Gt(t,r,r.pendingProps,a),r.child;case 8:return Gt(t,r,r.pendingProps.children,a),r.child;case 12:return Gt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Fr(r,r.type,l.value),Gt(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Ki(r),f=Ht(f),l=l(f),r.flags|=1,Gt(t,r,l,a),r.child;case 14:return Hy(t,r,r.type,r.pendingProps,a);case 15:return Gy(t,r,r.type,r.pendingProps,a);case 19:return e0(t,r,a);case 31:return ZE(t,r,a);case 22:return $y(t,r,a,r.pendingProps);case 24:return Ki(r),l=Ht(Et),t===null?(f=kd(),f===null&&(f=rt,m=Md(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),r.memoizedState={parent:l,cache:f},Vd(r),Fr(r,Et,f)):((t.lanes&a)!==0&&(Ud(t,r),hl(r,null,null,a),ul()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Fr(r,Et,l)):(l=m.cache,Fr(r,Et,l),l!==f.cache&&Dd(r,[Et],a,!0))),Gt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function tr(t){t.flags|=4}function xf(t,r,a,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(R0())t.flags|=8192;else throw Xi=au,Ld}else t.flags&=-16777217}function n0(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!yv(r))if(R0())t.flags|=8192;else throw Xi=au,Ld}function Eu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Vo():536870912,t.lanes|=r,eo|=r)}function yl(t,r){if(!Pe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ot(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function tT(t,r,a){var l=r.pendingProps;switch(Nd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ot(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ws(Et),We(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ba(r)?tr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Cd())),ot(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(tr(r),m!==null?(ot(r),n0(r,m)):(ot(r),xf(r,f,null,l,a))):m?m!==t.memoizedState?(tr(r),ot(r),n0(r,m)):(ot(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&tr(r),ot(r),xf(r,f,t,l,a)),null;case 27:if(xn(r),a=fe.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&tr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return ot(r),null}t=le.current,Ba(r)?kg(r):(t=cv(f,l,a),r.stateNode=t,tr(r))}return ot(r),null;case 5:if(xn(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&tr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return ot(r),null}if(m=le.current,Ba(r))kg(r);else{var _=Uu(fe.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}m[dt]=r,m[qt]=l;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=m;e:switch($t(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&tr(r)}}return ot(r),xf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&tr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=fe.current,Ba(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=Ft,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[dt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||J0(t.nodeValue,a)),t||qr(r,!0)}else t=Uu(t).createTextNode(l),t[dt]=r,r.stateNode=t}return ot(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=Ba(r),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[dt]=r}else Gi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),t=!1}else a=Cd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(On(r),r):(On(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ot(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ba(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[dt]=r}else Gi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),f=!1}else f=Cd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(On(r),r):(On(r),null)}return On(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Eu(r,r.updateQueue),ot(r),null);case 4:return We(),t===null&&qf(r.stateNode.containerInfo),ot(r),null;case 10:return Ws(r.type),ot(r),null;case 19:if(ee(_t),l=r.memoizedState,l===null)return ot(r),null;if(f=(r.flags&128)!==0,m=l.rendering,m===null)if(f)yl(l,!1);else{if(pt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=uu(t),m!==null){for(r.flags|=128,yl(l,!1),t=m.updateQueue,r.updateQueue=t,Eu(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)jg(a,t),a=a.sibling;return H(_t,_t.current&1|2),Pe&&Qs(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&zt()>Ru&&(r.flags|=128,f=!0,yl(l,!1),r.lanes=4194304)}else{if(!f)if(t=uu(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,Eu(r,t),yl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Pe)return ot(r),null}else 2*zt()-l.renderingStartTime>Ru&&a!==536870912&&(r.flags|=128,f=!0,yl(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=zt(),t.sibling=null,a=_t.current,H(_t,f?a&1|2:a&1),Pe&&Qs(r,l.treeForkCount),t):(ot(r),null);case 22:case 23:return On(r),qd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),a=r.updateQueue,a!==null&&Eu(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ee(Yi),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Ws(Et),ot(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function nT(t,r){switch(Nd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ws(Et),We(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return xn(r),null;case 31:if(r.memoizedState!==null){if(On(r),r.alternate===null)throw Error(i(340));Gi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(On(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Gi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ee(_t),null;case 4:return We(),null;case 10:return Ws(r.type),null;case 22:case 23:return On(r),qd(),t!==null&&ee(Yi),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Ws(Et),null;case 25:return null;default:return null}}function s0(t,r){switch(Nd(r),r.tag){case 3:Ws(Et),We();break;case 26:case 27:case 5:xn(r);break;case 4:We();break;case 31:r.memoizedState!==null&&On(r);break;case 13:On(r);break;case 19:ee(_t);break;case 10:Ws(r.type);break;case 22:case 23:On(r),qd(),t!==null&&ee(Yi);break;case 24:Ws(Et)}}function vl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==f)}}catch(E){Ze(r,r.return,E)}}function Qr(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,f=r;var M=a,$=E;try{$()}catch(Z){Ze(f,M,Z)}}}l=l.next}while(l!==m)}}catch(Z){Ze(r,r.return,Z)}}function r0(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Yg(r,a)}catch(l){Ze(t,t.return,l)}}}function i0(t,r,a){a.props=Zi(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ze(t,r,l)}}function _l(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){Ze(t,r,f)}}function Es(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Ze(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Ze(t,r,f)}else a.current=null}function a0(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Ze(t,t.return,f)}}function bf(t,r,a){try{var l=t.stateNode;TT(l,t.type,a,r),l[qt]=r}catch(f){Ze(t,t.return,f)}}function o0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ni(t.type)||t.tag===4}function wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||o0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ni(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ef(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ot));else if(l!==4&&(l===27&&ni(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Ef(t,r,a),t=t.sibling;t!==null;)Ef(t,r,a),t=t.sibling}function Tu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&ni(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Tu(t,r,a),t=t.sibling;t!==null;)Tu(t,r,a),t=t.sibling}function l0(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);$t(r,l,a),r[dt]=t,r[qt]=a}catch(m){Ze(t,t.return,m)}}var nr=!1,At=!1,Tf=!1,c0=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function sT(t,r){if(t=t.containerInfo,Gf=Gu,t=bg(t),gd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,E=-1,M=-1,$=0,Z=0,ie=t,K=null;t:for(;;){for(var Y;ie!==a||f!==0&&ie.nodeType!==3||(E=_+f),ie!==m||l!==0&&ie.nodeType!==3||(M=_+l),ie.nodeType===3&&(_+=ie.nodeValue.length),(Y=ie.firstChild)!==null;)K=ie,ie=Y;for(;;){if(ie===t)break t;if(K===a&&++$===f&&(E=_),K===m&&++Z===l&&(M=_),(Y=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=Y}a=E===-1||M===-1?null:{start:E,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for($f={focusedElem:t,selectionRange:a},Gu=!1,Vt=r;Vt!==null;)if(r=Vt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Vt=t;else for(;Vt!==null;){switch(r=Vt,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ye=Zi(a.type,f);t=l.getSnapshotBeforeUpdate(ye,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Te){Ze(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Qf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,Vt=t;break}Vt=r.return}}function u0(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:rr(t,a),l&4&&vl(5,a);break;case 1:if(rr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){Ze(a,a.return,_)}else{var f=Zi(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Ze(a,a.return,_)}}l&64&&r0(a),l&512&&_l(a,a.return);break;case 3:if(rr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Yg(t,r)}catch(_){Ze(a,a.return,_)}}break;case 27:r===null&&l&4&&l0(a);case 26:case 5:rr(t,a),r===null&&l&4&&a0(a),l&512&&_l(a,a.return);break;case 12:rr(t,a);break;case 31:rr(t,a),l&4&&f0(t,a);break;case 13:rr(t,a),l&4&&m0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=dT.bind(null,a),DT(t,a))));break;case 22:if(l=a.memoizedState!==null||nr,!l){r=r!==null&&r.memoizedState!==null||At,f=nr;var m=At;nr=l,(At=r)&&!m?ir(t,a,(a.subtreeFlags&8772)!==0):rr(t,a),nr=f,At=m}break;case 30:break;default:rr(t,a)}}function h0(t){var r=t.alternate;r!==null&&(t.alternate=null,h0(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ii(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,En=!1;function sr(t,r,a){for(a=a.child;a!==null;)d0(t,r,a),a=a.sibling}function d0(t,r,a){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(xr,a)}catch{}switch(a.tag){case 26:At||Es(a,r),sr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||Es(a,r);var l=ct,f=En;ni(a.type)&&(ct=a.stateNode,En=!1),sr(t,r,a),Rl(a.stateNode),ct=l,En=f;break;case 5:At||Es(a,r);case 6:if(l=ct,f=En,ct=null,sr(t,r,a),ct=l,En=f,ct!==null)if(En)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(m){Ze(a,r,m)}else try{ct.removeChild(a.stateNode)}catch(m){Ze(a,r,m)}break;case 18:ct!==null&&(En?(t=ct,rv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),lo(t)):rv(ct,a.stateNode));break;case 4:l=ct,f=En,ct=a.stateNode.containerInfo,En=!0,sr(t,r,a),ct=l,En=f;break;case 0:case 11:case 14:case 15:Qr(2,a,r),At||Qr(4,a,r),sr(t,r,a);break;case 1:At||(Es(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&i0(a,r,l)),sr(t,r,a);break;case 21:sr(t,r,a);break;case 22:At=(l=At)||a.memoizedState!==null,sr(t,r,a),At=l;break;default:sr(t,r,a)}}function f0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{lo(t)}catch(a){Ze(r,r.return,a)}}}function m0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{lo(t)}catch(a){Ze(r,r.return,a)}}function rT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new c0),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new c0),r;default:throw Error(i(435,t.tag))}}function Su(t,r){var a=rT(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=fT.bind(null,t,l);l.then(f,f)}})}function Tn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,_=r,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(ni(E.type)){ct=E.stateNode,En=!1;break e}break;case 5:ct=E.stateNode,En=!1;break e;case 3:case 4:ct=E.stateNode.containerInfo,En=!0;break e}E=E.return}if(ct===null)throw Error(i(160));d0(m,_,f),ct=null,En=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)p0(r,t),r=r.sibling}var as=null;function p0(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(r,t),Sn(t),l&4&&(Qr(3,t,t.return),vl(3,t),Qr(5,t,t.return));break;case 1:Tn(r,t),Sn(t),l&512&&(At||a===null||Es(a,a.return)),l&64&&nr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=as;if(Tn(r,t),Sn(t),l&512&&(At||a===null||Es(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[zs]||m[dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),$t(m,l,a),m[dt]=t,vt(m),l=m;break e;case"link":var _=pv("link","href",f).get(l+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(m=_[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}m=f.createElement(l),$t(m,l,a),f.head.appendChild(m);break;case"meta":if(_=pv("meta","content",f).get(l+(a.content||""))){for(E=0;E<_.length;E++)if(m=_[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}m=f.createElement(l),$t(m,l,a),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[dt]=t,vt(m),l=m}t.stateNode=l}else gv(f,t.type,t.stateNode);else t.stateNode=mv(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?gv(f,t.type,t.stateNode):mv(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&bf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Tn(r,t),Sn(t),l&512&&(At||a===null||Es(a,a.return)),a!==null&&l&4&&bf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Tn(r,t),Sn(t),l&512&&(At||a===null||Es(a,a.return)),t.flags&32){f=t.stateNode;try{Fn(f,"")}catch(ye){Ze(t,t.return,ye)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,bf(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Tf=!0);break;case 6:if(Tn(r,t),Sn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ye){Ze(t,t.return,ye)}}break;case 3:if(Bu=null,f=as,as=Pu(r.containerInfo),Tn(r,t),as=f,Sn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{lo(r.containerInfo)}catch(ye){Ze(t,t.return,ye)}Tf&&(Tf=!1,g0(t));break;case 4:l=as,as=Pu(t.stateNode.containerInfo),Tn(r,t),Sn(t),as=l;break;case 12:Tn(r,t),Sn(t);break;case 31:Tn(r,t),Sn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 13:Tn(r,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Nu=zt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 22:f=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,$=nr,Z=At;if(nr=$||f,At=Z||M,Tn(r,t),At=Z,nr=$,Sn(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||M||nr||At||ea(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){M=a=r;try{if(m=M.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=M.stateNode;var ie=M.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;E.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ye){Ze(M,M.return,ye)}}}else if(r.tag===6){if(a===null){M=r;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(ye){Ze(M,M.return,ye)}}}else if(r.tag===18){if(a===null){M=r;try{var Y=M.stateNode;f?iv(Y,!0):iv(M.stateNode,!1)}catch(ye){Ze(M,M.return,ye)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Su(t,a))));break;case 19:Tn(r,t),Sn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Su(t,l)));break;case 30:break;case 21:break;default:Tn(r,t),Sn(t)}}function Sn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(o0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=wf(t);Tu(t,m,f);break;case 5:var _=a.stateNode;a.flags&32&&(Fn(_,""),a.flags&=-33);var E=wf(t);Tu(t,E,_);break;case 3:case 4:var M=a.stateNode.containerInfo,$=wf(t);Ef(t,$,M);break;default:throw Error(i(161))}}catch(Z){Ze(t,t.return,Z)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function g0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;g0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function rr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)u0(t,r.alternate,r),r=r.sibling}function ea(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Qr(4,r,r.return),ea(r);break;case 1:Es(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&i0(r,r.return,a),ea(r);break;case 27:Rl(r.stateNode);case 26:case 5:Es(r,r.return),ea(r);break;case 22:r.memoizedState===null&&ea(r);break;case 30:ea(r);break;default:ea(r)}t=t.sibling}}function ir(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,_=m.flags;switch(m.tag){case 0:case 11:case 15:ir(f,m,a),vl(4,m);break;case 1:if(ir(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){Ze(l,l.return,$)}if(l=m,f=l.updateQueue,f!==null){var E=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)Kg(M[f],E)}catch($){Ze(l,l.return,$)}}a&&_&64&&r0(m),_l(m,m.return);break;case 27:l0(m);case 26:case 5:ir(f,m,a),a&&l===null&&_&4&&a0(m),_l(m,m.return);break;case 12:ir(f,m,a);break;case 31:ir(f,m,a),a&&_&4&&f0(f,m);break;case 13:ir(f,m,a),a&&_&4&&m0(f,m);break;case 22:m.memoizedState===null&&ir(f,m,a),_l(m,m.return);break;case 30:break;default:ir(f,m,a)}r=r.sibling}}function Sf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&il(a))}function Af(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&il(t))}function os(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)y0(t,r,a,l),r=r.sibling}function y0(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:os(t,r,a,l),f&2048&&vl(9,r);break;case 1:os(t,r,a,l);break;case 3:os(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&il(t)));break;case 12:if(f&2048){os(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,_=m.id,E=m.onPostCommit;typeof E=="function"&&E(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){Ze(r,r.return,M)}}else os(t,r,a,l);break;case 31:os(t,r,a,l);break;case 13:os(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,_=r.alternate,r.memoizedState!==null?m._visibility&2?os(t,r,a,l):xl(t,r):m._visibility&2?os(t,r,a,l):(m._visibility|=2,Wa(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Sf(_,r);break;case 24:os(t,r,a,l),f&2048&&Af(r.alternate,r);break;default:os(t,r,a,l)}}function Wa(t,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,_=r,E=a,M=l,$=_.flags;switch(_.tag){case 0:case 11:case 15:Wa(m,_,E,M,f),vl(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?Wa(m,_,E,M,f):xl(m,_):(Z._visibility|=2,Wa(m,_,E,M,f)),f&&$&2048&&Sf(_.alternate,_);break;case 24:Wa(m,_,E,M,f),f&&$&2048&&Af(_.alternate,_);break;default:Wa(m,_,E,M,f)}r=r.sibling}}function xl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:xl(a,l),f&2048&&Sf(l.alternate,l);break;case 24:xl(a,l),f&2048&&Af(l.alternate,l);break;default:xl(a,l)}r=r.sibling}}var bl=8192;function Ja(t,r,a){if(t.subtreeFlags&bl)for(t=t.child;t!==null;)v0(t,r,a),t=t.sibling}function v0(t,r,a){switch(t.tag){case 26:Ja(t,r,a),t.flags&bl&&t.memoizedState!==null&&HT(a,as,t.memoizedState,t.memoizedProps);break;case 5:Ja(t,r,a);break;case 3:case 4:var l=as;as=Pu(t.stateNode.containerInfo),Ja(t,r,a),as=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=bl,bl=16777216,Ja(t,r,a),bl=l):Ja(t,r,a));break;default:Ja(t,r,a)}}function _0(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function wl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Vt=l,b0(l,t)}_0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)x0(t),t=t.sibling}function x0(t){switch(t.tag){case 0:case 11:case 15:wl(t),t.flags&2048&&Qr(9,t,t.return);break;case 3:wl(t);break;case 12:wl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Au(t)):wl(t);break;default:wl(t)}}function Au(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Vt=l,b0(l,t)}_0(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Qr(8,r,r.return),Au(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Au(r));break;default:Au(r)}t=t.sibling}}function b0(t,r){for(;Vt!==null;){var a=Vt;switch(a.tag){case 0:case 11:case 15:Qr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:il(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Vt=l;else e:for(a=t;Vt!==null;){l=Vt;var f=l.sibling,m=l.return;if(h0(l),l===a){Vt=null;break e}if(f!==null){f.return=m,Vt=f;break e}Vt=m}}}var iT={getCacheForType:function(t){var r=Ht(Et),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Ht(Et).controller.signal}},aT=typeof WeakMap=="function"?WeakMap:Map,Qe=0,rt=null,Oe=null,Le=0,Je=0,kn=null,Xr=!1,Za=!1,Nf=!1,ar=0,pt=0,Wr=0,ta=0,Rf=0,Ln=0,eo=0,El=null,An=null,Cf=!1,Nu=0,w0=0,Ru=1/0,Cu=null,Jr=null,jt=0,Zr=null,to=null,or=0,jf=0,If=null,E0=null,Tl=0,Df=null;function Vn(){return(Qe&2)!==0&&Le!==0?Le&-Le:O.T!==null?Uf():Ps()}function T0(){if(Ln===0)if((Le&536870912)===0||Pe){var t=fs;fs<<=1,(fs&3932160)===0&&(fs=262144),Ln=t}else Ln=536870912;return t=Mn.current,t!==null&&(t.flags|=32),Ln}function Nn(t,r,a){(t===rt&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(no(t,0),ei(t,Le,Ln,!1)),Er(t,a),((Qe&2)===0||t!==rt)&&(t===rt&&((Qe&2)===0&&(ta|=a),pt===4&&ei(t,Le,Ln,!1)),Ts(t))}function S0(t,r,a){if((Qe&6)!==0)throw Error(i(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||wr(t,r),f=l?cT(t,r):Of(t,r,!0),m=l;do{if(f===0){Za&&!l&&ei(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!oT(a)){f=Of(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var E=t;f=El;var M=E.current.memoizedState.isDehydrated;if(M&&(no(E,_).flags|=256),_=Of(E,_,!1),_!==2){if(Nf&&!M){E.errorRecoveryDisabledLanes|=m,ta|=m,f=4;break e}m=An,An=f,m!==null&&(An===null?An=m:An.push.apply(An,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){no(t,0),ei(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ei(l,r,Ln,!Xr);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Nu+300-zt(),10<f)){if(ei(l,r,Ln,!Xr),Bn(l,0,!0)!==0)break e;or=r,l.timeoutHandle=nv(A0.bind(null,l,a,An,Cu,Cf,r,Ln,ta,eo,Xr,m,"Throttled",-0,0),f);break e}A0(l,a,An,Cu,Cf,r,Ln,ta,eo,Xr,m,null,-0,0)}}break}while(!0);Ts(t)}function A0(t,r,a,l,f,m,_,E,M,$,Z,ie,K,Y){if(t.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ot},v0(r,m,ie);var ye=(m&62914560)===m?Nu-zt():(m&4194048)===m?w0-zt():0;if(ye=GT(ie,ye),ye!==null){or=m,t.cancelPendingCommit=ye(O0.bind(null,t,r,m,a,l,f,_,E,M,Z,ie,null,K,Y)),ei(t,m,_,!$);return}}O0(t,r,m,a,l,f,_,E,M)}function oT(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!In(m(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ei(t,r,a,l){r&=~Rf,r&=~ta,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-hn(f),_=1<<m;l[m]=-1,f&=~_}a!==0&&Uo(t,a,r)}function ju(){return(Qe&6)===0?(Sl(0),!1):!0}function Mf(){if(Oe!==null){if(Je===0)var t=Oe.return;else t=Oe,Xs=$i=null,Yd(t),$a=null,ol=0,t=Oe;for(;t!==null;)s0(t.alternate,t),t=t.return;Oe=null}}function no(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,NT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),or=0,Mf(),rt=t,Oe=a=Ys(t.current,null),Le=r,Je=0,kn=null,Xr=!1,Za=wr(t,r),Nf=!1,eo=Ln=Rf=ta=Wr=pt=0,An=El=null,Cf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-hn(l),m=1<<f;r|=t[f],l&=~m}return ar=r,Wc(),a}function N0(t,r){Ie=null,O.H=pl,r===Ga||r===iu?(r=Fg(),Je=3):r===Ld?(r=Fg(),Je=4):Je=r===hf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,kn=r,Oe===null&&(pt=1,_u(t,Gn(r,t.current)))}function R0(){var t=Mn.current;return t===null?!0:(Le&4194048)===Le?Qn===null:(Le&62914560)===Le||(Le&536870912)!==0?t===Qn:!1}function C0(){var t=O.H;return O.H=pl,t===null?pl:t}function j0(){var t=O.A;return O.A=iT,t}function Iu(){pt=4,Xr||(Le&4194048)!==Le&&Mn.current!==null||(Za=!0),(Wr&134217727)===0&&(ta&134217727)===0||rt===null||ei(rt,Le,Ln,!1)}function Of(t,r,a){var l=Qe;Qe|=2;var f=C0(),m=j0();(rt!==t||Le!==r)&&(Cu=null,no(t,r)),r=!1;var _=pt;e:do try{if(Je!==0&&Oe!==null){var E=Oe,M=kn;switch(Je){case 8:Mf(),_=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(r=!0);var $=Je;if(Je=0,kn=null,so(t,E,M,$),a&&Za){_=0;break e}break;default:$=Je,Je=0,kn=null,so(t,E,M,$)}}lT(),_=pt;break}catch(Z){N0(t,Z)}while(!0);return r&&t.shellSuspendCounter++,Xs=$i=null,Qe=l,O.H=f,O.A=m,Oe===null&&(rt=null,Le=0,Wc()),_}function lT(){for(;Oe!==null;)I0(Oe)}function cT(t,r){var a=Qe;Qe|=2;var l=C0(),f=j0();rt!==t||Le!==r?(Cu=null,Ru=zt()+500,no(t,r)):Za=wr(t,r);e:do try{if(Je!==0&&Oe!==null){r=Oe;var m=kn;t:switch(Je){case 1:Je=0,kn=null,so(t,r,m,1);break;case 2:case 9:if(Bg(m)){Je=0,kn=null,D0(r);break}r=function(){Je!==2&&Je!==9||rt!==t||(Je=7),Ts(t)},m.then(r,r);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Bg(m)?(Je=0,kn=null,D0(r)):(Je=0,kn=null,so(t,r,m,7));break;case 5:var _=null;switch(Oe.tag){case 26:_=Oe.memoizedState;case 5:case 27:var E=Oe;if(_?yv(_):E.stateNode.complete){Je=0,kn=null;var M=E.sibling;if(M!==null)Oe=M;else{var $=E.return;$!==null?(Oe=$,Du($)):Oe=null}break t}}Je=0,kn=null,so(t,r,m,5);break;case 6:Je=0,kn=null,so(t,r,m,6);break;case 8:Mf(),pt=6;break e;default:throw Error(i(462))}}uT();break}catch(Z){N0(t,Z)}while(!0);return Xs=$i=null,O.H=l,O.A=f,Qe=a,Oe!==null?0:(rt=null,Le=0,Wc(),pt)}function uT(){for(;Oe!==null&&!id();)I0(Oe)}function I0(t){var r=t0(t.alternate,t,ar);t.memoizedProps=t.pendingProps,r===null?Du(t):Oe=r}function D0(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Qy(a,r,r.pendingProps,r.type,void 0,Le);break;case 11:r=Qy(a,r,r.pendingProps,r.type.render,r.ref,Le);break;case 5:Yd(r);default:s0(a,r),r=Oe=jg(r,ar),r=t0(a,r,ar)}t.memoizedProps=t.pendingProps,r===null?Du(t):Oe=r}function so(t,r,a,l){Xs=$i=null,Yd(r),$a=null,ol=0;var f=r.return;try{if(JE(t,f,r,a,Le)){pt=1,_u(t,Gn(a,t.current)),Oe=null;return}}catch(m){if(f!==null)throw Oe=f,m;pt=1,_u(t,Gn(a,t.current)),Oe=null;return}r.flags&32768?(Pe||l===1?t=!0:Za||(Le&536870912)!==0?t=!1:(Xr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Mn.current,l!==null&&l.tag===13&&(l.flags|=16384))),M0(r,t)):Du(r)}function Du(t){var r=t;do{if((r.flags&32768)!==0){M0(r,Xr);return}t=r.return;var a=tT(r.alternate,r,ar);if(a!==null){Oe=a;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=t}while(r!==null);pt===0&&(pt=5)}function M0(t,r){do{var a=nT(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);pt=6,Oe=null}function O0(t,r,a,l,f,m,_,E,M){t.cancelPendingCommit=null;do Mu();while(jt!==0);if((Qe&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=bd,Bt(t,a,m,_,E,M),t===rt&&(Oe=rt=null,Le=0),to=r,Zr=t,or=a,jf=m,If=f,E0=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,mT(Vs,function(){return P0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=O.T,O.T=null,f=W.p,W.p=2,_=Qe,Qe|=4;try{sT(t,r,a)}finally{Qe=_,W.p=f,O.T=l}}jt=1,k0(),L0(),V0()}}function k0(){if(jt===1){jt=0;var t=Zr,r=to,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var l=W.p;W.p=2;var f=Qe;Qe|=4;try{p0(r,t);var m=$f,_=bg(t.containerInfo),E=m.focusedElem,M=m.selectionRange;if(_!==E&&E&&E.ownerDocument&&xg(E.ownerDocument.documentElement,E)){if(M!==null&&gd(E)){var $=M.start,Z=M.end;if(Z===void 0&&(Z=$),"selectionStart"in E)E.selectionStart=$,E.selectionEnd=Math.min(Z,E.value.length);else{var ie=E.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var Y=K.getSelection(),ye=E.textContent.length,Te=Math.min(M.start,ye),st=M.end===void 0?Te:Math.min(M.end,ye);!Y.extend&&Te>st&&(_=st,st=Te,Te=_);var B=_g(E,Te),U=_g(E,st);if(B&&U&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==U.node||Y.focusOffset!==U.offset)){var G=ie.createRange();G.setStart(B.node,B.offset),Y.removeAllRanges(),Te>st?(Y.addRange(G),Y.extend(U.node,U.offset)):(G.setEnd(U.node,U.offset),Y.addRange(G))}}}}for(ie=[],Y=E;Y=Y.parentNode;)Y.nodeType===1&&ie.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ie.length;E++){var ne=ie[E];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Gu=!!Gf,$f=Gf=null}finally{Qe=f,W.p=l,O.T=a}}t.current=r,jt=2}}function L0(){if(jt===2){jt=0;var t=Zr,r=to,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var l=W.p;W.p=2;var f=Qe;Qe|=4;try{u0(t,r.alternate,r)}finally{Qe=f,W.p=l,O.T=a}}jt=3}}function V0(){if(jt===4||jt===3){jt=0,Oo();var t=Zr,r=to,a=or,l=E0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jt=5:(jt=0,to=Zr=null,U0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Jr=null),zo(a),r=r.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(xr,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=O.T,f=W.p,W.p=2,O.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var E=l[_];m(E.value,{componentStack:E.stack})}}finally{O.T=r,W.p=f}}(or&3)!==0&&Mu(),Ts(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===Df?Tl++:(Tl=0,Df=t):Tl=0,Sl(0)}}function U0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,il(r)))}function Mu(){return k0(),L0(),V0(),P0()}function P0(){if(jt!==5)return!1;var t=Zr,r=jf;jf=0;var a=zo(or),l=O.T,f=W.p;try{W.p=32>a?32:a,O.T=null,a=If,If=null;var m=Zr,_=or;if(jt=0,to=Zr=null,or=0,(Qe&6)!==0)throw Error(i(331));var E=Qe;if(Qe|=4,x0(m.current),y0(m,m.current,_,a),Qe=E,Sl(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(xr,m)}catch{}return!0}finally{W.p=f,O.T=l,U0(t,r)}}function z0(t,r,a){r=Gn(a,r),r=uf(t.stateNode,r,2),t=$r(t,r,2),t!==null&&(Er(t,2),Ts(t))}function Ze(t,r,a){if(t.tag===3)z0(t,t,a);else for(;r!==null;){if(r.tag===3){z0(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Jr===null||!Jr.has(l))){t=Gn(a,t),a=By(2),l=$r(r,a,2),l!==null&&(qy(a,l,r,t),Er(l,2),Ts(l));break}}r=r.return}}function kf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new aT;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Nf=!0,f.add(a),t=hT.bind(null,t,r,a),r.then(t,t))}function hT(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,rt===t&&(Le&a)===a&&(pt===4||pt===3&&(Le&62914560)===Le&&300>zt()-Nu?(Qe&2)===0&&no(t,0):Rf|=a,eo===Le&&(eo=0)),Ts(t)}function B0(t,r){r===0&&(r=Vo()),t=Fi(t,r),t!==null&&(Er(t,r),Ts(t))}function dT(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),B0(t,a)}function fT(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),B0(t,a)}function mT(t,r){return Ri(t,r)}var Ou=null,ro=null,Lf=!1,ku=!1,Vf=!1,ti=0;function Ts(t){t!==ro&&t.next===null&&(ro===null?Ou=ro=t:ro=ro.next=t),ku=!0,Lf||(Lf=!0,gT())}function Sl(t,r){if(!Vf&&ku){Vf=!0;do for(var a=!1,l=Ou;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var _=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-hn(42|t)+1)-1,m&=f&~(_&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,G0(l,m))}else m=Le,m=Bn(l,l===rt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||wr(l,m)||(a=!0,G0(l,m));l=l.next}while(a);Vf=!1}}function pT(){q0()}function q0(){ku=Lf=!1;var t=0;ti!==0&&AT()&&(t=ti);for(var r=zt(),a=null,l=Ou;l!==null;){var f=l.next,m=F0(l,r);m===0?(l.next=null,a===null?Ou=f:a.next=f,f===null&&(ro=a)):(a=l,(t!==0||(m&3)!==0)&&(ku=!0)),l=f}jt!==0&&jt!==5||Sl(t),ti!==0&&(ti=0)}function F0(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-hn(m),E=1<<_,M=f[_];M===-1?((E&a)===0||(E&l)!==0)&&(f[_]=Ta(E,r)):M<=r&&(t.expiredLanes|=E),m&=~E}if(r=rt,a=Le,a=Bn(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ea(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||wr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Ea(l),zo(a)){case 2:case 8:a=Mt;break;case 32:a=Vs;break;case 268435456:a=ko;break;default:a=Vs}return l=H0.bind(null,t),a=Ri(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Ea(l),t.callbackPriority=2,t.callbackNode=null,2}function H0(t,r){if(jt!==0&&jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Mu()&&t.callbackNode!==a)return null;var l=Le;return l=Bn(t,t===rt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(S0(t,l,r),F0(t,zt()),t.callbackNode!=null&&t.callbackNode===a?H0.bind(null,t):null)}function G0(t,r){if(Mu())return null;S0(t,r,!0)}function gT(){RT(function(){(Qe&6)!==0?Ri(Ct,pT):q0()})}function Uf(){if(ti===0){var t=Fa;t===0&&(t=ji,ji<<=1,(ji&261888)===0&&(ji=256)),ti=t}return ti}function $0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:vs(""+t)}function K0(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function yT(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var m=$0((f[qt]||null).action),_=l.submitter;_&&(r=(r=_[qt]||null)?$0(r.formAction):_.getAttribute("formAction"),r!==null&&(m=r,_=null));var E=new Li("action","action",null,l,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ti!==0){var M=_?K0(f,_):new FormData(f);sf(a,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(E.preventDefault(),M=_?K0(f,_):new FormData(f),sf(a,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var Pf=0;Pf<xd.length;Pf++){var zf=xd[Pf],vT=zf.toLowerCase(),_T=zf[0].toUpperCase()+zf.slice(1);is(vT,"on"+_T)}is(Tg,"onAnimationEnd"),is(Sg,"onAnimationIteration"),is(Ag,"onAnimationStart"),is("dblclick","onDoubleClick"),is("focusin","onFocus"),is("focusout","onBlur"),is(kE,"onTransitionRun"),is(LE,"onTransitionStart"),is(VE,"onTransitionCancel"),is(Ng,"onTransitionEnd"),ys("onMouseEnter",["mouseout","mouseover"]),ys("onMouseLeave",["mouseout","mouseover"]),ys("onPointerEnter",["pointerout","pointerover"]),ys("onPointerLeave",["pointerout","pointerover"]),dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function Y0(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var _=l.length-1;0<=_;_--){var E=l[_],M=E.instance,$=E.currentTarget;if(E=E.listener,M!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=$;try{m(f)}catch(Z){Xc(Z)}f.currentTarget=null,m=M}else for(_=0;_<l.length;_++){if(E=l[_],M=E.instance,$=E.currentTarget,E=E.listener,M!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=$;try{m(f)}catch(Z){Xc(Z)}f.currentTarget=null,m=M}}}}function ke(t,r){var a=r[Ar];a===void 0&&(a=r[Ar]=new Set);var l=t+"__bubble";a.has(l)||(Q0(r,t,2,!1),a.add(l))}function Bf(t,r,a){var l=0;r&&(l|=4),Q0(a,t,l,r)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function qf(t){if(!t[Lu]){t[Lu]=!0,Sa.forEach(function(a){a!=="selectionchange"&&(xT.has(a)||Bf(a,!1,t),Bf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Lu]||(r[Lu]=!0,Bf("selectionchange",!1,r))}}function Q0(t,r,a,l){switch(Tv(r)){case 2:var f=YT;break;case 8:f=QT;break;default:f=sm}a=f.bind(null,r,a,t),f=void 0,!Yo||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function Ff(t,r,a,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===f)break;if(_===4)for(_=l.return;_!==null;){var M=_.tag;if((M===3||M===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;E!==null;){if(_=Bs(E),_===null)return;if(M=_.tag,M===5||M===6||M===26||M===27){l=m=_;continue e}E=E.parentNode}}l=l.return}Oc(function(){var $=m,Z=ja(a),ie=[];e:{var K=Rg.get(t);if(K!==void 0){var Y=Li,ye=t;switch(t){case"keypress":if(ki(a)===0)break e;case"keydown":case"keyup":Y=Fc;break;case"focusin":ye="focus",Y=Lr;break;case"focusout":ye="blur",Y=Lr;break;case"beforeblur":case"afterblur":Y=Lr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Vc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Gc;break;case Tg:case Sg:case Ag:Y=Ma;break;case Ng:Y=Oa;break;case"scroll":case"scrollend":Y=kc;break;case"wheel":Y=Kc;break;case"copy":case"cut":case"paste":Y=Pc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Zo;break;case"toggle":case"beforetoggle":Y=Ur}var Te=(r&4)!==0,st=!Te&&(t==="scroll"||t==="scrollend"),B=Te?K!==null?K+"Capture":null:K;Te=[];for(var U=$,G;U!==null;){var ne=U;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||B===null||(ne=bn(U,B),ne!=null&&Te.push(Nl(U,ne,G))),st)break;U=U.return}0<Te.length&&(K=new Y(K,ye,null,a,Z),ie.push({event:K,listeners:Te}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",K&&a!==Ca&&(ye=a.relatedTarget||a.fromElement)&&(Bs(ye)||ye[ps]))break e;if((Y||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,Y?(ye=a.relatedTarget||a.toElement,Y=$,ye=ye?Bs(ye):null,ye!==null&&(st=c(ye),Te=ye.tag,ye!==st||Te!==5&&Te!==27&&Te!==6)&&(ye=null)):(Y=null,ye=$),Y!==ye)){if(Te=Lc,ne="onMouseLeave",B="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Te=Zo,ne="onPointerLeave",B="onPointerEnter",U="pointer"),st=Y==null?K:Di(Y),G=ye==null?K:Di(ye),K=new Te(ne,U+"leave",Y,a,Z),K.target=st,K.relatedTarget=G,ne=null,Bs(Z)===$&&(Te=new Te(B,U+"enter",ye,a,Z),Te.target=G,Te.relatedTarget=st,ne=Te),st=ne,Y&&ye)t:{for(Te=bT,B=Y,U=ye,G=0,ne=B;ne;ne=Te(ne))G++;ne=0;for(var we=U;we;we=Te(we))ne++;for(;0<G-ne;)B=Te(B),G--;for(;0<ne-G;)U=Te(U),ne--;for(;G--;){if(B===U||U!==null&&B===U.alternate){Te=B;break t}B=Te(B),U=Te(U)}Te=null}else Te=null;Y!==null&&X0(ie,K,Y,Te,!1),ye!==null&&st!==null&&X0(ie,st,ye,Te,!0)}}e:{if(K=$?Di($):window,Y=K.nodeName&&K.nodeName.toLowerCase(),Y==="select"||Y==="input"&&K.type==="file")var Ge=fg;else if(wn(K))if(mg)Ge=DE;else{Ge=jE;var _e=CE}else Y=K.nodeName,!Y||Y.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&$o($.elementType)&&(Ge=fg):Ge=IE;if(Ge&&(Ge=Ge(t,$))){zi(ie,Ge,a,Z);break e}_e&&_e(t,K,$),t==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&Ra(K,"number",K.value)}switch(_e=$?Di($):window,t){case"focusin":(wn(_e)||_e.contentEditable==="true")&&(ka=_e,yd=$,nl=null);break;case"focusout":nl=yd=ka=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,wg(ie,a,Z);break;case"selectionchange":if(OE)break;case"keydown":case"keyup":wg(ie,a,Z)}var De;if(v)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Me?Xe(t,a)&&(Ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(F&&a.locale!=="ko"&&(Me||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Me&&(De=Dr()):(jn=Z,Ia="value"in jn?jn.value:jn.textContent,Me=!0)),_e=Vu($,Ve),0<_e.length&&(Ve=new Xo(Ve,t,null,a,Z),ie.push({event:Ve,listeners:_e}),De?Ve.data=De:(De=wt(a),De!==null&&(Ve.data=De)))),(De=T?kt(t,a):Lt(t,a))&&(Ve=Vu($,"onBeforeInput"),0<Ve.length&&(_e=new Xo("onBeforeInput","beforeinput",null,a,Z),ie.push({event:_e,listeners:Ve}),_e.data=De)),yT(ie,t,$,a,Z)}Y0(ie,r)})}function Nl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Vu(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=bn(t,a),f!=null&&l.unshift(Nl(t,f,m)),f=bn(t,r),f!=null&&l.push(Nl(t,f,m))),t.tag===3)return l;t=t.return}return[]}function bT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function X0(t,r,a,l,f){for(var m=r._reactName,_=[];a!==null&&a!==l;){var E=a,M=E.alternate,$=E.stateNode;if(E=E.tag,M!==null&&M===l)break;E!==5&&E!==26&&E!==27||$===null||(M=$,f?($=bn(a,m),$!=null&&_.unshift(Nl(a,$,M))):f||($=bn(a,m),$!=null&&_.push(Nl(a,$,M)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var wT=/\r\n?/g,ET=/\u0000|\uFFFD/g;function W0(t){return(typeof t=="string"?t:""+t).replace(wT,`
`).replace(ET,"")}function J0(t,r){return r=W0(r),W0(t)===r}function nt(t,r,a,l,f,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Fn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Fn(t,""+l);break;case"className":Cr(t,"class",l);break;case"tabIndex":Cr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Cr(t,a,l);break;case"style":Dc(t,l,m);break;case"data":if(r!=="object"){Cr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=vs(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&nt(t,r,"name",f.name,f,null),nt(t,r,"formEncType",f.formEncType,f,null),nt(t,r,"formMethod",f.formMethod,f,null),nt(t,r,"formTarget",f.formTarget,f,null)):(nt(t,r,"encType",f.encType,f,null),nt(t,r,"method",f.method,f,null),nt(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=vs(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ot);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=vs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),Rr(t,"popover",l);break;case"xlinkActuate":qn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":qn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":qn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":qn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":qn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":qn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":qn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":qn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":qn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Rr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=hd.get(a)||a,Rr(t,a,l))}}function Hf(t,r,a,l,f,m){switch(a){case"style":Dc(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Fn(t,l):(typeof l=="number"||typeof l=="bigint")&&Fn(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ot);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),m=t[qt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Rr(t,a,l)}}}function $t(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:nt(t,r,m,_,a,null)}}f&&nt(t,r,"srcSet",a.srcSet,a,null),l&&nt(t,r,"src",a.src,a,null);return;case"input":ke("invalid",t);var E=m=_=f=null,M=null,$=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":f=Z;break;case"type":_=Z;break;case"checked":M=Z;break;case"defaultChecked":$=Z;break;case"value":m=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:nt(t,r,l,Z,a,null)}}Mi(t,m,E,M,$,_,f,!1);return;case"select":ke("invalid",t),l=_=m=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:nt(t,r,f,E,a,null)}r=m,a=_,t.multiple=!!l,r!=null?He(t,!!l,r,!1):a!=null&&He(t,!!l,a,!0);return;case"textarea":ke("invalid",t),m=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:nt(t,r,_,E,a,null)}Ir(t,l,f,m);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(t,r,M,l,a,null)}return;case"dialog":ke("beforetoggle",t),ke("toggle",t),ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<Al.length;l++)ke(Al[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(l=a[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:nt(t,r,$,l,a,null)}return;default:if($o(r)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Hf(t,r,Z,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&nt(t,r,E,l,a,null))}function TT(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,E=null,M=null,$=null,Z=null;for(Y in a){var ie=a[Y];if(a.hasOwnProperty(Y)&&ie!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":M=ie;default:l.hasOwnProperty(Y)||nt(t,r,Y,null,l,ie)}}for(var K in l){var Y=l[K];if(ie=a[K],l.hasOwnProperty(K)&&(Y!=null||ie!=null))switch(K){case"type":m=Y;break;case"name":f=Y;break;case"checked":$=Y;break;case"defaultChecked":Z=Y;break;case"value":_=Y;break;case"defaultValue":E=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:Y!==ie&&nt(t,r,K,Y,l,ie)}}jr(t,_,E,M,$,Z,m,f);return;case"select":Y=_=E=K=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":Y=M;default:l.hasOwnProperty(m)||nt(t,r,m,null,l,M)}for(f in l)if(m=l[f],M=a[f],l.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":K=m;break;case"defaultValue":E=m;break;case"multiple":_=m;default:m!==M&&nt(t,r,f,m,l,M)}r=E,a=_,l=Y,K!=null?He(t,!!a,K,!1):!!l!=!!a&&(r!=null?He(t,!!a,r,!0):He(t,!!a,a?[]:"",!1));return;case"textarea":Y=K=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:nt(t,r,E,null,l,f)}for(_ in l)if(f=l[_],m=a[_],l.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":K=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&nt(t,r,_,f,l,m)}Oi(t,K,Y);return;case"option":for(var ye in a)if(K=a[ye],a.hasOwnProperty(ye)&&K!=null&&!l.hasOwnProperty(ye))switch(ye){case"selected":t.selected=!1;break;default:nt(t,r,ye,null,l,K)}for(M in l)if(K=l[M],Y=a[M],l.hasOwnProperty(M)&&K!==Y&&(K!=null||Y!=null))switch(M){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:nt(t,r,M,K,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)K=a[Te],a.hasOwnProperty(Te)&&K!=null&&!l.hasOwnProperty(Te)&&nt(t,r,Te,null,l,K);for($ in l)if(K=l[$],Y=a[$],l.hasOwnProperty($)&&K!==Y&&(K!=null||Y!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:nt(t,r,$,K,l,Y)}return;default:if($o(r)){for(var st in a)K=a[st],a.hasOwnProperty(st)&&K!==void 0&&!l.hasOwnProperty(st)&&Hf(t,r,st,void 0,l,K);for(Z in l)K=l[Z],Y=a[Z],!l.hasOwnProperty(Z)||K===Y||K===void 0&&Y===void 0||Hf(t,r,Z,K,l,Y);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!l.hasOwnProperty(B)&&nt(t,r,B,null,l,K);for(ie in l)K=l[ie],Y=a[ie],!l.hasOwnProperty(ie)||K===Y||K==null&&Y==null||nt(t,r,ie,K,l,Y)}function Z0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ST(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,_=f.initiatorType,E=f.duration;if(m&&E&&Z0(_)){for(_=0,E=f.responseEnd,l+=1;l<a.length;l++){var M=a[l],$=M.startTime;if($>E)break;var Z=M.transferSize,ie=M.initiatorType;Z&&Z0(ie)&&(M=M.responseEnd,_+=Z*(M<E?1:(E-$)/(M-$)))}if(--l,r+=8*(m+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gf=null,$f=null;function Uu(t){return t.nodeType===9?t:t.ownerDocument}function ev(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Kf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Yf=null;function AT(){var t=window.event;return t&&t.type==="popstate"?t===Yf?!1:(Yf=t,!0):(Yf=null,!1)}var nv=typeof setTimeout=="function"?setTimeout:void 0,NT=typeof clearTimeout=="function"?clearTimeout:void 0,sv=typeof Promise=="function"?Promise:void 0,RT=typeof queueMicrotask=="function"?queueMicrotask:typeof sv<"u"?function(t){return sv.resolve(null).then(t).catch(CT)}:nv;function CT(t){setTimeout(function(){throw t})}function ni(t){return t==="head"}function rv(t,r){var a=r,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),lo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Rl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Rl(a);for(var m=a.firstChild;m;){var _=m.nextSibling,E=m.nodeName;m[zs]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Rl(t.ownerDocument.body);a=f}while(a);lo(r)}function iv(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Qf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Qf(a),Ii(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function jT(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[zs])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Xn(t.nextSibling),t===null)break}return null}function IT(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Xn(t.nextSibling),t===null))return null;return t}function av(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Xn(t.nextSibling),t===null))return null;return t}function Xf(t){return t.data==="$?"||t.data==="$~"}function Wf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function DT(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Xn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Jf=null;function ov(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Xn(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function lv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function cv(t,r,a){switch(r=Uu(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Rl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ii(t)}var Wn=new Map,uv=new Set;function Pu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var lr=W.d;W.d={f:MT,r:OT,D:kT,C:LT,L:VT,m:UT,X:zT,S:PT,M:BT};function MT(){var t=lr.f(),r=ju();return t||r}function OT(t){var r=qs(t);r!==null&&r.tag===5&&r.type==="form"?Ny(r):lr.r(t)}var io=typeof document>"u"?null:document;function hv(t,r,a){var l=io;if(l&&typeof r=="string"&&r){var f=ft(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),uv.has(f)||(uv.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),$t(r,"link",t),vt(r),l.head.appendChild(r)))}}function kT(t){lr.D(t),hv("dns-prefetch",t,null)}function LT(t,r){lr.C(t,r),hv("preconnect",t,r)}function VT(t,r,a){lr.L(t,r,a);var l=io;if(l&&t&&r){var f='link[rel="preload"][as="'+ft(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ft(a.imageSizes)+'"]')):f+='[href="'+ft(t)+'"]';var m=f;switch(r){case"style":m=ao(t);break;case"script":m=oo(t)}Wn.has(m)||(t=w({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Wn.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(Cl(m))||r==="script"&&l.querySelector(jl(m))||(r=l.createElement("link"),$t(r,"link",t),vt(r),l.head.appendChild(r)))}}function UT(t,r){lr.m(t,r);var a=io;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+ft(l)+'"][href="'+ft(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=oo(t)}if(!Wn.has(m)&&(t=w({rel:"modulepreload",href:t},r),Wn.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(jl(m)))return}l=a.createElement("link"),$t(l,"link",t),vt(l),a.head.appendChild(l)}}}function PT(t,r,a){lr.S(t,r,a);var l=io;if(l&&t){var f=ss(l).hoistableStyles,m=ao(t);r=r||"default";var _=f.get(m);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(Cl(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Wn.get(m))&&Zf(t,a);var M=_=l.createElement("link");vt(M),$t(M,"link",t),M._p=new Promise(function($,Z){M.onload=$,M.onerror=Z}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,zu(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:E},f.set(m,_)}}}function zT(t,r){lr.X(t,r);var a=io;if(a&&t){var l=ss(a).hoistableScripts,f=oo(t),m=l.get(f);m||(m=a.querySelector(jl(f)),m||(t=w({src:t,async:!0},r),(r=Wn.get(f))&&em(t,r),m=a.createElement("script"),vt(m),$t(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function BT(t,r){lr.M(t,r);var a=io;if(a&&t){var l=ss(a).hoistableScripts,f=oo(t),m=l.get(f);m||(m=a.querySelector(jl(f)),m||(t=w({src:t,async:!0,type:"module"},r),(r=Wn.get(f))&&em(t,r),m=a.createElement("script"),vt(m),$t(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function dv(t,r,a,l){var f=(f=fe.current)?Pu(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ao(a.href),a=ss(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ao(a.href);var m=ss(f).hoistableStyles,_=m.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=f.querySelector(Cl(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Wn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(t,a),m||qT(f,t,a,_.state))),r&&l===null)throw Error(i(528,""));return _}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=oo(a),a=ss(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function ao(t){return'href="'+ft(t)+'"'}function Cl(t){return'link[rel="stylesheet"]['+t+"]"}function fv(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function qT(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),$t(r,"link",a),vt(r),t.head.appendChild(r))}function oo(t){return'[src="'+ft(t)+'"]'}function jl(t){return"script[async]"+t}function mv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+ft(a.href)+'"]');if(l)return r.instance=l,vt(l),l;var f=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),vt(l),$t(l,"style",f),zu(l,a.precedence,t),r.instance=l;case"stylesheet":f=ao(a.href);var m=t.querySelector(Cl(f));if(m)return r.state.loading|=4,r.instance=m,vt(m),m;l=fv(a),(f=Wn.get(f))&&Zf(l,f),m=(t.ownerDocument||t).createElement("link"),vt(m);var _=m;return _._p=new Promise(function(E,M){_.onload=E,_.onerror=M}),$t(m,"link",l),r.state.loading|=4,zu(m,a.precedence,t),r.instance=m;case"script":return m=oo(a.src),(f=t.querySelector(jl(m)))?(r.instance=f,vt(f),f):(l=a,(f=Wn.get(m))&&(l=w({},a),em(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),vt(f),$t(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,zu(l,a.precedence,t));return r.instance}function zu(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===r)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Zf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function em(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Bu=null;function pv(t,r,a){if(Bu===null){var l=new Map,f=Bu=new Map;f.set(a,l)}else f=Bu,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[zs]||m[dt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(r)||"";_=t+_;var E=l.get(_);E?E.push(m):l.set(_,[m])}}return l}function gv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function FT(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function yv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function HT(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=ao(l.href),m=r.querySelector(Cl(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=qu.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=m,vt(m);return}m=r.ownerDocument||r,l=fv(l),(f=Wn.get(f))&&Zf(l,f),m=m.createElement("link"),vt(m);var _=m;_._p=new Promise(function(E,M){_.onload=E,_.onerror=M}),$t(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=qu.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var tm=0;function GT(t,r){return t.stylesheets&&t.count===0&&Hu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Hu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&tm===0&&(tm=62500*ST());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Hu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>tm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function qu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Fu=null;function Hu(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Fu=new Map,r.forEach($T,t),Fu=null,qu.call(t))}function $T(t,r){if(!(r.state.loading&4)){var a=Fu.get(t);if(a)var l=a.get(null);else{a=new Map,Fu.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=r.instance,_=f.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,f),a.set(_,f),this.count++,l=qu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Il={$$typeof:J,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function KT(t,r,a,l,f,m,_,E,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.hiddenUpdates=Us(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function vv(t,r,a,l,f,m,_,E,M,$,Z,ie){return t=new KT(t,r,a,_,M,$,Z,ie,E),r=1,m===!0&&(r|=24),m=Dn(3,null,null,r),t.current=m,m.stateNode=t,r=Md(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},Vd(m),t}function _v(t){return t?(t=Ua,t):Ua}function xv(t,r,a,l,f,m){f=_v(f),l.context===null?l.context=f:l.pendingContext=f,l=Gr(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=$r(t,l,r),a!==null&&(Nn(a,t,r),cl(a,t,r))}function bv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function nm(t,r){bv(t,r),(t=t.alternate)&&bv(t,r)}function wv(t){if(t.tag===13||t.tag===31){var r=Fi(t,67108864);r!==null&&Nn(r,t,67108864),nm(t,67108864)}}function Ev(t){if(t.tag===13||t.tag===31){var r=Vn();r=Po(r);var a=Fi(t,r);a!==null&&Nn(a,t,r),nm(t,r)}}var Gu=!0;function YT(t,r,a,l){var f=O.T;O.T=null;var m=W.p;try{W.p=2,sm(t,r,a,l)}finally{W.p=m,O.T=f}}function QT(t,r,a,l){var f=O.T;O.T=null;var m=W.p;try{W.p=8,sm(t,r,a,l)}finally{W.p=m,O.T=f}}function sm(t,r,a,l){if(Gu){var f=rm(l);if(f===null)Ff(t,r,l,$u,a),Sv(t,l);else if(WT(f,t,r,a,l))l.stopPropagation();else if(Sv(t,l),r&4&&-1<XT.indexOf(t)){for(;f!==null;){var m=qs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=ns(m.pendingLanes);if(_!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var M=1<<31-hn(_);E.entanglements[1]|=M,_&=~M}Ts(m),(Qe&6)===0&&(Ru=zt()+500,Sl(0))}}break;case 31:case 13:E=Fi(m,2),E!==null&&Nn(E,m,2),ju(),nm(m,2)}if(m=rm(l),m===null&&Ff(t,r,l,$u,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Ff(t,r,l,null,a)}}function rm(t){return t=ja(t),im(t)}var $u=null;function im(t){if($u=null,t=Bs(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===31){if(t=p(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return $u=t,null}function Tv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sc()){case Ct:return 2;case Mt:return 8;case Vs:case Ac:return 32;case ko:return 268435456;default:return 32}default:return 32}}var am=!1,si=null,ri=null,ii=null,Dl=new Map,Ml=new Map,ai=[],XT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sv(t,r){switch(t){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Dl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(r.pointerId)}}function Ol(t,r,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=qs(r),r!==null&&wv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function WT(t,r,a,l,f){switch(r){case"focusin":return si=Ol(si,t,r,a,l,f),!0;case"dragenter":return ri=Ol(ri,t,r,a,l,f),!0;case"mouseover":return ii=Ol(ii,t,r,a,l,f),!0;case"pointerover":var m=f.pointerId;return Dl.set(m,Ol(Dl.get(m)||null,t,r,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Ml.set(m,Ol(Ml.get(m)||null,t,r,a,l,f)),!0}return!1}function Av(t){var r=Bs(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Rc(t.priority,function(){Ev(a)});return}}else if(r===31){if(r=p(a),r!==null){t.blockedOn=r,Rc(t.priority,function(){Ev(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ku(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=rm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ca=l,a.target.dispatchEvent(l),Ca=null}else return r=qs(a),r!==null&&wv(r),t.blockedOn=a,!1;r.shift()}return!0}function Nv(t,r,a){Ku(t)&&a.delete(r)}function JT(){am=!1,si!==null&&Ku(si)&&(si=null),ri!==null&&Ku(ri)&&(ri=null),ii!==null&&Ku(ii)&&(ii=null),Dl.forEach(Nv),Ml.forEach(Nv)}function Yu(t,r){t.blockedOn===r&&(t.blockedOn=null,am||(am=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,JT)))}var Qu=null;function Rv(t){Qu!==t&&(Qu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Qu===t&&(Qu=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(im(l||a)===null)continue;break}var m=qs(a);m!==null&&(t.splice(r,3),r-=3,sf(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function lo(t){function r(M){return Yu(M,t)}si!==null&&Yu(si,t),ri!==null&&Yu(ri,t),ii!==null&&Yu(ii,t),Dl.forEach(r),Ml.forEach(r);for(var a=0;a<ai.length;a++){var l=ai[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ai.length&&(a=ai[0],a.blockedOn===null);)Av(a),a.blockedOn===null&&ai.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],_=f[qt]||null;if(typeof m=="function")_||Rv(a);else if(_){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[qt]||null)E=_.formAction;else if(im(f)!==null)continue}else E=_.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),Rv(a)}}}function Cv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function om(t){this._internalRoot=t}Xu.prototype.render=om.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=Vn();xv(a,l,t,r,null,null)},Xu.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;xv(t.current,2,null,t,null,null),ju(),r[ps]=null}};function Xu(t){this._internalRoot=t}Xu.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ps();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ai.length&&r!==0&&r<ai[a].priority;a++);ai.splice(a,0,t),a===0&&Av(t)}};var jv=e.version;if(jv!=="19.2.0")throw Error(i(527,jv,"19.2.0"));W.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var ZT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{xr=Wu.inject(ZT),en=Wu}catch{}}return Ll.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",f=Vy,m=Uy,_=Py;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=vv(t,1,!1,null,null,a,l,null,f,m,_,Cv),t[ps]=r.current,qf(t),new om(r)},Ll.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,f="",m=Vy,_=Uy,E=Py,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),r=vv(t,1,!0,r,a??null,l,f,M,m,_,E,Cv),r.context=_v(null),a=r.current,l=Vn(),l=Po(l),f=Gr(l),f.callback=null,$r(a,f,l),a=l,r.current.lanes=a,Er(r,a),Ts(r),t[ps]=r.current,qf(t),new Xu(r)},Ll.version="19.2.0",Ll}var zv;function cS(){if(zv)return um.exports;zv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),um.exports=lS(),um.exports}var uS=cS();const hS=fx(uS);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Bv="popstate";function dS(s={}){function e(o,c){let{pathname:d="/",search:p="",hash:g=""}=ma(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Cm("",{pathname:d,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let d=o.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof c=="string"?c:Wl(c))}function i(o,c){cs(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return mS(e,n,i,s)}function ut(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function cs(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fS(){return Math.random().toString(36).substring(2,10)}function qv(s,e){return{usr:s.state,key:s.key,idx:e}}function Cm(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?ma(e):e,state:n,key:e&&e.key||i||fS()}}function Wl({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function ma(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function mS(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,d=o.history,p="POP",g=null,y=x();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function x(){return(d.state||{idx:null}).idx}function w(){p="POP";let P=x(),Q=P==null?null:P-y;y=P,g&&g({action:p,location:q.location,delta:Q})}function A(P,Q){p="PUSH";let te=Cm(q.location,P,Q);n&&n(te,P),y=x()+1;let J=qv(te,y),se=q.createHref(te);try{d.pushState(J,"",se)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(se)}c&&g&&g({action:p,location:q.location,delta:1})}function D(P,Q){p="REPLACE";let te=Cm(q.location,P,Q);n&&n(te,P),y=x();let J=qv(te,y),se=q.createHref(te);d.replaceState(J,"",se),c&&g&&g({action:p,location:q.location,delta:0})}function k(P){return pS(P)}let q={get action(){return p},get location(){return s(o,d)},listen(P){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Bv,w),g=P,()=>{o.removeEventListener(Bv,w),g=null}},createHref(P){return e(o,P)},createURL:k,encodeLocation(P){let Q=k(P);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:A,replace:D,go(P){return d.go(P)}};return q}function pS(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ut(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Wl(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function mx(s,e,n="/"){return gS(s,e,n,!1)}function gS(s,e,n,i){let o=typeof e=="string"?ma(e):e,c=mr(o.pathname||"/",n);if(c==null)return null;let d=px(s);yS(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=RS(c);p=AS(d[g],y,i)}return p}function px(s,e=[],n=[],i="",o=!1){let c=(d,p,g=o,y)=>{let x={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&g)return;ut(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let w=dr([i,x.relativePath]),A=n.concat(x);d.children&&d.children.length>0&&(ut(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),px(d.children,e,A,w,g)),!(d.path==null&&!d.index)&&e.push({path:w,score:TS(w,d.index),routesMeta:A})};return s.forEach((d,p)=>{var g;if(d.path===""||!((g=d.path)!=null&&g.includes("?")))c(d,p);else for(let y of gx(d.path))c(d,p,!0,y)}),e}function gx(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let d=gx(i.join("/")),p=[];return p.push(...d.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function yS(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:SS(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var vS=/^:[\w-]+$/,_S=3,xS=2,bS=1,wS=10,ES=-2,Fv=s=>s==="*";function TS(s,e){let n=s.split("/"),i=n.length;return n.some(Fv)&&(i+=ES),e&&(i+=xS),n.filter(o=>!Fv(o)).reduce((o,c)=>o+(vS.test(c)?_S:c===""?bS:wS),i)}function SS(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function AS(s,e,n=!1){let{routesMeta:i}=s,o={},c="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,x=c==="/"?e:e.slice(c.length)||"/",w=vh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),A=g.route;if(!w&&y&&n&&!i[i.length-1].route.index&&(w=vh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:dr([c,w.pathname]),pathnameBase:DS(dr([c,w.pathnameBase])),route:A}),w.pathnameBase!=="/"&&(c=dr([c,w.pathnameBase]))}return d}function vh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=NS(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((y,{paramName:x,isOptional:w},A)=>{if(x==="*"){let k=p[A]||"";d=c.slice(0,c.length-k.length).replace(/(.)\/+$/,"$1")}const D=p[A];return w&&!D?y[x]=void 0:y[x]=(D||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:s}}function NS(s,e=!1,n=!0){cs(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function RS(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cs(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function mr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}function CS(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?ma(s):s;return{pathname:n?n.startsWith("/")?n:jS(n,e):e,search:MS(i),hash:OS(o)}}function jS(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function mm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IS(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function yx(s){let e=IS(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function vx(s,e,n,i=!1){let o;typeof s=="string"?o=ma(s):(o={...s},ut(!o.pathname||!o.pathname.includes("?"),mm("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),mm("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),mm("#","search","hash",o)));let c=s===""||o.pathname==="",d=c?"/":o.pathname,p;if(d==null)p=n;else{let w=e.length-1;if(!i&&d.startsWith("..")){let A=d.split("/");for(;A[0]==="..";)A.shift(),w-=1;o.pathname=A.join("/")}p=w>=0?e[w]:"/"}let g=CS(o,p),y=d&&d!=="/"&&d.endsWith("/"),x=(c||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var dr=s=>s.join("/").replace(/\/\/+/g,"/"),DS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),MS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,OS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function kS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _x=["POST","PUT","PATCH","DELETE"];new Set(_x);var LS=["GET",..._x];new Set(LS);var Ao=S.createContext(null);Ao.displayName="DataRouter";var kh=S.createContext(null);kh.displayName="DataRouterState";S.createContext(!1);var xx=S.createContext({isTransitioning:!1});xx.displayName="ViewTransition";var VS=S.createContext(new Map);VS.displayName="Fetchers";var US=S.createContext(null);US.displayName="Await";var Ms=S.createContext(null);Ms.displayName="Navigation";var lc=S.createContext(null);lc.displayName="Location";var Os=S.createContext({outlet:null,matches:[],isDataRoute:!1});Os.displayName="Route";var tp=S.createContext(null);tp.displayName="RouteError";function PS(s,{relative:e}={}){ut(cc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=S.useContext(Ms),{hash:o,pathname:c,search:d}=uc(s,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:dr([n,c])),i.createHref({pathname:p,search:d,hash:o})}function cc(){return S.useContext(lc)!=null}function Ti(){return ut(cc(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(lc).location}var bx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wx(s){S.useContext(Ms).static||S.useLayoutEffect(s)}function Ex(){let{isDataRoute:s}=S.useContext(Os);return s?JS():zS()}function zS(){ut(cc(),"useNavigate() may be used only in the context of a <Router> component.");let s=S.useContext(Ao),{basename:e,navigator:n}=S.useContext(Ms),{matches:i}=S.useContext(Os),{pathname:o}=Ti(),c=JSON.stringify(yx(i)),d=S.useRef(!1);return wx(()=>{d.current=!0}),S.useCallback((g,y={})=>{if(cs(d.current,bx),!d.current)return;if(typeof g=="number"){n.go(g);return}let x=vx(g,JSON.parse(c),o,y.relative==="path");s==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:dr([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,c,o,s])}S.createContext(null);function Tx(){let{matches:s}=S.useContext(Os),e=s[s.length-1];return e?e.params:{}}function uc(s,{relative:e}={}){let{matches:n}=S.useContext(Os),{pathname:i}=Ti(),o=JSON.stringify(yx(n));return S.useMemo(()=>vx(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function BS(s,e){return Sx(s,e)}function Sx(s,e,n,i,o){var te;ut(cc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=S.useContext(Ms),{matches:d}=S.useContext(Os),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",x=p?p.pathnameBase:"/",w=p&&p.route;{let J=w&&w.path||"";Ax(y,!w||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let A=Ti(),D;if(e){let J=typeof e=="string"?ma(e):e;ut(x==="/"||((te=J.pathname)==null?void 0:te.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${J.pathname}" was given in the \`location\` prop.`),D=J}else D=A;let k=D.pathname||"/",q=k;if(x!=="/"){let J=x.replace(/^\//,"").split("/");q="/"+k.replace(/^\//,"").split("/").slice(J.length).join("/")}let P=mx(s,{pathname:q});cs(w||P!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),cs(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=$S(P&&P.map(J=>Object.assign({},J,{params:Object.assign({},g,J.params),pathname:dr([x,c.encodeLocation?c.encodeLocation(J.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?x:dr([x,c.encodeLocation?c.encodeLocation(J.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathnameBase])})),d,n,i,o);return e&&Q?S.createElement(lc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},Q):Q}function qS(){let s=WS(),e=kS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:c},"ErrorBoundary")," or"," ",S.createElement("code",{style:c},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:o},n):null,d)}var FS=S.createElement(qS,null),HS=class extends S.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.unstable_onError?this.props.unstable_onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?S.createElement(Os.Provider,{value:this.props.routeContext},S.createElement(tp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GS({routeContext:s,match:e,children:n}){let i=S.useContext(Ao);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(Os.Provider,{value:s},n)}function $S(s,e=[],n=null,i=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let c=s,d=n==null?void 0:n.errors;if(d!=null){let y=c.findIndex(x=>x.route.id&&(d==null?void 0:d[x.route.id])!==void 0);ut(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let p=!1,g=-1;if(n)for(let y=0;y<c.length;y++){let x=c[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:w,errors:A}=n,D=x.route.loader&&!w.hasOwnProperty(x.route.id)&&(!A||A[x.route.id]===void 0);if(x.route.lazy||D){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((y,x,w)=>{let A,D=!1,k=null,q=null;n&&(A=d&&x.route.id?d[x.route.id]:void 0,k=x.route.errorElement||FS,p&&(g<0&&w===0?(Ax("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,q=null):g===w&&(D=!0,q=x.route.hydrateFallbackElement||null)));let P=e.concat(c.slice(0,w+1)),Q=()=>{let te;return A?te=k:D?te=q:x.route.Component?te=S.createElement(x.route.Component,null):x.route.element?te=x.route.element:te=y,S.createElement(GS,{match:x,routeContext:{outlet:y,matches:P,isDataRoute:n!=null},children:te})};return n&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?S.createElement(HS,{location:n.location,revalidation:n.revalidation,component:k,error:A,children:Q(),routeContext:{outlet:null,matches:P,isDataRoute:!0},unstable_onError:i}):Q()},null)}function np(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KS(s){let e=S.useContext(Ao);return ut(e,np(s)),e}function YS(s){let e=S.useContext(kh);return ut(e,np(s)),e}function QS(s){let e=S.useContext(Os);return ut(e,np(s)),e}function sp(s){let e=QS(s),n=e.matches[e.matches.length-1];return ut(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function XS(){return sp("useRouteId")}function WS(){var i;let s=S.useContext(tp),e=YS("useRouteError"),n=sp("useRouteError");return s!==void 0?s:(i=e.errors)==null?void 0:i[n]}function JS(){let{router:s}=KS("useNavigate"),e=sp("useNavigate"),n=S.useRef(!1);return wx(()=>{n.current=!0}),S.useCallback(async(o,c={})=>{cs(n.current,bx),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var Hv={};function Ax(s,e,n){!e&&!Hv[s]&&(Hv[s]=!0,cs(!1,n))}S.memo(ZS);function ZS({routes:s,future:e,state:n,unstable_onError:i}){return Sx(s,void 0,n,i,e)}function rn(s){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function e1({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:c=!1}){ut(!cc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),p=S.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof n=="string"&&(n=ma(n));let{pathname:g="/",search:y="",hash:x="",state:w=null,key:A="default"}=n,D=S.useMemo(()=>{let k=mr(g,d);return k==null?null:{location:{pathname:k,search:y,hash:x,state:w,key:A},navigationType:i}},[d,g,y,x,w,A,i]);return cs(D!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:S.createElement(Ms.Provider,{value:p},S.createElement(lc.Provider,{children:e,value:D}))}function t1({children:s,location:e}){return BS(jm(s),e)}function jm(s,e=[]){let n=[];return S.Children.forEach(s,(i,o)=>{if(!S.isValidElement(i))return;let c=[...e,o];if(i.type===S.Fragment){n.push.apply(n,jm(i.props.children,c));return}ut(i.type===rn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=jm(i.props.children,c)),n.push(d)}),n}var ah="get",oh="application/x-www-form-urlencoded";function Lh(s){return s!=null&&typeof s.tagName=="string"}function n1(s){return Lh(s)&&s.tagName.toLowerCase()==="button"}function s1(s){return Lh(s)&&s.tagName.toLowerCase()==="form"}function r1(s){return Lh(s)&&s.tagName.toLowerCase()==="input"}function i1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function a1(s,e){return s.button===0&&(!e||e==="_self")&&!i1(s)}var Ju=null;function o1(){if(Ju===null)try{new FormData(document.createElement("form"),0),Ju=!1}catch{Ju=!0}return Ju}var l1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pm(s){return s!=null&&!l1.has(s)?(cs(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oh}"`),null):s}function c1(s,e){let n,i,o,c,d;if(s1(s)){let p=s.getAttribute("action");i=p?mr(p,e):null,n=s.getAttribute("method")||ah,o=pm(s.getAttribute("enctype"))||oh,c=new FormData(s)}else if(n1(s)||r1(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?mr(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||ah,o=pm(s.getAttribute("formenctype"))||pm(p.getAttribute("enctype"))||oh,c=new FormData(p,s),!o1()){let{name:y,type:x,value:w}=s;if(x==="image"){let A=y?`${y}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else y&&c.append(y,w)}}else{if(Lh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ah,i=null,o=oh,d=s}return c&&o==="text/plain"&&(d=c,c=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function u1(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&mr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function h1(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function d1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function f1(s,e,n){let i=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await h1(c,n);return d.links?d.links():[]}return[]}));return y1(i.flat(1).filter(d1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Gv(s,e,n,i,o,c){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>{var x;return n[y].pathname!==g.pathname||((x=n[y].route.path)==null?void 0:x.endsWith("*"))&&n[y].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{var w;let x=i.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function m1(s,e,{includeHydrateFallback:n}={}){return p1(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function p1(s){return[...new Set(s)]}function g1(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function y1(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let c=JSON.stringify(g1(o));return n.has(c)||(n.add(c),i.push({key:c,link:o})),i},[])}function Nx(){let s=S.useContext(Ao);return rp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function v1(){let s=S.useContext(kh);return rp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ip=S.createContext(void 0);ip.displayName="FrameworkContext";function Rx(){let s=S.useContext(ip);return rp(s,"You must render this element inside a <HydratedRouter> element"),s}function _1(s,e){let n=S.useContext(ip),[i,o]=S.useState(!1),[c,d]=S.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:w}=e,A=S.useRef(null);S.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let q=Q=>{Q.forEach(te=>{d(te.isIntersecting)})},P=new IntersectionObserver(q,{threshold:.5});return A.current&&P.observe(A.current),()=>{P.disconnect()}}},[s]),S.useEffect(()=>{if(i){let q=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(q)}}},[i]);let D=()=>{o(!0)},k=()=>{o(!1),d(!1)};return n?s!=="intent"?[c,A,{}]:[c,A,{onFocus:Vl(p,D),onBlur:Vl(g,k),onMouseEnter:Vl(y,D),onMouseLeave:Vl(x,k),onTouchStart:Vl(w,D)}]:[!1,A,{}]}function Vl(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function x1({page:s,...e}){let{router:n}=Nx(),i=S.useMemo(()=>mx(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?S.createElement(w1,{page:s,matches:i,...e}):null}function b1(s){let{manifest:e,routeModules:n}=Rx(),[i,o]=S.useState([]);return S.useEffect(()=>{let c=!1;return f1(s,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[s,e,n]),i}function w1({page:s,matches:e,...n}){let i=Ti(),{manifest:o,routeModules:c}=Rx(),{basename:d}=Nx(),{loaderData:p,matches:g}=v1(),y=S.useMemo(()=>Gv(s,e,g,o,i,"data"),[s,e,g,o,i]),x=S.useMemo(()=>Gv(s,e,g,o,i,"assets"),[s,e,g,o,i]),w=S.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let k=new Set,q=!1;if(e.forEach(Q=>{var J;let te=o.routes[Q.route.id];!te||!te.hasLoader||(!y.some(se=>se.route.id===Q.route.id)&&Q.route.id in p&&((J=c[Q.route.id])!=null&&J.shouldRevalidate)||te.hasClientLoader?q=!0:k.add(Q.route.id))}),k.size===0)return[];let P=u1(s,d,"data");return q&&k.size>0&&P.searchParams.set("_routes",e.filter(Q=>k.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[P.pathname+P.search]},[d,p,i,o,y,e,s,c]),A=S.useMemo(()=>m1(x,o),[x,o]),D=b1(x);return S.createElement(S.Fragment,null,w.map(k=>S.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),A.map(k=>S.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),D.map(({key:k,link:q})=>S.createElement("link",{key:k,nonce:n.nonce,...q})))}function E1(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Cx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cx&&(window.__reactRouterVersion="7.9.5")}catch{}function T1({basename:s,children:e,window:n}){let i=S.useRef();i.current==null&&(i.current=dS({window:n,v5Compat:!0}));let o=i.current,[c,d]=S.useState({action:o.action,location:o.location}),p=S.useCallback(g=>{S.startTransition(()=>d(g))},[d]);return S.useLayoutEffect(()=>o.listen(p),[o,p]),S.createElement(e1,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:o})}var jx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ln=S.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:c,replace:d,state:p,target:g,to:y,preventScrollReset:x,viewTransition:w,...A},D){let{basename:k}=S.useContext(Ms),q=typeof y=="string"&&jx.test(y),P,Q=!1;if(typeof y=="string"&&q&&(P=y,Cx))try{let R=new URL(window.location.href),I=y.startsWith("//")?new URL(R.protocol+y):new URL(y),V=mr(I.pathname,k);I.origin===R.origin&&V!=null?y=V+I.search+I.hash:Q=!0}catch{cs(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=PS(y,{relative:o}),[J,se,ce]=_1(i,A),ue=N1(y,{replace:d,state:p,target:g,preventScrollReset:x,relative:o,viewTransition:w});function C(R){e&&e(R),R.defaultPrevented||ue(R)}let N=S.createElement("a",{...A,...ce,href:P||te,onClick:Q||c?e:C,ref:E1(D,se),target:g,"data-discover":!q&&n==="render"?"true":void 0});return J&&!q?S.createElement(S.Fragment,null,N,S.createElement(x1,{page:te})):N});ln.displayName="Link";var Jn=S.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:c,to:d,viewTransition:p,children:g,...y},x){let w=uc(d,{relative:y.relative}),A=Ti(),D=S.useContext(kh),{navigator:k,basename:q}=S.useContext(Ms),P=D!=null&&D1(w)&&p===!0,Q=k.encodeLocation?k.encodeLocation(w).pathname:w.pathname,te=A.pathname,J=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(te=te.toLowerCase(),J=J?J.toLowerCase():null,Q=Q.toLowerCase()),J&&q&&(J=mr(J,q)||J);const se=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let ce=te===Q||!o&&te.startsWith(Q)&&te.charAt(se)==="/",ue=J!=null&&(J===Q||!o&&J.startsWith(Q)&&J.charAt(Q.length)==="/"),C={isActive:ce,isPending:ue,isTransitioning:P},N=ce?e:void 0,R;typeof i=="function"?R=i(C):R=[i,ce?"active":null,ue?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let I=typeof c=="function"?c(C):c;return S.createElement(ln,{...y,"aria-current":N,className:R,ref:x,style:I,to:d,viewTransition:p},typeof g=="function"?g(C):g)});Jn.displayName="NavLink";var S1=S.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:c,method:d=ah,action:p,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:w,...A},D)=>{let k=j1(),q=I1(p,{relative:y}),P=d.toLowerCase()==="get"?"get":"post",Q=typeof p=="string"&&jx.test(p),te=J=>{if(g&&g(J),J.defaultPrevented)return;J.preventDefault();let se=J.nativeEvent.submitter,ce=(se==null?void 0:se.getAttribute("formmethod"))||d;k(se||J.currentTarget,{fetcherKey:e,method:ce,navigate:n,replace:o,state:c,relative:y,preventScrollReset:x,viewTransition:w})};return S.createElement("form",{ref:D,method:P,action:q,onSubmit:i?g:te,...A,"data-discover":!Q&&s==="render"?"true":void 0})});S1.displayName="Form";function A1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ix(s){let e=S.useContext(Ao);return ut(e,A1(s)),e}function N1(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:c,viewTransition:d}={}){let p=Ex(),g=Ti(),y=uc(s,{relative:c});return S.useCallback(x=>{if(a1(x,e)){x.preventDefault();let w=n!==void 0?n:Wl(g)===Wl(y);p(s,{replace:w,state:i,preventScrollReset:o,relative:c,viewTransition:d})}},[g,p,y,n,i,e,s,o,c,d])}var R1=0,C1=()=>`__${String(++R1)}__`;function j1(){let{router:s}=Ix("useSubmit"),{basename:e}=S.useContext(Ms),n=XS();return S.useCallback(async(i,o={})=>{let{action:c,method:d,encType:p,formData:g,body:y}=c1(i,e);if(o.navigate===!1){let x=o.fetcherKey||C1();await s.fetch(x,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||p,flushSync:o.flushSync})}else await s.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function I1(s,{relative:e}={}){let{basename:n}=S.useContext(Ms),i=S.useContext(Os);ut(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...uc(s||".",{relative:e})},d=Ti();if(s==null){c.search=d.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let x=p.toString();c.search=x?`?${x}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:dr([n,c.pathname])),Wl(c)}function D1(s,{relative:e}={}){let n=S.useContext(xx);ut(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Ix("useViewTransitionState"),o=uc(s,{relative:e});if(!n.isTransitioning)return!1;let c=mr(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=mr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return vh(o.pathname,d)!=null||vh(o.pathname,c)!=null}const M1={play:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3l14 9-14 9V3z"}),pause:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 4h4v16H6zM14 4h4v16h-4z"}),logo:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 6l12-3"}),search:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}),previous:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"}),next:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}),upload:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"}),heart:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"}),comment:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}),"chat-bubble":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V7a2 2 0 012-2h4M9 14h6"}),x:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}),send:u.jsx("path",{d:"M22 2L11 13M22 2L15 22l-4-9-9-4 20-6z"}),camera:u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"music-note":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z"}),"map-pin":u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"globe-alt":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9M3 12a9 9 0 019-9"}),aperture:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m-2.122 2.122a5 5 0 01-7.072 0m-2.121-2.121a5 5 0 010-7.072m2.121-2.121a5 5 0 017.072 0"}),map:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13v-6m0 6l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 9m-6-2l6-3m0 0l6 3"}),radio:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 4.938A8.001 8.001 0 0112 4a8 8 0 017.069 4.938M15 12a3 3 0 11-6 0 3 3 0 016 0zm-3 8.062A8.001 8.001 0 0112 20a8 8 0 01-7.069-4.938M4.938 15A8.001 8.001 0 014 12a8 8 0 014.938-7.069"}),spotify:u.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20zm0 17.5a7.5 7.5 0 110-15 7.5 7.5 0 010 15zm-4.3-7.2a.7.7 0 00-1 .2.7.7 0 00.1 1l3.5 2a.7.7 0 001-.2.7.7 0 00-.2-1l-3.4-2zm.3-2.5a.7.7 0 00-1 .2.7.7 0 00.2 1l5.8 3.3a.7.7 0 001-.2.7.7 0 00-.2-1l-5.8-3.3zm.2-2.6a.7.7 0 00-1 .3.7.7 0 00.3 1l6.7 3.8a.7.7 0 001-.3.7.7 0 00-.3-1l-6.7-3.8z"}),soundcloud:u.jsx("path",{d:"M7 12a1 1 0 00-1-1H3a1 1 0 100 2h3a1 1 0 001-1zm14-1h-3a1 1 0 100 2h3a1 1 0 100-2zm-5-3a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm-2 0a1 1 0 100-2 1 1 0 000 2zm14 2c0-3.9-3.1-7-7-7s-7 3.1-7 7v1h14v-1z"}),youtube:u.jsx("path",{d:"M21.582 6.186A2.5 2.5 0 0020 4.5H4a2.5 2.5 0 00-2.5 2.5v10A2.5 2.5 0 004 19.5h16a2.5 2.5 0 002.5-2.5v-10a2.5 2.5 0 00-.918-1.814zM9.5 15.5v-7l7 3.5-7 3.5z"}),bandcamp:u.jsx("path",{d:"M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2l4 4 4-4v8H8v-8z"}),package:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4-8-4m16 0v10l-8 4-8-4V7"}),tshirt:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 4h6l2 2v2H7V6l2-2zm0 0V3a1 1 0 011-1h4a1 1 0 011 1v1m-6 0v12h6V4m-6 0H3v4l3 1 1-1h1M15 4h6v4l-3 1-1-1h-1"}),crown:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l3-3 4 4 4-4 3 3V5H5v10z"}),playlist:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"}),tag:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"}),"thumbs-up":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 9V5a3 3 0 00-3-3l-4 9v11h11.28a2 2 0 002-1.7l1.38-9a2 2 0 00-2-2.3H14z"}),"thumbs-down":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 15v4a3 3 0 003 3l4-9V5H5.72a2 2 0 00-2 1.7l-1.38 9a2 2 0 002 2.3h4.28z"}),"video-camera":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}),rss:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 11a9 9 0 019 9M4 4a16 16 0 0116 16M4 4v0"}),"book-open":u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 1V6a4 4 0 00-4-4H5a4 4 0 00-4 4v12a4 4 0 004 4h14a4 4 0 004-4v-3m-4-1l-4-4 4-4"}),download:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"}),plus:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"}),mail:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}),microphone:u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 10v2a7 7 0 01-14 0v-2"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 19v3"})]}),palette:u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 1v2m0 18v2m9-9h-2m-2-6.364L15.364 7M4.636 17.364L7 15m12.364 0L17 15M4.636 4.636L7 7"})]}),users:u.jsx(u.Fragment,{children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.134-1.276-.38-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.134-1.276.38-1.857m0 0a5.002 5.002 0 019.24 0M12 15a4 4 0 100-8 4 4 0 000 8z"})}),sparkles:u.jsx(u.Fragment,{children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M17 3v4M19 5h-4M14 17v4M16 19h-4M7.5 10.5L9 9m-1.5 3l-1.5 1.5M16.5 10.5L15 9m1.5 3l1.5 1.5"})})},pe=({name:s,className:e="h-6 w-6",style:n})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",style:n,children:M1[s]}),O1=()=>{const s={color:"white",backgroundColor:"#282828"};return u.jsx("header",{className:"bg-gray-800 sticky top-0 z-40 shadow-md",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsxs("div",{className:"flex items-center space-x-8",children:[u.jsxs(ln,{to:"/",className:"flex items-center space-x-2 text-white",children:[u.jsx(pe,{name:"logo",className:"h-8 w-8 text-brand-accent"}),u.jsx("span",{className:"font-bold text-xl",children:"SoundWave"})]}),u.jsxs("nav",{className:"hidden md:flex space-x-2",children:[u.jsx(Jn,{to:"/",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Home"}),u.jsx(Jn,{to:"/library",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Library"}),u.jsx(Jn,{to:"/playlists",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Playlists"}),u.jsx(Jn,{to:"/labels",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Labels"}),u.jsx(Jn,{to:"/artist-hub",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Artist Hub"}),u.jsx(Jn,{to:"/live-streams",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Live"}),u.jsx(Jn,{to:"/community",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Community"}),u.jsx(Jn,{to:"/tutorials",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Tutorials"}),u.jsx(Jn,{to:"/masterclass",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Masterclass"}),u.jsx(Jn,{to:"/samples",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Samples"}),u.jsx(Jn,{to:"/upload",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",style:({isActive:e})=>e?s:{},children:"Upload"})]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Search for tracks or artists...",className:"bg-gray-700 text-white placeholder-gray-400 border border-transparent focus:ring-2 focus:ring-brand-accent focus:border-transparent rounded-full py-2 px-4 w-64 transition-all"}),u.jsx(pe,{name:"search",className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]}),u.jsxs(ln,{to:"/inbox",className:"relative text-gray-400 hover:text-white transition-colors",children:[u.jsx(pe,{name:"mail",className:"h-6 w-6"}),u.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:"3"})]}),u.jsxs(ln,{to:"/profile/user_1",className:"flex items-center space-x-2",children:[u.jsx("img",{className:"h-8 w-8 rounded-full object-cover",src:"https://picsum.photos/id/1015/100/100",alt:"User Avatar"}),u.jsx("span",{className:"text-white font-medium hidden sm:block",children:"Sub-Tropical"})]})]})]})})})},k1=()=>u.jsx("footer",{className:"bg-gray-800 border-t border-gray-700 mt-auto",children:u.jsx("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:u.jsxs("p",{className:"text-center text-sm text-gray-400",children:[" ",new Date().getFullYear()," SoundWave. All rights reserved. A crowd-sourced artist platform."]})})}),L1=()=>{const[s,e]=S.useState(null),[n,i]=S.useState(!1),[o,c]=S.useState(null),[d,p]=S.useState(!1),g=S.useCallback(w=>{(s==null?void 0:s.id)===w.id?i(A=>!A):(e(w),i(!0)),p(!1)},[s]),y=S.useCallback(w=>{(s==null?void 0:s.id)===w.id&&d?i(A=>!A):(e(w),i(!0),p(!0))},[s,d]),x=S.useCallback(()=>{s&&i(w=>(w&&p(!1),!w))},[s]);return{currentTrack:s,isPlaying:n,playTrack:g,togglePlayPause:x,onTrackEnd:o,setOnTrackEnd:c,isPreviewing:d,playPreview:y}},No=S.createContext(null),V1=({children:s})=>{const e=L1();return u.jsx(No.Provider,{value:e,children:s})},U1=()=>{const s=S.useContext(No),e=S.useRef(null),[n,i]=S.useState(0),o=S.useRef(null);if(!s)return null;const{currentTrack:c,isPlaying:d,togglePlayPause:p,onTrackEnd:g,isPreviewing:y}=s;S.useEffect(()=>{const w=e.current;if(w)if(d){const A=w.play();A!==void 0&&A.catch(D=>{D.name!=="AbortError"&&console.error("Audio play failed:",D)})}else w.pause()},[d,c]),S.useEffect(()=>(o.current&&(clearTimeout(o.current),o.current=null),d&&y&&(o.current=window.setTimeout(()=>{d&&y&&p()},3e4)),()=>{o.current&&clearTimeout(o.current)}),[c,d,y,p]),S.useEffect(()=>{const w=e.current;if(!w)return;i(0);const A=()=>{w.duration&&isFinite(w.duration)&&i(w.currentTime/w.duration*100)},D=()=>{g?g():p()};return w.addEventListener("timeupdate",A),w.addEventListener("ended",D),()=>{w.removeEventListener("timeupdate",A),w.removeEventListener("ended",D)}},[c,p,g]);const x=w=>{const A=e.current;if(!A||!isFinite(A.duration))return;const D=Number(w.target.value),k=D/100*A.duration;isFinite(k)&&(A.currentTime=k,i(D))};return c?u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 h-24 z-50 flex items-center px-4 sm:px-6 lg:px-8",children:[u.jsx("audio",{ref:e,src:c.audioSrc}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:c.coverArtUrl,alt:c.title,className:"w-16 h-16 rounded-md object-cover"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h4",{className:"font-semibold text-white",children:c.title}),y&&u.jsx("span",{className:"text-xs font-bold bg-yellow-500 text-gray-900 px-2 py-0.5 rounded-full",children:"PREVIEW"})]}),u.jsx("p",{className:"text-sm text-gray-400",children:c.artistName})]})]}),u.jsxs("div",{className:"flex-grow flex items-center justify-center space-x-4 mx-8",children:[u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-white",children:u.jsx(pe,{name:"previous",className:"w-6 h-6"})}),u.jsx("button",{onClick:p,className:"bg-white rounded-full p-2 text-gray-900 hover:scale-105 transition-transform",children:u.jsx(pe,{name:d?"pause":"play",className:"w-8 h-8"})}),u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-white",children:u.jsx(pe,{name:"next",className:"w-6 h-6"})})]}),u.jsx("div",{className:"flex items-center space-x-2 w-1/3",children:u.jsx("input",{type:"range",min:"0",max:"100",value:n||0,onChange:x,className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer range-sm",style:{background:`linear-gradient(to right, #1DB954 ${n}%, #4B5563 ${n}%)`}})})]}):null},Vh=({track:s,onViewComments:e})=>{var x;const n=S.useContext(No);if(!n)throw new Error("TrackCard must be used within an AudioProvider");const{playTrack:i,currentTrack:o,isPlaying:c}=n,d=(o==null?void 0:o.id)===s.id&&c,p=()=>{i(s)},g=()=>{switch(s.uploadType){case"For Sale":return`Buy for $${s.price.toFixed(2)}`;case"Free Download":return"Download";default:return null}},y=()=>{switch(s.category){case"Bootleg":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"Remix":return"bg-purple-500/20 text-purple-300 border-purple-500/30";default:return"bg-blue-500/20 text-blue-300 border-blue-500/30"}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:s.coverArtUrl,alt:`${s.title} cover art`,className:"w-full h-48 object-cover"}),u.jsx("button",{onClick:p,className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-label":`Play or pause ${s.title}`,children:u.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:u.jsx(pe,{name:d?"pause":"play",className:"h-8 w-8 text-white"})})}),u.jsx("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full border ${y()}`,children:s.category})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-white truncate",children:s.title}),u.jsxs("div",{className:"text-sm text-gray-400",children:[u.jsx(ln,{to:`/profile/${s.artistId}`,className:"hover:text-white hover:underline",children:s.artistName}),s.labelId&&s.labelName&&u.jsxs("span",{className:"text-xs",children:[" on ",u.jsx(ln,{to:`/labels/${s.labelId}`,className:"hover:text-white hover:underline font-semibold",children:s.labelName})]})]}),u.jsx("div",{className:"flex-grow mt-2",children:u.jsx("div",{className:"flex space-x-1",children:s.tags.slice(0,2).map(w=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:w},w))})}),u.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e&&u.jsxs("button",{onClick:()=>e(s),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors","aria-label":`View comments for ${s.title}`,children:[u.jsx(pe,{name:"comment",className:"w-4 h-4"}),u.jsx("span",{className:"text-xs font-semibold",children:((x=s.comments)==null?void 0:x.length)||0})]}),g()&&u.jsx("button",{className:"bg-transparent border border-brand-accent text-brand-accent px-3 py-1 rounded-full text-xs font-semibold hover:bg-brand-accent hover:text-white transition-colors",children:g()})]})]})]})},vn=()=>u.jsx("div",{className:"flex justify-center items-center p-8",children:u.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-brand-accent"})}),P1=({comment:s})=>{const e=c=>{const d=new Date(c),p=Math.floor((new Date().getTime()-d.getTime())/1e3);let g=p/31536e3;return g>1?Math.floor(g)+" years ago":(g=p/2592e3,g>1?Math.floor(g)+" months ago":(g=p/86400,g>1?Math.floor(g)+" days ago":(g=p/3600,g>1?Math.floor(g)+" hours ago":(g=p/60,g>1?Math.floor(g)+" minutes ago":"Just now"))))},n=c=>c.split(/(@\w+)/g).map((d,p)=>d.startsWith("@")?u.jsx("strong",{className:"text-brand-accent font-semibold cursor-pointer hover:underline",children:d},p):d),i=s.authorId?`/profile/${s.authorId}`:"#",o=s.authorAvatarUrl||`https://i.pravatar.cc/150?u=${s.authorName}`;return u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(ln,{to:i,children:u.jsx("img",{src:o,alt:s.authorName,className:"w-10 h-10 rounded-full object-cover"})}),u.jsxs("div",{className:"flex-1 bg-gray-700/50 p-3 rounded-lg",children:[u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx(ln,{to:i,className:"font-bold text-white text-sm hover:underline",children:s.authorName}),u.jsx("span",{className:"text-xs text-gray-500",children:e(s.createdAt)})]}),u.jsx("p",{className:"text-gray-300 text-sm mt-1",children:n(s.content)})]})]})},qe=({children:s,variant:e="primary",isLoading:n=!1,size:i="md",className:o,...c})=>{const d="rounded-full font-semibold transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",p={primary:"bg-brand-accent hover:bg-brand-accent-hover text-white focus:ring-brand-accent",secondary:"bg-gray-700 hover:bg-gray-600 text-white focus:ring-gray-500"},g={sm:"px-3 py-1.5 text-xs",md:"px-6 py-2"};return u.jsx("button",{className:[d,p[e],g[i],o].filter(Boolean).join(" "),disabled:n,...c,children:n?u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s})},z1=({onAddComment:s,placeholder:e="Add a comment or tag someone with @"})=>{const[n,i]=S.useState(""),[o,c]=S.useState(!1),[d,p]=S.useState(!1),[g,y]=S.useState(""),x=async w=>{if(w.preventDefault(),!n.trim()||d&&!g.trim())return;c(!0);let A;d?A={authorName:`${g} (Guest)`,authorAvatarUrl:`https://i.pravatar.cc/150?u=${g}`,content:n}:A={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100",content:n};try{await s(A),i(""),y("")}catch(D){console.error("Failed to add comment:",D)}finally{c(!1)}};return u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700/50",children:u.jsxs("form",{onSubmit:x,className:"flex items-start gap-3",children:[u.jsx("img",{src:d?"https://i.pravatar.cc/150?u=guest":"https://picsum.photos/id/1015/100/100",alt:"Your avatar",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsx("textarea",{value:n,onChange:w=>i(w.target.value),placeholder:e,required:!0,rows:2,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400 text-sm"}),d&&u.jsx("div",{className:"flex gap-3",children:u.jsx("input",{type:"text",value:g,onChange:w=>y(w.target.value),required:!0,placeholder:"Your Name",className:"flex-1 bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-sm focus:ring-brand-accent focus:border-brand-accent"})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{id:"guest-checkbox",type:"checkbox",checked:d,onChange:w=>p(w.target.checked),className:"h-4 w-4 rounded border-gray-600 bg-gray-700 text-brand-accent focus:ring-brand-accent"}),u.jsx("label",{htmlFor:"guest-checkbox",className:"ml-2 text-xs text-gray-400",children:"Comment as guest"})]}),u.jsx(qe,{type:"submit",size:"sm",isLoading:o,children:"Post Comment"})]})]})]})})},pa=({comments:s,onAddComment:e,placeholder:n,startExpanded:i=!1})=>{const[o,c]=S.useState(i);return!o&&!i?u.jsxs("button",{onClick:()=>c(!0),className:"text-sm font-semibold text-gray-400 hover:text-white flex items-center gap-2",children:[u.jsx(pe,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:["View ",s.length," Comment",s.length!==1&&"s"]})]}):u.jsxs("div",{className:"w-full",children:[s.length>0&&u.jsx("div",{className:"space-y-4",children:s.map(d=>u.jsx(P1,{comment:d},d.id))}),u.jsx(z1,{onAddComment:e,placeholder:n})]})};var $v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},B1=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],d=s[n++],p=s[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=s[n++],d=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Mx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],d=o+1<s.length,p=d?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,x=c>>2,w=(c&3)<<4|p>>4;let A=(p&15)<<2|y>>6,D=y&63;g||(D=64,d||(A=64)),i.push(n[x],n[w],n[A],n[D])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Dx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):B1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||p==null||y==null||w==null)throw new q1;const A=c<<2|p>>4;if(i.push(A),y!==64){const D=p<<4&240|y>>2;if(i.push(D),w!==64){const k=y<<6&192|w;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class q1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F1=function(s){const e=Dx(s);return Mx.encodeByteArray(e,!0)},_h=function(s){return F1(s).replace(/\./g,"")},Ox=function(s){try{return Mx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=()=>H1().__FIREBASE_DEFAULTS__,$1=()=>{if(typeof process>"u"||typeof $v>"u")return;const s=$v.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},K1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Ox(s[1]);return e&&JSON.parse(e)},Uh=()=>{try{return G1()||$1()||K1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},kx=s=>{var e,n;return(n=(e=Uh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},Lx=s=>{const e=kx(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Vx=()=>{var s;return(s=Uh())===null||s===void 0?void 0:s.config},Ux=s=>{var e;return(e=Uh())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[_h(JSON.stringify(n)),_h(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function X1(){var s;const e=(s=Uh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Z1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eA(){const s=cn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function tA(){return!X1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nA(){try{return typeof indexedDB=="object"}catch{return!1}}function sA(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="FirebaseError";class ks extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=rA,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hc.prototype.create)}}class hc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?iA(c,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new ks(o,p,i)}}function iA(s,e){return s.replace(aA,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const aA=/\{\$([^}]+)}/g;function oA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function xh(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=s[o],d=e[o];if(Kv(c)&&Kv(d)){if(!xh(c,d))return!1}else if(c!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Kv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function lA(s,e){const n=new cA(s,e);return n.subscribe.bind(n)}class cA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");uA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=gm),o.error===void 0&&(o.error=gm),o.complete===void 0&&(o.complete=gm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uA(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function gm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(s){return s&&s._delegate?s._delegate:s}class _i{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Y1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fA(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);i===p&&d.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dA(s){return s===na?void 0:s}function fA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ze||(ze={}));const pA={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},gA=ze.INFO,yA={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},vA=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=yA[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ap{constructor(e){this.name=e,this._logLevel=gA,this._logHandler=vA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const _A=(s,e)=>e.some(n=>s instanceof n);let Yv,Qv;function xA(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bA(){return Qv||(Qv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zx=new WeakMap,Im=new WeakMap,Bx=new WeakMap,ym=new WeakMap,op=new WeakMap;function wA(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(gi(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&zx.set(n,s)}).catch(()=>{}),op.set(e,s),e}function EA(s){if(Im.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});Im.set(s,e)}let Dm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Im.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Bx.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gi(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function TA(s){Dm=s(Dm)}function SA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(vm(this),e,...n);return Bx.set(i,e.sort?e.sort():[e]),gi(i)}:bA().includes(s)?function(...e){return s.apply(vm(this),e),gi(zx.get(this))}:function(...e){return gi(s.apply(vm(this),e))}}function AA(s){return typeof s=="function"?SA(s):(s instanceof IDBTransaction&&EA(s),_A(s,xA())?new Proxy(s,Dm):s)}function gi(s){if(s instanceof IDBRequest)return wA(s);if(ym.has(s))return ym.get(s);const e=AA(s);return e!==s&&(ym.set(s,e),op.set(e,s)),e}const vm=s=>op.get(s);function NA(s,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const d=indexedDB.open(s,e),p=gi(d);return i&&d.addEventListener("upgradeneeded",g=>{i(gi(d.result),g.oldVersion,g.newVersion,gi(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const RA=["get","getKey","getAll","getAllKeys","count"],CA=["put","add","delete","clear"],_m=new Map;function Xv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(_m.get(e))return _m.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=CA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||RA.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return _m.set(e,c),c}TA(s=>({...s,get:(e,n,i)=>Xv(e,n)||s.get(e,n,i),has:(e,n)=>!!Xv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function IA(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mm="@firebase/app",Wv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new ap("@firebase/app"),DA="@firebase/app-compat",MA="@firebase/analytics-compat",OA="@firebase/analytics",kA="@firebase/app-check-compat",LA="@firebase/app-check",VA="@firebase/auth",UA="@firebase/auth-compat",PA="@firebase/database",zA="@firebase/data-connect",BA="@firebase/database-compat",qA="@firebase/functions",FA="@firebase/functions-compat",HA="@firebase/installations",GA="@firebase/installations-compat",$A="@firebase/messaging",KA="@firebase/messaging-compat",YA="@firebase/performance",QA="@firebase/performance-compat",XA="@firebase/remote-config",WA="@firebase/remote-config-compat",JA="@firebase/storage",ZA="@firebase/storage-compat",eN="@firebase/firestore",tN="@firebase/vertexai-preview",nN="@firebase/firestore-compat",sN="firebase",rN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="[DEFAULT]",iN={[Mm]:"fire-core",[DA]:"fire-core-compat",[OA]:"fire-analytics",[MA]:"fire-analytics-compat",[LA]:"fire-app-check",[kA]:"fire-app-check-compat",[VA]:"fire-auth",[UA]:"fire-auth-compat",[PA]:"fire-rtdb",[zA]:"fire-data-connect",[BA]:"fire-rtdb-compat",[qA]:"fire-fn",[FA]:"fire-fn-compat",[HA]:"fire-iid",[GA]:"fire-iid-compat",[$A]:"fire-fcm",[KA]:"fire-fcm-compat",[YA]:"fire-perf",[QA]:"fire-perf-compat",[XA]:"fire-rc",[WA]:"fire-rc-compat",[JA]:"fire-gcs",[ZA]:"fire-gcs-compat",[eN]:"fire-fst",[nN]:"fire-fst-compat",[tN]:"fire-vertex","fire-js":"fire-js",[sN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,aN=new Map,km=new Map;function Jv(s,e){try{s.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function la(s){const e=s.name;if(km.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;km.set(e,s);for(const n of bh.values())Jv(n,s);for(const n of aN.values())Jv(n,s);return!0}function Ph(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function mi(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new hc("app","Firebase",oN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=rN;function qx(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Om,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw yi.create("bad-app-name",{appName:String(o)});if(n||(n=Vx()),!n)throw yi.create("no-options");const c=bh.get(o);if(c){if(xh(n,c.options)&&xh(i,c.config))return c;throw yi.create("duplicate-app",{appName:o})}const d=new mA(o);for(const g of km.values())d.addComponent(g);const p=new lN(n,i,d);return bh.set(o,p),p}function lp(s=Om){const e=bh.get(s);if(!e&&s===Om&&Vx())return qx();if(!e)throw yi.create("no-app",{appName:s});return e}function As(s,e,n){var i;let o=(i=iN[s])!==null&&i!==void 0?i:s;n&&(o+=`-${n}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const p=[`Unable to register library "${o}" with version "${e}":`];c&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(p.join(" "));return}la(new _i(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="firebase-heartbeat-database",uN=1,Jl="firebase-heartbeat-store";let xm=null;function Fx(){return xm||(xm=NA(cN,uN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Jl)}catch(n){console.warn(n)}}}}).catch(s=>{throw yi.create("idb-open",{originalErrorMessage:s.message})})),xm}async function hN(s){try{const n=(await Fx()).transaction(Jl),i=await n.objectStore(Jl).get(Hx(s));return await n.done,i}catch(e){if(e instanceof ks)pr.warn(e.message);else{const n=yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function Zv(s,e){try{const i=(await Fx()).transaction(Jl,"readwrite");await i.objectStore(Jl).put(e,Hx(s)),await i.done}catch(n){if(n instanceof ks)pr.warn(n.message);else{const i=yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(i.message)}}}function Hx(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=1024,fN=720*60*60*1e3;class mN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=e_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const p=new Date(d.date).valueOf();return Date.now()-p<=fN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){pr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=e_(),{heartbeatsToSend:i,unsentEntries:o}=pN(this._heartbeatsCache.heartbeats),c=_h(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return pr.warn(n),""}}}function e_(){return new Date().toISOString().substring(0,10)}function pN(s,e=dN){const n=[];let i=s.slice();for(const o of s){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),t_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),t_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class gN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nA()?sA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function t_(s){return _h(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(s){la(new _i("platform-logger",e=>new jA(e),"PRIVATE")),la(new _i("heartbeat",e=>new mN(e),"PRIVATE")),As(Mm,Wv,s),As(Mm,Wv,"esm2017"),As("fire-js","")}yN("");var vN="firebase",_N="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(vN,_N,"app");function cp(s,e){var n={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(n[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(n[i[o]]=s[i[o]]);return n}function Gx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xN=Gx,$x=new hc("auth","Firebase",Gx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new ap("@firebase/auth");function bN(s,...e){wh.logLevel<=ze.WARN&&wh.warn(`Auth (${ga}): ${s}`,...e)}function lh(s,...e){wh.logLevel<=ze.ERROR&&wh.error(`Auth (${ga}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(s,...e){throw up(s,...e)}function Ns(s,...e){return up(s,...e)}function Kx(s,e,n){const i=Object.assign(Object.assign({},xN()),{[e]:n});return new hc("auth","Firebase",i).create(e,{appName:s.name})}function ia(s){return Kx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function up(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return $x.create(s,...e)}function Se(s,e,...n){if(!s)throw up(e,...n)}function cr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw lh(e),new Error(e)}function yr(s,e){s||cr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function wN(){return n_()==="http:"||n_()==="https:"}function n_(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wN()||J1()||"connection"in navigator)?navigator.onLine:!0}function TN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,yr(n>e,"Short delay should be less than long delay!"),this.isMobile=Q1()||Z1()}get(){return EN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(s,e){yr(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new fc(3e4,6e4);function dp(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function Ro(s,e,n,i,o={}){return Qx(s,o,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const p=dc(Object.assign({key:s.config.apiKey},d)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y=Object.assign({method:e,headers:g},c);return W1()||(y.referrerPolicy="no-referrer"),Yx.fetch()(Xx(s,s.config.apiHost,n,p),y)})}async function Qx(s,e,n){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},SN),e);try{const o=new RN(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Zu(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zu(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Zu(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw Zu(s,"user-disabled",d);const x=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Kx(s,x,y);gr(s,x)}}catch(o){if(o instanceof ks)throw o;gr(s,"network-request-failed",{message:String(o)})}}async function NN(s,e,n,i,o={}){const c=await Ro(s,e,n,i,o);return"mfaPendingCredential"in c&&gr(s,"multi-factor-auth-required",{_serverResponse:c}),c}function Xx(s,e,n,i){const o=`${e}${n}?${i}`;return s.config.emulator?hp(s.config,o):`${s.config.apiScheme}://${o}`}class RN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ns(this.auth,"network-request-failed")),AN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zu(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ns(s,e,i);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(s,e){return Ro(s,"POST","/v1/accounts:delete",e)}async function Wx(s,e){return Ro(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jN(s,e=!1){const n=Wt(s),i=await n.getIdToken(e),o=fp(i);Se(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:Gl(bm(o.auth_time)),issuedAtTime:Gl(bm(o.iat)),expirationTime:Gl(bm(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function bm(s){return Number(s)*1e3}function fp(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return lh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Ox(n);return o?JSON.parse(o):(lh("Failed to decode base64 JWT payload"),null)}catch(o){return lh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function s_(s){const e=fp(s);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ks&&IN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function IN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(s){var e;const n=s.auth,i=await s.getIdToken(),o=await Zl(s,Wx(n,{idToken:i}));Se(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];s._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Jx(c.providerUserInfo):[],p=ON(s.providerData,d),g=s.isAnonymous,y=!(s.email&&c.passwordHash)&&!(p!=null&&p.length),x=g?y:!1,w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new Vm(c.createdAt,c.lastLoginAt),isAnonymous:x};Object.assign(s,w)}async function MN(s){const e=Wt(s);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ON(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Jx(s){return s.map(e=>{var{providerId:n}=e,i=cp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(s,e){const n=await Qx(s,{},async()=>{const i=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,d=Xx(s,o,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();return p["Content-Type"]="application/x-www-form-urlencoded",Yx.fetch()(d,{method:"POST",headers:p,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LN(s,e){return Ro(s,"POST","/v2/accounts:revokeToken",dp(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=s_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await kN(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,d=new mo;return i&&(Se(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Se(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Se(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mo,this.toJSON())}_performRefresh(){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(s,e){Se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ur{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,c=cp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Vm(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jN(this,e)}reload(){return MN(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Eh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mi(this.auth.app))return Promise.reject(ia(this.auth));const e=await this.getIdToken();return await Zl(this,CN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,c,d,p,g,y,x;const w=(i=n.displayName)!==null&&i!==void 0?i:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,D=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,k=(d=n.photoURL)!==null&&d!==void 0?d:void 0,q=(p=n.tenantId)!==null&&p!==void 0?p:void 0,P=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,Q=(y=n.createdAt)!==null&&y!==void 0?y:void 0,te=(x=n.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:J,emailVerified:se,isAnonymous:ce,providerData:ue,stsTokenManager:C}=n;Se(J&&C,e,"internal-error");const N=mo.fromJSON(this.name,C);Se(typeof J=="string",e,"internal-error"),li(w,e.name),li(A,e.name),Se(typeof se=="boolean",e,"internal-error"),Se(typeof ce=="boolean",e,"internal-error"),li(D,e.name),li(k,e.name),li(q,e.name),li(P,e.name),li(Q,e.name),li(te,e.name);const R=new ur({uid:J,auth:e,email:A,emailVerified:se,displayName:w,isAnonymous:ce,photoURL:k,phoneNumber:D,tenantId:q,stsTokenManager:N,createdAt:Q,lastLoginAt:te});return ue&&Array.isArray(ue)&&(R.providerData=ue.map(I=>Object.assign({},I))),P&&(R._redirectEventId=P),R}static async _fromIdTokenResponse(e,n,i=!1){const o=new mo;o.updateFromServerResponse(n);const c=new ur({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Eh(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Se(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Jx(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new mo;p.updateFromIdToken(i);const g=new ur({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Vm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=new Map;function hr(s){yr(s instanceof Function,"Expected a class definition");let e=r_.get(s);return e?(yr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,r_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Zx.type="NONE";const i_=Zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(s,e,n){return`firebase:${s}:${e}:${n}`}class po{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=ch(this.userKey,o.apiKey,c),this.fullPersistenceKey=ch("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ur._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new po(hr(i_),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||hr(i_);const d=ch(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(d);if(x){const w=ur._fromJSON(e,x);y!==c&&(p=w),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new po(c,e,i):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new po(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ib(e))return"Blackberry";if(ab(e))return"Webos";if(tb(e))return"Safari";if((e.includes("chrome/")||nb(e))&&!e.includes("edge/"))return"Chrome";if(rb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function eb(s=cn()){return/firefox\//i.test(s)}function tb(s=cn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nb(s=cn()){return/crios\//i.test(s)}function sb(s=cn()){return/iemobile/i.test(s)}function rb(s=cn()){return/android/i.test(s)}function ib(s=cn()){return/blackberry/i.test(s)}function ab(s=cn()){return/webos/i.test(s)}function mp(s=cn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function VN(s=cn()){var e;return mp(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UN(){return eA()&&document.documentMode===10}function ob(s=cn()){return mp(s)||rb(s)||ab(s)||ib(s)||/windows phone/i.test(s)||sb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(s,e=[]){let n;switch(s){case"Browser":n=a_(cn());break;case"Worker":n=`${a_(cn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ga}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((d,p)=>{try{const g=e(c);d(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(s,e={}){return Ro(s,"GET","/v2/passwordPolicy",dp(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=6;class qN{constructor(e){var n,i,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:BN,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,c,d,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o_(this),this.idTokenSubscription=new o_(this),this.beforeStateQueue=new PN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$x,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hr(n)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await po.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wx(this,{idToken:e}),i=await ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mi(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===p)&&(g!=null&&g.user)&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mi(this.app))return Promise.reject(ia(this));const n=e?Wt(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mi(this.app)?Promise.reject(ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mi(this.app)?Promise.reject(ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zN(this),n=new qN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await LN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hr(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function pp(s){return Wt(s)}class o_{constructor(e){this.auth=e,this.observer=null,this.addObserver=lA(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HN(s){gp=s}function GN(s){return gp.loadJS(s)}function $N(){return gp.gapiScript}function KN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(s,e){const n=Ph(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(xh(c,e??{}))return o;gr(o,"already-initialized")}return n.initialize({options:e})}function QN(s,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(hr);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function cb(s,e,n){const i=pp(s);Se(i._canInitEmulator,i,"emulator-config-failed"),Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!!(n!=null&&n.disableWarnings),c=ub(e),{host:d,port:p}=XN(e),g=p===null?"":`:${p}`;i.config.emulator={url:`${c}//${d}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||WN()}function ub(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function XN(s){const e=ub(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:l_(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:l_(d)}}}function l_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function WN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,n){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(s,e){return NN(s,"POST","/v1/accounts:signInWithIdp",dp(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="http://localhost";class ca extends hb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,c=cp(n,["providerId","signInMethod"]);if(!i||!o)return null;const d=new ca(i,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return go(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,go(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,go(e,n)}buildRequest(){const e={requestUri:JN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends db{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends mc{constructor(){super("facebook.com")}static credential(e){return ca._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ca._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ui.credential(n,i)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends mc{constructor(){super("github.com")}static credential(e){return ca._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends mc{constructor(){super("twitter.com")}static credential(e,n){return ca._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return di.credential(n,i)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await ur._fromIdTokenResponse(e,i,o),d=c_(i);return new vo({user:c,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=c_(i);return new vo({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function c_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends ks{constructor(e,n,i,o){var c;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Th.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Th(e,n,i,o)}}function fb(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Th._fromErrorAndOperation(s,c,e,i):c})}async function ZN(s,e,n=!1){const i=await Zl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return vo._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(s,e,n=!1){const{auth:i}=s;if(mi(i.app))return Promise.reject(ia(i));const o="reauthenticate";try{const c=await Zl(s,fb(i,o,e,s),n);Se(c.idToken,i,"internal-error");const d=fp(c.idToken);Se(d,i,"internal-error");const{sub:p}=d;return Se(s.uid===p,i,"user-mismatch"),vo._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&gr(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(s,e,n=!1){if(mi(s.app))return Promise.reject(ia(s));const i="signIn",o=await fb(s,i,e),c=await vo._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(c.user),c}function n2(s,e,n,i){return Wt(s).onIdTokenChanged(e,n,i)}function s2(s,e,n){return Wt(s).beforeAuthStateChanged(e,n)}function mb(s,e,n,i){return Wt(s).onAuthStateChanged(e,n,i)}const Sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=1e3,i2=10;class gb extends pb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ob(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);UN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,i2):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},r2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gb.type="LOCAL";const a2=gb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends pb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yb.type="SESSION";const vb=yb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new zh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await o2(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=yp("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(w){const A=w;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(A.data.response);break;default:clearTimeout(x),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(){return window}function c2(s){Rs().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(){return typeof Rs().WorkerGlobalScope<"u"&&typeof Rs().importScripts=="function"}async function u2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h2(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function d2(){return _b()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="firebaseLocalStorageDb",f2=1,Ah="firebaseLocalStorage",bb="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bh(s,e){return s.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function m2(){const s=indexedDB.deleteDatabase(xb);return new pc(s).toPromise()}function Um(){const s=indexedDB.open(xb,f2);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Ah,{keyPath:bb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Ah)?e(i):(i.close(),await m2(),e(await Um()))})})}async function u_(s,e,n){const i=Bh(s,!0).put({[bb]:e,value:n});return new pc(i).toPromise()}async function p2(s,e){const n=Bh(s,!1).get(e),i=await new pc(n).toPromise();return i===void 0?null:i.value}function h_(s,e){const n=Bh(s,!0).delete(e);return new pc(n).toPromise()}const g2=800,y2=3;class wb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>y2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _b()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zh._getInstance(d2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await u2(),!this.activeServiceWorker)return;this.sender=new l2(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await u_(e,Sh,"1"),await h_(e,Sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>u_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>p2(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>h_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Bh(o,!1).getAll();return new pc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wb.type="LOCAL";const v2=wb;new fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(s,e){return e?hr(e):(Se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends hb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return go(e,this._buildIdpRequest())}_linkToIdToken(e,n){return go(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return go(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function x2(s){return t2(s.auth,new vp(s),s.bypassAuthState)}function b2(s){const{auth:e,user:n}=s;return Se(n,e,"internal-error"),e2(n,new vp(s),s.bypassAuthState)}async function w2(s){const{auth:e,user:n}=s;return Se(n,e,"internal-error"),ZN(n,new vp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x2;case"linkViaPopup":case"linkViaRedirect":return w2;case"reauthViaPopup":case"reauthViaRedirect":return b2;default:gr(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new fc(2e3,1e4);class fo extends Eb{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,fo.currentPopupAction&&fo.currentPopupAction.cancel(),fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){yr(this.filter.length===1,"Popup operations only handle one event");const e=yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,E2.get())};e()}}fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="pendingRedirect",uh=new Map;class S2 extends Eb{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=uh.get(this.auth._key());if(!e){try{const i=await A2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}uh.set(this.auth._key(),e)}return this.bypassAuthState||uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A2(s,e){const n=C2(e),i=R2(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function N2(s,e){uh.set(s._key(),e)}function R2(s){return hr(s._redirectPersistence)}function C2(s){return ch(T2,s.config.apiKey,s.name)}async function j2(s,e,n=!1){if(mi(s.app))return Promise.reject(ia(s));const i=pp(s),o=_2(i,e),d=await new S2(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=600*1e3;class D2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!M2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Tb(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ns(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=I2&&this.cachedEventUids.clear(),this.cachedEventUids.has(d_(e))}saveEventToCache(e){this.cachedEventUids.add(d_(e)),this.lastProcessedEventTime=Date.now()}}function d_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Tb({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function M2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(s,e={}){return Ro(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L2=/^https?/;async function V2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await O2(s);for(const n of e)try{if(U2(n))return}catch{}gr(s,"unauthorized-domain")}function U2(s){const e=Lm(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!L2.test(n))return!1;if(k2.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=new fc(3e4,6e4);function f_(){const s=Rs().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function z2(s){return new Promise((e,n)=>{var i,o,c;function d(){f_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f_(),n(Ns(s,"network-request-failed"))},timeout:P2.get()})}if(!((o=(i=Rs().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Rs().gapi)===null||c===void 0)&&c.load)d();else{const p=KN("iframefcb");return Rs()[p]=()=>{gapi.load?d():n(Ns(s,"network-request-failed"))},GN(`${$N()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw hh=null,e})}let hh=null;function B2(s){return hh=hh||z2(s),hh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new fc(5e3,15e3),F2="__/auth/iframe",H2="emulator/auth/iframe",G2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K2(s){const e=s.config;Se(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?hp(e,H2):`https://${s.config.authDomain}/${F2}`,i={apiKey:e.apiKey,appName:s.name,v:ga},o=$2.get(s.config.apiHost);o&&(i.eid=o);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${dc(i).slice(1)}`}async function Y2(s){const e=await B2(s),n=Rs().gapi;return Se(n,s,"internal-error"),e.open({where:document.body,url:K2(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G2,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const d=Ns(s,"network-request-failed"),p=Rs().setTimeout(()=>{c(d)},q2.get());function g(){Rs().clearTimeout(p),o(i)}i.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X2=500,W2=600,J2="_blank",Z2="http://localhost";class m_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eR(s,e,n,i=X2,o=W2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g=Object.assign(Object.assign({},Q2),{width:i.toString(),height:o.toString(),top:c,left:d}),y=cn().toLowerCase();n&&(p=nb(y)?J2:n),eb(y)&&(e=e||Z2,g.scrollbars="yes");const x=Object.entries(g).reduce((A,[D,k])=>`${A}${D}=${k},`,"");if(VN(y)&&p!=="_self")return tR(e||"",p),new m_(null);const w=window.open(e||"",p,x);Se(w,s,"popup-blocked");try{w.focus()}catch{}return new m_(w)}function tR(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="__/auth/handler",sR="emulator/auth/handler",rR=encodeURIComponent("fac");async function p_(s,e,n,i,o,c){Se(s.config.authDomain,s,"auth-domain-config-required"),Se(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:ga,eventId:o};if(e instanceof db){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",oA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,w]of Object.entries({}))d[x]=w}if(e instanceof mc){const x=e.getScopes().filter(w=>w!=="");x.length>0&&(d.scopes=x.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await s._getAppCheckToken(),y=g?`#${rR}=${encodeURIComponent(g)}`:"";return`${iR(s)}?${dc(p).slice(1)}${y}`}function iR({config:s}){return s.emulator?hp(s,sR):`https://${s.authDomain}/${nR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vb,this._completeRedirectFn=j2,this._overrideRedirectResult=N2}async _openPopup(e,n,i,o){var c;yr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await p_(e,n,i,Lm(),o);return eR(e,d,yp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await p_(e,n,i,Lm(),o);return c2(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(yr(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Y2(e),i=new D2(e);return n.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wm,{type:wm},o=>{var c;const d=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[wm];d!==void 0&&n(!!d),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=V2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ob()||tb()||mp()}}const oR=aR;var g_="@firebase/auth",y_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uR(s){la(new _i("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;Se(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lb(s)},y=new FN(i,o,c,g);return QN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),la(new _i("auth-internal",e=>{const n=pp(e.getProvider("auth").getImmediate());return(i=>new lR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),As(g_,y_,cR(s)),As(g_,y_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=300,dR=Ux("authIdTokenMaxAge")||hR;let v_=null;const fR=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>dR)return;const o=n==null?void 0:n.token;v_!==o&&(v_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function mR(s=lp()){const e=Ph(s,"auth");if(e.isInitialized())return e.getImmediate();const n=YN(s,{popupRedirectResolver:oR,persistence:[v2,a2,vb]}),i=Ux("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=fR(c.toString());s2(n,d,()=>d(n.currentUser)),n2(n,p=>d(p))}}const o=kx("auth");return o&&cb(n,`http://${o}`),n}function pR(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}HN({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const c=Ns("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",pR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uR("Browser");var __=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aa,Sb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,N){function R(){}R.prototype=N.prototype,C.D=N.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(I,V,z){for(var j=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)j[Ye-2]=arguments[Ye];return N.prototype[V].apply(I,j)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,N,R){R||(R=0);var I=Array(16);if(typeof N=="string")for(var V=0;16>V;++V)I[V]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(V=0;16>V;++V)I[V]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=C.g[0],R=C.g[1],V=C.g[2];var z=C.g[3],j=N+(z^R&(V^z))+I[0]+3614090360&4294967295;N=R+(j<<7&4294967295|j>>>25),j=z+(V^N&(R^V))+I[1]+3905402710&4294967295,z=N+(j<<12&4294967295|j>>>20),j=V+(R^z&(N^R))+I[2]+606105819&4294967295,V=z+(j<<17&4294967295|j>>>15),j=R+(N^V&(z^N))+I[3]+3250441966&4294967295,R=V+(j<<22&4294967295|j>>>10),j=N+(z^R&(V^z))+I[4]+4118548399&4294967295,N=R+(j<<7&4294967295|j>>>25),j=z+(V^N&(R^V))+I[5]+1200080426&4294967295,z=N+(j<<12&4294967295|j>>>20),j=V+(R^z&(N^R))+I[6]+2821735955&4294967295,V=z+(j<<17&4294967295|j>>>15),j=R+(N^V&(z^N))+I[7]+4249261313&4294967295,R=V+(j<<22&4294967295|j>>>10),j=N+(z^R&(V^z))+I[8]+1770035416&4294967295,N=R+(j<<7&4294967295|j>>>25),j=z+(V^N&(R^V))+I[9]+2336552879&4294967295,z=N+(j<<12&4294967295|j>>>20),j=V+(R^z&(N^R))+I[10]+4294925233&4294967295,V=z+(j<<17&4294967295|j>>>15),j=R+(N^V&(z^N))+I[11]+2304563134&4294967295,R=V+(j<<22&4294967295|j>>>10),j=N+(z^R&(V^z))+I[12]+1804603682&4294967295,N=R+(j<<7&4294967295|j>>>25),j=z+(V^N&(R^V))+I[13]+4254626195&4294967295,z=N+(j<<12&4294967295|j>>>20),j=V+(R^z&(N^R))+I[14]+2792965006&4294967295,V=z+(j<<17&4294967295|j>>>15),j=R+(N^V&(z^N))+I[15]+1236535329&4294967295,R=V+(j<<22&4294967295|j>>>10),j=N+(V^z&(R^V))+I[1]+4129170786&4294967295,N=R+(j<<5&4294967295|j>>>27),j=z+(R^V&(N^R))+I[6]+3225465664&4294967295,z=N+(j<<9&4294967295|j>>>23),j=V+(N^R&(z^N))+I[11]+643717713&4294967295,V=z+(j<<14&4294967295|j>>>18),j=R+(z^N&(V^z))+I[0]+3921069994&4294967295,R=V+(j<<20&4294967295|j>>>12),j=N+(V^z&(R^V))+I[5]+3593408605&4294967295,N=R+(j<<5&4294967295|j>>>27),j=z+(R^V&(N^R))+I[10]+38016083&4294967295,z=N+(j<<9&4294967295|j>>>23),j=V+(N^R&(z^N))+I[15]+3634488961&4294967295,V=z+(j<<14&4294967295|j>>>18),j=R+(z^N&(V^z))+I[4]+3889429448&4294967295,R=V+(j<<20&4294967295|j>>>12),j=N+(V^z&(R^V))+I[9]+568446438&4294967295,N=R+(j<<5&4294967295|j>>>27),j=z+(R^V&(N^R))+I[14]+3275163606&4294967295,z=N+(j<<9&4294967295|j>>>23),j=V+(N^R&(z^N))+I[3]+4107603335&4294967295,V=z+(j<<14&4294967295|j>>>18),j=R+(z^N&(V^z))+I[8]+1163531501&4294967295,R=V+(j<<20&4294967295|j>>>12),j=N+(V^z&(R^V))+I[13]+2850285829&4294967295,N=R+(j<<5&4294967295|j>>>27),j=z+(R^V&(N^R))+I[2]+4243563512&4294967295,z=N+(j<<9&4294967295|j>>>23),j=V+(N^R&(z^N))+I[7]+1735328473&4294967295,V=z+(j<<14&4294967295|j>>>18),j=R+(z^N&(V^z))+I[12]+2368359562&4294967295,R=V+(j<<20&4294967295|j>>>12),j=N+(R^V^z)+I[5]+4294588738&4294967295,N=R+(j<<4&4294967295|j>>>28),j=z+(N^R^V)+I[8]+2272392833&4294967295,z=N+(j<<11&4294967295|j>>>21),j=V+(z^N^R)+I[11]+1839030562&4294967295,V=z+(j<<16&4294967295|j>>>16),j=R+(V^z^N)+I[14]+4259657740&4294967295,R=V+(j<<23&4294967295|j>>>9),j=N+(R^V^z)+I[1]+2763975236&4294967295,N=R+(j<<4&4294967295|j>>>28),j=z+(N^R^V)+I[4]+1272893353&4294967295,z=N+(j<<11&4294967295|j>>>21),j=V+(z^N^R)+I[7]+4139469664&4294967295,V=z+(j<<16&4294967295|j>>>16),j=R+(V^z^N)+I[10]+3200236656&4294967295,R=V+(j<<23&4294967295|j>>>9),j=N+(R^V^z)+I[13]+681279174&4294967295,N=R+(j<<4&4294967295|j>>>28),j=z+(N^R^V)+I[0]+3936430074&4294967295,z=N+(j<<11&4294967295|j>>>21),j=V+(z^N^R)+I[3]+3572445317&4294967295,V=z+(j<<16&4294967295|j>>>16),j=R+(V^z^N)+I[6]+76029189&4294967295,R=V+(j<<23&4294967295|j>>>9),j=N+(R^V^z)+I[9]+3654602809&4294967295,N=R+(j<<4&4294967295|j>>>28),j=z+(N^R^V)+I[12]+3873151461&4294967295,z=N+(j<<11&4294967295|j>>>21),j=V+(z^N^R)+I[15]+530742520&4294967295,V=z+(j<<16&4294967295|j>>>16),j=R+(V^z^N)+I[2]+3299628645&4294967295,R=V+(j<<23&4294967295|j>>>9),j=N+(V^(R|~z))+I[0]+4096336452&4294967295,N=R+(j<<6&4294967295|j>>>26),j=z+(R^(N|~V))+I[7]+1126891415&4294967295,z=N+(j<<10&4294967295|j>>>22),j=V+(N^(z|~R))+I[14]+2878612391&4294967295,V=z+(j<<15&4294967295|j>>>17),j=R+(z^(V|~N))+I[5]+4237533241&4294967295,R=V+(j<<21&4294967295|j>>>11),j=N+(V^(R|~z))+I[12]+1700485571&4294967295,N=R+(j<<6&4294967295|j>>>26),j=z+(R^(N|~V))+I[3]+2399980690&4294967295,z=N+(j<<10&4294967295|j>>>22),j=V+(N^(z|~R))+I[10]+4293915773&4294967295,V=z+(j<<15&4294967295|j>>>17),j=R+(z^(V|~N))+I[1]+2240044497&4294967295,R=V+(j<<21&4294967295|j>>>11),j=N+(V^(R|~z))+I[8]+1873313359&4294967295,N=R+(j<<6&4294967295|j>>>26),j=z+(R^(N|~V))+I[15]+4264355552&4294967295,z=N+(j<<10&4294967295|j>>>22),j=V+(N^(z|~R))+I[6]+2734768916&4294967295,V=z+(j<<15&4294967295|j>>>17),j=R+(z^(V|~N))+I[13]+1309151649&4294967295,R=V+(j<<21&4294967295|j>>>11),j=N+(V^(R|~z))+I[4]+4149444226&4294967295,N=R+(j<<6&4294967295|j>>>26),j=z+(R^(N|~V))+I[11]+3174756917&4294967295,z=N+(j<<10&4294967295|j>>>22),j=V+(N^(z|~R))+I[2]+718787259&4294967295,V=z+(j<<15&4294967295|j>>>17),j=R+(z^(V|~N))+I[9]+3951481745&4294967295,C.g[0]=C.g[0]+N&4294967295,C.g[1]=C.g[1]+(V+(j<<21&4294967295|j>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+z&4294967295}i.prototype.u=function(C,N){N===void 0&&(N=C.length);for(var R=N-this.blockSize,I=this.B,V=this.h,z=0;z<N;){if(V==0)for(;z<=R;)o(this,C,z),z+=this.blockSize;if(typeof C=="string"){for(;z<N;)if(I[V++]=C.charCodeAt(z++),V==this.blockSize){o(this,I),V=0;break}}else for(;z<N;)if(I[V++]=C[z++],V==this.blockSize){o(this,I),V=0;break}}this.h=V,this.o+=N},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var N=1;N<C.length-8;++N)C[N]=0;var R=8*this.o;for(N=C.length-8;N<C.length;++N)C[N]=R&255,R/=256;for(this.u(C),C=Array(16),N=R=0;4>N;++N)for(var I=0;32>I;I+=8)C[R++]=this.g[N]>>>I&255;return C};function c(C,N){var R=p;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=N(C)}function d(C,N){this.h=N;for(var R=[],I=!0,V=C.length-1;0<=V;V--){var z=C[V]|0;I&&z==N||(R[V]=z,I=!1)}this.g=R}var p={};function g(C){return-128<=C&&128>C?c(C,function(N){return new d([N|0],0>N?-1:0)}):new d([C|0],0>C?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return w;if(0>C)return P(y(-C));for(var N=[],R=1,I=0;C>=R;I++)N[I]=C/R|0,R*=4294967296;return new d(N,0)}function x(C,N){if(C.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(C.charAt(0)=="-")return P(x(C.substring(1),N));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(N,8)),I=w,V=0;V<C.length;V+=8){var z=Math.min(8,C.length-V),j=parseInt(C.substring(V,V+z),N);8>z?(z=y(Math.pow(N,z)),I=I.j(z).add(y(j))):(I=I.j(R),I=I.add(y(j)))}return I}var w=g(0),A=g(1),D=g(16777216);s=d.prototype,s.m=function(){if(q(this))return-P(this).m();for(var C=0,N=1,R=0;R<this.g.length;R++){var I=this.i(R);C+=(0<=I?I:4294967296+I)*N,N*=4294967296}return C},s.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(k(this))return"0";if(q(this))return"-"+P(this).toString(C);for(var N=y(Math.pow(C,6)),R=this,I="";;){var V=se(R,N).g;R=Q(R,V.j(N));var z=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=V,k(R))return z+I;for(;6>z.length;)z="0"+z;I=z+I}},s.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function k(C){if(C.h!=0)return!1;for(var N=0;N<C.g.length;N++)if(C.g[N]!=0)return!1;return!0}function q(C){return C.h==-1}s.l=function(C){return C=Q(this,C),q(C)?-1:k(C)?0:1};function P(C){for(var N=C.g.length,R=[],I=0;I<N;I++)R[I]=~C.g[I];return new d(R,~C.h).add(A)}s.abs=function(){return q(this)?P(this):this},s.add=function(C){for(var N=Math.max(this.g.length,C.g.length),R=[],I=0,V=0;V<=N;V++){var z=I+(this.i(V)&65535)+(C.i(V)&65535),j=(z>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);I=j>>>16,z&=65535,j&=65535,R[V]=j<<16|z}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Q(C,N){return C.add(P(N))}s.j=function(C){if(k(this)||k(C))return w;if(q(this))return q(C)?P(this).j(P(C)):P(P(this).j(C));if(q(C))return P(this.j(P(C)));if(0>this.l(D)&&0>C.l(D))return y(this.m()*C.m());for(var N=this.g.length+C.g.length,R=[],I=0;I<2*N;I++)R[I]=0;for(I=0;I<this.g.length;I++)for(var V=0;V<C.g.length;V++){var z=this.i(I)>>>16,j=this.i(I)&65535,Ye=C.i(V)>>>16,me=C.i(V)&65535;R[2*I+2*V]+=j*me,te(R,2*I+2*V),R[2*I+2*V+1]+=z*me,te(R,2*I+2*V+1),R[2*I+2*V+1]+=j*Ye,te(R,2*I+2*V+1),R[2*I+2*V+2]+=z*Ye,te(R,2*I+2*V+2)}for(I=0;I<N;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=N;I<2*N;I++)R[I]=0;return new d(R,0)};function te(C,N){for(;(C[N]&65535)!=C[N];)C[N+1]+=C[N]>>>16,C[N]&=65535,N++}function J(C,N){this.g=C,this.h=N}function se(C,N){if(k(N))throw Error("division by zero");if(k(C))return new J(w,w);if(q(C))return N=se(P(C),N),new J(P(N.g),P(N.h));if(q(N))return N=se(C,P(N)),new J(P(N.g),N.h);if(30<C.g.length){if(q(C)||q(N))throw Error("slowDivide_ only works with positive integers.");for(var R=A,I=N;0>=I.l(C);)R=ce(R),I=ce(I);var V=ue(R,1),z=ue(I,1);for(I=ue(I,2),R=ue(R,2);!k(I);){var j=z.add(I);0>=j.l(C)&&(V=V.add(R),z=j),I=ue(I,1),R=ue(R,1)}return N=Q(C,V.j(N)),new J(V,N)}for(V=w;0<=C.l(N);){for(R=Math.max(1,Math.floor(C.m()/N.m())),I=Math.ceil(Math.log(R)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),z=y(R),j=z.j(N);q(j)||0<j.l(C);)R-=I,z=y(R),j=z.j(N);k(z)&&(z=A),V=V.add(z),C=Q(C,j)}return new J(V,C)}s.A=function(C){return se(this,C).h},s.and=function(C){for(var N=Math.max(this.g.length,C.g.length),R=[],I=0;I<N;I++)R[I]=this.i(I)&C.i(I);return new d(R,this.h&C.h)},s.or=function(C){for(var N=Math.max(this.g.length,C.g.length),R=[],I=0;I<N;I++)R[I]=this.i(I)|C.i(I);return new d(R,this.h|C.h)},s.xor=function(C){for(var N=Math.max(this.g.length,C.g.length),R=[],I=0;I<N;I++)R[I]=this.i(I)^C.i(I);return new d(R,this.h^C.h)};function ce(C){for(var N=C.g.length+1,R=[],I=0;I<N;I++)R[I]=C.i(I)<<1|C.i(I-1)>>>31;return new d(R,C.h)}function ue(C,N){var R=N>>5;N%=32;for(var I=C.g.length-R,V=[],z=0;z<I;z++)V[z]=0<N?C.i(z+R)>>>N|C.i(z+R+1)<<32-N:C.i(z+R);return new d(V,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Sb=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=x,aa=d}).apply(typeof __<"u"?__:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ab,zl,Nb,dh,Pm,Rb,Cb,jb;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,b){return h==Array.prototype||h==Object.prototype||(h[v]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var v=0;v<h.length;++v){var b=h[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=n(this);function o(h,v){if(v)e:{var b=i;h=h.split(".");for(var T=0;T<h.length-1;T++){var F=h[T];if(!(F in b))break e;b=b[F]}h=h[h.length-1],T=b[h],v=v(T),v!=T&&v!=null&&e(b,h,{configurable:!0,writable:!0,value:v})}}function c(h,v){h instanceof String&&(h+="");var b=0,T=!1,F={next:function(){if(!T&&b<h.length){var X=b++;return{value:v(X,h[X]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(h){return h||function(){return c(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function y(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function x(h,v,b){return h.call.apply(h.bind,arguments)}function w(h,v,b){if(!h)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),h.apply(v,F)}}return function(){return h.apply(v,arguments)}}function A(h,v,b){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:w,A.apply(null,arguments)}function D(h,v){var b=Array.prototype.slice.call(arguments,1);return function(){var T=b.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function k(h,v){function b(){}b.prototype=v.prototype,h.aa=v.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(T,F,X){for(var he=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)he[Xe-2]=arguments[Xe];return v.prototype[F].apply(T,he)}}function q(h){const v=h.length;if(0<v){const b=Array(v);for(let T=0;T<v;T++)b[T]=h[T];return b}return[]}function P(h,v){for(let b=1;b<arguments.length;b++){const T=arguments[b];if(g(T)){const F=h.length||0,X=T.length||0;h.length=F+X;for(let he=0;he<X;he++)h[F+he]=T[he]}else h.push(T)}}class Q{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function te(h){return/^[\s\xa0]*$/.test(h)}function J(){var h=p.navigator;return h&&(h=h.userAgent)?h:""}function se(h){return se[" "](h),h}se[" "]=function(){};var ce=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function ue(h,v,b){for(const T in h)v.call(b,h[T],T,h)}function C(h,v){for(const b in h)v.call(void 0,h[b],b,h)}function N(h){const v={};for(const b in h)v[b]=h[b];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(h,v){let b,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(b in T)h[b]=T[b];for(let X=0;X<R.length;X++)b=R[X],Object.prototype.hasOwnProperty.call(T,b)&&(h[b]=T[b])}}function V(h){var v=1;h=h.split(":");const b=[];for(;0<v&&h.length;)b.push(h.shift()),v--;return h.length&&b.push(h.join(":")),b}function z(h){p.setTimeout(()=>{throw h},0)}function j(){var h=xe;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Ye{constructor(){this.h=this.g=null}add(v,b){const T=me.get();T.set(v,b),this.h?this.h.next=T:this.g=T,this.h=T}}var me=new Q(()=>new O,h=>h.reset());class O{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let W,de=!1,xe=new Ye,je=()=>{const h=p.Promise.resolve(void 0);W=()=>{h.then(L)}};var L=()=>{for(var h;h=j();){try{h.h.call(h.g)}catch(b){z(b)}var v=me;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}de=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var le=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};p.addEventListener("test",b,v),p.removeEventListener("test",b,v)}catch{}return h})();function re(h,v){if(H.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(ce){e:{try{se(v.nodeName);var F=!0;break e}catch{}F=!1}F||(v=null)}}else b=="mouseover"?v=h.fromElement:b=="mouseout"&&(v=h.toElement);this.relatedTarget=v,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:fe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&re.aa.h.call(this)}}k(re,H);var fe={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function We(h,v,b,T,F){this.listener=h,this.proxy=null,this.src=v,this.type=b,this.capture=!!T,this.ha=F,this.key=++Fe,this.da=this.fa=!1}function un(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function xn(h){this.src=h,this.g={},this.h=0}xn.prototype.add=function(h,v,b,T,F){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var he=xa(h,v,T,F);return-1<he?(v=h[he],b||(v.fa=!1)):(v=new We(v,this.src,X,!!T,F),v.fa=b,h.push(v)),v};function ds(h,v){var b=v.type;if(b in h.g){var T=h.g[b],F=Array.prototype.indexOf.call(T,v,void 0),X;(X=0<=F)&&Array.prototype.splice.call(T,F,1),X&&(un(v),h.g[b].length==0&&(delete h.g[b],h.h--))}}function xa(h,v,b,T){for(var F=0;F<h.length;++F){var X=h[F];if(!X.da&&X.listener==v&&X.capture==!!b&&X.ha==T)return F}return-1}var ts="closure_lm_"+(1e6*Math.random()|0),Ni={};function ba(h,v,b,T,F){if(Array.isArray(v)){for(var X=0;X<v.length;X++)ba(h,v[X],b,T,F);return null}return b=Sc(b),h&&h[be]?h.K(v,b,y(T)?!!T.capture:!1,F):rd(h,v,b,!1,T,F)}function rd(h,v,b,T,F,X){if(!v)throw Error("Invalid event type");var he=y(F)?!!F.capture:!!F,Xe=Oo(h);if(Xe||(h[ts]=Xe=new xn(h)),b=Xe.add(v,b,T,he,X),b.proxy)return b;if(T=Tc(),b.proxy=T,T.src=h,T.listener=b,h.addEventListener)le||(F=he),F===void 0&&(F=!1),h.addEventListener(v.toString(),T,F);else if(h.attachEvent)h.attachEvent(Ea(v.toString()),T);else if(h.addListener&&h.removeListener)h.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Tc(){function h(b){return v.call(h.src,h.listener,b)}const v=id;return h}function wa(h,v,b,T,F){if(Array.isArray(v))for(var X=0;X<v.length;X++)wa(h,v[X],b,T,F);else T=y(T)?!!T.capture:!!T,b=Sc(b),h&&h[be]?(h=h.i,v=String(v).toString(),v in h.g&&(X=h.g[v],b=xa(X,b,T,F),-1<b&&(un(X[b]),Array.prototype.splice.call(X,b,1),X.length==0&&(delete h.g[v],h.h--)))):h&&(h=Oo(h))&&(v=h.g[v.toString()],h=-1,v&&(h=xa(v,b,T,F)),(b=-1<h?v[h]:null)&&Ri(b))}function Ri(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[be])ds(v.i,h);else{var b=h.type,T=h.proxy;v.removeEventListener?v.removeEventListener(b,T,h.capture):v.detachEvent?v.detachEvent(Ea(b),T):v.addListener&&v.removeListener&&v.removeListener(T),(b=Oo(v))?(ds(b,h),b.h==0&&(b.src=null,v[ts]=null)):un(h)}}}function Ea(h){return h in Ni?Ni[h]:Ni[h]="on"+h}function id(h,v){if(h.da)h=!0;else{v=new re(v,this);var b=h.listener,T=h.ha||h.src;h.fa&&Ri(h),h=b.call(T,v)}return h}function Oo(h){return h=h[ts],h instanceof xn?h:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sc(h){return typeof h=="function"?h:(h[zt]||(h[zt]=function(v){return h.handleEvent(v)}),h[zt])}function Ct(){ee.call(this),this.i=new xn(this),this.M=this,this.F=null}k(Ct,ee),Ct.prototype[be]=!0,Ct.prototype.removeEventListener=function(h,v,b,T){wa(this,h,v,b,T)};function Mt(h,v){var b,T=h.F;if(T)for(b=[];T;T=T.F)b.push(T);if(h=h.M,T=v.type||v,typeof v=="string")v=new H(v,h);else if(v instanceof H)v.target=v.target||h;else{var F=v;v=new H(T,h),I(v,F)}if(F=!0,b)for(var X=b.length-1;0<=X;X--){var he=v.g=b[X];F=Vs(he,T,!0,v)&&F}if(he=v.g=h,F=Vs(he,T,!0,v)&&F,F=Vs(he,T,!1,v)&&F,b)for(X=0;X<b.length;X++)he=v.g=b[X],F=Vs(he,T,!1,v)&&F}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var b=h.g[v],T=0;T<b.length;T++)un(b[T]);delete h.g[v],h.h--}}this.F=null},Ct.prototype.K=function(h,v,b,T){return this.i.add(String(h),v,!1,b,T)},Ct.prototype.L=function(h,v,b,T){return this.i.add(String(h),v,!0,b,T)};function Vs(h,v,b,T){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var F=!0,X=0;X<v.length;++X){var he=v[X];if(he&&!he.da&&he.capture==b){var Xe=he.listener,wt=he.ha||he.src;he.fa&&ds(h.i,he),F=Xe.call(wt,T)!==!1&&F}}return F&&!T.defaultPrevented}function Ac(h,v,b){if(typeof h=="function")b&&(h=A(h,b));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:p.setTimeout(h,v||0)}function ko(h){h.g=Ac(()=>{h.g=null,h.i&&(h.i=!1,ko(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class ad extends ee{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ko(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(h){ee.call(this),this.h=h,this.g={}}k(Ci,ee);var xr=[];function en(h){ue(h.g,function(v,b){this.g.hasOwnProperty(b)&&Ri(v)},h),h.g={}}Ci.prototype.N=function(){Ci.aa.N.call(this),en(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=p.JSON.stringify,hn=p.JSON.parse,od=class{stringify(h){return p.JSON.stringify(h,void 0)}parse(h){return p.JSON.parse(h,void 0)}};function Lo(){}Lo.prototype.h=null;function Nc(h){return h.h||(h.h=h.i())}function ji(){}var fs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function br(){H.call(this,"d")}k(br,H);function ns(){H.call(this,"c")}k(ns,H);var Bn={},wr=null;function Ta(){return wr=wr||new Ct}Bn.La="serverreachability";function Vo(h){H.call(this,Bn.La,h)}k(Vo,H);function Us(h){const v=Ta();Mt(v,new Vo(v))}Bn.STAT_EVENT="statevent";function Er(h,v){H.call(this,Bn.STAT_EVENT,h),this.stat=v}k(Er,H);function Bt(h){const v=Ta();Mt(v,new Er(v,h))}Bn.Ma="timingevent";function Uo(h,v){H.call(this,Bn.Ma,h),this.size=v}k(Uo,H);function Tr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){h()},v)}function Sr(){this.g=!0}Sr.prototype.xa=function(){this.g=!1};function Po(h,v,b,T,F,X){h.info(function(){if(h.g)if(X)for(var he="",Xe=X.split("&"),wt=0;wt<Xe.length;wt++){var Me=Xe[wt].split("=");if(1<Me.length){var kt=Me[0];Me=Me[1];var Lt=kt.split("_");he=2<=Lt.length&&Lt[1]=="type"?he+(kt+"="+Me+"&"):he+(kt+"=redacted&")}}else he=null;else he=X;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+v+`
`+b+`
`+he})}function zo(h,v,b,T,F,X,he){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+v+`
`+b+`
`+X+" "+he})}function Ps(h,v,b,T){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+ms(h,b)+(T?" "+T:"")})}function Rc(h,v){h.info(function(){return"TIMEOUT: "+v})}Sr.prototype.info=function(){};function ms(h,v){if(!h.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var T=b[h];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var X=F[0];if(X!="noop"&&X!="stop"&&X!="close")for(var he=1;he<F.length;he++)F[he]=""}}}}return zn(b)}catch{return v}}var dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ps;function Ar(){}k(Ar,Lo),Ar.prototype.g=function(){return new XMLHttpRequest},Ar.prototype.i=function(){return{}},ps=new Ar;function gs(h,v,b,T){this.j=h,this.i=v,this.l=b,this.R=T||1,this.U=new Ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cc}function Cc(){this.i=null,this.g="",this.h=!1}var Bo={},zs={};function Ii(h,v,b){h.L=1,h.v=Oi(ft(v)),h.m=b,h.P=!0,Bs(h,null)}function Bs(h,v){h.F=Date.now(),ss(h),h.A=ft(h.v);var b=h.A,T=h.R;Array.isArray(T)||(T=[String(T)]),Hs(b.i,"t",T),h.C=0,b=h.j.J,h.h=new Cc,h.g=Gc(h.j,b?v:null,!h.m),0<h.O&&(h.M=new ad(A(h.Y,h,h.g),h.O)),v=h.U,b=h.g,T=h.ca;var F="readystatechange";Array.isArray(F)||(F&&(xr[0]=F.toString()),F=xr);for(var X=0;X<F.length;X++){var he=ba(b,F[X],T||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Us(),Po(h.i,h.u,h.A,h.l,h.R,h.m)}gs.prototype.ca=function(h){h=h.target;const v=this.M;v&&mn(h)==3?v.j():this.Y(h)},gs.prototype.Y=function(h){try{if(h==this.g)e:{const Lt=mn(this.g);var v=this.g.Ba();const Pr=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||Vi(this.g)))){this.J||Lt!=4||v==7||(v==8||0>=Pr?Us(3):Us(2)),Sa(this);var b=this.g.Z();this.X=b;t:if(qs(this)){var T=Vi(this.g);h="";var F=T.length,X=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),Nr(this);var he="";break t}this.h.i=new p.TextDecoder}for(v=0;v<F;v++)this.h.h=!0,h+=this.h.i.decode(T[v],{stream:!(X&&v==F-1)});T.length=0,this.h.g+=h,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=b==200,zo(this.i,this.u,this.A,this.l,this.R,Lt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,wt=this.g;if((Xe=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Xe)){var Me=Xe;break t}}Me=null}if(b=Me)Ps(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ys(this,b);else{this.o=!1,this.s=3,Bt(12),dn(this),Nr(this);break e}}if(this.P){b=!0;let wn;for(;!this.J&&this.C<he.length;)if(wn=Di(this,he),wn==zs){Lt==4&&(this.s=4,Bt(14),b=!1),Ps(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==Bo){this.s=4,Bt(15),Ps(this.i,this.l,he,"[Invalid Chunk]"),b=!1;break}else Ps(this.i,this.l,wn,null),ys(this,wn);if(qs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||he.length!=0||this.h.h||(this.s=1,Bt(16),b=!1),this.o=this.o&&b,!b)Ps(this.i,this.l,he,"[Invalid Chunked Response]"),dn(this),Nr(this);else if(0<he.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Jo(kt),kt.M=!0,Bt(11))}}else Ps(this.i,this.l,he,null),ys(this,he);Lt==4&&dn(this),this.o&&!this.J&&(Lt==4?qc(this.j,this):(this.o=!1,ss(this)))}else Lc(this.g),b==400&&0<he.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),dn(this),Nr(this)}}}catch{}finally{}};function qs(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Di(h,v){var b=h.C,T=v.indexOf(`
`,b);return T==-1?zs:(b=Number(v.substring(b,T)),isNaN(b)?Bo:(T+=1,T+b>v.length?zs:(v=v.slice(T,T+b),h.C=T+b,v)))}gs.prototype.cancel=function(){this.J=!0,dn(this)};function ss(h){h.S=Date.now()+h.I,vt(h,h.I)}function vt(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Tr(A(h.ba,h),v)}function Sa(h){h.B&&(p.clearTimeout(h.B),h.B=null)}gs.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Rc(this.i,this.A),this.L!=2&&(Us(),Bt(17)),dn(this),this.s=2,Nr(this)):vt(this,this.S-h)};function Nr(h){h.j.G==0||h.J||qc(h.j,h)}function dn(h){Sa(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,en(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function ys(h,v){try{var b=h.j;if(b.G!=0&&(b.g==h||Rr(b.h,h))){if(!h.K&&Rr(b.h,h)&&b.G==3){try{var T=b.Da.g.parse(v)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)Vr(b),Lr(b);else break e;Wo(b),Bt(18)}}else b.za=F[1],0<b.za-b.T&&37500>F[2]&&b.F&&b.v==0&&!b.C&&(b.C=Tr(A(b.Za,b),6e3));if(1>=jc(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else $s(b,11)}else if((h.K||b.g==h)&&Vr(b),!te(v))for(F=b.Da.g.parse(v),v=0;v<F.length;v++){let Me=F[v];if(b.T=Me[0],Me=Me[1],b.G==2)if(Me[0]=="c"){b.K=Me[1],b.ia=Me[2];const kt=Me[3];kt!=null&&(b.la=kt,b.j.info("VER="+b.la));const Lt=Me[4];Lt!=null&&(b.Aa=Lt,b.j.info("SVER="+b.Aa));const Pr=Me[5];Pr!=null&&typeof Pr=="number"&&0<Pr&&(T=1.5*Pr,b.L=T,b.j.info("backChannelRequestTimeoutMs_="+T)),T=b;const wn=h.g;if(wn){const zi=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zi){var X=T.h;X.g||zi.indexOf("spdy")==-1&&zi.indexOf("quic")==-1&&zi.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Cr(X,X.h),X.h=null))}if(T.D){const Ks=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ks&&(T.ya=Ks,He(T.I,T.D,Ks))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),T=b;var he=h;if(T.qa=Hc(T,T.J?T.ia:null,T.W),he.K){qn(T.h,he);var Xe=he,wt=T.L;wt&&(Xe.I=wt),Xe.B&&(Sa(Xe),ss(Xe)),T.g=he}else zc(T);0<b.i.length&&Ma(b)}else Me[0]!="stop"&&Me[0]!="close"||$s(b,7);else b.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?$s(b,7):Qo(b):Me[0]!="noop"&&b.l&&b.l.ta(Me),b.v=0)}}Us(4)}catch{}}var ld=class{constructor(h,v){this.g=h,this.map=v}};function qo(h){this.l=h||10,p.PerformanceNavigationTiming?(h=p.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function jc(h){return h.h?1:h.g?h.g.size:0}function Rr(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Cr(h,v){h.g?h.g.add(v):h.h=v}function qn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}qo.prototype.cancel=function(){if(this.i=fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function fn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const b of h.g.values())v=v.concat(b.D);return v}return q(h.i)}function Ic(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var v=[],b=h.length,T=0;T<b;T++)v.push(h[T]);return v}v=[],b=0;for(T in h)v[b++]=h[T];return v}function cd(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var v=[];h=h.length;for(var b=0;b<h;b++)v.push(b);return v}v=[],b=0;for(const T in h)v[b++]=T;return v}}}function Aa(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var b=cd(h),T=Ic(h),F=T.length,X=0;X<F;X++)v.call(void 0,T[X],b&&b[X],h)}var Ho=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Na(h,v){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var T=h[b].indexOf("="),F=null;if(0<=T){var X=h[b].substring(0,T);F=h[b].substring(T+1)}else X=h[b];v(X,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Fs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Fs){this.h=h.h,jr(this,h.j),this.o=h.o,this.g=h.g,Mi(this,h.s),this.l=h.l;var v=h.i,b=new vs;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Ra(this,b),this.m=h.m}else h&&(v=String(h).match(Ho))?(this.h=!1,jr(this,v[1]||"",!0),this.o=Ir(v[2]||""),this.g=Ir(v[3]||"",!0),Mi(this,v[4]),this.l=Ir(v[5]||"",!0),Ra(this,v[6]||"",!0),this.m=Ir(v[7]||"")):(this.h=!1,this.i=new vs(null,this.h))}Fs.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Fn(v,Go,!0),":");var b=this.g;return(b||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Fn(v,Go,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Fn(b,b.charAt(0)=="/"?$o:Dc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Fn(b,dd)),h.join("")};function ft(h){return new Fs(h)}function jr(h,v,b){h.j=b?Ir(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Mi(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Ra(h,v,b){v instanceof vs?(h.i=v,Mc(h.i,h.h)):(b||(v=Fn(v,hd)),h.i=new vs(v,h.h))}function He(h,v,b){h.i.set(v,b)}function Oi(h){return He(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ir(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Fn(h,v,b){return typeof h=="string"?(h=encodeURI(h).replace(v,ud),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ud(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Go=/[#\/\?@]/g,Dc=/[#\?:]/g,$o=/[#\?]/g,hd=/[#\?@]/g,dd=/#/g;function vs(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Ot(h){h.g||(h.g=new Map,h.h=0,h.i&&Na(h.i,function(v,b){h.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}s=vs.prototype,s.add=function(h,v){Ot(this),this.i=null,h=Cn(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(v),this.h+=1,this};function Ca(h,v){Ot(h),v=Cn(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function ja(h,v){return Ot(h),v=Cn(h,v),h.g.has(v)}s.forEach=function(h,v){Ot(this),this.g.forEach(function(b,T){b.forEach(function(F){h.call(v,F,T,this)},this)},this)},s.na=function(){Ot(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let T=0;T<v.length;T++){const F=h[T];for(let X=0;X<F.length;X++)b.push(v[T])}return b},s.V=function(h){Ot(this);let v=[];if(typeof h=="string")ja(this,h)&&(v=v.concat(this.g.get(Cn(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)v=v.concat(h[b])}return v},s.set=function(h,v){return Ot(this),this.i=null,h=Cn(this,h),ja(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Hs(h,v,b){Ca(h,v),0<b.length&&(h.i=null,h.g.set(Cn(h,v),q(b)),h.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var T=v[b];const X=encodeURIComponent(String(T)),he=this.V(T);for(T=0;T<he.length;T++){var F=X;he[T]!==""&&(F+="="+encodeURIComponent(String(he[T]))),h.push(F)}}return this.i=h.join("&")};function Cn(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Mc(h,v){v&&!h.j&&(Ot(h),h.i=null,h.g.forEach(function(b,T){var F=T.toLowerCase();T!=F&&(Ca(this,T),Hs(this,F,b))},h)),h.j=v}function Ko(h,v){const b=new Sr;if(p.Image){const T=new Image;T.onload=D(bn,b,"TestLoadImage: loaded",!0,v,T),T.onerror=D(bn,b,"TestLoadImage: error",!1,v,T),T.onabort=D(bn,b,"TestLoadImage: abort",!1,v,T),T.ontimeout=D(bn,b,"TestLoadImage: timeout",!1,v,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else v(!1)}function Oc(h,v){const b=new Sr,T=new AbortController,F=setTimeout(()=>{T.abort(),bn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:T.signal}).then(X=>{clearTimeout(F),X.ok?bn(b,"TestPingServer: ok",!0,v):bn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),bn(b,"TestPingServer: error",!1,v)})}function bn(h,v,b,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(b)}catch{}}function rs(){this.g=new od}function Yo(h,v,b){const T=b||"";try{Aa(h,function(F,X){let he=F;y(F)&&(he=zn(F)),v.push(T+X+"="+encodeURIComponent(he))})}catch(F){throw v.push(T+"type="+encodeURIComponent("_badmap")),F}}function _s(h){this.l=h.Ub||null,this.j=h.eb||!1}k(_s,Lo),_s.prototype.g=function(){return new jn(this.l,this.j)},_s.prototype.i=(function(h){return function(){return h}})({});function jn(h,v){Ct.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(jn,Ct),s=jn.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,Dr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||p).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xs(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Dr(this)),this.g&&(this.readyState=3,Dr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ia(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ia(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?xs(this):Dr(this),this.readyState==3&&Ia(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,xs(this))},s.Qa=function(h){this.g&&(this.response=h,xs(this))},s.ga=function(){this.g&&xs(this)};function xs(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Dr(h)}s.setRequestHeader=function(h,v){this.u.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=v.next();return h.join(`\r
`)};function Dr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ki(h){let v="";return ue(h,function(b,T){v+=T,v+=":",v+=b,v+=`\r
`}),v}function Mr(h,v,b){e:{for(T in b){var T=!1;break e}T=!0}T||(b=ki(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):He(h,v,b))}function it(h){Ct.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(it,Ct);var tn=/^https?$/i,Gs=["POST","PUT"];s=it.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,v,b,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ps.g(),this.v=this.o?Nc(this.o):Nc(ps),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(X){Li(this,X);return}if(h=b||"",b=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)b.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const X of T.keys())b.set(X,T.get(X));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),F=p.FormData&&h instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Gs,v,void 0))||T||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,he]of b)this.g.setRequestHeader(X,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Da(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){Li(this,X)}};function Li(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Or(h),kr(h)}function Or(h){h.A||(h.A=!0,Mt(h,"complete"),Mt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Mt(this,"complete"),Mt(this,"abort"),kr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kr(this,!0)),it.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?kc(this):this.bb())},s.bb=function(){kc(this)};function kc(h){if(h.h&&typeof d<"u"&&(!h.v[1]||mn(h)!=4||h.Z()!=2)){if(h.u&&mn(h)==4)Ac(h.Ea,0,h);else if(Mt(h,"readystatechange"),mn(h)==4){h.h=!1;try{const he=h.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var T;if(T=he===0){var F=String(h.D).match(Ho)[1]||null;!F&&p.self&&p.self.location&&(F=p.self.location.protocol.slice(0,-1)),T=!tn.test(F?F.toLowerCase():"")}b=T}if(b)Mt(h,"complete"),Mt(h,"success");else{h.m=6;try{var X=2<mn(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",Or(h)}}finally{kr(h)}}}}function kr(h,v){if(h.g){Da(h);const b=h.g,T=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Mt(h,"ready");try{b.onreadystatechange=T}catch{}}}function Da(h){h.I&&(p.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function mn(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),hn(v)}};function Vi(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Lc(h){const v={};h=(h.g&&2<=mn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<h.length;T++){if(te(h[T]))continue;var b=V(h[T]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=v[F]||[];v[F]=X,X.push(b)}C(v,function(T){return T.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(h,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||v}function Vc(h){this.Aa=0,this.i=[],this.j=new Sr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ui("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ui("baseRetryDelayMs",5e3,h),this.cb=Ui("retryDelaySeedMs",1e4,h),this.Wa=Ui("forwardChannelMaxRetries",2,h),this.wa=Ui("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new qo(h&&h.concurrentRequestLimit),this.Da=new rs,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Vc.prototype,s.la=8,s.G=1,s.connect=function(h,v,b,T){Bt(0),this.W=h,this.H=v||{},b&&T!==void 0&&(this.H.OSID=b,this.H.OAID=T),this.F=this.X,this.I=Hc(this,null,this.W),Ma(this)};function Qo(h){if(Uc(h),h.G==3){var v=h.U++,b=ft(h.I);if(He(b,"SID",h.K),He(b,"RID",v),He(b,"TYPE","terminate"),Pi(h,b),v=new gs(h,h.j,v),v.L=2,v.v=Oi(ft(b)),b=!1,p.navigator&&p.navigator.sendBeacon)try{b=p.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&p.Image&&(new Image().src=v.v,b=!0),b||(v.g=Gc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),ss(v)}Zo(h)}function Lr(h){h.g&&(Jo(h),h.g.cancel(),h.g=null)}function Uc(h){Lr(h),h.u&&(p.clearTimeout(h.u),h.u=null),Vr(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&p.clearTimeout(h.s),h.s=null)}function Ma(h){if(!Fo(h.h)&&!h.s){h.s=!0;var v=h.Ga;W||je(),de||(W(),de=!0),xe.add(v,h),h.B=0}}function fd(h,v){return jc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Tr(A(h.Ga,h,v),Fc(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const F=new gs(this,this.j,h);let X=this.o;if(this.S&&(X?(X=N(X),I(X,this.S)):X=this.S),this.m!==null||this.O||(F.H=X,X=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var T=this.i[b];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(v+=T,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Xo(this,F,v),b=ft(this.I),He(b,"RID",h),He(b,"CVER",22),this.D&&He(b,"X-HTTP-Session-Id",this.D),Pi(this,b),X&&(this.O?v="headers="+encodeURIComponent(String(ki(X)))+"&"+v:this.m&&Mr(b,this.m,X)),Cr(this.h,F),this.Ua&&He(b,"TYPE","init"),this.P?(He(b,"$req",v),He(b,"SID","null"),F.T=!0,Ii(F,b,null)):Ii(F,b,v),this.G=2}}else this.G==3&&(h?Pc(this,h):this.i.length==0||Fo(this.h)||Pc(this))};function Pc(h,v){var b;v?b=v.l:b=h.U++;const T=ft(h.I);He(T,"SID",h.K),He(T,"RID",b),He(T,"AID",h.T),Pi(h,T),h.m&&h.o&&Mr(T,h.m,h.o),b=new gs(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Xo(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Cr(h.h,b),Ii(b,T,v)}function Pi(h,v){h.H&&ue(h.H,function(b,T){He(v,T,b)}),h.l&&Aa({},function(b,T){He(v,T,b)})}function Xo(h,v,b){b=Math.min(h.i.length,b);var T=h.l?A(h.l.Na,h.l,h):null;e:{var F=h.i;let X=-1;for(;;){const he=["count="+b];X==-1?0<b?(X=F[0].g,he.push("ofs="+X)):X=0:he.push("ofs="+X);let Xe=!0;for(let wt=0;wt<b;wt++){let Me=F[wt].g;const kt=F[wt].map;if(Me-=X,0>Me)X=Math.max(0,F[wt].g-100),Xe=!1;else try{Yo(kt,he,"req"+Me+"_")}catch{T&&T(kt)}}if(Xe){T=he.join("&");break e}}}return h=h.i.splice(0,b),v.D=h,T}function zc(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;W||je(),de||(W(),de=!0),xe.add(v,h),h.v=0}}function Wo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Tr(A(h.Fa,h),Fc(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,Bc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Tr(A(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),Lr(this),Bc(this))};function Jo(h){h.A!=null&&(p.clearTimeout(h.A),h.A=null)}function Bc(h){h.g=new gs(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=ft(h.qa);He(v,"RID","rpc"),He(v,"SID",h.K),He(v,"AID",h.T),He(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&He(v,"TO",h.ja),He(v,"TYPE","xmlhttp"),Pi(h,v),h.m&&h.o&&Mr(v,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Oi(ft(v)),b.m=null,b.P=!0,Bs(b,h)}s.Za=function(){this.C!=null&&(this.C=null,Lr(this),Wo(this),Bt(19))};function Vr(h){h.C!=null&&(p.clearTimeout(h.C),h.C=null)}function qc(h,v){var b=null;if(h.g==v){Vr(h),Jo(h),h.g=null;var T=2}else if(Rr(h.h,v))b=v.D,qn(h.h,v),T=1;else return;if(h.G!=0){if(v.o)if(T==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var F=h.B;T=Ta(),Mt(T,new Uo(T,b)),Ma(h)}else zc(h);else if(F=v.s,F==3||F==0&&0<v.X||!(T==1&&fd(h,v)||T==2&&Wo(h)))switch(b&&0<b.length&&(v=h.h,v.i=v.i.concat(b)),F){case 1:$s(h,5);break;case 4:$s(h,10);break;case 3:$s(h,6);break;default:$s(h,2)}}}function Fc(h,v){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*v}function $s(h,v){if(h.j.info("Error code "+v),v==2){var b=A(h.fb,h),T=h.Xa;const F=!T;T=new Fs(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||jr(T,"https"),Oi(T),F?Ko(T.toString(),b):Oc(T.toString(),b)}else Bt(2);h.G=0,h.l&&h.l.sa(v),Zo(h),Uc(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Zo(h){if(h.G=0,h.ka=[],h.l){const v=fn(h.h);(v.length!=0||h.i.length!=0)&&(P(h.ka,v),P(h.ka,h.i),h.h.i.length=0,q(h.i),h.i.length=0),h.l.ra()}}function Hc(h,v,b){var T=b instanceof Fs?ft(b):new Fs(b);if(T.g!="")v&&(T.g=v+"."+T.g),Mi(T,T.s);else{var F=p.location;T=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;var X=new Fs(null);T&&jr(X,T),v&&(X.g=v),F&&Mi(X,F),b&&(X.l=b),T=X}return b=h.D,v=h.ya,b&&v&&He(T,b,v),He(T,"VER",h.la),Pi(h,T),T}function Gc(h,v,b){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new it(new _s({eb:b})):new it(h.pa),v.Ha(h.J),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}s=$c.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Oa(){}Oa.prototype.g=function(h,v){return new pn(h,v)};function pn(h,v){Ct.call(this),this.g=new Vc(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!te(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!te(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Ur(this)}k(pn,Ct),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Qo(this.g)},pn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=zn(h),h=b);v.i.push(new ld(v.Ya++,h)),v.G==3&&Ma(v)},pn.prototype.N=function(){this.g.l=null,delete this.j,Qo(this.g),delete this.g,pn.aa.N.call(this)};function Kc(h){br.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const b in v){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}k(Kc,br);function Yc(){ns.call(this),this.status=1}k(Yc,ns);function Ur(h){this.g=h}k(Ur,$c),Ur.prototype.ua=function(){Mt(this.g,"a")},Ur.prototype.ta=function(h){Mt(this.g,new Kc(h))},Ur.prototype.sa=function(h){Mt(this.g,new Yc)},Ur.prototype.ra=function(){Mt(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,jb=function(){return new Oa},Cb=function(){return Ta()},Rb=Bn,Pm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,dh=dt,qt.COMPLETE="complete",Nb=qt,ji.EventType=fs,fs.OPEN="a",fs.CLOSE="b",fs.ERROR="c",fs.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,zl=ji,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,Ab=it}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});const x_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new ap("@firebase/firestore");function Ul(){return ua.logLevel}function ve(s,...e){if(ua.logLevel<=ze.DEBUG){const n=e.map(_p);ua.debug(`Firestore (${Co}): ${s}`,...n)}}function vr(s,...e){if(ua.logLevel<=ze.ERROR){const n=e.map(_p);ua.error(`Firestore (${Co}): ${s}`,...n)}}function _o(s,...e){if(ua.logLevel<=ze.WARN){const n=e.map(_p);ua.warn(`Firestore (${Co}): ${s}`,...n)}}function _p(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(s="Unexpected state"){const e=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+s;throw vr(e),new Error(e)}function et(s,e){s||Ae()}function Ce(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(an.UNAUTHENTICATED)))}shutdown(){}}class yR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class vR{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let c=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new fr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new fr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string"),new Ib(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new an(e)}}class _R{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=an.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xR{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new _R(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){et(this.o===void 0);const i=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(et(typeof n.token=="string"),this.R=n.token,new bR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=ER(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%e.length))}return i}}function Ke(s,e){return s<e?-1:s>e?1:0}function xo(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new It(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Re(e)}static min(){return new Re(new It(0,0))}static max(){return new Re(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ae(),i===void 0?i=e.length-n:i>e.length-n&&Ae(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ec.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ec?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=e.get(o),d=n.get(o);if(c<d)return-1;if(c>d)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class lt extends ec{construct(e,n,i){return new lt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new lt(n)}static emptyPath(){return new lt([])}}const TR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends ec{construct(e,n,i){return new Qt(e,n,i)}static isValidIdentifier(e){return TR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new ge(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ge(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(c(),o++)}if(c(),d)throw new ge(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(lt.fromString(e))}static fromName(e){return new Ee(lt.fromString(e).popFirst(5))}static empty(){return new Ee(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new lt(e.slice()))}}function SR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new It(n+1,0):new It(n,i));return new xi(o,Ee.empty(),e)}function AR(s){return new xi(s.readTime,s.key,-1)}class xi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new xi(Re.min(),Ee.empty(),-1)}static max(){return new xi(Re.max(),Ee.empty(),-1)}}function NR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(s.documentKey,e.documentKey),n!==0?n:Ke(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(s){if(s.code!==ae.FAILED_PRECONDITION||s.message!==RR)throw s;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,i)=>{n(e)}))}static reject(e){return new oe(((n,i)=>{i(e)}))}static waitFor(e){return new oe(((n,i)=>{let o=0,c=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++c,d&&c===o&&n()}),(g=>i(g)))})),d=!0,c===o&&n()}))}static or(e){let n=oe.resolve(!1);for(const i of e)n=n.next((o=>o?oe.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,c)=>{i.push(n.call(this,o,c))})),this.waitFor(i)}static mapArray(e,n){return new oe(((i,o)=>{const c=e.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((x=>{d[y]=x,++p,p===c&&i(d)}),(x=>o(x)))}}))}static doWhile(e,n){return new oe(((i,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):i()};c()}))}}function jR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yc(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}xp.oe=-1;function qh(s){return s==null}function Nh(s){return s===0&&1/s==-1/0}function IR(s){return typeof s=="number"&&Number.isInteger(s)&&!Nh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function jo(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Mb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||Yt.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new th(this.root,e,this.comparator,!1)}getReverseIterator(){return new th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new th(this.root,e,this.comparator,!0)}}class th{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??Yt.RED,this.left=o??Yt.EMPTY,this.right=c??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new Yt(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Yt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,n,i,o,c){return this}insert(e,n,i){return new Yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new w_(this.data.getIterator())}getIteratorFrom(e){return new w_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class w_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new ls([])}unionWith(e){let n=new Xt(Qt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ls(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ob("Invalid base64 string: "+c):c}})(e);return new Jt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new Jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const DR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bi(s){if(et(!!s),typeof s=="string"){let e=0;const n=DR.exec(s);if(et(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bt(s.seconds),nanos:bt(s.nanos)}}function bt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ha(s){return typeof s=="string"?Jt.fromBase64String(s):Jt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wp(s){const e=s.mapValue.fields.__previous_value__;return bp(e)?wp(e):e}function tc(s){const e=bi(s.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,i,o,c,d,p,g,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y}}class nc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new nc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh={mapValue:{}};function da(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?bp(s)?4:kR(s)?9007199254740991:OR(s)?10:11:Ae()}function Ds(s,e){if(s===e)return!0;const n=da(s);if(n!==da(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return tc(s).isEqual(tc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=bi(o.timestampValue),p=bi(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return ha(o.bytesValue).isEqual(ha(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return bt(o.geoPointValue.latitude)===bt(c.geoPointValue.latitude)&&bt(o.geoPointValue.longitude)===bt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return bt(o.integerValue)===bt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=bt(o.doubleValue),p=bt(c.doubleValue);return d===p?Nh(d)===Nh(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return xo(s.arrayValue.values||[],e.arrayValue.values||[],Ds);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},p=c.mapValue.fields||{};if(b_(d)!==b_(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Ds(d[g],p[g])))return!1;return!0})(s,e);default:return Ae()}}function sc(s,e){return(s.values||[]).find((n=>Ds(n,e)))!==void 0}function bo(s,e){if(s===e)return 0;const n=da(s),i=da(e);if(n!==i)return Ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=bt(c.integerValue||c.doubleValue),g=bt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return E_(s.timestampValue,e.timestampValue);case 4:return E_(tc(s),tc(e));case 5:return Ke(s.stringValue,e.stringValue);case 6:return(function(c,d){const p=ha(c),g=ha(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const x=Ke(p[y],g[y]);if(x!==0)return x}return Ke(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=Ke(bt(c.latitude),bt(d.latitude));return p!==0?p:Ke(bt(c.longitude),bt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return T_(s.arrayValue,e.arrayValue);case 10:return(function(c,d){var p,g,y,x;const w=c.fields||{},A=d.fields||{},D=(p=w.value)===null||p===void 0?void 0:p.arrayValue,k=(g=A.value)===null||g===void 0?void 0:g.arrayValue,q=Ke(((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0,((x=k==null?void 0:k.values)===null||x===void 0?void 0:x.length)||0);return q!==0?q:T_(D,k)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===nh.mapValue&&d===nh.mapValue)return 0;if(c===nh.mapValue)return 1;if(d===nh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let w=0;w<g.length&&w<x.length;++w){const A=Ke(g[w],x[w]);if(A!==0)return A;const D=bo(p[g[w]],y[x[w]]);if(D!==0)return D}return Ke(g.length,x.length)})(s.mapValue,e.mapValue);default:throw Ae()}}function E_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ke(s,e);const n=bi(s),i=bi(e),o=Ke(n.seconds,i.seconds);return o!==0?o:Ke(n.nanos,i.nanos)}function T_(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=bo(n[o],i[o]);if(c)return c}return Ke(n.length,i.length)}function wo(s){return zm(s)}function zm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=bi(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return ha(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Ee.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const c of n.values||[])o?o=!1:i+=",",i+=zm(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${zm(n.fields[d])}`;return o+"}"})(s.mapValue):Ae()}function S_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Bm(s){return!!s&&"integerValue"in s}function Ep(s){return!!s&&"arrayValue"in s}function A_(s){return!!s&&"nullValue"in s}function N_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function fh(s){return!!s&&"mapValue"in s}function OR(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $l(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return jo(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=$l(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$l(s.arrayValue.values[n]);return e}return Object.assign({},s)}function kR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.value=e}static empty(){return new es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(n)}setAll(e){let n=Qt.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=p.popLast()}d?i[p.lastSegment()]=$l(d):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ds(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];fh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){jo(n,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new es($l(this.value))}}function kb(s){const e=[];return jo(s.fields,((n,i)=>{const o=new Qt([n]);if(fh(i)){const c=kb(i.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new ls(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n,i,o,c,d,p){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new on(e,0,Re.min(),Re.min(),Re.min(),es.empty(),0)}static newFoundDocument(e,n,i,o){return new on(e,1,n,Re.min(),i,o,0)}static newNoDocument(e,n){return new on(e,2,n,Re.min(),Re.min(),es.empty(),0)}static newUnknownDocument(e,n){return new on(e,3,n,Re.min(),Re.min(),es.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function R_(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],d=s.position[o];if(c.field.isKeyField()?i=Ee.comparator(Ee.fromName(d.referenceValue),n.key):i=bo(d,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function C_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ds(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n="asc"){this.field=e,this.dir=n}}function LR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{}class Rt extends Lb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new UR(e,n,i):n==="array-contains"?new BR(e,i):n==="in"?new qR(e,i):n==="not-in"?new FR(e,i):n==="array-contains-any"?new HR(e,i):new Rt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new PR(e,i):new zR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(bo(n,this.value)):n!==null&&da(this.value)===da(n)&&this.matchesComparison(bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class us extends Lb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new us(e,n)}matches(e){return Vb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vb(s){return s.op==="and"}function Ub(s){return VR(s)&&Vb(s)}function VR(s){for(const e of s.filters)if(e instanceof us)return!1;return!0}function qm(s){if(s instanceof Rt)return s.field.canonicalString()+s.op.toString()+wo(s.value);if(Ub(s))return s.filters.map((e=>qm(e))).join(",");{const e=s.filters.map((n=>qm(n))).join(",");return`${s.op}(${e})`}}function Pb(s,e){return s instanceof Rt?(function(i,o){return o instanceof Rt&&i.op===o.op&&i.field.isEqual(o.field)&&Ds(i.value,o.value)})(s,e):s instanceof us?(function(i,o){return o instanceof us&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,d,p)=>c&&Pb(d,o.filters[p])),!0):!1})(s,e):void Ae()}function zb(s){return s instanceof Rt?(function(n){return`${n.field.canonicalString()} ${n.op} ${wo(n.value)}`})(s):s instanceof us?(function(n){return n.op.toString()+" {"+n.getFilters().map(zb).join(" ,")+"}"})(s):"Filter"}class UR extends Rt{constructor(e,n,i){super(e,n,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class PR extends Rt{constructor(e,n){super(e,"in",n),this.keys=Bb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class zR extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=Bb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Bb(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class BR extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ep(n)&&sc(n.arrayValue,this.value)}}class qR extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sc(this.value.arrayValue,n)}}class FR extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sc(this.value.arrayValue,n)}}class HR extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ep(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>sc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n=null,i=[],o=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=d,this.endAt=p,this.ue=null}}function j_(s,e=null,n=[],i=[],o=null,c=null,d=null){return new GR(s,e,n,i,o,c,d)}function Tp(s){const e=Ce(s);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>qm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>wo(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>wo(i))).join(",")),e.ue=n}return e.ue}function Sp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!LR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Pb(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!C_(s.startAt,e.startAt)&&C_(s.endAt,e.endAt)}function Fm(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n=null,i=[],o=[],c=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $R(s,e,n,i,o,c,d,p){return new Io(s,e,n,i,o,c,d,p)}function Ap(s){return new Io(s)}function I_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function qb(s){return s.collectionGroup!==null}function Kl(s){const e=Ce(s);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Xt(Qt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new rc(c,i))})),n.has(Qt.keyField().canonicalString())||e.ce.push(new rc(Qt.keyField(),i))}return e.ce}function Cs(s){const e=Ce(s);return e.le||(e.le=KR(e,Kl(s))),e.le}function KR(s,e){if(s.limitType==="F")return j_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new rc(o.field,c)}));const n=s.endAt?new Rh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Rh(s.startAt.position,s.startAt.inclusive):null;return j_(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Hm(s,e){const n=s.filters.concat([e]);return new Io(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Ch(s,e,n){return new Io(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Fh(s,e){return Sp(Cs(s),Cs(e))&&s.limitType===e.limitType}function Fb(s){return`${Tp(Cs(s))}|lt:${s.limitType}`}function co(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>zb(o))).join(", ")}]`),qh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>wo(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>wo(o))).join(",")),`Target(${i})`})(Cs(s))}; limitType=${s.limitType})`}function Hh(s,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ee.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,o){for(const c of Kl(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,g){const y=R_(d,p,g);return d.inclusive?y<=0:y<0})(i.startAt,Kl(i),o)||i.endAt&&!(function(d,p,g){const y=R_(d,p,g);return d.inclusive?y>=0:y>0})(i.endAt,Kl(i),o))})(s,e)}function YR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Hb(s){return(e,n)=>{let i=!1;for(const o of Kl(s)){const c=QR(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function QR(s,e,n){const i=s.field.isKeyField()?Ee.comparator(e.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?bo(g,y):Ae()})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){jo(this.inner,((n,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return Mb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new ht(Ee.comparator);function _r(){return XR}const Gb=new ht(Ee.comparator);function Bl(...s){let e=Gb;for(const n of s)e=e.insert(n.key,n);return e}function $b(s){let e=Gb;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ra(){return Yl()}function Kb(){return Yl()}function Yl(){return new Do((s=>s.toString()),((s,e)=>s.isEqual(e)))}const WR=new ht(Ee.comparator),JR=new Xt(Ee.comparator);function Ue(...s){let e=JR;for(const n of s)e=e.add(n);return e}const ZR=new Xt(Ke);function eC(){return ZR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nh(e)?"-0":e}}function Yb(s){return{integerValue:""+s}}function tC(s,e){return IR(e)?Yb(e):Np(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function nC(s,e,n){return s instanceof ic?(function(o,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&bp(c)&&(c=wp(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}})(n,e):s instanceof ac?Xb(s,e):s instanceof oc?Wb(s,e):(function(o,c){const d=Qb(o,c),p=D_(d)+D_(o.Pe);return Bm(d)&&Bm(o.Pe)?Yb(p):Np(o.serializer,p)})(s,e)}function sC(s,e,n){return s instanceof ac?Xb(s,e):s instanceof oc?Wb(s,e):n}function Qb(s,e){return s instanceof jh?(function(i){return Bm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class ic extends Gh{}class ac extends Gh{constructor(e){super(),this.elements=e}}function Xb(s,e){const n=Jb(e);for(const i of s.elements)n.some((o=>Ds(o,i)))||n.push(i);return{arrayValue:{values:n}}}class oc extends Gh{constructor(e){super(),this.elements=e}}function Wb(s,e){let n=Jb(e);for(const i of s.elements)n=n.filter((o=>!Ds(o,i)));return{arrayValue:{values:n}}}class jh extends Gh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function D_(s){return bt(s.integerValue||s.doubleValue)}function Jb(s){return Ep(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n){this.field=e,this.transform=n}}function iC(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof ac&&o instanceof ac||i instanceof oc&&o instanceof oc?xo(i.elements,o.elements,Ds):i instanceof jh&&o instanceof jh?Ds(i.Pe,o.Pe):i instanceof ic&&o instanceof ic})(s.transform,e.transform)}class aC{constructor(e,n){this.version=e,this.transformResults=n}}class js{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new js}static exists(e){return new js(void 0,e)}static updateTime(e){return new js(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class $h{}function Zb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new tw(s.key,js.none()):new vc(s.key,s.data,js.none());{const n=s.data,i=es.empty();let o=new Xt(Qt.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?i.delete(c):i.set(c,d),o=o.add(c)}return new ya(s.key,i,new ls(o.toArray()),js.none())}}function oC(s,e,n){s instanceof vc?(function(o,c,d){const p=o.value.clone(),g=O_(o.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof ya?(function(o,c,d){if(!mh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const p=O_(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(ew(o)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Ql(s,e,n,i){return s instanceof vc?(function(c,d,p,g){if(!mh(c.precondition,d))return p;const y=c.value.clone(),x=k_(c.fieldTransforms,g,d);return y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof ya?(function(c,d,p,g){if(!mh(c.precondition,d))return p;const y=k_(c.fieldTransforms,g,d),x=d.data;return x.setAll(ew(c)),x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(s,e,n,i):(function(c,d,p){return mh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function lC(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=Qb(i.transform,o||null);c!=null&&(n===null&&(n=es.empty()),n.set(i.field,c))}return n||null}function M_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&xo(i,o,((c,d)=>iC(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class vc extends $h{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ya extends $h{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ew(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function O_(s,e,n){const i=new Map;et(s.length===n.length);for(let o=0;o<n.length;o++){const c=s[o],d=c.transform,p=e.data.field(c.field);i.set(c.field,sC(d,p,n[o]))}return i}function k_(s,e,n){const i=new Map;for(const o of s){const c=o.transform,d=n.data.field(o.field);i.set(o.field,nC(c,d,e))}return i}class tw extends $h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cC extends $h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&oC(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ql(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ql(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Kb();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(o.key)?null:p;const g=Zb(d,p);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,((n,i)=>M_(n,i)))&&xo(this.baseMutations,e.baseMutations,((n,i)=>M_(n,i)))}}class Rp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){et(e.mutations.length===i.length);let o=(function(){return WR})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,i[d].version);return new Rp(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Be;function fC(s){switch(s){default:return Ae();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function nw(s){if(s===void 0)return vr("GRPC error has no .code"),ae.UNKNOWN;switch(s){case Nt.OK:return ae.OK;case Nt.CANCELLED:return ae.CANCELLED;case Nt.UNKNOWN:return ae.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ae.INTERNAL;case Nt.UNAVAILABLE:return ae.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ae.NOT_FOUND;case Nt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Nt.ABORTED:return ae.ABORTED;case Nt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Nt.DATA_LOSS:return ae.DATA_LOSS;default:return Ae()}}(Be=Nt||(Nt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new aa([4294967295,4294967295],0);function L_(s){const e=mC().encode(s),n=new Sb;return n.update(e),new Uint8Array(n.digest())}function V_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new aa([n,i],0),new aa([o,c],0)]}class Cp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ql(`Invalid padding: ${n}`);if(i<0)throw new ql(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ql(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=aa.fromNumber(this.Ie)}Ee(e,n,i){let o=e.add(n.multiply(aa.fromNumber(i)));return o.compare(pC)===1&&(o=new aa([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=L_(e),[i,o]=V_(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(i,o,c);if(!this.de(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Cp(c,o,n);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.Ie===0)return;const n=L_(e),[i,o]=V_(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(i,o,c);this.Ae(d)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Kh(Re.min(),o,new ht(Ke),_r(),Ue())}}class _c{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new _c(i,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,i,o){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=o}}class sw{constructor(e,n){this.targetId=e,this.me=n}}class rw{constructor(e,n,i=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class U_{constructor(){this.fe=0,this.ge=z_(),this.pe=Jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ue(),n=Ue(),i=Ue();return this.ge.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ae()}})),new _c(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=z_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gC{constructor(e){this.Le=e,this.Be=new Map,this.ke=_r(),this.qe=P_(),this.Qe=new ht(Ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Ae()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((i,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,i=e.me.count,o=this.Je(n);if(o){const c=o.target;if(Fm(c))if(i===0){const d=new Ee(c.path);this.Ue(n,d,on.newNoDocument(d,Re.min()))}else et(i===1);else{const d=this.Ye(n);if(d!==i){const p=this.Ze(e),g=p?this.Xe(p,e,d):1;if(g!==0){this.je(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,y)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let d,p;try{d=ha(i).toUint8Array()}catch(g){if(g instanceof Ob)return _o("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Cp(d,o,c)}catch(g){return _o(g instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.Ie===0?null:p}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach((c=>{const d=this.Le.tt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.Ue(n,c,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((c,d)=>{const p=this.Je(d);if(p){if(c.current&&Fm(p.target)){const g=new Ee(p.target.path);this.ke.get(g)!==null||this.it(d,g)||this.Ue(d,g,on.newNoDocument(g,e))}c.be&&(n.set(d,c.ve()),c.Ce())}}));let i=Ue();this.qe.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.Je(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(c))})),this.ke.forEach(((c,d)=>d.setReadTime(e)));const o=new Kh(e,n,this.Qe,this.ke,i);return this.ke=_r(),this.qe=P_(),this.Qe=new ht(Ke),o}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new U_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xt(Ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new U_),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function P_(){return new ht(Ee.comparator)}function z_(){return new ht(Ee.comparator)}const yC={asc:"ASCENDING",desc:"DESCENDING"},vC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_C={and:"AND",or:"OR"};class xC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gm(s,e){return s.useProto3Json||qh(e)?e:{value:e}}function Ih(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function bC(s,e){return Ih(s,e.toTimestamp())}function Is(s){return et(!!s),Re.fromTimestamp((function(n){const i=bi(n);return new It(i.seconds,i.nanos)})(s))}function jp(s,e){return $m(s,e).canonicalString()}function $m(s,e){const n=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function aw(s){const e=lt.fromString(s);return et(hw(e)),e}function Km(s,e){return jp(s.databaseId,e.path)}function Em(s,e){const n=aw(e);if(n.get(1)!==s.databaseId.projectId)throw new ge(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ge(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ee(lw(n))}function ow(s,e){return jp(s.databaseId,e)}function wC(s){const e=aw(s);return e.length===4?lt.emptyPath():lw(e)}function Ym(s){return new lt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function lw(s){return et(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function B_(s,e,n){return{name:Km(s,e),fields:n.value.mapValue.fields}}function EC(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,x){return y.useProto3Json?(et(x===void 0||typeof x=="string"),Jt.fromBase64String(x||"")):(et(x===void 0||x instanceof Buffer||x instanceof Uint8Array),Jt.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const x=y.code===void 0?ae.UNKNOWN:nw(y.code);return new ge(x,y.message||"")})(d);n=new rw(i,o,c,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Em(s,i.document.name),c=Is(i.document.updateTime),d=i.document.createTime?Is(i.document.createTime):Re.min(),p=new es({mapValue:{fields:i.document.fields}}),g=on.newFoundDocument(o,c,d,p),y=i.targetIds||[],x=i.removedTargetIds||[];n=new ph(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Em(s,i.document),c=i.readTime?Is(i.readTime):Re.min(),d=on.newNoDocument(o,c),p=i.removedTargetIds||[];n=new ph([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Em(s,i.document),c=i.removedTargetIds||[];n=new ph([],c,o,null)}else{if(!("filter"in e))return Ae();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,d=new dC(o,c),p=i.targetId;n=new sw(p,d)}}return n}function TC(s,e){let n;if(e instanceof vc)n={update:B_(s,e.key,e.value)};else if(e instanceof tw)n={delete:Km(s,e.key)};else if(e instanceof ya)n={update:B_(s,e.key,e.data),updateMask:MC(e.fieldMask)};else{if(!(e instanceof cC))return Ae();n={verify:Km(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const p=d.transform;if(p instanceof ic)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ac)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof oc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof jh)return{fieldPath:d.field.canonicalString(),increment:p.Pe};throw Ae()})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:bC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ae()})(s,e.precondition)),n}function SC(s,e){return s&&s.length>0?(et(e!==void 0),s.map((n=>(function(o,c){let d=o.updateTime?Is(o.updateTime):Is(c);return d.isEqual(Re.min())&&(d=Is(c)),new aC(d,o.transformResults||[])})(n,e)))):[]}function AC(s,e){return{documents:[ow(s,e.path)]}}function NC(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ow(s,o);const c=(function(y){if(y.length!==0)return uw(us.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((x=>(function(A){return{field:uo(A.field),direction:jC(A.dir)}})(x)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Gm(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:n,parent:o}}function RC(s){let e=wC(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){et(i===1);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(w){const A=cw(w);return A instanceof us&&Ub(A)?A.getFilters():[A]})(n.where));let d=[];n.orderBy&&(d=(function(w){return w.map((A=>(function(k){return new rc(ho(k.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(A)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let A;return A=typeof w=="object"?w.value:w,qh(A)?null:A})(n.limit));let g=null;n.startAt&&(g=(function(w){const A=!!w.before,D=w.values||[];return new Rh(D,A)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const A=!w.before,D=w.values||[];return new Rh(D,A)})(n.endAt)),$R(e,o,d,c,p,"F",g,y)}function CC(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cw(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ho(n.unaryFilter.field);return Rt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ho(n.unaryFilter.field);return Rt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ho(n.unaryFilter.field);return Rt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ho(n.unaryFilter.field);return Rt.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}})(s):s.fieldFilter!==void 0?(function(n){return Rt.create(ho(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return us.create(n.compositeFilter.filters.map((i=>cw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae()}})(n.compositeFilter.op))})(s):Ae()}function jC(s){return yC[s]}function IC(s){return vC[s]}function DC(s){return _C[s]}function uo(s){return{fieldPath:s.canonicalString()}}function ho(s){return Qt.fromServerFormat(s.fieldPath)}function uw(s){return s instanceof Rt?(function(n){if(n.op==="=="){if(N_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NAN"}};if(A_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(N_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NAN"}};if(A_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(n.field),op:IC(n.op),value:n.value}}})(s):s instanceof us?(function(n){const i=n.getFilters().map((o=>uw(o)));return i.length===1?i[0]:{compositeFilter:{op:DC(n.op),filters:i}}})(s):Ae()}function MC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function hw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,i,o,c=Re.min(),d=Re.min(),p=Jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.ct=e}}function kC(s){const e=RC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ch(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.un=new VC}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(xi.min())}updateCollectionGroup(e,n,i){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class VC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Xt(lt.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Xt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Eo(0)}static kn(){return new Eo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.changes=new Do((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?oe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Ql(i.mutation,o,ls.empty(),It.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ue()){const o=ra();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((c=>{let d=Bl();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=ra();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ue())))}populateOverlays(e,n,i){const o=[];return i.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,i,o){let c=_r();const d=Yl(),p=(function(){return Yl()})();return n.forEach(((g,y)=>{const x=i.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof ya)?c=c.insert(y.key,y):x!==void 0?(d.set(y.key,x.mutation.getFieldMask()),Ql(x.mutation,y,x.mutation.getFieldMask(),It.now())):d.set(y.key,ls.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,x)=>d.set(y,x))),n.forEach(((y,x)=>{var w;return p.set(y,new PC(x,(w=d.get(y))!==null&&w!==void 0?w:null))})),p)))}recalculateAndSaveOverlays(e,n){const i=Yl();let o=new ht(((d,p)=>d-p)),c=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let x=i.get(g)||ls.empty();x=p.applyToLocalView(y,x),i.set(g,x);const w=(o.get(p.batchId)||Ue()).add(g);o=o.insert(p.batchId,w)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,x=g.value,w=Kb();x.forEach((A=>{if(!c.has(A)){const D=Zb(n.get(A),i.get(A));D!==null&&w.set(A,D),c=c.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,w))}return oe.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(d){return Ee.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):oe.resolve(ra());let p=-1,g=c;return d.next((y=>oe.forEach(y,((x,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(x)?oe.resolve():this.remoteDocumentCache.getEntry(e,x).next((A=>{g=g.insert(x,A)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Ue()))).next((x=>({batchId:p,changes:$b(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((i=>{let o=Bl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let d=Bl();return this.indexManager.getCollectionParents(e,c).next((p=>oe.forEach(p,(g=>{const y=(function(w,A){return new Io(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((x=>{x.forEach(((w,A)=>{d=d.insert(w,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o)))).next((d=>{c.forEach(((g,y)=>{const x=y.getKey();d.get(x)===null&&(d=d.insert(x,on.newInvalidDocument(x)))}));let p=Bl();return d.forEach(((g,y)=>{const x=c.get(g);x!==void 0&&Ql(x.mutation,y,ls.empty(),It.now()),Hh(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Is(o.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:kC(o.bundledQuery),readTime:Is(o.readTime)}})(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.overlays=new ht(Ee.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ra();return oe.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,c)=>{this.ht(e,n,c)})),oe.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Ir.delete(i)),oe.resolve()}getOverlaysForCollection(e,n,i){const o=ra(),c=n.length+1,d=new Ee(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new ht(((y,x)=>y-x));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let x=c.get(y.largestBatchId);x===null&&(x=ra(),c=c.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=ra(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>p.set(y,x))),!(p.size()>=o)););return oe.resolve(p)}ht(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new hC(n,i));let c=this.Ir.get(n);c===void 0&&(c=Ue(),this.Ir.set(n,c)),this.Ir.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.Tr=new Xt(Ut.Er),this.dr=new Xt(Ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Ut(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Vr(new Ut(e,n))}mr(e,n){e.forEach((i=>this.removeReference(i,n)))}gr(e){const n=new Ee(new lt([])),i=new Ut(n,e),o=new Ut(n,e+1),c=[];return this.dr.forEachInRange([i,o],(d=>{this.Vr(d),c.push(d.key)})),c}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ee(new lt([])),i=new Ut(n,e),o=new Ut(n,e+1);let c=Ue();return this.dr.forEachInRange([i,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Ut(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ee.comparator(e.key,n.key)||Ke(e.wr,n.wr)}static Ar(e,n){return Ke(e.wr,n.wr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xt(Ut.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new uC(c,n,i,o);this.mutationQueue.push(d);for(const p of o)this.br=this.br.add(new Ut(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.vr(i),c=o<0?0:o;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ut(n,0),o=new Ut(n,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([i,o],(d=>{const p=this.Dr(d.wr);c.push(p)})),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Xt(Ke);return n.forEach((o=>{const c=new Ut(o,0),d=new Ut(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,d],(p=>{i=i.add(p.wr)}))})),oe.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;Ee.isDocumentKey(c)||(c=c.child(""));const d=new Ut(new Ee(c),0);let p=new Xt(Ke);return this.br.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.wr)),!0)}),d),oe.resolve(this.Cr(p))}Cr(e){const n=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){et(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return oe.forEach(n.mutations,(o=>{const c=new Ut(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,n){const i=new Ut(n,0),o=this.br.firstAfterOrEqual(i);return oe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.Mr=e,this.docs=(function(){return new ht(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,d=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return oe.resolve(i?i.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let i=_r();return n.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():on.newInvalidDocument(o))})),oe.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=_r();const d=n.path,p=new Ee(d.child("")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||NR(AR(x),i)<=0||(o.has(x.key)||Hh(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return oe.resolve(c)}getAllFromCollectionGroup(e,n,i,o){Ae()}Or(e,n){return oe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new $C(this)}getSize(e){return oe.resolve(this.size)}}class $C extends UC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.persistence=e,this.Nr=new Do((n=>Tp(n)),Sp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ip,this.targetCount=0,this.kr=Eo.Bn()}forEachTarget(e,n){return this.Nr.forEach(((i,o)=>n(o))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Eo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.Nr.forEach(((d,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.Nr.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),oe.waitFor(c).next((()=>o))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return oe.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),oe.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),oe.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return oe.resolve(i)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new xp(0),this.Kr=!1,this.Kr=!0,this.$r=new FC,this.referenceDelegate=e(this),this.Ur=new KC(this),this.indexManager=new LC,this.remoteDocumentCache=(function(o){return new GC(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new OC(n),this.Gr=new BC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new HC(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ve("MemoryPersistence","Starting transaction:",e);const o=new QC(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((c=>this.referenceDelegate.jr(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Hr(e,n){return oe.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,n))))}}class QC extends CR{constructor(e){super(),this.currentSequenceNumber=e}}class Dp{constructor(e){this.persistence=e,this.Jr=new Ip,this.Yr=null}static Zr(e){return new Dp(e)}get Xr(){if(this.Yr)return this.Yr;throw Ae()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),oe.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.Xr.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,(i=>{const o=Ee.fromPath(i);return this.ei(e,o).next((c=>{c||n.removeEntry(o,Re.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(e,n){let i=Ue(),o=Ue();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Mp(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return tA()?8:jR(cn())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.Yi(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.Zi(e,n,o,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new XC;return this.Xi(e,n,d).next((p=>{if(c.result=p,this.zi)return this.es(e,n,d,p.size)}))})).next((()=>c.result))}es(e,n,i,o){return i.documentReadCount<this.ji?(Ul()<=ze.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(Ul()<=ze.DEBUG&&ve("QueryEngine","Query:",co(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Ul()<=ze.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cs(n))):oe.resolve())}Yi(e,n){if(I_(n))return oe.resolve(null);let i=Cs(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Ch(n,null,"F"),i=Cs(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Ue(...c);return this.Ji.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.ts(n,p);return this.ns(n,y,d,g.readTime)?this.Yi(e,Ch(n,null,"F")):this.rs(e,y,n,g)}))))})))))}Zi(e,n,i,o){return I_(n)||o.isEqual(Re.min())?oe.resolve(null):this.Ji.getDocuments(e,i).next((c=>{const d=this.ts(n,c);return this.ns(n,d,i,o)?oe.resolve(null):(Ul()<=ze.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),co(n)),this.rs(e,d,n,SR(o,-1)).next((p=>p)))}))}ts(e,n){let i=new Xt(Hb(e));return n.forEach(((o,c)=>{Hh(e,c)&&(i=i.add(c))})),i}ns(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Xi(e,n,i){return Ul()<=ze.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",co(n)),this.Ji.getDocumentsMatchingQuery(e,n,xi.min(),i)}rs(e,n,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,i,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new ht(Ke),this._s=new Do((c=>Tp(c)),Sp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function ZC(s,e,n,i){return new JC(s,e,n,i)}async function dw(s,e){const n=Ce(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,n.ls(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],p=[];let g=Ue();for(const y of o){d.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of c){p.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(i,g).next((y=>({hs:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function ej(s,e){const n=Ce(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=n.cs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,x){const w=y.batch,A=w.keys();let D=oe.resolve();return A.forEach((k=>{D=D.next((()=>x.getEntry(g,k))).next((q=>{const P=y.docVersions.get(k);et(P!==null),q.version.compareTo(P)<0&&(w.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),x.addEntry(q)))}))})),D.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Ue();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function fw(s){const e=Ce(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function tj(s,e){const n=Ce(s),i=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const p=[];e.targetChanges.forEach(((x,w)=>{const A=o.get(w);if(!A)return;p.push(n.Ur.removeMatchingKeys(c,x.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(c,x.addedDocuments,w))));let D=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?D=D.withResumeToken(Jt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):x.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(x.resumeToken,i)),o=o.insert(w,D),(function(q,P,Q){return q.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(A,D,x)&&p.push(n.Ur.updateTargetData(c,D))}));let g=_r(),y=Ue();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),p.push(nj(c,d,e.documentUpdates).next((x=>{g=x.Ps,y=x.Is}))),!i.isEqual(Re.min())){const x=n.Ur.getLastRemoteSnapshotVersion(c).next((w=>n.Ur.setTargetsMetadata(c,c.currentSequenceNumber,i)));p.push(x)}return oe.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.os=o,c)))}function nj(s,e,n){let i=Ue(),o=Ue();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let d=_r();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):ve("LocalStore","Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Ps:d,Is:o}}))}function sj(s,e){const n=Ce(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function rj(s,e){const n=Ce(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Ur.getTargetData(i,e).next((c=>c?(o=c,oe.resolve(o)):n.Ur.allocateTargetId(i).next((d=>(o=new pi(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i}))}async function Qm(s,e,n){const i=Ce(s),o=i.os.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!yc(d))throw d;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function q_(s,e,n){const i=Ce(s);let o=Re.min(),c=Ue();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,x){const w=Ce(g),A=w._s.get(x);return A!==void 0?oe.resolve(w.os.get(A)):w.Ur.getTargetData(y,x)})(i,d,Cs(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>i.ss.getDocumentsMatchingQuery(d,e,n?o:Re.min(),n?c:Ue()))).next((p=>(ij(i,YR(e),p),{documents:p,Ts:c})))))}function ij(s,e,n){let i=s.us.get(e)||Re.min();n.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.us.set(e,i)}class F_{constructor(){this.activeTargetIds=eC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aj{constructor(){this.so=new F_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new F_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh=null;function Tm(){return sh===null?sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():sh++,"0x"+sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class uj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${o}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${c}`}get Fo(){return!1}Mo(n,i,o,c,d){const p=Tm(),g=this.xo(n,i.toUriEncodedString());ve("RestConnection",`Sending RPC '${n}' ${p}:`,g,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,c,d),this.No(n,g,y,o).then((x=>(ve("RestConnection",`Received RPC '${n}' ${p}: `,x),x)),(x=>{throw _o("RestConnection",`RPC '${n}' ${p} failed with error: `,x,"url: ",g,"request:",o),x}))}Lo(n,i,o,c,d,p){return this.Mo(n,i,o,c,d)}Oo(n,i,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Co})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((c,d)=>n[d]=c)),o&&o.headers.forEach(((c,d)=>n[d]=c))}xo(n,i){const o=lj[n];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,o){const c=Tm();return new Promise(((d,p)=>{const g=new Ab;g.setWithCredentials(!0),g.listenOnce(Nb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case dh.NO_ERROR:const x=g.getResponseJson();ve(sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),d(x);break;case dh.TIMEOUT:ve(sn,`RPC '${e}' ${c} timed out`),p(new ge(ae.DEADLINE_EXCEEDED,"Request time out"));break;case dh.HTTP_ERROR:const w=g.getStatus();if(ve(sn,`RPC '${e}' ${c} failed with status:`,w,"response text:",g.getResponseText()),w>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A==null?void 0:A.error;if(D&&D.status&&D.message){const k=(function(P){const Q=P.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Q)>=0?Q:ae.UNKNOWN})(D.status);p(new ge(k,D.message))}else p(new ge(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ge(ae.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ve(sn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(o);ve(sn,`RPC '${e}' ${c} sending request:`,o),g.send(n,"POST",y,i,15)}))}Bo(e,n,i){const o=Tm(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=jb(),p=Cb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const x=c.join("");ve(sn,`Creating RPC '${e}' stream ${o}: ${x}`,g);const w=d.createWebChannel(x,g);let A=!1,D=!1;const k=new cj({Io:P=>{D?ve(sn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(A||(ve(sn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),A=!0),ve(sn,`RPC '${e}' stream ${o} sending:`,P),w.send(P))},To:()=>w.close()}),q=(P,Q,te)=>{P.listen(Q,(J=>{try{te(J)}catch(se){setTimeout((()=>{throw se}),0)}}))};return q(w,zl.EventType.OPEN,(()=>{D||(ve(sn,`RPC '${e}' stream ${o} transport opened.`),k.yo())})),q(w,zl.EventType.CLOSE,(()=>{D||(D=!0,ve(sn,`RPC '${e}' stream ${o} transport closed`),k.So())})),q(w,zl.EventType.ERROR,(P=>{D||(D=!0,_o(sn,`RPC '${e}' stream ${o} transport errored:`,P),k.So(new ge(ae.UNAVAILABLE,"The operation could not be completed")))})),q(w,zl.EventType.MESSAGE,(P=>{var Q;if(!D){const te=P.data[0];et(!!te);const J=te,se=J.error||((Q=J[0])===null||Q===void 0?void 0:Q.error);if(se){ve(sn,`RPC '${e}' stream ${o} received error:`,se);const ce=se.status;let ue=(function(R){const I=Nt[R];if(I!==void 0)return nw(I)})(ce),C=se.message;ue===void 0&&(ue=ae.INTERNAL,C="Unknown error status: "+ce+" with message "+se.message),D=!0,k.So(new ge(ue,C)),w.close()}else ve(sn,`RPC '${e}' stream ${o} received:`,te),k.bo(te)}})),q(p,Rb.STAT_EVENT,(P=>{P.stat===Pm.PROXY?ve(sn,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===Pm.NOPROXY&&ve(sn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.wo()}),0),k}}function Sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(s){return new xC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,i=1e3,o=1.5,c=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=o,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n,i,o,c,d,p,g){this.ui=e,this.Ho=i,this.Jo=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===n&&this.P_(i,o)}),(i=>{e((()=>{const o=new ge(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hj extends pw{constructor(e,n,i,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=c}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=EC(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Re.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?Is(d.readTime):Re.min()})(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Ym(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=Fm(g)?{documents:AC(c,g)}:{query:NC(c,g)._t},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=iw(c,d.resumeToken);const y=Gm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Re.min())>0){p.readTime=Ih(c,d.snapshotVersion.toTimestamp());const y=Gm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=CC(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Ym(this.serializer),n.removeTarget=e,this.a_(n)}}class dj extends pw{constructor(e,n,i,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=SC(e.writeResults,e.commitTime),i=Is(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Ym(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>TC(this.serializer,i)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj extends class{}{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ge(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Mo(e,$m(n,i),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ae.UNKNOWN,c.toString())}))}Lo(e,n,i,o,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Lo(e,$m(n,i),o,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ge(ae.UNKNOWN,d.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class mj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vr(n),this.D_=!1):ve("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o((d=>{i.enqueueAndForget((async()=>{va(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const y=Ce(g);y.L_.add(4),await xc(y),y.q_.set("Unknown"),y.L_.delete(4),await Qh(y)})(this))}))})),this.q_=new mj(i,o)}}async function Qh(s){if(va(s))for(const e of s.B_)await e(!0)}async function xc(s){for(const e of s.B_)await e(!1)}function gw(s,e){const n=Ce(s);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Vp(n)?Lp(n):Mo(n).r_()&&kp(n,e))}function Op(s,e){const n=Ce(s),i=Mo(n);n.N_.delete(e),i.r_()&&yw(n,e),n.N_.size===0&&(i.r_()?i.o_():va(n)&&n.q_.set("Unknown"))}function kp(s,e){if(s.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(s).A_(e)}function yw(s,e){s.Q_.xe(e),Mo(s).R_(e)}function Lp(s){s.Q_=new gC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>s.N_.get(e)||null,tt:()=>s.datastore.serializer.databaseId}),Mo(s).start(),s.q_.v_()}function Vp(s){return va(s)&&!Mo(s).n_()&&s.N_.size>0}function va(s){return Ce(s).L_.size===0}function vw(s){s.Q_=void 0}async function gj(s){s.q_.set("Online")}async function yj(s){s.N_.forEach(((e,n)=>{kp(s,e)}))}async function vj(s,e){vw(s),Vp(s)?(s.q_.M_(e),Lp(s)):s.q_.set("Unknown")}async function _j(s,e,n){if(s.q_.set("Online"),e instanceof rw&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const p of c.targetIds)o.N_.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.N_.delete(p),o.Q_.removeTarget(p))})(s,e)}catch(i){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dh(s,i)}else if(e instanceof ph?s.Q_.Ke(e):e instanceof sw?s.Q_.He(e):s.Q_.We(e),!n.isEqual(Re.min()))try{const i=await fw(s.localStore);n.compareTo(i)>=0&&await(function(c,d){const p=c.Q_.rt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=c.N_.get(y);x&&c.N_.set(y,x.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const x=c.N_.get(g);if(!x)return;c.N_.set(g,x.withResumeToken(Jt.EMPTY_BYTE_STRING,x.snapshotVersion)),yw(c,g);const w=new pi(x.target,g,y,x.sequenceNumber);kp(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){ve("RemoteStore","Failed to raise snapshot:",i),await Dh(s,i)}}async function Dh(s,e,n){if(!yc(e))throw e;s.L_.add(1),await xc(s),s.q_.set("Offline"),n||(n=()=>fw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ve("RemoteStore","Retrying IndexedDB access"),await n(),s.L_.delete(1),await Qh(s)}))}function _w(s,e){return e().catch((n=>Dh(s,n,e)))}async function Xh(s){const e=Ce(s),n=wi(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xj(e);)try{const o=await sj(e.localStore,i);if(o===null){e.O_.length===0&&n.o_();break}i=o.batchId,bj(e,o)}catch(o){await Dh(e,o)}xw(e)&&bw(e)}function xj(s){return va(s)&&s.O_.length<10}function bj(s,e){s.O_.push(e);const n=wi(s);n.r_()&&n.V_&&n.m_(e.mutations)}function xw(s){return va(s)&&!wi(s).n_()&&s.O_.length>0}function bw(s){wi(s).start()}async function wj(s){wi(s).p_()}async function Ej(s){const e=wi(s);for(const n of s.O_)e.m_(n.mutations)}async function Tj(s,e,n){const i=s.O_.shift(),o=Rp.from(i,e,n);await _w(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Xh(s)}async function Sj(s,e){e&&wi(s).V_&&await(async function(i,o){if((function(d){return fC(d)&&d!==ae.ABORTED})(o.code)){const c=i.O_.shift();wi(i).s_(),await _w(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Xh(i)}})(s,e),xw(s)&&bw(s)}async function G_(s,e){const n=Ce(s);n.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const i=va(n);n.L_.add(3),await xc(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Qh(n)}async function Aj(s,e){const n=Ce(s);e?(n.L_.delete(2),await Qh(n)):e||(n.L_.add(2),await xc(n),n.q_.set("Unknown"))}function Mo(s){return s.K_||(s.K_=(function(n,i,o){const c=Ce(n);return c.w_(),new hj(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Eo:gj.bind(null,s),Ro:yj.bind(null,s),mo:vj.bind(null,s),d_:_j.bind(null,s)}),s.B_.push((async e=>{e?(s.K_.s_(),Vp(s)?Lp(s):s.q_.set("Unknown")):(await s.K_.stop(),vw(s))}))),s.K_}function wi(s){return s.U_||(s.U_=(function(n,i,o){const c=Ce(n);return c.w_(),new dj(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:wj.bind(null,s),mo:Sj.bind(null,s),f_:Ej.bind(null,s),g_:Tj.bind(null,s)}),s.B_.push((async e=>{e?(s.U_.s_(),await Xh(s)):(await s.U_.stop(),s.O_.length>0&&(ve("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))}))),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const d=Date.now()+i,p=new Up(e,n,d,o,c);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(s,e){if(vr("AsyncQueue",`${e}: ${s}`),yc(s))return new ge(ae.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ee.comparator(n.key,i.key):(n,i)=>Ee.comparator(n.key,i.key),this.keyedMap=Bl(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new yo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new yo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.W_=new ht(Ee.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,i)=>{e.push(i)})),e}}class To{constructor(e,n,i,o,c,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new To(e,n,yo.emptySet(n),d,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Rj{constructor(){this.queries=K_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const o=Ce(n),c=o.queries;o.queries=K_(),c.forEach(((d,p)=>{for(const g of p.j_)g.onError(i)}))})(this,new ge(ae.ABORTED,"Firestore shutting down"))}}function K_(){return new Do((s=>Fb(s)),Fh)}async function ww(s,e){const n=Ce(s);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.H_()&&e.J_()&&(i=2):(c=new Nj,i=e.J_()?0:1);try{switch(i){case 0:c.z_=await n.onListen(o,!0);break;case 1:c.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=Pp(d,`Initialization of query '${co(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.j_.push(e),e.Z_(n.onlineState),c.z_&&e.X_(c.z_)&&zp(n)}async function Ew(s,e){const n=Ce(s),i=e.query;let o=3;const c=n.queries.get(i);if(c){const d=c.j_.indexOf(e);d>=0&&(c.j_.splice(d,1),c.j_.length===0?o=e.J_()?0:1:!c.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Cj(s,e){const n=Ce(s);let i=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const p of d.j_)p.X_(o)&&(i=!0);d.z_=o}}i&&zp(n)}function jj(s,e,n){const i=Ce(s),o=i.queries.get(e);if(o)for(const c of o.j_)c.onError(n);i.queries.delete(e)}function zp(s){s.Y_.forEach((e=>{e.next()}))}var Xm,Y_;(Y_=Xm||(Xm={})).ea="default",Y_.Cache="cache";class Tw{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new To(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=To.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.key=e}}class Aw{constructor(e){this.key=e}}class Ij{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ue(),this.mutatedKeys=Ue(),this.Aa=Hb(e),this.Ra=new yo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new $_,o=n?n.Ra:this.Ra;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,w)=>{const A=o.get(x),D=Hh(this.query,w)?w:null,k=!!A&&this.mutatedKeys.has(A.key),q=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let P=!1;A&&D?A.data.isEqual(D.data)?k!==q&&(i.track({type:3,doc:D}),P=!0):this.ga(A,D)||(i.track({type:2,doc:D}),P=!0,(g&&this.Aa(D,g)>0||y&&this.Aa(D,y)<0)&&(p=!0)):!A&&D?(i.track({type:0,doc:D}),P=!0):A&&!D&&(i.track({type:1,doc:A}),P=!0,(g||y)&&(p=!0)),P&&(D?(d=d.add(D),c=q?c.add(x):c.delete(x)):(d=d.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),c=c.delete(x.key),i.track({type:1,doc:x})}return{Ra:d,fa:i,ns:p,mutatedKeys:c}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const d=e.fa.G_();d.sort(((x,w)=>(function(D,k){const q=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return q(D)-q(k)})(x.type,w.type)||this.Aa(x.doc,w.doc))),this.pa(i),o=o!=null&&o;const p=n&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,y=g!==this.Ea;return this.Ea=g,d.length!==0||y?{snapshot:new To(this.query,e.Ra,c,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:p}:{wa:p}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ue(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const n=[];return e.forEach((i=>{this.da.has(i)||n.push(new Aw(i))})),this.da.forEach((i=>{e.has(i)||n.push(new Sw(i))})),n}ba(e){this.Ta=e.Ts,this.da=Ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return To.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Dj{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Mj{constructor(e){this.key=e,this.va=!1}}class Oj{constructor(e,n,i,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ca={},this.Fa=new Do((p=>Fb(p)),Fh),this.Ma=new Map,this.xa=new Set,this.Oa=new ht(Ee.comparator),this.Na=new Map,this.La=new Ip,this.Ba={},this.ka=new Map,this.qa=Eo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kj(s,e,n=!0){const i=Dw(s);let o;const c=i.Fa.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Da()):o=await Nw(i,e,n,!0),o}async function Lj(s,e){const n=Dw(s);await Nw(n,e,!0,!1)}async function Nw(s,e,n,i){const o=await rj(s.localStore,Cs(e)),c=o.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let p;return i&&(p=await Vj(s,e,c,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&gw(s.remoteStore,o),p}async function Vj(s,e,n,i,o){s.Ka=(w,A,D)=>(async function(q,P,Q,te){let J=P.view.ma(Q);J.ns&&(J=await q_(q.localStore,P.query,!1).then((({documents:C})=>P.view.ma(C,J))));const se=te&&te.targetChanges.get(P.targetId),ce=te&&te.targetMismatches.get(P.targetId)!=null,ue=P.view.applyChanges(J,q.isPrimaryClient,se,ce);return X_(q,P.targetId,ue.wa),ue.snapshot})(s,w,A,D);const c=await q_(s.localStore,e,!0),d=new Ij(e,c.Ts),p=d.ma(c.documents),g=_c.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),y=d.applyChanges(p,s.isPrimaryClient,g);X_(s,n,y.wa);const x=new Dj(e,n,d);return s.Fa.set(e,x),s.Ma.has(n)?s.Ma.get(n).push(e):s.Ma.set(n,[e]),y.snapshot}async function Uj(s,e,n){const i=Ce(s),o=i.Fa.get(e),c=i.Ma.get(o.targetId);if(c.length>1)return i.Ma.set(o.targetId,c.filter((d=>!Fh(d,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Qm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Op(i.remoteStore,o.targetId),Wm(i,o.targetId)})).catch(gc)):(Wm(i,o.targetId),await Qm(i.localStore,o.targetId,!0))}async function Pj(s,e){const n=Ce(s),i=n.Fa.get(e),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Op(n.remoteStore,i.targetId))}async function zj(s,e,n){const i=Kj(s);try{const o=await(function(d,p){const g=Ce(d),y=It.now(),x=p.reduce(((D,k)=>D.add(k.key)),Ue());let w,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let k=_r(),q=Ue();return g.cs.getEntries(D,x).next((P=>{k=P,k.forEach(((Q,te)=>{te.isValidDocument()||(q=q.add(Q))}))})).next((()=>g.localDocuments.getOverlayedDocuments(D,k))).next((P=>{w=P;const Q=[];for(const te of p){const J=lC(te,w.get(te.key).overlayedDocument);J!=null&&Q.push(new ya(te.key,J,kb(J.value.mapValue),js.exists(!0)))}return g.mutationQueue.addMutationBatch(D,y,Q,p)})).next((P=>{A=P;const Q=P.applyToLocalDocumentSet(w,q);return g.documentOverlayCache.saveOverlays(D,P.batchId,Q)}))})).then((()=>({batchId:A.batchId,changes:$b(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let y=d.Ba[d.currentUser.toKey()];y||(y=new ht(Ke)),y=y.insert(p,g),d.Ba[d.currentUser.toKey()]=y})(i,o.batchId,n),await bc(i,o.changes),await Xh(i.remoteStore)}catch(o){const c=Pp(o,"Failed to persist write");n.reject(c)}}async function Rw(s,e){const n=Ce(s);try{const i=await tj(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Na.get(c);d&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.va=!0:o.modifiedDocuments.size>0?et(d.va):o.removedDocuments.size>0&&(et(d.va),d.va=!1))})),await bc(n,i,e)}catch(i){await gc(i)}}function Q_(s,e,n){const i=Ce(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach(((c,d)=>{const p=d.view.Z_(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Ce(d);g.onlineState=p;let y=!1;g.queries.forEach(((x,w)=>{for(const A of w.j_)A.Z_(p)&&(y=!0)})),y&&zp(g)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Bj(s,e,n){const i=Ce(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Na.get(e),c=o&&o.key;if(c){let d=new ht(Ee.comparator);d=d.insert(c,on.newNoDocument(c,Re.min()));const p=Ue().add(c),g=new Kh(Re.min(),new Map,new ht(Ke),d,p);await Rw(i,g),i.Oa=i.Oa.remove(c),i.Na.delete(e),Bp(i)}else await Qm(i.localStore,e,!1).then((()=>Wm(i,e,n))).catch(gc)}async function qj(s,e){const n=Ce(s),i=e.batch.batchId;try{const o=await ej(n.localStore,e);jw(n,i,null),Cw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await bc(n,o)}catch(o){await gc(o)}}async function Fj(s,e,n){const i=Ce(s);try{const o=await(function(d,p){const g=Ce(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,p).next((w=>(et(w!==null),x=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(i.localStore,e);jw(i,e,n),Cw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await bc(i,o)}catch(o){await gc(o)}}function Cw(s,e){(s.ka.get(e)||[]).forEach((n=>{n.resolve()})),s.ka.delete(e)}function jw(s,e,n){const i=Ce(s);let o=i.Ba[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Wm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Ma.get(e))s.Fa.delete(i),n&&s.Ca.$a(i,n);s.Ma.delete(e),s.isPrimaryClient&&s.La.gr(e).forEach((i=>{s.La.containsKey(i)||Iw(s,i)}))}function Iw(s,e){s.xa.delete(e.path.canonicalString());const n=s.Oa.get(e);n!==null&&(Op(s.remoteStore,n),s.Oa=s.Oa.remove(e),s.Na.delete(n),Bp(s))}function X_(s,e,n){for(const i of n)i instanceof Sw?(s.La.addReference(i.key,e),Hj(s,i)):i instanceof Aw?(ve("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,e),s.La.containsKey(i.key)||Iw(s,i.key)):Ae()}function Hj(s,e){const n=e.key,i=n.path.canonicalString();s.Oa.get(n)||s.xa.has(i)||(ve("SyncEngine","New document in limbo: "+n),s.xa.add(i),Bp(s))}function Bp(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const e=s.xa.values().next().value;s.xa.delete(e);const n=new Ee(lt.fromString(e)),i=s.qa.next();s.Na.set(i,new Mj(n)),s.Oa=s.Oa.insert(n,i),gw(s.remoteStore,new pi(Cs(Ap(n.path)),i,"TargetPurposeLimboResolution",xp.oe))}}async function bc(s,e,n){const i=Ce(s),o=[],c=[],d=[];i.Fa.isEmpty()||(i.Fa.forEach(((p,g)=>{d.push(i.Ka(g,e,n).then((y=>{var x;if((y||n)&&i.isPrimaryClient){const w=y?!y.fromCache:(x=n==null?void 0:n.targetChanges.get(g.targetId))===null||x===void 0?void 0:x.current;i.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Mp.Wi(g.targetId,y);c.push(w)}})))})),await Promise.all(d),i.Ca.d_(o),await(async function(g,y){const x=Ce(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>oe.forEach(y,(A=>oe.forEach(A.$i,(D=>x.persistence.referenceDelegate.addReference(w,A.targetId,D))).next((()=>oe.forEach(A.Ui,(D=>x.persistence.referenceDelegate.removeReference(w,A.targetId,D)))))))))}catch(w){if(!yc(w))throw w;ve("LocalStore","Failed to update sequence numbers: "+w)}for(const w of y){const A=w.targetId;if(!w.fromCache){const D=x.os.get(A),k=D.snapshotVersion,q=D.withLastLimboFreeSnapshotVersion(k);x.os=x.os.insert(A,q)}}})(i.localStore,c))}async function Gj(s,e){const n=Ce(s);if(!n.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const i=await dw(n.localStore,e);n.currentUser=e,(function(c,d){c.ka.forEach((p=>{p.forEach((g=>{g.reject(new ge(ae.CANCELLED,d))}))})),c.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bc(n,i.hs)}}function $j(s,e){const n=Ce(s),i=n.Na.get(e);if(i&&i.va)return Ue().add(i.key);{let o=Ue();const c=n.Ma.get(e);if(!c)return o;for(const d of c){const p=n.Fa.get(d);o=o.unionWith(p.view.Va)}return o}}function Dw(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$j.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bj.bind(null,e),e.Ca.d_=Cj.bind(null,e.eventManager),e.Ca.$a=jj.bind(null,e.eventManager),e}function Kj(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fj.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ZC(this.persistence,new WC,e.initialUser,this.serializer)}Ga(e){return new YC(Dp.Zr,this.serializer)}Wa(e){return new aj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class Jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Q_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gj.bind(null,this.syncEngine),await Aj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Rj})()}createDatastore(e){const n=Yh(e.databaseInfo.databaseId),i=(function(c){return new uj(c)})(e.databaseInfo);return(function(c,d,p,g){return new fj(c,d,p,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,c,d,p){return new pj(i,o,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Q_(this.syncEngine,n,0)),(function(){return H_.D()?new H_:new oj})())}createSyncEngine(e,n){return(function(o,c,d,p,g,y,x){const w=new Oj(o,c,d,p,g,y);return x&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Ce(o);ve("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await xc(c),c.k_.shutdown(),c.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=Db.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{ve("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ve("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Pp(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Am(s,e){s.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await dw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function W_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await Qj(s);ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>G_(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>G_(e.remoteStore,o))),s._onlineComponents=e}async function Qj(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await Am(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),await Am(s,new Mh)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await Am(s,new Mh);return s._offlineComponents}async function Ow(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await W_(s,s._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await W_(s,new Jm))),s._onlineComponents}function Xj(s){return Ow(s).then((e=>e.syncEngine))}async function kw(s){const e=await Ow(s),n=e.eventManager;return n.onListen=kj.bind(null,e.syncEngine),n.onUnlisten=Uj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Lj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Pj.bind(null,e.syncEngine),n}function Wj(s,e,n={}){const i=new fr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const x=new Mw({next:A=>{x.Za(),d.enqueueAndForget((()=>Ew(c,w)));const D=A.docs.has(p);!D&&A.fromCache?y.reject(new ge(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&A.fromCache&&g&&g.source==="server"?y.reject(new ge(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new Tw(Ap(p.path),x,{includeMetadataChanges:!0,_a:!0});return ww(c,w)})(await kw(s),s.asyncQueue,e,n,i))),i.promise}function Jj(s,e,n={}){const i=new fr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const x=new Mw({next:A=>{x.Za(),d.enqueueAndForget((()=>Ew(c,w))),A.fromCache&&g.source==="server"?y.reject(new ge(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new Tw(p,x,{includeMetadataChanges:!0,_a:!0});return ww(c,w)})(await kw(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(s,e,n){if(!n)throw new ge(ae.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Zj(s,e,n,i){if(e===!0&&i===!0)throw new ge(ae.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Z_(s){if(!Ee.isDocumentKey(s))throw new ge(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function ex(s){if(Ee.isDocumentKey(s))throw new ge(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Wh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ae()}function Ei(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ge(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wh(s);throw new ge(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function eI(s,e){if(e<=0)throw new ge(ae.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Zj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ge(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ge(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ge(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jh{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tx(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new gR;switch(i.type){case"firstParty":return new xR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=J_.get(n);i&&(ve("ComponentProvider","Removing Datastore"),J_.delete(n),i.terminate())})(this),Promise.resolve()}}function Uw(s,e,n,i={}){var o;const c=(s=Ei(s,Jh))._getSettings(),d=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),i.mockUserToken){let p,g;if(typeof i.mockUserToken=="string")p=i.mockUserToken,g=an.MOCK_USER;else{p=Px(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ge(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new an(y)}s._authCredentials=new yR(new Ib(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Rn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class vi extends Si{constructor(e,n,i){super(e,n,Ap(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new Ee(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function _n(s,e,...n){if(s=Wt(s),Vw("collection","path",e),s instanceof Jh){const i=lt.fromString(e,...n);return ex(i),new vi(s,null,i)}{if(!(s instanceof Rn||s instanceof vi))throw new ge(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(lt.fromString(e,...n));return ex(i),new vi(s.firestore,null,i)}}function Zh(s,e,...n){if(s=Wt(s),arguments.length===1&&(e=Db.newId()),Vw("doc","path",e),s instanceof Jh){const i=lt.fromString(e,...n);return Z_(i),new Rn(s,null,new Ee(i))}{if(!(s instanceof Rn||s instanceof vi))throw new ge(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(lt.fromString(e,...n));return Z_(i),new Rn(s.firestore,s instanceof vi?s.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new mw(this,"async_queue_retry"),this.Vu=()=>{const i=Sm();i&&ve("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Sm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Sm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new fr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yc(e))throw e;ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(d){let p=d.message||"";return d.stack&&(p=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),p})(i);throw vr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=Up.createAndSchedule(this,e,n,i,(c=>this.yu(c)));return this.Tu.push(o),o}fu(){this.Eu&&Ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class wc extends Jh{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new nx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nx(e),this._firestoreClient=void 0,await e}}}function tI(s,e){const n=typeof s=="object"?s:lp(),i=typeof s=="string"?s:"(default)",o=Ph(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=Lx("firestore");c&&Uw(o,...c)}return o}function qp(s){if(s._terminated)throw new ge(ae.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||nI(s),s._firestoreClient}function nI(s){var e,n,i;const o=s._freezeSettings(),c=(function(p,g,y,x){return new MR(p,g,y,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,Lw(x.experimentalLongPollingOptions),x.useFetchStreams)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new Yj(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._byteString=e}static fromBase64String(e){try{return new So(Jt.fromBase64String(e))}catch(n){throw new ge(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new So(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=/^__.*__$/;class rI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ya(e,this.data,this.fieldMask,n,this.fieldTransforms):new vc(e,this.data,n,this.fieldTransforms)}}function Pw(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Kp{constructor(e,n,i,o,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Kp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Oh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Pw(this.Cu)&&sI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class iI{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Yh(e)}Qu(e,n,i,o=!1){return new Kp({Cu:e,methodName:n,qu:i,path:Qt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yp(s){const e=s._freezeSettings(),n=Yh(s._databaseId);return new iI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function zw(s,e,n,i,o,c={}){const d=s.Qu(c.merge||c.mergeFields?2:0,e,n,o);Fw("Data must be an object, but it was:",d,i);const p=Bw(i,d);let g,y;if(c.merge)g=new ls(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const x=[];for(const w of c.mergeFields){const A=oI(e,w,n);if(!d.contains(A))throw new ge(ae.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);cI(x,A)||x.push(A)}g=new ls(x),y=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=d.fieldTransforms;return new rI(new es(p),g,y)}class Qp extends Hp{_toFieldTransform(e){return new rC(e.path,new ic)}isEqual(e){return e instanceof Qp}}function aI(s,e,n,i=!1){return Xp(n,s.Qu(i?4:3,e))}function Xp(s,e){if(qw(s=Wt(s)))return Fw("Unsupported field value:",e,s),Bw(s,e);if(s instanceof Hp)return(function(i,o){if(!Pw(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const c=[];let d=0;for(const p of i){let g=Xp(p,o.Lu(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(s,e)}return(function(i,o){if((i=Wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=It.fromDate(i);return{timestampValue:Ih(o.serializer,c)}}if(i instanceof It){const c=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ih(o.serializer,c)}}if(i instanceof Gp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof So)return{bytesValue:iw(o.serializer,i._byteString)};if(i instanceof Rn){const c=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw o.Bu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:jp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof $p)return(function(d,p){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw p.Bu("VectorValues must only contain numeric values.");return Np(p.serializer,g)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${Wh(i)}`)})(s,e)}function Bw(s,e){const n={};return Mb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jo(s,((i,o)=>{const c=Xp(o,e.Mu(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function qw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof It||s instanceof Gp||s instanceof So||s instanceof Rn||s instanceof Hp||s instanceof $p)}function Fw(s,e,n){if(!qw(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const i=Wh(n);throw i==="an object"?e.Bu(s+" a custom object"):e.Bu(s+" "+i)}}function oI(s,e,n){if((e=Wt(e))instanceof Fp)return e._internalPath;if(typeof e=="string")return Hw(s,e);throw Oh("Field path arguments must be of type string or ",s,!1,void 0,n)}const lI=new RegExp("[~\\*/\\[\\]]");function Hw(s,e,n){if(e.search(lI)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Fp(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Oh(s,e,n,i,o){const c=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new ge(ae.INVALID_ARGUMENT,p+s+g)}function cI(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ed("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uI extends Gw{data(){return super.data()}}function ed(s,e){return typeof e=="string"?Hw(s,e):e instanceof Fp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ge(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wp{}class Jp extends Wp{}function hs(s,e,...n){let i=[];e instanceof Wp&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((g=>g instanceof Zp)).length,p=c.filter((g=>g instanceof td)).length;if(d>1||d>0&&p>0)throw new ge(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class td extends Jp{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new td(e,n,i)}_apply(e){const n=this._parse(e);return Kw(e._query,n),new Si(e.firestore,e.converter,Hm(e._query,n))}_parse(e){const n=Yp(e.firestore);return(function(c,d,p,g,y,x,w){let A;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ge(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){rx(w,x);const D=[];for(const k of w)D.push(sx(g,c,k));A={arrayValue:{values:D}}}else A=sx(g,c,w)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||rx(w,x),A=aI(p,d,w,x==="in"||x==="not-in");return Rt.create(y,x,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nd(s,e,n){const i=e,o=ed("where",s);return td._create(o,i,n)}class Zp extends Wp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zp(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:us.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const p=c.getFlattenedFilters();for(const g of p)Kw(d,g),d=Hm(d,g)})(e._query,n),new Si(e.firestore,e.converter,Hm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class eg extends Jp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new eg(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new ge(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rc(c,d)})(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new Io(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Ls(s,e="asc"){const n=e,i=ed("orderBy",s);return eg._create(i,n)}class tg extends Jp{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new tg(e,n,i)}_apply(e){return new Si(e.firestore,e.converter,Ch(e._query,this._limit,this._limitType))}}function $w(s){return eI("limit",s),tg._create("limit",s,"F")}function sx(s,e,n){if(typeof(n=Wt(n))=="string"){if(n==="")throw new ge(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qb(e)&&n.indexOf("/")!==-1)throw new ge(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(lt.fromString(n));if(!Ee.isDocumentKey(i))throw new ge(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return S_(s,new Ee(i))}if(n instanceof Rn)return S_(s,n._key);throw new ge(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(n)}.`)}function rx(s,e){if(!Array.isArray(s)||s.length===0)throw new ge(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kw(s,e){const n=(function(o,c){for(const d of o)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dI{convertValue(e,n="none"){switch(da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return jo(e,((o,c)=>{i[o]=this.convertValue(c,n)})),i}convertVectorValue(e){var n,i,o;const c=(o=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>bt(d.doubleValue)));return new $p(c)}convertGeoPoint(e){return new Gp(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=wp(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){const n=bi(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=lt.fromString(e);et(hw(i));const o=new nc(i.get(1),i.get(3)),c=new Ee(i.popFirst(5));return o.isEqual(n)||vr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qw extends Gw{constructor(e,n,i,o,c,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ed("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class gh extends Qw{data(e={}){return super.data(e)}}class fI{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Fl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new gh(this._firestore,this._userDataWriter,i.key,i,new Fl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new gh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Fl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new gh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Fl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),x=d.indexOf(p.doc.key)),{type:mI(p.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function mI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(s){s=Ei(s,Rn);const e=Ei(s.firestore,wc);return Wj(qp(e),s._key).then((n=>gI(e,s,n)))}class Ww extends dI{constructor(e){super(),this.firestore=e}convertBytes(e){return new So(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function Pn(s){s=Ei(s,Si);const e=Ei(s.firestore,wc),n=qp(e),i=new Ww(e);return hI(s._query),Jj(n,s._query).then((o=>new fI(e,i,s,o)))}function pI(s,e,n){s=Ei(s,Rn);const i=Ei(s.firestore,wc),o=Yw(s.converter,e,n);return Zw(i,[zw(Yp(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,js.none())])}function Jw(s,e){const n=Ei(s.firestore,wc),i=Zh(s),o=Yw(s.converter,e);return Zw(n,[zw(Yp(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,js.exists(!1))]).then((()=>i))}function Zw(s,e){return(function(i,o){const c=new fr;return i.asyncQueue.enqueueAndForget((async()=>zj(await Xj(i),o,c))),c.promise})(qp(s),e)}function gI(s,e,n){const i=n.docs.get(e._key),o=new Ww(s);return new Qw(s,o,e._key,i,new Fl(n.hasPendingWrites,n.fromCache),e.converter)}function eE(){return new Qp("serverTimestamp")}(function(e,n=!0){(function(o){Co=o})(ga),la(new _i("firestore",((i,{instanceIdentifier:o,options:c})=>{const d=i.getProvider("app").getImmediate(),p=new wc(new vR(i.getProvider("auth-internal")),new wR(i.getProvider("app-check-internal")),(function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nc(y.options.projectId,x)})(d,o),d);return c=Object.assign({useFetchStreams:n},c),p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),As(x_,"4.7.3",e),As(x_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="firebasestorage.googleapis.com",nE="storageBucket",yI=120*1e3,vI=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt extends ks{constructor(e,n,i=0){super(Nm(e),`Firebase Storage: ${n} (${Nm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Nm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gt||(gt={}));function Nm(s){return"storage/"+s}function ng(){const s="An unknown error occurred, please check the error payload for server response.";return new yt(gt.UNKNOWN,s)}function _I(s){return new yt(gt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function xI(s){return new yt(gt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function bI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yt(gt.UNAUTHENTICATED,s)}function wI(){return new yt(gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EI(s){return new yt(gt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function TI(){return new yt(gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SI(){return new yt(gt.CANCELED,"User canceled the upload/download.")}function AI(s){return new yt(gt.INVALID_URL,"Invalid URL '"+s+"'.")}function NI(s){return new yt(gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function RI(){return new yt(gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nE+"' property when initializing the app?")}function CI(){return new yt(gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jI(){return new yt(gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function II(s){return new yt(gt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zm(s){return new yt(gt.INVALID_ARGUMENT,s)}function sE(){return new yt(gt.APP_DELETED,"The Firebase app was deleted.")}function DI(s){return new yt(gt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xl(s,e){return new yt(gt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Pl(s){throw new yt(gt.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Un.makeFromUrl(e,n)}catch{return new Un(e,"")}if(i.path==="")return i;throw NI(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function c(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(se){se.path_=decodeURIComponent(se.path)}const x="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",D=new RegExp(`^https?://${w}/${x}/b/${o}/o${A}`,"i"),k={bucket:1,path:3},q=n===tE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",Q=new RegExp(`^https?://${q}/${o}/${P}`,"i"),J=[{regex:p,indices:g,postModify:c},{regex:D,indices:k,postModify:y},{regex:Q,indices:{bucket:1,path:2},postModify:y}];for(let se=0;se<J.length;se++){const ce=J[se],ue=ce.regex.exec(e);if(ue){const C=ue[ce.indices.bucket];let N=ue[ce.indices.path];N||(N=""),i=new Un(C,N),ce.postModify(i);break}}if(i==null)throw AI(e);return i}}class MI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(s,e,n){let i=1,o=null,c=null,d=!1,p=0;function g(){return p===2}let y=!1;function x(...P){y||(y=!0,e.apply(null,P))}function w(P){o=setTimeout(()=>{o=null,s(D,g())},P)}function A(){c&&clearTimeout(c)}function D(P,...Q){if(y){A();return}if(P){A(),x.call(null,P,...Q);return}if(g()||d){A(),x.call(null,P,...Q);return}i<64&&(i*=2);let J;p===1?(p=2,J=0):J=(i+Math.random())*1e3,w(J)}let k=!1;function q(P){k||(k=!0,A(),!y&&(o!==null?(P||(p=2),clearTimeout(o),w(0)):P||(p=1)))}return w(0),c=setTimeout(()=>{d=!0,q(!0)},n),q}function kI(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(s){return s!==void 0}function VI(s){return typeof s=="object"&&!Array.isArray(s)}function sg(s){return typeof s=="string"||s instanceof String}function ix(s){return rg()&&s instanceof Blob}function rg(){return typeof Blob<"u"}function ax(s,e,n,i){if(i<e)throw Zm(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw Zm(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function rE(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const o=e(i)+"="+e(s[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var oa;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(oa||(oa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,i,o,c,d,p,g,y,x,w,A=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=w,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,k)=>{this.resolve_=D,this.reject_=k,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new rh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const p=c.getErrorCode()===oa.NO_ERROR,g=c.getStatus();if(!p||UI(g,this.additionalRetryCodes_)&&this.retry){const x=c.getErrorCode()===oa.ABORT;i(!1,new rh(!1,null,x));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new rh(y,c))})},n=(i,o)=>{const c=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());LI(g)?c(g):c()}catch(g){d(g)}else if(p!==null){const g=ng();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?sE():SI();d(g)}else{const g=TI();d(g)}};this.canceled_?n(!1,new rh(!1,null,!0)):this.backoffId_=OI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function zI(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function BI(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qI(s,e){e&&(s["X-Firebase-GMPID"]=e)}function FI(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function HI(s,e,n,i,o,c,d=!0){const p=rE(s.urlParams),g=s.url+p,y=Object.assign({},s.headers);return qI(y,e),zI(y,n),BI(y,c),FI(y,i),new PI(g,s.method,y,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $I(...s){const e=GI();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(rg())return new Blob(s);throw new yt(gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function KI(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(s){if(typeof atob>"u")throw II("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rm{constructor(e,n){this.data=e,this.contentType=n||null}}function QI(s,e){switch(s){case Ss.RAW:return new Rm(iE(e));case Ss.BASE64:case Ss.BASE64URL:return new Rm(aE(s,e));case Ss.DATA_URL:return new Rm(WI(e),JI(e))}throw ng()}function iE(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=i,d=s.charCodeAt(++n);i=65536|(c&1023)<<10|d&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function XI(s){let e;try{e=decodeURIComponent(s)}catch{throw Xl(Ss.DATA_URL,"Malformed data URL.")}return iE(e)}function aE(s,e){switch(s){case Ss.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw Xl(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ss.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw Xl(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=YI(e)}catch(o){throw o.message.includes("polyfill")?o:Xl(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}class oE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xl(Ss.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=ZI(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function WI(s){const e=new oE(s);return e.base64?aE(Ss.BASE64,e.rest):XI(e.rest)}function JI(s){return new oE(s).contentType}function ZI(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n){let i=0,o="";ix(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(ix(this.data_)){const i=this.data_,o=KI(i,e,n);return o===null?null:new fi(o)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new fi(i,!0)}}static getBlob(...e){if(rg()){const n=e.map(i=>i instanceof fi?i.data_:i);return new fi($I.apply(null,n))}else{const n=e.map(d=>sg(d)?QI(Ss.RAW,d).data:d.data_);let i=0;n.forEach(d=>{i+=d.byteLength});const o=new Uint8Array(i);let c=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)o[c++]=d[p]}),new fi(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(s){let e;try{e=JSON.parse(s)}catch{return null}return VI(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function t4(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function cE(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(s,e){return e}class yn{constructor(e,n,i,o){this.server=e,this.local=n||e,this.writable=!!i,this.xform=o||n4}}let ih=null;function s4(s){return!sg(s)||s.length<2?s:cE(s)}function uE(){if(ih)return ih;const s=[];s.push(new yn("bucket")),s.push(new yn("generation")),s.push(new yn("metageneration")),s.push(new yn("name","fullPath",!0));function e(c,d){return s4(d)}const n=new yn("name");n.xform=e,s.push(n);function i(c,d){return d!==void 0?Number(d):d}const o=new yn("size");return o.xform=i,s.push(o),s.push(new yn("timeCreated")),s.push(new yn("updated")),s.push(new yn("md5Hash",null,!0)),s.push(new yn("cacheControl",null,!0)),s.push(new yn("contentDisposition",null,!0)),s.push(new yn("contentEncoding",null,!0)),s.push(new yn("contentLanguage",null,!0)),s.push(new yn("contentType",null,!0)),s.push(new yn("metadata","customMetadata",!0)),ih=s,ih}function r4(s,e){function n(){const i=s.bucket,o=s.fullPath,c=new Un(i,o);return e._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:n})}function i4(s,e,n){const i={};i.type="file";const o=n.length;for(let c=0;c<o;c++){const d=n[c];i[d.local]=d.xform(i,e[d.server])}return r4(i,s),i}function hE(s,e,n){const i=lE(e);return i===null?null:i4(s,i,n)}function a4(s,e,n,i){const o=lE(e);if(o===null||!sg(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(y=>{const x=s.bucket,w=s.fullPath,A="/b/"+d(x)+"/o/"+d(w),D=ig(A,n,i),k=rE({alt:"media",token:y});return D+k})[0]}function o4(s,e){const n={},i=e.length;for(let o=0;o<i;o++){const c=e[o];c.writable&&(n[c.server]=s[c.local])}return JSON.stringify(n)}class dE{constructor(e,n,i,o){this.url=e,this.method=n,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(s){if(!s)throw ng()}function l4(s,e){function n(i,o){const c=hE(s,o,e);return fE(c!==null),c}return n}function c4(s,e){function n(i,o){const c=hE(s,o,e);return fE(c!==null),a4(c,o,s.host,s._protocol)}return n}function mE(s){function e(n,i){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=wI():o=bI():n.getStatus()===402?o=xI(s.bucket):n.getStatus()===403?o=EI(s.path):o=i,o.status=n.getStatus(),o.serverResponse=i.serverResponse,o}return e}function u4(s){const e=mE(s);function n(i,o){let c=e(i,o);return i.getStatus()===404&&(c=_I(s.path)),c.serverResponse=o.serverResponse,c}return n}function h4(s,e,n){const i=e.fullServerUrl(),o=ig(i,s.host,s._protocol),c="GET",d=s.maxOperationRetryTime,p=new dE(o,c,c4(s,n),d);return p.errorHandler=u4(e),p}function d4(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function f4(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=d4(null,e)),i}function m4(s,e,n,i,o){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let J="";for(let se=0;se<2;se++)J=J+Math.random().toString().slice(2);return J}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=f4(e,i,o),x=o4(y,n),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,A=`\r
--`+g+"--",D=fi.getBlob(w,i,A);if(D===null)throw CI();const k={name:y.fullPath},q=ig(c,s.host,s._protocol),P="POST",Q=s.maxUploadRetryTime,te=new dE(q,P,l4(s,n),Q);return te.urlParams=k,te.headers=d,te.body=D.uploadData(),te.errorHandler=mE(e),te}class p4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,o){if(this.sent_)throw Pl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class g4 extends p4{initXhr(){this.xhr_.responseType="text"}}function pE(){return new g4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this._service=e,n instanceof Un?this._location=n:this._location=Un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fa(e,n)}get root(){const e=new Un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cE(this._location.path)}get storage(){return this._service}get parent(){const e=e4(this._location.path);if(e===null)return null;const n=new Un(this._location.bucket,e);return new fa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw DI(e)}}function y4(s,e,n){s._throwIfRoot("uploadBytes");const i=m4(s.storage,s._location,uE(),new fi(e,!0),n);return s.storage.makeRequestWithTokens(i,pE).then(o=>({metadata:o,ref:s}))}function v4(s){s._throwIfRoot("getDownloadURL");const e=h4(s.storage,s._location,uE());return s.storage.makeRequestWithTokens(e,pE).then(n=>{if(n===null)throw jI();return n})}function _4(s,e){const n=t4(s._location.path,e),i=new Un(s._location.bucket,n);return new fa(s.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(s){return/^[A-Za-z]+:\/\//.test(s)}function b4(s,e){return new fa(s,e)}function gE(s,e){if(s instanceof ag){const n=s;if(n._bucket==null)throw RI();const i=new fa(n,n._bucket);return e!=null?gE(i,e):i}else return e!==void 0?_4(s,e):s}function w4(s,e){if(e&&x4(e)){if(s instanceof ag)return b4(s,e);throw Zm("To use ref(service, url), the first argument must be a Storage instance.")}else return gE(s,e)}function ox(s,e){const n=e==null?void 0:e[nE];return n==null?null:Un.makeFromBucketSpec(n,s)}function E4(s,e,n,i={}){s.host=`${e}:${n}`,s._protocol="http";const{mockUserToken:o}=i;o&&(s._overrideAuthToken=typeof o=="string"?o:Px(o,s.app.options.projectId))}class ag{constructor(e,n,i,o,c){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=c,this._bucket=null,this._host=tE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yI,this._maxUploadRetryTime=vI,this._requests=new Set,o!=null?this._bucket=Un.makeFromBucketSpec(o,this._host):this._bucket=ox(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Un.makeFromBucketSpec(this._url,e):this._bucket=ox(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ax("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ax("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fa(this,e)}_makeRequest(e,n,i,o,c=!0){if(this._deleted)return new MI(sE());{const d=HI(e,this._appId,i,o,n,this._firebaseVersion,c);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const lx="@firebase/storage",cx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="storage";function T4(s,e,n){return s=Wt(s),y4(s,e,n)}function S4(s){return s=Wt(s),v4(s)}function A4(s,e){return s=Wt(s),w4(s,e)}function N4(s=lp(),e){s=Wt(s);const i=Ph(s,yE).getImmediate({identifier:e}),o=Lx("storage");return o&&vE(i,...o),i}function vE(s,e,n,i={}){E4(s,e,n,i)}function R4(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new ag(n,i,o,e,ga)}function C4(){la(new _i(yE,R4,"PUBLIC").setMultipleInstances(!0)),As(lx,cx,""),As(lx,cx,"esm2017")}C4();let sa;try{window.FIREBASE_CONFIG?(sa=window.FIREBASE_CONFIG,console.log("Using window.FIREBASE_CONFIG")):window.parent&&window.parent!==window?(sa=window.parent.FIREBASE_CONFIG||window.parent.firebaseConfig,console.log("Using parent window config")):window.firebaseConfig&&(sa=window.firebaseConfig,console.log("Using window.firebaseConfig")),sa||(console.warn("No Firebase config found, using demo config"),sa={apiKey:"demo-api-key",authDomain:"demo-project.firebaseapp.com",projectId:"demo-project",storageBucket:"demo-project.appspot.com",messagingSenderId:"123456789",appId:"demo-app-id"})}catch(s){console.error("Error loading Firebase config:",s),sa={apiKey:"demo-api-key",authDomain:"demo-project.firebaseapp.com",projectId:"demo-project",storageBucket:"demo-project.appspot.com",messagingSenderId:"123456789",appId:"demo-app-id"}}const og=qx(sa),lg=mR(og),Dt=tI(og),_E=N4(og),j4=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";if(j4)try{cb(lg,"http://localhost:9099",{disableWarnings:!0}),Uw(Dt,"localhost",8080),vE(_E,"localhost",9199)}catch{console.log("Firebase emulators not available, using production")}const cg=()=>new Promise(s=>{const e=mb(lg,n=>{e(),s(n)})}),xE=async()=>{const s=await cg();if(!s)throw new Error("Authentication required");return s},Pt={USERS:"soundwave_users",TRACKS:"soundwave_tracks",POSTS:"soundwave_posts",COMMENTS:"soundwave_comments",LABELS:"soundwave_labels",PLAYLISTS:"soundwave_playlists",MASTERCLASSES:"soundwave_masterclasses",TUTORIALS:"soundwave_tutorials",SAMPLE_PACKS:"soundwave_sample_packs",GLOBAL_EVENTS:"soundwave_global_events"},Zt=(s,e)=>{if(console.error(`Firestore ${e} error:`,s),s instanceof ge)switch(s.code){case"permission-denied":throw new Error("You do not have permission to perform this action");case"not-found":throw new Error("The requested item was not found");case"unavailable":throw new Error("Service temporarily unavailable. Please try again.");default:throw new Error(`${e} failed: ${s.message}`)}throw new Error(`${e} failed`)},bE=async()=>{try{return(await Pn(_n(Dt,Pt.USERS))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return Zt(s,"Get users"),[]}},ug=async s=>{try{const e=await Xw(Zh(Dt,Pt.USERS,s));return e.exists()?(console.log(" User retrieved from Firestore:",s),{id:e.id,...e.data()}):void 0}catch(e){console.error("Firestore Get user error:",e);const n=localStorage.getItem(`soundwave_user_${s}`);return n?(console.log(" Fallback: Retrieved user from localStorage:",s),JSON.parse(n)):void 0}},I4=async s=>{var e;try{console.log(" Creating/updating user:",s);const n=s.id||((e=await cg())==null?void 0:e.uid);if(!n)throw new Error("No user ID available");const i={...s,id:n,updatedAt:new Date().toISOString()};return await pI(Zh(Dt,Pt.USERS,n),i,{merge:!0}),console.log(" User saved to Firestore"),localStorage.setItem(`soundwave_user_${n}`,JSON.stringify(i)),i}catch(n){console.error(" Error creating/updating user:",n);const i=s.id||"unknown",o={...s,id:i,updatedAt:new Date().toISOString()};return localStorage.setItem(`soundwave_user_${i}`,JSON.stringify(o)),console.log(" Fallback: User saved to localStorage"),o}},sd=async()=>{try{const s=hs(_n(Dt,Pt.TRACKS),Ls("createdAt","desc"));return(await Pn(s)).docs.map(n=>({id:n.id,...n.data()}))}catch(s){return Zt(s,"Get tracks"),[]}},D4=async s=>{try{const e=hs(_n(Dt,Pt.TRACKS),nd("artistId","==",s),Ls("createdAt","desc"));return(await Pn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return Zt(e,"Get tracks by artist"),[]}},wE=async()=>{try{const s=hs(_n(Dt,Pt.POSTS),Ls("createdAt","desc"),$w(50));return(await Pn(s)).docs.map(n=>({id:n.id,...n.data()}))}catch(s){return Zt(s,"Get posts"),[]}},M4=async s=>{try{const e=await xE(),n={...s,authorId:e.uid,createdAt:eE(),likes:0,replyCount:0,replies:[]};return{id:(await Jw(_n(Dt,Pt.POSTS),n)).id,...s,authorId:e.uid,createdAt:new Date().toISOString(),likes:0,replyCount:0,replies:[]}}catch(e){throw Zt(e,"Create post"),e}},EE=M4,Ai=async(s,e,n)=>{try{const i=await xE(),o=await ug(i.uid);if(!o)throw new Error("User profile not found");const c={authorId:i.uid,authorName:o.name,authorAvatarUrl:o.avatarUrl||"",content:n,createdAt:new Date().toISOString()};return{id:(await Jw(_n(Dt,Pt.COMMENTS),{...c,parentType:s,parentId:e,createdAt:eE()})).id,...c}}catch(i){throw Zt(i,"Add comment"),i}},O4=async(s,e)=>{try{const n=A4(_E,e),i=await T4(n,s),o=await S4(i.ref);return console.log(" File uploaded to Firebase Storage"),o}catch(n){return console.error("Upload file error:",n),new Promise((i,o)=>{const c=new FileReader;c.onloadend=()=>{const d=c.result;console.log(" Fallback: File converted to data URL"),i(d)},c.onerror=o,c.readAsDataURL(s)})}},k4=async(s,e)=>O4(s,`users/${e}/avatar/${s.name}`),L4=async()=>{try{return(await Pn(_n(Dt,Pt.LABELS))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return Zt(s,"Get labels"),[]}},V4=async s=>{try{const e=await Xw(Zh(Dt,Pt.LABELS,s));return e.exists()?{id:e.id,...e.data()}:void 0}catch(e){Zt(e,"Get label");return}},U4=async s=>{try{const e=hs(_n(Dt,Pt.TRACKS),nd("labelId","==",s),Ls("createdAt","desc"));return(await Pn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return Zt(e,"Get tracks by label"),[]}},P4=async s=>{try{const e=hs(_n(Dt,Pt.USERS),nd("labelId","==",s));return(await Pn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return Zt(e,"Get artists by label"),[]}},z4=async s=>{try{const e=hs(_n(Dt,Pt.POSTS),nd("labelId","==",s),Ls("createdAt","desc"));return(await Pn(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return Zt(e,"Get posts by label"),[]}},B4=async s=>{try{return[]}catch(e){return Zt(e,"Get events by label"),[]}},Ec=async(s,e)=>Ai("track",s,e.content),q4=async(s,e)=>Ai("label",s,e.content),F4=async(s,e)=>Ai("post",s,e.content),H4=async(s,e)=>Ai("masterclass",s,e.content),G4=async(s,e)=>Ai("post",s,e.content),$4=async(s,e)=>Ai("post",s,e.content),K4=async(s,e)=>Ai("post",s,e.content),Y4=async(s,e)=>Ai("post",s,e.content),Q4=async()=>(console.log("getLiveRooms: Not yet implemented"),[]),X4=async s=>(console.log("getConversations: Not yet implemented for user",s),[]),TE=async()=>(console.log("getSampleChatMessages: Not yet implemented"),[]),W4=async s=>(console.log("getExternalReleasesByArtist: Not yet implemented"),[]),J4=async s=>(console.log("getPremiumPacksByArtist: Not yet implemented"),[]),Z4=async()=>{try{const s=hs(_n(Dt,Pt.GLOBAL_EVENTS),Ls("createdAt","desc"),$w(20));return(await Pn(s)).docs.map(n=>({id:n.id,...n.data()}))}catch(s){return Zt(s,"Get global events"),[]}},eD=async()=>{try{const s=hs(_n(Dt,Pt.MASTERCLASSES),Ls("createdAt","desc"));return(await Pn(s)).docs.map(n=>({id:n.id,...n.data()}))}catch(s){return Zt(s,"Get masterclasses"),[]}},tD=async()=>{try{const s=hs(_n(Dt,Pt.TUTORIALS),Ls("createdAt","desc"));return(await Pn(s)).docs.map(n=>({id:n.id,...n.data()}))}catch(s){return Zt(s,"Get tutorials"),[]}},nD=async()=>{try{const s=hs(_n(Dt,Pt.SAMPLE_PACKS),Ls("createdAt","desc"));return(await Pn(s)).docs.map(n=>({id:n.id,...n.data()}))}catch(s){return Zt(s,"Get sample packs"),[]}},sD=async()=>{try{const s=hs(_n(Dt,Pt.PLAYLISTS),Ls("createdAt","desc"));return(await Pn(s)).docs.map(n=>({id:n.id,...n.data()}))}catch(s){return Zt(s,"Get playlists"),[]}},hg=({post:s})=>{const[e,n]=S.useState(s),[i,o]=S.useState(!1),c=g=>{const y=new Date(g),x=Math.floor((new Date().getTime()-y.getTime())/1e3);let w=x/31536e3;return w>1?Math.floor(w)+" years ago":(w=x/2592e3,w>1?Math.floor(w)+" months ago":(w=x/86400,w>1?Math.floor(w)+" days ago":(w=x/3600,w>1?Math.floor(w)+" hours ago":(w=x/60,w>1?Math.floor(w)+" minutes ago":Math.floor(x)+" seconds ago"))))},d=e.authorId.startsWith("label_")?`/labels/${e.authorId}`:`/profile/${e.authorId}`,p=async g=>{try{const y=await F4(e.id,g);n(x=>({...x,replies:[...x.replies||[],y],replyCount:(x.replies||[]).length+1}))}catch(y){console.error("Failed to add reply:",y)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl",children:[u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx(ln,{to:d,children:u.jsx("img",{src:e.authorAvatarUrl,alt:e.authorName,className:"w-12 h-12 rounded-full object-cover"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:e.title}),u.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["Posted by ",u.jsx(ln,{to:d,className:"font-medium hover:text-white hover:underline",children:e.authorName}),u.jsx("span",{className:"mx-2",children:""}),u.jsx("span",{children:c(e.createdAt)})]}),u.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:e.content})]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex items-center space-x-6 text-gray-400",children:[u.jsxs("button",{className:"flex items-center space-x-2 hover:text-brand-accent transition-colors",children:[u.jsx(pe,{name:"heart",className:"w-5 h-5"}),u.jsxs("span",{children:[e.likes," Likes"]})]}),u.jsxs("button",{onClick:()=>o(!i),className:"flex items-center space-x-2 hover:text-white transition-colors",children:[u.jsx(pe,{name:"comment",className:"w-5 h-5"}),u.jsxs("span",{children:[e.replyCount," Replies"]})]})]}),i&&u.jsx("div",{className:"mt-4",children:u.jsx(pa,{comments:e.replies||[],onAddComment:p,placeholder:"Write a reply..."})})]})},SE=({onPostCreated:s})=>{const[e,n]=S.useState(!1),[i,o]=S.useState(""),[c,d]=S.useState(""),p=async g=>{if(g.preventDefault(),!i.trim()||!c.trim())return;n(!0);const y={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100"};try{const x=await EE({title:i,content:c,...y});s(x),o(""),d("")}catch(x){console.error("Failed to add post:",x)}finally{n(!1)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg h-full",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create a New Post"}),u.jsxs("form",{onSubmit:p,className:"space-y-4",children:[u.jsx("div",{children:u.jsx("input",{type:"text",placeholder:"Post Title",value:i,onChange:g=>o(g.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})}),u.jsx("div",{children:u.jsx("textarea",{placeholder:"What's on your mind?",value:c,onChange:g=>d(g.target.value),required:!0,rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})}),u.jsx("div",{className:"flex justify-end",children:u.jsx(qe,{type:"submit",isLoading:e,children:"Post"})})]})]})},rD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(""),[o,c]=S.useState([]),d=S.useRef(null),p={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};S.useEffect(()=>{bE().then(c)},[]),S.useEffect(()=>{if(o.length===0)return;const y=TE(),x=o.filter(A=>A.id!==p.id);x.length>0&&e([{id:`msg_${Date.now()-5e3}`,user:x[0],text:"Welcome to the live chat!",timestamp:new Date(Date.now()-5e3).toISOString()},{id:`msg_${Date.now()-2e3}`,user:x[1%x.length],text:"Anyone working on new tunes?",timestamp:new Date(Date.now()-2e3).toISOString()}]);const w=setInterval(()=>{const A=x[Math.floor(Math.random()*x.length)],D=y[Math.floor(Math.random()*y.length)],k={id:`msg_${Date.now()}`,user:A,text:D,timestamp:new Date().toISOString()};e(q=>[...q,k])},8e3);return()=>clearInterval(w)},[o]),S.useEffect(()=>{var y;(y=d.current)==null||y.scrollIntoView({behavior:"smooth"})},[s]);const g=y=>{if(y.preventDefault(),!n.trim())return;const x={id:`msg_${Date.now()}`,user:p,text:n,timestamp:new Date().toISOString()};e(w=>[...w,x]),i("")};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[500px]",children:[u.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[s.map(y=>u.jsxs("div",{className:`flex items-start gap-3 ${y.user.id===p.id?"flex-row-reverse":""}`,children:[u.jsx("img",{src:y.user.avatarUrl,alt:y.user.name,className:"w-10 h-10 rounded-full object-cover"}),u.jsxs("div",{className:`p-3 rounded-lg max-w-sm shadow ${y.user.id===p.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[u.jsx("p",{className:"font-bold text-sm mb-1",children:y.user.name}),u.jsx("p",{className:"text-sm",children:y.text})]})]},y.id)),u.jsx("div",{ref:d})]})}),u.jsx("div",{className:"p-4 bg-gray-700/50 border-t border-gray-700",children:u.jsxs("form",{onSubmit:g,className:"flex gap-3 items-center",children:[u.jsx("img",{src:p.avatarUrl,alt:"Your avatar",className:"w-8 h-8 rounded-full"}),u.jsx("input",{type:"text",value:n,onChange:y=>i(y.target.value),placeholder:"Join the conversation...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-2 hover:bg-brand-accent-hover disabled:bg-gray-500 transition-colors",disabled:!n.trim(),children:u.jsx(pe,{name:"send",className:"w-5 h-5"})})]})})]})};var Hl=(s=>(s.FREE="Free Download",s.SALE="For Sale",s.PREVIEW="Preview Only",s))(Hl||{}),yh=(s=>(s.NEW_TRACK="NEW_TRACK",s.NEW_PHOTO="NEW_PHOTO",s.IRL_EVENT="IRL_EVENT",s))(yh||{}),Kt=(s=>(s.GEO="GEO",s.UNIVERSE="UNIVERSE",s.COUNTRY="COUNTRY",s))(Kt||{});const _a=({isOpen:s,onClose:e,title:n,comments:i,onAddComment:o})=>{const c=S.useRef(null);return S.useEffect(()=>{const d=p=>{p.key==="Escape"&&e()};return s&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow=""}},[s,e]),s?u.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm","aria-labelledby":"comment-modal-title",role:"dialog","aria-modal":"true",onClick:e,children:u.jsxs("div",{ref:c,className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl h-full max-h-[80vh] flex flex-col overflow-hidden",onClick:d=>d.stopPropagation(),children:[u.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-700 flex-shrink-0",children:[u.jsx("h2",{id:"comment-modal-title",className:"text-xl font-bold text-white truncate",children:n}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white p-2 rounded-full","aria-label":"Close comment modal",children:u.jsx(pe,{name:"x",className:"w-6 h-6"})})]}),u.jsx("main",{className:"flex-grow overflow-y-auto p-6",children:u.jsx(pa,{comments:i,onAddComment:o,startExpanded:!0})})]})}):null},AE=s=>{switch(s){case yh.NEW_TRACK:return"music-note";case yh.NEW_PHOTO:return"camera";case yh.IRL_EVENT:return"map-pin";default:return"chat-bubble"}},ux=({event:s,onClick:e,onMouseEnter:n,onMouseLeave:i,className:o="event-ping",isDimmed:c,isHighlighted:d,size:p=32})=>{const g=p*.6;return u.jsx("div",{className:`${o} ${c?"dimmed":""}`,style:{transform:s.transform,animationDelay:s.animationDelay,width:`${p}px`,height:`${p}px`,marginLeft:`${-p/2}px`,marginTop:`${-p/2}px`},onMouseEnter:()=>n(s),onMouseLeave:i,onClick:()=>e(s),"aria-label":`Event: ${s.title}`,children:u.jsx("div",{className:`event-ping-icon ${d?"highlight":""}`,style:{animationDelay:s.animationDelay},children:u.jsx(pe,{name:AE(s.type),className:"transition-all",style:{width:g,height:g}})})})},iD=({mode:s,setMode:e})=>{const n="flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium transition-colors",i="bg-brand-accent text-white",o="bg-gray-700 text-gray-300 hover:bg-gray-600",c=[{key:Kt.GEO,icon:"globe-alt",label:"Geo"},{key:Kt.UNIVERSE,icon:"aperture",label:"Universe"},{key:Kt.COUNTRY,icon:"map",label:"Countries"}];return u.jsx("div",{className:"flex space-x-2 p-1 bg-gray-900/50 rounded-full",children:c.map(({key:d,icon:p,label:g})=>u.jsxs("button",{onClick:()=>e(d),className:`${n} ${s===d?i:o}`,children:[u.jsx(pe,{name:p,className:"w-4 h-4"}),u.jsx("span",{children:g})]},d))})},aD=()=>{var ee;const[e,n]=S.useState([]),[i,o]=S.useState(!0),[c,d]=S.useState(Kt.GEO),[p,g]=S.useState(null),[y,x]=S.useState(null),[w,A]=S.useState(null),[D,k]=S.useState(1),[q,P]=S.useState({x:-20,y:30}),[Q,te]=S.useState({x:0,y:0,z:0}),[J,se]=S.useState(!1),ce=S.useRef({x:0,y:0}),[ue,C]=S.useState(null),N=["@Artist:Sub-Tropical","@Genre:Jungle","@Genre:LiquidFunk"],[R,I]=S.useState(null);S.useEffect(()=>{Z4().then(H=>{n(H),o(!1)})},[]),S.useEffect(()=>{g(null),A(null),C(null),I(null),te({x:0,y:0,z:0}),k(1)},[c]);const V=S.useMemo(()=>{if(c!==Kt.UNIVERSE)return[];const H=new Map;e.forEach(re=>{re.groups.forEach(fe=>{const be=fe.split(":")[0];H.set(be,(H.get(be)||0)+1)})});const le=Array.from(H.keys());return le.map((re,fe)=>{const be=fe/le.length*2*Math.PI,Fe=Math.random()*Math.PI-Math.PI/2,We=120+Math.random()*20,un=Math.cos(be)*Math.cos(Fe)*We,xn=Math.sin(be)*Math.cos(Fe)*We,ds=Math.sin(Fe)*We;return{name:re,transform:`translateX(-50%) translateY(-50%) translateX(${un}px) translateY(${ds}px) translateZ(${xn}px) rotateY(${-be}rad) rotateX(${-Fe}rad)`,position:{x:un,y:ds,z:xn},influence:H.get(re)||1}})},[e,c]),z=S.useMemo(()=>{if(c!==Kt.COUNTRY)return[];const H=e.reduce((re,fe)=>(re[fe.country]=re[fe.country]||[],re[fe.country].push(fe),re),{}),le={"United Kingdom":{top:"40%",left:"45%"},Germany:{top:"42%",left:"55%"},Jamaica:{top:"70%",left:"25%"},Japan:{top:"50%",left:"85%"}};return Object.entries(H).map(([re,fe])=>({name:re,count:fe.length,events:fe,position:le[re]||{top:"50%",left:"50%"}}))},[e,c]),j=H=>{H.preventDefault();const le=.001;k(re=>Math.max(.5,Math.min(3,re-H.deltaY*le)))},Ye=H=>{se(!0),ce.current={x:H.clientX,y:H.clientY}},me=()=>se(!1),O=H=>{if(!J)return;const le=H.clientX-ce.current.x,re=H.clientY-ce.current.y;ce.current={x:H.clientX,y:H.clientY},P(fe=>({y:fe.y+le*.2,x:Math.max(-90,Math.min(90,fe.x-re*.2))}))},W=H=>{ue===H.name?(C(null),te({x:0,y:0,z:0})):(C(H.name),te({x:-H.position.x,y:-H.position.y,z:-H.position.z}))},de=async H=>{if(y)try{const le=await Y4(y.id,H),re={...y,comments:[...y.comments||[],le]};x(re),n(fe=>fe.map(be=>be.id===re.id?re:be))}catch(le){console.error("Failed to add comment to event:",le)}},xe=Array.from({length:12}).map((H,le)=>u.jsx("div",{className:"globe-slice",style:{transform:`rotateY(${180/12*le}deg)`}},le)),je=()=>{switch(c){case Kt.GEO:return"Global Activity";case Kt.UNIVERSE:return"Musical Universe";case Kt.COUNTRY:return"Community Hotspots";default:return"Activity Hub"}},L=()=>{switch(c){case Kt.GEO:return"Real-time user activity by location.";case Kt.UNIVERSE:return"Click a bubble to focus. Drag to orbit.";case Kt.COUNTRY:return"Scroll to zoom. Click a bubble to explore.";default:return"See what's happening now."}};return u.jsxs(u.Fragment,{children:[y&&u.jsx(_a,{isOpen:!!y,onClose:()=>x(null),title:`Comments for ${y.title}`,comments:y.comments||[],onAddComment:de}),u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[500px] p-4 text-center items-center justify-between relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-20 flex justify-between w-full items-start",children:[u.jsxs("div",{className:"text-left",children:[u.jsx("h4",{className:"font-bold text-white text-lg",children:je()}),u.jsx("p",{className:"text-sm text-gray-400 max-w-xs",children:L()})]}),u.jsx(iD,{mode:c,setMode:d})]}),u.jsx("div",{className:"flex-grow flex items-center justify-center w-full h-full relative",children:i?u.jsx(vn,{}):u.jsxs(u.Fragment,{children:[c===Kt.GEO&&u.jsx("div",{className:"globe-container",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"globe",children:[xe,e.map(H=>u.jsx(ux,{event:H,onClick:x,onMouseEnter:g,onMouseLeave:()=>g(null)},H.id))]}),u.jsx("div",{className:"globe-shadow"})]})}),c===Kt.UNIVERSE&&u.jsx("div",{className:"universe-container",onMouseDown:Ye,onMouseUp:me,onMouseLeave:me,onMouseMove:O,onWheel:j,children:u.jsxs("div",{className:"universe-core",style:{transform:`
                                        rotateX(${q.x}deg) 
                                        rotateY(${q.y}deg) 
                                        translateX(${Q.x*D}px) 
                                        translateY(${Q.y*D}px) 
                                        translateZ(${Q.z*D}px) 
                                        scale(${D})
                                    `},children:[V.map(H=>{const le=40+H.influence*8,re=Math.min(.1+H.influence*.05,.7);return u.jsx("div",{className:`universe-node ${ue===H.name?"focused":""} ${ue&&ue!==H.name?"dimmed":""}`,style:{transform:H.transform,fontSize:`${8+H.influence*1.5}px`,width:`${le}px`,height:`${le}px`,backgroundColor:`rgba(168, 85, 247, ${re})`},onClick:()=>W(H),children:H.name},H.name)}),e.map(H=>{const le=ue?H.groups.some(fe=>fe.startsWith(ue)):!0,re=24+H.influence*2;return u.jsx(ux,{event:H,size:re,className:"universe-event-ping",isDimmed:ue!==null&&!le,isHighlighted:le,onClick:x,onMouseEnter:g,onMouseLeave:()=>g(null)},H.id)})]})}),c===Kt.COUNTRY&&u.jsx("div",{className:"country-view-container",onWheel:j,children:u.jsxs("div",{className:"country-view-wrapper",style:{transform:`scale(${D})`},children:[z.map(H=>{const re=40+H.count*15,fe=R===H.name,be=R&&!fe;return u.jsx("div",{className:`country-bubble ${fe?"active":""} ${be?"dimmed":""}`,style:{top:H.position.top,left:H.position.left,width:`${re}px`,height:`${re}px`,fontSize:`${10+H.count}px`},onClick:()=>I(Fe=>Fe===H.name?null:H.name),onMouseEnter:()=>A(H),onMouseLeave:()=>A(null),children:H.name.split(" ").map(Fe=>Fe[0]).join("")},H.name)}),R&&((ee=z.find(H=>H.name===R))==null?void 0:ee.events.map((H,le,re)=>{const fe=z.find(xn=>xn.name===R),be=le/re.length*2*Math.PI,Fe=(40+fe.count*15)*.7,We=`calc(${fe.position.top} + ${Math.sin(be)*Fe}px)`,un=`calc(${fe.position.left} + ${Math.cos(be)*Fe}px)`;return u.jsx("div",{className:"local-event-ping",style:{top:We,left:un},onMouseEnter:()=>g(H),onMouseLeave:()=>g(null),onClick:()=>x(H),children:u.jsx(pe,{name:AE(H.type),className:"w-3 h-3 text-white"})},H.id)}))]})})]})}),u.jsxs("div",{className:"absolute bottom-4 left-4 right-4 z-10 flex items-end gap-4",children:[c===Kt.UNIVERSE&&u.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm p-3 rounded-lg flex-shrink-0",children:[u.jsx("h5",{className:"font-bold text-white text-sm mb-2 text-left",children:"My Bubbles"}),u.jsx("div",{className:"flex flex-col gap-1 items-start",children:N.map(H=>{const le=H.split(":")[0];return u.jsx("button",{onClick:()=>{const re=V.find(fe=>fe.name===le);re&&W(re)},className:`text-xs text-left transition-colors w-full px-2 py-1 rounded ${ue===le?"bg-brand-accent text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:H},H)})}),ue&&u.jsx("button",{onClick:()=>{C(null),te({x:0,y:0,z:0})},className:"text-xs text-gray-400 hover:text-white mt-2 w-full text-center",children:"Reset View"})]}),u.jsx("div",{className:"event-info-box bg-gray-900/80 backdrop-blur-sm p-4 rounded-lg transition-all duration-300 flex-grow",children:p?u.jsxs("div",{className:"opacity-100 transition-opacity duration-300 text-left",children:[u.jsx("h5",{className:"font-bold text-white",children:p.title}),u.jsx("p",{className:"text-sm text-gray-300",children:p.locationName}),u.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["By ",p.authorName]}),u.jsxs(qe,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>x(p),children:[u.jsx(pe,{name:"comment",className:"w-4 h-4 mr-2"}),"View Comments"]})]}):w?u.jsxs("div",{className:"opacity-100 transition-opacity duration-300 text-left",children:[u.jsx("h5",{className:"font-bold text-white",children:w.name}),u.jsxs("p",{className:"text-sm text-gray-300",children:[w.count," active event",w.count>1?"s":""]})]}):u.jsx("div",{className:"opacity-70 transition-opacity duration-300",children:u.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Hover over an item for details."})})})]})]})]})},oD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState([]),[o,c]=S.useState(!0),[d,p]=S.useState(null);S.useEffect(()=>{(async()=>{c(!0);const[w,A]=await Promise.all([sd(),wE()]);e(w),i(A),c(!1)})()},[]);const g=x=>{i(w=>[x,...w].slice(0,2))},y=async x=>{if(d)try{const w=await Ec(d.id,x),A={...d,comments:[...d.comments||[],w]};p(A),e(D=>D.map(k=>k.id===A.id?A:k))}catch(w){console.error("Failed to add comment:",w)}};return o?u.jsx(vn,{}):u.jsxs("div",{children:[d&&u.jsx(_a,{isOpen:!!d,onClose:()=>p(null),title:`Comments for ${d.title}`,comments:d.comments||[],onAddComment:y}),u.jsxs("section",{id:"featured-tracks",children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Featured Tracks"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Discover new music from artists around the world."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:(s||[]).length>0?s.map(x=>u.jsx(Vh,{track:x,onViewComments:p},x.id)):u.jsx("div",{className:"col-span-full text-center py-12",children:u.jsx("p",{className:"text-gray-400 text-lg",children:"No tracks available yet. Check back soon!"})})})]}),u.jsxs("section",{id:"community-spotlight",className:"mt-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Community Spotlight"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Join the conversation or start your own."}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2 space-y-6",children:(n||[]).length>0?n.slice(0,2).map(x=>u.jsx(hg,{post:x},x.id)):u.jsx("p",{className:"text-gray-400",children:"No community posts yet. Be the first!"})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsx(SE,{onPostCreated:g})})]})]}),u.jsxs("section",{id:"activity-hub",className:"mt-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Activity Hub"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"See what's happening in the community right now."}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Live Chat"}),u.jsx(rD,{})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Globalizer"}),u.jsx(aD,{})]})]})]})]})},lD={Spotify:{icon:"spotify",color:"text-green-500"},SoundCloud:{icon:"soundcloud",color:"text-orange-500"},YouTube:{icon:"youtube",color:"text-red-500"},Bandcamp:{icon:"bandcamp",color:"text-cyan-400"}},cD=({releases:s})=>{const e=(n,i)=>{console.log(`${n} button clicked for: ${i}`),alert(`Feature coming soon: ${n} for "${i}"`)};return u.jsx("div",{className:"space-y-4",children:s.map(n=>{const i=lD[n.platform],o=n.type==="Bootleg"?!0:!n.isPaid;return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4 transition-colors hover:bg-gray-700/50",children:[u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 ${i.color} hover:opacity-80 transition-opacity`,children:u.jsx(pe,{name:i.icon,className:"w-10 h-10"})}),u.jsxs("div",{className:"flex-grow",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"font-bold text-white hover:underline",children:n.title}),u.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full border ${o?"bg-green-500/20 text-green-300 border-green-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`,children:o?"Free":"Paid"})]}),n.type==="Remix"&&n.sourceArtist&&u.jsxs("p",{className:"text-sm text-gray-400",children:["Remix of a track by ",u.jsx("span",{className:"font-semibold text-gray-300",children:n.sourceArtist})]})]}),u.jsx("div",{className:"w-full sm:w-auto",children:n.type==="Remix"&&n.sourceSamples&&u.jsxs("div",{className:"mb-2 sm:mb-0",children:[u.jsx("p",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Source Samples:"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:n.sourceSamples.map((c,d)=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:c},d))})]})}),n.type==="Remix"&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 self-start sm:self-center mt-2 sm:mt-0",children:[u.jsxs("button",{onClick:()=>e("Tag Samples",n.title),className:"text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors",children:[u.jsx(pe,{name:"tag",className:"w-3 h-3"})," Tag Samples"]}),u.jsxs("button",{onClick:()=>e("Request Remix",n.title),className:"text-xs bg-purple-600/50 hover:bg-purple-600/80 text-purple-200 px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors",children:[u.jsx(pe,{name:"music-note",className:"w-3 h-3"})," Request Remix"]})]})]},n.id)})})},uD=({pack:s})=>u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-800/80 border border-brand-accent/30 rounded-lg shadow-2xl p-6 flex flex-col h-full transform transition-transform duration-300 hover:scale-105 hover:shadow-brand-accent/20",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx(pe,{name:"package",className:"w-10 h-10 text-brand-accent mb-2"}),u.jsx("h3",{className:"text-2xl font-bold text-white",children:s.title}),u.jsx("p",{className:"text-gray-400 mt-1",children:s.description})]}),u.jsx("ul",{className:"space-y-3 my-6",children:s.items.map((e,n)=>u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-gray-700 rounded-full p-2",children:u.jsx(pe,{name:e.icon,className:"w-4 h-4 text-brand-accent-hover"})}),u.jsx("span",{className:"text-gray-300",children:e.name})]},n))})]}),u.jsxs("div",{className:"mt-6 text-center",children:[u.jsxs("p",{className:"text-4xl font-bold text-white mb-4",children:["$",s.price.toFixed(2)," ",u.jsx("span",{className:"text-lg font-normal text-gray-400",children:s.currency})]}),u.jsx(qe,{className:"w-full",children:"Purchase Pack"})]})]}),hD=({collection:s})=>u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Your Collection (",s.length," tracks)"]}),u.jsx("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden max-h-[60vh] overflow-y-auto",children:u.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[u.jsx("thead",{className:"text-xs text-gray-300 uppercase bg-gray-700 sticky top-0 z-10",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 py-3",children:"#"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Title"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Artist"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Album"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Genre"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Key"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Time"}),u.jsx("th",{scope:"col",className:"px-4 py-3",children:"Plays"})]})}),u.jsx("tbody",{children:s.map((e,n)=>u.jsxs("tr",{className:"bg-gray-800 border-b border-gray-700 hover:bg-gray-700/50",children:[u.jsx("td",{className:"px-4 py-3",children:n+1}),u.jsx("th",{scope:"row",className:"px-4 py-3 font-medium text-white whitespace-nowrap",children:e.title}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.artist}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.album}),u.jsx("td",{className:"px-4 py-3",children:e.genre}),u.jsx("td",{className:"px-4 py-3",children:e.key}),u.jsxs("td",{className:"px-4 py-3",children:[e.totalTime,"s"]}),u.jsx("td",{className:"px-4 py-3",children:e.playCount})]},e.trackId||n))})]})})]}),dD=()=>{const{userId:s}=Tx(),e=Ti(),[n,i]=S.useState(null),[o,c]=S.useState([]),[d,p]=S.useState([]),[g,y]=S.useState([]),[x,w]=S.useState(null),[A,D]=S.useState(!0),[k,q]=S.useState("tracks"),[P,Q]=S.useState(!1),[te,J]=S.useState(null);S.useEffect(()=>{var N;(N=e.state)!=null&&N.collection&&(w(e.state.collection),q("collection"),window.history.replaceState({},document.title))},[e.state]),S.useEffect(()=>{(async()=>{if(!s)return;D(!0);const[R,I,V,z]=await Promise.all([ug(s),D4(s),W4(),J4()]);i(R||null),c(I),p(V),y(z),D(!1)})()},[s]);const se=()=>{Q(N=>!N)},ce=async N=>{if(te)try{const R=await Ec(te.id,N),I={...te,comments:[...te.comments||[],R]};J(I),c(V=>V.map(z=>z.id===I.id?I:z))}catch(R){console.error("Failed to add comment:",R)}},ue=()=>{switch(k){case"tracks":return u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map(N=>u.jsx(Vh,{track:N,onViewComments:J},N.id))});case"releases":return u.jsx(cD,{releases:d});case"packs":return u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(N=>u.jsx(uD,{pack:N},N.id))});case"collection":return x?u.jsx(hD,{collection:x}):u.jsxs("div",{className:"text-center py-20 px-6 bg-gray-800 rounded-lg border-2 border-dashed border-gray-700",children:[u.jsx(pe,{name:"playlist",className:"w-16 h-16 mx-auto text-gray-500 mb-4"}),u.jsx("h3",{className:"text-2xl font-semibold text-white",children:"Your Music Collection is Empty"}),u.jsx("p",{className:"text-gray-400 mt-2 mb-6 max-w-md mx-auto",children:"Import your Rekordbox XML file to see all your tracks, organize them, and build playlists."}),u.jsx(ln,{to:"/import-collection",children:u.jsxs(qe,{children:[u.jsx(pe,{name:"upload",className:"w-5 h-5 mr-2"}),"Import Your Collection"]})})]});default:return null}},C=({tab:N,label:R,count:I})=>u.jsxs("button",{onClick:()=>q(N),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors border-b-2 ${k===N?"text-white border-brand-accent bg-gray-700/50":"text-gray-400 border-transparent hover:text-white hover:border-gray-500"}`,children:[R,typeof I<"u"&&I>0&&u.jsx("span",{className:"text-xs bg-gray-600 rounded-full px-2 py-0.5 ml-1",children:I})]});return A?u.jsx(vn,{}):n?u.jsxs("div",{className:"text-white",children:[te&&u.jsx(_a,{isOpen:!!te,onClose:()=>J(null),title:`Comments for ${te.title}`,comments:te.comments||[],onAddComment:ce}),u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 mb-8 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-8",children:[u.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-40 h-40 rounded-full object-cover border-4 border-gray-700 flex-shrink-0"}),u.jsxs("div",{className:"flex-grow w-full",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsx("h1",{className:"text-4xl font-bold",children:n.name}),u.jsx(qe,{onClick:se,variant:P?"secondary":"primary",className:"w-full sm:w-auto flex-shrink-0",children:P?"Following":"Follow"})]}),u.jsx("p",{className:"text-gray-400 mt-2 max-w-xl",children:n.bio})]})]}),u.jsx("div",{className:"border-b border-gray-700 mb-6",children:u.jsxs("nav",{className:"-mb-px flex space-x-4",children:[u.jsx(C,{tab:"tracks",label:"All Tracks",count:o.length}),u.jsx(C,{tab:"releases",label:"External Releases",count:d.length}),u.jsx(C,{tab:"packs",label:"Premium Packs",count:g.length}),u.jsx(C,{tab:"collection",label:"My Collection",count:(x==null?void 0:x.length)||0})]})}),u.jsx("div",{children:ue()})]}):u.jsx("div",{className:"text-center text-white",children:"User not found."})},fD=()=>{const[s,e]=S.useState(""),[n,i]=S.useState(""),[o,c]=S.useState(Hl.PREVIEW),[d,p]=S.useState(.99),[g,y]=S.useState(""),[x,w]=S.useState(!1),[A,D]=S.useState(!1),k=q=>{q.preventDefault(),w(!0),setTimeout(()=>{w(!1),D(!0),console.log({title:s,description:n,uploadType:o,price:o==="For Sale"?d:0,tags:g.split(",")}),setTimeout(()=>D(!1),3e3)},1500)};return u.jsxs("div",{className:"max-w-4xl mx-auto text-white",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Upload Your Track"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Share your music with the world. Fill out the details below."}),A&&u.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-300 px-4 py-3 rounded-lg relative mb-6",role:"alert",children:[u.jsx("strong",{className:"font-bold",children:"Success!"}),u.jsx("span",{className:"block sm:inline",children:" Your track has been uploaded."})]}),u.jsxs("form",{onSubmit:k,className:"space-y-8",children:[u.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-lg",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"col-span-1",children:[u.jsx("label",{htmlFor:"track-title",className:"block text-sm font-medium text-gray-400 mb-2",children:"Track Title"}),u.jsx("input",{type:"text",id:"track-title",value:s,onChange:q=>e(q.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"})]}),u.jsxs("div",{className:"col-span-1",children:[u.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-400 mb-2",children:"Tags (comma-separated)"}),u.jsx("input",{type:"text",id:"tags",value:g,onChange:q=>y(q.target.value),placeholder:"e.g. lofi, chill, electronic",className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"})]})]}),u.jsxs("div",{className:"mt-6",children:[u.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-400 mb-2",children:"Description"}),u.jsx("textarea",{id:"description",value:n,onChange:q=>i(q.target.value),rows:6,required:!0,placeholder:"Describe your track, the vibe, the inspiration...",className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"})]}),u.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Upload Type"}),u.jsxs("select",{value:o,onChange:q=>c(q.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition",children:[u.jsx("option",{value:Hl.PREVIEW,children:"Preview Only"}),u.jsx("option",{value:Hl.FREE,children:"Free Download"}),u.jsx("option",{value:Hl.SALE,children:"For Sale"})]})]}),o==="For Sale"&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-400 mb-2",children:"Price (USD)"}),u.jsx("input",{type:"number",id:"price",value:d,onChange:q=>p(Number(q.target.value)),min:"0.50",step:"0.01",className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition"})]})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs(qe,{type:"submit",isLoading:x,children:[u.jsx(pe,{name:"upload",className:"w-5 h-5 mr-2"}),"Upload Track"]})})]})]})},mD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(!0);S.useEffect(()=>{(async()=>{i(!0);const d=await wE();e(d),i(!1)})()},[]);const o=c=>{e([c,...s])};return u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Community Hub"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Connect with fellow artists and fans. Share your thoughts, ask questions, and collaborate."}),u.jsx("div",{className:"mb-8",children:u.jsx(SE,{onPostCreated:o})}),n?u.jsx(vn,{}):u.jsx("div",{className:"space-y-6",children:(s||[]).length>0?s.map(c=>u.jsx(hg,{post:c},c.id)):u.jsx("div",{className:"text-center py-12",children:u.jsx("p",{className:"text-gray-400 text-lg",children:"No posts yet. Be the first to share something!"})})})]})},pD=()=>{const[s,e]=Zn.useState(!1),[n,i]=Zn.useState([]),[o,c]=Zn.useState(""),[d,p]=Zn.useState(null),g=Zn.useRef(null),y=()=>{var w;(w=g.current)==null||w.scrollIntoView({behavior:"smooth"})};Zn.useEffect(y,[n]),Zn.useEffect(()=>{(async()=>{const A=await cg();A&&p({id:A.uid,name:A.displayName||"Anonymous",avatarUrl:A.photoURL||"https://api.dicebear.com/7.x/avataaars/svg?seed=default",bio:""})})()},[]),Zn.useEffect(()=>{i([{id:`msg_${Date.now()}`,user:{id:"system",name:"SoundWave",avatarUrl:"https://api.dicebear.com/7.x/shapes/svg?seed=soundwave"},text:"Welcome to the SoundWave global chat! Connect with artists, producers, and music lovers.",timestamp:new Date().toISOString()}])},[]);const x=async w=>{if(w.preventDefault(),!o.trim()||!d)return;const A={id:`msg_${Date.now()}`,user:{id:d.id,name:d.name,avatarUrl:d.avatarUrl},text:o,timestamp:new Date().toISOString()};i(D=>[...D,A]),c("")};return u.jsxs(u.Fragment,{children:[!s&&u.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-brand-accent hover:bg-brand-accent-hover text-white rounded-full p-4 shadow-lg z-50 transition-transform transform hover:scale-110","aria-label":"Open global chat",children:u.jsx(pe,{name:"chat-bubble",className:"w-8 h-8"})}),u.jsx("div",{className:`fixed bottom-0 right-0 h-full w-full sm:h-auto sm:w-96 bg-gray-800 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out ${s?"translate-x-0":"translate-x-full"}`,children:u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 border-b border-gray-600",children:[u.jsx("h3",{className:"font-bold text-white text-lg",children:"Global Chat"}),u.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white","aria-label":"Close global chat",children:u.jsx(pe,{name:"x",className:"w-6 h-6"})})]}),u.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[n.map(w=>u.jsxs("div",{className:`flex items-start gap-3 ${w.user.id===d.id?"flex-row-reverse":""}`,children:[u.jsx("img",{src:w.user.avatarUrl,alt:w.user.name,className:"w-8 h-8 rounded-full object-cover"}),u.jsxs("div",{className:`p-3 rounded-lg max-w-xs ${w.user.id===(d==null?void 0:d.id)?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[u.jsx("p",{className:"font-bold text-sm",children:w.user.name}),u.jsx("p",{className:"text-sm",children:w.text})]})]},w.id)),u.jsx("div",{ref:g})]})}),u.jsx("div",{className:"p-4 bg-gray-700 border-t border-gray-600",children:u.jsxs("form",{onSubmit:x,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:o,onChange:w=>c(w.target.value),placeholder:"Type a message...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-3 hover:bg-brand-accent-hover disabled:bg-gray-500",disabled:!o.trim(),children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z",clipRule:"evenodd"})})})]})})]})})]})},gD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(!0),[o,c]=S.useState(null);S.useEffect(()=>{(async()=>{i(!0);const g=await sd();e(g),i(!1)})()},[]);const d=async p=>{if(o)try{const g=await Ec(o.id,p),y={...o,comments:[...o.comments||[],g]};c(y),e(x=>x.map(w=>w.id===y.id?y:w))}catch(g){console.error("Failed to add comment:",g)}};return n?u.jsx(vn,{}):u.jsxs("div",{children:[o&&u.jsx(_a,{isOpen:!!o,onClose:()=>c(null),title:`Comments for ${o.title}`,comments:o.comments||[],onAddComment:d}),u.jsxs("section",{id:"global-library",children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Global Library"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Explore all tracks uploaded by the SoundWave community."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:s.map(p=>u.jsx(Vh,{track:p,onViewComments:c},p.id))})]})]})},yD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState([]),[o,c]=S.useState([]),[d,p]=S.useState(!0),[g,y]=S.useState(null),[x,w]=S.useState([]),[A,D]=S.useState(0),[k,q]=S.useState(""),[P,Q]=S.useState(!1),[te,J]=S.useState(null),se=S.useContext(No);if(!se)throw new Error("PlaylistsPage must be used within an AudioProvider");const{playTrack:ce,currentTrack:ue,isPlaying:C,setOnTrackEnd:N}=se;S.useEffect(()=>{(async()=>{p(!0);const O=await sd();e([]),c(O),i([]),p(!1)})()},[]);const R=Zn.useCallback(()=>{x.length!==0&&D(me=>{const O=(me+1)%x.length,W=x[O];return ce(W),I(W),O})},[x,ce]);S.useEffect(()=>(g&&N(()=>R),()=>{N(null)}),[g,N,R]);const I=me=>{Q(!0),q("");const O=[`This is fire! ${me.title} is bringing the heat!`,`Loving the vibes on ${me.title} by ${me.artistName}!`,`${me.artistName} never disappoints with tracks like ${me.title}!`,`Turn it up! ${me.title} is a certified banger!`,`Smooth sounds from ${me.artistName} - ${me.title} hits different!`],W=O[Math.floor(Math.random()*O.length)];q(W),Q(!1)},V=me=>{let O;me.artistId?O=o.filter(de=>de.artistId===me.artistId):O=o.filter(de=>de.tags.some(xe=>me.tags.includes(xe)));const W=O.sort(()=>.5-Math.random());w(W),y(me),D(0),W.length>0&&(ce(W[0]),I(W[0]))},z=()=>{y(null),w([])},j=async me=>{te&&console.log("Add comment to playlist:",me)},Ye=x[A];return d?u.jsx(vn,{}):g&&Ye?u.jsx(_D,{station:g,track:Ye,djCommentary:k,isGeneratingCommentary:P,isPlaying:C,onBack:z,onNext:R}):u.jsxs("div",{children:[te&&u.jsx(_a,{isOpen:!!te,onClose:()=>J(null),title:`Comments for ${te.title}`,comments:te.comments||[],onAddComment:j}),u.jsxs("section",{id:"my-playlists",className:"mb-16",children:[u.jsx("div",{className:"flex justify-between items-center mb-6",children:u.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Playlists"})}),n.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(me=>u.jsx(vD,{playlist:me,onViewComments:J},me.id))}):u.jsxs("div",{className:"text-center py-10 px-6 bg-gray-800 rounded-lg",children:[u.jsx(pe,{name:"playlist",className:"w-12 h-12 mx-auto text-gray-500 mb-4"}),u.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Playlists Yet"}),u.jsx("p",{className:"text-gray-400 mt-2",children:"You haven't created any playlists."})]})]}),u.jsxs("section",{id:"radio-stations",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Radio Stations"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Tune in to AI-powered radio stations based on genres, moods, and artists."}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(me=>u.jsxs("div",{className:"group relative rounded-lg overflow-hidden shadow-lg h-64",children:[u.jsx("img",{src:me.imageUrl,alt:me.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),u.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-end",children:[u.jsx("h3",{className:"text-2xl font-bold text-white",children:me.name}),u.jsx("p",{className:"text-gray-300 text-sm mb-4",children:me.description}),u.jsx("div",{className:"w-1/2",children:u.jsx(qe,{onClick:()=>V(me),children:"Tune In"})})]})]},me.id))})]})]})},vD=({playlist:s,onViewComments:e})=>{var n;return u.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg flex flex-col gap-4 transition-all duration-300 hover:bg-gray-700 hover:shadow-xl",children:[u.jsx("div",{className:"grid grid-cols-2 gap-1 w-full aspect-square rounded-md overflow-hidden bg-gray-900",children:s.tracks.slice(0,4).map(i=>u.jsx("img",{src:i.coverArtUrl,alt:"",className:"w-full h-full object-cover"},i.id))}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-white truncate",children:s.title}),u.jsxs("p",{className:"text-sm text-gray-400",children:[s.tracks.length," tracks"]}),u.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700 flex justify-between items-center",children:[u.jsxs("button",{onClick:()=>e(s),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors",children:[u.jsx(pe,{name:"comment",className:"w-4 h-4"}),u.jsx("span",{className:"text-xs font-semibold",children:((n=s.comments)==null?void 0:n.length)||0})]}),u.jsx(qe,{size:"sm",children:"Play"})]})]})]})},_D=({station:s,track:e,djCommentary:n,isGeneratingCommentary:i,isPlaying:o,onBack:c,onNext:d})=>u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-2xl",children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-400",children:"Now Playing on"}),u.jsx("h2",{className:"text-3xl font-bold text-white",children:s.name})]}),u.jsx(qe,{onClick:c,variant:"secondary",children:"Change Station"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[u.jsxs("div",{className:"relative w-full aspect-square rounded-lg overflow-hidden shadow-lg",children:[u.jsx("img",{src:e.coverArtUrl,alt:e.title,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center gap-1 opacity-40",children:Array.from({length:20}).map((p,g)=>u.jsx("div",{className:"audio-bar w-2 h-24 bg-white",style:{animationDelay:`${g*.1}s`,animationPlayState:o?"running":"paused"}},g))})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h3",{className:"text-4xl font-bold text-white",children:e.title}),u.jsx("p",{className:"text-xl text-gray-400 mb-6",children:e.artistName}),u.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm border border-gray-600 rounded-lg p-4 mt-6 relative",children:[u.jsx("div",{className:"absolute -top-3 left-8 w-6 h-6 bg-gray-700/50 border-t border-l border-gray-600 transform rotate-45",style:{clipPath:"polygon(0 0, 100% 0, 100% 100%)"}}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("img",{src:"https://i.pravatar.cc/150?u=dj_gemini",alt:"DJ Gemini",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-brand-accent",children:"SoundWave Radio"}),i?u.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}):u.jsxs("p",{className:"text-gray-300 italic",children:['"',n,'"']})]})]})]}),u.jsx("div",{className:"mt-8 flex items-center gap-4",children:u.jsxs(qe,{onClick:d,className:"w-full",children:[u.jsx(pe,{name:"next",className:"w-5 h-5 mr-2"}),"Next Track"]})})]})]})]})}),NE=({room:s,onLeave:e})=>{const n=S.useRef(null),[i,o]=S.useState(null),[c,d]=S.useState(null),[p,g]=S.useState([]),[y,x]=S.useState(""),w=S.useRef(null),A={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};S.useEffect(()=>((async()=>{try{const q=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(q),n.current&&(n.current.srcObject=q)}catch(q){console.error("Error accessing media devices.",q),d("Could not access camera/microphone. Please check permissions.")}})(),()=>{i&&i.getTracks().forEach(q=>q.stop())}),[]),S.useEffect(()=>{const k=setInterval(()=>{const q=["This is fire!","Great stream!","Loving the vibes","Tune!"],P=q[Math.floor(Math.random()*q.length)],Q={id:`msg_${Date.now()}`,user:{id:`user_${Math.random()}`,name:"Viewer",avatarUrl:`https://i.pravatar.cc/150?u=${Math.random()}`},text:P,timestamp:new Date().toISOString()};g(te=>[...te,Q].slice(-10))},5e3+Math.random()*3e3);return()=>clearInterval(k)},[]),S.useEffect(()=>{var k;(k=w.current)==null||k.scrollIntoView({behavior:"smooth"})},[p]);const D=k=>{if(k.preventDefault(),!y.trim())return;const q={id:`msg_${Date.now()}`,user:A,text:y,timestamp:new Date().toISOString()};g(P=>[...P,q].slice(-10)),x("")};return u.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-90 z-50 flex flex-col items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-6xl h-full max-h-[90vh] flex flex-col md:flex-row overflow-hidden",onClick:k=>k.stopPropagation(),children:[u.jsxs("div",{className:"flex-grow bg-black relative flex items-center justify-center",children:[c?u.jsxs("div",{className:"text-center text-red-400 p-4",children:[u.jsx(pe,{name:"x",className:"w-12 h-12 mx-auto mb-2"}),u.jsx("p",{className:"font-semibold",children:"Stream Error"}),u.jsx("p",{children:c})]}):u.jsx("video",{ref:n,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute top-4 left-4 bg-black/50 p-2 rounded-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:s.host.avatarUrl,alt:s.host.name,className:"w-10 h-10 rounded-full"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white",children:s.name}),u.jsxs("p",{className:"text-sm text-gray-300",children:["Hosted by ",s.host.name]})]})]})}),u.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-md text-sm font-bold",children:[u.jsx(pe,{name:"rss",className:"w-4 h-4 animate-pulse"}),"LIVE"]}),u.jsxs("div",{className:"bg-black/50 text-white px-3 py-1 rounded-md text-sm",children:[s.viewers," watching"]})]})]}),u.jsxs("div",{className:"w-full md:w-80 lg:w-96 bg-gray-800 border-l border-gray-700 flex flex-col h-1/3 md:h-full",children:[u.jsx("div",{className:"p-4 border-b border-gray-700",children:u.jsx("h3",{className:"font-bold text-white",children:"Live Chat"})}),u.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[p.map(k=>u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("img",{src:k.user.avatarUrl,alt:k.user.name,className:"w-8 h-8 rounded-full"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-gray-300",children:k.user.name}),u.jsx("p",{className:"text-sm text-gray-400 bg-gray-700 px-3 py-1 rounded-lg",children:k.text})]})]},k.id)),u.jsx("div",{ref:w})]}),u.jsx("div",{className:"p-4 border-t border-gray-700",children:u.jsxs("form",{onSubmit:D,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:y,onChange:k=>x(k.target.value),placeholder:"Say something...",className:"flex-grow bg-gray-700 border-gray-600 rounded-full py-2 px-3 text-sm text-white focus:ring-brand-accent-hover focus:border-brand-accent-hover"}),u.jsx("button",{type:"submit",className:"bg-brand-accent p-2 rounded-full text-white hover:bg-brand-accent-hover",children:u.jsx(pe,{name:"send",className:"w-5 h-5"})})]})})]}),u.jsx(qe,{onClick:e,className:"absolute bottom-4 left-1/2 -translate-x-1/2",variant:"secondary",children:"Leave Stream"})]})})},hx=({track:s,onUpvote:e,onDownvote:n,onPreview:i,onViewComments:o,audioCtx:c,isNext:d=!1})=>{var A;if(!c)return null;const{currentTrack:p,isPlaying:g,isPreviewing:y}=c,x=(p==null?void 0:p.id)===s.id&&g&&y,w=s.isPremiere?"border-2 border-purple-500/50 shadow-lg shadow-purple-500/20":"";return u.jsxs("div",{className:`relative p-3 rounded-md flex items-center gap-4 transition-all ${d?"bg-gray-700/70":"bg-gray-700/40"} hover:bg-gray-600/50 ${w}`,children:[s.isPremiere&&u.jsxs("div",{className:"absolute -top-2.5 -right-2.5 bg-purple-600 text-white text-[10px] font-bold px-2 py-1 rounded-full flex items-center gap-1 transform rotate-[15deg] shadow-md z-10",children:[u.jsx(pe,{name:"crown",className:"w-3 h-3"}),"PREMIERE"]}),u.jsx("img",{src:s.coverArtUrl,alt:s.title,className:"w-12 h-12 rounded-md object-cover"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-semibold text-white",children:s.title}),u.jsx("p",{className:"text-sm text-gray-400",children:s.artistName})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>o(s),className:"p-3 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors flex items-center gap-1.5 text-xs","aria-label":`View comments for ${s.title}`,children:[u.jsx(pe,{name:"comment",className:"w-4 h-4"}),u.jsx("span",{children:((A=s.comments)==null?void 0:A.length)||0})]}),u.jsx("button",{onClick:()=>i(s),className:"p-3 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":`Preview ${s.title}`,children:u.jsx(pe,{name:x?"pause":"play",className:"w-5 h-5"})})]}),u.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[u.jsx("button",{onClick:()=>e(s.id),className:"p-2 bg-gray-600/50 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":"Upvote",children:u.jsx(pe,{name:"thumbs-up",className:"w-4 h-4"})}),u.jsx("span",{className:"font-bold text-white w-4 text-center",children:s.votes}),u.jsx("button",{onClick:()=>n(s.id),className:"p-2 bg-gray-600/50 rounded-full hover:bg-red-500 hover:text-white transition-colors","aria-label":"Downvote",children:u.jsx(pe,{name:"thumbs-down",className:"w-4 h-4"})})]})]})},xD=()=>{var me;const[s,e]=S.useState([]),[n,i]=S.useState([]),[o,c]=S.useState([]),[d,p]=S.useState([]),[g,y]=S.useState(!0),[x,w]=S.useState(null),[A,D]=S.useState(null),k=S.useContext(No);if(!k)throw new Error("ArtistHubPage must be used within an AudioProvider");const{playTrack:q,currentTrack:P,isPlaying:Q,setOnTrackEnd:te,playPreview:J}=k,se=S.useMemo(()=>[...s].sort((O,W)=>W.votes-O.votes),[s]),ce=S.useMemo(()=>se.find(O=>O.id===(P==null?void 0:P.id))||se[0],[se,P]),ue=S.useMemo(()=>se.find(O=>O.id!==(ce==null?void 0:ce.id)),[se,ce]),C=S.useMemo(()=>se.filter(O=>O.id!==(ce==null?void 0:ce.id)&&O.id!==(ue==null?void 0:ue.id)),[se,ce,ue]),N=Zn.useCallback(()=>{ue&&q(ue)},[ue,q]);S.useEffect(()=>(te(()=>N),()=>te(null)),[te,N]),S.useEffect(()=>{(async()=>{y(!0);const[W,de]=await Promise.all([sd(),sD()]);i([]),c(W),p(de);const xe=W.slice(0,5).map((je,L)=>({...je,votes:Math.floor(Math.random()*5)+(5-L),addedBy:"DJ Gemini",isPremiere:!0}));e(xe),y(!1),!P&&xe.length>0&&q(xe.sort((je,L)=>L.votes-je.votes)[0])})()},[]);const R=O=>{e(W=>W.map(de=>de.id===O?{...de,votes:de.votes+1}:de))},I=O=>{e(W=>W.map(xe=>xe.id===O?{...xe,votes:xe.votes-1}:xe).filter(xe=>xe.id===(P==null?void 0:P.id)||xe.votes>-3))},V=O=>{J(O)},z=()=>{if(o.length===0)return;const O=o.filter(W=>!s.some(de=>de.id===W.id));if(O.length>0){const de={...O[Math.floor(Math.random()*O.length)],votes:1,addedBy:"Sub-Tropical",isPremiere:!0};e(xe=>[...xe,de])}else alert("All tracks are already in the queue!")},j=()=>{w({id:"my_room",name:"Sub-Tropical's Studio Session",host:{id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""},viewers:1,isLive:!0})},Ye=async O=>{if(A)try{const W=await Ec(A.id,O),de={...A,comments:[...A.comments||[],W]};D(de),e(xe=>xe.map(je=>je.id===de.id?de:je))}catch(W){console.error("Failed to add comment:",W)}};return g?u.jsx(vn,{}):x?u.jsx(NE,{room:x,onLeave:()=>w(null)}):u.jsxs("div",{children:[A&&u.jsx(_a,{isOpen:!!A,onClose:()=>D(null),title:`Comments for ${A.title}`,comments:A.comments||[],onAddComment:Ye}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Artist Hub"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Collaborate on a live playlist and join live streams from artists."}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 bg-gray-800 rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Global Playlist"}),u.jsx(qe,{onClick:z,children:"Add Your Track"})]}),u.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2",children:[ce&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-brand-accent mb-2 uppercase tracking-wider",children:"Playing Now"}),u.jsxs("div",{className:`relative bg-gray-700/50 rounded-lg p-4 flex gap-4 items-center shadow-lg ${ce.isPremiere?"ring-2 ring-purple-500 shadow-purple-500/20":"ring-2 ring-brand-accent"}`,children:[ce.isPremiere&&u.jsxs("div",{className:"absolute -top-3 -right-3 bg-purple-600 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 transform rotate-[15deg] shadow-lg z-10",children:[u.jsx(pe,{name:"crown",className:"w-4 h-4"}),"PREMIERE"]}),u.jsx("img",{src:ce.coverArtUrl,alt:ce.title,className:"w-24 h-24 rounded-md object-cover"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("h4",{className:"text-2xl font-bold text-white",children:ce.title}),u.jsx("p",{className:"text-lg text-gray-300",children:ce.artistName}),u.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Added by ",ce.addedBy]}),u.jsxs(qe,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>D(ce),children:[u.jsx(pe,{name:"comment",className:"w-4 h-4 mr-2"}),((me=ce.comments)==null?void 0:me.length)||0," Comments"]})]}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("button",{onClick:()=>R(ce.id),className:"p-2 bg-gray-600 rounded-full hover:bg-brand-accent hover:text-white transition-colors","aria-label":"Upvote",children:u.jsx(pe,{name:"thumbs-up",className:"w-5 h-5"})}),u.jsx("span",{className:"font-bold text-white text-xl",children:ce.votes}),u.jsx("button",{onClick:()=>I(ce.id),className:"p-2 bg-gray-600 rounded-full hover:bg-red-500 hover:text-white transition-colors","aria-label":"Downvote",children:u.jsx(pe,{name:"thumbs-down",className:"w-5 h-5"})})]})]})]}),ue&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-md font-semibold text-gray-400 mb-2 uppercase tracking-wider",children:"Playing Next"}),u.jsx(hx,{track:ue,onUpvote:R,onDownvote:I,onPreview:V,onViewComments:D,audioCtx:k,isNext:!0})]}),C.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-md font-semibold text-gray-400 mb-2 border-t border-gray-700 pt-4 uppercase tracking-wider",children:"Queue"}),u.jsx("div",{className:"space-y-3",children:C.map(O=>u.jsx(hx,{track:O,onUpvote:R,onDownvote:I,onPreview:V,onViewComments:D,audioCtx:k},O.id))})]})]})]}),u.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Live Rooms"}),u.jsxs(qe,{onClick:j,variant:"secondary",children:[u.jsx(pe,{name:"video-camera",className:"w-5 h-5 mr-2"}),"Go Live"]})]}),u.jsx("div",{className:"space-y-4",children:n.map(O=>u.jsxs("div",{className:"bg-gray-700 p-3 rounded-md flex items-center gap-4",children:[u.jsx("img",{src:O.host.avatarUrl,alt:O.host.name,className:"w-12 h-12 rounded-full object-cover"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-semibold text-white",children:O.name}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),u.jsxs("span",{children:[O.viewers," watching"]})]})]}),u.jsx(qe,{onClick:()=>w(O),children:"Join"})]},O.id))})]}),u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Community Playlists"}),u.jsx("div",{className:"space-y-4",children:d.map(O=>u.jsxs("div",{className:"bg-gray-700 p-3 rounded-md flex items-center gap-4 transition-colors hover:bg-gray-600/50",children:[u.jsx("div",{className:"grid grid-cols-2 gap-0.5 w-16 h-16 flex-shrink-0 rounded-md overflow-hidden bg-gray-900",children:O.tracks.slice(0,4).map(W=>u.jsx("img",{src:W.coverArtUrl,alt:"",className:"w-full h-full object-cover"},W.id))}),u.jsxs("div",{className:"flex-grow overflow-hidden",children:[u.jsx("p",{className:"font-semibold text-white truncate",children:O.title}),u.jsxs("p",{className:"text-sm text-gray-400",children:["by ",O.curator.name]})]}),u.jsx(qe,{onClick:()=>alert(`Now playing ${O.title}`),size:"sm",children:"Listen"})]},O.id))})]})]})]})]})},bD=({room:s,onJoin:e})=>u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative h-48 w-full bg-gray-900 flex items-center justify-center",children:[u.jsx("img",{src:s.host.avatarUrl,alt:s.host.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-700 transition-transform duration-300 group-hover:scale-110"}),u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-md text-xs font-bold shadow-md",children:[u.jsx(pe,{name:"rss",className:"w-3 h-3 animate-pulse"}),"LIVE"]}),u.jsxs("div",{className:"absolute bottom-3 left-3 bg-black/50 text-white px-3 py-1 rounded-md text-xs",children:[s.viewers," watching"]})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-white truncate",children:s.name}),u.jsxs("p",{className:"text-sm text-gray-400",children:["Hosted by ",s.host.name]}),u.jsx("div",{className:"flex-grow mt-4",children:u.jsx(qe,{onClick:()=>e(s),className:"w-full",children:"Join Stream"})})]})]}),wD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(!0),[o,c]=S.useState(null);return S.useEffect(()=>{(async()=>{i(!0);const p=await Q4();e(p),i(!1)})()},[]),n?u.jsx(vn,{}):o?u.jsx(NE,{room:o,onLeave:()=>c(null)}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Live Streams"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Join live sessions from artists around the world. Watch performances, get feedback, or learn new skills."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map(d=>u.jsx(bD,{room:d,onJoin:c},d.id))})]})},ED=({tutorial:s})=>{var p;const[e,n]=S.useState(s),[i,o]=S.useState(!1),c=()=>{switch(e.difficulty){case"Beginner":return"bg-green-500/20 text-green-300 border-green-500/30";case"Intermediate":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"Advanced":return"bg-red-500/20 text-red-300 border-red-500/30"}},d=async g=>{try{const y=await K4(e.id,g);n(x=>({...x,comments:[...x.comments||[],y]}))}catch(y){console.error("Failed to add comment:",y)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:e.thumbnailUrl,alt:`${e.title} thumbnail`,className:"w-full h-40 object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:u.jsx(pe,{name:"play",className:"h-8 w-8 text-white"})})}),u.jsx("span",{className:"absolute bottom-2 right-2 text-xs font-semibold bg-gray-900/80 text-white px-2 py-1 rounded",children:e.duration}),u.jsx("span",{className:`absolute top-2 left-2 text-xs font-semibold px-2 py-1 rounded-full border ${c()}`,children:e.difficulty})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-md text-white truncate",children:e.title}),u.jsx(ln,{to:`/profile/${e.instructor.id}`,className:"text-sm text-gray-400 hover:text-white hover:underline",children:e.instructor.name}),u.jsx("div",{className:"flex-grow mt-2",children:u.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(g=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:g},g))})}),u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:u.jsxs("button",{onClick:()=>o(!i),className:"w-full text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 py-1.5 rounded-md flex items-center justify-center gap-1.5 transition-colors",children:[u.jsx(pe,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:[((p=e.comments)==null?void 0:p.length)||0," Comments"]})]})})]}),i&&u.jsx("div",{className:"p-4 border-t border-gray-700",children:u.jsx(pa,{comments:e.comments||[],onAddComment:d})})]})},TD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(!0);return S.useEffect(()=>{(async()=>{i(!0);const c=await tD();e(c),i(!1)})()},[]),n?u.jsx(vn,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Tutorials"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Learn new skills and production techniques from talented artists in the community."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map(o=>u.jsx(ED,{tutorial:o},o.id))})]})},SD=({masterclass:s})=>{const[e,n]=S.useState(s),i=async o=>{try{const c=await H4(e.id,o);n(d=>({...d,comments:[...d.comments||[],c]}))}catch(c){console.error("Failed to add comment:",c)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl transition-colors hover:bg-gray-700/50",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 p-8",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("img",{src:e.coverArtUrl,alt:e.title,className:"w-full md:w-64 h-auto rounded-lg object-cover shadow-lg"})}),u.jsxs("div",{className:"flex flex-col items-start text-center md:text-left",children:[u.jsx("h2",{className:"text-3xl font-bold text-white",children:e.title}),u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-gray-400",children:[u.jsx("img",{src:e.instructor.avatarUrl,alt:e.instructor.name,className:"w-6 h-6 rounded-full"}),u.jsxs("span",{children:["with ",e.instructor.name]})]}),u.jsx("p",{className:"text-gray-300 my-4 max-w-lg",children:e.description}),u.jsx("div",{className:"flex items-center gap-6 text-gray-300 text-sm mb-6",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(pe,{name:"book-open",className:"w-5 h-5 text-brand-accent"}),u.jsxs("span",{children:[e.durationHours," hours of content"]})]})}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(qe,{children:["Enroll for $",e.price.toFixed(2)]}),u.jsx(qe,{variant:"secondary",children:"Learn More"})]})]})]}),u.jsxs("div",{className:"p-8 border-t border-gray-700",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Community Discussion"}),u.jsx(pa,{comments:e.comments||[],onAddComment:i})]})]})},AD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(!0);return S.useEffect(()=>{(async()=>{i(!0);const c=await eD();e(c),i(!1)})()},[]),n?u.jsx(vn,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Masterclasses"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Take a deep dive with exclusive, in-depth courses from top-tier artists and producers."}),u.jsx("div",{className:"space-y-8",children:s.map(o=>u.jsx(SD,{masterclass:o},o.id))})]})},ND=({pack:s})=>{var p;const[e,n]=S.useState(s),[i,o]=S.useState(!1),c=e.price===0,d=async g=>{try{const y=await G4(e.id,g);n(x=>({...x,comments:[...x.comments||[],y]}))}catch(y){console.error("Failed to add comment:",y)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:bg-gray-700 hover:shadow-2xl group flex flex-col",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:e.coverArtUrl,alt:`${e.title} cover art`,className:"w-full h-48 object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"bg-brand-accent rounded-full p-4 transform transition-transform duration-300 hover:scale-110",children:u.jsx(pe,{name:"play",className:"h-8 w-8 text-white"})})}),u.jsx("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full border ${c?"bg-green-500/20 text-green-300 border-green-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`,children:c?"Free":`$${e.price.toFixed(2)}`})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-white truncate",children:e.title}),u.jsxs(ln,{to:`/profile/${e.creator.id}`,className:"text-sm text-gray-400 hover:text-white hover:underline",children:["by ",e.creator.name]}),u.jsx("div",{className:"flex-grow mt-2",children:u.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(g=>u.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 px-2 py-1 rounded-full",children:g},g))})}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 space-y-3",children:[u.jsxs("button",{className:"w-full bg-brand-accent text-white px-4 py-2 rounded-full text-sm font-semibold hover:bg-brand-accent-hover transition-colors flex items-center justify-center gap-2",children:[u.jsx(pe,{name:"download",className:"w-4 h-4"}),u.jsx("span",{children:c?"Download":"Purchase"})]}),u.jsxs("button",{onClick:()=>o(!i),className:"w-full bg-gray-700 text-gray-300 px-4 py-2 rounded-full text-sm font-semibold hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",children:[u.jsx(pe,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:[((p=e.comments)==null?void 0:p.length)||0," Comments"]})]})]})]}),i&&u.jsx("div",{className:"p-4 border-t border-gray-700",children:u.jsx(pa,{comments:e.comments||[],onAddComment:d})})]})},RD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(!0);return S.useEffect(()=>{(async()=>{i(!0);const c=await nD();e(c),i(!1)})()},[]),n?u.jsx(vn,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sample Packs"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Find the perfect sound for your next track. High-quality, royalty-free samples from the community."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:s.map(o=>u.jsx(ND,{pack:o},o.id))})]})},CD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(!1),[o,c]=S.useState(null),[d,p]=S.useState(null),g=Ex(),y=se=>{try{const ue=new DOMParser().parseFromString(se,"application/xml");if(ue.querySelector("parsererror"))throw new Error("Failed to parse XML file. Please ensure it's a valid Rekordbox XML.");const N=ue.querySelectorAll("COLLECTION > TRACK");if(N.length===0)throw new Error("No tracks found in the <COLLECTION> tag. Please check your XML file structure.");const R=Array.from(N).map(I=>({trackId:I.getAttribute("TrackID")||"",title:I.getAttribute("Name")||"N/A",artist:I.getAttribute("Artist")||"N/A",album:I.getAttribute("Album")||"N/A",genre:I.getAttribute("Genre")||"N/A",totalTime:I.getAttribute("TotalTime")||"N/A",dateAdded:I.getAttribute("DateAdded")||"N/A",comments:I.getAttribute("Comments")||"",playCount:I.getAttribute("PlayCount")||"0",key:I.getAttribute("Tonality")||"N/A"}));g("/profile/user_1",{state:{collection:R}})}catch(ce){c(ce.message||"An unknown error occurred during parsing."),e([])}finally{i(!1)}},x=S.useCallback(se=>{if(se.length===0)return;const ce=se[0];if(ce.type!=="text/xml"){c("Invalid file type. Please upload a Rekordbox XML file.");return}i(!0),c(null),e([]),p(ce.name);const ue=new FileReader;ue.onabort=()=>{c("File reading was aborted."),i(!1)},ue.onerror=()=>{c("File reading has failed."),i(!1)},ue.onload=()=>{const C=ue.result;y(C)},ue.readAsText(ce)},[]),[w,A]=S.useState(!1),D=Zn.useRef(null),k=se=>{se.preventDefault(),se.stopPropagation(),A(!0)},q=se=>{se.preventDefault(),se.stopPropagation(),A(!1)},P=se=>{se.preventDefault(),se.stopPropagation()},Q=se=>{se.preventDefault(),se.stopPropagation(),A(!1),se.dataTransfer.files&&se.dataTransfer.files.length>0&&(x(Array.from(se.dataTransfer.files)),se.dataTransfer.clearData())},te=se=>{se.target.files&&se.target.files.length>0&&x(Array.from(se.target.files))},J=()=>{var se;(se=D.current)==null||se.click()};return u.jsxs("div",{className:"max-w-7xl mx-auto text-white",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Import Rekordbox Collection"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Upload your Rekordbox XML file to view and manage your music library."}),u.jsxs("div",{role:"button",tabIndex:0,"aria-label":"Upload Rekordbox XML file",className:`bg-gray-800 p-8 rounded-lg shadow-lg border-2 border-dashed ${w?"border-brand-accent":"border-gray-600"} transition-colors duration-300 text-center cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-accent`,onDragEnter:k,onDragLeave:q,onDragOver:P,onDrop:Q,onClick:J,onKeyDown:se=>(se.key==="Enter"||se.key===" ")&&J(),children:[u.jsx("input",{ref:D,type:"file",accept:".xml,text/xml",onChange:te,className:"hidden"}),u.jsx(pe,{name:"upload",className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),u.jsx("h2",{className:"text-xl font-semibold",children:n?"Processing...":d?`File: ${d}`:"Drop your Rekordbox XML here or click to browse"}),u.jsx("p",{className:"text-gray-500 mt-1",children:"Export your collection from Rekordbox as an XML file."})]}),n&&u.jsx(vn,{}),o&&u.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative my-6",role:"alert",children:[u.jsx("strong",{className:"font-bold",children:"Error:"}),u.jsxs("span",{className:"block sm:inline",children:[" ",o]})]}),s.length>0&&!n&&u.jsxs("div",{className:"mt-8 text-center",children:[u.jsxs("h2",{className:"text-xl font-semibold text-green-400",children:["Successfully processed ",s.length," tracks."]}),u.jsx("p",{className:"text-gray-400",children:"Redirecting you to your profile..."})]})]})},jD=({label:s})=>u.jsxs(ln,{to:`/labels/${s.id}`,className:"group block bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:scale-105",children:[u.jsxs("div",{className:"relative h-40",children:[u.jsx("img",{src:s.bannerUrl,alt:`${s.name} banner`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-800 via-gray-800/50 to-transparent"})]}),u.jsxs("div",{className:"p-4 -mt-16 relative flex items-center space-x-4",children:[u.jsx("img",{src:s.logoUrl,alt:`${s.name} logo`,className:"w-20 h-20 rounded-full object-cover border-4 border-gray-800 group-hover:border-gray-700 transition-colors"}),u.jsx("div",{children:u.jsx("h3",{className:"font-bold text-xl text-white",children:s.name})})]})]}),ID=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(!0);return S.useEffect(()=>{(async()=>{i(!0);const c=await L4();e(c),i(!1)})()},[]),n?u.jsx(vn,{}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Record Labels"}),u.jsx("p",{className:"text-gray-400 mb-8",children:"Discover the labels shaping the sound of the community."}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:(s||[]).length>0?s.map(o=>u.jsx(jD,{label:o},o.id)):u.jsx("div",{className:"col-span-full text-center py-12",children:u.jsx("p",{className:"text-gray-400 text-lg",children:"No labels found. Check back later!"})})})]})},DD=({event:s})=>{const e=new Date(s.date),n=e.toLocaleString("default",{month:"short"}).toUpperCase(),i=e.getDate();return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 flex flex-col sm:flex-row items-start gap-6 transition-colors hover:bg-gray-700/50",children:[u.jsxs("div",{className:"flex-shrink-0 text-center bg-gray-700 rounded-md p-3 w-full sm:w-20",children:[u.jsx("p",{className:"text-sm font-bold text-brand-accent",children:n}),u.jsx("p",{className:"text-3xl font-bold text-white",children:i})]}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:s.title}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mt-1",children:[u.jsx(pe,{name:"map-pin",className:"w-4 h-4"}),u.jsx("span",{children:s.location})]}),u.jsx("p",{className:"text-gray-300 mt-2",children:s.description})]}),s.ticketUrl&&u.jsx("div",{className:"self-center sm:self-auto",children:u.jsx("a",{href:s.ticketUrl,target:"_blank",rel:"noopener noreferrer",children:u.jsx(qe,{children:"Buy Tickets"})})})]})},MD=({track:s,onViewComments:e})=>{var g;const n=S.useContext(No);if(!n)throw new Error("FeaturedReleaseCard must be used within an AudioProvider");const{playTrack:i,currentTrack:o,isPlaying:c}=n,d=(o==null?void 0:o.id)===s.id&&c,p=()=>{i(s)};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col md:flex-row",children:[u.jsx("div",{className:"md:w-1/3 flex-shrink-0",children:u.jsx("img",{src:s.coverArtUrl,alt:s.title,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"p-8 flex flex-col justify-center",children:[u.jsx("h3",{className:"text-3xl lg:text-4xl font-bold text-white",children:s.title}),u.jsxs("p",{className:"text-xl text-gray-400 mt-1 mb-4",children:["by ",s.artistName]}),u.jsx("p",{className:"text-gray-300 max-w-prose mb-6",children:s.description}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(qe,{onClick:p,size:"md",children:[u.jsx(pe,{name:d?"pause":"play",className:"w-5 h-5 mr-2"}),d?"Pause":"Play"]}),u.jsx(qe,{variant:"secondary",children:"View Release"}),e&&u.jsxs("button",{onClick:()=>e(s),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[u.jsx(pe,{name:"comment",className:"w-5 h-5"}),u.jsx("span",{className:"font-semibold",children:((g=s.comments)==null?void 0:g.length)||0})]})]})]})]})},OD=({artist:s,tracks:e,onViewMore:n})=>u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col md:flex-row items-center p-6 gap-6",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("img",{src:s.avatarUrl,alt:s.name,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-700"})}),u.jsxs("div",{className:"flex-grow w-full",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-white",children:s.name}),u.jsx("p",{className:"text-gray-400 mt-1 max-w-md line-clamp-2",children:s.bio})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0 mt-2 sm:mt-0",children:[u.jsx(qe,{onClick:n,variant:"secondary",size:"sm",children:"View More"}),u.jsx(ln,{to:`/profile/${s.id}`,children:u.jsx(qe,{variant:"secondary",size:"sm",children:"Profile"})})]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[u.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Latest on this label:"}),e.length>0?u.jsx("div",{className:"space-y-2",children:e.map(i=>u.jsxs("div",{className:"flex items-center justify-between bg-gray-700/50 p-2 rounded-md",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(pe,{name:"music-note",className:"w-4 h-4 text-brand-accent"}),u.jsx("span",{className:"text-white text-sm",children:i.title})]}),u.jsx("span",{className:"text-xs text-gray-400",children:i.category})]},i.id))}):u.jsx("p",{className:"text-sm text-gray-500",children:"No tracks found on this label."})]})]})]}),kD=({artist:s,onClose:e})=>{var n;return u.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:e,children:u.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col overflow-hidden relative",onClick:i=>i.stopPropagation(),children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-20 bg-gray-900/50 p-2 rounded-full",children:u.jsx(pe,{name:"x",className:"w-6 h-6"})}),u.jsxs("div",{className:"relative h-64 w-full flex-shrink-0",children:[u.jsx("img",{src:((n=s.gallery)==null?void 0:n[0])||s.avatarUrl,alt:`${s.name}`,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-800 to-transparent flex items-end p-8",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("img",{src:s.avatarUrl,alt:s.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-800"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-300",children:"In Conversation with"}),u.jsx("h1",{className:"text-4xl font-bold text-white",children:s.name})]})]})})]}),u.jsx("div",{className:"flex-grow overflow-y-auto p-8",children:u.jsxs("div",{className:"prose prose-invert prose-lg max-w-none",children:[u.jsx("p",{className:"lead text-xl text-gray-300",children:s.bio}),s.interview&&s.interview.length>0&&u.jsx("div",{className:"mt-12",children:s.interview.map((i,o)=>u.jsxs("div",{className:"mb-8",children:[u.jsx("h3",{className:"text-brand-accent font-semibold",children:i.question}),u.jsx("p",{children:i.answer})]},o))}),s.gallery&&s.gallery.length>1&&u.jsxs("div",{className:"mt-12",children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Gallery"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:s.gallery.map((i,o)=>u.jsx("img",{src:i,alt:`Artist gallery image ${o+1}`,className:"w-full h-40 object-cover rounded-lg shadow-md"},o))})]})]})})]})})},LD=({opportunity:s,labelId:e})=>{var y,x;const[n,i]=S.useState(s),[o,c]=S.useState(!1),p={Artist:{icon:"music-note",color:"text-blue-400"},Vocalist:{icon:"microphone",color:"text-purple-400"},Designer:{icon:"palette",color:"text-yellow-400"},Collaborator:{icon:"users",color:"text-green-400"}}[n.type]||{icon:"sparkles",color:"text-gray-400"},g=async w=>{try{const A=await $4(e,n.id,w);i(D=>({...D,comments:[...D.comments||[],A]}))}catch(A){console.error("Failed to add comment:",A)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 transition-colors hover:bg-gray-700/50",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[u.jsx("div",{className:"flex-shrink-0 bg-gray-700 p-4 rounded-full",children:u.jsx(pe,{name:p.icon,className:`w-8 h-8 ${p.color}`})}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("span",{className:`text-sm font-bold uppercase tracking-wider ${p.color}`,children:n.type}),u.jsx("h3",{className:"text-xl font-bold text-white mt-1",children:n.title}),u.jsx("p",{className:"text-gray-300 mt-2",children:n.description})]}),u.jsx("div",{className:"self-center sm:self-auto flex-shrink-0",children:u.jsx(qe,{onClick:()=>alert("Application form coming soon!"),children:"Apply Now"})})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[u.jsxs("button",{onClick:()=>c(w=>!w),className:"text-sm font-semibold text-gray-400 hover:text-white flex items-center gap-2",children:[u.jsx(pe,{name:"comment",className:"w-4 h-4"}),u.jsxs("span",{children:[o?"Hide":"View"," ",((y=n.comments)==null?void 0:y.length)||0," Comment",((x=n.comments)==null?void 0:x.length)!==1&&"s"]})]}),o&&u.jsx("div",{className:"mt-4",children:u.jsx(pa,{comments:n.comments||[],onAddComment:g})})]})]})},dx=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(""),[o,c]=S.useState([]),d=S.useRef(null),p={id:"user_1",name:"Sub-Tropical",avatarUrl:"https://picsum.photos/id/1015/200/200",bio:""};S.useEffect(()=>{bE().then(c)},[]),S.useEffect(()=>{if(o.length===0)return;const y=TE(),x=o.filter(A=>A.id!==p.id);x.length>0&&e([{id:`msg_label_${Date.now()}`,user:x[0],text:"This label is legendary!",timestamp:new Date(Date.now()-5e3).toISOString()}]);const w=setInterval(()=>{if(document.hidden)return;const A=x[Math.floor(Math.random()*x.length)],D=y[Math.floor(Math.random()*y.length)],k={id:`msg_label_${Date.now()}`,user:A,text:D,timestamp:new Date().toISOString()};e(q=>[...q,k].slice(-20))},1e4);return()=>clearInterval(w)},[o]),S.useEffect(()=>{var y;(y=d.current)==null||y.scrollIntoView({behavior:"smooth"})},[s]);const g=y=>{if(y.preventDefault(),!n.trim())return;const x={id:`msg_label_${Date.now()}`,user:p,text:n,timestamp:new Date().toISOString()};e(w=>[...w,x]),i("")};return u.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-[400px]",children:[u.jsx("h3",{className:"text-xl font-bold text-white p-4 border-b border-gray-700",children:"Community Chat"}),u.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[s.map(y=>u.jsxs("div",{className:`flex items-start gap-3 ${y.user.id===p.id?"flex-row-reverse":""}`,children:[u.jsx("img",{src:y.user.avatarUrl,alt:y.user.name,className:"w-8 h-8 rounded-full object-cover"}),u.jsxs("div",{className:`p-3 rounded-lg max-w-sm shadow ${y.user.id===p.id?"bg-brand-accent text-white":"bg-gray-700 text-gray-300"}`,children:[u.jsx("p",{className:"font-bold text-sm mb-1",children:y.user.name}),u.jsx("p",{className:"text-sm",children:y.text})]})]},y.id)),u.jsx("div",{ref:d})]})}),u.jsx("div",{className:"p-4 bg-gray-700/50 border-t border-gray-700",children:u.jsxs("form",{onSubmit:g,className:"flex gap-3 items-center",children:[u.jsx("input",{type:"text",value:n,onChange:y=>i(y.target.value),placeholder:"Join the conversation...",className:"flex-grow bg-gray-600 border border-gray-500 rounded-full py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-2 hover:bg-brand-accent-hover disabled:bg-gray-500 transition-colors",disabled:!n.trim(),children:u.jsx(pe,{name:"send",className:"w-5 h-5"})})]})})]})},VD=()=>{const[s,e]=S.useState(""),[n,i]=S.useState(!1),[o,c]=S.useState(!1),d=p=>{p.preventDefault(),s&&(i(!0),setTimeout(()=>{i(!1),c(!0)},1e3))};return o?u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 text-center",children:[u.jsx("div",{className:"bg-green-500/20 text-green-300 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:u.jsx(pe,{name:"thumbs-up",className:"w-8 h-8"})}),u.jsx("h3",{className:"text-xl font-bold text-white",children:"You're Subscribed!"}),u.jsx("p",{className:"text-gray-400 mt-2",children:"Thanks for joining our mailing list. Keep an eye on your inbox for exclusive content."})]}):u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Join the Mailing List"}),u.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"Get exclusive downloads, event news, and special offers directly in your inbox."}),u.jsxs("form",{onSubmit:d,className:"space-y-3",children:[u.jsx("input",{type:"email",value:s,onChange:p=>e(p.target.value),placeholder:"Enter your email",required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white"}),u.jsx(qe,{type:"submit",isLoading:n,className:"w-full",children:"Subscribe"})]})]})},UD=()=>{var Ye;const{labelId:s}=Tx(),[e,n]=S.useState(null),[i,o]=S.useState([]),[c,d]=S.useState([]),[p,g]=S.useState([]),[y,x]=S.useState([]),[w,A]=S.useState(!0),[D,k]=S.useState("releases"),[q,P]=S.useState(!1),[Q,te]=S.useState(null),[J,se]=S.useState(null),[ce,ue]=S.useState(null);S.useEffect(()=>{(async()=>{if(s){A(!0);try{const[O,W,de,xe,je]=await Promise.all([V4(s),U4(s),P4(s),z4(s),B4(s)]);n(O||null),o(W),d(de),g(xe),x(je),O!=null&&O.theme&&te(O.theme)}catch(O){console.error("Failed to fetch label data:",O)}finally{A(!1)}}})()},[s]);const C=()=>{if(!e)return;P(!0);const me=[{bannerUrl:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=1200",primaryColor:"#8B5CF6",secondaryColor:"#EC4899"},{bannerUrl:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=1200",primaryColor:"#3B82F6",secondaryColor:"#10B981"},{bannerUrl:"https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1200",primaryColor:"#F59E0B",secondaryColor:"#EF4444"}],O=me[Math.floor(Math.random()*me.length)];te(O),P(!1)},N=async me=>{if(ce)try{const O=await Ec(ce.id,me),W={...ce,comments:[...ce.comments||[],O]};ue(W),o(de=>de.map(xe=>xe.id===W.id?W:xe))}catch(O){console.error("Failed to add comment to track:",O)}},R=async me=>{if(e)try{const O=await q4(e.id,me);n(W=>W?{...W,comments:[...W.comments||[],O]}:null)}catch(O){console.error("Failed to add comment to label:",O)}},I=e!=null&&e.featuredReleaseId?i.find(me=>me.id===e.featuredReleaseId):null,V=e!=null&&e.featuredReleaseId?i.filter(me=>me.id!==e.featuredReleaseId):i,z=()=>{var me;switch(D){case"releases":return u.jsxs("div",{children:[I&&u.jsxs("div",{className:"mb-12",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-wider",children:"Featured Release"}),u.jsx(MD,{track:I,onViewComments:ue})]}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-wider",children:"All Releases"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:V.map(O=>u.jsx(Vh,{track:O,onViewComments:ue},O.id))})]});case"artists":return u.jsx("div",{className:"space-y-8",children:c.map(O=>u.jsx(OD,{artist:O,tracks:i.filter(W=>W.artistId===O.id).slice(0,3),onViewMore:()=>se(O)},O.id))});case"about":return u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Our Story"}),u.jsx("p",{className:"text-gray-300 whitespace-pre-line leading-relaxed",children:e==null?void 0:e.bio})]}),u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Community Feedback"}),u.jsx(pa,{comments:(e==null?void 0:e.comments)||[],onAddComment:R})]}),(e==null?void 0:e.eventPhotos)&&e.eventPhotos.length>0&&u.jsxs("div",{className:"bg-gray-800 rounded-lg p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Event Photos"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:e.eventPhotos.map((O,W)=>u.jsx("img",{src:O,alt:`Label event photo ${W+1}`,className:"w-full h-40 object-cover rounded-md shadow-lg"},W))})]})]}),u.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[u.jsx(VD,{}),(e==null?void 0:e.storeLinks)&&u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Stores"}),u.jsx("div",{className:"space-y-3",children:e.storeLinks.map(O=>u.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 p-4 rounded-lg flex items-center gap-4 hover:bg-gray-600 transition-colors",children:[u.jsx(pe,{name:O.icon,className:"w-6 h-6 text-brand-accent"}),u.jsx("span",{className:"font-bold text-white",children:O.name})]},O.name))})]})]})]});case"posts":return u.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:p.map(O=>u.jsx(hg,{post:O},O.id))});case"events":return u.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:y.map(O=>u.jsx(DD,{event:O},O.id))});case"opportunities":return u.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:(me=e==null?void 0:e.opportunities)==null?void 0:me.map(O=>u.jsx(LD,{opportunity:O,labelId:e.id},O.id))});case"chat":return u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsx(dx,{})});default:return null}},j=({tab:me,label:O,count:W})=>u.jsxs("button",{onClick:()=>k(me),className:`px-4 py-2 text-sm font-semibold rounded-t-lg transition-colors border-b-2 whitespace-nowrap ${D===me?"text-white border-brand-accent bg-gray-700/50":"text-gray-400 border-transparent hover:text-white hover:border-gray-500"}`,children:[O,typeof W<"u"&&W>0&&u.jsx("span",{className:"text-xs bg-gray-600 rounded-full px-2 py-0.5 ml-1",children:W})]});return w?u.jsx(vn,{}):e?u.jsxs("div",{children:[ce&&u.jsx(_a,{isOpen:!!ce,onClose:()=>ue(null),title:`Comments for ${ce.title}`,comments:ce.comments||[],onAddComment:N}),J&&u.jsx(kD,{artist:J,onClose:()=>se(null)}),u.jsxs("div",{className:"relative h-48 md:h-64 bg-gray-800 rounded-lg overflow-hidden mb-[-80px]",children:[u.jsx("img",{src:(Q==null?void 0:Q.bannerUrl)||e.bannerUrl,alt:`${e.name} banner`,className:"w-full h-full object-cover opacity-40 transition-all duration-500"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"})]}),u.jsx("div",{className:"relative px-8",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6",children:[u.jsx("img",{src:e.logoUrl,alt:`${e.name} logo`,className:"w-40 h-40 rounded-full object-cover border-4 border-gray-900 flex-shrink-0"}),u.jsx("div",{className:"flex-grow text-center md:text-left",children:u.jsx("h1",{className:"text-4xl font-bold text-white",children:e.name})}),u.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[u.jsx(qe,{onClick:()=>alert("Contact form coming soon!"),variant:"secondary",children:"Contact"}),u.jsx(qe,{onClick:C,variant:"secondary",children:"Change Theme"}),u.jsx(qe,{children:"Follow Label"})]})]})}),u.jsx("div",{className:"my-8 max-w-5xl mx-auto",children:u.jsx(dx,{})}),u.jsx("div",{className:"mt-8 border-b border-gray-700 mb-6",children:u.jsxs("nav",{className:"-mb-px flex space-x-4 overflow-x-auto",children:[u.jsx(j,{tab:"releases",label:"Releases",count:i.length}),u.jsx(j,{tab:"artists",label:"Artists",count:c.length}),u.jsx(j,{tab:"about",label:"About"}),u.jsx(j,{tab:"events",label:"Events",count:y.length}),u.jsx(j,{tab:"opportunities",label:"Opportunities",count:(Ye=e.opportunities)==null?void 0:Ye.length}),u.jsx(j,{tab:"chat",label:"Live Chat"}),u.jsx(j,{tab:"posts",label:"Posts",count:p.length})]})}),u.jsx("div",{children:z()})]}):u.jsx("div",{className:"text-center text-white",children:"Label not found."})},PD=({onPostCreated:s})=>{const[e,n]=S.useState(!1),[i,o]=S.useState(""),[c,d]=S.useState(""),[p,g]=S.useState("followers"),y=async x=>{if(x.preventDefault(),!i.trim()||!c.trim())return;n(!0);const w={authorId:"user_1",authorName:"Sub-Tropical",authorAvatarUrl:"https://picsum.photos/id/1015/100/100"};try{const A=await EE({title:i,content:c,audience:p,...w});s(A),o(""),d(""),g("followers")}catch(A){console.error("Failed to add post:",A)}finally{n(!1)}};return u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-2xl h-full",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Make a Broadcast"}),u.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Create a post to share with your audience. This will appear in their community feed."}),u.jsxs("form",{onSubmit:y,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"broadcast-title",className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),u.jsx("input",{id:"broadcast-title",type:"text",placeholder:"e.g. New Track Out Sunday!",value:i,onChange:x=>o(x.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"broadcast-content",className:"block text-sm font-medium text-gray-400 mb-1",children:"Message"}),u.jsx("textarea",{id:"broadcast-content",placeholder:"Share some details with your fans...",value:c,onChange:x=>d(x.target.value),required:!0,rows:5,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white placeholder-gray-400"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"broadcast-audience",className:"block text-sm font-medium text-gray-400 mb-1",children:"Audience"}),u.jsxs("select",{id:"broadcast-audience",value:p,onChange:x=>g(x.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-4 focus:ring-brand-accent focus:border-brand-accent transition text-white",children:[u.jsx("option",{value:"followers",children:"All Followers"}),u.jsx("option",{value:"subscribers",children:"Paid Subscribers"}),u.jsx("option",{value:"public",children:"Public"})]})]}),u.jsx("div",{className:"flex justify-end pt-2",children:u.jsxs(qe,{type:"submit",isLoading:e,children:[u.jsx(pe,{name:"send",className:"w-4 h-4 mr-2"}),"Broadcast Post"]})})]})]})},zD=()=>{const[s,e]=S.useState([]),[n,i]=S.useState(null),[o,c]=S.useState(!0),[d,p]=S.useState(""),g=S.useRef(null),y="user_1";S.useEffect(()=>{(async()=>{c(!0);const q=await X4(y);e(q),q.length>0&&i(q[0]),c(!1)})()},[]),S.useEffect(()=>{var k;(k=g.current)==null||k.scrollIntoView({behavior:"smooth"})},[n,n==null?void 0:n.messages.length]);const x=k=>{if(k.preventDefault(),!d.trim()||!n)return;const q={id:`msg_${Date.now()}`,senderId:y,text:d,timestamp:new Date().toISOString()},P={...n,messages:[...n.messages,q]};i(P),e(Q=>Q.map(te=>te.id===P.id?P:te)),p("")},w=k=>{alert(`Broadcast sent to ${k.audience}! Title: ${k.title}`)},A=k=>{const q=new Date(k),P=Math.floor((new Date().getTime()-q.getTime())/1e3);if(P<60)return"Just now";let Q=P/31536e3;return Q>1?Math.floor(Q)+"y":(Q=P/2592e3,Q>1?Math.floor(Q)+"mo":(Q=P/86400,Q>1?Math.floor(Q)+"d":(Q=P/3600,Q>1?Math.floor(Q)+"h":(Q=P/60,Q>1?Math.floor(Q)+"m":"Just now"))))};if(o)return u.jsx(vn,{});const D=n==null?void 0:n.participants.find(k=>k.id!==y);return u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsxs("div",{className:"flex h-[calc(100vh-200px)] bg-gray-800 rounded-lg shadow-2xl overflow-hidden",children:[u.jsxs("aside",{className:"w-1/3 xl:w-1/4 bg-gray-800 border-r border-gray-700 flex flex-col",children:[u.jsx("div",{className:"p-4 border-b border-gray-700",children:u.jsx("h1",{className:"text-xl font-bold text-white",children:"Direct Messages"})}),u.jsx("div",{className:"flex-grow overflow-y-auto",children:s.map(k=>{const q=k.participants.find(te=>te.id!==y),P=k.messages[k.messages.length-1],Q=(n==null?void 0:n.id)===k.id;return u.jsxs("button",{onClick:()=>i(k),className:`w-full text-left p-4 flex items-center gap-4 transition-colors ${Q?"bg-gray-700":"hover:bg-gray-700/50"}`,children:[u.jsxs("div",{className:"relative flex-shrink-0",children:[u.jsx("img",{src:q.avatarUrl,alt:q.name,className:"w-12 h-12 rounded-full object-cover"}),k.unreadCount>0&&u.jsx("span",{className:"absolute top-0 right-0 block h-3 w-3 rounded-full bg-brand-accent ring-2 ring-gray-800"})]}),u.jsxs("div",{className:"flex-grow overflow-hidden",children:[u.jsxs("div",{className:"flex justify-between items-baseline",children:[u.jsx("h3",{className:`font-semibold truncate ${k.unreadCount>0?"text-white":"text-gray-300"}`,children:q.name}),u.jsx("p",{className:"text-xs text-gray-500",children:A(P.timestamp)})]}),u.jsxs("p",{className:`text-sm truncate ${k.unreadCount>0?"text-gray-300":"text-gray-400"}`,children:[P.senderId===y&&"You: ",P.text]})]})]},k.id)})})]}),u.jsx("main",{className:"flex-1 flex flex-col",children:!n||!D?u.jsx("div",{className:"flex-grow flex items-center justify-center text-gray-500",children:u.jsx("p",{children:"Select a conversation to start chatting."})}):u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"p-4 border-b border-gray-700 flex items-center gap-4 bg-gray-800 z-10",children:[u.jsx("img",{src:D.avatarUrl,alt:D.name,className:"w-10 h-10 rounded-full object-cover"}),u.jsx("h2",{className:"text-lg font-bold text-white",children:D.name})]}),u.jsx("div",{className:"flex-grow p-6 overflow-y-auto",children:u.jsxs("div",{className:"space-y-6",children:[n.messages.map(k=>u.jsxs("div",{className:`flex items-end gap-3 ${k.senderId===y?"flex-row-reverse":""}`,children:[k.senderId!==y&&u.jsx("img",{src:D.avatarUrl,alt:D.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),u.jsx("div",{className:`p-3 rounded-2xl max-w-lg shadow ${k.senderId===y?"bg-brand-accent text-white rounded-br-none":"bg-gray-700 text-gray-300 rounded-bl-none"}`,children:u.jsx("p",{className:"text-sm",children:k.text})})]},k.id)),u.jsx("div",{ref:g})]})}),u.jsx("footer",{className:"p-4 bg-gray-800 border-t border-gray-700",children:u.jsxs("form",{onSubmit:x,className:"flex items-center gap-3",children:[u.jsx("input",{type:"text",value:d,onChange:k=>p(k.target.value),placeholder:`Message ${D.name}...`,className:"flex-grow bg-gray-700 border-gray-600 rounded-full py-2 px-4 text-sm text-white focus:ring-brand-accent focus:border-brand-accent"}),u.jsx("button",{type:"submit",className:"bg-brand-accent text-white rounded-full p-3 hover:bg-brand-accent-hover disabled:bg-gray-600",disabled:!d.trim(),children:u.jsx(pe,{name:"send",className:"w-5 h-5"})})]})})]})})]})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsx(PD,{onPostCreated:w})})]})},BD=({onComplete:s,currentUserId:e,currentUserEmail:n})=>{const[i,o]=S.useState(1),[c,d]=S.useState(!1),[p,g]=S.useState(""),[y,x]=S.useState(""),[w,A]=S.useState(""),[D,k]=S.useState(""),[q,P]=S.useState(""),[Q,te]=S.useState(!1),[J,se]=S.useState(""),[ce,ue]=S.useState(null),[C,N]=S.useState(""),[R,I]=S.useState(["Electronic","Hip Hop","Pop","Rock","Jazz","Classical","R&B","Soul","Country","Reggae","Latin","Indie","Alternative","Metal","Punk","Folk","Blues","Funk","Disco","House","Techno","Trance","Dubstep","Drum & Bass","Trap","Lo-Fi","Ambient","Experimental","World","Gospel","K-Pop","J-Pop","Afrobeat","Dancehall","Garage","Grime","Hardstyle","Progressive","Psychedelic","Synthwave","Vaporwave","Chillwave"]),[V,z]=S.useState(""),[j,Ye]=S.useState(""),[me,O]=S.useState(""),[W,de]=S.useState(""),xe=re=>{var be;const fe=(be=re.target.files)==null?void 0:be[0];if(fe){ue(fe);const Fe=new FileReader;Fe.onloadend=()=>{N(Fe.result)},Fe.readAsDataURL(fe)}},je=re=>{const fe=re.target.value;fe==="custom"?(te(!0),k("")):(te(!1),k(fe),P(""))},L=()=>{if(q.trim().length>0){const re=q.trim();R.includes(re)||I([...R,re].sort()),k(re),P(""),te(!1)}},ee=async()=>{d(!0),g("");try{let re="https://picsum.photos/id/1015/200/200";ce&&(re=await k4(ce,e));const be=await I4({id:e,name:y,bio:w,genre:D,location:J,avatarUrl:re,spotifyUrl:V||void 0,soundcloudUrl:j||void 0,instagramUrl:me||void 0,twitterUrl:W||void 0,followers:0,following:0,isVerified:!1});s(be)}catch(re){console.error("Error creating artist profile:",re),g(re.message||"Failed to create profile. Please try again.")}finally{d(!1)}},H=y.trim().length>=2,le=w.trim().length>=10&&D.trim().length>0;return u.jsx("div",{className:"fixed inset-0 bg-gray-900/95 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-8 text-center",children:[u.jsx(pe,{name:"music-note",className:"w-16 h-16 mx-auto mb-4 text-white"}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome to SoundWave!"}),u.jsx("p",{className:"text-white/90",children:"Let's create your artist profile"})]}),u.jsxs("div",{className:"flex justify-center items-center gap-4 p-6 border-b border-gray-700",children:[u.jsxs("div",{className:`flex items-center gap-2 ${i>=1?"text-purple-500":"text-gray-500"}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i>=1?"bg-purple-500 text-white":"bg-gray-700"}`,children:"1"}),u.jsx("span",{className:"font-medium hidden sm:inline",children:"Basic Info"})]}),u.jsx("div",{className:"w-12 h-0.5 bg-gray-700"}),u.jsxs("div",{className:`flex items-center gap-2 ${i>=2?"text-purple-500":"text-gray-500"}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i>=2?"bg-purple-500 text-white":"bg-gray-700"}`,children:"2"}),u.jsx("span",{className:"font-medium hidden sm:inline",children:"About You"})]}),u.jsx("div",{className:"w-12 h-0.5 bg-gray-700"}),u.jsxs("div",{className:`flex items-center gap-2 ${i>=3?"text-purple-500":"text-gray-500"}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i>=3?"bg-purple-500 text-white":"bg-gray-700"}`,children:"3"}),u.jsx("span",{className:"font-medium hidden sm:inline",children:"Social Links"})]})]}),u.jsxs("div",{className:"p-8",children:[p&&u.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500",children:p}),i===1&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Artist Name *"}),u.jsx("input",{type:"text",value:y,onChange:re=>x(re.target.value),placeholder:"Enter your artist name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",maxLength:50}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This is how you'll appear on SoundWave"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Picture"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-700 overflow-hidden flex items-center justify-center",children:C?u.jsx("img",{src:C,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx(pe,{name:"user",className:"w-12 h-12 text-gray-500"})}),u.jsxs("label",{className:"cursor-pointer",children:[u.jsx("div",{className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors",children:"Choose Image"}),u.jsx("input",{type:"file",accept:"image/*",onChange:xe,className:"hidden"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location"}),u.jsx("input",{type:"text",value:J,onChange:re=>se(re.target.value),placeholder:"e.g., Los Angeles, CA",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),i===2&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio *"}),u.jsx("textarea",{value:w,onChange:re=>A(re.target.value),placeholder:"Tell us about your music and journey...",rows:5,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none",maxLength:500}),u.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[w.length,"/500 characters"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Primary Genre *"}),u.jsxs("select",{value:Q?"custom":D,onChange:je,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[u.jsx("option",{value:"",children:"Select a genre"}),R.map(re=>u.jsx("option",{value:re,children:re},re)),u.jsx("option",{value:"custom",children:" Add Custom Genre"})]}),Q&&u.jsxs("div",{className:"mt-3 flex gap-2",children:[u.jsx("input",{type:"text",value:q,onChange:re=>P(re.target.value),onKeyPress:re=>re.key==="Enter"&&L(),placeholder:"Enter your genre (e.g., Future Bass)",className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",maxLength:30}),u.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Add"})]}),D&&!Q&&u.jsxs("p",{className:"text-xs text-green-400 mt-2",children:[" Selected: ",D]})]})]}),i===3&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("p",{className:"text-gray-400 text-sm",children:"Connect your social profiles (optional)"}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(pe,{name:"spotify",className:"w-4 h-4 inline mr-2"}),"Spotify"]}),u.jsx("input",{type:"url",value:V,onChange:re=>z(re.target.value),placeholder:"https://open.spotify.com/artist/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(pe,{name:"soundcloud",className:"w-4 h-4 inline mr-2"}),"SoundCloud"]}),u.jsx("input",{type:"url",value:j,onChange:re=>Ye(re.target.value),placeholder:"https://soundcloud.com/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(pe,{name:"instagram",className:"w-4 h-4 inline mr-2"}),"Instagram"]}),u.jsx("input",{type:"url",value:me,onChange:re=>O(re.target.value),placeholder:"https://instagram.com/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u.jsx(pe,{name:"twitter",className:"w-4 h-4 inline mr-2"}),"Twitter/X"]}),u.jsx("input",{type:"url",value:W,onChange:re=>de(re.target.value),placeholder:"https://twitter.com/...",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]})]}),u.jsxs("div",{className:"p-6 border-t border-gray-700 flex justify-between",children:[i>1&&u.jsx(qe,{onClick:()=>o(i-1),variant:"secondary",disabled:c,children:"Back"}),u.jsx("div",{className:"ml-auto",children:i<3?u.jsx(qe,{onClick:()=>o(i+1),disabled:i===1?!H:!le,children:"Next"}):u.jsx(qe,{onClick:ee,disabled:c||!H||!le,children:c?"Creating Profile...":"Complete Setup"})})]})]})})};function qD(){console.log(" App component rendering...");const[s,e]=S.useState(null),[n,i]=S.useState(null),[o,c]=S.useState(!0),[d,p]=S.useState(!1);return S.useEffect(()=>{console.log(" Setting up auth listener...");try{const g=mb(lg,async y=>{if(console.log(" Auth state changed:",y?"User logged in":"No user"),e(y),y)try{console.log(" Checking for SoundWave profile...");const x=await ug(y.uid);x?(console.log(" SoundWave profile found:",x),i(x),p(!1)):(console.log(" No SoundWave profile - showing onboarding"),p(!0))}catch(x){console.error(" Error checking profile:",x),p(!0)}c(!1),console.log(" Loading complete")});return()=>g()}catch(g){console.error(" Error setting up auth:",g),c(!1)}},[]),o?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:u.jsx("div",{className:"text-white text-xl",children:"Loading SoundWave..."})}):s&&d?u.jsx(BD,{currentUserId:s.uid,currentUserEmail:s.email||"",onComplete:g=>{console.log(" Onboarding complete:",g),i(g),p(!1)}}):s?u.jsx(T1,{children:u.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-900",children:[u.jsx(O1,{}),u.jsx("main",{className:"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8 mb-24",children:u.jsxs(t1,{children:[u.jsx(rn,{path:"/",element:u.jsx(oD,{})}),u.jsx(rn,{path:"/library",element:u.jsx(gD,{})}),u.jsx(rn,{path:"/community",element:u.jsx(mD,{})}),u.jsx(rn,{path:"/playlists",element:u.jsx(yD,{})}),u.jsx(rn,{path:"/labels",element:u.jsx(ID,{})}),u.jsx(rn,{path:"/labels/:labelId",element:u.jsx(UD,{})}),u.jsx(rn,{path:"/artist-hub",element:u.jsx(xD,{})}),u.jsx(rn,{path:"/live-streams",element:u.jsx(wD,{})}),u.jsx(rn,{path:"/tutorials",element:u.jsx(TD,{})}),u.jsx(rn,{path:"/masterclass",element:u.jsx(AD,{})}),u.jsx(rn,{path:"/samples",element:u.jsx(RD,{})}),u.jsx(rn,{path:"/profile/:userId",element:u.jsx(dD,{})}),u.jsx(rn,{path:"/upload",element:u.jsx(fD,{})}),u.jsx(rn,{path:"/import-collection",element:u.jsx(CD,{})}),u.jsx(rn,{path:"/inbox",element:u.jsx(zD,{})})]})}),u.jsx(k1,{}),u.jsx(U1,{}),u.jsx(pD,{})]})}):u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Authentication Required"}),u.jsx("p",{className:"mb-6",children:"Please sign in through the portal to access SoundWave."}),u.jsx("button",{onClick:()=>window.location.href="/Sites/soundwave/index.html",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg",children:"Go to SoundWave Gateway"})]})})}console.log(" SoundWave index.tsx loading...");const dg=document.getElementById("root");console.log(" Root element:",dg);if(!dg)throw console.error(" Could not find root element!"),new Error("Could not find root element to mount to");console.log(" Root element found, creating React root...");const FD=hS.createRoot(dg);console.log(" Rendering App...");FD.render(u.jsx(Zn.StrictMode,{children:u.jsx(V1,{children:u.jsx(qD,{})})}));console.log(" React render called");
